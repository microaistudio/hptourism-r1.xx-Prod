var Hfe=Object.defineProperty;var OI=e=>{throw TypeError(e)};var Wfe=(e,t,n)=>t in e?Hfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ie=(e,t,n)=>Wfe(e,typeof t!="symbol"?t+"":t,n),qA=(e,t,n)=>t.has(e)||OI("Cannot "+n);var Le=(e,t,n)=>(qA(e,t,"read from private field"),n?n.call(e):t.get(e)),Ir=(e,t,n)=>t.has(e)?OI("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),rr=(e,t,n,s)=>(qA(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),pn=(e,t,n)=>(qA(e,t,"access private method"),n);var Uw=(e,t,n,s)=>({set _(i){rr(e,t,i,n)},get _(){return Le(e,t,s)}});function Kfe(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(s,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var qw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ts(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NG={exports:{}},g_={},SG={exports:{}},bn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mj=Symbol.for("react.element"),Gfe=Symbol.for("react.portal"),Yfe=Symbol.for("react.fragment"),Xfe=Symbol.for("react.strict_mode"),Qfe=Symbol.for("react.profiler"),Zfe=Symbol.for("react.provider"),Jfe=Symbol.for("react.context"),eme=Symbol.for("react.forward_ref"),tme=Symbol.for("react.suspense"),rme=Symbol.for("react.memo"),nme=Symbol.for("react.lazy"),RI=Symbol.iterator;function sme(e){return e===null||typeof e!="object"?null:(e=RI&&e[RI]||e["@@iterator"],typeof e=="function"?e:null)}var _G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},CG=Object.assign,AG={};function V0(e,t,n){this.props=e,this.context=t,this.refs=AG,this.updater=n||_G}V0.prototype.isReactComponent={};V0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};V0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kG(){}kG.prototype=V0.prototype;function jO(e,t,n){this.props=e,this.context=t,this.refs=AG,this.updater=n||_G}var wO=jO.prototype=new kG;wO.constructor=jO;CG(wO,V0.prototype);wO.isPureReactComponent=!0;var DI=Array.isArray,PG=Object.prototype.hasOwnProperty,NO={current:null},TG={key:!0,ref:!0,__self:!0,__source:!0};function EG(e,t,n){var s,i={},a=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)PG.call(t,s)&&!TG.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)i[s]===void 0&&(i[s]=l[s]);return{$$typeof:Mj,type:e,key:a,ref:o,props:i,_owner:NO.current}}function ime(e,t){return{$$typeof:Mj,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function SO(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mj}function ame(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var MI=/\/+/g;function zA(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ame(""+e.key):t.toString(36)}function sN(e,t,n,s,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Mj:case Gfe:o=!0}}if(o)return o=e,i=i(o),e=s===""?"."+zA(o,0):s,DI(i)?(n="",e!=null&&(n=e.replace(MI,"$&/")+"/"),sN(i,t,n,"",function(d){return d})):i!=null&&(SO(i)&&(i=ime(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(MI,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=s===""?".":s+":",DI(e))for(var l=0;l<e.length;l++){a=e[l];var c=s+zA(a,l);o+=sN(a,t,n,c,i)}else if(c=sme(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=s+zA(a,l++),o+=sN(a,t,n,c,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function zw(e,t,n){if(e==null)return e;var s=[],i=0;return sN(e,s,"","",function(a){return t.call(n,a,i++)}),s}function ome(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var al={current:null},iN={transition:null},lme={ReactCurrentDispatcher:al,ReactCurrentBatchConfig:iN,ReactCurrentOwner:NO};function OG(){throw Error("act(...) is not supported in production builds of React.")}bn.Children={map:zw,forEach:function(e,t,n){zw(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return zw(e,function(){t++}),t},toArray:function(e){return zw(e,function(t){return t})||[]},only:function(e){if(!SO(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};bn.Component=V0;bn.Fragment=Yfe;bn.Profiler=Qfe;bn.PureComponent=jO;bn.StrictMode=Xfe;bn.Suspense=tme;bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lme;bn.act=OG;bn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=CG({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=NO.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)PG.call(t,c)&&!TG.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Mj,type:e.type,key:i,ref:a,props:s,_owner:o}};bn.createContext=function(e){return e={$$typeof:Jfe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Zfe,_context:e},e.Consumer=e};bn.createElement=EG;bn.createFactory=function(e){var t=EG.bind(null,e);return t.type=e,t};bn.createRef=function(){return{current:null}};bn.forwardRef=function(e){return{$$typeof:eme,render:e}};bn.isValidElement=SO;bn.lazy=function(e){return{$$typeof:nme,_payload:{_status:-1,_result:e},_init:ome}};bn.memo=function(e,t){return{$$typeof:rme,type:e,compare:t===void 0?null:t}};bn.startTransition=function(e){var t=iN.transition;iN.transition={};try{e()}finally{iN.transition=t}};bn.unstable_act=OG;bn.useCallback=function(e,t){return al.current.useCallback(e,t)};bn.useContext=function(e){return al.current.useContext(e)};bn.useDebugValue=function(){};bn.useDeferredValue=function(e){return al.current.useDeferredValue(e)};bn.useEffect=function(e,t){return al.current.useEffect(e,t)};bn.useId=function(){return al.current.useId()};bn.useImperativeHandle=function(e,t,n){return al.current.useImperativeHandle(e,t,n)};bn.useInsertionEffect=function(e,t){return al.current.useInsertionEffect(e,t)};bn.useLayoutEffect=function(e,t){return al.current.useLayoutEffect(e,t)};bn.useMemo=function(e,t){return al.current.useMemo(e,t)};bn.useReducer=function(e,t,n){return al.current.useReducer(e,t,n)};bn.useRef=function(e){return al.current.useRef(e)};bn.useState=function(e){return al.current.useState(e)};bn.useSyncExternalStore=function(e,t,n){return al.current.useSyncExternalStore(e,t,n)};bn.useTransition=function(){return al.current.useTransition()};bn.version="18.3.1";SG.exports=bn;var b=SG.exports;const Ae=ts(b),RG=Kfe({__proto__:null,default:Ae},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cme=b,dme=Symbol.for("react.element"),ume=Symbol.for("react.fragment"),hme=Object.prototype.hasOwnProperty,fme=cme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mme={key:!0,ref:!0,__self:!0,__source:!0};function DG(e,t,n){var s,i={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)hme.call(t,s)&&!mme.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:dme,type:e,key:a,ref:o,props:i,_owner:fme.current}}g_.Fragment=ume;g_.jsx=DG;g_.jsxs=DG;NG.exports=g_;var r=NG.exports,MG={exports:{}},Nc={},IG={exports:{}},LG={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(V,P){var z=V.length;V.push(P);e:for(;0<z;){var Z=z-1>>>1,F=V[Z];if(0<i(F,P))V[Z]=P,V[z]=F,z=Z;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var P=V[0],z=V.pop();if(z!==P){V[0]=z;e:for(var Z=0,F=V.length,W=F>>>1;Z<W;){var G=2*(Z+1)-1,H=V[G],se=G+1,J=V[se];if(0>i(H,z))se<F&&0>i(J,H)?(V[Z]=J,V[se]=z,Z=se):(V[Z]=H,V[G]=z,Z=G);else if(se<F&&0>i(J,z))V[Z]=J,V[se]=z,Z=se;else break e}}return P}function i(V,P){var z=V.sortIndex-P.sortIndex;return z!==0?z:V.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(V){for(var P=n(d);P!==null;){if(P.callback===null)s(d);else if(P.startTime<=V)s(d),P.sortIndex=P.expirationTime,t(c,P);else break;P=n(d)}}function w(V){if(g=!1,j(V),!p)if(n(c)!==null)p=!0,M(N);else{var P=n(d);P!==null&&L(w,P.startTime-V)}}function N(V,P){p=!1,g&&(g=!1,x(C),C=-1),m=!0;var z=f;try{for(j(P),h=n(c);h!==null&&(!(h.expirationTime>P)||V&&!k());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,f=h.priorityLevel;var F=Z(h.expirationTime<=P);P=e.unstable_now(),typeof F=="function"?h.callback=F:h===n(c)&&s(c),j(P)}else s(c);h=n(c)}if(h!==null)var W=!0;else{var G=n(d);G!==null&&L(w,G.startTime-P),W=!1}return W}finally{h=null,f=z,m=!1}}var S=!1,T=null,C=-1,A=5,R=-1;function k(){return!(e.unstable_now()-R<A)}function O(){if(T!==null){var V=e.unstable_now();R=V;var P=!0;try{P=T(!0,V)}finally{P?$():(S=!1,T=null)}}else S=!1}var $;if(typeof y=="function")$=function(){y(O)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,q=D.port2;D.port1.onmessage=O,$=function(){q.postMessage(null)}}else $=function(){v(O,0)};function M(V){T=V,S||(S=!0,$())}function L(V,P){C=v(function(){V(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_continueExecution=function(){p||m||(p=!0,M(N))},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(V){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var z=f;f=P;try{return V()}finally{f=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(V,P){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var z=f;f=V;try{return P()}finally{f=z}},e.unstable_scheduleCallback=function(V,P,z){var Z=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?Z+z:Z):z=Z,V){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=z+F,V={id:u++,callback:P,priorityLevel:V,startTime:z,expirationTime:F,sortIndex:-1},z>Z?(V.sortIndex=z,t(d,V),n(c)===null&&V===n(d)&&(g?(x(C),C=-1):g=!0,L(w,z-Z))):(V.sortIndex=F,t(c,V),p||m||(p=!0,M(N))),V},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(V){var P=f;return function(){var z=f;f=P;try{return V.apply(this,arguments)}finally{f=z}}}})(LG);IG.exports=LG;var pme=IG.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gme=b,yc=pme;function Bt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FG=new Set,t1={};function qg(e,t){qv(e,t),qv(e+"Capture",t)}function qv(e,t){for(t1[e]=t,e=0;e<t.length;e++)FG.add(t[e])}var nf=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_P=Object.prototype.hasOwnProperty,xme=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,II={},LI={};function vme(e){return _P.call(LI,e)?!0:_P.call(II,e)?!1:xme.test(e)?LI[e]=!0:(II[e]=!0,!1)}function yme(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bme(e,t,n,s){if(t===null||typeof t>"u"||yme(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ol(e,t,n,s,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var ao={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ao[e]=new ol(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ao[t]=new ol(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ao[e]=new ol(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ao[e]=new ol(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ao[e]=new ol(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ao[e]=new ol(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ao[e]=new ol(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ao[e]=new ol(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ao[e]=new ol(e,5,!1,e.toLowerCase(),null,!1,!1)});var _O=/[\-:]([a-z])/g;function CO(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_O,CO);ao[t]=new ol(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_O,CO);ao[t]=new ol(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_O,CO);ao[t]=new ol(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ao[e]=new ol(e,1,!1,e.toLowerCase(),null,!1,!1)});ao.xlinkHref=new ol("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ao[e]=new ol(e,1,!1,e.toLowerCase(),null,!0,!0)});function AO(e,t,n,s){var i=ao.hasOwnProperty(t)?ao[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bme(t,n,i,s)&&(n=null),s||i===null?vme(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,s=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var yf=gme.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hw=Symbol.for("react.element"),Tx=Symbol.for("react.portal"),Ex=Symbol.for("react.fragment"),kO=Symbol.for("react.strict_mode"),CP=Symbol.for("react.profiler"),$G=Symbol.for("react.provider"),BG=Symbol.for("react.context"),PO=Symbol.for("react.forward_ref"),AP=Symbol.for("react.suspense"),kP=Symbol.for("react.suspense_list"),TO=Symbol.for("react.memo"),Qf=Symbol.for("react.lazy"),VG=Symbol.for("react.offscreen"),FI=Symbol.iterator;function Sy(e){return e===null||typeof e!="object"?null:(e=FI&&e[FI]||e["@@iterator"],typeof e=="function"?e:null)}var yi=Object.assign,HA;function ob(e){if(HA===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);HA=t&&t[1]||""}return`
`+HA+e}var WA=!1;function KA(e,t){if(!e||WA)return"";WA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),a=s.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{WA=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ob(e):""}function jme(e){switch(e.tag){case 5:return ob(e.type);case 16:return ob("Lazy");case 13:return ob("Suspense");case 19:return ob("SuspenseList");case 0:case 2:case 15:return e=KA(e.type,!1),e;case 11:return e=KA(e.type.render,!1),e;case 1:return e=KA(e.type,!0),e;default:return""}}function PP(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ex:return"Fragment";case Tx:return"Portal";case CP:return"Profiler";case kO:return"StrictMode";case AP:return"Suspense";case kP:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case BG:return(e.displayName||"Context")+".Consumer";case $G:return(e._context.displayName||"Context")+".Provider";case PO:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case TO:return t=e.displayName||null,t!==null?t:PP(e.type)||"Memo";case Qf:t=e._payload,e=e._init;try{return PP(e(t))}catch{}}return null}function wme(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return PP(t);case 8:return t===kO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Im(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function UG(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nme(e){var t=UG(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ww(e){e._valueTracker||(e._valueTracker=Nme(e))}function qG(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=UG(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function qN(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function TP(e,t){var n=t.checked;return yi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $I(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Im(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function zG(e,t){t=t.checked,t!=null&&AO(e,"checked",t,!1)}function EP(e,t){zG(e,t);var n=Im(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?OP(e,t.type,n):t.hasOwnProperty("defaultValue")&&OP(e,t.type,Im(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function BI(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function OP(e,t,n){(t!=="number"||qN(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var lb=Array.isArray;function nv(e,t,n,s){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Im(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,s&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function RP(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Bt(91));return yi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function VI(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Bt(92));if(lb(n)){if(1<n.length)throw Error(Bt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Im(n)}}function HG(e,t){var n=Im(t.value),s=Im(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function UI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function WG(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function DP(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?WG(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Kw,KG=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Kw=Kw||document.createElement("div"),Kw.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Kw.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function r1(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var wb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sme=["Webkit","ms","Moz","O"];Object.keys(wb).forEach(function(e){Sme.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wb[t]=wb[e]})});function GG(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||wb.hasOwnProperty(e)&&wb[e]?(""+t).trim():t+"px"}function YG(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=GG(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,i):e[n]=i}}var _me=yi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function MP(e,t){if(t){if(_me[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Bt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Bt(62))}}function IP(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LP=null;function EO(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var FP=null,sv=null,iv=null;function qI(e){if(e=Fj(e)){if(typeof FP!="function")throw Error(Bt(280));var t=e.stateNode;t&&(t=j_(t),FP(e.stateNode,e.type,t))}}function XG(e){sv?iv?iv.push(e):iv=[e]:sv=e}function QG(){if(sv){var e=sv,t=iv;if(iv=sv=null,qI(e),t)for(e=0;e<t.length;e++)qI(t[e])}}function ZG(e,t){return e(t)}function JG(){}var GA=!1;function eY(e,t,n){if(GA)return e(t,n);GA=!0;try{return ZG(e,t,n)}finally{GA=!1,(sv!==null||iv!==null)&&(JG(),QG())}}function n1(e,t){var n=e.stateNode;if(n===null)return null;var s=j_(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Bt(231,t,typeof n));return n}var $P=!1;if(nf)try{var _y={};Object.defineProperty(_y,"passive",{get:function(){$P=!0}}),window.addEventListener("test",_y,_y),window.removeEventListener("test",_y,_y)}catch{$P=!1}function Cme(e,t,n,s,i,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var Nb=!1,zN=null,HN=!1,BP=null,Ame={onError:function(e){Nb=!0,zN=e}};function kme(e,t,n,s,i,a,o,l,c){Nb=!1,zN=null,Cme.apply(Ame,arguments)}function Pme(e,t,n,s,i,a,o,l,c){if(kme.apply(this,arguments),Nb){if(Nb){var d=zN;Nb=!1,zN=null}else throw Error(Bt(198));HN||(HN=!0,BP=d)}}function zg(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tY(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zI(e){if(zg(e)!==e)throw Error(Bt(188))}function Tme(e){var t=e.alternate;if(!t){if(t=zg(e),t===null)throw Error(Bt(188));return t!==e?null:e}for(var n=e,s=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return zI(i),e;if(a===s)return zI(i),t;a=a.sibling}throw Error(Bt(188))}if(n.return!==s.return)n=i,s=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o)throw Error(Bt(189))}}if(n.alternate!==s)throw Error(Bt(190))}if(n.tag!==3)throw Error(Bt(188));return n.stateNode.current===n?e:t}function rY(e){return e=Tme(e),e!==null?nY(e):null}function nY(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=nY(e);if(t!==null)return t;e=e.sibling}return null}var sY=yc.unstable_scheduleCallback,HI=yc.unstable_cancelCallback,Eme=yc.unstable_shouldYield,Ome=yc.unstable_requestPaint,zi=yc.unstable_now,Rme=yc.unstable_getCurrentPriorityLevel,OO=yc.unstable_ImmediatePriority,iY=yc.unstable_UserBlockingPriority,WN=yc.unstable_NormalPriority,Dme=yc.unstable_LowPriority,aY=yc.unstable_IdlePriority,x_=null,Gu=null;function Mme(e){if(Gu&&typeof Gu.onCommitFiberRoot=="function")try{Gu.onCommitFiberRoot(x_,e,void 0,(e.current.flags&128)===128)}catch{}}var Yd=Math.clz32?Math.clz32:Fme,Ime=Math.log,Lme=Math.LN2;function Fme(e){return e>>>=0,e===0?32:31-(Ime(e)/Lme|0)|0}var Gw=64,Yw=4194304;function cb(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function KN(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?s=cb(l):(a&=o,a!==0&&(s=cb(a)))}else o=n&~i,o!==0?s=cb(o):a!==0&&(s=cb(a));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Yd(t),i=1<<n,s|=e[n],t&=~i;return s}function $me(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bme(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Yd(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&s)&&(i[o]=$me(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function VP(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function oY(){var e=Gw;return Gw<<=1,!(Gw&4194240)&&(Gw=64),e}function YA(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ij(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Yd(t),e[t]=n}function Vme(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Yd(n),a=1<<i;t[i]=0,s[i]=-1,e[i]=-1,n&=~a}}function RO(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Yd(n),i=1<<s;i&t|e[s]&t&&(e[s]|=t),n&=~i}}var hs=0;function lY(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var cY,DO,dY,uY,hY,UP=!1,Xw=[],jm=null,wm=null,Nm=null,s1=new Map,i1=new Map,em=[],Ume="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function WI(e,t){switch(e){case"focusin":case"focusout":jm=null;break;case"dragenter":case"dragleave":wm=null;break;case"mouseover":case"mouseout":Nm=null;break;case"pointerover":case"pointerout":s1.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":i1.delete(t.pointerId)}}function Cy(e,t,n,s,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Fj(t),t!==null&&DO(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function qme(e,t,n,s,i){switch(t){case"focusin":return jm=Cy(jm,e,t,n,s,i),!0;case"dragenter":return wm=Cy(wm,e,t,n,s,i),!0;case"mouseover":return Nm=Cy(Nm,e,t,n,s,i),!0;case"pointerover":var a=i.pointerId;return s1.set(a,Cy(s1.get(a)||null,e,t,n,s,i)),!0;case"gotpointercapture":return a=i.pointerId,i1.set(a,Cy(i1.get(a)||null,e,t,n,s,i)),!0}return!1}function fY(e){var t=Gp(e.target);if(t!==null){var n=zg(t);if(n!==null){if(t=n.tag,t===13){if(t=tY(n),t!==null){e.blockedOn=t,hY(e.priority,function(){dY(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function aN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=qP(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);LP=s,n.target.dispatchEvent(s),LP=null}else return t=Fj(n),t!==null&&DO(t),e.blockedOn=n,!1;t.shift()}return!0}function KI(e,t,n){aN(e)&&n.delete(t)}function zme(){UP=!1,jm!==null&&aN(jm)&&(jm=null),wm!==null&&aN(wm)&&(wm=null),Nm!==null&&aN(Nm)&&(Nm=null),s1.forEach(KI),i1.forEach(KI)}function Ay(e,t){e.blockedOn===t&&(e.blockedOn=null,UP||(UP=!0,yc.unstable_scheduleCallback(yc.unstable_NormalPriority,zme)))}function a1(e){function t(i){return Ay(i,e)}if(0<Xw.length){Ay(Xw[0],e);for(var n=1;n<Xw.length;n++){var s=Xw[n];s.blockedOn===e&&(s.blockedOn=null)}}for(jm!==null&&Ay(jm,e),wm!==null&&Ay(wm,e),Nm!==null&&Ay(Nm,e),s1.forEach(t),i1.forEach(t),n=0;n<em.length;n++)s=em[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<em.length&&(n=em[0],n.blockedOn===null);)fY(n),n.blockedOn===null&&em.shift()}var av=yf.ReactCurrentBatchConfig,GN=!0;function Hme(e,t,n,s){var i=hs,a=av.transition;av.transition=null;try{hs=1,MO(e,t,n,s)}finally{hs=i,av.transition=a}}function Wme(e,t,n,s){var i=hs,a=av.transition;av.transition=null;try{hs=4,MO(e,t,n,s)}finally{hs=i,av.transition=a}}function MO(e,t,n,s){if(GN){var i=qP(e,t,n,s);if(i===null)ik(e,t,s,YN,n),WI(e,s);else if(qme(i,e,t,n,s))s.stopPropagation();else if(WI(e,s),t&4&&-1<Ume.indexOf(e)){for(;i!==null;){var a=Fj(i);if(a!==null&&cY(a),a=qP(e,t,n,s),a===null&&ik(e,t,s,YN,n),a===i)break;i=a}i!==null&&s.stopPropagation()}else ik(e,t,s,null,n)}}var YN=null;function qP(e,t,n,s){if(YN=null,e=EO(s),e=Gp(e),e!==null)if(t=zg(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tY(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return YN=e,null}function mY(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Rme()){case OO:return 1;case iY:return 4;case WN:case Dme:return 16;case aY:return 536870912;default:return 16}default:return 16}}var mm=null,IO=null,oN=null;function pY(){if(oN)return oN;var e,t=IO,n=t.length,s,i="value"in mm?mm.value:mm.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===i[a-s];s++);return oN=i.slice(e,1<s?1-s:void 0)}function lN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qw(){return!0}function GI(){return!1}function Sc(e){function t(n,s,i,a,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Qw:GI,this.isPropagationStopped=GI,this}return yi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qw)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qw)},persist:function(){},isPersistent:Qw}),t}var U0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LO=Sc(U0),Lj=yi({},U0,{view:0,detail:0}),Kme=Sc(Lj),XA,QA,ky,v_=yi({},Lj,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:FO,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ky&&(ky&&e.type==="mousemove"?(XA=e.screenX-ky.screenX,QA=e.screenY-ky.screenY):QA=XA=0,ky=e),XA)},movementY:function(e){return"movementY"in e?e.movementY:QA}}),YI=Sc(v_),Gme=yi({},v_,{dataTransfer:0}),Yme=Sc(Gme),Xme=yi({},Lj,{relatedTarget:0}),ZA=Sc(Xme),Qme=yi({},U0,{animationName:0,elapsedTime:0,pseudoElement:0}),Zme=Sc(Qme),Jme=yi({},U0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),epe=Sc(Jme),tpe=yi({},U0,{data:0}),XI=Sc(tpe),rpe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},npe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},spe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ipe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=spe[e])?!!t[e]:!1}function FO(){return ipe}var ape=yi({},Lj,{key:function(e){if(e.key){var t=rpe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?npe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:FO,charCode:function(e){return e.type==="keypress"?lN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ope=Sc(ape),lpe=yi({},v_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),QI=Sc(lpe),cpe=yi({},Lj,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:FO}),dpe=Sc(cpe),upe=yi({},U0,{propertyName:0,elapsedTime:0,pseudoElement:0}),hpe=Sc(upe),fpe=yi({},v_,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mpe=Sc(fpe),ppe=[9,13,27,32],$O=nf&&"CompositionEvent"in window,Sb=null;nf&&"documentMode"in document&&(Sb=document.documentMode);var gpe=nf&&"TextEvent"in window&&!Sb,gY=nf&&(!$O||Sb&&8<Sb&&11>=Sb),ZI=" ",JI=!1;function xY(e,t){switch(e){case"keyup":return ppe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vY(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ox=!1;function xpe(e,t){switch(e){case"compositionend":return vY(t);case"keypress":return t.which!==32?null:(JI=!0,ZI);case"textInput":return e=t.data,e===ZI&&JI?null:e;default:return null}}function vpe(e,t){if(Ox)return e==="compositionend"||!$O&&xY(e,t)?(e=pY(),oN=IO=mm=null,Ox=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gY&&t.locale!=="ko"?null:t.data;default:return null}}var ype={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ype[e.type]:t==="textarea"}function yY(e,t,n,s){XG(s),t=XN(t,"onChange"),0<t.length&&(n=new LO("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var _b=null,o1=null;function bpe(e){TY(e,0)}function y_(e){var t=Mx(e);if(qG(t))return e}function jpe(e,t){if(e==="change")return t}var bY=!1;if(nf){var JA;if(nf){var ek="oninput"in document;if(!ek){var tL=document.createElement("div");tL.setAttribute("oninput","return;"),ek=typeof tL.oninput=="function"}JA=ek}else JA=!1;bY=JA&&(!document.documentMode||9<document.documentMode)}function rL(){_b&&(_b.detachEvent("onpropertychange",jY),o1=_b=null)}function jY(e){if(e.propertyName==="value"&&y_(o1)){var t=[];yY(t,o1,e,EO(e)),eY(bpe,t)}}function wpe(e,t,n){e==="focusin"?(rL(),_b=t,o1=n,_b.attachEvent("onpropertychange",jY)):e==="focusout"&&rL()}function Npe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return y_(o1)}function Spe(e,t){if(e==="click")return y_(t)}function _pe(e,t){if(e==="input"||e==="change")return y_(t)}function Cpe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var nu=typeof Object.is=="function"?Object.is:Cpe;function l1(e,t){if(nu(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!_P.call(t,i)||!nu(e[i],t[i]))return!1}return!0}function nL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sL(e,t){var n=nL(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nL(n)}}function wY(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wY(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function NY(){for(var e=window,t=qN();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=qN(e.document)}return t}function BO(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ape(e){var t=NY(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wY(n.ownerDocument.documentElement,n)){if(s!==null&&BO(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(s.start,i);s=s.end===void 0?a:Math.min(s.end,i),!e.extend&&a>s&&(i=s,s=a,a=i),i=sL(n,a);var o=sL(n,s);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kpe=nf&&"documentMode"in document&&11>=document.documentMode,Rx=null,zP=null,Cb=null,HP=!1;function iL(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;HP||Rx==null||Rx!==qN(s)||(s=Rx,"selectionStart"in s&&BO(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Cb&&l1(Cb,s)||(Cb=s,s=XN(zP,"onSelect"),0<s.length&&(t=new LO("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Rx)))}function Zw(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Dx={animationend:Zw("Animation","AnimationEnd"),animationiteration:Zw("Animation","AnimationIteration"),animationstart:Zw("Animation","AnimationStart"),transitionend:Zw("Transition","TransitionEnd")},tk={},SY={};nf&&(SY=document.createElement("div").style,"AnimationEvent"in window||(delete Dx.animationend.animation,delete Dx.animationiteration.animation,delete Dx.animationstart.animation),"TransitionEvent"in window||delete Dx.transitionend.transition);function b_(e){if(tk[e])return tk[e];if(!Dx[e])return e;var t=Dx[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in SY)return tk[e]=t[n];return e}var _Y=b_("animationend"),CY=b_("animationiteration"),AY=b_("animationstart"),kY=b_("transitionend"),PY=new Map,aL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tp(e,t){PY.set(e,t),qg(t,[e])}for(var rk=0;rk<aL.length;rk++){var nk=aL[rk],Ppe=nk.toLowerCase(),Tpe=nk[0].toUpperCase()+nk.slice(1);tp(Ppe,"on"+Tpe)}tp(_Y,"onAnimationEnd");tp(CY,"onAnimationIteration");tp(AY,"onAnimationStart");tp("dblclick","onDoubleClick");tp("focusin","onFocus");tp("focusout","onBlur");tp(kY,"onTransitionEnd");qv("onMouseEnter",["mouseout","mouseover"]);qv("onMouseLeave",["mouseout","mouseover"]);qv("onPointerEnter",["pointerout","pointerover"]);qv("onPointerLeave",["pointerout","pointerover"]);qg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qg("onBeforeInput",["compositionend","keypress","textInput","paste"]);qg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Epe=new Set("cancel close invalid load scroll toggle".split(" ").concat(db));function oL(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Pme(s,t,void 0,e),e.currentTarget=null}function TY(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],i=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;oL(i,l,d),a=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;oL(i,l,d),a=c}}}if(HN)throw e=BP,HN=!1,BP=null,e}function Ks(e,t){var n=t[XP];n===void 0&&(n=t[XP]=new Set);var s=e+"__bubble";n.has(s)||(EY(t,e,2,!1),n.add(s))}function sk(e,t,n){var s=0;t&&(s|=4),EY(n,e,s,t)}var Jw="_reactListening"+Math.random().toString(36).slice(2);function c1(e){if(!e[Jw]){e[Jw]=!0,FG.forEach(function(n){n!=="selectionchange"&&(Epe.has(n)||sk(n,!1,e),sk(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Jw]||(t[Jw]=!0,sk("selectionchange",!1,t))}}function EY(e,t,n,s){switch(mY(t)){case 1:var i=Hme;break;case 4:i=Wme;break;default:i=MO}n=i.bind(null,t,n,e),i=void 0,!$P||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ik(e,t,n,s,i){var a=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Gp(l),o===null)return;if(c=o.tag,c===5||c===6){s=a=o;continue e}l=l.parentNode}}s=s.return}eY(function(){var d=a,u=EO(n),h=[];e:{var f=PY.get(e);if(f!==void 0){var m=LO,p=e;switch(e){case"keypress":if(lN(n)===0)break e;case"keydown":case"keyup":m=ope;break;case"focusin":p="focus",m=ZA;break;case"focusout":p="blur",m=ZA;break;case"beforeblur":case"afterblur":m=ZA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=YI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Yme;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=dpe;break;case _Y:case CY:case AY:m=Zme;break;case kY:m=hpe;break;case"scroll":m=Kme;break;case"wheel":m=mpe;break;case"copy":case"cut":case"paste":m=epe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=QI}var g=(t&4)!==0,v=!g&&e==="scroll",x=g?f!==null?f+"Capture":null:f;g=[];for(var y=d,j;y!==null;){j=y;var w=j.stateNode;if(j.tag===5&&w!==null&&(j=w,x!==null&&(w=n1(y,x),w!=null&&g.push(d1(y,w,j)))),v)break;y=y.return}0<g.length&&(f=new m(f,p,null,n,u),h.push({event:f,listeners:g}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&n!==LP&&(p=n.relatedTarget||n.fromElement)&&(Gp(p)||p[sf]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=n.relatedTarget||n.toElement,m=d,p=p?Gp(p):null,p!==null&&(v=zg(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(g=YI,w="onMouseLeave",x="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=QI,w="onPointerLeave",x="onPointerEnter",y="pointer"),v=m==null?f:Mx(m),j=p==null?f:Mx(p),f=new g(w,y+"leave",m,n,u),f.target=v,f.relatedTarget=j,w=null,Gp(u)===d&&(g=new g(x,y+"enter",p,n,u),g.target=j,g.relatedTarget=v,w=g),v=w,m&&p)t:{for(g=m,x=p,y=0,j=g;j;j=dx(j))y++;for(j=0,w=x;w;w=dx(w))j++;for(;0<y-j;)g=dx(g),y--;for(;0<j-y;)x=dx(x),j--;for(;y--;){if(g===x||x!==null&&g===x.alternate)break t;g=dx(g),x=dx(x)}g=null}else g=null;m!==null&&lL(h,f,m,g,!1),p!==null&&v!==null&&lL(h,v,p,g,!0)}}e:{if(f=d?Mx(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var N=jpe;else if(eL(f))if(bY)N=_pe;else{N=Npe;var S=wpe}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=Spe);if(N&&(N=N(e,d))){yY(h,N,n,u);break e}S&&S(e,f,d),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&OP(f,"number",f.value)}switch(S=d?Mx(d):window,e){case"focusin":(eL(S)||S.contentEditable==="true")&&(Rx=S,zP=d,Cb=null);break;case"focusout":Cb=zP=Rx=null;break;case"mousedown":HP=!0;break;case"contextmenu":case"mouseup":case"dragend":HP=!1,iL(h,n,u);break;case"selectionchange":if(kpe)break;case"keydown":case"keyup":iL(h,n,u)}var T;if($O)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Ox?xY(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(gY&&n.locale!=="ko"&&(Ox||C!=="onCompositionStart"?C==="onCompositionEnd"&&Ox&&(T=pY()):(mm=u,IO="value"in mm?mm.value:mm.textContent,Ox=!0)),S=XN(d,C),0<S.length&&(C=new XI(C,e,null,n,u),h.push({event:C,listeners:S}),T?C.data=T:(T=vY(n),T!==null&&(C.data=T)))),(T=gpe?xpe(e,n):vpe(e,n))&&(d=XN(d,"onBeforeInput"),0<d.length&&(u=new XI("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:d}),u.data=T))}TY(h,t)})}function d1(e,t,n){return{instance:e,listener:t,currentTarget:n}}function XN(e,t){for(var n=t+"Capture",s=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=n1(e,n),a!=null&&s.unshift(d1(e,a,i)),a=n1(e,t),a!=null&&s.push(d1(e,a,i))),e=e.return}return s}function dx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lL(e,t,n,s,i){for(var a=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,i?(c=n1(n,a),c!=null&&o.unshift(d1(n,c,l))):i||(c=n1(n,a),c!=null&&o.push(d1(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Ope=/\r\n?/g,Rpe=/\u0000|\uFFFD/g;function cL(e){return(typeof e=="string"?e:""+e).replace(Ope,`
`).replace(Rpe,"")}function e2(e,t,n){if(t=cL(t),cL(e)!==t&&n)throw Error(Bt(425))}function QN(){}var WP=null,KP=null;function GP(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var YP=typeof setTimeout=="function"?setTimeout:void 0,Dpe=typeof clearTimeout=="function"?clearTimeout:void 0,dL=typeof Promise=="function"?Promise:void 0,Mpe=typeof queueMicrotask=="function"?queueMicrotask:typeof dL<"u"?function(e){return dL.resolve(null).then(e).catch(Ipe)}:YP;function Ipe(e){setTimeout(function(){throw e})}function ak(e,t){var n=t,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){e.removeChild(i),a1(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);a1(t)}function Sm(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function uL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var q0=Math.random().toString(36).slice(2),Uu="__reactFiber$"+q0,u1="__reactProps$"+q0,sf="__reactContainer$"+q0,XP="__reactEvents$"+q0,Lpe="__reactListeners$"+q0,Fpe="__reactHandles$"+q0;function Gp(e){var t=e[Uu];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sf]||n[Uu]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=uL(e);e!==null;){if(n=e[Uu])return n;e=uL(e)}return t}e=n,n=e.parentNode}return null}function Fj(e){return e=e[Uu]||e[sf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mx(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Bt(33))}function j_(e){return e[u1]||null}var QP=[],Ix=-1;function rp(e){return{current:e}}function Qs(e){0>Ix||(e.current=QP[Ix],QP[Ix]=null,Ix--)}function Bs(e,t){Ix++,QP[Ix]=e.current,e.current=t}var Lm={},Ro=rp(Lm),Nl=rp(!1),yg=Lm;function zv(e,t){var n=e.type.contextTypes;if(!n)return Lm;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Sl(e){return e=e.childContextTypes,e!=null}function ZN(){Qs(Nl),Qs(Ro)}function hL(e,t,n){if(Ro.current!==Lm)throw Error(Bt(168));Bs(Ro,t),Bs(Nl,n)}function OY(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(Bt(108,wme(e)||"Unknown",i));return yi({},n,s)}function JN(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lm,yg=Ro.current,Bs(Ro,e),Bs(Nl,Nl.current),!0}function fL(e,t,n){var s=e.stateNode;if(!s)throw Error(Bt(169));n?(e=OY(e,t,yg),s.__reactInternalMemoizedMergedChildContext=e,Qs(Nl),Qs(Ro),Bs(Ro,e)):Qs(Nl),Bs(Nl,n)}var Lh=null,w_=!1,ok=!1;function RY(e){Lh===null?Lh=[e]:Lh.push(e)}function $pe(e){w_=!0,RY(e)}function np(){if(!ok&&Lh!==null){ok=!0;var e=0,t=hs;try{var n=Lh;for(hs=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}Lh=null,w_=!1}catch(i){throw Lh!==null&&(Lh=Lh.slice(e+1)),sY(OO,np),i}finally{hs=t,ok=!1}}return null}var Lx=[],Fx=0,e5=null,t5=0,Kc=[],Gc=0,bg=null,Uh=1,qh="";function Dp(e,t){Lx[Fx++]=t5,Lx[Fx++]=e5,e5=e,t5=t}function DY(e,t,n){Kc[Gc++]=Uh,Kc[Gc++]=qh,Kc[Gc++]=bg,bg=e;var s=Uh;e=qh;var i=32-Yd(s)-1;s&=~(1<<i),n+=1;var a=32-Yd(t)+i;if(30<a){var o=i-i%5;a=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Uh=1<<32-Yd(t)+i|n<<i|s,qh=a+e}else Uh=1<<a|n<<i|s,qh=e}function VO(e){e.return!==null&&(Dp(e,1),DY(e,1,0))}function UO(e){for(;e===e5;)e5=Lx[--Fx],Lx[Fx]=null,t5=Lx[--Fx],Lx[Fx]=null;for(;e===bg;)bg=Kc[--Gc],Kc[Gc]=null,qh=Kc[--Gc],Kc[Gc]=null,Uh=Kc[--Gc],Kc[Gc]=null}var fc=null,cc=null,si=!1,Bd=null;function MY(e,t){var n=nd(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function mL(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fc=e,cc=Sm(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fc=e,cc=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bg!==null?{id:Uh,overflow:qh}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=nd(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,fc=e,cc=null,!0):!1;default:return!1}}function ZP(e){return(e.mode&1)!==0&&(e.flags&128)===0}function JP(e){if(si){var t=cc;if(t){var n=t;if(!mL(e,t)){if(ZP(e))throw Error(Bt(418));t=Sm(n.nextSibling);var s=fc;t&&mL(e,t)?MY(s,n):(e.flags=e.flags&-4097|2,si=!1,fc=e)}}else{if(ZP(e))throw Error(Bt(418));e.flags=e.flags&-4097|2,si=!1,fc=e}}}function pL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fc=e}function t2(e){if(e!==fc)return!1;if(!si)return pL(e),si=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!GP(e.type,e.memoizedProps)),t&&(t=cc)){if(ZP(e))throw IY(),Error(Bt(418));for(;t;)MY(e,t),t=Sm(t.nextSibling)}if(pL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Bt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){cc=Sm(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}cc=null}}else cc=fc?Sm(e.stateNode.nextSibling):null;return!0}function IY(){for(var e=cc;e;)e=Sm(e.nextSibling)}function Hv(){cc=fc=null,si=!1}function qO(e){Bd===null?Bd=[e]:Bd.push(e)}var Bpe=yf.ReactCurrentBatchConfig;function Py(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Bt(309));var s=n.stateNode}if(!s)throw Error(Bt(147,e));var i=s,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(Bt(284));if(!n._owner)throw Error(Bt(290,e))}return e}function r2(e,t){throw e=Object.prototype.toString.call(t),Error(Bt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gL(e){var t=e._init;return t(e._payload)}function LY(e){function t(x,y){if(e){var j=x.deletions;j===null?(x.deletions=[y],x.flags|=16):j.push(y)}}function n(x,y){if(!e)return null;for(;y!==null;)t(x,y),y=y.sibling;return null}function s(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function i(x,y){return x=km(x,y),x.index=0,x.sibling=null,x}function a(x,y,j){return x.index=j,e?(j=x.alternate,j!==null?(j=j.index,j<y?(x.flags|=2,y):j):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,y,j,w){return y===null||y.tag!==6?(y=mk(j,x.mode,w),y.return=x,y):(y=i(y,j),y.return=x,y)}function c(x,y,j,w){var N=j.type;return N===Ex?u(x,y,j.props.children,w,j.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Qf&&gL(N)===y.type)?(w=i(y,j.props),w.ref=Py(x,y,j),w.return=x,w):(w=pN(j.type,j.key,j.props,null,x.mode,w),w.ref=Py(x,y,j),w.return=x,w)}function d(x,y,j,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==j.containerInfo||y.stateNode.implementation!==j.implementation?(y=pk(j,x.mode,w),y.return=x,y):(y=i(y,j.children||[]),y.return=x,y)}function u(x,y,j,w,N){return y===null||y.tag!==7?(y=fg(j,x.mode,w,N),y.return=x,y):(y=i(y,j),y.return=x,y)}function h(x,y,j){if(typeof y=="string"&&y!==""||typeof y=="number")return y=mk(""+y,x.mode,j),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hw:return j=pN(y.type,y.key,y.props,null,x.mode,j),j.ref=Py(x,null,y),j.return=x,j;case Tx:return y=pk(y,x.mode,j),y.return=x,y;case Qf:var w=y._init;return h(x,w(y._payload),j)}if(lb(y)||Sy(y))return y=fg(y,x.mode,j,null),y.return=x,y;r2(x,y)}return null}function f(x,y,j,w){var N=y!==null?y.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:l(x,y,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Hw:return j.key===N?c(x,y,j,w):null;case Tx:return j.key===N?d(x,y,j,w):null;case Qf:return N=j._init,f(x,y,N(j._payload),w)}if(lb(j)||Sy(j))return N!==null?null:u(x,y,j,w,null);r2(x,j)}return null}function m(x,y,j,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return x=x.get(j)||null,l(y,x,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Hw:return x=x.get(w.key===null?j:w.key)||null,c(y,x,w,N);case Tx:return x=x.get(w.key===null?j:w.key)||null,d(y,x,w,N);case Qf:var S=w._init;return m(x,y,j,S(w._payload),N)}if(lb(w)||Sy(w))return x=x.get(j)||null,u(y,x,w,N,null);r2(y,w)}return null}function p(x,y,j,w){for(var N=null,S=null,T=y,C=y=0,A=null;T!==null&&C<j.length;C++){T.index>C?(A=T,T=null):A=T.sibling;var R=f(x,T,j[C],w);if(R===null){T===null&&(T=A);break}e&&T&&R.alternate===null&&t(x,T),y=a(R,y,C),S===null?N=R:S.sibling=R,S=R,T=A}if(C===j.length)return n(x,T),si&&Dp(x,C),N;if(T===null){for(;C<j.length;C++)T=h(x,j[C],w),T!==null&&(y=a(T,y,C),S===null?N=T:S.sibling=T,S=T);return si&&Dp(x,C),N}for(T=s(x,T);C<j.length;C++)A=m(T,x,C,j[C],w),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?C:A.key),y=a(A,y,C),S===null?N=A:S.sibling=A,S=A);return e&&T.forEach(function(k){return t(x,k)}),si&&Dp(x,C),N}function g(x,y,j,w){var N=Sy(j);if(typeof N!="function")throw Error(Bt(150));if(j=N.call(j),j==null)throw Error(Bt(151));for(var S=N=null,T=y,C=y=0,A=null,R=j.next();T!==null&&!R.done;C++,R=j.next()){T.index>C?(A=T,T=null):A=T.sibling;var k=f(x,T,R.value,w);if(k===null){T===null&&(T=A);break}e&&T&&k.alternate===null&&t(x,T),y=a(k,y,C),S===null?N=k:S.sibling=k,S=k,T=A}if(R.done)return n(x,T),si&&Dp(x,C),N;if(T===null){for(;!R.done;C++,R=j.next())R=h(x,R.value,w),R!==null&&(y=a(R,y,C),S===null?N=R:S.sibling=R,S=R);return si&&Dp(x,C),N}for(T=s(x,T);!R.done;C++,R=j.next())R=m(T,x,C,R.value,w),R!==null&&(e&&R.alternate!==null&&T.delete(R.key===null?C:R.key),y=a(R,y,C),S===null?N=R:S.sibling=R,S=R);return e&&T.forEach(function(O){return t(x,O)}),si&&Dp(x,C),N}function v(x,y,j,w){if(typeof j=="object"&&j!==null&&j.type===Ex&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Hw:e:{for(var N=j.key,S=y;S!==null;){if(S.key===N){if(N=j.type,N===Ex){if(S.tag===7){n(x,S.sibling),y=i(S,j.props.children),y.return=x,x=y;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Qf&&gL(N)===S.type){n(x,S.sibling),y=i(S,j.props),y.ref=Py(x,S,j),y.return=x,x=y;break e}n(x,S);break}else t(x,S);S=S.sibling}j.type===Ex?(y=fg(j.props.children,x.mode,w,j.key),y.return=x,x=y):(w=pN(j.type,j.key,j.props,null,x.mode,w),w.ref=Py(x,y,j),w.return=x,x=w)}return o(x);case Tx:e:{for(S=j.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===j.containerInfo&&y.stateNode.implementation===j.implementation){n(x,y.sibling),y=i(y,j.children||[]),y.return=x,x=y;break e}else{n(x,y);break}else t(x,y);y=y.sibling}y=pk(j,x.mode,w),y.return=x,x=y}return o(x);case Qf:return S=j._init,v(x,y,S(j._payload),w)}if(lb(j))return p(x,y,j,w);if(Sy(j))return g(x,y,j,w);r2(x,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,y!==null&&y.tag===6?(n(x,y.sibling),y=i(y,j),y.return=x,x=y):(n(x,y),y=mk(j,x.mode,w),y.return=x,x=y),o(x)):n(x,y)}return v}var Wv=LY(!0),FY=LY(!1),r5=rp(null),n5=null,$x=null,zO=null;function HO(){zO=$x=n5=null}function WO(e){var t=r5.current;Qs(r5),e._currentValue=t}function e3(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ov(e,t){n5=e,zO=$x=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bl=!0),e.firstContext=null)}function od(e){var t=e._currentValue;if(zO!==e)if(e={context:e,memoizedValue:t,next:null},$x===null){if(n5===null)throw Error(Bt(308));$x=e,n5.dependencies={lanes:0,firstContext:e}}else $x=$x.next=e;return t}var Yp=null;function KO(e){Yp===null?Yp=[e]:Yp.push(e)}function $Y(e,t,n,s){var i=t.interleaved;return i===null?(n.next=n,KO(t)):(n.next=i.next,i.next=n),t.interleaved=n,af(e,s)}function af(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Zf=!1;function GO(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BY(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xh(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _m(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ln&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,af(e,n)}return i=s.interleaved,i===null?(t.next=t,KO(s)):(t.next=i.next,i.next=t),s.interleaved=t,af(e,n)}function cN(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,RO(e,n)}}function xL(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function s5(e,t,n,s){var i=e.updateQueue;Zf=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=i.baseState;o=0,u=d=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((s&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,g=l;switch(f=t,m=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=yi({},h,f);break e;case 2:Zf=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=h),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);wg|=o,e.lanes=o,e.memoizedState=h}}function vL(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(Bt(191,i));i.call(s)}}}var $j={},Yu=rp($j),h1=rp($j),f1=rp($j);function Xp(e){if(e===$j)throw Error(Bt(174));return e}function YO(e,t){switch(Bs(f1,t),Bs(h1,e),Bs(Yu,$j),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:DP(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=DP(t,e)}Qs(Yu),Bs(Yu,t)}function Kv(){Qs(Yu),Qs(h1),Qs(f1)}function VY(e){Xp(f1.current);var t=Xp(Yu.current),n=DP(t,e.type);t!==n&&(Bs(h1,e),Bs(Yu,n))}function XO(e){h1.current===e&&(Qs(Yu),Qs(h1))}var pi=rp(0);function i5(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lk=[];function QO(){for(var e=0;e<lk.length;e++)lk[e]._workInProgressVersionPrimary=null;lk.length=0}var dN=yf.ReactCurrentDispatcher,ck=yf.ReactCurrentBatchConfig,jg=0,vi=null,ya=null,Ma=null,a5=!1,Ab=!1,m1=0,Vpe=0;function mo(){throw Error(Bt(321))}function ZO(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nu(e[n],t[n]))return!1;return!0}function JO(e,t,n,s,i,a){if(jg=a,vi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dN.current=e===null||e.memoizedState===null?Hpe:Wpe,e=n(s,i),Ab){a=0;do{if(Ab=!1,m1=0,25<=a)throw Error(Bt(301));a+=1,Ma=ya=null,t.updateQueue=null,dN.current=Kpe,e=n(s,i)}while(Ab)}if(dN.current=o5,t=ya!==null&&ya.next!==null,jg=0,Ma=ya=vi=null,a5=!1,t)throw Error(Bt(300));return e}function eR(){var e=m1!==0;return m1=0,e}function Mu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ma===null?vi.memoizedState=Ma=e:Ma=Ma.next=e,Ma}function ld(){if(ya===null){var e=vi.alternate;e=e!==null?e.memoizedState:null}else e=ya.next;var t=Ma===null?vi.memoizedState:Ma.next;if(t!==null)Ma=t,ya=e;else{if(e===null)throw Error(Bt(310));ya=e,e={memoizedState:ya.memoizedState,baseState:ya.baseState,baseQueue:ya.baseQueue,queue:ya.queue,next:null},Ma===null?vi.memoizedState=Ma=e:Ma=Ma.next=e}return Ma}function p1(e,t){return typeof t=="function"?t(e):t}function dk(e){var t=ld(),n=t.queue;if(n===null)throw Error(Bt(311));n.lastRenderedReducer=e;var s=ya,i=s.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}s.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,s=s.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((jg&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=s):c=c.next=h,vi.lanes|=u,wg|=u}d=d.next}while(d!==null&&d!==a);c===null?o=s:c.next=l,nu(s,t.memoizedState)||(bl=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){i=e;do a=i.lane,vi.lanes|=a,wg|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function uk(e){var t=ld(),n=t.queue;if(n===null)throw Error(Bt(311));n.lastRenderedReducer=e;var s=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);nu(a,t.memoizedState)||(bl=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,s]}function UY(){}function qY(e,t){var n=vi,s=ld(),i=t(),a=!nu(s.memoizedState,i);if(a&&(s.memoizedState=i,bl=!0),s=s.queue,tR(WY.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||Ma!==null&&Ma.memoizedState.tag&1){if(n.flags|=2048,g1(9,HY.bind(null,n,s,i,t),void 0,null),$a===null)throw Error(Bt(349));jg&30||zY(n,t,i)}return i}function zY(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=vi.updateQueue,t===null?(t={lastEffect:null,stores:null},vi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function HY(e,t,n,s){t.value=n,t.getSnapshot=s,KY(t)&&GY(e)}function WY(e,t,n){return n(function(){KY(t)&&GY(e)})}function KY(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nu(e,n)}catch{return!0}}function GY(e){var t=af(e,1);t!==null&&Xd(t,e,1,-1)}function yL(e){var t=Mu();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p1,lastRenderedState:e},t.queue=e,e=e.dispatch=zpe.bind(null,vi,e),[t.memoizedState,e]}function g1(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=vi.updateQueue,t===null?(t={lastEffect:null,stores:null},vi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function YY(){return ld().memoizedState}function uN(e,t,n,s){var i=Mu();vi.flags|=e,i.memoizedState=g1(1|t,n,void 0,s===void 0?null:s)}function N_(e,t,n,s){var i=ld();s=s===void 0?null:s;var a=void 0;if(ya!==null){var o=ya.memoizedState;if(a=o.destroy,s!==null&&ZO(s,o.deps)){i.memoizedState=g1(t,n,a,s);return}}vi.flags|=e,i.memoizedState=g1(1|t,n,a,s)}function bL(e,t){return uN(8390656,8,e,t)}function tR(e,t){return N_(2048,8,e,t)}function XY(e,t){return N_(4,2,e,t)}function QY(e,t){return N_(4,4,e,t)}function ZY(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function JY(e,t,n){return n=n!=null?n.concat([e]):null,N_(4,4,ZY.bind(null,t,e),n)}function rR(){}function eX(e,t){var n=ld();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&ZO(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function tX(e,t){var n=ld();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&ZO(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function rX(e,t,n){return jg&21?(nu(n,t)||(n=oY(),vi.lanes|=n,wg|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bl=!0),e.memoizedState=n)}function Upe(e,t){var n=hs;hs=n!==0&&4>n?n:4,e(!0);var s=ck.transition;ck.transition={};try{e(!1),t()}finally{hs=n,ck.transition=s}}function nX(){return ld().memoizedState}function qpe(e,t,n){var s=Am(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},sX(e))iX(t,n);else if(n=$Y(e,t,n,s),n!==null){var i=nl();Xd(n,e,s,i),aX(n,t,s)}}function zpe(e,t,n){var s=Am(e),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(sX(e))iX(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,nu(l,o)){var c=t.interleaved;c===null?(i.next=i,KO(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=$Y(e,t,i,s),n!==null&&(i=nl(),Xd(n,e,s,i),aX(n,t,s))}}function sX(e){var t=e.alternate;return e===vi||t!==null&&t===vi}function iX(e,t){Ab=a5=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aX(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,RO(e,n)}}var o5={readContext:od,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},Hpe={readContext:od,useCallback:function(e,t){return Mu().memoizedState=[e,t===void 0?null:t],e},useContext:od,useEffect:bL,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,uN(4194308,4,ZY.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uN(4194308,4,e,t)},useInsertionEffect:function(e,t){return uN(4,2,e,t)},useMemo:function(e,t){var n=Mu();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Mu();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=qpe.bind(null,vi,e),[s.memoizedState,e]},useRef:function(e){var t=Mu();return e={current:e},t.memoizedState=e},useState:yL,useDebugValue:rR,useDeferredValue:function(e){return Mu().memoizedState=e},useTransition:function(){var e=yL(!1),t=e[0];return e=Upe.bind(null,e[1]),Mu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=vi,i=Mu();if(si){if(n===void 0)throw Error(Bt(407));n=n()}else{if(n=t(),$a===null)throw Error(Bt(349));jg&30||zY(s,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,bL(WY.bind(null,s,a,e),[e]),s.flags|=2048,g1(9,HY.bind(null,s,a,n,t),void 0,null),n},useId:function(){var e=Mu(),t=$a.identifierPrefix;if(si){var n=qh,s=Uh;n=(s&~(1<<32-Yd(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=m1++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Vpe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wpe={readContext:od,useCallback:eX,useContext:od,useEffect:tR,useImperativeHandle:JY,useInsertionEffect:XY,useLayoutEffect:QY,useMemo:tX,useReducer:dk,useRef:YY,useState:function(){return dk(p1)},useDebugValue:rR,useDeferredValue:function(e){var t=ld();return rX(t,ya.memoizedState,e)},useTransition:function(){var e=dk(p1)[0],t=ld().memoizedState;return[e,t]},useMutableSource:UY,useSyncExternalStore:qY,useId:nX,unstable_isNewReconciler:!1},Kpe={readContext:od,useCallback:eX,useContext:od,useEffect:tR,useImperativeHandle:JY,useInsertionEffect:XY,useLayoutEffect:QY,useMemo:tX,useReducer:uk,useRef:YY,useState:function(){return uk(p1)},useDebugValue:rR,useDeferredValue:function(e){var t=ld();return ya===null?t.memoizedState=e:rX(t,ya.memoizedState,e)},useTransition:function(){var e=uk(p1)[0],t=ld().memoizedState;return[e,t]},useMutableSource:UY,useSyncExternalStore:qY,useId:nX,unstable_isNewReconciler:!1};function Md(e,t){if(e&&e.defaultProps){t=yi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function t3(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:yi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var S_={isMounted:function(e){return(e=e._reactInternals)?zg(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=nl(),i=Am(e),a=Xh(s,i);a.payload=t,n!=null&&(a.callback=n),t=_m(e,a,i),t!==null&&(Xd(t,e,i,s),cN(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=nl(),i=Am(e),a=Xh(s,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=_m(e,a,i),t!==null&&(Xd(t,e,i,s),cN(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nl(),s=Am(e),i=Xh(n,s);i.tag=2,t!=null&&(i.callback=t),t=_m(e,i,s),t!==null&&(Xd(t,e,s,n),cN(t,e,s))}};function jL(e,t,n,s,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,a,o):t.prototype&&t.prototype.isPureReactComponent?!l1(n,s)||!l1(i,a):!0}function oX(e,t,n){var s=!1,i=Lm,a=t.contextType;return typeof a=="object"&&a!==null?a=od(a):(i=Sl(t)?yg:Ro.current,s=t.contextTypes,a=(s=s!=null)?zv(e,i):Lm),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=S_,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function wL(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&S_.enqueueReplaceState(t,t.state,null)}function r3(e,t,n,s){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},GO(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=od(a):(a=Sl(t)?yg:Ro.current,i.context=zv(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(t3(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&S_.enqueueReplaceState(i,i.state,null),s5(e,n,i,s),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Gv(e,t){try{var n="",s=t;do n+=jme(s),s=s.return;while(s);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function hk(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function n3(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Gpe=typeof WeakMap=="function"?WeakMap:Map;function lX(e,t,n){n=Xh(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){c5||(c5=!0,f3=s),n3(e,t)},n}function cX(e,t,n){n=Xh(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;n.payload=function(){return s(i)},n.callback=function(){n3(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){n3(e,t),typeof s!="function"&&(Cm===null?Cm=new Set([this]):Cm.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function NL(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new Gpe;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(n)||(i.add(n),e=lge.bind(null,e,t,n),t.then(e,e))}function SL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _L(e,t,n,s,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Xh(-1,1),t.tag=2,_m(n,t,1))),n.lanes|=1),e)}var Ype=yf.ReactCurrentOwner,bl=!1;function Yo(e,t,n,s){t.child=e===null?FY(t,null,n,s):Wv(t,e.child,n,s)}function CL(e,t,n,s,i){n=n.render;var a=t.ref;return ov(t,i),s=JO(e,t,n,s,a,i),n=eR(),e!==null&&!bl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,of(e,t,i)):(si&&n&&VO(t),t.flags|=1,Yo(e,t,s,i),t.child)}function AL(e,t,n,s,i){if(e===null){var a=n.type;return typeof a=="function"&&!dR(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,dX(e,t,a,s,i)):(e=pN(n.type,null,s,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:l1,n(o,s)&&e.ref===t.ref)return of(e,t,i)}return t.flags|=1,e=km(a,s),e.ref=t.ref,e.return=t,t.child=e}function dX(e,t,n,s,i){if(e!==null){var a=e.memoizedProps;if(l1(a,s)&&e.ref===t.ref)if(bl=!1,t.pendingProps=s=a,(e.lanes&i)!==0)e.flags&131072&&(bl=!0);else return t.lanes=e.lanes,of(e,t,i)}return s3(e,t,n,s,i)}function uX(e,t,n){var s=t.pendingProps,i=s.children,a=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bs(Vx,ec),ec|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bs(Vx,ec),ec|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=a!==null?a.baseLanes:n,Bs(Vx,ec),ec|=s}else a!==null?(s=a.baseLanes|n,t.memoizedState=null):s=n,Bs(Vx,ec),ec|=s;return Yo(e,t,i,n),t.child}function hX(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function s3(e,t,n,s,i){var a=Sl(n)?yg:Ro.current;return a=zv(t,a),ov(t,i),n=JO(e,t,n,s,a,i),s=eR(),e!==null&&!bl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,of(e,t,i)):(si&&s&&VO(t),t.flags|=1,Yo(e,t,n,i),t.child)}function kL(e,t,n,s,i){if(Sl(n)){var a=!0;JN(t)}else a=!1;if(ov(t,i),t.stateNode===null)hN(e,t),oX(t,n,s),r3(t,n,s,i),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=od(d):(d=Sl(n)?yg:Ro.current,d=zv(t,d));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&wL(t,o,s,d),Zf=!1;var f=t.memoizedState;o.state=f,s5(t,s,o,i),c=t.memoizedState,l!==s||f!==c||Nl.current||Zf?(typeof u=="function"&&(t3(t,n,u,s),c=t.memoizedState),(l=Zf||jL(t,n,l,s,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,BY(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Md(t.type,l),o.props=d,h=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=od(c):(c=Sl(n)?yg:Ro.current,c=zv(t,c));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&wL(t,o,s,c),Zf=!1,f=t.memoizedState,o.state=f,s5(t,s,o,i);var p=t.memoizedState;l!==h||f!==p||Nl.current||Zf?(typeof m=="function"&&(t3(t,n,m,s),p=t.memoizedState),(d=Zf||jL(t,n,d,s,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),o.props=s,o.state=p,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return i3(e,t,n,s,a,i)}function i3(e,t,n,s,i,a){hX(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&fL(t,n,!1),of(e,t,a);s=t.stateNode,Ype.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Wv(t,e.child,null,a),t.child=Wv(t,null,l,a)):Yo(e,t,l,a),t.memoizedState=s.state,i&&fL(t,n,!0),t.child}function fX(e){var t=e.stateNode;t.pendingContext?hL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hL(e,t.context,!1),YO(e,t.containerInfo)}function PL(e,t,n,s,i){return Hv(),qO(i),t.flags|=256,Yo(e,t,n,s),t.child}var a3={dehydrated:null,treeContext:null,retryLane:0};function o3(e){return{baseLanes:e,cachePool:null,transitions:null}}function mX(e,t,n){var s=t.pendingProps,i=pi.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(i&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Bs(pi,i&1),e===null)return JP(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,a?(s=t.mode,a=t.child,o={mode:"hidden",children:o},!(s&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=A_(o,s,0,null),e=fg(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=o3(n),t.memoizedState=a3,e):nR(t,o));if(i=e.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Xpe(e,t,o,s,l,i,n);if(a){a=s.fallback,o=t.mode,i=e.child,l=i.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=km(i,c),s.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=km(l,a):(a=fg(a,o,n,null),a.flags|=2),a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,o=e.child.memoizedState,o=o===null?o3(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=a3,s}return a=e.child,e=a.sibling,s=km(a,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function nR(e,t){return t=A_({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function n2(e,t,n,s){return s!==null&&qO(s),Wv(t,e.child,null,n),e=nR(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xpe(e,t,n,s,i,a,o){if(n)return t.flags&256?(t.flags&=-257,s=hk(Error(Bt(422))),n2(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=s.fallback,i=t.mode,s=A_({mode:"visible",children:s.children},i,0,null),a=fg(a,i,o,null),a.flags|=2,s.return=t,a.return=t,s.sibling=a,t.child=s,t.mode&1&&Wv(t,e.child,null,o),t.child.memoizedState=o3(o),t.memoizedState=a3,a);if(!(t.mode&1))return n2(e,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var l=s.dgst;return s=l,a=Error(Bt(419)),s=hk(a,s,void 0),n2(e,t,o,s)}if(l=(o&e.childLanes)!==0,bl||l){if(s=$a,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,af(e,i),Xd(s,e,i,-1))}return cR(),s=hk(Error(Bt(421))),n2(e,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=cge.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,cc=Sm(i.nextSibling),fc=t,si=!0,Bd=null,e!==null&&(Kc[Gc++]=Uh,Kc[Gc++]=qh,Kc[Gc++]=bg,Uh=e.id,qh=e.overflow,bg=t),t=nR(t,s.children),t.flags|=4096,t)}function TL(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),e3(e.return,t,n)}function fk(e,t,n,s,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i)}function pX(e,t,n){var s=t.pendingProps,i=s.revealOrder,a=s.tail;if(Yo(e,t,s.children,n),s=pi.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&TL(e,n,t);else if(e.tag===19)TL(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Bs(pi,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&i5(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),fk(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&i5(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}fk(t,!0,n,null,a);break;case"together":fk(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hN(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function of(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),wg|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Bt(153));if(t.child!==null){for(e=t.child,n=km(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=km(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Qpe(e,t,n){switch(t.tag){case 3:fX(t),Hv();break;case 5:VY(t);break;case 1:Sl(t.type)&&JN(t);break;case 4:YO(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;Bs(r5,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Bs(pi,pi.current&1),t.flags|=128,null):n&t.child.childLanes?mX(e,t,n):(Bs(pi,pi.current&1),e=of(e,t,n),e!==null?e.sibling:null);Bs(pi,pi.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return pX(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Bs(pi,pi.current),s)break;return null;case 22:case 23:return t.lanes=0,uX(e,t,n)}return of(e,t,n)}var gX,l3,xX,vX;gX=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};l3=function(){};xX=function(e,t,n,s){var i=e.memoizedProps;if(i!==s){e=t.stateNode,Xp(Yu.current);var a=null;switch(n){case"input":i=TP(e,i),s=TP(e,s),a=[];break;case"select":i=yi({},i,{value:void 0}),s=yi({},s,{value:void 0}),a=[];break;case"textarea":i=RP(e,i),s=RP(e,s),a=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=QN)}MP(n,s);var o;n=null;for(d in i)if(!s.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(t1.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in s){var c=s[d];if(l=i!=null?i[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(t1.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ks("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};vX=function(e,t,n,s){n!==s&&(t.flags|=4)};function Ty(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function po(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Zpe(e,t,n){var s=t.pendingProps;switch(UO(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return po(t),null;case 1:return Sl(t.type)&&ZN(),po(t),null;case 3:return s=t.stateNode,Kv(),Qs(Nl),Qs(Ro),QO(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(t2(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bd!==null&&(g3(Bd),Bd=null))),l3(e,t),po(t),null;case 5:XO(t);var i=Xp(f1.current);if(n=t.type,e!==null&&t.stateNode!=null)xX(e,t,n,s,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Bt(166));return po(t),null}if(e=Xp(Yu.current),t2(t)){s=t.stateNode,n=t.type;var a=t.memoizedProps;switch(s[Uu]=t,s[u1]=a,e=(t.mode&1)!==0,n){case"dialog":Ks("cancel",s),Ks("close",s);break;case"iframe":case"object":case"embed":Ks("load",s);break;case"video":case"audio":for(i=0;i<db.length;i++)Ks(db[i],s);break;case"source":Ks("error",s);break;case"img":case"image":case"link":Ks("error",s),Ks("load",s);break;case"details":Ks("toggle",s);break;case"input":$I(s,a),Ks("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ks("invalid",s);break;case"textarea":VI(s,a),Ks("invalid",s)}MP(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?s.textContent!==l&&(a.suppressHydrationWarning!==!0&&e2(s.textContent,l,e),i=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&e2(s.textContent,l,e),i=["children",""+l]):t1.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ks("scroll",s)}switch(n){case"input":Ww(s),BI(s,a,!0);break;case"textarea":Ww(s),UI(s);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(s.onclick=QN)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=WG(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[Uu]=t,e[u1]=s,gX(e,t,!1,!1),t.stateNode=e;e:{switch(o=IP(n,s),n){case"dialog":Ks("cancel",e),Ks("close",e),i=s;break;case"iframe":case"object":case"embed":Ks("load",e),i=s;break;case"video":case"audio":for(i=0;i<db.length;i++)Ks(db[i],e);i=s;break;case"source":Ks("error",e),i=s;break;case"img":case"image":case"link":Ks("error",e),Ks("load",e),i=s;break;case"details":Ks("toggle",e),i=s;break;case"input":$I(e,s),i=TP(e,s),Ks("invalid",e);break;case"option":i=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},i=yi({},s,{value:void 0}),Ks("invalid",e);break;case"textarea":VI(e,s),i=RP(e,s),Ks("invalid",e);break;default:i=s}MP(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?YG(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&KG(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&r1(e,c):typeof c=="number"&&r1(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(t1.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ks("scroll",e):c!=null&&AO(e,a,c,o))}switch(n){case"input":Ww(e),BI(e,s,!1);break;case"textarea":Ww(e),UI(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Im(s.value));break;case"select":e.multiple=!!s.multiple,a=s.value,a!=null?nv(e,!!s.multiple,a,!1):s.defaultValue!=null&&nv(e,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=QN)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return po(t),null;case 6:if(e&&t.stateNode!=null)vX(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Bt(166));if(n=Xp(f1.current),Xp(Yu.current),t2(t)){if(s=t.stateNode,n=t.memoizedProps,s[Uu]=t,(a=s.nodeValue!==n)&&(e=fc,e!==null))switch(e.tag){case 3:e2(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&e2(s.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Uu]=t,t.stateNode=s}return po(t),null;case 13:if(Qs(pi),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(si&&cc!==null&&t.mode&1&&!(t.flags&128))IY(),Hv(),t.flags|=98560,a=!1;else if(a=t2(t),s!==null&&s.dehydrated!==null){if(e===null){if(!a)throw Error(Bt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Bt(317));a[Uu]=t}else Hv(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;po(t),a=!1}else Bd!==null&&(g3(Bd),Bd=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||pi.current&1?wa===0&&(wa=3):cR())),t.updateQueue!==null&&(t.flags|=4),po(t),null);case 4:return Kv(),l3(e,t),e===null&&c1(t.stateNode.containerInfo),po(t),null;case 10:return WO(t.type._context),po(t),null;case 17:return Sl(t.type)&&ZN(),po(t),null;case 19:if(Qs(pi),a=t.memoizedState,a===null)return po(t),null;if(s=(t.flags&128)!==0,o=a.rendering,o===null)if(s)Ty(a,!1);else{if(wa!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=i5(e),o!==null){for(t.flags|=128,Ty(a,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)a=n,e=s,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bs(pi,pi.current&1|2),t.child}e=e.sibling}a.tail!==null&&zi()>Yv&&(t.flags|=128,s=!0,Ty(a,!1),t.lanes=4194304)}else{if(!s)if(e=i5(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ty(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!si)return po(t),null}else 2*zi()-a.renderingStartTime>Yv&&n!==1073741824&&(t.flags|=128,s=!0,Ty(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=zi(),t.sibling=null,n=pi.current,Bs(pi,s?n&1|2:n&1),t):(po(t),null);case 22:case 23:return lR(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?ec&1073741824&&(po(t),t.subtreeFlags&6&&(t.flags|=8192)):po(t),null;case 24:return null;case 25:return null}throw Error(Bt(156,t.tag))}function Jpe(e,t){switch(UO(t),t.tag){case 1:return Sl(t.type)&&ZN(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Kv(),Qs(Nl),Qs(Ro),QO(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return XO(t),null;case 13:if(Qs(pi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Bt(340));Hv()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Qs(pi),null;case 4:return Kv(),null;case 10:return WO(t.type._context),null;case 22:case 23:return lR(),null;case 24:return null;default:return null}}var s2=!1,So=!1,ege=typeof WeakSet=="function"?WeakSet:Set,dr=null;function Bx(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ri(e,t,s)}else n.current=null}function c3(e,t,n){try{n()}catch(s){Ri(e,t,s)}}var EL=!1;function tge(e,t){if(WP=GN,e=NY(),BO(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,a=s.focusNode;s=s.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(l=o+i),h!==a||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++d===i&&(l=o),f===a&&++u===s&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(KP={focusedElem:e,selectionRange:n},GN=!1,dr=t;dr!==null;)if(t=dr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,dr=e;else for(;dr!==null;){t=dr;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,x=t.stateNode,y=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:Md(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Bt(163))}}catch(w){Ri(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,dr=e;break}dr=t.return}return p=EL,EL=!1,p}function kb(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&c3(t,n,a)}i=i.next}while(i!==s)}}function __(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function d3(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function yX(e){var t=e.alternate;t!==null&&(e.alternate=null,yX(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Uu],delete t[u1],delete t[XP],delete t[Lpe],delete t[Fpe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bX(e){return e.tag===5||e.tag===3||e.tag===4}function OL(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bX(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function u3(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=QN));else if(s!==4&&(e=e.child,e!==null))for(u3(e,t,n),e=e.sibling;e!==null;)u3(e,t,n),e=e.sibling}function h3(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(h3(e,t,n),e=e.sibling;e!==null;)h3(e,t,n),e=e.sibling}var no=null,Ld=!1;function Vf(e,t,n){for(n=n.child;n!==null;)jX(e,t,n),n=n.sibling}function jX(e,t,n){if(Gu&&typeof Gu.onCommitFiberUnmount=="function")try{Gu.onCommitFiberUnmount(x_,n)}catch{}switch(n.tag){case 5:So||Bx(n,t);case 6:var s=no,i=Ld;no=null,Vf(e,t,n),no=s,Ld=i,no!==null&&(Ld?(e=no,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):no.removeChild(n.stateNode));break;case 18:no!==null&&(Ld?(e=no,n=n.stateNode,e.nodeType===8?ak(e.parentNode,n):e.nodeType===1&&ak(e,n),a1(e)):ak(no,n.stateNode));break;case 4:s=no,i=Ld,no=n.stateNode.containerInfo,Ld=!0,Vf(e,t,n),no=s,Ld=i;break;case 0:case 11:case 14:case 15:if(!So&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&c3(n,t,o),i=i.next}while(i!==s)}Vf(e,t,n);break;case 1:if(!So&&(Bx(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Ri(n,t,l)}Vf(e,t,n);break;case 21:Vf(e,t,n);break;case 22:n.mode&1?(So=(s=So)||n.memoizedState!==null,Vf(e,t,n),So=s):Vf(e,t,n);break;default:Vf(e,t,n)}}function RL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ege),t.forEach(function(s){var i=dge.bind(null,e,s);n.has(s)||(n.add(s),s.then(i,i))})}}function Pd(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:no=l.stateNode,Ld=!1;break e;case 3:no=l.stateNode.containerInfo,Ld=!0;break e;case 4:no=l.stateNode.containerInfo,Ld=!0;break e}l=l.return}if(no===null)throw Error(Bt(160));jX(a,o,i),no=null,Ld=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Ri(i,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wX(t,e),t=t.sibling}function wX(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pd(t,e),Tu(e),s&4){try{kb(3,e,e.return),__(3,e)}catch(g){Ri(e,e.return,g)}try{kb(5,e,e.return)}catch(g){Ri(e,e.return,g)}}break;case 1:Pd(t,e),Tu(e),s&512&&n!==null&&Bx(n,n.return);break;case 5:if(Pd(t,e),Tu(e),s&512&&n!==null&&Bx(n,n.return),e.flags&32){var i=e.stateNode;try{r1(i,"")}catch(g){Ri(e,e.return,g)}}if(s&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&zG(i,a),IP(l,o);var d=IP(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?YG(i,h):u==="dangerouslySetInnerHTML"?KG(i,h):u==="children"?r1(i,h):AO(i,u,h,d)}switch(l){case"input":EP(i,a);break;case"textarea":HG(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?nv(i,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?nv(i,!!a.multiple,a.defaultValue,!0):nv(i,!!a.multiple,a.multiple?[]:"",!1))}i[u1]=a}catch(g){Ri(e,e.return,g)}}break;case 6:if(Pd(t,e),Tu(e),s&4){if(e.stateNode===null)throw Error(Bt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ri(e,e.return,g)}}break;case 3:if(Pd(t,e),Tu(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{a1(t.containerInfo)}catch(g){Ri(e,e.return,g)}break;case 4:Pd(t,e),Tu(e);break;case 13:Pd(t,e),Tu(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(aR=zi())),s&4&&RL(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(So=(d=So)||u,Pd(t,e),So=d):Pd(t,e),Tu(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(dr=e,u=e.child;u!==null;){for(h=dr=u;dr!==null;){switch(f=dr,m=f.child,f.tag){case 0:case 11:case 14:case 15:kb(4,f,f.return);break;case 1:Bx(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{t=s,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Ri(s,n,g)}}break;case 5:Bx(f,f.return);break;case 22:if(f.memoizedState!==null){ML(h);continue}}m!==null?(m.return=f,dr=m):ML(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,d?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=GG("display",o))}catch(g){Ri(e,e.return,g)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){Ri(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Pd(t,e),Tu(e),s&4&&RL(e);break;case 21:break;default:Pd(t,e),Tu(e)}}function Tu(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(bX(n)){var s=n;break e}n=n.return}throw Error(Bt(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(r1(i,""),s.flags&=-33);var a=OL(e);h3(e,a,i);break;case 3:case 4:var o=s.stateNode.containerInfo,l=OL(e);u3(e,l,o);break;default:throw Error(Bt(161))}}catch(c){Ri(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function rge(e,t,n){dr=e,NX(e)}function NX(e,t,n){for(var s=(e.mode&1)!==0;dr!==null;){var i=dr,a=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||s2;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||So;l=s2;var d=So;if(s2=o,(So=c)&&!d)for(dr=i;dr!==null;)o=dr,c=o.child,o.tag===22&&o.memoizedState!==null?IL(i):c!==null?(c.return=o,dr=c):IL(i);for(;a!==null;)dr=a,NX(a),a=a.sibling;dr=i,s2=l,So=d}DL(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,dr=a):DL(e)}}function DL(e){for(;dr!==null;){var t=dr;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:So||__(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!So)if(n===null)s.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Md(t.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&vL(t,a,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}vL(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&a1(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Bt(163))}So||t.flags&512&&d3(t)}catch(f){Ri(t,t.return,f)}}if(t===e){dr=null;break}if(n=t.sibling,n!==null){n.return=t.return,dr=n;break}dr=t.return}}function ML(e){for(;dr!==null;){var t=dr;if(t===e){dr=null;break}var n=t.sibling;if(n!==null){n.return=t.return,dr=n;break}dr=t.return}}function IL(e){for(;dr!==null;){var t=dr;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{__(4,t)}catch(c){Ri(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(c){Ri(t,i,c)}}var a=t.return;try{d3(t)}catch(c){Ri(t,a,c)}break;case 5:var o=t.return;try{d3(t)}catch(c){Ri(t,o,c)}}}catch(c){Ri(t,t.return,c)}if(t===e){dr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,dr=l;break}dr=t.return}}var nge=Math.ceil,l5=yf.ReactCurrentDispatcher,sR=yf.ReactCurrentOwner,id=yf.ReactCurrentBatchConfig,Ln=0,$a=null,na=null,io=0,ec=0,Vx=rp(0),wa=0,x1=null,wg=0,C_=0,iR=0,Pb=null,vl=null,aR=0,Yv=1/0,Dh=null,c5=!1,f3=null,Cm=null,i2=!1,pm=null,d5=0,Tb=0,m3=null,fN=-1,mN=0;function nl(){return Ln&6?zi():fN!==-1?fN:fN=zi()}function Am(e){return e.mode&1?Ln&2&&io!==0?io&-io:Bpe.transition!==null?(mN===0&&(mN=oY()),mN):(e=hs,e!==0||(e=window.event,e=e===void 0?16:mY(e.type)),e):1}function Xd(e,t,n,s){if(50<Tb)throw Tb=0,m3=null,Error(Bt(185));Ij(e,n,s),(!(Ln&2)||e!==$a)&&(e===$a&&(!(Ln&2)&&(C_|=n),wa===4&&tm(e,io)),_l(e,s),n===1&&Ln===0&&!(t.mode&1)&&(Yv=zi()+500,w_&&np()))}function _l(e,t){var n=e.callbackNode;Bme(e,t);var s=KN(e,e===$a?io:0);if(s===0)n!==null&&HI(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&HI(n),t===1)e.tag===0?$pe(LL.bind(null,e)):RY(LL.bind(null,e)),Mpe(function(){!(Ln&6)&&np()}),n=null;else{switch(lY(s)){case 1:n=OO;break;case 4:n=iY;break;case 16:n=WN;break;case 536870912:n=aY;break;default:n=WN}n=EX(n,SX.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function SX(e,t){if(fN=-1,mN=0,Ln&6)throw Error(Bt(327));var n=e.callbackNode;if(lv()&&e.callbackNode!==n)return null;var s=KN(e,e===$a?io:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=u5(e,s);else{t=s;var i=Ln;Ln|=2;var a=CX();($a!==e||io!==t)&&(Dh=null,Yv=zi()+500,hg(e,t));do try{age();break}catch(l){_X(e,l)}while(!0);HO(),l5.current=a,Ln=i,na!==null?t=0:($a=null,io=0,t=wa)}if(t!==0){if(t===2&&(i=VP(e),i!==0&&(s=i,t=p3(e,i))),t===1)throw n=x1,hg(e,0),tm(e,s),_l(e,zi()),n;if(t===6)tm(e,s);else{if(i=e.current.alternate,!(s&30)&&!sge(i)&&(t=u5(e,s),t===2&&(a=VP(e),a!==0&&(s=a,t=p3(e,a))),t===1))throw n=x1,hg(e,0),tm(e,s),_l(e,zi()),n;switch(e.finishedWork=i,e.finishedLanes=s,t){case 0:case 1:throw Error(Bt(345));case 2:Mp(e,vl,Dh);break;case 3:if(tm(e,s),(s&130023424)===s&&(t=aR+500-zi(),10<t)){if(KN(e,0)!==0)break;if(i=e.suspendedLanes,(i&s)!==s){nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=YP(Mp.bind(null,e,vl,Dh),t);break}Mp(e,vl,Dh);break;case 4:if(tm(e,s),(s&4194240)===s)break;for(t=e.eventTimes,i=-1;0<s;){var o=31-Yd(s);a=1<<o,o=t[o],o>i&&(i=o),s&=~a}if(s=i,s=zi()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*nge(s/1960))-s,10<s){e.timeoutHandle=YP(Mp.bind(null,e,vl,Dh),s);break}Mp(e,vl,Dh);break;case 5:Mp(e,vl,Dh);break;default:throw Error(Bt(329))}}}return _l(e,zi()),e.callbackNode===n?SX.bind(null,e):null}function p3(e,t){var n=Pb;return e.current.memoizedState.isDehydrated&&(hg(e,t).flags|=256),e=u5(e,t),e!==2&&(t=vl,vl=n,t!==null&&g3(t)),e}function g3(e){vl===null?vl=e:vl.push.apply(vl,e)}function sge(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],a=i.getSnapshot;i=i.value;try{if(!nu(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function tm(e,t){for(t&=~iR,t&=~C_,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Yd(t),s=1<<n;e[n]=-1,t&=~s}}function LL(e){if(Ln&6)throw Error(Bt(327));lv();var t=KN(e,0);if(!(t&1))return _l(e,zi()),null;var n=u5(e,t);if(e.tag!==0&&n===2){var s=VP(e);s!==0&&(t=s,n=p3(e,s))}if(n===1)throw n=x1,hg(e,0),tm(e,t),_l(e,zi()),n;if(n===6)throw Error(Bt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mp(e,vl,Dh),_l(e,zi()),null}function oR(e,t){var n=Ln;Ln|=1;try{return e(t)}finally{Ln=n,Ln===0&&(Yv=zi()+500,w_&&np())}}function Ng(e){pm!==null&&pm.tag===0&&!(Ln&6)&&lv();var t=Ln;Ln|=1;var n=id.transition,s=hs;try{if(id.transition=null,hs=1,e)return e()}finally{hs=s,id.transition=n,Ln=t,!(Ln&6)&&np()}}function lR(){ec=Vx.current,Qs(Vx)}function hg(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Dpe(n)),na!==null)for(n=na.return;n!==null;){var s=n;switch(UO(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ZN();break;case 3:Kv(),Qs(Nl),Qs(Ro),QO();break;case 5:XO(s);break;case 4:Kv();break;case 13:Qs(pi);break;case 19:Qs(pi);break;case 10:WO(s.type._context);break;case 22:case 23:lR()}n=n.return}if($a=e,na=e=km(e.current,null),io=ec=t,wa=0,x1=null,iR=C_=wg=0,vl=Pb=null,Yp!==null){for(t=0;t<Yp.length;t++)if(n=Yp[t],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,s.next=o}n.pending=s}Yp=null}return e}function _X(e,t){do{var n=na;try{if(HO(),dN.current=o5,a5){for(var s=vi.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}a5=!1}if(jg=0,Ma=ya=vi=null,Ab=!1,m1=0,sR.current=null,n===null||n.return===null){wa=1,x1=t,na=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=io,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=SL(o);if(m!==null){m.flags&=-257,_L(m,o,l,a,t),m.mode&1&&NL(a,d,t),t=m,c=d;var p=t.updateQueue;if(p===null){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}else{if(!(t&1)){NL(a,d,t),cR();break e}c=Error(Bt(426))}}else if(si&&l.mode&1){var v=SL(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),_L(v,o,l,a,t),qO(Gv(c,l));break e}}a=c=Gv(c,l),wa!==4&&(wa=2),Pb===null?Pb=[a]:Pb.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var x=lX(a,c,t);xL(a,x);break e;case 1:l=c;var y=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Cm===null||!Cm.has(j)))){a.flags|=65536,t&=-t,a.lanes|=t;var w=cX(a,l,t);xL(a,w);break e}}a=a.return}while(a!==null)}kX(n)}catch(N){t=N,na===n&&n!==null&&(na=n=n.return);continue}break}while(!0)}function CX(){var e=l5.current;return l5.current=o5,e===null?o5:e}function cR(){(wa===0||wa===3||wa===2)&&(wa=4),$a===null||!(wg&268435455)&&!(C_&268435455)||tm($a,io)}function u5(e,t){var n=Ln;Ln|=2;var s=CX();($a!==e||io!==t)&&(Dh=null,hg(e,t));do try{ige();break}catch(i){_X(e,i)}while(!0);if(HO(),Ln=n,l5.current=s,na!==null)throw Error(Bt(261));return $a=null,io=0,wa}function ige(){for(;na!==null;)AX(na)}function age(){for(;na!==null&&!Eme();)AX(na)}function AX(e){var t=TX(e.alternate,e,ec);e.memoizedProps=e.pendingProps,t===null?kX(e):na=t,sR.current=null}function kX(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Jpe(n,t),n!==null){n.flags&=32767,na=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{wa=6,na=null;return}}else if(n=Zpe(n,t,ec),n!==null){na=n;return}if(t=t.sibling,t!==null){na=t;return}na=t=e}while(t!==null);wa===0&&(wa=5)}function Mp(e,t,n){var s=hs,i=id.transition;try{id.transition=null,hs=1,oge(e,t,n,s)}finally{id.transition=i,hs=s}return null}function oge(e,t,n,s){do lv();while(pm!==null);if(Ln&6)throw Error(Bt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Bt(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(Vme(e,a),e===$a&&(na=$a=null,io=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||i2||(i2=!0,EX(WN,function(){return lv(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=id.transition,id.transition=null;var o=hs;hs=1;var l=Ln;Ln|=4,sR.current=null,tge(e,n),wX(n,e),Ape(KP),GN=!!WP,KP=WP=null,e.current=n,rge(n),Ome(),Ln=l,hs=o,id.transition=a}else e.current=n;if(i2&&(i2=!1,pm=e,d5=i),a=e.pendingLanes,a===0&&(Cm=null),Mme(n.stateNode),_l(e,zi()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(c5)throw c5=!1,e=f3,f3=null,e;return d5&1&&e.tag!==0&&lv(),a=e.pendingLanes,a&1?e===m3?Tb++:(Tb=0,m3=e):Tb=0,np(),null}function lv(){if(pm!==null){var e=lY(d5),t=id.transition,n=hs;try{if(id.transition=null,hs=16>e?16:e,pm===null)var s=!1;else{if(e=pm,pm=null,d5=0,Ln&6)throw Error(Bt(331));var i=Ln;for(Ln|=4,dr=e.current;dr!==null;){var a=dr,o=a.child;if(dr.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(dr=d;dr!==null;){var u=dr;switch(u.tag){case 0:case 11:case 15:kb(8,u,a)}var h=u.child;if(h!==null)h.return=u,dr=h;else for(;dr!==null;){u=dr;var f=u.sibling,m=u.return;if(yX(u),u===d){dr=null;break}if(f!==null){f.return=m,dr=f;break}dr=m}}}var p=a.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}dr=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,dr=o;else e:for(;dr!==null;){if(a=dr,a.flags&2048)switch(a.tag){case 0:case 11:case 15:kb(9,a,a.return)}var x=a.sibling;if(x!==null){x.return=a.return,dr=x;break e}dr=a.return}}var y=e.current;for(dr=y;dr!==null;){o=dr;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,dr=j;else e:for(o=y;dr!==null;){if(l=dr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:__(9,l)}}catch(N){Ri(l,l.return,N)}if(l===o){dr=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,dr=w;break e}dr=l.return}}if(Ln=i,np(),Gu&&typeof Gu.onPostCommitFiberRoot=="function")try{Gu.onPostCommitFiberRoot(x_,e)}catch{}s=!0}return s}finally{hs=n,id.transition=t}}return!1}function FL(e,t,n){t=Gv(n,t),t=lX(e,t,1),e=_m(e,t,1),t=nl(),e!==null&&(Ij(e,1,t),_l(e,t))}function Ri(e,t,n){if(e.tag===3)FL(e,e,n);else for(;t!==null;){if(t.tag===3){FL(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Cm===null||!Cm.has(s))){e=Gv(n,e),e=cX(t,e,1),t=_m(t,e,1),e=nl(),t!==null&&(Ij(t,1,e),_l(t,e));break}}t=t.return}}function lge(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=nl(),e.pingedLanes|=e.suspendedLanes&n,$a===e&&(io&n)===n&&(wa===4||wa===3&&(io&130023424)===io&&500>zi()-aR?hg(e,0):iR|=n),_l(e,t)}function PX(e,t){t===0&&(e.mode&1?(t=Yw,Yw<<=1,!(Yw&130023424)&&(Yw=4194304)):t=1);var n=nl();e=af(e,t),e!==null&&(Ij(e,t,n),_l(e,n))}function cge(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),PX(e,n)}function dge(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Bt(314))}s!==null&&s.delete(t),PX(e,n)}var TX;TX=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Nl.current)bl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bl=!1,Qpe(e,t,n);bl=!!(e.flags&131072)}else bl=!1,si&&t.flags&1048576&&DY(t,t5,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;hN(e,t),e=t.pendingProps;var i=zv(t,Ro.current);ov(t,n),i=JO(null,t,s,e,i,n);var a=eR();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sl(s)?(a=!0,JN(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,GO(t),i.updater=S_,t.stateNode=i,i._reactInternals=t,r3(t,s,e,n),t=i3(null,t,s,!0,a,n)):(t.tag=0,si&&a&&VO(t),Yo(null,t,i,n),t=t.child),t;case 16:s=t.elementType;e:{switch(hN(e,t),e=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=hge(s),e=Md(s,e),i){case 0:t=s3(null,t,s,e,n);break e;case 1:t=kL(null,t,s,e,n);break e;case 11:t=CL(null,t,s,e,n);break e;case 14:t=AL(null,t,s,Md(s.type,e),n);break e}throw Error(Bt(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Md(s,i),s3(e,t,s,i,n);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Md(s,i),kL(e,t,s,i,n);case 3:e:{if(fX(t),e===null)throw Error(Bt(387));s=t.pendingProps,a=t.memoizedState,i=a.element,BY(e,t),s5(t,s,null,n);var o=t.memoizedState;if(s=o.element,a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=Gv(Error(Bt(423)),t),t=PL(e,t,s,n,i);break e}else if(s!==i){i=Gv(Error(Bt(424)),t),t=PL(e,t,s,n,i);break e}else for(cc=Sm(t.stateNode.containerInfo.firstChild),fc=t,si=!0,Bd=null,n=FY(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hv(),s===i){t=of(e,t,n);break e}Yo(e,t,s,n)}t=t.child}return t;case 5:return VY(t),e===null&&JP(t),s=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,GP(s,i)?o=null:a!==null&&GP(s,a)&&(t.flags|=32),hX(e,t),Yo(e,t,o,n),t.child;case 6:return e===null&&JP(t),null;case 13:return mX(e,t,n);case 4:return YO(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Wv(t,null,s,n):Yo(e,t,s,n),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Md(s,i),CL(e,t,s,i,n);case 7:return Yo(e,t,t.pendingProps,n),t.child;case 8:return Yo(e,t,t.pendingProps.children,n),t.child;case 12:return Yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Bs(r5,s._currentValue),s._currentValue=o,a!==null)if(nu(a.value,o)){if(a.children===i.children&&!Nl.current){t=of(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(a.tag===1){c=Xh(-1,n&-n),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),e3(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Bt(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),e3(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Yo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,ov(t,n),i=od(i),s=s(i),t.flags|=1,Yo(e,t,s,n),t.child;case 14:return s=t.type,i=Md(s,t.pendingProps),i=Md(s.type,i),AL(e,t,s,i,n);case 15:return dX(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:Md(s,i),hN(e,t),t.tag=1,Sl(s)?(e=!0,JN(t)):e=!1,ov(t,n),oX(t,s,i),r3(t,s,i,n),i3(null,t,s,!0,e,n);case 19:return pX(e,t,n);case 22:return uX(e,t,n)}throw Error(Bt(156,t.tag))};function EX(e,t){return sY(e,t)}function uge(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nd(e,t,n,s){return new uge(e,t,n,s)}function dR(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hge(e){if(typeof e=="function")return dR(e)?1:0;if(e!=null){if(e=e.$$typeof,e===PO)return 11;if(e===TO)return 14}return 2}function km(e,t){var n=e.alternate;return n===null?(n=nd(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function pN(e,t,n,s,i,a){var o=2;if(s=e,typeof e=="function")dR(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ex:return fg(n.children,i,a,t);case kO:o=8,i|=8;break;case CP:return e=nd(12,n,t,i|2),e.elementType=CP,e.lanes=a,e;case AP:return e=nd(13,n,t,i),e.elementType=AP,e.lanes=a,e;case kP:return e=nd(19,n,t,i),e.elementType=kP,e.lanes=a,e;case VG:return A_(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $G:o=10;break e;case BG:o=9;break e;case PO:o=11;break e;case TO:o=14;break e;case Qf:o=16,s=null;break e}throw Error(Bt(130,e==null?e:typeof e,""))}return t=nd(o,n,t,i),t.elementType=e,t.type=s,t.lanes=a,t}function fg(e,t,n,s){return e=nd(7,e,s,t),e.lanes=n,e}function A_(e,t,n,s){return e=nd(22,e,s,t),e.elementType=VG,e.lanes=n,e.stateNode={isHidden:!1},e}function mk(e,t,n){return e=nd(6,e,null,t),e.lanes=n,e}function pk(e,t,n){return t=nd(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fge(e,t,n,s,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=YA(0),this.expirationTimes=YA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=YA(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uR(e,t,n,s,i,a,o,l,c){return e=new fge(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=nd(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},GO(a),e}function mge(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tx,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function OX(e){if(!e)return Lm;e=e._reactInternals;e:{if(zg(e)!==e||e.tag!==1)throw Error(Bt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Bt(171))}if(e.tag===1){var n=e.type;if(Sl(n))return OY(e,n,t)}return t}function RX(e,t,n,s,i,a,o,l,c){return e=uR(n,s,!0,e,i,a,o,l,c),e.context=OX(null),n=e.current,s=nl(),i=Am(n),a=Xh(s,i),a.callback=t??null,_m(n,a,i),e.current.lanes=i,Ij(e,i,s),_l(e,s),e}function k_(e,t,n,s){var i=t.current,a=nl(),o=Am(i);return n=OX(n),t.context===null?t.context=n:t.pendingContext=n,t=Xh(a,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=_m(i,t,o),e!==null&&(Xd(e,i,o,a),cN(e,i,o)),o}function h5(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $L(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hR(e,t){$L(e,t),(e=e.alternate)&&$L(e,t)}function pge(){return null}var DX=typeof reportError=="function"?reportError:function(e){console.error(e)};function fR(e){this._internalRoot=e}P_.prototype.render=fR.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Bt(409));k_(e,t,null,null)};P_.prototype.unmount=fR.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ng(function(){k_(null,e,null,null)}),t[sf]=null}};function P_(e){this._internalRoot=e}P_.prototype.unstable_scheduleHydration=function(e){if(e){var t=uY();e={blockedOn:null,target:e,priority:t};for(var n=0;n<em.length&&t!==0&&t<em[n].priority;n++);em.splice(n,0,e),n===0&&fY(e)}};function mR(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function T_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function BL(){}function gge(e,t,n,s,i){if(i){if(typeof s=="function"){var a=s;s=function(){var d=h5(o);a.call(d)}}var o=RX(t,s,e,0,null,!1,!1,"",BL);return e._reactRootContainer=o,e[sf]=o.current,c1(e.nodeType===8?e.parentNode:e),Ng(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof s=="function"){var l=s;s=function(){var d=h5(c);l.call(d)}}var c=uR(e,0,!1,null,null,!1,!1,"",BL);return e._reactRootContainer=c,e[sf]=c.current,c1(e.nodeType===8?e.parentNode:e),Ng(function(){k_(t,c,n,s)}),c}function E_(e,t,n,s,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=h5(o);l.call(c)}}k_(t,o,e,i)}else o=gge(n,t,e,i,s);return h5(o)}cY=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=cb(t.pendingLanes);n!==0&&(RO(t,n|1),_l(t,zi()),!(Ln&6)&&(Yv=zi()+500,np()))}break;case 13:Ng(function(){var s=af(e,1);if(s!==null){var i=nl();Xd(s,e,1,i)}}),hR(e,1)}};DO=function(e){if(e.tag===13){var t=af(e,134217728);if(t!==null){var n=nl();Xd(t,e,134217728,n)}hR(e,134217728)}};dY=function(e){if(e.tag===13){var t=Am(e),n=af(e,t);if(n!==null){var s=nl();Xd(n,e,t,s)}hR(e,t)}};uY=function(){return hs};hY=function(e,t){var n=hs;try{return hs=e,t()}finally{hs=n}};FP=function(e,t,n){switch(t){case"input":if(EP(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var i=j_(s);if(!i)throw Error(Bt(90));qG(s),EP(s,i)}}}break;case"textarea":HG(e,n);break;case"select":t=n.value,t!=null&&nv(e,!!n.multiple,t,!1)}};ZG=oR;JG=Ng;var xge={usingClientEntryPoint:!1,Events:[Fj,Mx,j_,XG,QG,oR]},Ey={findFiberByHostInstance:Gp,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vge={bundleType:Ey.bundleType,version:Ey.version,rendererPackageName:Ey.rendererPackageName,rendererConfig:Ey.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yf.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rY(e),e===null?null:e.stateNode},findFiberByHostInstance:Ey.findFiberByHostInstance||pge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var a2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!a2.isDisabled&&a2.supportsFiber)try{x_=a2.inject(vge),Gu=a2}catch{}}Nc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xge;Nc.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mR(t))throw Error(Bt(200));return mge(e,t,null,n)};Nc.createRoot=function(e,t){if(!mR(e))throw Error(Bt(299));var n=!1,s="",i=DX;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=uR(e,1,!1,null,null,n,!1,s,i),e[sf]=t.current,c1(e.nodeType===8?e.parentNode:e),new fR(t)};Nc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Bt(188)):(e=Object.keys(e).join(","),Error(Bt(268,e)));return e=rY(t),e=e===null?null:e.stateNode,e};Nc.flushSync=function(e){return Ng(e)};Nc.hydrate=function(e,t,n){if(!T_(t))throw Error(Bt(200));return E_(null,e,t,!0,n)};Nc.hydrateRoot=function(e,t,n){if(!mR(e))throw Error(Bt(405));var s=n!=null&&n.hydratedSources||null,i=!1,a="",o=DX;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=RX(t,null,e,1,n??null,i,!1,a,o),e[sf]=t.current,c1(e),s)for(e=0;e<s.length;e++)n=s[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new P_(t)};Nc.render=function(e,t,n){if(!T_(t))throw Error(Bt(200));return E_(null,e,t,!1,n)};Nc.unmountComponentAtNode=function(e){if(!T_(e))throw Error(Bt(40));return e._reactRootContainer?(Ng(function(){E_(null,null,e,!1,function(){e._reactRootContainer=null,e[sf]=null})}),!0):!1};Nc.unstable_batchedUpdates=oR;Nc.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!T_(n))throw Error(Bt(200));if(e==null||e._reactInternals===void 0)throw Error(Bt(38));return E_(e,t,n,!1,s)};Nc.version="18.3.1-next-f1338f8080-20240426";function MX(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MX)}catch(e){console.error(e)}}MX(),MG.exports=Nc;var Hg=MG.exports;const yge=ts(Hg);var IX,VL=Hg;IX=VL.createRoot,VL.hydrateRoot;function bge(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,s,i,a,o=[],l="",c=e.split("/");for(c[0]||c.shift();i=c.shift();)n=i[0],n==="*"?(o.push(n),l+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(s=i.indexOf("?",1),a=i.indexOf(".",1),o.push(i.substring(1,~s?s:~a?a:i.length)),l+=~s&&!~a?"(?:/([^/]+?))?":"/([^/]+?)",~a&&(l+=(~s?"?":"")+"\\"+i.substring(a))):l+="/"+i;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var LX={exports:{}},FX={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv=b;function jge(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wge=typeof Object.is=="function"?Object.is:jge,Nge=Xv.useState,Sge=Xv.useEffect,_ge=Xv.useLayoutEffect,Cge=Xv.useDebugValue;function Age(e,t){var n=t(),s=Nge({inst:{value:n,getSnapshot:t}}),i=s[0].inst,a=s[1];return _ge(function(){i.value=n,i.getSnapshot=t,gk(i)&&a({inst:i})},[e,n,t]),Sge(function(){return gk(i)&&a({inst:i}),e(function(){gk(i)&&a({inst:i})})},[e]),Cge(n),n}function gk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wge(e,n)}catch{return!0}}function kge(e,t){return t()}var Pge=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?kge:Age;FX.useSyncExternalStore=Xv.useSyncExternalStore!==void 0?Xv.useSyncExternalStore:Pge;LX.exports=FX;var Tge=LX.exports;const Ege=RG.useInsertionEffect,Oge=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rge=Oge?b.useLayoutEffect:b.useEffect,Dge=Ege||Rge,$X=e=>{const t=b.useRef([e,(...n)=>t[0](...n)]).current;return Dge(()=>{t[0]=e}),t[1]},Mge="popstate",pR="pushState",gR="replaceState",Ige="hashchange",UL=[Mge,pR,gR,Ige],Lge=e=>{for(const t of UL)addEventListener(t,e);return()=>{for(const t of UL)removeEventListener(t,e)}},BX=(e,t)=>Tge.useSyncExternalStore(Lge,e,t),Fge=()=>location.search,$ge=({ssrSearch:e=""}={})=>BX(Fge,()=>e),qL=()=>location.pathname,Bge=({ssrPath:e}={})=>BX(qL,e?()=>e:qL),Vge=(e,{replace:t=!1,state:n=null}={})=>history[t?gR:pR](n,"",e),Uge=(e={})=>[Bge(e),Vge],zL=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[zL]>"u"){for(const e of[pR,gR]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),n}}Object.defineProperty(window,zL,{value:!0})}const qge=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",VX=(e="")=>e==="/"?"":e,zge=(e,t)=>e[0]==="~"?e.slice(1):VX(t)+e,Hge=(e="",t)=>qge(x3(VX(e)),x3(t)),Wge=e=>e[0]==="?"?e.slice(1):e,x3=e=>{try{return decodeURI(e)}catch{return e}},Kge=e=>x3(Wge(e)),UX={hook:Uge,searchHook:$ge,parser:bge,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:e=>e},qX=b.createContext(UX),Wg=()=>b.useContext(qX),zX={},HX=b.createContext(zX),bf=()=>b.useContext(HX),O_=e=>{const[t,n]=e.hook(e);return[Hge(e.base,t),$X((s,i)=>n(zge(s,e.base),i))]},Dr=()=>O_(Wg()),R_=()=>{const e=Wg();return Kge(e.searchHook(e))},xR=(e,t,n,s)=>{const{pattern:i,keys:a}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=i.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=a!==!1?Object.fromEntries(a.map((h,f)=>[h,c[f]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[l]:[]]:[!1,null]},vR=e=>xR(Wg().parser,e,Dr()[0]),Gge=({children:e,...t})=>{var u,h;const n=Wg(),s=t.hook?UX:n;let i=s;const[a,o]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=a),t.hrefs=t.hrefs??((h=t.hook)==null?void 0:h.hrefs);let l=b.useRef({}),c=l.current,d=c;for(let f in s){const m=f==="base"?s[f]+(t[f]||""):t[f]||s[f];c===d&&m!==d[f]&&(l.current=d={...d}),d[f]=m,m!==s[f]&&(i=d)}return b.createElement(qX.Provider,{value:i,children:e})},HL=({children:e,component:t},n)=>t?b.createElement(t,{params:n}):typeof e=="function"?e(n):e,Yge=e=>{let t=b.useRef(zX),n=t.current;for(const s in e)e[s]!==n[s]&&(n=e);return Object.keys(e).length===0&&(n=e),t.current=n},Jt=({path:e,nest:t,match:n,...s})=>{const i=Wg(),[a]=O_(i),[o,l,c]=n??xR(i.parser,e,a,t),d=Yge({...bf(),...l});if(!o)return null;const u=c?b.createElement(Gge,{base:c},HL(s,d)):HL(s,d);return b.createElement(HX.Provider,{value:d,children:u})},Co=b.forwardRef((e,t)=>{const n=Wg(),[s,i]=O_(n),{to:a="",href:o=a,onClick:l,asChild:c,children:d,className:u,replace:h,state:f,...m}=e,p=$X(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(l==null||l(v),v.defaultPrevented||(v.preventDefault(),i(o,e)))}),g=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&b.isValidElement(d)?b.cloneElement(d,{onClick:p,href:g}):b.createElement("a",{...m,onClick:p,href:g,className:u!=null&&u.call?u(s===o):u,children:d,ref:t})}),WX=e=>Array.isArray(e)?e.flatMap(t=>WX(t&&t.type===b.Fragment?t.props.children:t)):[e],Xge=({children:e,location:t})=>{const n=Wg(),[s]=O_(n);for(const i of WX(e)){let a=0;if(b.isValidElement(i)&&(a=xR(n.parser,i.props.path,t||s,i.props.nest))[0])return b.cloneElement(i,{match:a})}return null};var z0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Sg=typeof window>"u"||"Deno"in globalThis;function zc(){}function Qge(e,t){return typeof e=="function"?e(t):e}function v3(e){return typeof e=="number"&&e>=0&&e!==1/0}function KX(e,t){return Math.max(e+(t||0)-Date.now(),0)}function cv(e,t){return typeof e=="function"?e(t):e}function Vd(e,t){return typeof e=="function"?e(t):e}function WL(e,t){const{type:n="all",exact:s,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==yR(o,t.options))return!1}else if(!v1(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function KL(e,t){const{exact:n,status:s,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(_g(t.options.mutationKey)!==_g(a))return!1}else if(!v1(t.options.mutationKey,a))return!1}return!(s&&t.state.status!==s||i&&!i(t))}function yR(e,t){return((t==null?void 0:t.queryKeyHashFn)||_g)(e)}function _g(e){return JSON.stringify(e,(t,n)=>y3(n)?Object.keys(n).sort().reduce((s,i)=>(s[i]=n[i],s),{}):n)}function v1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!v1(e[n],t[n])):!1}function GX(e,t){if(e===t)return e;const n=GL(e)&&GL(t);if(n||y3(e)&&y3(t)){const s=n?e:Object.keys(e),i=s.length,a=n?t:Object.keys(t),o=a.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const u=n?d:a[d];(!n&&s.includes(u)||n)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=GX(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return i===o&&c===i?e:l}return t}function f5(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function GL(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y3(e){if(!YL(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!YL(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function YL(e){return Object.prototype.toString.call(e)==="[object Object]"}function Zge(e){return new Promise(t=>{setTimeout(t,e)})}function b3(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?GX(e,t):t}function Jge(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function exe(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var bR=Symbol();function YX(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===bR?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var ig,im,Tv,Az,txe=(Az=class extends z0{constructor(){super();Ir(this,ig);Ir(this,im);Ir(this,Tv);rr(this,Tv,t=>{if(!Sg&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Le(this,im)||this.setEventListener(Le(this,Tv))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,im))==null||t.call(this),rr(this,im,void 0))}setEventListener(t){var n;rr(this,Tv,t),(n=Le(this,im))==null||n.call(this),rr(this,im,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Le(this,ig)!==t&&(rr(this,ig,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Le(this,ig)=="boolean"?Le(this,ig):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ig=new WeakMap,im=new WeakMap,Tv=new WeakMap,Az),jR=new txe,Ev,am,Ov,kz,rxe=(kz=class extends z0{constructor(){super();Ir(this,Ev,!0);Ir(this,am);Ir(this,Ov);rr(this,Ov,t=>{if(!Sg&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){Le(this,am)||this.setEventListener(Le(this,Ov))}onUnsubscribe(){var t;this.hasListeners()||((t=Le(this,am))==null||t.call(this),rr(this,am,void 0))}setEventListener(t){var n;rr(this,Ov,t),(n=Le(this,am))==null||n.call(this),rr(this,am,t(this.setOnline.bind(this)))}setOnline(t){Le(this,Ev)!==t&&(rr(this,Ev,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Le(this,Ev)}},Ev=new WeakMap,am=new WeakMap,Ov=new WeakMap,kz),m5=new rxe;function j3(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});n.status="pending",n.catch(()=>{});function s(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{s({status:"fulfilled",value:i}),e(i)},n.reject=i=>{s({status:"rejected",reason:i}),t(i)},n}function nxe(e){return Math.min(1e3*2**e,3e4)}function XX(e){return(e??"online")==="online"?m5.isOnline():!0}var QX=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function xk(e){return e instanceof QX}function ZX(e){let t=!1,n=0,s=!1,i;const a=j3(),o=g=>{var v;s||(f(new QX(g)),(v=e.abort)==null||v.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>jR.isFocused()&&(e.networkMode==="always"||m5.isOnline())&&e.canRun(),u=()=>XX(e.networkMode)&&e.canRun(),h=g=>{var v;s||(s=!0,(v=e.onSuccess)==null||v.call(e,g),i==null||i(),a.resolve(g))},f=g=>{var v;s||(s=!0,(v=e.onError)==null||v.call(e,g),i==null||i(),a.reject(g))},m=()=>new Promise(g=>{var v;i=x=>{(s||d())&&g(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;i=void 0,s||(g=e.onContinue)==null||g.call(e)}),p=()=>{if(s)return;let g;const v=n===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(h).catch(x=>{var S;if(s)return;const y=e.retry??(Sg?0:3),j=e.retryDelay??nxe,w=typeof j=="function"?j(n,x):j,N=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,x);if(t||!N){f(x);return}n++,(S=e.onFail)==null||S.call(e,n,x),Zge(w).then(()=>d()?void 0:m()).then(()=>{t?f(x):p()})})};return{promise:a,cancel:o,continue:()=>(i==null||i(),a),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?p():m().then(p),a)}}function sxe(){let e=[],t=0,n=l=>{l()},s=l=>{l()},i=l=>setTimeout(l,0);const a=l=>{t?e.push(l):i(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{i=l}}}var ba=sxe(),ag,Pz,JX=(Pz=class{constructor(){Ir(this,ag)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),v3(this.gcTime)&&rr(this,ag,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Sg?1/0:5*60*1e3))}clearGcTimeout(){Le(this,ag)&&(clearTimeout(Le(this,ag)),rr(this,ag,void 0))}},ag=new WeakMap,Pz),Rv,Dv,qc,jo,Ej,og,Id,Oh,Tz,ixe=(Tz=class extends JX{constructor(t){super();Ir(this,Id);Ir(this,Rv);Ir(this,Dv);Ir(this,qc);Ir(this,jo);Ir(this,Ej);Ir(this,og);rr(this,og,!1),rr(this,Ej,t.defaultOptions),this.setOptions(t.options),this.observers=[],rr(this,qc,t.cache),this.queryKey=t.queryKey,this.queryHash=t.queryHash,rr(this,Rv,axe(this.options)),this.state=t.state??Le(this,Rv),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Le(this,jo))==null?void 0:t.promise}setOptions(t){this.options={...Le(this,Ej),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Le(this,qc).remove(this)}setData(t,n){const s=b3(this.state.data,t,this.options);return pn(this,Id,Oh).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){pn(this,Id,Oh).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,i;const n=(s=Le(this,jo))==null?void 0:s.promise;return(i=Le(this,jo))==null||i.cancel(t),n?n.then(zc).catch(zc):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Le(this,Rv))}isActive(){return this.observers.some(t=>Vd(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===bR||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!KX(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Le(this,jo))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Le(this,jo))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Le(this,qc).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Le(this,jo)&&(Le(this,og)?Le(this,jo).cancel({revert:!0}):Le(this,jo).cancelRetry()),this.scheduleGc()),Le(this,qc).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pn(this,Id,Oh).call(this,{type:"invalidate"})}fetch(t,n){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Le(this,jo))return Le(this,jo).continueRetry(),Le(this,jo).promise}if(t&&this.setOptions(t),!this.options.queryFn){const h=this.observers.find(f=>f.options.queryFn);h&&this.setOptions(h.options)}const s=new AbortController,i=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(rr(this,og,!0),s.signal)})},a=()=>{const h=YX(this.options,n),f={queryKey:this.queryKey,meta:this.meta};return i(f),rr(this,og,!1),this.options.persister?this.options.persister(h,f,this):h(f)},o={fetchOptions:n,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};i(o),(c=this.options.behavior)==null||c.onFetch(o,this),rr(this,Dv,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&pn(this,Id,Oh).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=h=>{var f,m,p,g;xk(h)&&h.silent||pn(this,Id,Oh).call(this,{type:"error",error:h}),xk(h)||((m=(f=Le(this,qc).config).onError)==null||m.call(f,h,this),(g=(p=Le(this,qc).config).onSettled)==null||g.call(p,this.state.data,h,this)),this.scheduleGc()};return rr(this,jo,ZX({initialPromise:n==null?void 0:n.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:h=>{var f,m,p,g;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(v){l(v);return}(m=(f=Le(this,qc).config).onSuccess)==null||m.call(f,h,this),(g=(p=Le(this,qc).config).onSettled)==null||g.call(p,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,f)=>{pn(this,Id,Oh).call(this,{type:"failed",failureCount:h,error:f})},onPause:()=>{pn(this,Id,Oh).call(this,{type:"pause"})},onContinue:()=>{pn(this,Id,Oh).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Le(this,jo).start()}},Rv=new WeakMap,Dv=new WeakMap,qc=new WeakMap,jo=new WeakMap,Ej=new WeakMap,og=new WeakMap,Id=new WeakSet,Oh=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...eQ(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return xk(i)&&i.revert&&Le(this,Dv)?{...Le(this,Dv),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),ba.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Le(this,qc).notify({query:this,type:"updated",action:t})})},Tz);function eQ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XX(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function axe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Lu,Ez,oxe=(Ez=class extends z0{constructor(t={}){super();Ir(this,Lu);this.config=t,rr(this,Lu,new Map)}build(t,n,s){const i=n.queryKey,a=n.queryHash??yR(i,n);let o=this.get(a);return o||(o=new ixe({cache:this,queryKey:i,queryHash:a,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(i)}),this.add(o)),o}add(t){Le(this,Lu).has(t.queryHash)||(Le(this,Lu).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Le(this,Lu).get(t.queryHash);n&&(t.destroy(),n===t&&Le(this,Lu).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ba.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Le(this,Lu).get(t)}getAll(){return[...Le(this,Lu).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>WL(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>WL(t,s)):n}notify(t){ba.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){ba.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ba.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Lu=new WeakMap,Ez),Fu,Wo,lg,$u,Gf,Oz,lxe=(Oz=class extends JX{constructor(t){super();Ir(this,$u);Ir(this,Fu);Ir(this,Wo);Ir(this,lg);this.mutationId=t.mutationId,rr(this,Wo,t.mutationCache),rr(this,Fu,[]),this.state=t.state||tQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Le(this,Fu).includes(t)||(Le(this,Fu).push(t),this.clearGcTimeout(),Le(this,Wo).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){rr(this,Fu,Le(this,Fu).filter(n=>n!==t)),this.scheduleGc(),Le(this,Wo).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Le(this,Fu).length||(this.state.status==="pending"?this.scheduleGc():Le(this,Wo).remove(this))}continue(){var t;return((t=Le(this,lg))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,a,o,l,c,d,u,h,f,m,p,g,v,x,y,j,w,N,S,T;rr(this,lg,ZX({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(C,A)=>{pn(this,$u,Gf).call(this,{type:"failed",failureCount:C,error:A})},onPause:()=>{pn(this,$u,Gf).call(this,{type:"pause"})},onContinue:()=>{pn(this,$u,Gf).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Le(this,Wo).canRun(this)}));const n=this.state.status==="pending",s=!Le(this,lg).canStart();try{if(!n){pn(this,$u,Gf).call(this,{type:"pending",variables:t,isPaused:s}),await((a=(i=Le(this,Wo).config).onMutate)==null?void 0:a.call(i,t,this));const A=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t));A!==this.state.context&&pn(this,$u,Gf).call(this,{type:"pending",context:A,variables:t,isPaused:s})}const C=await Le(this,lg).start();return await((d=(c=Le(this,Wo).config).onSuccess)==null?void 0:d.call(c,C,t,this.state.context,this)),await((h=(u=this.options).onSuccess)==null?void 0:h.call(u,C,t,this.state.context)),await((m=(f=Le(this,Wo).config).onSettled)==null?void 0:m.call(f,C,null,this.state.variables,this.state.context,this)),await((g=(p=this.options).onSettled)==null?void 0:g.call(p,C,null,t,this.state.context)),pn(this,$u,Gf).call(this,{type:"success",data:C}),C}catch(C){try{throw await((x=(v=Le(this,Wo).config).onError)==null?void 0:x.call(v,C,t,this.state.context,this)),await((j=(y=this.options).onError)==null?void 0:j.call(y,C,t,this.state.context)),await((N=(w=Le(this,Wo).config).onSettled)==null?void 0:N.call(w,void 0,C,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,C,t,this.state.context)),C}finally{pn(this,$u,Gf).call(this,{type:"error",error:C})}}finally{Le(this,Wo).runNext(this)}}},Fu=new WeakMap,Wo=new WeakMap,lg=new WeakMap,$u=new WeakSet,Gf=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),ba.batch(()=>{Le(this,Fu).forEach(s=>{s.onMutationUpdate(t)}),Le(this,Wo).notify({mutation:this,type:"updated",action:t})})},Oz);function tQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Jl,Oj,Rz,cxe=(Rz=class extends z0{constructor(t={}){super();Ir(this,Jl);Ir(this,Oj);this.config=t,rr(this,Jl,new Map),rr(this,Oj,Date.now())}build(t,n,s){const i=new lxe({mutationCache:this,mutationId:++Uw(this,Oj)._,options:t.defaultMutationOptions(n),state:s});return this.add(i),i}add(t){const n=o2(t),s=Le(this,Jl).get(n)??[];s.push(t),Le(this,Jl).set(n,s),this.notify({type:"added",mutation:t})}remove(t){var s;const n=o2(t);if(Le(this,Jl).has(n)){const i=(s=Le(this,Jl).get(n))==null?void 0:s.filter(a=>a!==t);i&&(i.length===0?Le(this,Jl).delete(n):Le(this,Jl).set(n,i))}this.notify({type:"removed",mutation:t})}canRun(t){var s;const n=(s=Le(this,Jl).get(o2(t)))==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===t}runNext(t){var s;const n=(s=Le(this,Jl).get(o2(t)))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){ba.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}getAll(){return[...Le(this,Jl).values()].flat()}find(t){const n={exact:!0,...t};return this.getAll().find(s=>KL(n,s))}findAll(t={}){return this.getAll().filter(n=>KL(t,n))}notify(t){ba.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return ba.batch(()=>Promise.all(t.map(n=>n.continue().catch(zc))))}},Jl=new WeakMap,Oj=new WeakMap,Rz);function o2(e){var t;return((t=e.options.scope)==null?void 0:t.id)??String(e.mutationId)}function XL(e){return{onFetch:(t,n)=>{var u,h,f,m,p;const s=t.options,i=(f=(h=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:h.fetchMore)==null?void 0:f.direction,a=((m=t.state.data)==null?void 0:m.pages)||[],o=((p=t.state.data)==null?void 0:p.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const v=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=YX(t.options,t.fetchOptions),y=async(j,w,N)=>{if(g)return Promise.reject();if(w==null&&j.pages.length)return Promise.resolve(j);const S={queryKey:t.queryKey,pageParam:w,direction:N?"backward":"forward",meta:t.options.meta};v(S);const T=await x(S),{maxPages:C}=t.options,A=N?exe:Jge;return{pages:A(j.pages,T,C),pageParams:A(j.pageParams,w,C)}};if(i&&a.length){const j=i==="backward",w=j?dxe:QL,N={pages:a,pageParams:o},S=w(s,N);l=await y(N,S,j)}else{const j=e??a.length;do{const w=c===0?o[0]??s.initialPageParam:QL(s,l);if(c>0&&w==null)break;l=await y(l,w),c++}while(c<j)}return l};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,d,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function QL(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function dxe(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var Ti,om,lm,Mv,Iv,cm,Lv,Fv,Dz,uxe=(Dz=class{constructor(e={}){Ir(this,Ti);Ir(this,om);Ir(this,lm);Ir(this,Mv);Ir(this,Iv);Ir(this,cm);Ir(this,Lv);Ir(this,Fv);rr(this,Ti,e.queryCache||new oxe),rr(this,om,e.mutationCache||new cxe),rr(this,lm,e.defaultOptions||{}),rr(this,Mv,new Map),rr(this,Iv,new Map),rr(this,cm,0)}mount(){Uw(this,cm)._++,Le(this,cm)===1&&(rr(this,Lv,jR.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Ti).onFocus())})),rr(this,Fv,m5.subscribe(async e=>{e&&(await this.resumePausedMutations(),Le(this,Ti).onOnline())})))}unmount(){var e,t;Uw(this,cm)._--,Le(this,cm)===0&&((e=Le(this,Lv))==null||e.call(this),rr(this,Lv,void 0),(t=Le(this,Fv))==null||t.call(this),rr(this,Fv,void 0))}isFetching(e){return Le(this,Ti).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Le(this,om).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Le(this,Ti).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),s=Le(this,Ti).build(this,n);return e.revalidateIfStale&&s.isStaleByTime(cv(n.staleTime,s))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return Le(this,Ti).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),i=Le(this,Ti).get(s.queryHash),a=i==null?void 0:i.state.data,o=Qge(t,a);if(o!==void 0)return Le(this,Ti).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return ba.batch(()=>Le(this,Ti).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Le(this,Ti).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Le(this,Ti);ba.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Le(this,Ti),s={type:"active",...e};return ba.batch(()=>(n.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries(s,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},s=ba.batch(()=>Le(this,Ti).findAll(e).map(i=>i.cancel(n)));return Promise.all(s).then(zc).catch(zc)}invalidateQueries(e={},t={}){return ba.batch(()=>{if(Le(this,Ti).findAll(e).forEach(s=>{s.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:(t==null?void 0:t.cancelRefetch)??!0},s=ba.batch(()=>Le(this,Ti).findAll(e).filter(i=>!i.isDisabled()).map(i=>{let a=i.fetch(void 0,n);return n.throwOnError||(a=a.catch(zc)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(s).then(zc)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Le(this,Ti).build(this,t);return n.isStaleByTime(cv(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(zc).catch(zc)}fetchInfiniteQuery(e){return e.behavior=XL(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(zc).catch(zc)}ensureInfiniteQueryData(e){return e.behavior=XL(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return m5.isOnline()?Le(this,om).resumePausedMutations():Promise.resolve()}getQueryCache(){return Le(this,Ti)}getMutationCache(){return Le(this,om)}getDefaultOptions(){return Le(this,lm)}setDefaultOptions(e){rr(this,lm,e)}setQueryDefaults(e,t){Le(this,Mv).set(_g(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Le(this,Mv).values()];let n={};return t.forEach(s=>{v1(e,s.queryKey)&&(n={...n,...s.defaultOptions})}),n}setMutationDefaults(e,t){Le(this,Iv).set(_g(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Le(this,Iv).values()];let n={};return t.forEach(s=>{v1(e,s.mutationKey)&&(n={...n,...s.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Le(this,lm).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=yR(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===bR&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Le(this,lm).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Le(this,Ti).clear(),Le(this,om).clear()}},Ti=new WeakMap,om=new WeakMap,lm=new WeakMap,Mv=new WeakMap,Iv=new WeakMap,cm=new WeakMap,Lv=new WeakMap,Fv=new WeakMap,Dz),gl,_n,Rj,Ko,cg,$v,dm,Bu,Dj,Bv,Vv,dg,ug,um,Uv,es,ub,w3,N3,S3,_3,C3,A3,k3,rQ,Mz,hxe=(Mz=class extends z0{constructor(t,n){super();Ir(this,es);Ir(this,gl);Ir(this,_n);Ir(this,Rj);Ir(this,Ko);Ir(this,cg);Ir(this,$v);Ir(this,dm);Ir(this,Bu);Ir(this,Dj);Ir(this,Bv);Ir(this,Vv);Ir(this,dg);Ir(this,ug);Ir(this,um);Ir(this,Uv,new Set);this.options=n,rr(this,gl,t),rr(this,Bu,null),rr(this,dm,j3()),this.options.experimental_prefetchInRender||Le(this,dm).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Le(this,_n).addObserver(this),ZL(Le(this,_n),this.options)?pn(this,es,ub).call(this):this.updateResult(),pn(this,es,_3).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return P3(Le(this,_n),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return P3(Le(this,_n),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pn(this,es,C3).call(this),pn(this,es,A3).call(this),Le(this,_n).removeObserver(this)}setOptions(t,n){const s=this.options,i=Le(this,_n);if(this.options=Le(this,gl).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Vd(this.options.enabled,Le(this,_n))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pn(this,es,k3).call(this),Le(this,_n).setOptions(this.options),s._defaulted&&!f5(this.options,s)&&Le(this,gl).getQueryCache().notify({type:"observerOptionsUpdated",query:Le(this,_n),observer:this});const a=this.hasListeners();a&&JL(Le(this,_n),i,this.options,s)&&pn(this,es,ub).call(this),this.updateResult(n),a&&(Le(this,_n)!==i||Vd(this.options.enabled,Le(this,_n))!==Vd(s.enabled,Le(this,_n))||cv(this.options.staleTime,Le(this,_n))!==cv(s.staleTime,Le(this,_n)))&&pn(this,es,w3).call(this);const o=pn(this,es,N3).call(this);a&&(Le(this,_n)!==i||Vd(this.options.enabled,Le(this,_n))!==Vd(s.enabled,Le(this,_n))||o!==Le(this,um))&&pn(this,es,S3).call(this,o)}getOptimisticResult(t){const n=Le(this,gl).getQueryCache().build(Le(this,gl),t),s=this.createResult(n,t);return mxe(this,s)&&(rr(this,Ko,s),rr(this,$v,this.options),rr(this,cg,Le(this,_n).state)),s}getCurrentResult(){return Le(this,Ko)}trackResult(t,n){const s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),t[i])})}),s}trackProp(t){Le(this,Uv).add(t)}getCurrentQuery(){return Le(this,_n)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Le(this,gl).defaultQueryOptions(t),s=Le(this,gl).getQueryCache().build(Le(this,gl),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return pn(this,es,ub).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Le(this,Ko)))}createResult(t,n){var C;const s=Le(this,_n),i=this.options,a=Le(this,Ko),o=Le(this,cg),l=Le(this,$v),d=t!==s?t.state:Le(this,Rj),{state:u}=t;let h={...u},f=!1,m;if(n._optimisticResults){const A=this.hasListeners(),R=!A&&ZL(t,n),k=A&&JL(t,s,n,i);(R||k)&&(h={...h,...eQ(u.data,t.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:p,errorUpdatedAt:g,status:v}=h;if(n.select&&h.data!==void 0)if(a&&h.data===(o==null?void 0:o.data)&&n.select===Le(this,Dj))m=Le(this,Bv);else try{rr(this,Dj,n.select),m=n.select(h.data),m=b3(a==null?void 0:a.data,m,n),rr(this,Bv,m),rr(this,Bu,null)}catch(A){rr(this,Bu,A)}else m=h.data;if(n.placeholderData!==void 0&&m===void 0&&v==="pending"){let A;if(a!=null&&a.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))A=a.data;else if(A=typeof n.placeholderData=="function"?n.placeholderData((C=Le(this,Vv))==null?void 0:C.state.data,Le(this,Vv)):n.placeholderData,n.select&&A!==void 0)try{A=n.select(A),rr(this,Bu,null)}catch(R){rr(this,Bu,R)}A!==void 0&&(v="success",m=b3(a==null?void 0:a.data,A,n),f=!0)}Le(this,Bu)&&(p=Le(this,Bu),m=Le(this,Bv),g=Date.now(),v="error");const x=h.fetchStatus==="fetching",y=v==="pending",j=v==="error",w=y&&x,N=m!==void 0,T={status:v,fetchStatus:h.fetchStatus,isPending:y,isSuccess:v==="success",isError:j,isInitialLoading:w,isLoading:w,data:m,dataUpdatedAt:h.dataUpdatedAt,error:p,errorUpdatedAt:g,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>d.dataUpdateCount||h.errorUpdateCount>d.errorUpdateCount,isFetching:x,isRefetching:x&&!y,isLoadingError:j&&!N,isPaused:h.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&N,isStale:wR(t,n),refetch:this.refetch,promise:Le(this,dm)};if(this.options.experimental_prefetchInRender){const A=O=>{T.status==="error"?O.reject(T.error):T.data!==void 0&&O.resolve(T.data)},R=()=>{const O=rr(this,dm,T.promise=j3());A(O)},k=Le(this,dm);switch(k.status){case"pending":t.queryHash===s.queryHash&&A(k);break;case"fulfilled":(T.status==="error"||T.data!==k.value)&&R();break;case"rejected":(T.status!=="error"||T.error!==k.reason)&&R();break}}return T}updateResult(t){const n=Le(this,Ko),s=this.createResult(Le(this,_n),this.options);if(rr(this,cg,Le(this,_n).state),rr(this,$v,this.options),Le(this,cg).data!==void 0&&rr(this,Vv,Le(this,_n)),f5(s,n))return;rr(this,Ko,s);const i={},a=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!Le(this,Uv).size)return!0;const c=new Set(l??Le(this,Uv));return this.options.throwOnError&&c.add("error"),Object.keys(Le(this,Ko)).some(d=>{const u=d;return Le(this,Ko)[u]!==n[u]&&c.has(u)})};(t==null?void 0:t.listeners)!==!1&&a()&&(i.listeners=!0),pn(this,es,rQ).call(this,{...i,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pn(this,es,_3).call(this)}},gl=new WeakMap,_n=new WeakMap,Rj=new WeakMap,Ko=new WeakMap,cg=new WeakMap,$v=new WeakMap,dm=new WeakMap,Bu=new WeakMap,Dj=new WeakMap,Bv=new WeakMap,Vv=new WeakMap,dg=new WeakMap,ug=new WeakMap,um=new WeakMap,Uv=new WeakMap,es=new WeakSet,ub=function(t){pn(this,es,k3).call(this);let n=Le(this,_n).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(zc)),n},w3=function(){pn(this,es,C3).call(this);const t=cv(this.options.staleTime,Le(this,_n));if(Sg||Le(this,Ko).isStale||!v3(t))return;const s=KX(Le(this,Ko).dataUpdatedAt,t)+1;rr(this,dg,setTimeout(()=>{Le(this,Ko).isStale||this.updateResult()},s))},N3=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Le(this,_n)):this.options.refetchInterval)??!1},S3=function(t){pn(this,es,A3).call(this),rr(this,um,t),!(Sg||Vd(this.options.enabled,Le(this,_n))===!1||!v3(Le(this,um))||Le(this,um)===0)&&rr(this,ug,setInterval(()=>{(this.options.refetchIntervalInBackground||jR.isFocused())&&pn(this,es,ub).call(this)},Le(this,um)))},_3=function(){pn(this,es,w3).call(this),pn(this,es,S3).call(this,pn(this,es,N3).call(this))},C3=function(){Le(this,dg)&&(clearTimeout(Le(this,dg)),rr(this,dg,void 0))},A3=function(){Le(this,ug)&&(clearInterval(Le(this,ug)),rr(this,ug,void 0))},k3=function(){const t=Le(this,gl).getQueryCache().build(Le(this,gl),this.options);if(t===Le(this,_n))return;const n=Le(this,_n);rr(this,_n,t),rr(this,Rj,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},rQ=function(t){ba.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Le(this,Ko))}),Le(this,gl).getQueryCache().notify({query:Le(this,_n),type:"observerResultsUpdated"})})},Mz);function fxe(e,t){return Vd(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function ZL(e,t){return fxe(e,t)||e.state.data!==void 0&&P3(e,t,t.refetchOnMount)}function P3(e,t,n){if(Vd(t.enabled,e)!==!1){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&wR(e,t)}return!1}function JL(e,t,n,s){return(e!==t||Vd(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&wR(e,n)}function wR(e,t){return Vd(t.enabled,e)!==!1&&e.isStaleByTime(cv(t.staleTime,e))}function mxe(e,t){return!f5(e.getCurrentResult(),t)}var hm,fm,xl,Bh,rf,gN,T3,Iz,pxe=(Iz=class extends z0{constructor(n,s){super();Ir(this,rf);Ir(this,hm);Ir(this,fm);Ir(this,xl);Ir(this,Bh);rr(this,hm,n),this.setOptions(s),this.bindMethods(),pn(this,rf,gN).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const s=this.options;this.options=Le(this,hm).defaultMutationOptions(n),f5(this.options,s)||Le(this,hm).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Le(this,xl),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&_g(s.mutationKey)!==_g(this.options.mutationKey)?this.reset():((i=Le(this,xl))==null?void 0:i.state.status)==="pending"&&Le(this,xl).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Le(this,xl))==null||n.removeObserver(this)}onMutationUpdate(n){pn(this,rf,gN).call(this),pn(this,rf,T3).call(this,n)}getCurrentResult(){return Le(this,fm)}reset(){var n;(n=Le(this,xl))==null||n.removeObserver(this),rr(this,xl,void 0),pn(this,rf,gN).call(this),pn(this,rf,T3).call(this)}mutate(n,s){var i;return rr(this,Bh,s),(i=Le(this,xl))==null||i.removeObserver(this),rr(this,xl,Le(this,hm).getMutationCache().build(Le(this,hm),this.options)),Le(this,xl).addObserver(this),Le(this,xl).execute(n)}},hm=new WeakMap,fm=new WeakMap,xl=new WeakMap,Bh=new WeakMap,rf=new WeakSet,gN=function(){var s;const n=((s=Le(this,xl))==null?void 0:s.state)??tQ();rr(this,fm,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},T3=function(n){ba.batch(()=>{var s,i,a,o,l,c,d,u;if(Le(this,Bh)&&this.hasListeners()){const h=Le(this,fm).variables,f=Le(this,fm).context;(n==null?void 0:n.type)==="success"?((i=(s=Le(this,Bh)).onSuccess)==null||i.call(s,n.data,h,f),(o=(a=Le(this,Bh)).onSettled)==null||o.call(a,n.data,null,h,f)):(n==null?void 0:n.type)==="error"&&((c=(l=Le(this,Bh)).onError)==null||c.call(l,n.error,h,f),(u=(d=Le(this,Bh)).onSettled)==null||u.call(d,void 0,n.error,h,f))}this.listeners.forEach(h=>{h(Le(this,fm))})})},Iz),nQ=b.createContext(void 0),ci=e=>{const t=b.useContext(nQ);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},gxe=({client:e,children:t})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(nQ.Provider,{value:e,children:t})),sQ=b.createContext(!1),xxe=()=>b.useContext(sQ);sQ.Provider;function vxe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var yxe=b.createContext(vxe()),bxe=()=>b.useContext(yxe);function iQ(e,t){return typeof e=="function"?e(...t):!!e}function E3(){}var jxe=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},wxe=e=>{b.useEffect(()=>{e.clearReset()},[e])},Nxe=({result:e,errorResetBoundary:t,throwOnError:n,query:s})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&iQ(n,[e.error,s]),Sxe=e=>{e.suspense&&(e.staleTime===void 0&&(e.staleTime=1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},_xe=(e,t)=>e.isLoading&&e.isFetching&&!t,Cxe=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,e8=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function Axe(e,t,n){var u,h,f,m,p;const s=ci(),i=xxe(),a=bxe(),o=s.defaultQueryOptions(e);(h=(u=s.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||h.call(u,o),o._optimisticResults=i?"isRestoring":"optimistic",Sxe(o),jxe(o,a),wxe(a);const l=!s.getQueryCache().get(o.queryHash),[c]=b.useState(()=>new t(s,o)),d=c.getOptimisticResult(o);if(b.useSyncExternalStore(b.useCallback(g=>{const v=i?E3:c.subscribe(ba.batchCalls(g));return c.updateResult(),v},[c,i]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),b.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),Cxe(o,d))throw e8(o,c,a);if(Nxe({result:d,errorResetBoundary:a,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash)}))throw d.error;if((m=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_afterQuery)==null||m.call(f,o,d),o.experimental_prefetchInRender&&!Sg&&_xe(d,i)){const g=l?e8(o,c,a):(p=s.getQueryCache().get(o.queryHash))==null?void 0:p.promise;g==null||g.catch(E3).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function rt(e,t){return Axe(e,hxe)}function Ot(e,t){const n=ci(),[s]=b.useState(()=>new pxe(n,e));b.useEffect(()=>{s.setOptions(e)},[s,e]);const i=b.useSyncExternalStore(b.useCallback(o=>s.subscribe(ba.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),a=b.useCallback((o,l)=>{s.mutate(o,l).catch(E3)},[s]);if(i.error&&iQ(s.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}async function NR(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function lt(e,t,n){const s=await fetch(t,{method:e,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await NR(s),s}async function aQ(e){const t=await fetch(e,{credentials:"include"});return await NR(t),t.json()}const kxe=({on401:e})=>async({queryKey:t})=>{const n=await fetch(t.join("/"),{credentials:"include"});return await NR(n),await n.json()},er=new uxe({defaultOptions:{queries:{queryFn:kxe({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pxe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oQ=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Txe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Exe=b.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:a,iconNode:o,...l},c)=>b.createElement("svg",{ref:c,...Txe,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:oQ("lucide",i),...l},[...o.map(([d,u])=>b.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=(e,t)=>{const n=b.forwardRef(({className:s,...i},a)=>b.createElement(Exe,{ref:a,iconNode:t,className:oQ(`lucide-${Pxe(e)}`,s),...i}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oxe=Ze("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Ze("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rxe=Ze("AirVent",[["path",{d:"M6 12H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"larmp2"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"M18.3 17.7a2.5 2.5 0 0 1-3.16 3.83 2.53 2.53 0 0 1-1.14-2V12",key:"1bo8pg"}],["path",{d:"M6.6 15.6A2 2 0 1 0 10 17v-5",key:"t9h90c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t8=Ze("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Ze("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Ze("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dxe=Ze("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=Ze("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=Ze("BadgeIndianRupee",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M8 8h8",key:"1bis0t"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m13 17-5-1h1a4 4 0 0 0 0-8",key:"nu2bwa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mxe=Ze("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=Ze("BedDouble",[["path",{d:"M2 20v-8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v8",key:"1k78r4"}],["path",{d:"M4 10V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4",key:"fb3tl2"}],["path",{d:"M12 4v6",key:"1dcgq2"}],["path",{d:"M2 18h20",key:"ajqnye"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Ze("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=Ze("BellRing",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fm=Ze("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ixe=Ze("Bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lxe=Ze("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=Ze("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Ze("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=Ze("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fxe=Ze("Cable",[["path",{d:"M17 21v-2a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1",key:"10bnsj"}],["path",{d:"M19 15V6.5a1 1 0 0 0-7 0v11a1 1 0 0 1-7 0V9",key:"1eqmu1"}],["path",{d:"M21 21v-2h-4",key:"14zm7j"}],["path",{d:"M3 5h4V3",key:"z442eg"}],["path",{d:"M7 5a1 1 0 0 1 1 1v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a1 1 0 0 1 1-1V3",key:"ebdjd7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Ze("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=Ze("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=Ze("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $xe=Ze("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Ze("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=Ze("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=Ze("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bxe=Ze("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=Ze("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vxe=Ze("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Ze("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=Ze("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=Ze("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uxe=Ze("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=Ze("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qxe=Ze("CircleArrowLeft",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"m12 8-4 4 4 4",key:"15vm53"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=Ze("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=Ze("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zxe=Ze("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hxe=Ze("CircleParking",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9 17V7h4a3 3 0 0 1 0 6H9",key:"1dfk2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=Ze("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oo=Ze("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=Ze("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Ze("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=Ze("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=Ze("Clock3",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16.5 12",key:"1aq6pp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Ze("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=Ze("CloudUpload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wxe=Ze("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kxe=Ze("ConciergeBell",[["path",{d:"M3 20a1 1 0 0 1-1-1v-1a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1a1 1 0 0 1-1 1Z",key:"1pvr1r"}],["path",{d:"M20 16a8 8 0 1 0-16 0",key:"1pa543"}],["path",{d:"M12 4v4",key:"1bq03y"}],["path",{d:"M10 4h4",key:"1xpv9s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Ze("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=Ze("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gxe=Ze("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=Ze("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yxe=Ze("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Ze("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xxe=Ze("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qxe=Ze("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=Ze("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=Ze("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=Ze("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=Ze("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=Ze("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zxe=Ze("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=Ze("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Ze("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jxe=Ze("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eve=Ze("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=Ze("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=Ze("FolderArchive",[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tve=Ze("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rve=Ze("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nve=Ze("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sve=Ze("HandHeart",[["path",{d:"M11 14h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 16",key:"1ifwr1"}],["path",{d:"m7 20 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"17abbs"}],["path",{d:"m2 15 6 6",key:"10dquu"}],["path",{d:"M19.5 8.5c.7-.7 1.5-1.6 1.5-2.7A2.73 2.73 0 0 0 16 4a2.78 2.78 0 0 0-5 1.8c0 1.2.8 2 1.5 2.8L16 12Z",key:"1h3036"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ive=Ze("Handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=Ze("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ave=Ze("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ove=Ze("Hospital",[["path",{d:"M12 6v4",key:"16clxf"}],["path",{d:"M14 14h-4",key:"esezmu"}],["path",{d:"M14 18h-4",key:"16mqa2"}],["path",{d:"M14 8h-4",key:"z8ypaz"}],["path",{d:"M18 12h2a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h2",key:"b1k337"}],["path",{d:"M18 22V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v18",key:"16g51d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=Ze("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lve=Ze("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=Ze("Images",[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=Ze("IndianRupee",[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=Ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cve=Ze("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dve=Ze("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uve=Ze("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hve=Ze("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=Ze("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=Ze("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=Ze("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=Ze("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Ze("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Js=Ze("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Ze("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fve=Ze("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=Ze("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mve=Ze("PackageOpen",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pve=Ze("PackagePlus",[["path",{d:"M16 16h6",key:"100bgy"}],["path",{d:"M19 13v6",key:"85cyf1"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=Ze("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gve=Ze("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=Ze("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xve=Ze("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vve=Ze("PawPrint",[["circle",{cx:"11",cy:"4",r:"2",key:"vol9p0"}],["circle",{cx:"18",cy:"8",r:"2",key:"17gozi"}],["circle",{cx:"20",cy:"16",r:"2",key:"1v9bxh"}],["path",{d:"M9 10a5 5 0 0 1 5 5v3.5a3.5 3.5 0 0 1-6.84 1.045Q6.52 17.48 4.46 16.84A3.5 3.5 0 0 1 5.5 10Z",key:"1ydw1z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yve=Ze("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=Ze("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Ze("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Ze("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bm=Ze("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=Ze("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=Ze("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bve=Ze("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vk=Ze("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jve=Ze("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Ze("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=Ze("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Ze("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=Ze("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=Ze("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=Ze("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=Ze("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Ze("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Ze("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=Ze("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Ze("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wve=Ze("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nve=Ze("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sve=Ze("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=Ze("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=Ze("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 16a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v1.5a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5V11a2 2 0 0 0-4 0z",key:"xacw8m"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Ze("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=Ze("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=Ze("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=Ze("SquareX",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=Ze("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ve=Ze("Tent",[["path",{d:"M3.5 21 14 3",key:"1szst5"}],["path",{d:"M20.5 21 10 3",key:"1310c3"}],["path",{d:"M15.5 21 12 15l-3.5 6",key:"1ddtfw"}],["path",{d:"M2 21h20",key:"1nyx9w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cve=Ze("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=Ze("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ave=Ze("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kve=Ze("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pve=Ze("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tve=Ze("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h.01",key:"a7atzg"}],["path",{d:"M16 15h.01",key:"rnfrdf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=Ze("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bQ=Ze("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eve=Ze("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=Ze("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jn=Ze("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jQ=Ze("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=Ze("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Ze("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ove=Ze("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gm=Ze("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=Ze("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Do=Ze("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vj=Ze("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wQ=Ze("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=Ze("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NQ=Ze("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Ze("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Ze("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ux=Ze("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rve=Ze("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Dve=1,Mve=1e6;let bk=0;function Ive(){return bk=(bk+1)%Number.MAX_SAFE_INTEGER,bk.toString()}const jk=new Map,h8=e=>{if(jk.has(e))return;const t=setTimeout(()=>{jk.delete(e),Ob({type:"REMOVE_TOAST",toastId:e})},Mve);jk.set(e,t)},Lve=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,Dve)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(n=>n.id===t.toast.id?{...n,...t.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?h8(n):e.toasts.forEach(s=>{h8(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===n||n===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(n=>n.id!==t.toastId)}}},vN=[];let yN={toasts:[]};function Ob(e){yN=Lve(yN,e),vN.forEach(t=>{t(yN)})}function Fve({...e}){const t=Ive(),n=i=>Ob({type:"UPDATE_TOAST",toast:{...i,id:t}}),s=()=>Ob({type:"DISMISS_TOAST",toastId:t});return Ob({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||s()}}}),{id:t,dismiss:s,update:n}}function Tr(){const[e,t]=b.useState(yN);return b.useEffect(()=>(vN.push(t),()=>{const n=vN.indexOf(t);n>-1&&vN.splice(n,1)}),[e]),{...e,toast:Fve,dismiss:n=>Ob({type:"DISMISS_TOAST",toastId:n})}}function $t(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e==null||e(i),n===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function f8(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function M_(...e){return t=>{let n=!1;const s=e.map(i=>{const a=f8(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():f8(e[i],null)}}}}function Jr(...e){return b.useCallback(M_(...e),e)}function $ve(e,t){const n=b.createContext(t),s=a=>{const{children:o,...l}=a,c=b.useMemo(()=>l,Object.values(l));return r.jsx(n.Provider,{value:c,children:o})};s.displayName=e+"Provider";function i(a){const o=b.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[s,i]}function oa(e,t=[]){let n=[];function s(a,o){const l=b.createContext(o),c=n.length;n=[...n,o];const d=h=>{var x;const{scope:f,children:m,...p}=h,g=((x=f==null?void 0:f[e])==null?void 0:x[c])||l,v=b.useMemo(()=>p,Object.values(p));return r.jsx(g.Provider,{value:v,children:m})};d.displayName=a+"Provider";function u(h,f){var g;const m=((g=f==null?void 0:f[e])==null?void 0:g[c])||l,p=b.useContext(m);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${a}\``)}return[d,u]}const i=()=>{const a=n.map(o=>b.createContext(o));return function(l){const c=(l==null?void 0:l[e])||a;return b.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return i.scopeName=e,[s,Bve(i,...t)]}function Bve(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const h=c(a)[`__scope${d}`];return{...l,...h}},{});return b.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}function Um(e){const t=Vve(e),n=b.forwardRef((s,i)=>{const{children:a,...o}=s,l=b.Children.toArray(a),c=l.find(Uve);if(c){const d=c.props.children,u=l.map(h=>h===c?b.Children.count(d)>1?b.Children.only(null):b.isValidElement(d)?d.props.children:null:h);return r.jsx(t,{...o,ref:i,children:b.isValidElement(d)?b.cloneElement(d,void 0,u):null})}return r.jsx(t,{...o,ref:i,children:a})});return n.displayName=`${e}.Slot`,n}var I_=Um("Slot");function Vve(e){const t=b.forwardRef((n,s)=>{const{children:i,...a}=n;if(b.isValidElement(i)){const o=zve(i),l=qve(a,i.props);return i.type!==b.Fragment&&(l.ref=s?M_(s,o):o),b.cloneElement(i,l)}return b.Children.count(i)>1?b.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var SQ=Symbol("radix.slottable");function _Q(e){const t=({children:n})=>r.jsx(r.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=SQ,t}function Uve(e){return b.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===SQ}function qve(e,t){const n={...t};for(const s in t){const i=e[s],a=t[s];/^on[A-Z]/.test(s)?i&&a?n[s]=(...l)=>{a(...l),i(...l)}:i&&(n[s]=i):s==="style"?n[s]={...i,...a}:s==="className"&&(n[s]=[i,a].filter(Boolean).join(" "))}return{...e,...n}}function zve(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function L_(e){const t=e+"CollectionProvider",[n,s]=oa(t),[i,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:x}=g,y=Ae.useRef(null),j=Ae.useRef(new Map).current;return r.jsx(i,{scope:v,itemMap:j,collectionRef:y,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=Um(l),d=Ae.forwardRef((g,v)=>{const{scope:x,children:y}=g,j=a(l,x),w=Jr(v,j.collectionRef);return r.jsx(c,{ref:w,children:y})});d.displayName=l;const u=e+"CollectionItemSlot",h="data-radix-collection-item",f=Um(u),m=Ae.forwardRef((g,v)=>{const{scope:x,children:y,...j}=g,w=Ae.useRef(null),N=Jr(v,w),S=a(u,x);return Ae.useEffect(()=>(S.itemMap.set(w,{ref:w,...j}),()=>void S.itemMap.delete(w))),r.jsx(f,{[h]:"",ref:N,children:y})});m.displayName=u;function p(g){const v=a(e+"CollectionConsumer",g);return Ae.useCallback(()=>{const y=v.collectionRef.current;if(!y)return[];const j=Array.from(y.querySelectorAll(`[${h}]`));return Array.from(v.itemMap.values()).sort((S,T)=>j.indexOf(S.ref.current)-j.indexOf(T.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},p,s]}var Hve=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ar=Hve.reduce((e,t)=>{const n=Um(`Primitive.${t}`),s=b.forwardRef((i,a)=>{const{asChild:o,...l}=i,c=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),r.jsx(c,{...l,ref:a})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function TR(e,t){e&&Hg.flushSync(()=>e.dispatchEvent(t))}function ii(e){const t=b.useRef(e);return b.useEffect(()=>{t.current=e}),b.useMemo(()=>(...n)=>{var s;return(s=t.current)==null?void 0:s.call(t,...n)},[])}function Wve(e,t=globalThis==null?void 0:globalThis.document){const n=ii(e);b.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[n,t])}var Kve="DismissableLayer",M3="dismissableLayer.update",Gve="dismissableLayer.pointerDownOutside",Yve="dismissableLayer.focusOutside",m8,CQ=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gg=b.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=e,d=b.useContext(CQ),[u,h]=b.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=b.useState({}),p=Jr(t,T=>h(T)),g=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),y=u?g.indexOf(u):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,w=y>=x,N=Qve(T=>{const C=T.target,A=[...d.branches].some(R=>R.contains(C));!w||A||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},f),S=Zve(T=>{const C=T.target;[...d.branches].some(R=>R.contains(C))||(a==null||a(T),o==null||o(T),T.defaultPrevented||l==null||l())},f);return Wve(T=>{y===d.layers.size-1&&(s==null||s(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},f),b.useEffect(()=>{if(u)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(m8=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),p8(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=m8)}},[u,f,n,d]),b.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),p8())},[u,d]),b.useEffect(()=>{const T=()=>m({});return document.addEventListener(M3,T),()=>document.removeEventListener(M3,T)},[]),r.jsx(ar.div,{...c,ref:p,style:{pointerEvents:j?w?"auto":"none":void 0,...e.style},onFocusCapture:$t(e.onFocusCapture,S.onFocusCapture),onBlurCapture:$t(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:$t(e.onPointerDownCapture,N.onPointerDownCapture)})});Gg.displayName=Kve;var Xve="DismissableLayerBranch",AQ=b.forwardRef((e,t)=>{const n=b.useContext(CQ),s=b.useRef(null),i=Jr(t,s);return b.useEffect(()=>{const a=s.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),r.jsx(ar.div,{...e,ref:i})});AQ.displayName=Xve;function Qve(e,t=globalThis==null?void 0:globalThis.document){const n=ii(e),s=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const a=l=>{if(l.target&&!s.current){let c=function(){kQ(Gve,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>s.current=!0}}function Zve(e,t=globalThis==null?void 0:globalThis.document){const n=ii(e),s=b.useRef(!1);return b.useEffect(()=>{const i=a=>{a.target&&!s.current&&kQ(Yve,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function p8(){const e=new CustomEvent(M3);document.dispatchEvent(e)}function kQ(e,t,n,{discrete:s}){const i=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?TR(i,a):i.dispatchEvent(a)}var Jve=Gg,e0e=AQ,Xi=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},t0e="Portal",W0=b.forwardRef((e,t)=>{var l;const{container:n,...s}=e,[i,a]=b.useState(!1);Xi(()=>a(!0),[]);const o=n||i&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?yge.createPortal(r.jsx(ar.div,{...s,ref:t}),o):null});W0.displayName=t0e;function r0e(e,t){return b.useReducer((n,s)=>t[n][s]??n,e)}var la=e=>{const{present:t,children:n}=e,s=n0e(t),i=typeof n=="function"?n({present:s.isPresent}):b.Children.only(n),a=Jr(s.ref,s0e(i));return typeof n=="function"||s.isPresent?b.cloneElement(i,{ref:a}):null};la.displayName="Presence";function n0e(e){const[t,n]=b.useState(),s=b.useRef({}),i=b.useRef(e),a=b.useRef("none"),o=e?"mounted":"unmounted",[l,c]=r0e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const d=c2(s.current);a.current=l==="mounted"?d:"none"},[l]),Xi(()=>{const d=s.current,u=i.current;if(u!==e){const f=a.current,m=c2(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),Xi(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,h=m=>{const g=c2(s.current).includes(m.animationName);if(m.target===t&&g&&(c("ANIMATION_END"),!i.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},f=m=>{m.target===t&&(a.current=c2(s.current))};return t.addEventListener("animationstart",f),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",f),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:b.useCallback(d=>{d&&(s.current=getComputedStyle(d)),n(d)},[])}}function c2(e){return(e==null?void 0:e.animationName)||"none"}function s0e(e){var s,i;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function bc({prop:e,defaultProp:t,onChange:n=()=>{}}){const[s,i]=i0e({defaultProp:t,onChange:n}),a=e!==void 0,o=a?e:s,l=ii(n),c=b.useCallback(d=>{if(a){const h=typeof d=="function"?d(e):d;h!==e&&l(h)}else i(d)},[a,e,i,l]);return[o,c]}function i0e({defaultProp:e,onChange:t}){const n=b.useState(e),[s]=n,i=b.useRef(s),a=ii(t);return b.useEffect(()=>{i.current!==s&&(a(s),i.current=s)},[s,i,a]),n}var a0e="VisuallyHidden",Uj=b.forwardRef((e,t)=>r.jsx(ar.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Uj.displayName=a0e;var o0e=Uj,ER="ToastProvider",[OR,l0e,c0e]=L_("Toast"),[PQ]=oa("Toast",[c0e]),[d0e,F_]=PQ(ER),TQ=e=>{const{__scopeToast:t,label:n="Notification",duration:s=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,c]=b.useState(null),[d,u]=b.useState(0),h=b.useRef(!1),f=b.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${ER}\`. Expected non-empty \`string\`.`),r.jsx(OR.Provider,{scope:t,children:r.jsx(d0e,{scope:t,label:n,duration:s,swipeDirection:i,swipeThreshold:a,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:b.useCallback(()=>u(m=>m+1),[]),onToastRemove:b.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};TQ.displayName=ER;var EQ="ToastViewport",u0e=["F8"],I3="toast.viewportPause",L3="toast.viewportResume",OQ=b.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:s=u0e,label:i="Notifications ({hotkey})",...a}=e,o=F_(EQ,n),l=l0e(n),c=b.useRef(null),d=b.useRef(null),u=b.useRef(null),h=b.useRef(null),f=Jr(t,h,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;b.useEffect(()=>{const v=x=>{var j;s.length!==0&&s.every(w=>x[w]||x.code===w)&&((j=h.current)==null||j.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[s]),b.useEffect(()=>{const v=c.current,x=h.current;if(p&&v&&x){const y=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(I3);x.dispatchEvent(S),o.isClosePausedRef.current=!0}},j=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(L3);x.dispatchEvent(S),o.isClosePausedRef.current=!1}},w=S=>{!v.contains(S.relatedTarget)&&j()},N=()=>{v.contains(document.activeElement)||j()};return v.addEventListener("focusin",y),v.addEventListener("focusout",w),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",N),window.addEventListener("blur",y),window.addEventListener("focus",j),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",w),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",N),window.removeEventListener("blur",y),window.removeEventListener("focus",j)}}},[p,o.isClosePausedRef]);const g=b.useCallback(({tabbingDirection:v})=>{const y=l().map(j=>{const w=j.ref.current,N=[w,...S0e(w)];return v==="forwards"?N:N.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return b.useEffect(()=>{const v=h.current;if(v){const x=y=>{var N,S,T;const j=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!j){const C=document.activeElement,A=y.shiftKey;if(y.target===v&&A){(N=d.current)==null||N.focus();return}const O=g({tabbingDirection:A?"backwards":"forwards"}),$=O.findIndex(D=>D===C);wk(O.slice($+1))?y.preventDefault():A?(S=d.current)==null||S.focus():(T=u.current)==null||T.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,g]),r.jsxs(e0e,{ref:c,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:p?void 0:"none"},children:[p&&r.jsx(F3,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});wk(v)}}),r.jsx(OR.Slot,{scope:n,children:r.jsx(ar.ol,{tabIndex:-1,...a,ref:f})}),p&&r.jsx(F3,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});wk(v)}})]})});OQ.displayName=EQ;var RQ="ToastFocusProxy",F3=b.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:s,...i}=e,a=F_(RQ,n);return r.jsx(Uj,{"aria-hidden":!0,tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=a.viewport)!=null&&d.contains(l))&&s()}})});F3.displayName=RQ;var $_="Toast",h0e="toast.swipeStart",f0e="toast.swipeMove",m0e="toast.swipeCancel",p0e="toast.swipeEnd",DQ=b.forwardRef((e,t)=>{const{forceMount:n,open:s,defaultOpen:i,onOpenChange:a,...o}=e,[l=!0,c]=bc({prop:s,defaultProp:i,onChange:a});return r.jsx(la,{present:n||l,children:r.jsx(v0e,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:ii(e.onPause),onResume:ii(e.onResume),onSwipeStart:$t(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$t(e.onSwipeMove,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:$t(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$t(e.onSwipeEnd,d=>{const{x:u,y:h}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});DQ.displayName=$_;var[g0e,x0e]=PQ($_,{onClose(){}}),v0e=b.forwardRef((e,t)=>{const{__scopeToast:n,type:s="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...p}=e,g=F_($_,n),[v,x]=b.useState(null),y=Jr(t,D=>x(D)),j=b.useRef(null),w=b.useRef(null),N=i||g.duration,S=b.useRef(0),T=b.useRef(N),C=b.useRef(0),{onToastAdd:A,onToastRemove:R}=g,k=ii(()=>{var q;(v==null?void 0:v.contains(document.activeElement))&&((q=g.viewport)==null||q.focus()),o()}),O=b.useCallback(D=>{!D||D===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(k,D))},[k]);b.useEffect(()=>{const D=g.viewport;if(D){const q=()=>{O(T.current),d==null||d()},M=()=>{const L=new Date().getTime()-S.current;T.current=T.current-L,window.clearTimeout(C.current),c==null||c()};return D.addEventListener(I3,M),D.addEventListener(L3,q),()=>{D.removeEventListener(I3,M),D.removeEventListener(L3,q)}}},[g.viewport,N,c,d,O]),b.useEffect(()=>{a&&!g.isClosePausedRef.current&&O(N)},[a,N,g.isClosePausedRef,O]),b.useEffect(()=>(A(),()=>R()),[A,R]);const $=b.useMemo(()=>v?VQ(v):null,[v]);return g.viewport?r.jsxs(r.Fragment,{children:[$&&r.jsx(y0e,{__scopeToast:n,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:$}),r.jsx(g0e,{scope:n,onClose:k,children:Hg.createPortal(r.jsx(OR.ItemSlot,{scope:n,children:r.jsx(Jve,{asChild:!0,onEscapeKeyDown:$t(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||k(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:r.jsx(ar.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":g.swipeDirection,...p,ref:y,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:$t(e.onKeyDown,D=>{D.key==="Escape"&&(l==null||l(D.nativeEvent),D.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,k()))}),onPointerDown:$t(e.onPointerDown,D=>{D.button===0&&(j.current={x:D.clientX,y:D.clientY})}),onPointerMove:$t(e.onPointerMove,D=>{if(!j.current)return;const q=D.clientX-j.current.x,M=D.clientY-j.current.y,L=!!w.current,V=["left","right"].includes(g.swipeDirection),P=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,z=V?P(0,q):0,Z=V?0:P(0,M),F=D.pointerType==="touch"?10:2,W={x:z,y:Z},G={originalEvent:D,delta:W};L?(w.current=W,d2(f0e,h,G,{discrete:!1})):g8(W,g.swipeDirection,F)?(w.current=W,d2(h0e,u,G,{discrete:!1}),D.target.setPointerCapture(D.pointerId)):(Math.abs(q)>F||Math.abs(M)>F)&&(j.current=null)}),onPointerUp:$t(e.onPointerUp,D=>{const q=w.current,M=D.target;if(M.hasPointerCapture(D.pointerId)&&M.releasePointerCapture(D.pointerId),w.current=null,j.current=null,q){const L=D.currentTarget,V={originalEvent:D,delta:q};g8(q,g.swipeDirection,g.swipeThreshold)?d2(p0e,m,V,{discrete:!0}):d2(m0e,f,V,{discrete:!0}),L.addEventListener("click",P=>P.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),y0e=e=>{const{__scopeToast:t,children:n,...s}=e,i=F_($_,t),[a,o]=b.useState(!1),[l,c]=b.useState(!1);return w0e(()=>o(!0)),b.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:r.jsx(W0,{asChild:!0,children:r.jsx(Uj,{...s,children:a&&r.jsxs(r.Fragment,{children:[i.label," ",n]})})})},b0e="ToastTitle",MQ=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(ar.div,{...s,ref:t})});MQ.displayName=b0e;var j0e="ToastDescription",IQ=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e;return r.jsx(ar.div,{...s,ref:t})});IQ.displayName=j0e;var LQ="ToastAction",FQ=b.forwardRef((e,t)=>{const{altText:n,...s}=e;return n.trim()?r.jsx(BQ,{altText:n,asChild:!0,children:r.jsx(RR,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${LQ}\`. Expected non-empty \`string\`.`),null)});FQ.displayName=LQ;var $Q="ToastClose",RR=b.forwardRef((e,t)=>{const{__scopeToast:n,...s}=e,i=x0e($Q,n);return r.jsx(BQ,{asChild:!0,children:r.jsx(ar.button,{type:"button",...s,ref:t,onClick:$t(e.onClick,i.onClose)})})});RR.displayName=$Q;var BQ=b.forwardRef((e,t)=>{const{__scopeToast:n,altText:s,...i}=e;return r.jsx(ar.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...i,ref:t})});function VQ(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),N0e(s)){const i=s.ariaHidden||s.hidden||s.style.display==="none",a=s.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...VQ(s))}}),t}function d2(e,t,n,{discrete:s}){const i=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),s?TR(i,a):i.dispatchEvent(a)}var g8=(e,t,n=0)=>{const s=Math.abs(e.x),i=Math.abs(e.y),a=s>i;return t==="left"||t==="right"?a&&s>n:!a&&i>n};function w0e(e=()=>{}){const t=ii(e);Xi(()=>{let n=0,s=0;return n=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(s)}},[t])}function N0e(e){return e.nodeType===e.ELEMENT_NODE}function S0e(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function wk(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var _0e=TQ,UQ=OQ,qQ=DQ,zQ=MQ,HQ=IQ,WQ=FQ,KQ=RR;function GQ(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=GQ(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function on(){for(var e,t,n=0,s="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=GQ(e))&&(s&&(s+=" "),s+=t);return s}const x8=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,v8=on,Yg=(e,t)=>n=>{var s;if((t==null?void 0:t.variants)==null)return v8(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(d=>{const u=n==null?void 0:n[d],h=a==null?void 0:a[d];if(u===null)return null;const f=x8(u)||x8(h);return i[d][f]}),l=n&&Object.entries(n).reduce((d,u)=>{let[h,f]=u;return f===void 0||(d[h]=f),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:h,className:f,...m}=u;return Object.entries(m).every(p=>{let[g,v]=p;return Array.isArray(v)?v.includes({...a,...l}[g]):{...a,...l}[g]===v})?[...d,h,f]:d},[]);return v8(e,o,c,n==null?void 0:n.class,n==null?void 0:n.className)},DR="-",C0e=e=>{const t=k0e(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(DR);return l[0]===""&&l.length!==1&&l.shift(),YQ(l,t)||A0e(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},YQ=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],s=t.nextPart.get(n),i=s?YQ(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(DR);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},y8=/^\[(.+)\]$/,A0e=e=>{if(y8.test(e)){const t=y8.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},k0e=e=>{const{theme:t,prefix:n}=e,s={nextPart:new Map,validators:[]};return T0e(Object.entries(e.classGroups),n).forEach(([a,o])=>{$3(o,s,a,t)}),s},$3=(e,t,n,s)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:b8(t,i);a.classGroupId=n;return}if(typeof i=="function"){if(P0e(i)){$3(i(s),t,n,s);return}t.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([a,o])=>{$3(o,b8(t,a),n,s)})})},b8=(e,t)=>{let n=e;return t.split(DR).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},P0e=e=>e.isThemeGetter,T0e=(e,t)=>t?e.map(([n,s])=>{const i=s.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[n,i]}):e,E0e=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,s=new Map;const i=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,s=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=s.get(a))!==void 0)return i(a,o),o},set(a,o){n.has(a)?n.set(a,o):i(a,o)}}},XQ="!",O0e=e=>{const{separator:t,experimentalParseClassName:n}=e,s=t.length===1,i=t[0],a=t.length,o=l=>{const c=[];let d=0,u=0,h;for(let v=0;v<l.length;v++){let x=l[v];if(d===0){if(x===i&&(s||l.slice(v,v+a)===t)){c.push(l.slice(u,v)),u=v+a;continue}if(x==="/"){h=v;continue}}x==="["?d++:x==="]"&&d--}const f=c.length===0?l:l.substring(u),m=f.startsWith(XQ),p=m?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:p,maybePostfixModifierPosition:g}};return n?l=>n({className:l,parseClassName:o}):o},R0e=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(s=>{s[0]==="["?(t.push(...n.sort(),s),n=[]):n.push(s)}),t.push(...n.sort()),t},D0e=e=>({cache:E0e(e.cacheSize),parseClassName:O0e(e),...C0e(e)}),M0e=/\s+/,I0e=(e,t)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(M0e);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:m}=n(d);let p=!!m,g=s(p?f.substring(0,m):f);if(!g){if(!p){l=d+(l.length>0?" "+l:l);continue}if(g=s(f),!g){l=d+(l.length>0?" "+l:l);continue}p=!1}const v=R0e(u).join(":"),x=h?v+XQ:v,y=x+g;if(a.includes(y))continue;a.push(y);const j=i(g,p);for(let w=0;w<j.length;++w){const N=j[w];a.push(x+N)}l=d+(l.length>0?" "+l:l)}return l};function L0e(){let e=0,t,n,s="";for(;e<arguments.length;)(t=arguments[e++])&&(n=QQ(t))&&(s&&(s+=" "),s+=n);return s}const QQ=e=>{if(typeof e=="string")return e;let t,n="";for(let s=0;s<e.length;s++)e[s]&&(t=QQ(e[s]))&&(n&&(n+=" "),n+=t);return n};function F0e(e,...t){let n,s,i,a=o;function o(c){const d=t.reduce((u,h)=>h(u),e());return n=D0e(d),s=n.cache.get,i=n.cache.set,a=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=I0e(c,n);return i(c,u),u}return function(){return a(L0e.apply(null,arguments))}}const Ws=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},ZQ=/^\[(?:([a-z-]+):)?(.+)\]$/i,$0e=/^\d+\/\d+$/,B0e=new Set(["px","full","screen"]),V0e=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,U0e=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,q0e=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,z0e=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,H0e=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ch=e=>uv(e)||B0e.has(e)||$0e.test(e),Uf=e=>K0(e,"length",J0e),uv=e=>!!e&&!Number.isNaN(Number(e)),Nk=e=>K0(e,"number",uv),Oy=e=>!!e&&Number.isInteger(Number(e)),W0e=e=>e.endsWith("%")&&uv(e.slice(0,-1)),hn=e=>ZQ.test(e),qf=e=>V0e.test(e),K0e=new Set(["length","size","percentage"]),G0e=e=>K0(e,K0e,JQ),Y0e=e=>K0(e,"position",JQ),X0e=new Set(["image","url"]),Q0e=e=>K0(e,X0e,tye),Z0e=e=>K0(e,"",eye),Ry=()=>!0,K0=(e,t,n)=>{const s=ZQ.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):n(s[2]):!1},J0e=e=>U0e.test(e)&&!q0e.test(e),JQ=()=>!1,eye=e=>z0e.test(e),tye=e=>H0e.test(e),rye=()=>{const e=Ws("colors"),t=Ws("spacing"),n=Ws("blur"),s=Ws("brightness"),i=Ws("borderColor"),a=Ws("borderRadius"),o=Ws("borderSpacing"),l=Ws("borderWidth"),c=Ws("contrast"),d=Ws("grayscale"),u=Ws("hueRotate"),h=Ws("invert"),f=Ws("gap"),m=Ws("gradientColorStops"),p=Ws("gradientColorStopPositions"),g=Ws("inset"),v=Ws("margin"),x=Ws("opacity"),y=Ws("padding"),j=Ws("saturate"),w=Ws("scale"),N=Ws("sepia"),S=Ws("skew"),T=Ws("space"),C=Ws("translate"),A=()=>["auto","contain","none"],R=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",hn,t],O=()=>[hn,t],$=()=>["",Ch,Uf],D=()=>["auto",uv,hn],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],M=()=>["solid","dashed","dotted","double","none"],L=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],P=()=>["","0",hn],z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Z=()=>[uv,hn];return{cacheSize:500,separator:":",theme:{colors:[Ry],spacing:[Ch,Uf],blur:["none","",qf,hn],brightness:Z(),borderColor:[e],borderRadius:["none","","full",qf,hn],borderSpacing:O(),borderWidth:$(),contrast:Z(),grayscale:P(),hueRotate:Z(),invert:P(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[W0e,Uf],inset:k(),margin:k(),opacity:Z(),padding:O(),saturate:Z(),scale:Z(),sepia:P(),skew:Z(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",hn]}],container:["container"],columns:[{columns:[qf]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),hn]}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:A()}],"overscroll-x":[{"overscroll-x":A()}],"overscroll-y":[{"overscroll-y":A()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Oy,hn]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",hn]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Oy,hn]}],"grid-cols":[{"grid-cols":[Ry]}],"col-start-end":[{col:["auto",{span:["full",Oy,hn]},hn]}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":[Ry]}],"row-start-end":[{row:["auto",{span:[Oy,hn]},hn]}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",hn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",hn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[y]}],px:[{px:[y]}],py:[{py:[y]}],ps:[{ps:[y]}],pe:[{pe:[y]}],pt:[{pt:[y]}],pr:[{pr:[y]}],pb:[{pb:[y]}],pl:[{pl:[y]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",hn,t]}],"min-w":[{"min-w":[hn,t,"min","max","fit"]}],"max-w":[{"max-w":[hn,t,"none","full","min","max","fit","prose",{screen:[qf]},qf]}],h:[{h:[hn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[hn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[hn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[hn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",qf,Uf]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nk]}],"font-family":[{font:[Ry]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",hn]}],"line-clamp":[{"line-clamp":["none",uv,Nk]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ch,hn]}],"list-image":[{"list-image":["none",hn]}],"list-style-type":[{list:["none","disc","decimal",hn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...M(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ch,Uf]}],"underline-offset":[{"underline-offset":["auto",Ch,hn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",hn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",hn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),Y0e]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",G0e]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Q0e]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[p]}],"gradient-via-pos":[{via:[p]}],"gradient-to-pos":[{to:[p]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...M(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:M()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...M()]}],"outline-offset":[{"outline-offset":[Ch,hn]}],"outline-w":[{outline:[Ch,Uf]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ch,Uf]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",qf,Z0e]}],"shadow-color":[{shadow:[Ry]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...L(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":L()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",qf,hn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[N]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[N]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",hn]}],duration:[{duration:Z()}],ease:[{ease:["linear","in","out","in-out",hn]}],delay:[{delay:Z()}],animate:[{animate:["none","spin","ping","pulse","bounce",hn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Oy,hn]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",hn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",hn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",hn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Ch,Uf,Nk]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},nye=F0e(rye);function Xe(...e){return nye(on(e))}const sye={pdf:"application/pdf",jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",webp:"image/webp",svg:"image/svg+xml",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xls:"application/vnd.ms-excel",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",txt:"text/plain",csv:"text/csv",json:"application/json"},iye=(e,t)=>{if(t&&t!=="application/octet-stream")return t;if(!e)return t??void 0;const n=e.split(".");if(n.length<2)return t??void 0;const s=n.pop().toLowerCase();return sye[s]??t??void 0};function Kd(e,t={}){const n=new URLSearchParams;n.set("path",e);const s=iye(t.fileName,t.mimeType??void 0);return s&&n.set("mime",s),t.fileName&&n.set("filename",t.fileName),`/api/object-storage/view?${n.toString()}`}const aye=_0e,eZ=b.forwardRef(({className:e,...t},n)=>r.jsx(UQ,{ref:n,className:Xe("fixed bottom-4 left-4 z-[100] flex max-h-screen flex-col gap-2 w-auto max-w-[320px]",e),...t}));eZ.displayName=UQ.displayName;const oye=Yg("group pointer-events-auto relative flex w-full items-center justify-between space-x-3 overflow-hidden rounded-md border p-3 pr-6 shadow-lg transition-all text-sm data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-left-full data-[state=open]:slide-in-from-left-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),tZ=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx(qQ,{ref:s,className:Xe(oye({variant:t}),e),...n}));tZ.displayName=qQ.displayName;const lye=b.forwardRef(({className:e,...t},n)=>r.jsx(WQ,{ref:n,className:Xe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));lye.displayName=WQ.displayName;const rZ=b.forwardRef(({className:e,...t},n)=>r.jsx(KQ,{ref:n,className:Xe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(sh,{className:"h-4 w-4"})}));rZ.displayName=KQ.displayName;const nZ=b.forwardRef(({className:e,...t},n)=>r.jsx(zQ,{ref:n,className:Xe("text-sm font-semibold",e),...t}));nZ.displayName=zQ.displayName;const sZ=b.forwardRef(({className:e,...t},n)=>r.jsx(HQ,{ref:n,className:Xe("text-sm opacity-90",e),...t}));sZ.displayName=HQ.displayName;function cye(){const{toasts:e}=Tr();return r.jsxs(aye,{duration:2e3,children:[e.map(function({id:t,title:n,description:s,action:i,...a}){return r.jsxs(tZ,{...a,children:[r.jsxs("div",{className:"grid gap-1",children:[n&&r.jsx(nZ,{children:n}),s&&r.jsx(sZ,{children:s})]}),i,r.jsx(rZ,{})]},t)}),r.jsx(eZ,{})]})}var dye=RG[" useId ".trim().toString()]||(()=>{}),uye=0;function mc(e){const[t,n]=b.useState(dye());return Xi(()=>{n(s=>s??String(uye++))},[e]),t?`radix-${t}`:""}const hye=["top","right","bottom","left"],qm=Math.min,nc=Math.max,y5=Math.round,u2=Math.floor,Xu=e=>({x:e,y:e}),fye={left:"right",right:"left",bottom:"top",top:"bottom"},mye={start:"end",end:"start"};function B3(e,t,n){return nc(e,qm(t,n))}function cf(e,t){return typeof e=="function"?e(t):e}function df(e){return e.split("-")[0]}function G0(e){return e.split("-")[1]}function MR(e){return e==="x"?"y":"x"}function IR(e){return e==="y"?"height":"width"}function zm(e){return["top","bottom"].includes(df(e))?"y":"x"}function LR(e){return MR(zm(e))}function pye(e,t,n){n===void 0&&(n=!1);const s=G0(e),i=LR(e),a=IR(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=b5(o)),[o,b5(o)]}function gye(e){const t=b5(e);return[V3(e),t,V3(t)]}function V3(e){return e.replace(/start|end/g,t=>mye[t])}function xye(e,t,n){const s=["left","right"],i=["right","left"],a=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:s:t?s:i;case"left":case"right":return t?a:o;default:return[]}}function vye(e,t,n,s){const i=G0(e);let a=xye(df(e),n==="start",s);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(V3)))),a}function b5(e){return e.replace(/left|right|bottom|top/g,t=>fye[t])}function yye(e){return{top:0,right:0,bottom:0,left:0,...e}}function iZ(e){return typeof e!="number"?yye(e):{top:e,right:e,bottom:e,left:e}}function j5(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function j8(e,t,n){let{reference:s,floating:i}=e;const a=zm(t),o=LR(t),l=IR(o),c=df(t),d=a==="y",u=s.x+s.width/2-i.width/2,h=s.y+s.height/2-i.height/2,f=s[l]/2-i[l]/2;let m;switch(c){case"top":m={x:u,y:s.y-i.height};break;case"bottom":m={x:u,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:h};break;case"left":m={x:s.x-i.width,y:h};break;default:m={x:s.x,y:s.y}}switch(G0(t)){case"start":m[o]-=f*(n&&d?-1:1);break;case"end":m[o]+=f*(n&&d?-1:1);break}return m}const bye=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:h}=j8(d,s,c),f=s,m={},p=0;for(let g=0;g<l.length;g++){const{name:v,fn:x}=l[g],{x:y,y:j,data:w,reset:N}=await x({x:u,y:h,initialPlacement:s,placement:f,strategy:i,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});u=y??u,h=j??h,m={...m,[v]:{...m[v],...w}},N&&p<=50&&(p++,typeof N=="object"&&(N.placement&&(f=N.placement),N.rects&&(d=N.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):N.rects),{x:u,y:h}=j8(d,f,c)),g=-1)}return{x:u,y:h,placement:f,strategy:i,middlewareData:m}};async function b1(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:a,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:f=!1,padding:m=0}=cf(t,e),p=iZ(m),v=l[f?h==="floating"?"reference":"floating":h],x=j5(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),y=h==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,j=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(j))?await(a.getScale==null?void 0:a.getScale(j))||{x:1,y:1}:{x:1,y:1},N=j5(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:j,strategy:c}):y);return{top:(x.top-N.top+p.top)/w.y,bottom:(N.bottom-x.bottom+p.bottom)/w.y,left:(x.left-N.left+p.left)/w.x,right:(N.right-x.right+p.right)/w.x}}const jye=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:a,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=cf(e,t)||{};if(d==null)return{};const h=iZ(u),f={x:n,y:s},m=LR(i),p=IR(m),g=await o.getDimensions(d),v=m==="y",x=v?"top":"left",y=v?"bottom":"right",j=v?"clientHeight":"clientWidth",w=a.reference[p]+a.reference[m]-f[m]-a.floating[p],N=f[m]-a.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let T=S?S[j]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=l.floating[j]||a.floating[p]);const C=w/2-N/2,A=T/2-g[p]/2-1,R=qm(h[x],A),k=qm(h[y],A),O=R,$=T-g[p]-k,D=T/2-g[p]/2+C,q=B3(O,D,$),M=!c.arrow&&G0(i)!=null&&D!==q&&a.reference[p]/2-(D<O?R:k)-g[p]/2<0,L=M?D<O?D-O:D-$:0;return{[m]:f[m]+L,data:{[m]:q,centerOffset:D-q-L,...M&&{alignmentOffset:L}},reset:M}}}),wye=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...v}=cf(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const x=df(i),y=zm(l),j=df(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),N=f||(j||!g?[b5(l)]:gye(l)),S=p!=="none";!f&&S&&N.push(...vye(l,g,p,w));const T=[l,...N],C=await b1(t,v),A=[];let R=((s=a.flip)==null?void 0:s.overflows)||[];if(u&&A.push(C[x]),h){const D=pye(i,o,w);A.push(C[D[0]],C[D[1]])}if(R=[...R,{placement:i,overflows:A}],!A.every(D=>D<=0)){var k,O;const D=(((k=a.flip)==null?void 0:k.index)||0)+1,q=T[D];if(q)return{data:{index:D,overflows:R},reset:{placement:q}};let M=(O=R.filter(L=>L.overflows[0]<=0).sort((L,V)=>L.overflows[1]-V.overflows[1])[0])==null?void 0:O.placement;if(!M)switch(m){case"bestFit":{var $;const L=($=R.filter(V=>{if(S){const P=zm(V.placement);return P===y||P==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(P=>P>0).reduce((P,z)=>P+z,0)]).sort((V,P)=>V[1]-P[1])[0])==null?void 0:$[0];L&&(M=L);break}case"initialPlacement":M=l;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function w8(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function N8(e){return hye.some(t=>e[t]>=0)}const Nye=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:s="referenceHidden",...i}=cf(e,t);switch(s){case"referenceHidden":{const a=await b1(t,{...i,elementContext:"reference"}),o=w8(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:N8(o)}}}case"escaped":{const a=await b1(t,{...i,altBoundary:!0}),o=w8(a,n.floating);return{data:{escapedOffsets:o,escaped:N8(o)}}}default:return{}}}}};async function Sye(e,t){const{placement:n,platform:s,elements:i}=e,a=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=df(n),l=G0(n),c=zm(n)==="y",d=["left","top"].includes(o)?-1:1,u=a&&c?-1:1,h=cf(t,e);let{mainAxis:f,crossAxis:m,alignmentAxis:p}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof p=="number"&&(m=l==="end"?p*-1:p),c?{x:m*u,y:f*d}:{x:f*d,y:m*u}}const _ye=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:a,placement:o,middlewareData:l}=t,c=await Sye(t,e);return o===((n=l.offset)==null?void 0:n.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:i+c.x,y:a+c.y,data:{...c,placement:o}}}}},Cye=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y}=v;return{x,y}}},...c}=cf(e,t),d={x:n,y:s},u=await b1(t,c),h=zm(df(i)),f=MR(h);let m=d[f],p=d[h];if(a){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",y=m+u[v],j=m-u[x];m=B3(y,m,j)}if(o){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=p+u[v],j=p-u[x];p=B3(y,p,j)}const g=l.fn({...t,[f]:m,[h]:p});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[f]:a,[h]:o}}}}}},Aye=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:s,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=cf(e,t),u={x:n,y:s},h=zm(i),f=MR(h);let m=u[f],p=u[h];const g=cf(l,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const j=f==="y"?"height":"width",w=a.reference[f]-a.floating[j]+v.mainAxis,N=a.reference[f]+a.reference[j]-v.mainAxis;m<w?m=w:m>N&&(m=N)}if(d){var x,y;const j=f==="y"?"width":"height",w=["top","left"].includes(df(i)),N=a.reference[h]-a.floating[j]+(w&&((x=o.offset)==null?void 0:x[h])||0)+(w?0:v.crossAxis),S=a.reference[h]+a.reference[j]+(w?0:((y=o.offset)==null?void 0:y[h])||0)-(w?v.crossAxis:0);p<N?p=N:p>S&&(p=S)}return{[f]:m,[h]:p}}}},kye=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:c=()=>{},...d}=cf(e,t),u=await b1(t,d),h=df(i),f=G0(i),m=zm(i)==="y",{width:p,height:g}=a.floating;let v,x;h==="top"||h==="bottom"?(v=h,x=f===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,v=f==="end"?"top":"bottom");const y=g-u.top-u.bottom,j=p-u.left-u.right,w=qm(g-u[v],y),N=qm(p-u[x],j),S=!t.middlewareData.shift;let T=w,C=N;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=j),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(T=y),S&&!f){const R=nc(u.left,0),k=nc(u.right,0),O=nc(u.top,0),$=nc(u.bottom,0);m?C=p-2*(R!==0||k!==0?R+k:nc(u.left,u.right)):T=g-2*(O!==0||$!==0?O+$:nc(u.top,u.bottom))}await c({...t,availableWidth:C,availableHeight:T});const A=await o.getDimensions(l.floating);return p!==A.width||g!==A.height?{reset:{rects:!0}}:{}}}};function B_(){return typeof window<"u"}function Y0(e){return aZ(e)?(e.nodeName||"").toLowerCase():"#document"}function pc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function uh(e){var t;return(t=(aZ(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function aZ(e){return B_()?e instanceof Node||e instanceof pc(e).Node:!1}function au(e){return B_()?e instanceof Element||e instanceof pc(e).Element:!1}function ih(e){return B_()?e instanceof HTMLElement||e instanceof pc(e).HTMLElement:!1}function S8(e){return!B_()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof pc(e).ShadowRoot}function qj(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=ou(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!["inline","contents"].includes(i)}function Pye(e){return["table","td","th"].includes(Y0(e))}function V_(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function FR(e){const t=$R(),n=au(e)?ou(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(n.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(n.contain||"").includes(s))}function Tye(e){let t=Hm(e);for(;ih(t)&&!t0(t);){if(FR(t))return t;if(V_(t))return null;t=Hm(t)}return null}function $R(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function t0(e){return["html","body","#document"].includes(Y0(e))}function ou(e){return pc(e).getComputedStyle(e)}function U_(e){return au(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hm(e){if(Y0(e)==="html")return e;const t=e.assignedSlot||e.parentNode||S8(e)&&e.host||uh(e);return S8(t)?t.host:t}function oZ(e){const t=Hm(e);return t0(t)?e.ownerDocument?e.ownerDocument.body:e.body:ih(t)&&qj(t)?t:oZ(t)}function j1(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=oZ(e),a=i===((s=e.ownerDocument)==null?void 0:s.body),o=pc(i);if(a){const l=U3(o);return t.concat(o,o.visualViewport||[],qj(i)?i:[],l&&n?j1(l):[])}return t.concat(i,j1(i,[],n))}function U3(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function lZ(e){const t=ou(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=ih(e),a=i?e.offsetWidth:n,o=i?e.offsetHeight:s,l=y5(n)!==a||y5(s)!==o;return l&&(n=a,s=o),{width:n,height:s,$:l}}function BR(e){return au(e)?e:e.contextElement}function hv(e){const t=BR(e);if(!ih(t))return Xu(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:a}=lZ(t);let o=(a?y5(n.width):n.width)/s,l=(a?y5(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Eye=Xu(0);function cZ(e){const t=pc(e);return!$R()||!t.visualViewport?Eye:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Oye(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==pc(e)?!1:t}function kg(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),a=BR(e);let o=Xu(1);t&&(s?au(s)&&(o=hv(s)):o=hv(e));const l=Oye(a,n,s)?cZ(a):Xu(0);let c=(i.left+l.x)/o.x,d=(i.top+l.y)/o.y,u=i.width/o.x,h=i.height/o.y;if(a){const f=pc(a),m=s&&au(s)?pc(s):s;let p=f,g=U3(p);for(;g&&s&&m!==p;){const v=hv(g),x=g.getBoundingClientRect(),y=ou(g),j=x.left+(g.clientLeft+parseFloat(y.paddingLeft))*v.x,w=x.top+(g.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,h*=v.y,c+=j,d+=w,p=pc(g),g=U3(p)}}return j5({width:u,height:h,x:c,y:d})}function VR(e,t){const n=U_(e).scrollLeft;return t?t.left+n:kg(uh(e)).left+n}function dZ(e,t,n){n===void 0&&(n=!1);const s=e.getBoundingClientRect(),i=s.left+t.scrollLeft-(n?0:VR(e,s)),a=s.top+t.scrollTop;return{x:i,y:a}}function Rye(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const a=i==="fixed",o=uh(s),l=t?V_(t.floating):!1;if(s===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},d=Xu(1);const u=Xu(0),h=ih(s);if((h||!h&&!a)&&((Y0(s)!=="body"||qj(o))&&(c=U_(s)),ih(s))){const m=kg(s);d=hv(s),u.x=m.x+s.clientLeft,u.y=m.y+s.clientTop}const f=o&&!h&&!a?dZ(o,c,!0):Xu(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+f.x,y:n.y*d.y-c.scrollTop*d.y+u.y+f.y}}function Dye(e){return Array.from(e.getClientRects())}function Mye(e){const t=uh(e),n=U_(e),s=e.ownerDocument.body,i=nc(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=nc(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+VR(e);const l=-n.scrollTop;return ou(s).direction==="rtl"&&(o+=nc(t.clientWidth,s.clientWidth)-i),{width:i,height:a,x:o,y:l}}function Iye(e,t){const n=pc(e),s=uh(e),i=n.visualViewport;let a=s.clientWidth,o=s.clientHeight,l=0,c=0;if(i){a=i.width,o=i.height;const d=$R();(!d||d&&t==="fixed")&&(l=i.offsetLeft,c=i.offsetTop)}return{width:a,height:o,x:l,y:c}}function Lye(e,t){const n=kg(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,a=ih(e)?hv(e):Xu(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,c=i*a.x,d=s*a.y;return{width:o,height:l,x:c,y:d}}function _8(e,t,n){let s;if(t==="viewport")s=Iye(e,n);else if(t==="document")s=Mye(uh(e));else if(au(t))s=Lye(t,n);else{const i=cZ(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return j5(s)}function uZ(e,t){const n=Hm(e);return n===t||!au(n)||t0(n)?!1:ou(n).position==="fixed"||uZ(n,t)}function Fye(e,t){const n=t.get(e);if(n)return n;let s=j1(e,[],!1).filter(l=>au(l)&&Y0(l)!=="body"),i=null;const a=ou(e).position==="fixed";let o=a?Hm(e):e;for(;au(o)&&!t0(o);){const l=ou(o),c=FR(o);!c&&l.position==="fixed"&&(i=null),(a?!c&&!i:!c&&l.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||qj(o)&&!c&&uZ(e,o))?s=s.filter(u=>u!==o):i=l,o=Hm(o)}return t.set(e,s),s}function $ye(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?V_(t)?[]:Fye(t,this._c):[].concat(n),s],l=o[0],c=o.reduce((d,u)=>{const h=_8(t,u,i);return d.top=nc(h.top,d.top),d.right=qm(h.right,d.right),d.bottom=qm(h.bottom,d.bottom),d.left=nc(h.left,d.left),d},_8(t,l,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Bye(e){const{width:t,height:n}=lZ(e);return{width:t,height:n}}function Vye(e,t,n){const s=ih(t),i=uh(t),a=n==="fixed",o=kg(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Xu(0);if(s||!s&&!a)if((Y0(t)!=="body"||qj(i))&&(l=U_(t)),s){const f=kg(t,!0,a,t);c.x=f.x+t.clientLeft,c.y=f.y+t.clientTop}else i&&(c.x=VR(i));const d=i&&!s&&!a?dZ(i,l):Xu(0),u=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:u,y:h,width:o.width,height:o.height}}function Sk(e){return ou(e).position==="static"}function C8(e,t){if(!ih(e)||ou(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return uh(e)===n&&(n=n.ownerDocument.body),n}function hZ(e,t){const n=pc(e);if(V_(e))return n;if(!ih(e)){let i=Hm(e);for(;i&&!t0(i);){if(au(i)&&!Sk(i))return i;i=Hm(i)}return n}let s=C8(e,t);for(;s&&Pye(s)&&Sk(s);)s=C8(s,t);return s&&t0(s)&&Sk(s)&&!FR(s)?n:s||Tye(e)||n}const Uye=async function(e){const t=this.getOffsetParent||hZ,n=this.getDimensions,s=await n(e.floating);return{reference:Vye(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function qye(e){return ou(e).direction==="rtl"}const zye={convertOffsetParentRelativeRectToViewportRelativeRect:Rye,getDocumentElement:uh,getClippingRect:$ye,getOffsetParent:hZ,getElementRects:Uye,getClientRects:Dye,getDimensions:Bye,getScale:hv,isElement:au,isRTL:qye};function fZ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Hye(e,t){let n=null,s;const i=uh(e);function a(){var l;clearTimeout(s),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const d=e.getBoundingClientRect(),{left:u,top:h,width:f,height:m}=d;if(l||t(),!f||!m)return;const p=u2(h),g=u2(i.clientWidth-(u+f)),v=u2(i.clientHeight-(h+m)),x=u2(u),j={rootMargin:-p+"px "+-g+"px "+-v+"px "+-x+"px",threshold:nc(0,qm(1,c))||1};let w=!0;function N(S){const T=S[0].intersectionRatio;if(T!==c){if(!w)return o();T?o(!1,T):s=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!fZ(d,e.getBoundingClientRect())&&o(),w=!1}try{n=new IntersectionObserver(N,{...j,root:i.ownerDocument})}catch{n=new IntersectionObserver(N,j)}n.observe(e)}return o(!0),a}function Wye(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=BR(e),u=i||a?[...d?j1(d):[],...j1(t)]:[];u.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),a&&x.addEventListener("resize",n)});const h=d&&l?Hye(d,n):null;let f=-1,m=null;o&&(m=new ResizeObserver(x=>{let[y]=x;y&&y.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var j;(j=m)==null||j.observe(t)})),n()}),d&&!c&&m.observe(d),m.observe(t));let p,g=c?kg(e):null;c&&v();function v(){const x=kg(e);g&&!fZ(g,x)&&n(),g=x,p=requestAnimationFrame(v)}return n(),()=>{var x;u.forEach(y=>{i&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),h==null||h(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(p)}}const Kye=_ye,Gye=Cye,Yye=wye,Xye=kye,Qye=Nye,A8=jye,Zye=Aye,Jye=(e,t,n)=>{const s=new Map,i={platform:zye,...n},a={...i.platform,_c:s};return bye(e,t,{...i,platform:a})};var bN=typeof document<"u"?b.useLayoutEffect:b.useEffect;function w5(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!w5(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const a=i[s];if(!(a==="_owner"&&e.$$typeof)&&!w5(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function mZ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function k8(e,t){const n=mZ(e);return Math.round(t*n)/n}function _k(e){const t=b.useRef(e);return bN(()=>{t.current=e}),t}function ebe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,m]=b.useState(s);w5(f,s)||m(s);const[p,g]=b.useState(null),[v,x]=b.useState(null),y=b.useCallback(V=>{V!==S.current&&(S.current=V,g(V))},[]),j=b.useCallback(V=>{V!==T.current&&(T.current=V,x(V))},[]),w=a||p,N=o||v,S=b.useRef(null),T=b.useRef(null),C=b.useRef(u),A=c!=null,R=_k(c),k=_k(i),O=_k(d),$=b.useCallback(()=>{if(!S.current||!T.current)return;const V={placement:t,strategy:n,middleware:f};k.current&&(V.platform=k.current),Jye(S.current,T.current,V).then(P=>{const z={...P,isPositioned:O.current!==!1};D.current&&!w5(C.current,z)&&(C.current=z,Hg.flushSync(()=>{h(z)}))})},[f,t,n,k,O]);bN(()=>{d===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,h(V=>({...V,isPositioned:!1})))},[d]);const D=b.useRef(!1);bN(()=>(D.current=!0,()=>{D.current=!1}),[]),bN(()=>{if(w&&(S.current=w),N&&(T.current=N),w&&N){if(R.current)return R.current(w,N,$);$()}},[w,N,$,R,A]);const q=b.useMemo(()=>({reference:S,floating:T,setReference:y,setFloating:j}),[y,j]),M=b.useMemo(()=>({reference:w,floating:N}),[w,N]),L=b.useMemo(()=>{const V={position:n,left:0,top:0};if(!M.floating)return V;const P=k8(M.floating,u.x),z=k8(M.floating,u.y);return l?{...V,transform:"translate("+P+"px, "+z+"px)",...mZ(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:z}},[n,l,M.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:$,refs:q,elements:M,floatingStyles:L}),[u,$,q,M,L])}const tbe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?A8({element:s.current,padding:i}).fn(n):{}:s?A8({element:s,padding:i}).fn(n):{}}}},rbe=(e,t)=>({...Kye(e),options:[e,t]}),nbe=(e,t)=>({...Gye(e),options:[e,t]}),sbe=(e,t)=>({...Zye(e),options:[e,t]}),ibe=(e,t)=>({...Yye(e),options:[e,t]}),abe=(e,t)=>({...Xye(e),options:[e,t]}),obe=(e,t)=>({...Qye(e),options:[e,t]}),lbe=(e,t)=>({...tbe(e),options:[e,t]});var cbe="Arrow",pZ=b.forwardRef((e,t)=>{const{children:n,width:s=10,height:i=5,...a}=e;return r.jsx(ar.svg,{...a,ref:t,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:r.jsx("polygon",{points:"0,0 30,0 15,10"})})});pZ.displayName=cbe;var dbe=pZ;function q_(e){const[t,n]=b.useState(void 0);return Xi(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;n({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}var UR="Popper",[gZ,sp]=oa(UR),[ube,xZ]=gZ(UR),vZ=e=>{const{__scopePopper:t,children:n}=e,[s,i]=b.useState(null);return r.jsx(ube,{scope:t,anchor:s,onAnchorChange:i,children:n})};vZ.displayName=UR;var yZ="PopperAnchor",bZ=b.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:s,...i}=e,a=xZ(yZ,n),o=b.useRef(null),l=Jr(t,o);return b.useEffect(()=>{a.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:r.jsx(ar.div,{...i,ref:l})});bZ.displayName=yZ;var qR="PopperContent",[hbe,fbe]=gZ(qR),jZ=b.forwardRef((e,t)=>{var J,ie,X,he,fe,Q;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:f=!1,updatePositionStrategy:m="optimized",onPlaced:p,...g}=e,v=xZ(qR,n),[x,y]=b.useState(null),j=Jr(t,Oe=>y(Oe)),[w,N]=b.useState(null),S=q_(w),T=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,A=s+(a!=="center"?"-"+a:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(d)?d:[d],O=k.length>0,$={padding:R,boundary:k.filter(pbe),altBoundary:O},{refs:D,floatingStyles:q,placement:M,isPositioned:L,middlewareData:V}=ebe({strategy:"fixed",placement:A,whileElementsMounted:(...Oe)=>Wye(...Oe,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[rbe({mainAxis:i+C,alignmentAxis:o}),c&&nbe({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?sbe():void 0,...$}),c&&ibe({...$}),abe({...$,apply:({elements:Oe,rects:ve,availableWidth:ee,availableHeight:Ee})=>{const{width:Re,height:oe}=ve.reference,De=Oe.floating.style;De.setProperty("--radix-popper-available-width",`${ee}px`),De.setProperty("--radix-popper-available-height",`${Ee}px`),De.setProperty("--radix-popper-anchor-width",`${Re}px`),De.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),w&&lbe({element:w,padding:l}),gbe({arrowWidth:T,arrowHeight:C}),f&&obe({strategy:"referenceHidden",...$})]}),[P,z]=SZ(M),Z=ii(p);Xi(()=>{L&&(Z==null||Z())},[L,Z]);const F=(J=V.arrow)==null?void 0:J.x,W=(ie=V.arrow)==null?void 0:ie.y,G=((X=V.arrow)==null?void 0:X.centerOffset)!==0,[H,se]=b.useState();return Xi(()=>{x&&se(window.getComputedStyle(x).zIndex)},[x]),r.jsx("div",{ref:D.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:L?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(he=V.transformOrigin)==null?void 0:he.x,(fe=V.transformOrigin)==null?void 0:fe.y].join(" "),...((Q=V.hide)==null?void 0:Q.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:r.jsx(hbe,{scope:n,placedSide:P,onArrowChange:N,arrowX:F,arrowY:W,shouldHideArrow:G,children:r.jsx(ar.div,{"data-side":P,"data-align":z,...g,ref:j,style:{...g.style,animation:L?void 0:"none"}})})})});jZ.displayName=qR;var wZ="PopperArrow",mbe={top:"bottom",right:"left",bottom:"top",left:"right"},NZ=b.forwardRef(function(t,n){const{__scopePopper:s,...i}=t,a=fbe(wZ,s),o=mbe[a.placedSide];return r.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:r.jsx(dbe,{...i,ref:n,style:{...i.style,display:"block"}})})});NZ.displayName=wZ;function pbe(e){return e!==null}var gbe=e=>({name:"transformOrigin",options:e,fn(t){var v,x,y;const{placement:n,rects:s,middlewareData:i}=t,o=((v=i.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=SZ(n),h={start:"0%",center:"50%",end:"100%"}[u],f=(((x=i.arrow)==null?void 0:x.x)??0)+l/2,m=(((y=i.arrow)==null?void 0:y.y)??0)+c/2;let p="",g="";return d==="bottom"?(p=o?h:`${f}px`,g=`${-c}px`):d==="top"?(p=o?h:`${f}px`,g=`${s.floating.height+c}px`):d==="right"?(p=`${-c}px`,g=o?h:`${m}px`):d==="left"&&(p=`${s.floating.width+c}px`,g=o?h:`${m}px`),{data:{x:p,y:g}}}});function SZ(e){const[t,n="center"]=e.split("-");return[t,n]}var z_=vZ,zj=bZ,H_=jZ,W_=NZ,[K_]=oa("Tooltip",[sp]),G_=sp(),_Z="TooltipProvider",xbe=700,q3="tooltip.open",[vbe,zR]=K_(_Z),CZ=e=>{const{__scopeTooltip:t,delayDuration:n=xbe,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:a}=e,o=b.useRef(!0),l=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),r.jsx(vbe,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:b.useCallback(d=>{l.current=d},[]),disableHoverableContent:i,children:a})};CZ.displayName=_Z;var Y_="Tooltip",[ybe,X_]=K_(Y_),AZ=e=>{const{__scopeTooltip:t,children:n,open:s,defaultOpen:i=!1,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,c=zR(Y_,e.__scopeTooltip),d=G_(t),[u,h]=b.useState(null),f=mc(),m=b.useRef(0),p=o??c.disableHoverableContent,g=l??c.delayDuration,v=b.useRef(!1),[x=!1,y]=bc({prop:s,defaultProp:i,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(q3))):c.onClose(),a==null||a(T)}}),j=b.useMemo(()=>x?v.current?"delayed-open":"instant-open":"closed",[x]),w=b.useCallback(()=>{window.clearTimeout(m.current),m.current=0,v.current=!1,y(!0)},[y]),N=b.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y(!1)},[y]),S=b.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{v.current=!0,y(!0),m.current=0},g)},[g,y]);return b.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),r.jsx(z_,{...d,children:r.jsx(ybe,{scope:t,contentId:f,open:x,stateAttribute:j,trigger:u,onTriggerChange:h,onTriggerEnter:b.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:b.useCallback(()=>{p?N():(window.clearTimeout(m.current),m.current=0)},[N,p]),onOpen:w,onClose:N,disableHoverableContent:p,children:n})})};AZ.displayName=Y_;var z3="TooltipTrigger",kZ=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=X_(z3,n),a=zR(z3,n),o=G_(n),l=b.useRef(null),c=Jr(t,l,i.onTriggerChange),d=b.useRef(!1),u=b.useRef(!1),h=b.useCallback(()=>d.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),r.jsx(zj,{asChild:!0,...o,children:r.jsx(ar.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:c,onPointerMove:$t(e.onPointerMove,f=>{f.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:$t(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:$t(e.onPointerDown,()=>{i.open&&i.onClose(),d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:$t(e.onFocus,()=>{d.current||i.onOpen()}),onBlur:$t(e.onBlur,i.onClose),onClick:$t(e.onClick,i.onClose)})})});kZ.displayName=z3;var bbe="TooltipPortal",[ght,jbe]=K_(bbe,{forceMount:void 0}),r0="TooltipContent",PZ=b.forwardRef((e,t)=>{const n=jbe(r0,e.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...a}=e,o=X_(r0,e.__scopeTooltip);return r.jsx(la,{present:s||o.open,children:o.disableHoverableContent?r.jsx(TZ,{side:i,...a,ref:t}):r.jsx(wbe,{side:i,...a,ref:t})})}),wbe=b.forwardRef((e,t)=>{const n=X_(r0,e.__scopeTooltip),s=zR(r0,e.__scopeTooltip),i=b.useRef(null),a=Jr(t,i),[o,l]=b.useState(null),{trigger:c,onClose:d}=n,u=i.current,{onPointerInTransitChange:h}=s,f=b.useCallback(()=>{l(null),h(!1)},[h]),m=b.useCallback((p,g)=>{const v=p.currentTarget,x={x:p.clientX,y:p.clientY},y=Abe(x,v.getBoundingClientRect()),j=kbe(x,y),w=Pbe(g.getBoundingClientRect()),N=Ebe([...j,...w]);l(N),h(!0)},[h]);return b.useEffect(()=>()=>f(),[f]),b.useEffect(()=>{if(c&&u){const p=v=>m(v,u),g=v=>m(v,c);return c.addEventListener("pointerleave",p),u.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",p),u.removeEventListener("pointerleave",g)}}},[c,u,m,f]),b.useEffect(()=>{if(o){const p=g=>{const v=g.target,x={x:g.clientX,y:g.clientY},y=(c==null?void 0:c.contains(v))||(u==null?void 0:u.contains(v)),j=!Tbe(x,o);y?f():j&&(f(),d())};return document.addEventListener("pointermove",p),()=>document.removeEventListener("pointermove",p)}},[c,u,o,d,f]),r.jsx(TZ,{...e,ref:a})}),[Nbe,Sbe]=K_(Y_,{isInside:!1}),_be=_Q("TooltipContent"),TZ=b.forwardRef((e,t)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,c=X_(r0,n),d=G_(n),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(q3,u),()=>document.removeEventListener(q3,u)),[u]),b.useEffect(()=>{if(c.trigger){const h=f=>{const m=f.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,u]),r.jsx(Gg,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:r.jsxs(H_,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[r.jsx(_be,{children:s}),r.jsx(Nbe,{scope:n,isInside:!0,children:r.jsx(o0e,{id:c.contentId,role:"tooltip",children:i||s})})]})})});PZ.displayName=r0;var EZ="TooltipArrow",Cbe=b.forwardRef((e,t)=>{const{__scopeTooltip:n,...s}=e,i=G_(n);return Sbe(EZ,n).isInside?null:r.jsx(W_,{...i,...s,ref:t})});Cbe.displayName=EZ;function Abe(e,t){const n=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,s,i,a)){case a:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function kbe(e,t,n=5){const s=[];switch(t){case"top":s.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":s.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":s.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":s.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return s}function Pbe(e){const{top:t,right:n,bottom:s,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:s},{x:i,y:s}]}function Tbe(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>s!=u>s&&n<(d-l)*(s-c)/(u-c)+l&&(i=!i)}return i}function Ebe(e){const t=e.slice();return t.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),Obe(t)}function Obe(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const i=e[s];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const n=[];for(let s=e.length-1;s>=0;s--){const i=e[s];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))n.pop();else break}n.push(i)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var Rbe=CZ,Dbe=AZ,Mbe=kZ,OZ=PZ;const RZ=Rbe,Ibe=Dbe,Lbe=Mbe,DZ=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(OZ,{ref:s,sideOffset:t,className:Xe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n}));DZ.displayName=OZ.displayName;const MZ=b.createContext(void 0),Fbe="classic",$be=["classic","professional-blue","mountain-sky"];function Bbe({children:e}){const[t,n]=b.useState(()=>{const s=localStorage.getItem("hp-tourism-theme");return s&&$be.includes(s)?s:Fbe});return b.useEffect(()=>{localStorage.setItem("hp-tourism-theme",t),document.documentElement.setAttribute("data-theme",t)},[t]),r.jsx(MZ.Provider,{value:{theme:t,setTheme:n},children:e})}function IZ(){const e=b.useContext(MZ);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const Ip=[{id:"homestay",label:"Homestay",icon:"",active:!0},{id:"adventure_sports",label:"Adventure Sports",icon:"",active:!1},{id:"rafting",label:"Rafting",icon:"",active:!1},{id:"camping",label:"Camping",icon:"",active:!1},{id:"paragliding",label:"Paragliding",icon:"",active:!1},{id:"trekking",label:"Trekking",icon:"",active:!1},{id:"hotel",label:"Hotel/Resort",icon:"",active:!1},{id:"tour_operator",label:"Tour Operator",icon:"",active:!1}],P8="hptourism_selected_service",Vbe="homestay",HR=b.createContext(null);function Ube({children:e}){const[t,n]=b.useState(()=>{if(typeof window<"u"){const c=localStorage.getItem(P8);if(c&&Ip.some(d=>d.id===c))return c}return Vbe}),s=R_();Dr(),b.useEffect(()=>{const d=new URLSearchParams(s).get("service");d&&Ip.some(u=>u.id===d)&&n(d)},[]),b.useEffect(()=>{localStorage.setItem(P8,t)},[t]);const i=b.useCallback(c=>{n(c)},[]),a=Ip.find(c=>c.id===t)||Ip[0],o=Ip.filter(c=>c.active),l=b.useCallback(c=>t===c,[t]);return r.jsx(HR.Provider,{value:{selectedService:t,currentServiceInfo:a,services:Ip,activeServices:o,setSelectedService:i,isSelected:l},children:e})}function qbe(){const e=b.useContext(HR);if(!e)throw new Error("useService must be used within a ServiceProvider");return e}function zbe(){return b.useContext(HR)}const Ck=768;function Hbe(){const[e,t]=b.useState(void 0);return b.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ck-1}px)`),s=()=>{t(window.innerWidth<Ck)};return n.addEventListener("change",s),t(window.innerWidth<Ck),()=>n.removeEventListener("change",s)},[]),!!e}const w1=Yg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover-elevate active-elevate-2",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",warning:"bg-amber-500 text-white border border-amber-600 hover:bg-amber-600 hover:border-amber-700 focus-visible:ring-amber-500",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-9 px-4 py-2",sm:"min-h-8 rounded-md px-3 text-xs",lg:"min-h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),te=b.forwardRef(({className:e,variant:t,size:n,asChild:s=!1,...i},a)=>{const o=s?I_:"button";return r.jsx(o,{className:Xe(w1({variant:t,size:n,className:e})),ref:a,...i})});te.displayName="Button";const Wbe={alpha:/[^A-Za-z]/g,"alpha-space":/[^A-Za-z\s]/g,numeric:/\D/g},Kbe={alpha:"[A-Za-z]*","alpha-space":"[A-Za-z ]*",numeric:"\\d*"},Pe=b.forwardRef(({className:e,type:t="text",characterRestriction:n,onChange:s,inputMode:i,pattern:a,value:o,defaultValue:l,...c},d)=>{const u=v=>n?v.replace(Wbe[n],""):v,h=v=>{if(n){const x=u(v.target.value);x!==v.target.value&&(v.target.value=x)}s==null||s(v)},f=i??(n==="numeric"?"numeric":void 0),m=a??(n?Kbe[n]:void 0),p=typeof o=="string"&&n?u(o):o,g=typeof l=="string"&&n?u(l):l;return r.jsx("input",{type:t,inputMode:f,pattern:m,className:Xe("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:d,onChange:h,...o!==void 0?{value:p}:{},...l!==void 0?{defaultValue:g}:{},...c})});Pe.displayName="Input";var Gbe="Separator",T8="horizontal",Ybe=["horizontal","vertical"],LZ=b.forwardRef((e,t)=>{const{decorative:n,orientation:s=T8,...i}=e,a=Xbe(s)?s:T8,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return r.jsx(ar.div,{"data-orientation":a,...l,...i,ref:t})});LZ.displayName=Gbe;function Xbe(e){return Ybe.includes(e)}var FZ=LZ;const oc=b.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...s},i)=>r.jsx(FZ,{ref:i,decorative:n,orientation:t,className:Xe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));oc.displayName=FZ.displayName;var Ak="focusScope.autoFocusOnMount",kk="focusScope.autoFocusOnUnmount",E8={bubbles:!1,cancelable:!0},Qbe="FocusScope",Hj=b.forwardRef((e,t)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,c]=b.useState(null),d=ii(i),u=ii(a),h=b.useRef(null),f=Jr(t,g=>c(g)),m=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(s){let g=function(j){if(m.paused||!l)return;const w=j.target;l.contains(w)?h.current=w:Yf(h.current,{select:!0})},v=function(j){if(m.paused||!l)return;const w=j.relatedTarget;w!==null&&(l.contains(w)||Yf(h.current,{select:!0}))},x=function(j){if(document.activeElement===document.body)for(const N of j)N.removedNodes.length>0&&Yf(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const y=new MutationObserver(x);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),y.disconnect()}}},[s,l,m.paused]),b.useEffect(()=>{if(l){R8.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Ak,E8);l.addEventListener(Ak,d),l.dispatchEvent(x),x.defaultPrevented||(Zbe(n1e($Z(l)),{select:!0}),document.activeElement===g&&Yf(l))}return()=>{l.removeEventListener(Ak,d),setTimeout(()=>{const x=new CustomEvent(kk,E8);l.addEventListener(kk,u),l.dispatchEvent(x),x.defaultPrevented||Yf(g??document.body,{select:!0}),l.removeEventListener(kk,u),R8.remove(m)},0)}}},[l,d,u,m]);const p=b.useCallback(g=>{if(!n&&!s||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(v&&x){const y=g.currentTarget,[j,w]=Jbe(y);j&&w?!g.shiftKey&&x===w?(g.preventDefault(),n&&Yf(j,{select:!0})):g.shiftKey&&x===j&&(g.preventDefault(),n&&Yf(w,{select:!0})):x===y&&g.preventDefault()}},[n,s,m.paused]);return r.jsx(ar.div,{tabIndex:-1,...o,ref:f,onKeyDown:p})});Hj.displayName=Qbe;function Zbe(e,{select:t=!1}={}){const n=document.activeElement;for(const s of e)if(Yf(s,{select:t}),document.activeElement!==n)return}function Jbe(e){const t=$Z(e),n=O8(t,e),s=O8(t.reverse(),e);return[n,s]}function $Z(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function O8(e,t){for(const n of e)if(!e1e(n,{upTo:t}))return n}function e1e(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function t1e(e){return e instanceof HTMLInputElement&&"select"in e}function Yf(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&t1e(e)&&t&&e.select()}}var R8=r1e();function r1e(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=D8(e,t),e.unshift(t)},remove(t){var n;e=D8(e,t),(n=e[0])==null||n.resume()}}}function D8(e,t){const n=[...e],s=n.indexOf(t);return s!==-1&&n.splice(s,1),n}function n1e(e){return e.filter(t=>t.tagName!=="A")}var Pk=0;function Q_(){b.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??M8()),document.body.insertAdjacentElement("beforeend",e[1]??M8()),Pk++,()=>{Pk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Pk--}},[])}function M8(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var qu=function(){return qu=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},qu.apply(this,arguments)};function BZ(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function s1e(e,t,n){if(n||arguments.length===2)for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}var jN="right-scroll-bar-position",wN="width-before-scroll-bar",i1e="with-scroll-bars-hidden",a1e="--removed-body-scroll-bar-size";function Tk(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function o1e(e,t){var n=b.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=t,n.facade}var l1e=typeof window<"u"?b.useLayoutEffect:b.useEffect,I8=new WeakMap;function c1e(e,t){var n=o1e(null,function(s){return e.forEach(function(i){return Tk(i,s)})});return l1e(function(){var s=I8.get(n);if(s){var i=new Set(s),a=new Set(e),o=n.current;i.forEach(function(l){a.has(l)||Tk(l,null)}),a.forEach(function(l){i.has(l)||Tk(l,o)})}I8.set(n,e)},[e]),n}function d1e(e){return e}function u1e(e,t){t===void 0&&(t=d1e);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var o=t(a,s);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(s=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){s=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var u=o;o=[],u.forEach(a)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),n}}}};return i}function h1e(e){e===void 0&&(e={});var t=u1e(null);return t.options=qu({async:!0,ssr:!1},e),t}var VZ=function(e){var t=e.sideCar,n=BZ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return b.createElement(s,qu({},n))};VZ.isSideCarExport=!0;function f1e(e,t){return e.useMedium(t),VZ}var UZ=h1e(),Ek=function(){},Z_=b.forwardRef(function(e,t){var n=b.useRef(null),s=b.useState({onScrollCapture:Ek,onWheelCapture:Ek,onTouchMoveCapture:Ek}),i=s[0],a=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,h=e.shards,f=e.sideCar,m=e.noIsolation,p=e.inert,g=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,y=e.gapMode,j=BZ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,N=c1e([n,t]),S=qu(qu({},j),i);return b.createElement(b.Fragment,null,u&&b.createElement(w,{sideCar:UZ,removeScrollBar:d,shards:h,noIsolation:m,inert:p,setCallbacks:a,allowPinchZoom:!!g,lockRef:n,gapMode:y}),o?b.cloneElement(b.Children.only(l),qu(qu({},S),{ref:N})):b.createElement(x,qu({},S,{className:c,ref:N}),l))});Z_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Z_.classNames={fullWidth:wN,zeroRight:jN};var m1e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function p1e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=m1e();return t&&e.setAttribute("nonce",t),e}function g1e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function x1e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var v1e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=p1e())&&(g1e(t,n),x1e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},y1e=function(){var e=v1e();return function(t,n){b.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},qZ=function(){var e=y1e(),t=function(n){var s=n.styles,i=n.dynamic;return e(s,i),null};return t},b1e={left:0,top:0,right:0,gap:0},Ok=function(e){return parseInt(e||"",10)||0},j1e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Ok(n),Ok(s),Ok(i)]},w1e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return b1e;var t=j1e(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-n+t[2]-t[0])}},N1e=qZ(),fv="data-scroll-locked",S1e=function(e,t,n,s){var i=e.left,a=e.top,o=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(i1e,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(fv,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jN,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(wN,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(jN," .").concat(jN,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(wN," .").concat(wN,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(fv,`] {
    `).concat(a1e,": ").concat(l,`px;
  }
`)},L8=function(){var e=parseInt(document.body.getAttribute(fv)||"0",10);return isFinite(e)?e:0},_1e=function(){b.useEffect(function(){return document.body.setAttribute(fv,(L8()+1).toString()),function(){var e=L8()-1;e<=0?document.body.removeAttribute(fv):document.body.setAttribute(fv,e.toString())}},[])},C1e=function(e){var t=e.noRelative,n=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;_1e();var a=b.useMemo(function(){return w1e(i)},[i]);return b.createElement(N1e,{styles:S1e(a,!t,i,n?"":"!important")})},H3=!1;if(typeof window<"u")try{var h2=Object.defineProperty({},"passive",{get:function(){return H3=!0,!0}});window.addEventListener("test",h2,h2),window.removeEventListener("test",h2,h2)}catch{H3=!1}var ux=H3?{passive:!1}:!1,A1e=function(e){return e.tagName==="TEXTAREA"},zZ=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!A1e(e)&&n[t]==="visible")},k1e=function(e){return zZ(e,"overflowY")},P1e=function(e){return zZ(e,"overflowX")},F8=function(e,t){var n=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=HZ(e,s);if(i){var a=WZ(e,s),o=a[1],l=a[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},T1e=function(e){var t=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[t,n,s]},E1e=function(e){var t=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[t,n,s]},HZ=function(e,t){return e==="v"?k1e(t):P1e(t)},WZ=function(e,t){return e==="v"?T1e(t):E1e(t)},O1e=function(e,t){return e==="h"&&t==="rtl"?-1:1},R1e=function(e,t,n,s,i){var a=O1e(e,window.getComputedStyle(t).direction),o=a*s,l=n.target,c=t.contains(l),d=!1,u=o>0,h=0,f=0;do{var m=WZ(e,l),p=m[0],g=m[1],v=m[2],x=g-v-a*p;(p||x)&&HZ(e,l)&&(h+=x,f+=p),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(h)<1||!u&&Math.abs(f)<1)&&(d=!0),d},f2=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$8=function(e){return[e.deltaX,e.deltaY]},B8=function(e){return e&&"current"in e?e.current:e},D1e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},M1e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},I1e=0,hx=[];function L1e(e){var t=b.useRef([]),n=b.useRef([0,0]),s=b.useRef(),i=b.useState(I1e++)[0],a=b.useState(qZ)[0],o=b.useRef(e);b.useEffect(function(){o.current=e},[e]),b.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=s1e([e.lockRef.current],(e.shards||[]).map(B8),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=b.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=f2(g),y=n.current,j="deltaX"in g?g.deltaX:y[0]-x[0],w="deltaY"in g?g.deltaY:y[1]-x[1],N,S=g.target,T=Math.abs(j)>Math.abs(w)?"h":"v";if("touches"in g&&T==="h"&&S.type==="range")return!1;var C=F8(T,S);if(!C)return!0;if(C?N=T:(N=T==="v"?"h":"v",C=F8(T,S)),!C)return!1;if(!s.current&&"changedTouches"in g&&(j||w)&&(s.current=N),!N)return!0;var A=s.current||N;return R1e(A,v,g,A==="h"?j:w)},[]),c=b.useCallback(function(g){var v=g;if(!(!hx.length||hx[hx.length-1]!==a)){var x="deltaY"in v?$8(v):f2(v),y=t.current.filter(function(N){return N.name===v.type&&(N.target===v.target||v.target===N.shadowParent)&&D1e(N.delta,x)})[0];if(y&&y.should){v.cancelable&&v.preventDefault();return}if(!y){var j=(o.current.shards||[]).map(B8).filter(Boolean).filter(function(N){return N.contains(v.target)}),w=j.length>0?l(v,j[0]):!o.current.noIsolation;w&&v.cancelable&&v.preventDefault()}}},[]),d=b.useCallback(function(g,v,x,y){var j={name:g,delta:v,target:x,should:y,shadowParent:F1e(x)};t.current.push(j),setTimeout(function(){t.current=t.current.filter(function(w){return w!==j})},1)},[]),u=b.useCallback(function(g){n.current=f2(g),s.current=void 0},[]),h=b.useCallback(function(g){d(g.type,$8(g),g.target,l(g,e.lockRef.current))},[]),f=b.useCallback(function(g){d(g.type,f2(g),g.target,l(g,e.lockRef.current))},[]);b.useEffect(function(){return hx.push(a),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ux),document.addEventListener("touchmove",c,ux),document.addEventListener("touchstart",u,ux),function(){hx=hx.filter(function(g){return g!==a}),document.removeEventListener("wheel",c,ux),document.removeEventListener("touchmove",c,ux),document.removeEventListener("touchstart",u,ux)}},[]);var m=e.removeScrollBar,p=e.inert;return b.createElement(b.Fragment,null,p?b.createElement(a,{styles:M1e(i)}):null,m?b.createElement(C1e,{gapMode:e.gapMode}):null)}function F1e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const $1e=f1e(UZ,L1e);var Wj=b.forwardRef(function(e,t){return b.createElement(Z_,qu({},e,{ref:t,sideCar:$1e}))});Wj.classNames=Z_.classNames;var B1e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fx=new WeakMap,m2=new WeakMap,p2={},Rk=0,KZ=function(e){return e&&(e.host||KZ(e.parentNode))},V1e=function(e,t){return t.map(function(n){if(e.contains(n))return n;var s=KZ(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},U1e=function(e,t,n,s){var i=V1e(t,Array.isArray(e)?e:[e]);p2[n]||(p2[n]=new WeakMap);var a=p2[n],o=[],l=new Set,c=new Set(i),d=function(h){!h||l.has(h)||(l.add(h),d(h.parentNode))};i.forEach(d);var u=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(f){if(l.has(f))u(f);else try{var m=f.getAttribute(s),p=m!==null&&m!=="false",g=(fx.get(f)||0)+1,v=(a.get(f)||0)+1;fx.set(f,g),a.set(f,v),o.push(f),g===1&&p&&m2.set(f,!0),v===1&&f.setAttribute(n,"true"),p||f.setAttribute(s,"true")}catch(x){console.error("aria-hidden: cannot operate on ",f,x)}})};return u(t),l.clear(),Rk++,function(){o.forEach(function(h){var f=fx.get(h)-1,m=a.get(h)-1;fx.set(h,f),a.set(h,m),f||(m2.has(h)||h.removeAttribute(s),m2.delete(h)),m||h.removeAttribute(n)}),Rk--,Rk||(fx=new WeakMap,fx=new WeakMap,m2=new WeakMap,p2={})}},J_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=B1e(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live]"))),U1e(s,i,n,"aria-hidden")):function(){return null}},WR="Dialog",[GZ,YZ]=oa(WR),[q1e,xu]=GZ(WR),XZ=e=>{const{__scopeDialog:t,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=b.useRef(null),c=b.useRef(null),[d=!1,u]=bc({prop:s,defaultProp:i,onChange:a});return r.jsx(q1e,{scope:t,triggerRef:l,contentRef:c,contentId:mc(),titleId:mc(),descriptionId:mc(),open:d,onOpenChange:u,onOpenToggle:b.useCallback(()=>u(h=>!h),[u]),modal:o,children:n})};XZ.displayName=WR;var QZ="DialogTrigger",ZZ=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=xu(QZ,n),a=Jr(t,i.triggerRef);return r.jsx(ar.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":YR(i.open),...s,ref:a,onClick:$t(e.onClick,i.onOpenToggle)})});ZZ.displayName=QZ;var KR="DialogPortal",[z1e,JZ]=GZ(KR,{forceMount:void 0}),eJ=e=>{const{__scopeDialog:t,forceMount:n,children:s,container:i}=e,a=xu(KR,t);return r.jsx(z1e,{scope:t,forceMount:n,children:b.Children.map(s,o=>r.jsx(la,{present:n||a.open,children:r.jsx(W0,{asChild:!0,container:i,children:o})}))})};eJ.displayName=KR;var N5="DialogOverlay",tJ=b.forwardRef((e,t)=>{const n=JZ(N5,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=xu(N5,e.__scopeDialog);return a.modal?r.jsx(la,{present:s||a.open,children:r.jsx(W1e,{...i,ref:t})}):null});tJ.displayName=N5;var H1e=Um("DialogOverlay.RemoveScroll"),W1e=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=xu(N5,n);return r.jsx(Wj,{as:H1e,allowPinchZoom:!0,shards:[i.contentRef],children:r.jsx(ar.div,{"data-state":YR(i.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),Pg="DialogContent",rJ=b.forwardRef((e,t)=>{const n=JZ(Pg,e.__scopeDialog),{forceMount:s=n.forceMount,...i}=e,a=xu(Pg,e.__scopeDialog);return r.jsx(la,{present:s||a.open,children:a.modal?r.jsx(K1e,{...i,ref:t}):r.jsx(G1e,{...i,ref:t})})});rJ.displayName=Pg;var K1e=b.forwardRef((e,t)=>{const n=xu(Pg,e.__scopeDialog),s=b.useRef(null),i=Jr(t,n.contentRef,s);return b.useEffect(()=>{const a=s.current;if(a)return J_(a)},[]),r.jsx(nJ,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$t(e.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:$t(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:$t(e.onFocusOutside,a=>a.preventDefault())})}),G1e=b.forwardRef((e,t)=>{const n=xu(Pg,e.__scopeDialog),s=b.useRef(!1),i=b.useRef(!1);return r.jsx(nJ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),nJ=b.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=xu(Pg,n),c=b.useRef(null),d=Jr(t,c);return Q_(),r.jsxs(r.Fragment,{children:[r.jsx(Hj,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(Gg,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":YR(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),r.jsxs(r.Fragment,{children:[r.jsx(X1e,{titleId:l.titleId}),r.jsx(Z1e,{contentRef:c,descriptionId:l.descriptionId})]})]})}),GR="DialogTitle",sJ=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=xu(GR,n);return r.jsx(ar.h2,{id:i.titleId,...s,ref:t})});sJ.displayName=GR;var iJ="DialogDescription",aJ=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=xu(iJ,n);return r.jsx(ar.p,{id:i.descriptionId,...s,ref:t})});aJ.displayName=iJ;var oJ="DialogClose",lJ=b.forwardRef((e,t)=>{const{__scopeDialog:n,...s}=e,i=xu(oJ,n);return r.jsx(ar.button,{type:"button",...s,ref:t,onClick:$t(e.onClick,()=>i.onOpenChange(!1))})});lJ.displayName=oJ;function YR(e){return e?"open":"closed"}var cJ="DialogTitleWarning",[Y1e,dJ]=$ve(cJ,{contentName:Pg,titleName:GR,docsSlug:"dialog"}),X1e=({titleId:e})=>{const t=dJ(cJ),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return b.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Q1e="DialogDescriptionWarning",Z1e=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${dJ(Q1e).contentName}}.`;return b.useEffect(()=>{var a;const i=(a=e.current)==null?void 0:a.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},XR=XZ,uJ=ZZ,QR=eJ,Kj=tJ,Gj=rJ,Yj=sJ,Xj=aJ,eC=lJ;const J1e=XR,eje=QR,hJ=b.forwardRef(({className:e,...t},n)=>r.jsx(Kj,{className:Xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));hJ.displayName=Kj.displayName;const tje=Yg("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),fJ=b.forwardRef(({side:e="right",className:t,children:n,...s},i)=>r.jsxs(eje,{children:[r.jsx(hJ,{}),r.jsxs(Gj,{ref:i,className:Xe(tje({side:e}),t),...s,children:[n,r.jsxs(eC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[r.jsx(sh,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));fJ.displayName=Gj.displayName;const mJ=({className:e,...t})=>r.jsx("div",{className:Xe("flex flex-col space-y-2 text-center sm:text-left",e),...t});mJ.displayName="SheetHeader";const pJ=b.forwardRef(({className:e,...t},n)=>r.jsx(Yj,{ref:n,className:Xe("text-lg font-semibold text-foreground",e),...t}));pJ.displayName=Yj.displayName;const gJ=b.forwardRef(({className:e,...t},n)=>r.jsx(Xj,{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));gJ.displayName=Xj.displayName;function Lr({className:e,...t}){return r.jsx("div",{className:Xe("animate-pulse rounded-md bg-muted",e),...t})}const rje="sidebar_state",nje=60*60*24*7,sje="16rem",ije="18rem",aje="3rem",oje="b",xJ=b.createContext(null);function ZR(){const e=b.useContext(xJ);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function lje({defaultOpen:e=!0,open:t,onOpenChange:n,className:s,style:i,children:a,...o}){const l=Hbe(),[c,d]=b.useState(!1),[u,h]=b.useState(e),f=t??u,m=b.useCallback(x=>{const y=typeof x=="function"?x(f):x;n?n(y):h(y),document.cookie=`${rje}=${y}; path=/; max-age=${nje}`},[n,f]),p=b.useCallback(()=>l?d(x=>!x):m(x=>!x),[l,m,d]);b.useEffect(()=>{const x=y=>{y.key===oje&&(y.metaKey||y.ctrlKey)&&(y.preventDefault(),p())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[p]);const g=f?"expanded":"collapsed",v=b.useMemo(()=>({state:g,open:f,setOpen:m,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:p}),[g,f,m,l,c,d,p]);return r.jsx(xJ.Provider,{value:v,children:r.jsx(RZ,{delayDuration:0,children:r.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":sje,"--sidebar-width-icon":aje,...i},className:Xe("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",s),...o,children:a})})})}function cje({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:s,children:i,...a}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=ZR();return n==="none"?r.jsx("div",{"data-slot":"sidebar",className:Xe("bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col",s),...a,children:i}):o?r.jsx(J1e,{open:c,onOpenChange:d,...a,children:r.jsxs(fJ,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden",style:{"--sidebar-width":ije},side:e,children:[r.jsxs(mJ,{className:"sr-only",children:[r.jsx(pJ,{children:"Sidebar"}),r.jsx(gJ,{children:"Displays the mobile sidebar."})]}),r.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):r.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[r.jsx("div",{"data-slot":"sidebar-gap",className:Xe("relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]")}),r.jsx("div",{"data-slot":"sidebar-container",className:Xe("fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]":"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...a,children:r.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function dje({className:e,onClick:t,...n}){const{toggleSidebar:s}=ZR();return r.jsxs(te,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:Xe("h-7 w-7",e),onClick:i=>{t==null||t(i),s()},...n,children:[r.jsx(gve,{}),r.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function uje({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:Xe("flex flex-col gap-2 p-2",e),...t})}function hje({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:Xe("flex flex-col gap-2 p-2",e),...t})}function fje({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:Xe("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...t})}function mje({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:Xe("relative flex w-full min-w-0 flex-col p-2",e),...t})}function pje({className:e,asChild:t=!1,...n}){const s=t?I_:"div";return r.jsx(s,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:Xe("text-muted-foreground/60 ring-sidebar-ring flex h-7 shrink-0 items-center px-3 text-xs font-medium uppercase tracking-wider outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",e),...n})}function gje({className:e,...t}){return r.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:Xe("w-full text-base",e),...t})}function xje({className:e,...t}){return r.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:Xe("flex w-full min-w-0 flex-col gap-1 pl-2",e),...t})}function vje({className:e,...t}){return r.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:Xe("group/menu-item relative",e),...t})}const yje=Yg("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-5 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-10 text-base",sm:"h-8 text-sm",lg:"h-12 text-base group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function bje({asChild:e=!1,isActive:t=!1,variant:n="default",size:s="default",tooltip:i,className:a,...o}){const l=e?I_:"button",{isMobile:c,state:d}=ZR(),u=r.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":s,"data-active":t,className:Xe(yje({variant:n,size:s}),a),...o});return i?(typeof i=="string"&&(i={children:i}),r.jsxs(Ibe,{children:[r.jsx(Lbe,{asChild:!0,children:u}),r.jsx(DZ,{side:"right",align:"center",hidden:d!=="collapsed"||c,...i})]})):u}const jje="1.0.6";var JR="Avatar",[wje]=oa(JR),[Nje,vJ]=wje(JR),yJ=b.forwardRef((e,t)=>{const{__scopeAvatar:n,...s}=e,[i,a]=b.useState("idle");return r.jsx(Nje,{scope:n,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:r.jsx(ar.span,{...s,ref:t})})});yJ.displayName=JR;var bJ="AvatarImage",jJ=b.forwardRef((e,t)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:i=()=>{},...a}=e,o=vJ(bJ,n),l=Sje(s,a),c=ii(d=>{i(d),o.onImageLoadingStatusChange(d)});return Xi(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?r.jsx(ar.img,{...a,ref:t,src:s}):null});jJ.displayName=bJ;var wJ="AvatarFallback",NJ=b.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:s,...i}=e,a=vJ(wJ,n),[o,l]=b.useState(s===void 0);return b.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&a.imageLoadingStatus!=="loaded"?r.jsx(ar.span,{...i,ref:t}):null});NJ.displayName=wJ;function V8(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Sje(e,{referrerPolicy:t,crossOrigin:n}){const s=Cje(),i=b.useRef(null),a=s?(i.current||(i.current=new window.Image),i.current):null,[o,l]=b.useState(()=>V8(a,e));return Xi(()=>{l(V8(a,e))},[a,e]),Xi(()=>{const c=h=>()=>{l(h)};if(!a)return;const d=c("loaded"),u=c("error");return a.addEventListener("load",d),a.addEventListener("error",u),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",u)}},[a,n,t]),o}function _je(){return()=>{}}function Cje(){return b.useSyncExternalStore(_je,()=>!0,()=>!1)}var SJ=yJ,_J=jJ,CJ=NJ;const AJ=b.forwardRef(({className:e,...t},n)=>r.jsx(SJ,{ref:n,className:Xe(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,e),...t}));AJ.displayName=SJ.displayName;const Aje=b.forwardRef(({className:e,...t},n)=>r.jsx(_J,{ref:n,className:Xe("aspect-square h-full w-full",e),...t}));Aje.displayName=_J.displayName;const kJ=b.forwardRef(({className:e,...t},n)=>r.jsx(CJ,{ref:n,className:Xe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));kJ.displayName=CJ.displayName;const kje=[{title:"Home",items:[{title:"Dashboard",url:"/dashboard",icon:Ba}]},{title:"Applications",items:[{title:"New Application",url:"/applications/new",icon:H0},{title:"Existing RC Registration",url:"/existing-owner",icon:ir}]},{title:"Support",items:[{title:"Help & FAQ",url:"/help",icon:dc},{title:"Grievances",url:"/grievances",icon:Gi}]},{title:"Account",items:[{title:"My Profile",url:"/profile",icon:li},{title:"My Services",url:"/service-settings",icon:iu},{title:"Download RC",url:"/dashboard?filter=approved",icon:ds}]}],Pje=[{title:"Main",items:[{title:"Dashboard",url:"/dashboard",icon:Ba},{title:"Him-Darshan (State)",url:"/state-dashboard",icon:Pm},{title:"Workflow Monitoring",url:"/workflow-monitoring",icon:Zv},{title:"Analytics",url:"/analytics",icon:Zv},{title:"Payment Reports",url:"/admin/payment-reports",icon:_a}]}],Tje=[{title:"Admin",items:[{title:"User Management",url:"/admin/users",icon:Do},{title:"RC Applications",url:"/admin/rc-applications",icon:ir}]}],Eje=[{title:"Testing Tools",items:[{title:"Test Runner",url:"/admin/test-runner",icon:v5}]}],Oje=[{title:"Main",items:[{title:"Dashboard",url:"/admin/super-dashboard",icon:Ba},{title:"User Management",url:"/admin/users",icon:Do},{title:"LGD Import",url:"/admin/lgd-import",icon:Js},{title:"Super Console",url:"/admin/super-console",icon:iu},{title:"RC Applications",url:"/admin/rc-applications",icon:ir}]},{title:"Super Console",items:[{title:"System Status",url:"/admin/super-console#system-overview",icon:ac},{title:"Reset & Seeds",url:"/admin/super-console#reset-zone",icon:Na},{title:"Payments",url:"/admin/super-console#payment-settings",icon:_a},{title:"Communications",url:"/admin/super-console#communications",icon:dc},{title:"Security",url:"/admin/super-console#security",icon:Gi},{title:"District Staff",url:"/admin/super-console#staff-tools",icon:Do},{title:"Smoke Tests",url:"/admin/super-console#smoke-tests",icon:D_},{title:"Test Data",url:"/admin/super-console#test-data",icon:v5},{title:"Policy Settings",url:"/admin/policy-settings",icon:iu}]},{title:"Analytics",items:[{title:"Workflow Monitor",url:"/workflow-monitoring",icon:Zv},{title:"Analytics",url:"/analytics",icon:Zv}]}],Rje=[{title:"Home",items:[{title:"Dashboard",url:"/da/dashboard",icon:Ba}]},{title:"Work Queues",items:[{title:"New Applications",url:"/da/dashboard",icon:H0},{title:"Inspections",url:"/da/inspections",icon:Mi}]},{title:"Existing RC",items:[{title:"Existing RC Queue",url:"/da/legacy",icon:ir}]},{title:"Grievances",items:[{title:"Open Tickets",url:"/da/grievances",icon:dc}]},{title:"Insights",items:[{title:"Analytics",url:"/analytics",icon:uQ},{title:"Workflow Monitor",url:"/workflow-monitoring",icon:Pm}]},{title:"Tools",items:[{title:"Search",url:"/da/search",icon:gu},{title:"My Profile",url:"/da/profile",icon:li}]}],Dje=[{title:"Home",items:[{title:"Dashboard",url:"/dtdo/dashboard",icon:Ba}]},{title:"Work Queues",items:[{title:"New Applications",url:"/dtdo/dashboard",icon:H0}]},{title:"Existing RC",items:[{title:"Existing RC Queue",url:"/dtdo/legacy",icon:ir}]},{title:"Grievances",items:[{title:"Open Tickets",url:"/dtdo/grievances",icon:dc}]},{title:"Insights",items:[{title:"Analytics",url:"/analytics",icon:uQ},{title:"Workflow Monitor",url:"/workflow-monitoring",icon:Pm},{title:"Payment Reports",url:"/admin/payment-reports",icon:_a}]},{title:"Tools",items:[{title:"Search",url:"/dtdo/search",icon:gu},{title:"My Profile",url:"/dtdo/profile",icon:li}]}];function Mje(e){return e==="super_admin"?Oje:e==="system_admin"?Eje:e==="admin"?Tje:e==="dealing_assistant"?Rje:e==="district_tourism_officer"||e==="district_officer"?Dje:e==="state_officer"?Pje:kje}function tC(e){return e==="super_admin"?"/admin/super-dashboard":e==="system_admin"?"/admin/test-runner":e==="admin"?"/admin/users":e==="dealing_assistant"?"/da/dashboard":e==="district_tourism_officer"||e==="district_officer"?"/dtdo/dashboard":e==="state_officer"?"/workflow-monitoring":"/dashboard"}var Ije=b.createContext(void 0);function X0(e){const t=b.useContext(Ije);return e||t||"ltr"}var Dk="rovingFocusGroup.onEntryFocus",Lje={bubbles:!1,cancelable:!0},rC="RovingFocusGroup",[W3,PJ,Fje]=L_(rC),[$je,Q0]=oa(rC,[Fje]),[Bje,Vje]=$je(rC),TJ=b.forwardRef((e,t)=>r.jsx(W3.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(W3.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(Uje,{...e,ref:t})})}));TJ.displayName=rC;var Uje=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...h}=e,f=b.useRef(null),m=Jr(t,f),p=X0(a),[g=null,v]=bc({prop:o,defaultProp:l,onChange:c}),[x,y]=b.useState(!1),j=ii(d),w=PJ(n),N=b.useRef(!1),[S,T]=b.useState(0);return b.useEffect(()=>{const C=f.current;if(C)return C.addEventListener(Dk,j),()=>C.removeEventListener(Dk,j)},[j]),r.jsx(Bje,{scope:n,orientation:s,dir:p,loop:i,currentTabStopId:g,onItemFocus:b.useCallback(C=>v(C),[v]),onItemShiftTab:b.useCallback(()=>y(!0),[]),onFocusableItemAdd:b.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:b.useCallback(()=>T(C=>C-1),[]),children:r.jsx(ar.div,{tabIndex:x||S===0?-1:0,"data-orientation":s,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:$t(e.onMouseDown,()=>{N.current=!0}),onFocus:$t(e.onFocus,C=>{const A=!N.current;if(C.target===C.currentTarget&&A&&!x){const R=new CustomEvent(Dk,Lje);if(C.currentTarget.dispatchEvent(R),!R.defaultPrevented){const k=w().filter(M=>M.focusable),O=k.find(M=>M.active),$=k.find(M=>M.id===g),q=[O,$,...k].filter(Boolean).map(M=>M.ref.current);RJ(q,u)}}N.current=!1}),onBlur:$t(e.onBlur,()=>y(!1))})})}),EJ="RovingFocusGroupItem",OJ=b.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:a,...o}=e,l=mc(),c=a||l,d=Vje(EJ,n),u=d.currentTabStopId===c,h=PJ(n),{onFocusableItemAdd:f,onFocusableItemRemove:m}=d;return b.useEffect(()=>{if(s)return f(),()=>m()},[s,f,m]),r.jsx(W3.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:r.jsx(ar.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:$t(e.onMouseDown,p=>{s?d.onItemFocus(c):p.preventDefault()}),onFocus:$t(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:$t(e.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){d.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const g=Hje(p,d.orientation,d.dir);if(g!==void 0){if(p.metaKey||p.ctrlKey||p.altKey||p.shiftKey)return;p.preventDefault();let x=h().filter(y=>y.focusable).map(y=>y.ref.current);if(g==="last")x.reverse();else if(g==="prev"||g==="next"){g==="prev"&&x.reverse();const y=x.indexOf(p.currentTarget);x=d.loop?Wje(x,y+1):x.slice(y+1)}setTimeout(()=>RJ(x))}})})})});OJ.displayName=EJ;var qje={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function zje(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Hje(e,t,n){const s=zje(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return qje[s]}function RJ(e,t=!1){const n=document.activeElement;for(const s of e)if(s===n||(s.focus({preventScroll:t}),document.activeElement!==n))return}function Wje(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var eD=TJ,tD=OJ,K3=["Enter"," "],Kje=["ArrowDown","PageUp","Home"],DJ=["ArrowUp","PageDown","End"],Gje=[...Kje,...DJ],Yje={ltr:[...K3,"ArrowRight"],rtl:[...K3,"ArrowLeft"]},Xje={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Qj="Menu",[N1,Qje,Zje]=L_(Qj),[Xg,MJ]=oa(Qj,[Zje,sp,Q0]),nC=sp(),IJ=Q0(),[Jje,Qg]=Xg(Qj),[ewe,Zj]=Xg(Qj),LJ=e=>{const{__scopeMenu:t,open:n=!1,children:s,dir:i,onOpenChange:a,modal:o=!0}=e,l=nC(t),[c,d]=b.useState(null),u=b.useRef(!1),h=ii(a),f=X0(i);return b.useEffect(()=>{const m=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),r.jsx(z_,{...l,children:r.jsx(Jje,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:d,children:r.jsx(ewe,{scope:t,onClose:b.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:f,modal:o,children:s})})})};LJ.displayName=Qj;var twe="MenuAnchor",rD=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=nC(n);return r.jsx(zj,{...i,...s,ref:t})});rD.displayName=twe;var nD="MenuPortal",[rwe,FJ]=Xg(nD,{forceMount:void 0}),$J=e=>{const{__scopeMenu:t,forceMount:n,children:s,container:i}=e,a=Qg(nD,t);return r.jsx(rwe,{scope:t,forceMount:n,children:r.jsx(la,{present:n||a.open,children:r.jsx(W0,{asChild:!0,container:i,children:s})})})};$J.displayName=nD;var ad="MenuContent",[nwe,sD]=Xg(ad),BJ=b.forwardRef((e,t)=>{const n=FJ(ad,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=Qg(ad,e.__scopeMenu),o=Zj(ad,e.__scopeMenu);return r.jsx(N1.Provider,{scope:e.__scopeMenu,children:r.jsx(la,{present:s||a.open,children:r.jsx(N1.Slot,{scope:e.__scopeMenu,children:o.modal?r.jsx(swe,{...i,ref:t}):r.jsx(iwe,{...i,ref:t})})})})}),swe=b.forwardRef((e,t)=>{const n=Qg(ad,e.__scopeMenu),s=b.useRef(null),i=Jr(t,s);return b.useEffect(()=>{const a=s.current;if(a)return J_(a)},[]),r.jsx(iD,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$t(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),iwe=b.forwardRef((e,t)=>{const n=Qg(ad,e.__scopeMenu);return r.jsx(iD,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),awe=Um("MenuContent.ScrollLock"),iD=b.forwardRef((e,t)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,disableOutsideScroll:p,...g}=e,v=Qg(ad,n),x=Zj(ad,n),y=nC(n),j=IJ(n),w=Qje(n),[N,S]=b.useState(null),T=b.useRef(null),C=Jr(t,T,v.onContentChange),A=b.useRef(0),R=b.useRef(""),k=b.useRef(0),O=b.useRef(null),$=b.useRef("right"),D=b.useRef(0),q=p?Wj:b.Fragment,M=p?{as:awe,allowPinchZoom:!0}:void 0,L=P=>{var J,ie;const z=R.current+P,Z=w().filter(X=>!X.disabled),F=document.activeElement,W=(J=Z.find(X=>X.ref.current===F))==null?void 0:J.textValue,G=Z.map(X=>X.textValue),H=vwe(G,z,W),se=(ie=Z.find(X=>X.textValue===H))==null?void 0:ie.ref.current;(function X(he){R.current=he,window.clearTimeout(A.current),he!==""&&(A.current=window.setTimeout(()=>X(""),1e3))})(z),se&&setTimeout(()=>se.focus())};b.useEffect(()=>()=>window.clearTimeout(A.current),[]),Q_();const V=b.useCallback(P=>{var Z,F;return $.current===((Z=O.current)==null?void 0:Z.side)&&bwe(P,(F=O.current)==null?void 0:F.area)},[]);return r.jsx(nwe,{scope:n,searchRef:R,onItemEnter:b.useCallback(P=>{V(P)&&P.preventDefault()},[V]),onItemLeave:b.useCallback(P=>{var z;V(P)||((z=T.current)==null||z.focus(),S(null))},[V]),onTriggerLeave:b.useCallback(P=>{V(P)&&P.preventDefault()},[V]),pointerGraceTimerRef:k,onPointerGraceIntentChange:b.useCallback(P=>{O.current=P},[]),children:r.jsx(q,{...M,children:r.jsx(Hj,{asChild:!0,trapped:i,onMountAutoFocus:$t(a,P=>{var z;P.preventDefault(),(z=T.current)==null||z.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:r.jsx(Gg,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:f,onDismiss:m,children:r.jsx(eD,{asChild:!0,...j,dir:x.dir,orientation:"vertical",loop:s,currentTabStopId:N,onCurrentTabStopIdChange:S,onEntryFocus:$t(c,P=>{x.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(H_,{role:"menu","aria-orientation":"vertical","data-state":ree(v.open),"data-radix-menu-content":"",dir:x.dir,...y,...g,ref:C,style:{outline:"none",...g.style},onKeyDown:$t(g.onKeyDown,P=>{const Z=P.target.closest("[data-radix-menu-content]")===P.currentTarget,F=P.ctrlKey||P.altKey||P.metaKey,W=P.key.length===1;Z&&(P.key==="Tab"&&P.preventDefault(),!F&&W&&L(P.key));const G=T.current;if(P.target!==G||!Gje.includes(P.key))return;P.preventDefault();const se=w().filter(J=>!J.disabled).map(J=>J.ref.current);DJ.includes(P.key)&&se.reverse(),gwe(se)}),onBlur:$t(e.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(A.current),R.current="")}),onPointerMove:$t(e.onPointerMove,S1(P=>{const z=P.target,Z=D.current!==P.clientX;if(P.currentTarget.contains(z)&&Z){const F=P.clientX>D.current?"right":"left";$.current=F,D.current=P.clientX}}))})})})})})})});BJ.displayName=ad;var owe="MenuGroup",aD=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(ar.div,{role:"group",...s,ref:t})});aD.displayName=owe;var lwe="MenuLabel",VJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(ar.div,{...s,ref:t})});VJ.displayName=lwe;var S5="MenuItem",U8="menu.itemSelect",sC=b.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:s,...i}=e,a=b.useRef(null),o=Zj(S5,e.__scopeMenu),l=sD(S5,e.__scopeMenu),c=Jr(t,a),d=b.useRef(!1),u=()=>{const h=a.current;if(!n&&h){const f=new CustomEvent(U8,{bubbles:!0,cancelable:!0});h.addEventListener(U8,m=>s==null?void 0:s(m),{once:!0}),TR(h,f),f.defaultPrevented?d.current=!1:o.onClose()}};return r.jsx(UJ,{...i,ref:c,disabled:n,onClick:$t(e.onClick,u),onPointerDown:h=>{var f;(f=e.onPointerDown)==null||f.call(e,h),d.current=!0},onPointerUp:$t(e.onPointerUp,h=>{var f;d.current||(f=h.currentTarget)==null||f.click()}),onKeyDown:$t(e.onKeyDown,h=>{const f=l.searchRef.current!=="";n||f&&h.key===" "||K3.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});sC.displayName=S5;var UJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:s=!1,textValue:i,...a}=e,o=sD(S5,n),l=IJ(n),c=b.useRef(null),d=Jr(t,c),[u,h]=b.useState(!1),[f,m]=b.useState("");return b.useEffect(()=>{const p=c.current;p&&m((p.textContent??"").trim())},[a.children]),r.jsx(N1.ItemSlot,{scope:n,disabled:s,textValue:i??f,children:r.jsx(tD,{asChild:!0,...l,focusable:!s,children:r.jsx(ar.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...a,ref:d,onPointerMove:$t(e.onPointerMove,S1(p=>{s?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$t(e.onPointerLeave,S1(p=>o.onItemLeave(p))),onFocus:$t(e.onFocus,()=>h(!0)),onBlur:$t(e.onBlur,()=>h(!1))})})})}),cwe="MenuCheckboxItem",qJ=b.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:s,...i}=e;return r.jsx(GJ,{scope:e.__scopeMenu,checked:n,children:r.jsx(sC,{role:"menuitemcheckbox","aria-checked":_5(n)?"mixed":n,...i,ref:t,"data-state":lD(n),onSelect:$t(i.onSelect,()=>s==null?void 0:s(_5(n)?!0:!n),{checkForDefaultPrevented:!1})})})});qJ.displayName=cwe;var zJ="MenuRadioGroup",[dwe,uwe]=Xg(zJ,{value:void 0,onValueChange:()=>{}}),HJ=b.forwardRef((e,t)=>{const{value:n,onValueChange:s,...i}=e,a=ii(s);return r.jsx(dwe,{scope:e.__scopeMenu,value:n,onValueChange:a,children:r.jsx(aD,{...i,ref:t})})});HJ.displayName=zJ;var WJ="MenuRadioItem",KJ=b.forwardRef((e,t)=>{const{value:n,...s}=e,i=uwe(WJ,e.__scopeMenu),a=n===i.value;return r.jsx(GJ,{scope:e.__scopeMenu,checked:a,children:r.jsx(sC,{role:"menuitemradio","aria-checked":a,...s,ref:t,"data-state":lD(a),onSelect:$t(s.onSelect,()=>{var o;return(o=i.onValueChange)==null?void 0:o.call(i,n)},{checkForDefaultPrevented:!1})})})});KJ.displayName=WJ;var oD="MenuItemIndicator",[GJ,hwe]=Xg(oD,{checked:!1}),YJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:s,...i}=e,a=hwe(oD,n);return r.jsx(la,{present:s||_5(a.checked)||a.checked===!0,children:r.jsx(ar.span,{...i,ref:t,"data-state":lD(a.checked)})})});YJ.displayName=oD;var fwe="MenuSeparator",XJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e;return r.jsx(ar.div,{role:"separator","aria-orientation":"horizontal",...s,ref:t})});XJ.displayName=fwe;var mwe="MenuArrow",QJ=b.forwardRef((e,t)=>{const{__scopeMenu:n,...s}=e,i=nC(n);return r.jsx(W_,{...i,...s,ref:t})});QJ.displayName=mwe;var pwe="MenuSub",[xht,ZJ]=Xg(pwe),hb="MenuSubTrigger",JJ=b.forwardRef((e,t)=>{const n=Qg(hb,e.__scopeMenu),s=Zj(hb,e.__scopeMenu),i=ZJ(hb,e.__scopeMenu),a=sD(hb,e.__scopeMenu),o=b.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,d={__scopeMenu:e.__scopeMenu},u=b.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return b.useEffect(()=>u,[u]),b.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),r.jsx(rD,{asChild:!0,...d,children:r.jsx(UJ,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":ree(n.open),...e,ref:M_(t,i.onTriggerChange),onClick:h=>{var f;(f=e.onClick)==null||f.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$t(e.onPointerMove,S1(h=>{a.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:$t(e.onPointerLeave,S1(h=>{var m,p;u();const f=(m=n.content)==null?void 0:m.getBoundingClientRect();if(f){const g=(p=n.content)==null?void 0:p.dataset.side,v=g==="right",x=v?-5:5,y=f[v?"left":"right"],j=f[v?"right":"left"];a.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:y,y:f.top},{x:j,y:f.top},{x:j,y:f.bottom},{x:y,y:f.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(h),h.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:$t(e.onKeyDown,h=>{var m;const f=a.searchRef.current!=="";e.disabled||f&&h.key===" "||Yje[s.dir].includes(h.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),h.preventDefault())})})})});JJ.displayName=hb;var eee="MenuSubContent",tee=b.forwardRef((e,t)=>{const n=FJ(ad,e.__scopeMenu),{forceMount:s=n.forceMount,...i}=e,a=Qg(ad,e.__scopeMenu),o=Zj(ad,e.__scopeMenu),l=ZJ(eee,e.__scopeMenu),c=b.useRef(null),d=Jr(t,c);return r.jsx(N1.Provider,{scope:e.__scopeMenu,children:r.jsx(la,{present:s||a.open,children:r.jsx(N1.Slot,{scope:e.__scopeMenu,children:r.jsx(iD,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:d,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var h;o.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:$t(e.onFocusOutside,u=>{u.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:$t(e.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:$t(e.onKeyDown,u=>{var m;const h=u.currentTarget.contains(u.target),f=Xje[o.dir].includes(u.key);h&&f&&(a.onOpenChange(!1),(m=l.trigger)==null||m.focus(),u.preventDefault())})})})})})});tee.displayName=eee;function ree(e){return e?"open":"closed"}function _5(e){return e==="indeterminate"}function lD(e){return _5(e)?"indeterminate":e?"checked":"unchecked"}function gwe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function xwe(e,t){return e.map((n,s)=>e[(t+s)%e.length])}function vwe(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=xwe(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function ywe(e,t){const{x:n,y:s}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a].x,c=t[a].y,d=t[o].x,u=t[o].y;c>s!=u>s&&n<(d-l)*(s-c)/(u-c)+l&&(i=!i)}return i}function bwe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return ywe(n,t)}function S1(e){return t=>t.pointerType==="mouse"?e(t):void 0}var jwe=LJ,wwe=rD,Nwe=$J,Swe=BJ,_we=aD,Cwe=VJ,Awe=sC,kwe=qJ,Pwe=HJ,Twe=KJ,Ewe=YJ,Owe=XJ,Rwe=QJ,Dwe=JJ,Mwe=tee,cD="DropdownMenu",[Iwe]=oa(cD,[MJ]),ll=MJ(),[Lwe,nee]=Iwe(cD),see=e=>{const{__scopeDropdownMenu:t,children:n,dir:s,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,c=ll(t),d=b.useRef(null),[u=!1,h]=bc({prop:i,defaultProp:a,onChange:o});return r.jsx(Lwe,{scope:t,triggerId:mc(),triggerRef:d,contentId:mc(),open:u,onOpenChange:h,onOpenToggle:b.useCallback(()=>h(f=>!f),[h]),modal:l,children:r.jsx(jwe,{...c,open:u,onOpenChange:h,dir:s,modal:l,children:n})})};see.displayName=cD;var iee="DropdownMenuTrigger",aee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...i}=e,a=nee(iee,n),o=ll(n);return r.jsx(wwe,{asChild:!0,...o,children:r.jsx(ar.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...i,ref:M_(t,a.triggerRef),onPointerDown:$t(e.onPointerDown,l=>{!s&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:$t(e.onKeyDown,l=>{s||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});aee.displayName=iee;var Fwe="DropdownMenuPortal",oee=e=>{const{__scopeDropdownMenu:t,...n}=e,s=ll(t);return r.jsx(Nwe,{...s,...n})};oee.displayName=Fwe;var lee="DropdownMenuContent",cee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=nee(lee,n),a=ll(n),o=b.useRef(!1);return r.jsx(Swe,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...s,ref:t,onCloseAutoFocus:$t(e.onCloseAutoFocus,l=>{var c;o.current||(c=i.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:$t(e.onInteractOutside,l=>{const c=l.detail.originalEvent,d=c.button===0&&c.ctrlKey===!0,u=c.button===2||d;(!i.modal||u)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});cee.displayName=lee;var $we="DropdownMenuGroup",Bwe=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(_we,{...i,...s,ref:t})});Bwe.displayName=$we;var Vwe="DropdownMenuLabel",dee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Cwe,{...i,...s,ref:t})});dee.displayName=Vwe;var Uwe="DropdownMenuItem",uee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Awe,{...i,...s,ref:t})});uee.displayName=Uwe;var qwe="DropdownMenuCheckboxItem",hee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(kwe,{...i,...s,ref:t})});hee.displayName=qwe;var zwe="DropdownMenuRadioGroup",Hwe=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Pwe,{...i,...s,ref:t})});Hwe.displayName=zwe;var Wwe="DropdownMenuRadioItem",fee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Twe,{...i,...s,ref:t})});fee.displayName=Wwe;var Kwe="DropdownMenuItemIndicator",mee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Ewe,{...i,...s,ref:t})});mee.displayName=Kwe;var Gwe="DropdownMenuSeparator",pee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Owe,{...i,...s,ref:t})});pee.displayName=Gwe;var Ywe="DropdownMenuArrow",Xwe=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Rwe,{...i,...s,ref:t})});Xwe.displayName=Ywe;var Qwe="DropdownMenuSubTrigger",gee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Dwe,{...i,...s,ref:t})});gee.displayName=Qwe;var Zwe="DropdownMenuSubContent",xee=b.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...s}=e,i=ll(n);return r.jsx(Mwe,{...i,...s,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xee.displayName=Zwe;var Jwe=see,e2e=aee,t2e=oee,vee=cee,yee=dee,bee=uee,jee=hee,wee=fee,Nee=mee,See=pee,_ee=gee,Cee=xee;const Rb=Jwe,Db=e2e,r2e=b.forwardRef(({className:e,inset:t,children:n,...s},i)=>r.jsxs(_ee,{ref:i,className:Xe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...s,children:[n,r.jsx(lf,{className:"ml-auto"})]}));r2e.displayName=_ee.displayName;const n2e=b.forwardRef(({className:e,...t},n)=>r.jsx(Cee,{ref:n,className:Xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));n2e.displayName=Cee.displayName;const mv=b.forwardRef(({className:e,sideOffset:t=4,...n},s)=>r.jsx(t2e,{children:r.jsx(vee,{ref:s,sideOffset:t,className:Xe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));mv.displayName=vee.displayName;const Uc=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(bee,{ref:s,className:Xe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...n}));Uc.displayName=bee.displayName;const s2e=b.forwardRef(({className:e,children:t,checked:n,...s},i)=>r.jsxs(jee,{ref:i,className:Xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Nee,{children:r.jsx(Qd,{className:"h-4 w-4"})})}),t]}));s2e.displayName=jee.displayName;const i2e=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(wee,{ref:s,className:Xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(Nee,{children:r.jsx(hQ,{className:"h-2 w-2 fill-current"})})}),t]}));i2e.displayName=wee.displayName;const Aee=b.forwardRef(({className:e,inset:t,...n},s)=>r.jsx(yee,{ref:s,className:Xe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Aee.displayName=yee.displayName;const kee=b.forwardRef(({className:e,...t},n)=>r.jsx(See,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",e),...t}));kee.displayName=See.displayName;function a2e({activeOnly:e=!1,allowedServices:t,className:n}){const{selectedService:s,setSelectedService:i,currentServiceInfo:a}=qbe();let o=[...Ip];return t&&t.length>0&&(o=o.filter(l=>t.includes(l.id))),e&&(o=o.filter(l=>l.active)),o.length===0?null:r.jsxs(Rb,{children:[r.jsx(Db,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:Xe("h-9 px-3 gap-2 font-medium border-primary/20 hover:border-primary/40","bg-background/80 backdrop-blur-sm",n),children:[r.jsx("span",{className:"text-lg",children:a.icon}),r.jsx("span",{className:"hidden sm:inline",children:a.label}),r.jsx(Tm,{className:"h-4 w-4 text-muted-foreground"})]})}),r.jsxs(mv,{align:"start",className:"w-56",children:[r.jsx(Aee,{children:"Select Service"}),r.jsx(kee,{}),o.map(l=>r.jsxs(Uc,{className:Xe("flex items-center gap-3 cursor-pointer",!l.active&&"opacity-50"),disabled:!l.active,onClick:()=>l.active&&i(l.id),children:[r.jsx("span",{className:"text-lg w-6 text-center",children:l.icon}),r.jsx("span",{className:"flex-1",children:l.label}),s===l.id&&r.jsx(Qd,{className:"h-4 w-4 text-primary"}),!l.active&&r.jsx("span",{className:"text-xs text-muted-foreground",children:"Soon"})]},l.id))]})]})}function o2e(){var C;const[e,t]=Dr(),{data:n}=rt({queryKey:["/api/auth/me"]}),s=n==null?void 0:n.user,{data:i}=rt({queryKey:["/api/applications"],enabled:(s==null?void 0:s.role)==="property_owner",staleTime:30*1e3}),{data:a}=rt({queryKey:["/api/settings/enable-legacy-registrations"],staleTime:60*1e3}),o=(a==null?void 0:a.enabled)!==!1,l=(s==null?void 0:s.role)==="property_owner"?((C=i==null?void 0:i.applications)==null?void 0:C[0])??null:null,c=!!l&&l.status==="approved"&&!!l.certificateNumber,d=Mje((s==null?void 0:s.role)||"property_owner"),{data:u}=rt({queryKey:["/api/da/inspections"],enabled:(s==null?void 0:s.role)==="dealing_assistant"}),{data:h}=rt({queryKey:["/api/da/applications"],enabled:(s==null?void 0:s.role)==="dealing_assistant",staleTime:30*1e3}),f=b.useMemo(()=>{if((s==null?void 0:s.role)!=="dealing_assistant"||!h)return{newSubmissions:0,total:0};const A=h.filter(k=>{var O;return(O=k.applicationNumber)==null?void 0:O.startsWith("LG-HS-")});return{newSubmissions:A.filter(k=>["legacy_rc_review","under_scrutiny","submitted"].includes(k.status??"")).length,total:A.length}},[h,s==null?void 0:s.role]),m=(s==null?void 0:s.role)==="dealing_assistant"?(u??[]).filter(A=>!A.reportSubmitted).length:0,p=b.useMemo(()=>{let A=d;return(s==null?void 0:s.role)==="dealing_assistant"&&m>0&&(A=A.map(R=>({...R,items:R.items.map(k=>k.url==="/da/inspections"?{...k,badge:m>99?"99+":String(m)}:k)}))),(s==null?void 0:s.role)==="dealing_assistant"&&f.newSubmissions>0&&(A=A.map(R=>({...R,items:R.items.map(k=>k.url==="/da/legacy"?{...k,badge:f.newSubmissions>99?"99+":String(f.newSubmissions),badgeVariant:"success"}:k)}))),A},[d,m,f,s==null?void 0:s.role]),g=b.useMemo(()=>o||(s==null?void 0:s.role)!=="property_owner"?p:p.map(A=>({...A,items:A.items.filter(R=>R.url!=="/existing-owner")})),[p,o,s==null?void 0:s.role]),v=A=>A.split(" ").map(R=>R[0]).join("").toUpperCase().slice(0,2),x=A=>({property_owner:"Property Owner",district_officer:"District Officer",state_officer:"State Officer",admin:"Administrator",system_admin:"System Admin"})[A]||"User",y=A=>{const[R,k]=A.split("#");if(k){if(e!==R)t(R),setTimeout(()=>{const O=document.getElementById(k);O&&O.scrollIntoView({behavior:"smooth",block:"start"})},120);else{const O=document.getElementById(k);O?O.scrollIntoView({behavior:"smooth",block:"start"}):window.location.hash=k}return}e!==A&&t(A)},j=A=>{if((s==null?void 0:s.role)==="property_owner"&&l){if(A.url==="/applications/new"||A.url==="/existing-owner"){y(`/applications/${l.id}`);return}if(A.url==="/dashboard?filter=approved"){if(!c)return;y(`/applications/${l.id}#registration-certificate`);return}}y(A.url)};if(!s)return null;const w=(s==null?void 0:s.role)&&["dealing_assistant","district_tourism_officer","district_officer","state_officer","admin","super_admin","system_admin"].includes(s.role),N=(s==null?void 0:s.role)==="property_owner",S=zbe(),T=N?s.enabledServices??["homestay"]:void 0;return r.jsxs(cje,{children:[r.jsxs(uje,{className:"p-4 border-b",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-md bg-primary flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold text-primary-foreground",children:"HP"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:"text-base font-semibold truncate",children:"HP Tourism"}),r.jsx("p",{className:"text-sm text-muted-foreground truncate",children:"eServices Portal"})]})]}),S&&(w||N)&&r.jsx("div",{className:"mt-3",children:r.jsx(a2e,{className:"w-full justify-between",allowedServices:N?T:void 0})})]}),r.jsx(fje,{children:g.map(A=>r.jsxs(mje,{children:[r.jsx(pje,{children:A.title}),r.jsx(gje,{children:r.jsx(xje,{children:A.items.map(R=>{const k=e===R.url,$=(s==null?void 0:s.role)==="property_owner"&&R.url==="/dashboard?filter=approved"&&(!l||!c);return r.jsx(vje,{children:r.jsxs(bje,{onClick:()=>{$||j(R)},isActive:k,disabled:$,"data-testid":`nav-${R.title.toLowerCase().replace(/\s+/g,"-")}`,children:[r.jsx(R.icon,{className:"w-4 h-4"}),r.jsx("span",{children:R.title}),R.badge&&r.jsx("span",{className:`ml-auto text-xs px-2 py-0.5 rounded-full font-medium ${R.badgeVariant==="success"?"bg-emerald-500 text-white":R.badgeVariant==="warning"?"bg-amber-500 text-white":"bg-primary text-primary-foreground"}`,children:R.badge})]})},R.url)})})})]},A.title))}),r.jsxs(hje,{className:"p-4 border-t",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(AJ,{className:"w-9 h-9",children:r.jsx(kJ,{className:"text-sm bg-primary/10",children:v(s.fullName)})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-base font-medium truncate",children:s.fullName}),r.jsx("p",{className:"text-sm text-muted-foreground truncate",children:x(s.role)})]})]}),r.jsx("div",{className:"mt-3 pt-3 border-t border-dashed flex items-center justify-between text-xs text-muted-foreground",children:r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"HomeStay-Portal v",jje]})})]})]})}function q8({children:e}){const[t,n]=Dr(),{data:s}=rt({queryKey:["/api/auth/me"]}),i=async()=>{try{await lt("POST","/api/auth/logout",{}),er.clear(),n("/")}catch(l){console.error("Logout failed:",l),er.clear(),n("/")}},a=()=>{var c;const l=tC(((c=s==null?void 0:s.user)==null?void 0:c.role)||"property_owner");n(l)},o={"--sidebar-width":"16rem","--sidebar-width-icon":"3rem"};return r.jsx(lje,{style:o,children:r.jsxs("div",{className:"layout-container fixed inset-0 flex w-full overflow-hidden",children:[r.jsx(o2e,{}),r.jsxs("div",{className:"flex flex-col flex-1 min-h-0",children:[r.jsxs("header",{className:"flex items-center justify-between gap-2 p-3 border-b bg-background",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dje,{"data-testid":"button-sidebar-toggle"}),r.jsxs(te,{variant:"ghost",size:"sm",onClick:a,"data-testid":"button-home",children:[r.jsx(Ba,{className:"w-4 h-4 mr-2"}),"Home"]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(te,{variant:"outline",size:"sm",onClick:i,"data-testid":"button-logout",children:[r.jsx(pQ,{className:"w-4 h-4 mr-2"}),"Logout"]})})]}),r.jsx("main",{className:"main-content flex-1 overflow-y-auto",children:e})]})]})})}const me=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm",e),...t}));me.displayName="Card";const Ce=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("flex flex-col space-y-1.5 p-6",e),...t}));Ce.displayName="CardHeader";const ke=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("text-2xl font-semibold leading-none tracking-tight",e),...t}));ke.displayName="CardTitle";const Ue=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));Ue.displayName="CardDescription";const ge=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("p-6 pt-0",e),...t}));ge.displayName="CardContent";const Pee=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("flex items-center p-6 pt-0",e),...t}));Pee.displayName="CardFooter";function l2e(){return r.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:r.jsx(me,{className:"w-full max-w-md mx-4",children:r.jsxs(ge,{className:"pt-6",children:[r.jsxs("div",{className:"flex mb-4 gap-2",children:[r.jsx(Kr,{className:"h-8 w-8 text-red-500"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),r.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const C5="/assets/WhatsApp%20Image%202025-10-25%20at%2007.59.16_5c0e8739_1761362811579-D-2HPDmE.jpg";function jf({title:e,subtitle:t,showHome:n=!0,showBack:s=!0,backTo:i,actions:a,onPrimaryLogoToggle:o,onBack:l,floatingComponent:c}){const[,d]=Dr(),u=()=>{if(l){l();return}i?d(i):window.history.back()};return r.jsx("div",{className:"border-b bg-background sticky top-0 z-50",children:r.jsxs("div",{className:"container mx-auto px-4 py-3 relative",children:[c&&r.jsx("div",{className:"absolute right-2 top-[calc(100%+0.5rem)] z-50",children:c}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex flex-1 min-w-0 items-center gap-3",children:[s&&r.jsx(te,{variant:"ghost",size:"icon",onClick:u,"data-testid":"button-back",children:r.jsx(Es,{className:"h-5 w-5"})}),n&&r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>d("/"),"data-testid":"button-home",children:r.jsx(Ba,{className:"h-5 w-5"})}),e&&r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[o?r.jsx("button",{type:"button",onClick:o,className:"relative p-0 border-none bg-transparent focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/40 rounded","aria-label":"Toggle alternate hero image",children:r.jsx("img",{src:C5,alt:"Himachal Tourism",className:"h-12 w-auto object-contain","data-testid":"img-hp-tourism-logo"})}):r.jsx("img",{src:C5,alt:"Himachal Tourism",className:"h-12 w-auto object-contain","data-testid":"img-hp-tourism-logo"}),r.jsx("div",{className:"border-l h-12 border-border"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h1",{className:"text-lg font-semibold leading-tight truncate","data-testid":"text-page-title",children:e}),t&&r.jsx("p",{className:"text-sm text-muted-foreground leading-tight truncate","data-testid":"text-page-subtitle",children:t})]})]})]}),a&&r.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 w-full sm:w-auto",children:a})]})]})})}const c2e=[{id:"classic",name:"Classic Portal",description:"Signature green hero layout"},{id:"professional-blue",name:"Professional Blue",description:"Traditional government style"},{id:"mountain-sky",name:"Mountain Sky",description:"Sky blue with mountain accents"}];function d2e(){const{theme:e,setTheme:t}=IZ();return r.jsxs(Rb,{children:[r.jsx(Db,{asChild:!0,children:r.jsxs(te,{variant:"outline",size:"sm","data-testid":"button-theme-switcher",children:[r.jsx(gQ,{className:"w-4 h-4 mr-2"}),"Theme"]})}),r.jsx(mv,{align:"end",className:"w-56",children:c2e.map(n=>r.jsx(Uc,{onClick:()=>t(n.id),className:"flex items-start gap-2 cursor-pointer","data-testid":`theme-option-${n.id}`,children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-medium",children:n.name}),e===n.id&&r.jsx(Qd,{className:"w-4 h-4 text-primary"})]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:n.description})]})},n.id))})]})}function g2({value:e,duration:t=1e3}){const[n,s]=b.useState(e),[i,a]=b.useState(!1),o=b.useRef(e);return b.useEffect(()=>{if(o.current===e&&n!==0)return;a(!0);const l=o.current,c=e,d=Date.now(),u=()=>{const f=Date.now()-d,m=Math.min(f/t,1),p=1-Math.pow(1-m,4),g=Math.floor(l+(c-l)*p);s(g),m<1?requestAnimationFrame(u):(s(c),a(!1),o.current=c)};requestAnimationFrame(u)},[e,t]),r.jsx("span",{className:`transition-all ${i?"scale-110":"scale-100"}`,children:n.toLocaleString()})}function u2e(e){return Object.prototype.toString.call(e)==="[object Object]"}function z8(e){return u2e(e)||Array.isArray(e)}function h2e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function dD(e,t){const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;const i=JSON.stringify(Object.keys(e.breakpoints||{})),a=JSON.stringify(Object.keys(t.breakpoints||{}));return i!==a?!1:n.every(o=>{const l=e[o],c=t[o];return typeof l=="function"?`${l}`==`${c}`:!z8(l)||!z8(c)?l===c:dD(l,c)})}function H8(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function f2e(e,t){if(e.length!==t.length)return!1;const n=H8(e),s=H8(t);return n.every((i,a)=>{const o=s[a];return dD(i,o)})}function uD(e){return typeof e=="number"}function G3(e){return typeof e=="string"}function iC(e){return typeof e=="boolean"}function W8(e){return Object.prototype.toString.call(e)==="[object Object]"}function gi(e){return Math.abs(e)}function hD(e){return Math.sign(e)}function Mb(e,t){return gi(e-t)}function m2e(e,t){if(e===0||t===0||gi(e)<=gi(t))return 0;const n=Mb(gi(e),gi(t));return gi(n/e)}function p2e(e){return Math.round(e*100)/100}function _1(e){return C1(e).map(Number)}function Jd(e){return e[Jj(e)]}function Jj(e){return Math.max(0,e.length-1)}function fD(e,t){return t===Jj(e)}function K8(e,t=0){return Array.from(Array(e),(n,s)=>t+s)}function C1(e){return Object.keys(e)}function Tee(e,t){return[e,t].reduce((n,s)=>(C1(s).forEach(i=>{const a=n[i],o=s[i],l=W8(a)&&W8(o);n[i]=l?Tee(a,o):o}),n),{})}function Y3(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function g2e(e,t){const n={start:s,center:i,end:a};function s(){return 0}function i(c){return a(c)/2}function a(c){return t-c}function o(c,d){return G3(e)?n[e](c):e(t,c,d)}return{measure:o}}function A1(){let e=[];function t(i,a,o,l={passive:!0}){let c;if("addEventListener"in i)i.addEventListener(a,o,l),c=()=>i.removeEventListener(a,o,l);else{const d=i;d.addListener(o),c=()=>d.removeListener(o)}return e.push(c),s}function n(){e=e.filter(i=>i())}const s={add:t,clear:n};return s}function x2e(e,t,n,s){const i=A1(),a=1e3/60;let o=null,l=0,c=0;function d(){i.add(e,"visibilitychange",()=>{e.hidden&&p()})}function u(){m(),i.clear()}function h(v){if(!c)return;o||(o=v,n(),n());const x=v-o;for(o=v,l+=x;l>=a;)n(),l-=a;const y=l/a;s(y),c&&(c=t.requestAnimationFrame(h))}function f(){c||(c=t.requestAnimationFrame(h))}function m(){t.cancelAnimationFrame(c),o=null,l=0,c=0}function p(){o=null,l=0}return{init:d,destroy:u,start:f,stop:m,update:n,render:s}}function v2e(e,t){const n=t==="rtl",s=e==="y",i=s?"y":"x",a=s?"x":"y",o=!s&&n?-1:1,l=u(),c=h();function d(p){const{height:g,width:v}=p;return s?g:v}function u(){return s?"top":n?"right":"left"}function h(){return s?"bottom":n?"left":"right"}function f(p){return p*o}return{scroll:i,cross:a,startEdge:l,endEdge:c,measureSize:d,direction:f}}function Tg(e=0,t=0){const n=gi(e-t);function s(d){return d<e}function i(d){return d>t}function a(d){return s(d)||i(d)}function o(d){return a(d)?s(d)?e:t:d}function l(d){return n?d-n*Math.ceil((d-t)/n):d}return{length:n,max:t,min:e,constrain:o,reachedAny:a,reachedMax:i,reachedMin:s,removeOffset:l}}function Eee(e,t,n){const{constrain:s}=Tg(0,e),i=e+1;let a=o(t);function o(f){return n?gi((i+f)%i):s(f)}function l(){return a}function c(f){return a=o(f),h}function d(f){return u().set(l()+f)}function u(){return Eee(e,l(),n)}const h={get:l,set:c,add:d,clone:u};return h}function y2e(e,t,n,s,i,a,o,l,c,d,u,h,f,m,p,g,v,x,y){const{cross:j,direction:w}=e,N=["INPUT","SELECT","TEXTAREA"],S={passive:!1},T=A1(),C=A1(),A=Tg(50,225).constrain(m.measure(20)),R={mouse:300,touch:400},k={mouse:500,touch:600},O=p?43:25;let $=!1,D=0,q=0,M=!1,L=!1,V=!1,P=!1;function z(Q){if(!y)return;function Oe(ee){(iC(y)||y(Q,ee))&&se(ee)}const ve=t;T.add(ve,"dragstart",ee=>ee.preventDefault(),S).add(ve,"touchmove",()=>{},S).add(ve,"touchend",()=>{}).add(ve,"touchstart",Oe).add(ve,"mousedown",Oe).add(ve,"touchcancel",ie).add(ve,"contextmenu",ie).add(ve,"click",X,!0)}function Z(){T.clear(),C.clear()}function F(){const Q=P?n:t;C.add(Q,"touchmove",J,S).add(Q,"touchend",ie).add(Q,"mousemove",J,S).add(Q,"mouseup",ie)}function W(Q){const Oe=Q.nodeName||"";return N.includes(Oe)}function G(){return(p?k:R)[P?"mouse":"touch"]}function H(Q,Oe){const ve=h.add(hD(Q)*-1),ee=u.byDistance(Q,!p).distance;return p||gi(Q)<A?ee:v&&Oe?ee*.5:u.byIndex(ve.get(),0).distance}function se(Q){const Oe=Y3(Q,s);P=Oe,V=p&&Oe&&!Q.buttons&&$,$=Mb(i.get(),o.get())>=2,!(Oe&&Q.button!==0)&&(W(Q.target)||(M=!0,a.pointerDown(Q),d.useFriction(0).useDuration(0),i.set(o),F(),D=a.readPoint(Q),q=a.readPoint(Q,j),f.emit("pointerDown")))}function J(Q){if(!Y3(Q,s)&&Q.touches.length>=2)return ie(Q);const ve=a.readPoint(Q),ee=a.readPoint(Q,j),Ee=Mb(ve,D),Re=Mb(ee,q);if(!L&&!P&&(!Q.cancelable||(L=Ee>Re,!L)))return ie(Q);const oe=a.pointerMove(Q);Ee>g&&(V=!0),d.useFriction(.3).useDuration(.75),l.start(),i.add(w(oe)),Q.preventDefault()}function ie(Q){const ve=u.byDistance(0,!1).index!==h.get(),ee=a.pointerUp(Q)*G(),Ee=H(w(ee),ve),Re=m2e(ee,Ee),oe=O-10*Re,De=x+Re/50;L=!1,M=!1,C.clear(),d.useDuration(oe).useFriction(De),c.distance(Ee,!p),P=!1,f.emit("pointerUp")}function X(Q){V&&(Q.stopPropagation(),Q.preventDefault(),V=!1)}function he(){return M}return{init:z,destroy:Z,pointerDown:he}}function b2e(e,t){let s,i;function a(h){return h.timeStamp}function o(h,f){const p=`client${(f||e.scroll)==="x"?"X":"Y"}`;return(Y3(h,t)?h:h.touches[0])[p]}function l(h){return s=h,i=h,o(h)}function c(h){const f=o(h)-o(i),m=a(h)-a(s)>170;return i=h,m&&(s=h),f}function d(h){if(!s||!i)return 0;const f=o(i)-o(s),m=a(h)-a(s),p=a(h)-a(i)>170,g=f/m;return m&&!p&&gi(g)>.1?g:0}return{pointerDown:l,pointerMove:c,pointerUp:d,readPoint:o}}function j2e(){function e(n){const{offsetTop:s,offsetLeft:i,offsetWidth:a,offsetHeight:o}=n;return{top:s,right:i+a,bottom:s+o,left:i,width:a,height:o}}return{measure:e}}function w2e(e){function t(s){return e*(s/100)}return{measure:t}}function N2e(e,t,n,s,i,a,o){const l=[e].concat(s);let c,d,u=[],h=!1;function f(v){return i.measureSize(o.measure(v))}function m(v){if(!a)return;d=f(e),u=s.map(f);function x(y){for(const j of y){if(h)return;const w=j.target===e,N=s.indexOf(j.target),S=w?d:u[N],T=f(w?e:s[N]);if(gi(T-S)>=.5){v.reInit(),t.emit("resize");break}}}c=new ResizeObserver(y=>{(iC(a)||a(v,y))&&x(y)}),n.requestAnimationFrame(()=>{l.forEach(y=>c.observe(y))})}function p(){h=!0,c&&c.disconnect()}return{init:m,destroy:p}}function S2e(e,t,n,s,i,a){let o=0,l=0,c=i,d=a,u=e.get(),h=0;function f(){const S=s.get()-e.get(),T=!c;let C=0;return T?(o=0,n.set(s),e.set(s),C=S):(n.set(e),o+=S/c,o*=d,u+=o,e.add(o),C=u-h),l=hD(C),h=u,N}function m(){const S=s.get()-t.get();return gi(S)<.001}function p(){return c}function g(){return l}function v(){return o}function x(){return j(i)}function y(){return w(a)}function j(S){return c=S,N}function w(S){return d=S,N}const N={direction:g,duration:p,velocity:v,seek:f,settled:m,useBaseFriction:y,useBaseDuration:x,useFriction:w,useDuration:j};return N}function _2e(e,t,n,s,i){const a=i.measure(10),o=i.measure(50),l=Tg(.1,.99);let c=!1;function d(){return!(c||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function u(m){if(!d())return;const p=e.reachedMin(t.get())?"min":"max",g=gi(e[p]-t.get()),v=n.get()-t.get(),x=l.constrain(g/o);n.subtract(v*x),!m&&gi(v)<a&&(n.set(e.constrain(n.get())),s.useDuration(25).useBaseFriction())}function h(m){c=!m}return{shouldConstrain:d,constrain:u,toggleActive:h}}function C2e(e,t,n,s,i){const a=Tg(-t+e,0),o=h(),l=u(),c=f();function d(p,g){return Mb(p,g)<=1}function u(){const p=o[0],g=Jd(o),v=o.lastIndexOf(p),x=o.indexOf(g)+1;return Tg(v,x)}function h(){return n.map((p,g)=>{const{min:v,max:x}=a,y=a.constrain(p),j=!g,w=fD(n,g);return j?x:w||d(v,y)?v:d(x,y)?x:y}).map(p=>parseFloat(p.toFixed(3)))}function f(){if(t<=e+i)return[a.max];if(s==="keepSnaps")return o;const{min:p,max:g}=l;return o.slice(p,g)}return{snapsContained:c,scrollContainLimit:l}}function A2e(e,t,n){const s=t[0],i=n?s-e:Jd(t);return{limit:Tg(i,s)}}function k2e(e,t,n,s){const a=t.min+.1,o=t.max+.1,{reachedMin:l,reachedMax:c}=Tg(a,o);function d(f){return f===1?c(n.get()):f===-1?l(n.get()):!1}function u(f){if(!d(f))return;const m=e*(f*-1);s.forEach(p=>p.add(m))}return{loop:u}}function P2e(e){const{max:t,length:n}=e;function s(a){const o=a-t;return n?o/-n:0}return{get:s}}function T2e(e,t,n,s,i){const{startEdge:a,endEdge:o}=e,{groupSlides:l}=i,c=h().map(t.measure),d=f(),u=m();function h(){return l(s).map(g=>Jd(g)[o]-g[0][a]).map(gi)}function f(){return s.map(g=>n[a]-g[a]).map(g=>-gi(g))}function m(){return l(d).map(g=>g[0]).map((g,v)=>g+c[v])}return{snaps:d,snapsAligned:u}}function E2e(e,t,n,s,i,a){const{groupSlides:o}=i,{min:l,max:c}=s,d=u();function u(){const f=o(a),m=!e||t==="keepSnaps";return n.length===1?[a]:m?f:f.slice(l,c).map((p,g,v)=>{const x=!g,y=fD(v,g);if(x){const j=Jd(v[0])+1;return K8(j)}if(y){const j=Jj(a)-Jd(v)[0]+1;return K8(j,Jd(v)[0])}return p})}return{slideRegistry:d}}function O2e(e,t,n,s,i){const{reachedAny:a,removeOffset:o,constrain:l}=s;function c(p){return p.concat().sort((g,v)=>gi(g)-gi(v))[0]}function d(p){const g=e?o(p):l(p),v=t.map((y,j)=>({diff:u(y-g,0),index:j})).sort((y,j)=>gi(y.diff)-gi(j.diff)),{index:x}=v[0];return{index:x,distance:g}}function u(p,g){const v=[p,p+n,p-n];if(!e)return p;if(!g)return c(v);const x=v.filter(y=>hD(y)===g);return x.length?c(x):Jd(v)-n}function h(p,g){const v=t[p]-i.get(),x=u(v,g);return{index:p,distance:x}}function f(p,g){const v=i.get()+p,{index:x,distance:y}=d(v),j=!e&&a(v);if(!g||j)return{index:x,distance:p};const w=t[x]-y,N=p+u(w,0);return{index:x,distance:N}}return{byDistance:f,byIndex:h,shortcut:u}}function R2e(e,t,n,s,i,a,o){function l(h){const f=h.distance,m=h.index!==t.get();a.add(f),f&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),m&&(n.set(t.get()),t.set(h.index),o.emit("select"))}function c(h,f){const m=i.byDistance(h,f);l(m)}function d(h,f){const m=t.clone().set(h),p=i.byIndex(m.get(),f);l(p)}return{distance:c,index:d}}function D2e(e,t,n,s,i,a,o,l){const c={passive:!0,capture:!0};let d=0;function u(m){if(!l)return;function p(g){if(new Date().getTime()-d>10)return;o.emit("slideFocusStart"),e.scrollLeft=0;const y=n.findIndex(j=>j.includes(g));uD(y)&&(i.useDuration(0),s.index(y,0),o.emit("slideFocus"))}a.add(document,"keydown",h,!1),t.forEach((g,v)=>{a.add(g,"focus",x=>{(iC(l)||l(m,x))&&p(v)},c)})}function h(m){m.code==="Tab"&&(d=new Date().getTime())}return{init:u}}function fb(e){let t=e;function n(){return t}function s(c){t=o(c)}function i(c){t+=o(c)}function a(c){t-=o(c)}function o(c){return uD(c)?c:c.get()}return{get:n,set:s,add:i,subtract:a}}function Oee(e,t){const n=e.scroll==="x"?o:l,s=t.style;let i=null,a=!1;function o(f){return`translate3d(${f}px,0px,0px)`}function l(f){return`translate3d(0px,${f}px,0px)`}function c(f){if(a)return;const m=p2e(e.direction(f));m!==i&&(s.transform=n(m),i=m)}function d(f){a=!f}function u(){a||(s.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:u,to:c,toggleActive:d}}function M2e(e,t,n,s,i,a,o,l,c){const u=_1(i),h=_1(i).reverse(),f=x().concat(y());function m(T,C){return T.reduce((A,R)=>A-i[R],C)}function p(T,C){return T.reduce((A,R)=>m(A,C)>0?A.concat([R]):A,[])}function g(T){return a.map((C,A)=>({start:C-s[A]+.5+T,end:C+t-.5+T}))}function v(T,C,A){const R=g(C);return T.map(k=>{const O=A?0:-n,$=A?n:0,D=A?"end":"start",q=R[k][D];return{index:k,loopPoint:q,slideLocation:fb(-1),translate:Oee(e,c[k]),target:()=>l.get()>q?O:$}})}function x(){const T=o[0],C=p(h,T);return v(C,n,!1)}function y(){const T=t-o[0]-1,C=p(u,T);return v(C,-n,!0)}function j(){return f.every(({index:T})=>{const C=u.filter(A=>A!==T);return m(C,t)<=.1})}function w(){f.forEach(T=>{const{target:C,translate:A,slideLocation:R}=T,k=C();k!==R.get()&&(A.to(k),R.set(k))})}function N(){f.forEach(T=>T.translate.clear())}return{canLoop:j,clear:N,loop:w,loopPoints:f}}function I2e(e,t,n){let s,i=!1;function a(c){if(!n)return;function d(u){for(const h of u)if(h.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}s=new MutationObserver(u=>{i||(iC(n)||n(c,u))&&d(u)}),s.observe(e,{childList:!0})}function o(){s&&s.disconnect(),i=!0}return{init:a,destroy:o}}function L2e(e,t,n,s){const i={};let a=null,o=null,l,c=!1;function d(){l=new IntersectionObserver(p=>{c||(p.forEach(g=>{const v=t.indexOf(g.target);i[v]=g}),a=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:s}),t.forEach(p=>l.observe(p))}function u(){l&&l.disconnect(),c=!0}function h(p){return C1(i).reduce((g,v)=>{const x=parseInt(v),{isIntersecting:y}=i[x];return(p&&y||!p&&!y)&&g.push(x),g},[])}function f(p=!0){if(p&&a)return a;if(!p&&o)return o;const g=h(p);return p&&(a=g),p||(o=g),g}return{init:d,destroy:u,get:f}}function F2e(e,t,n,s,i,a){const{measureSize:o,startEdge:l,endEdge:c}=e,d=n[0]&&i,u=p(),h=g(),f=n.map(o),m=v();function p(){if(!d)return 0;const y=n[0];return gi(t[l]-y[l])}function g(){if(!d)return 0;const y=a.getComputedStyle(Jd(s));return parseFloat(y.getPropertyValue(`margin-${c}`))}function v(){return n.map((y,j,w)=>{const N=!j,S=fD(w,j);return N?f[j]+u:S?f[j]+h:w[j+1][l]-y[l]}).map(gi)}return{slideSizes:f,slideSizesWithGaps:m,startGap:u,endGap:h}}function $2e(e,t,n,s,i,a,o,l,c){const{startEdge:d,endEdge:u,direction:h}=e,f=uD(n);function m(x,y){return _1(x).filter(j=>j%y===0).map(j=>x.slice(j,j+y))}function p(x){return x.length?_1(x).reduce((y,j,w)=>{const N=Jd(y)||0,S=N===0,T=j===Jj(x),C=i[d]-a[N][d],A=i[d]-a[j][u],R=!s&&S?h(o):0,k=!s&&T?h(l):0,O=gi(A-k-(C+R));return w&&O>t+c&&y.push(j),T&&y.push(x.length),y},[]).map((y,j,w)=>{const N=Math.max(w[j-1]||0);return x.slice(N,y)}):[]}function g(x){return f?m(x,n):p(x)}return{groupSlides:g}}function B2e(e,t,n,s,i,a,o){const{align:l,axis:c,direction:d,startIndex:u,loop:h,duration:f,dragFree:m,dragThreshold:p,inViewThreshold:g,slidesToScroll:v,skipSnaps:x,containScroll:y,watchResize:j,watchSlides:w,watchDrag:N,watchFocus:S}=a,T=2,C=j2e(),A=C.measure(t),R=n.map(C.measure),k=v2e(c,d),O=k.measureSize(A),$=w2e(O),D=g2e(l,O),q=!h&&!!y,M=h||!!y,{slideSizes:L,slideSizesWithGaps:V,startGap:P,endGap:z}=F2e(k,A,R,n,M,i),Z=$2e(k,O,v,h,A,R,P,z,T),{snaps:F,snapsAligned:W}=T2e(k,D,A,R,Z),G=-Jd(F)+Jd(V),{snapsContained:H,scrollContainLimit:se}=C2e(O,G,W,y,T),J=q?H:W,{limit:ie}=A2e(G,J,h),X=Eee(Jj(J),u,h),he=X.clone(),fe=_1(n),Q=({dragHandler:nt,scrollBody:Y,scrollBounds:Ct,options:{loop:Vt}})=>{Vt||Ct.constrain(nt.pointerDown()),Y.seek()},Oe=({scrollBody:nt,translate:Y,location:Ct,offsetLocation:Vt,previousLocation:pt,scrollLooper:Ht,slideLooper:wr,dragHandler:wt,animation:Ut,eventHandler:St,scrollBounds:Be,options:{loop:lr}},Wt)=>{const It=nt.settled(),yt=!Be.shouldConstrain(),ut=lr?It:It&&yt,Kt=ut&&!wt.pointerDown();Kt&&Ut.stop();const Os=Ct.get()*Wt+pt.get()*(1-Wt);Vt.set(Os),lr&&(Ht.loop(nt.direction()),wr.loop()),Y.to(Vt.get()),Kt&&St.emit("settle"),ut||St.emit("scroll")},ve=x2e(s,i,()=>Q(He),nt=>Oe(He,nt)),ee=.68,Ee=J[X.get()],Re=fb(Ee),oe=fb(Ee),De=fb(Ee),tt=fb(Ee),Qe=S2e(Re,De,oe,tt,f,ee),xe=O2e(h,J,G,ie,tt),ae=R2e(ve,X,he,Qe,xe,tt,o),we=P2e(ie),Te=A1(),qe=L2e(t,n,o,g),{slideRegistry:Ke}=E2e(q,y,J,se,Z,fe),Ge=D2e(e,n,Ke,ae,Qe,Te,o,S),He={ownerDocument:s,ownerWindow:i,eventHandler:o,containerRect:A,slideRects:R,animation:ve,axis:k,dragHandler:y2e(k,e,s,i,tt,b2e(k,i),Re,ve,ae,Qe,xe,X,o,$,m,p,x,ee,N),eventStore:Te,percentOfView:$,index:X,indexPrevious:he,limit:ie,location:Re,offsetLocation:De,previousLocation:oe,options:a,resizeHandler:N2e(t,o,i,n,k,j,C),scrollBody:Qe,scrollBounds:_2e(ie,De,tt,Qe,$),scrollLooper:k2e(G,ie,De,[Re,De,oe,tt]),scrollProgress:we,scrollSnapList:J.map(we.get),scrollSnaps:J,scrollTarget:xe,scrollTo:ae,slideLooper:M2e(k,O,G,L,V,F,J,De,n),slideFocus:Ge,slidesHandler:I2e(t,o,w),slidesInView:qe,slideIndexes:fe,slideRegistry:Ke,slidesToScroll:Z,target:tt,translate:Oee(k,t)};return He}function V2e(){let e={},t;function n(d){t=d}function s(d){return e[d]||[]}function i(d){return s(d).forEach(u=>u(t,d)),c}function a(d,u){return e[d]=s(d).concat([u]),c}function o(d,u){return e[d]=s(d).filter(h=>h!==u),c}function l(){e={}}const c={init:n,emit:i,off:o,on:a,clear:l};return c}const U2e={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function q2e(e){function t(a,o){return Tee(a,o||{})}function n(a){const o=a.breakpoints||{},l=C1(o).filter(c=>e.matchMedia(c).matches).map(c=>o[c]).reduce((c,d)=>t(c,d),{});return t(a,l)}function s(a){return a.map(o=>C1(o.breakpoints||{})).reduce((o,l)=>o.concat(l),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:s}}function z2e(e){let t=[];function n(a,o){return t=o.filter(({options:l})=>e.optionsAtMedia(l).active!==!1),t.forEach(l=>l.init(a,e)),o.reduce((l,c)=>Object.assign(l,{[c.name]:c}),{})}function s(){t=t.filter(a=>a.destroy())}return{init:n,destroy:s}}function A5(e,t,n){const s=e.ownerDocument,i=s.defaultView,a=q2e(i),o=z2e(a),l=A1(),c=V2e(),{mergeOptions:d,optionsAtMedia:u,optionsMediaQueries:h}=a,{on:f,off:m,emit:p}=c,g=k;let v=!1,x,y=d(U2e,A5.globalOptions),j=d(y),w=[],N,S,T;function C(){const{container:fe,slides:Q}=j;S=(G3(fe)?e.querySelector(fe):fe)||e.children[0];const ve=G3(Q)?S.querySelectorAll(Q):Q;T=[].slice.call(ve||S.children)}function A(fe){const Q=B2e(e,S,T,s,i,fe,c);if(fe.loop&&!Q.slideLooper.canLoop()){const Oe=Object.assign({},fe,{loop:!1});return A(Oe)}return Q}function R(fe,Q){v||(y=d(y,fe),j=u(y),w=Q||w,C(),x=A(j),h([y,...w.map(({options:Oe})=>Oe)]).forEach(Oe=>l.add(Oe,"change",k)),j.active&&(x.translate.to(x.location.get()),x.animation.init(),x.slidesInView.init(),x.slideFocus.init(he),x.eventHandler.init(he),x.resizeHandler.init(he),x.slidesHandler.init(he),x.options.loop&&x.slideLooper.loop(),S.offsetParent&&T.length&&x.dragHandler.init(he),N=o.init(he,w)))}function k(fe,Q){const Oe=Z();O(),R(d({startIndex:Oe},fe),Q),c.emit("reInit")}function O(){x.dragHandler.destroy(),x.eventStore.clear(),x.translate.clear(),x.slideLooper.clear(),x.resizeHandler.destroy(),x.slidesHandler.destroy(),x.slidesInView.destroy(),x.animation.destroy(),o.destroy(),l.clear()}function $(){v||(v=!0,l.clear(),O(),c.emit("destroy"),c.clear())}function D(fe,Q,Oe){!j.active||v||(x.scrollBody.useBaseFriction().useDuration(Q===!0?0:j.duration),x.scrollTo.index(fe,Oe||0))}function q(fe){const Q=x.index.add(1).get();D(Q,fe,-1)}function M(fe){const Q=x.index.add(-1).get();D(Q,fe,1)}function L(){return x.index.add(1).get()!==Z()}function V(){return x.index.add(-1).get()!==Z()}function P(){return x.scrollSnapList}function z(){return x.scrollProgress.get(x.offsetLocation.get())}function Z(){return x.index.get()}function F(){return x.indexPrevious.get()}function W(){return x.slidesInView.get()}function G(){return x.slidesInView.get(!1)}function H(){return N}function se(){return x}function J(){return e}function ie(){return S}function X(){return T}const he={canScrollNext:L,canScrollPrev:V,containerNode:ie,internalEngine:se,destroy:$,off:m,on:f,emit:p,plugins:H,previousScrollSnap:F,reInit:g,rootNode:J,scrollNext:q,scrollPrev:M,scrollProgress:z,scrollSnapList:P,scrollTo:D,selectedScrollSnap:Z,slideNodes:X,slidesInView:W,slidesNotInView:G};return R(t,n),setTimeout(()=>c.emit("init"),0),he}A5.globalOptions=void 0;function mD(e={},t=[]){const n=b.useRef(e),s=b.useRef(t),[i,a]=b.useState(),[o,l]=b.useState(),c=b.useCallback(()=>{i&&i.reInit(n.current,s.current)},[i]);return b.useEffect(()=>{dD(n.current,e)||(n.current=e,c())},[e,c]),b.useEffect(()=>{f2e(s.current,t)||(s.current=t,c())},[t,c]),b.useEffect(()=>{if(h2e()&&o){A5.globalOptions=mD.globalOptions;const d=A5(o,n.current,s.current);return a(d),()=>d.destroy()}else a(void 0)},[o,a]),[l,i]}mD.globalOptions=void 0;function H2e({images:e,interval:t=5e3,onSlideChange:n,overlayClassName:s}){const[i,a]=mD({loop:!0}),[o,l]=b.useState(0),[c,d]=b.useState(!1),u=b.useCallback(()=>{a&&a.scrollPrev()},[a]),h=b.useCallback(()=>{a&&a.scrollNext()},[a]),f=b.useCallback(()=>{if(!a)return;const m=a.selectedScrollSnap();l(m),n&&n(m)},[a,n]);return b.useEffect(()=>{if(a)return f(),a.on("select",f),()=>{a.off("select",f)}},[a,f]),b.useEffect(()=>{if(!a||c||window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;const p=setInterval(()=>{a.scrollNext()},t);return()=>clearInterval(p)},[a,t,c]),r.jsxs("div",{className:"relative w-full h-full overflow-hidden",ref:i,role:"region","aria-label":"Hero images carousel","aria-roledescription":"carousel",children:[r.jsx("div",{className:"flex h-full",children:e.map((m,p)=>r.jsxs("div",{className:"flex-[0_0_100%] min-w-0 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700",style:{backgroundImage:`url(${m})`}}),r.jsx("div",{className:`absolute inset-0 ${s||"bg-gradient-to-b from-black/60 via-black/50 to-black/60"}`})]},p))}),r.jsx(te,{variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20 hover:text-white z-10",onClick:u,"aria-label":"Previous slide","data-testid":"button-carousel-prev",children:r.jsx(y1,{className:"h-6 w-6"})}),r.jsx(te,{variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20 hover:text-white z-10",onClick:h,"aria-label":"Next slide","data-testid":"button-carousel-next",children:r.jsx(lf,{className:"h-6 w-6"})}),r.jsx(te,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20 hover:text-white z-10",onClick:()=>d(!c),"aria-label":c?"Resume autoplay":"Pause autoplay","aria-pressed":c,"data-testid":"button-carousel-pause",children:c?r.jsx(kR,{className:"h-5 w-5"}):r.jsx(xve,{className:"h-5 w-5"})}),r.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-1 z-10",role:"group","aria-label":"Carousel navigation",children:e.map((m,p)=>r.jsx("button",{className:"p-2 min-w-[44px] min-h-[44px] flex items-center justify-center",onClick:()=>a==null?void 0:a.scrollTo(p),"aria-label":`Go to slide ${p+1}`,"aria-current":p===o?"true":"false","data-testid":`button-carousel-indicator-${p}`,children:r.jsx("span",{className:`rounded-full transition-all ${p===o?"bg-white w-8 h-2":"bg-white/50 hover:bg-white/75 w-2 h-2"}`})},p))})]})}const pD="/assets/beautiful_himachal_p_50139e3f-AgbAFN7C.jpg",W2e="/assets/beautiful_scenic_him_10b034ba-icPATNTa.jpg",K2e="/assets/beautiful_scenic_him_3e373e25-Dzvos-Hc.jpg",G2e="/assets/beautiful_scenic_him_799557d0-BevIQ_1f.jpg",Y2e="/assets/Bird_eye_view_of_Pong_Dam_lake-CLzY-PdI.jpg",X2e="/assets/Buddha_statue_at_Langza_village-X8x9NIPg.jpg",Q2e="/assets/Chitkul-Dy4RvfC4.jpg",Z2e="/assets/Gulaba_Manali-B36Yq_-Q.jpg",J2e="/assets/Hatu_Peak_Narkanda-CmQLZAsC.jpg",eNe="/assets/Khajjiar_Chamba-BbIUUEml.jpg",tNe="/assets/Langza_village-nt5O0tIn.jpg",Ree="/assets/Marhi_view_from_on_the_way_to_Rohtang--iFQA68L5.jpg",rNe="/assets/Naldehra_golf_course-c84FV8tp.jpg",nNe="/assets/Renuka_ji_lake_at_Renuka_Sirmaur-BgkEJk55.jpg",sNe="/assets/View_fromTriund_top-BjYYGRiQ.jpg",iNe="/assets/View_from_Haripurdhar_Sirmaur-Zg2UvpmZ.jpg",aNe="/assets/View_from_Kaumik_village_Spiti-BiAiY8Up.jpg",oNe="/assets/view_from_Naddi_village-c3qtWO_e.jpg",lNe="/assets/view_of_Chitkul_valley-CvP_fToW.jpg",cNe="/assets/view_of_Karsog_valley-DHiTSz-u.jpg",dNe="/assets/view_of_Kee_monastery-BrIcVFpK.jpg",uNe="/assets/cm_sukhu_sukh_ki_sarkar-B4L9rAxQ.jpg",x2=[pD,W2e,K2e,G2e,Y2e,X2e,Q2e,Z2e,J2e,eNe,tNe,Ree,rNe,nNe,sNe,iNe,aNe,oNe,lNe,cNe,dNe],hNe=()=>uNe,fNe=()=>{const e=new Date().getHours();return e>=0&&e<6?x2.slice(0,6):e>=6&&e<12?x2.slice(6,12):e>=12&&e<18?x2.slice(12,17):x2.slice(17)},mNe="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9Im91dGVyUmluZyIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNiN2U0ZmYiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjODdjNGU1Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJpbm5lckNpcmNsZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiMxNDQwN2MiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjMGExZjQ3Ii8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50IGlkPSJtb3VudGFpbkZpbGwiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjNWFhYWUwIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzBkM2E3NCIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iYm9sdEZpbGwiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIi8+CiAgICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2UzZjJmZiIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxwYXRoIGlkPSJ0ZXh0UGF0aFRvcCIgZD0iTTEwMCAyMCBhODAgODAgMCAxIDEgLTAuMSAwIi8+CiAgICA8cGF0aCBpZD0idGV4dFBhdGhCb3R0b20iIGQ9Ik0xMDAgMTgwIGE4MCA4MCAwIDEgMCAwLjEgMCIvPgogIDwvZGVmcz4KCiAgPGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI5NSIgZmlsbD0idXJsKCNvdXRlclJpbmcpIiBzdHJva2U9IiMwYzJjNWMiIHN0cm9rZS13aWR0aD0iMyIvPgogIDxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNzgiIGZpbGw9InVybCgjaW5uZXJDaXJjbGUpIiBzdHJva2U9IiNhOGQ5ZmYiIHN0cm9rZS13aWR0aD0iNiIvPgoKICA8cGF0aAogICAgZD0iTTQ1IDEzMiBMNzUgMTAwIEw5NSAxMTggTDExOCA5OCBMMTUwIDEzMiBaIgogICAgZmlsbD0idXJsKCNtb3VudGFpbkZpbGwpIgogIC8+CiAgPHBhdGgKICAgIGQ9Ik03OCAxMDAgTDExMCA3MiBMMTAwIDExMCBMMTI4IDExMCBMOTAgMTY1IEwxMDIgMTMwIEw3MiAxMzAgWiIKICAgIGZpbGw9InVybCgjYm9sdEZpbGwpIgogIC8+CgogIDxjaXJjbGUgY3g9IjEwMCIgY3k9IjEwMCIgcj0iNzAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzJiNWM5NyIgc3Ryb2tlLXdpZHRoPSIyIi8+CgogIDx0ZXh0IGZpbGw9IiMwZDJmNjYiIGZvbnQtZmFtaWx5PSJJbnRlciwgJ1NlZ29lIFVJJywgQXJpYWwsIHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTIiIGxldHRlci1zcGFjaW5nPSIyIj4KICAgIDx0ZXh0UGF0aCBocmVmPSIjdGV4dFBhdGhUb3AiIHN0YXJ0T2Zmc2V0PSI1MCUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPgogICAgICBISU1BQ0hBTCBQUkFERVNIIFNUQVRFIEVMRUNUUk9OSUNTIERFVi4gQ09SUC4gTFRELgogICAgPC90ZXh0UGF0aD4KICA8L3RleHQ+CiAgPHRleHQgZmlsbD0iIzBkMmY2NiIgZm9udC1mYW1pbHk9IkludGVyLCAnU2Vnb2UgVUknLCBBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxMiIgbGV0dGVyLXNwYWNpbmc9IjIiPgogICAgPHRleHRQYXRoIGhyZWY9IiN0ZXh0UGF0aEJvdHRvbSIgc3RhcnRPZmZzZXQ9IjUwJSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+CiAgICAgIEhJTUFDSEFMIFBSQURFU0ggU1RBVEUgRUxFQ1RST05JQ1MgREVWLiBDT1JQLiBMVEQuCiAgICA8L3RleHRQYXRoPgogIDwvdGV4dD4KPC9zdmc+Cg==",Dee="/assets/v-cliq-logo-CiVIXGWs.jpg";function pNe(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,i)=>i==="create"?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function aC(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const X3=e=>Array.isArray(e);function Mee(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function k1(e){return typeof e=="string"||Array.isArray(e)}function G8(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function gD(e,t,n,s){if(typeof t=="function"){const[i,a]=G8(s);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=G8(s);t=t(n!==void 0?n:e.custom,i,a)}return t}function oC(e,t,n){const s=e.getProps();return gD(s,t,n!==void 0?n:s.custom,e)}const xD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vD=["initial",...xD],ew=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Zg=new Set(ew),Qh=e=>e*1e3,Zh=e=>e/1e3,gNe={type:"spring",stiffness:500,damping:25,restSpeed:10},xNe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),vNe={type:"keyframes",duration:.8},yNe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bNe=(e,{keyframes:t})=>t.length>2?vNe:Zg.has(e)?e.startsWith("scale")?xNe(t[1]):gNe:yNe;function yD(e,t){return e?e[t]||e.default||e:void 0}const jNe={useManualTiming:!1},wNe=e=>e!==null;function lC(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(wNe),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||s===void 0?i[a]:s}const ko=e=>e;let Iee=ko;function NNe(e){let t=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){a.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,u=!1,h=!1)=>{const m=h&&s?t:n;return u&&a.add(d),m.has(d)||m.add(d),d},cancel:d=>{n.delete(d),a.delete(d)},process:d=>{if(o=d,s){i=!0;return}s=!0,[t,n]=[n,t],n.clear(),t.forEach(l),s=!1,i&&(i=!1,c.process(d))}};return c}const v2=["read","resolveKeyframes","update","preRender","render","postRender"],SNe=40;function Lee(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=v2.reduce((x,y)=>(x[y]=NNe(a),x),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:h,postRender:f}=o,m=()=>{const x=performance.now();n=!1,i.delta=s?1e3/60:Math.max(Math.min(x-i.timestamp,SNe),1),i.timestamp=x,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),u.process(i),h.process(i),f.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(m))},p=()=>{n=!0,s=!0,i.isProcessing||e(m)};return{schedule:v2.reduce((x,y)=>{const j=o[y];return x[y]=(w,N=!1,S=!1)=>(n||p(),j.schedule(w,N,S)),x},{}),cancel:x=>{for(let y=0;y<v2.length;y++)o[v2[y]].cancel(x)},state:i,steps:o}}const{schedule:bs,cancel:Wm,state:so,steps:Mk}=Lee(typeof requestAnimationFrame<"u"?requestAnimationFrame:ko,!0),Fee=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,_Ne=1e-7,CNe=12;function ANe(e,t,n,s,i){let a,o,l=0;do o=t+(n-t)/2,a=Fee(o,s,i)-e,a>0?n=o:t=o;while(Math.abs(a)>_Ne&&++l<CNe);return o}function tw(e,t,n,s){if(e===t&&n===s)return ko;const i=a=>ANe(a,0,1,e,n);return a=>a===0||a===1?a:Fee(i(a),t,s)}const $ee=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Bee=e=>t=>1-e(1-t),Vee=tw(.33,1.53,.69,.99),bD=Bee(Vee),Uee=$ee(bD),qee=e=>(e*=2)<1?.5*bD(e):.5*(2-Math.pow(2,-10*(e-1))),jD=e=>1-Math.sin(Math.acos(e)),zee=Bee(jD),Hee=$ee(jD),Wee=e=>/^0[^.\s]+$/u.test(e);function kNe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Wee(e):!0}const Kee=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Gee=e=>t=>typeof t=="string"&&t.startsWith(e),Yee=Gee("--"),PNe=Gee("var(--"),wD=e=>PNe(e)?TNe.test(e.split("/*")[0].trim()):!1,TNe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ENe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ONe(e){const t=ENe.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function Xee(e,t,n=1){const[s,i]=ONe(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const o=a.trim();return Kee(o)?parseFloat(o):o}return wD(i)?Xee(i,t,n+1):i}const uf=(e,t,n)=>n>t?t:n<e?e:n,Z0={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},P1={...Z0,transform:e=>uf(0,1,e)},y2={...Z0,default:1},rw=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xf=rw("deg"),Qu=rw("%"),Br=rw("px"),RNe=rw("vh"),DNe=rw("vw"),Y8={...Qu,parse:e=>Qu.parse(e)/100,transform:e=>Qu.transform(e*100)},MNe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),X8=e=>e===Z0||e===Br,Q8=(e,t)=>parseFloat(e.split(", ")[t]),Z8=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/u);if(i)return Q8(i[1],t);{const a=s.match(/^matrix\((.+)\)$/u);return a?Q8(a[1],e):0}},INe=new Set(["x","y","z"]),LNe=ew.filter(e=>!INe.has(e));function FNe(e){const t=[];return LNe.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const n0={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Z8(4,13),y:Z8(5,14)};n0.translateX=n0.x;n0.translateY=n0.y;const Qee=e=>t=>t.test(e),$Ne={test:e=>e==="auto",parse:e=>e},Zee=[Z0,Br,Qu,Xf,DNe,RNe,$Ne],J8=e=>Zee.find(Qee(e)),mg=new Set;let Q3=!1,Z3=!1;function Jee(){if(Z3){const e=Array.from(mg).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=FNe(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,o])=>{var l;(l=s.getValue(a))===null||l===void 0||l.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Z3=!1,Q3=!1,mg.forEach(e=>e.complete()),mg.clear()}function ete(){mg.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Z3=!0)})}function BNe(){ete(),Jee()}class ND{constructor(t,n,s,i,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(mg.add(this),Q3||(Q3=!0,bs.read(ete),bs.resolveKeyframes(Jee))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=i==null?void 0:i.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&n){const c=s.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),i&&o===void 0&&i.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),mg.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,mg.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Ib=e=>Math.round(e*1e5)/1e5,SD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function VNe(e){return e==null}const UNe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_D=(e,t)=>n=>!!(typeof n=="string"&&UNe.test(n)&&n.startsWith(e)||t&&!VNe(n)&&Object.prototype.hasOwnProperty.call(n,t)),tte=(e,t,n)=>s=>{if(typeof s!="string")return s;const[i,a,o,l]=s.match(SD);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},qNe=e=>uf(0,255,e),Ik={...Z0,transform:e=>Math.round(qNe(e))},Zp={test:_D("rgb","red"),parse:tte("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+Ik.transform(e)+", "+Ik.transform(t)+", "+Ik.transform(n)+", "+Ib(P1.transform(s))+")"};function zNe(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const J3={test:_D("#"),parse:zNe,transform:Zp.transform},qx={test:_D("hsl","hue"),parse:tte("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+Qu.transform(Ib(t))+", "+Qu.transform(Ib(n))+", "+Ib(P1.transform(s))+")"},wo={test:e=>Zp.test(e)||J3.test(e)||qx.test(e),parse:e=>Zp.test(e)?Zp.parse(e):qx.test(e)?qx.parse(e):J3.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Zp.transform(e):qx.transform(e)},HNe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function WNe(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(SD))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(HNe))===null||n===void 0?void 0:n.length)||0)>0}const rte="number",nte="color",KNe="var",GNe="var(",eF="${}",YNe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function T1(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(YNe,c=>(wo.test(c)?(s.color.push(a),i.push(nte),n.push(wo.parse(c))):c.startsWith(GNe)?(s.var.push(a),i.push(KNe),n.push(c)):(s.number.push(a),i.push(rte),n.push(parseFloat(c))),++a,eF)).split(eF);return{values:n,split:l,indexes:s,types:i}}function ste(e){return T1(e).values}function ite(e){const{split:t,types:n}=T1(e),s=t.length;return i=>{let a="";for(let o=0;o<s;o++)if(a+=t[o],i[o]!==void 0){const l=n[o];l===rte?a+=Ib(i[o]):l===nte?a+=wo.transform(i[o]):a+=i[o]}return a}}const XNe=e=>typeof e=="number"?0:e;function QNe(e){const t=ste(e);return ite(e)(t.map(XNe))}const Km={test:WNe,parse:ste,createTransformer:ite,getAnimatableNone:QNe},ZNe=new Set(["brightness","contrast","saturate","opacity"]);function JNe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(SD)||[];if(!s)return e;const i=n.replace(s,"");let a=ZNe.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+i+")"}const e5e=/\b([a-z-]*)\(.*?\)/gu,eT={...Km,getAnimatableNone:e=>{const t=e.match(e5e);return t?t.map(JNe).join(" "):e}},t5e={borderWidth:Br,borderTopWidth:Br,borderRightWidth:Br,borderBottomWidth:Br,borderLeftWidth:Br,borderRadius:Br,radius:Br,borderTopLeftRadius:Br,borderTopRightRadius:Br,borderBottomRightRadius:Br,borderBottomLeftRadius:Br,width:Br,maxWidth:Br,height:Br,maxHeight:Br,top:Br,right:Br,bottom:Br,left:Br,padding:Br,paddingTop:Br,paddingRight:Br,paddingBottom:Br,paddingLeft:Br,margin:Br,marginTop:Br,marginRight:Br,marginBottom:Br,marginLeft:Br,backgroundPositionX:Br,backgroundPositionY:Br},r5e={rotate:Xf,rotateX:Xf,rotateY:Xf,rotateZ:Xf,scale:y2,scaleX:y2,scaleY:y2,scaleZ:y2,skew:Xf,skewX:Xf,skewY:Xf,distance:Br,translateX:Br,translateY:Br,translateZ:Br,x:Br,y:Br,z:Br,perspective:Br,transformPerspective:Br,opacity:P1,originX:Y8,originY:Y8,originZ:Br},tF={...Z0,transform:Math.round},CD={...t5e,...r5e,zIndex:tF,size:Br,fillOpacity:P1,strokeOpacity:P1,numOctaves:tF},n5e={...CD,color:wo,backgroundColor:wo,outlineColor:wo,fill:wo,stroke:wo,borderColor:wo,borderTopColor:wo,borderRightColor:wo,borderBottomColor:wo,borderLeftColor:wo,filter:eT,WebkitFilter:eT},AD=e=>n5e[e];function ate(e,t){let n=AD(e);return n!==eT&&(n=Km),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const s5e=new Set(["auto","none","0"]);function i5e(e,t,n){let s=0,i;for(;s<e.length&&!i;){const a=e[s];typeof a=="string"&&!s5e.has(a)&&T1(a).values.length&&(i=e[s]),s++}if(i&&n)for(const a of t)e[a]=ate(n,i)}class ote extends ND{constructor(t,n,s,i,a){super(t,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),wD(d))){const u=Xee(d,n.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!MNe.has(s)||t.length!==2)return;const[i,a]=t,o=J8(i),l=J8(a);if(o!==l)if(X8(o)&&X8(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)kNe(t[i])&&s.push(i);s.length&&i5e(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=n0[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const a=n.getValue(s);a&&a.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=n0[s](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{n.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function kD(e){return typeof e=="function"}let NN;function a5e(){NN=void 0}const Zu={now:()=>(NN===void 0&&Zu.set(so.isProcessing||jNe.useManualTiming?so.timestamp:performance.now()),NN),set:e=>{NN=e,queueMicrotask(a5e)}},rF=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Km.test(e)||e==="0")&&!e.startsWith("url("));function o5e(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function l5e(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=rF(i,t),l=rF(a,t);return!o||!l?!1:o5e(e)||(n==="spring"||kD(n))&&s}const c5e=40;class lte{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Zu.now(),this.options={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>c5e?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&BNe(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Zu.now(),this.hasAttemptedResolve=!0;const{name:s,type:i,velocity:a,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!l5e(t,s,i,a))if(o)this.options.duration=0;else{c==null||c(lC(t,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,n);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const s0=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},cte=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)s+=e(s0(0,i-1,a))+", ";return`linear(${s.substring(0,s.length-2)})`};function dte(e,t){return t?e*(1e3/t):0}const d5e=5;function ute(e,t,n){const s=Math.max(t-d5e,0);return dte(n-e(s),t-s)}const Oi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Lk=.001;function u5e({duration:e=Oi.duration,bounce:t=Oi.bounce,velocity:n=Oi.velocity,mass:s=Oi.mass}){let i,a,o=1-t;o=uf(Oi.minDamping,Oi.maxDamping,o),e=uf(Oi.minDuration,Oi.maxDuration,Zh(e)),o<1?(i=d=>{const u=d*o,h=u*e,f=u-n,m=tT(d,o),p=Math.exp(-h);return Lk-f/m*p},a=d=>{const h=d*o*e,f=h*n+n,m=Math.pow(o,2)*Math.pow(d,2)*e,p=Math.exp(-h),g=tT(Math.pow(d,2),o);return(-i(d)+Lk>0?-1:1)*((f-m)*p)/g}):(i=d=>{const u=Math.exp(-d*e),h=(d-n)*e+1;return-Lk+u*h},a=d=>{const u=Math.exp(-d*e),h=(n-d)*(e*e);return u*h});const l=5/e,c=f5e(i,a,l);if(e=Qh(e),isNaN(c))return{stiffness:Oi.stiffness,damping:Oi.damping,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const h5e=12;function f5e(e,t,n){let s=n;for(let i=1;i<h5e;i++)s=s-e(s)/t(s);return s}function tT(e,t){return e*Math.sqrt(1-t*t)}const rT=2e4;function hte(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<rT;)t+=n,s=e.next(t);return t>=rT?1/0:t}const m5e=["duration","bounce"],p5e=["stiffness","damping","mass"];function nF(e,t){return t.some(n=>e[n]!==void 0)}function g5e(e){let t={velocity:Oi.velocity,stiffness:Oi.stiffness,damping:Oi.damping,mass:Oi.mass,isResolvedFromDuration:!1,...e};if(!nF(e,p5e)&&nF(e,m5e))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*uf(.05,1,1-e.bounce)*Math.sqrt(i);t={...t,mass:Oi.mass,stiffness:i,damping:a}}else{const n=u5e(e);t={...t,...n,mass:Oi.mass},t.isResolvedFromDuration=!0}return t}function fte(e=Oi.visualDuration,t=Oi.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:d,mass:u,duration:h,velocity:f,isResolvedFromDuration:m}=g5e({...n,velocity:-Zh(n.velocity||0)}),p=f||0,g=d/(2*Math.sqrt(c*u)),v=o-a,x=Zh(Math.sqrt(c/u)),y=Math.abs(v)<5;s||(s=y?Oi.restSpeed.granular:Oi.restSpeed.default),i||(i=y?Oi.restDelta.granular:Oi.restDelta.default);let j;if(g<1){const N=tT(x,g);j=S=>{const T=Math.exp(-g*x*S);return o-T*((p+g*x*v)/N*Math.sin(N*S)+v*Math.cos(N*S))}}else if(g===1)j=N=>o-Math.exp(-x*N)*(v+(p+x*v)*N);else{const N=x*Math.sqrt(g*g-1);j=S=>{const T=Math.exp(-g*x*S),C=Math.min(N*S,300);return o-T*((p+g*x*v)*Math.sinh(C)+N*v*Math.cosh(C))/N}}const w={calculatedDuration:m&&h||null,next:N=>{const S=j(N);if(m)l.done=N>=h;else{let T=0;g<1&&(T=N===0?Qh(p):ute(j,N,S));const C=Math.abs(T)<=s,A=Math.abs(o-S)<=i;l.done=C&&A}return l.value=l.done?o:S,l},toString:()=>{const N=Math.min(hte(w),rT),S=cte(T=>w.next(N*T).value,N,30);return N+"ms "+S}};return w}function sF({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const h=e[0],f={done:!1,value:h},m=C=>l!==void 0&&C<l||c!==void 0&&C>c,p=C=>l===void 0?c:c===void 0||Math.abs(l-C)<Math.abs(c-C)?l:c;let g=n*t;const v=h+g,x=o===void 0?v:o(v);x!==v&&(g=x-h);const y=C=>-g*Math.exp(-C/s),j=C=>x+y(C),w=C=>{const A=y(C),R=j(C);f.done=Math.abs(A)<=d,f.value=f.done?x:R};let N,S;const T=C=>{m(f.value)&&(N=C,S=fte({keyframes:[f.value,p(f.value)],velocity:ute(j,C,f.value),damping:i,stiffness:a,restDelta:d,restSpeed:u}))};return T(0),{calculatedDuration:null,next:C=>{let A=!1;return!S&&N===void 0&&(A=!0,w(C),T(C)),N!==void 0&&C>=N?S.next(C-N):(!A&&w(C),f)}}}const x5e=tw(.42,0,1,1),v5e=tw(0,0,.58,1),mte=tw(.42,0,.58,1),y5e=e=>Array.isArray(e)&&typeof e[0]!="number",PD=e=>Array.isArray(e)&&typeof e[0]=="number",b5e={linear:ko,easeIn:x5e,easeInOut:mte,easeOut:v5e,circIn:jD,circInOut:Hee,circOut:zee,backIn:bD,backInOut:Uee,backOut:Vee,anticipate:qee},iF=e=>{if(PD(e)){Iee(e.length===4);const[t,n,s,i]=e;return tw(t,n,s,i)}else if(typeof e=="string")return b5e[e];return e},j5e=(e,t)=>n=>t(e(n)),Em=(...e)=>e.reduce(j5e),xi=(e,t,n)=>e+(t-e)*n;function Fk(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function w5e({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,a=0,o=0;if(!t)i=a=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=Fk(c,l,e+1/3),a=Fk(c,l,e),o=Fk(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:s}}function k5(e,t){return n=>n>0?t:e}const $k=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},N5e=[J3,Zp,qx],S5e=e=>N5e.find(t=>t.test(e));function aF(e){const t=S5e(e);if(!t)return!1;let n=t.parse(e);return t===qx&&(n=w5e(n)),n}const oF=(e,t)=>{const n=aF(e),s=aF(t);if(!n||!s)return k5(e,t);const i={...n};return a=>(i.red=$k(n.red,s.red,a),i.green=$k(n.green,s.green,a),i.blue=$k(n.blue,s.blue,a),i.alpha=xi(n.alpha,s.alpha,a),Zp.transform(i))},nT=new Set(["none","hidden"]);function _5e(e,t){return nT.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function C5e(e,t){return n=>xi(e,t,n)}function TD(e){return typeof e=="number"?C5e:typeof e=="string"?wD(e)?k5:wo.test(e)?oF:P5e:Array.isArray(e)?pte:typeof e=="object"?wo.test(e)?oF:A5e:k5}function pte(e,t){const n=[...e],s=n.length,i=e.map((a,o)=>TD(a)(a,t[o]));return a=>{for(let o=0;o<s;o++)n[o]=i[o](a);return n}}function A5e(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=TD(e[i])(e[i],t[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function k5e(e,t){var n;const s=[],i={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],l=e.indexes[o][i[o]],c=(n=e.values[l])!==null&&n!==void 0?n:0;s[a]=c,i[o]++}return s}const P5e=(e,t)=>{const n=Km.createTransformer(t),s=T1(e),i=T1(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?nT.has(e)&&!i.values.length||nT.has(t)&&!s.values.length?_5e(e,t):Em(pte(k5e(s,i),i.values),n):k5(e,t)};function gte(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?xi(e,t,n):TD(e)(e,t)}function T5e(e,t,n){const s=[],i=n||gte,a=e.length-1;for(let o=0;o<a;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ko:t;l=Em(c,l)}s.push(l)}return s}function E5e(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const a=e.length;if(Iee(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=T5e(t,s,i),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const h=s0(e[u],e[u+1],d);return o[u](h)};return n?d=>c(uf(e[0],e[a-1],d)):c}function O5e(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=s0(0,t,s);e.push(xi(n,1,i))}}function R5e(e){const t=[0];return O5e(t,e.length-1),t}function D5e(e,t){return e.map(n=>n*t)}function M5e(e,t){return e.map(()=>t||mte).splice(0,e.length-1)}function P5({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=y5e(s)?s.map(iF):iF(s),a={done:!1,value:t[0]},o=D5e(n&&n.length===t.length?n:R5e(t),e),l=E5e(o,t,{ease:Array.isArray(i)?i:M5e(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const I5e=e=>{const t=({timestamp:n})=>e(n);return{start:()=>bs.update(t,!0),stop:()=>Wm(t),now:()=>so.isProcessing?so.timestamp:Zu.now()}},L5e={decay:sF,inertia:sF,tween:P5,keyframes:P5,spring:fte},F5e=e=>e/100;class ED extends lte{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:s,element:i,keyframes:a}=this.options,o=(i==null?void 0:i.KeyframeResolver)||ND,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(a,l,n,s,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=this.options,l=kD(n)?n:L5e[n]||P5;let c,d;l!==P5&&typeof t[0]!="number"&&(c=Em(F5e,gte(t[0],t[1])),t=[0,100]);const u=l({...this.options,keyframes:t});a==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=hte(u));const{calculatedDuration:h}=u,f=h+i,m=f*(s+1)-i;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:f,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:C}=this.options;return{done:!0,value:C[C.length-1]}}const{finalKeyframe:i,generator:a,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:h}=s;if(this.startTime===null)return a.next(0);const{delay:f,repeat:m,repeatType:p,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const x=this.currentTime-f*(this.speed>=0?1:-1),y=this.speed>=0?x<0:x>u;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let j=this.currentTime,w=a;if(m){const C=Math.min(this.currentTime,u)/h;let A=Math.floor(C),R=C%1;!R&&C>=1&&(R=1),R===1&&A--,A=Math.min(A,m+1),!!(A%2)&&(p==="reverse"?(R=1-R,g&&(R-=g/h)):p==="mirror"&&(w=o)),j=uf(0,1,R)*h}const N=y?{done:!1,value:c[0]}:w.next(j);l&&(N.value=l(N.value));let{done:S}=N;!y&&d!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return T&&i!==void 0&&(N.value=lC(c,this.options,i)),v&&v(N.value),T&&this.finish(),N}get duration(){const{resolved:t}=this;return t?Zh(t.calculatedDuration):0}get time(){return Zh(this.currentTime)}set time(t){t=Qh(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Zh(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=I5e,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const $5e=new Set(["opacity","clipPath","filter","transform"]);function OD(e){let t;return()=>(t===void 0&&(t=e()),t)}const B5e={linearEasing:void 0};function V5e(e,t){const n=OD(e);return()=>{var s;return(s=B5e[t])!==null&&s!==void 0?s:n()}}const T5=V5e(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function xte(e){return!!(typeof e=="function"&&T5()||!e||typeof e=="string"&&(e in sT||T5())||PD(e)||Array.isArray(e)&&e.every(xte))}const mb=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,sT={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:mb([0,.65,.55,1]),circOut:mb([.55,0,1,.45]),backIn:mb([.31,.01,.66,-.59]),backOut:mb([.33,1.53,.69,.99])};function vte(e,t){if(e)return typeof e=="function"&&T5()?cte(e,t):PD(e)?mb(e):Array.isArray(e)?e.map(n=>vte(n,t)||sT.easeOut):sT[e]}function U5e(e,t,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:n};c&&(d.offset=c);const u=vte(l,i);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:s,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function lF(e,t){e.timeline=t,e.onfinish=null}const q5e=OD(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),E5=10,z5e=2e4;function H5e(e){return kD(e.type)||e.type==="spring"||!xte(e.ease)}function W5e(e,t){const n=new ED({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const i=[];let a=0;for(;!s.done&&a<z5e;)s=n.sample(a),i.push(s.value),a+=E5;return{times:void 0,keyframes:i,duration:a-E5,ease:"linear"}}const yte={anticipate:qee,backInOut:Uee,circInOut:Hee};function K5e(e){return e in yte}class cF extends lte{constructor(t){super(t);const{name:n,motionValue:s,element:i,keyframes:a}=this.options;this.resolver=new ote(a,(o,l)=>this.onKeyframesResolved(o,l),n,s,i),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:i=300,times:a,ease:o,type:l,motionValue:c,name:d,startTime:u}=this.options;if(!(!((s=c.owner)===null||s===void 0)&&s.current))return!1;if(typeof o=="string"&&T5()&&K5e(o)&&(o=yte[o]),H5e(this.options)){const{onComplete:f,onUpdate:m,motionValue:p,element:g,...v}=this.options,x=W5e(t,v);t=x.keyframes,t.length===1&&(t[1]=t[0]),i=x.duration,a=x.times,o=x.ease,l="keyframes"}const h=U5e(c.owner.current,d,t,{...this.options,duration:i,times:a,ease:o});return h.startTime=u??this.calcStartTime(),this.pendingTimeline?(lF(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:f}=this.options;c.set(lC(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:i,times:a,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return Zh(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return Zh(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=Qh(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return ko;const{animation:s}=n;lF(s,t)}return ko}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:i,type:a,ease:o,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:h,element:f,...m}=this.options,p=new ED({...m,keyframes:s,duration:i,type:a,ease:o,times:l,isGenerator:!0}),g=Qh(this.time);d.setWithVelocity(p.sample(g-E5).value,p.sample(g).value,E5)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:i,repeatType:a,damping:o,type:l}=t;return q5e()&&s&&$5e.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!i&&a!=="mirror"&&o!==0&&l!=="inertia"}}const G5e=OD(()=>window.ScrollTimeline!==void 0);class Y5e{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(i=>G5e()&&i.attachTimeline?i.attachTimeline(t):n(i));return()=>{s.forEach((i,a)=>{i&&i(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function X5e({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const RD=(e,t,n,s={},i,a)=>o=>{const l=yD(s,e)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-Qh(c);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};X5e(l)||(u={...u,...bNe(e,u)}),u.duration&&(u.duration=Qh(u.duration)),u.repeatDelay&&(u.repeatDelay=Qh(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(h=!0)),h&&!a&&t.get()!==void 0){const f=lC(u.keyframes,l);if(f!==void 0)return bs.update(()=>{u.onUpdate(f),u.onComplete()}),new Y5e([])}return!a&&cF.supports(u)?new cF(u):new ED(u)},Q5e=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Z5e=e=>X3(e)?e[e.length-1]||0:e;function DD(e,t){e.indexOf(t)===-1&&e.push(t)}function MD(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ID{constructor(){this.subscriptions=[]}add(t){return DD(this.subscriptions,t),()=>MD(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const dF=30,J5e=e=>!isNaN(parseFloat(e));class eSe{constructor(t,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,i=!0)=>{const a=Zu.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Zu.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=J5e(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ID);const s=this.events[t].add(n);return t==="change"?()=>{s(),bs.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zu.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dF)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dF);return dte(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function E1(e,t){return new eSe(e,t)}function tSe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,E1(n))}function rSe(e,t){const n=oC(e,t);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const o in a){const l=Z5e(a[o]);tSe(e,o,l)}}const LD=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nSe="framerAppearId",bte="data-"+LD(nSe);function jte(e){return e.props[bte]}const Ao=e=>!!(e&&e.getVelocity);function sSe(e){return!!(Ao(e)&&e.add)}function iT(e,t){const n=e.getValue("willChange");if(sSe(n))return n.add(t)}function iSe({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function wte(e,t,{delay:n=0,transitionOverride:s,type:i}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(o=s);const d=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const h in c){const f=e.getValue(h,(a=e.latestValues[h])!==null&&a!==void 0?a:null),m=c[h];if(m===void 0||u&&iSe(u,h))continue;const p={delay:n,...yD(o||{},h)};let g=!1;if(window.MotionHandoffAnimation){const x=jte(e);if(x){const y=window.MotionHandoffAnimation(x,h,bs);y!==null&&(p.startTime=y,g=!0)}}iT(e,h),f.start(RD(h,f,m,e.shouldReduceMotion&&Zg.has(h)?{type:!1}:p,e,g));const v=f.animation;v&&d.push(v)}return l&&Promise.all(d).then(()=>{bs.update(()=>{l&&rSe(e,l)})}),d}function aT(e,t,n={}){var s;const i=oC(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(a=n.transitionOverride);const o=i?()=>Promise.all(wte(e,i,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=a;return aSe(e,t,u+d,h,f,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[d,u]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>u())}else return Promise.all([o(),l(n.delay)])}function aSe(e,t,n=0,s=0,i=1,a){const o=[],l=(e.variantChildren.size-1)*s,c=i===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(e.variantChildren).sort(oSe).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(aT(d,t,{...a,delay:n+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function oSe(e,t){return e.sortNodePosition(t)}function lSe(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>aT(e,a,n));s=Promise.all(i)}else if(typeof t=="string")s=aT(e,t,n);else{const i=typeof t=="function"?oC(e,t,n.custom):t;s=Promise.all(wte(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const cSe=vD.length;function Nte(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Nte(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<cSe;n++){const s=vD[n],i=e.props[s];(k1(i)||i===!1)&&(t[s]=i)}return t}const dSe=[...xD].reverse(),uSe=xD.length;function hSe(e){return t=>Promise.all(t.map(({animation:n,options:s})=>lSe(e,n,s)))}function fSe(e){let t=hSe(e),n=uF(),s=!0;const i=c=>(d,u)=>{var h;const f=oC(e,u,c==="exit"?(h=e.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(f){const{transition:m,transitionEnd:p,...g}=f;d={...d,...g,...p}}return d};function a(c){t=c(e)}function o(c){const{props:d}=e,u=Nte(e.parent)||{},h=[],f=new Set;let m={},p=1/0;for(let v=0;v<uSe;v++){const x=dSe[v],y=n[x],j=d[x]!==void 0?d[x]:u[x],w=k1(j),N=x===c?y.isActive:null;N===!1&&(p=v);let S=j===u[x]&&j!==d[x]&&w;if(S&&s&&e.manuallyAnimateOnMount&&(S=!1),y.protectedKeys={...m},!y.isActive&&N===null||!j&&!y.prevProp||aC(j)||typeof j=="boolean")continue;const T=mSe(y.prevProp,j);let C=T||x===c&&y.isActive&&!S&&w||v>p&&w,A=!1;const R=Array.isArray(j)?j:[j];let k=R.reduce(i(x),{});N===!1&&(k={});const{prevResolvedValues:O={}}=y,$={...O,...k},D=L=>{C=!0,f.has(L)&&(A=!0,f.delete(L)),y.needsAnimating[L]=!0;const V=e.getValue(L);V&&(V.liveStyle=!1)};for(const L in $){const V=k[L],P=O[L];if(m.hasOwnProperty(L))continue;let z=!1;X3(V)&&X3(P)?z=!Mee(V,P):z=V!==P,z?V!=null?D(L):f.add(L):V!==void 0&&f.has(L)?D(L):y.protectedKeys[L]=!0}y.prevProp=j,y.prevResolvedValues=k,y.isActive&&(m={...m,...k}),s&&e.blockInitialAnimation&&(C=!1),C&&(!(S&&T)||A)&&h.push(...R.map(L=>({animation:L,options:{type:x}})))}if(f.size){const v={};f.forEach(x=>{const y=e.getBaseTarget(x),j=e.getValue(x);j&&(j.liveStyle=!0),v[x]=y??null}),h.push({animation:v})}let g=!!h.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(g=!1),s=!1,g?t(h):Promise.resolve()}function l(c,d){var u;if(n[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(f=>{var m;return(m=f.animationState)===null||m===void 0?void 0:m.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=uF(),s=!0}}}function mSe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Mee(t,e):!1}function Sp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uF(){return{animate:Sp(!0),whileInView:Sp(),whileHover:Sp(),whileTap:Sp(),whileDrag:Sp(),whileFocus:Sp(),exit:Sp()}}class ip{constructor(t){this.isMounted=!1,this.node=t}update(){}}class pSe extends ip{constructor(t){super(t),t.animationState||(t.animationState=fSe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();aC(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let gSe=0;class xSe extends ip{constructor(){super(...arguments),this.id=gSe++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const vSe={animation:{Feature:pSe},exit:{Feature:xSe}};function ySe(e,t,n){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let i=document;const a=(s=void 0)!==null&&s!==void 0?s:i.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const Rd={x:!1,y:!1};function Ste(){return Rd.x||Rd.y}function hF(e){return t=>{t.pointerType==="touch"||Ste()||e(t)}}function bSe(e,t,n={}){const s=new AbortController,i={passive:!0,...n,signal:s.signal},a=hF(o=>{const{target:l}=o,c=t(o);if(!c||!l)return;const d=hF(u=>{c(u),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,i)});return ySe(e).forEach(o=>{o.addEventListener("pointerenter",a,i)}),()=>s.abort()}function jSe(e){return e==="x"||e==="y"?Rd[e]?null:(Rd[e]=!0,()=>{Rd[e]=!1}):Rd.x||Rd.y?null:(Rd.x=Rd.y=!0,()=>{Rd.x=Rd.y=!1})}const _te=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function nw(e){return{point:{x:e.pageX,y:e.pageY}}}const wSe=e=>t=>_te(t)&&e(t,nw(t));function Hh(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function Om(e,t,n,s){return Hh(e,t,wSe(n),s)}const fF=(e,t)=>Math.abs(e-t);function NSe(e,t){const n=fF(e.x,t.x),s=fF(e.y,t.y);return Math.sqrt(n**2+s**2)}class Cte{constructor(t,n,{transformPagePoint:s,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Vk(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=NSe(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:p}=h,{timestamp:g}=so;this.history.push({...p,timestamp:g});const{onStart:v,onMove:x}=this.handlers;f||(v&&v(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Bk(f,this.transformPagePoint),bs.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:p,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Vk(h.type==="pointercancel"?this.lastMoveEventInfo:Bk(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,v),p&&p(h,v)},!_te(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.contextWindow=i||window;const o=nw(t),l=Bk(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=so;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=n;u&&u(t,Vk(l,this.history)),this.removeListeners=Em(Om(this.contextWindow,"pointermove",this.handlePointerMove),Om(this.contextWindow,"pointerup",this.handlePointerUp),Om(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Wm(this.updatePoint)}}function Bk(e,t){return t?{point:t(e.point)}:e}function mF(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Vk({point:e},t){return{point:e,delta:mF(e,Ate(t)),offset:mF(e,SSe(t)),velocity:_Se(t,.1)}}function SSe(e){return e[0]}function Ate(e){return e[e.length-1]}function _Se(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=Ate(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Qh(t)));)n--;if(!s)return{x:0,y:0};const a=Zh(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function zx(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const kte=1e-4,CSe=1-kte,ASe=1+kte,Pte=.01,kSe=0-Pte,PSe=0+Pte;function jc(e){return e.max-e.min}function TSe(e,t,n){return Math.abs(e-t)<=n}function pF(e,t,n,s=.5){e.origin=s,e.originPoint=xi(t.min,t.max,e.origin),e.scale=jc(n)/jc(t),e.translate=xi(n.min,n.max,e.origin)-e.originPoint,(e.scale>=CSe&&e.scale<=ASe||isNaN(e.scale))&&(e.scale=1),(e.translate>=kSe&&e.translate<=PSe||isNaN(e.translate))&&(e.translate=0)}function Lb(e,t,n,s){pF(e.x,t.x,n.x,s?s.originX:void 0),pF(e.y,t.y,n.y,s?s.originY:void 0)}function gF(e,t,n){e.min=n.min+t.min,e.max=e.min+jc(t)}function ESe(e,t,n){gF(e.x,t.x,n.x),gF(e.y,t.y,n.y)}function xF(e,t,n){e.min=t.min-n.min,e.max=e.min+jc(t)}function Fb(e,t,n){xF(e.x,t.x,n.x),xF(e.y,t.y,n.y)}function OSe(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?xi(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?xi(n,e,s.max):Math.min(e,n)),e}function vF(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function RSe(e,{top:t,left:n,bottom:s,right:i}){return{x:vF(e.x,n,i),y:vF(e.y,t,s)}}function yF(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function DSe(e,t){return{x:yF(e.x,t.x),y:yF(e.y,t.y)}}function MSe(e,t){let n=.5;const s=jc(e),i=jc(t);return i>s?n=s0(t.min,t.max-s,e.min):s>i&&(n=s0(e.min,e.max-i,t.min)),uf(0,1,n)}function ISe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const oT=.35;function LSe(e=oT){return e===!1?e=0:e===!0&&(e=oT),{x:bF(e,"left","right"),y:bF(e,"top","bottom")}}function bF(e,t,n){return{min:jF(e,t),max:jF(e,n)}}function jF(e,t){return typeof e=="number"?e:e[t]||0}const wF=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hx=()=>({x:wF(),y:wF()}),NF=()=>({min:0,max:0}),Vi=()=>({x:NF(),y:NF()});function Vc(e){return[e("x"),e("y")]}function Tte({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function FSe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $Se(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Uk(e){return e===void 0||e===1}function lT({scale:e,scaleX:t,scaleY:n}){return!Uk(e)||!Uk(t)||!Uk(n)}function Lp(e){return lT(e)||Ete(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ete(e){return SF(e.x)||SF(e.y)}function SF(e){return e&&e!=="0%"}function O5(e,t,n){const s=e-n,i=t*s;return n+i}function _F(e,t,n,s,i){return i!==void 0&&(e=O5(e,i,s)),O5(e,n,s)+t}function cT(e,t=0,n=1,s,i){e.min=_F(e.min,t,n,s,i),e.max=_F(e.max,t,n,s,i)}function Ote(e,{x:t,y:n}){cT(e.x,t.translate,t.scale,t.originPoint),cT(e.y,n.translate,n.scale,n.originPoint)}const CF=.999999999999,AF=1.0000000000001;function BSe(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Kx(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Ote(e,o)),s&&Lp(a.latestValues)&&Kx(e,a.latestValues))}t.x<AF&&t.x>CF&&(t.x=1),t.y<AF&&t.y>CF&&(t.y=1)}function Wx(e,t){e.min=e.min+t,e.max=e.max+t}function kF(e,t,n,s,i=.5){const a=xi(e.min,e.max,i);cT(e,t,n,a,s)}function Kx(e,t){kF(e.x,t.x,t.scaleX,t.scale,t.originX),kF(e.y,t.y,t.scaleY,t.scale,t.originY)}function Rte(e,t){return Tte($Se(e.getBoundingClientRect(),t))}function VSe(e,t,n){const s=Rte(e,n),{scroll:i}=t;return i&&(Wx(s.x,i.offset.x),Wx(s.y,i.offset.y)),s}const Dte=({current:e})=>e?e.ownerDocument.defaultView:null,USe=new WeakMap;class qSe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Vi(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nw(u).point)},a=(u,h)=>{const{drag:f,dragPropagation:m,onDragStart:p}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jSe(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Vc(v=>{let x=this.getAxisMotionValue(v).get()||0;if(Qu.test(x)){const{projection:y}=this.visualElement;if(y&&y.layout){const j=y.layout.layoutBox[v];j&&(x=jc(j)*(parseFloat(x)/100))}}this.originPoint[v]=x}),p&&bs.postRender(()=>p(u,h)),iT(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(u,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:p,onDrag:g}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=h;if(m&&this.currentDirection===null){this.currentDirection=zSe(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),g&&g(u,h)},l=(u,h)=>this.stop(u,h),c=()=>Vc(u=>{var h;return this.getAnimationState(u)==="paused"&&((h=this.getAxisMotionValue(u).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Cte(t,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:Dte(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&bs.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!b2(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=OSe(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&zx(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=RSe(i.layoutBox,n):this.constraints=!1,this.elastic=LSe(s),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Vc(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ISe(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!zx(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=VSe(s,i.root,this.visualElement.getTransformPagePoint());let o=DSe(i.layout.layoutBox,a);if(n){const l=n(FSe(o));this.hasMutatedConstraints=!!l,l&&(o=Tte(l))}return o}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=Vc(u=>{if(!b2(u,n,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,p={type:"inertia",velocity:s?t[u]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(u,p)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return iT(this.visualElement,t),s.start(RD(t,s,0,n,this.visualElement,!1))}stopAnimation(){Vc(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Vc(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Vc(n=>{const{drag:s}=this.getProps();if(!b2(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(t[n]-xi(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!zx(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Vc(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=MSe({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Vc(o=>{if(!b2(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(xi(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;USe.set(this.visualElement,this);const t=this.visualElement.current,n=Om(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();zx(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),bs.read(s);const o=Hh(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(Vc(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=oT,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function b2(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function zSe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class HSe extends ip{constructor(t){super(t),this.removeGroupControls=ko,this.removeListeners=ko,this.controls=new qSe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ko}unmount(){this.removeGroupControls(),this.removeListeners()}}const PF=e=>(t,n)=>{e&&bs.postRender(()=>e(t,n))};class WSe extends ip{constructor(){super(...arguments),this.removePointerDownListener=ko}onPointerDown(t){this.session=new Cte(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Dte(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:PF(t),onStart:PF(n),onMove:s,onEnd:(a,o)=>{delete this.session,i&&bs.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=Om(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const cC=b.createContext(null);function KSe(){const e=b.useContext(cC);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,i=b.useId();b.useEffect(()=>s(i),[]);const a=b.useCallback(()=>n&&n(i),[i,n]);return!t&&n?[!1,a]:[!0]}const FD=b.createContext({}),Mte=b.createContext({}),SN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function TF(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Dy={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Br.test(e))e=parseFloat(e);else return e;const n=TF(e,t.target.x),s=TF(e,t.target.y);return`${n}% ${s}%`}},GSe={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=Km.parse(e);if(i.length>5)return s;const a=Km.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const d=xi(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),a(i)}},R5={};function YSe(e){Object.assign(R5,e)}const{schedule:$D}=Lee(queueMicrotask,!1);class XSe extends b.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;YSe(QSe),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),SN.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,o=s.projection;return o&&(o.isPresent=a,i||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||bs.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),$D.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ite(e){const[t,n]=KSe(),s=b.useContext(FD);return r.jsx(XSe,{...e,layoutGroup:s,switchLayoutGroup:b.useContext(Mte),isPresent:t,safeToRemove:n})}const QSe={borderRadius:{...Dy,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Dy,borderTopRightRadius:Dy,borderBottomLeftRadius:Dy,borderBottomRightRadius:Dy,boxShadow:GSe},Lte=["TopLeft","TopRight","BottomLeft","BottomRight"],ZSe=Lte.length,EF=e=>typeof e=="string"?parseFloat(e):e,OF=e=>typeof e=="number"||Br.test(e);function JSe(e,t,n,s,i,a){i?(e.opacity=xi(0,n.opacity!==void 0?n.opacity:1,e_e(s)),e.opacityExit=xi(t.opacity!==void 0?t.opacity:1,0,t_e(s))):a&&(e.opacity=xi(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<ZSe;o++){const l=`border${Lte[o]}Radius`;let c=RF(t,l),d=RF(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||OF(c)===OF(d)?(e[l]=Math.max(xi(EF(c),EF(d),s),0),(Qu.test(d)||Qu.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=xi(t.rotate||0,n.rotate||0,s))}function RF(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const e_e=Fte(0,.5,zee),t_e=Fte(.5,.95,ko);function Fte(e,t,n){return s=>s<e?0:s>t?1:n(s0(e,t,s))}function DF(e,t){e.min=t.min,e.max=t.max}function Lc(e,t){DF(e.x,t.x),DF(e.y,t.y)}function MF(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function IF(e,t,n,s,i){return e-=t,e=O5(e,1/n,s),i!==void 0&&(e=O5(e,1/i,s)),e}function r_e(e,t=0,n=1,s=.5,i,a=e,o=e){if(Qu.test(t)&&(t=parseFloat(t),t=xi(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=xi(a.min,a.max,s);e===a&&(l-=t),e.min=IF(e.min,t,n,l,i),e.max=IF(e.max,t,n,l,i)}function LF(e,t,[n,s,i],a,o){r_e(e,t[n],t[s],t[i],t.scale,a,o)}const n_e=["x","scaleX","originX"],s_e=["y","scaleY","originY"];function FF(e,t,n,s){LF(e.x,t,n_e,n?n.x:void 0,s?s.x:void 0),LF(e.y,t,s_e,n?n.y:void 0,s?s.y:void 0)}function $F(e){return e.translate===0&&e.scale===1}function $te(e){return $F(e.x)&&$F(e.y)}function BF(e,t){return e.min===t.min&&e.max===t.max}function i_e(e,t){return BF(e.x,t.x)&&BF(e.y,t.y)}function VF(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Bte(e,t){return VF(e.x,t.x)&&VF(e.y,t.y)}function UF(e){return jc(e.x)/jc(e.y)}function qF(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class a_e{constructor(){this.members=[]}add(t){DD(this.members,t),t.scheduleRender()}remove(t){if(MD(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function o_e(e,t,n){let s="";const i=e.x.translate/t.x,a=e.y.translate/t.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(s=`translate3d(${i}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:u,rotateX:h,rotateY:f,skewX:m,skewY:p}=n;d&&(s=`perspective(${d}px) ${s}`),u&&(s+=`rotate(${u}deg) `),h&&(s+=`rotateX(${h}deg) `),f&&(s+=`rotateY(${f}deg) `),m&&(s+=`skewX(${m}deg) `),p&&(s+=`skewY(${p}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const l_e=(e,t)=>e.depth-t.depth;class c_e{constructor(){this.children=[],this.isDirty=!1}add(t){DD(this.children,t),this.isDirty=!0}remove(t){MD(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(l_e),this.isDirty=!1,this.children.forEach(t)}}function _N(e){const t=Ao(e)?e.get():e;return Q5e(t)?t.toValue():t}function d_e(e,t){const n=Zu.now(),s=({timestamp:i})=>{const a=i-n;a>=t&&(Wm(s),e(a-t))};return bs.read(s,!0),()=>Wm(s)}function u_e(e){return e instanceof SVGElement&&e.tagName!=="svg"}function h_e(e,t,n){const s=Ao(e)?e:E1(e);return s.start(RD("",s,t,n)),s.animation}const Fp={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},pb=typeof window<"u"&&window.MotionDebug!==void 0,qk=["","X","Y","Z"],f_e={visibility:"hidden"},zF=1e3;let m_e=0;function zk(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function Vte(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=jte(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",bs,!(i||a))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&Vte(s)}function Ute({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},l=t==null?void 0:t()){this.id=m_e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pb&&(Fp.totalNodes=Fp.resolvedTargetDeltas=Fp.recalculatedProjection=0),this.nodes.forEach(x_e),this.nodes.forEach(w_e),this.nodes.forEach(N_e),this.nodes.forEach(v_e),pb&&window.MotionDebug.record(Fp)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new c_e)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ID),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=u_e(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let h;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=d_e(f,250),SN.hasAnimatedSinceResize&&(SN.hasAnimatedSinceResize=!1,this.nodes.forEach(WF))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||k_e,{onLayoutAnimationStart:v,onLayoutAnimationComplete:x}=u.getProps(),y=!this.targetLayout||!Bte(this.targetLayout,p)||m,j=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,j);const w={...yD(g,"layout"),onPlay:v,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||WF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Wm(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S_e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vte(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(HF);return}this.isUpdating||this.nodes.forEach(b_e),this.isUpdating=!1,this.nodes.forEach(j_e),this.nodes.forEach(p_e),this.nodes.forEach(g_e),this.clearAllSnapshots();const l=Zu.now();so.delta=uf(0,1e3/60,l-so.timestamp),so.timestamp=l,so.isProcessing=!0,Mk.update.process(so),Mk.preRender.process(so),Mk.render.process(so),so.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,$D.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(y_e),this.sharedNodes.forEach(__e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,bs.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){bs.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Vi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!$te(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||Lp(this.latestValues)||u)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),P_e(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return Vi();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(T_e))){const{scroll:u}=this.root;u&&(Wx(c.x,u.offset.x),Wx(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=Vi();if(Lc(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Lc(c,o),Wx(c.x,h.offset.x),Wx(c.y,h.offset.y))}return c}applyTransform(o,l=!1){const c=Vi();Lc(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Kx(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Lp(u.latestValues)&&Kx(c,u.latestValues)}return Lp(this.latestValues)&&Kx(c,this.latestValues),c}removeTransform(o){const l=Vi();Lc(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Lp(d.latestValues))continue;lT(d.latestValues)&&d.updateSnapshot();const u=Vi(),h=d.measurePageBox();Lc(u,h),FF(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return Lp(this.latestValues)&&FF(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==so.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=so.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vi(),this.relativeTargetOrigin=Vi(),Fb(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Lc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Vi(),this.targetWithTransforms=Vi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ESe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Lc(this.target,this.layout.layoutBox),Ote(this.target,this.targetDelta)):Lc(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Vi(),this.relativeTargetOrigin=Vi(),Fb(this.relativeTargetOrigin,this.target,m.target),Lc(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pb&&Fp.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||lT(this.parent.latestValues)||Ete(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===so.timestamp&&(d=!1),d)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Lc(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;BSe(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Vi());const{target:p}=l;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MF(this.prevProjectionDelta.x,this.projectionDelta.x),MF(this.prevProjectionDelta.y,this.projectionDelta.y)),Lb(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!qF(this.projectionDelta.x,this.prevProjectionDelta.x)||!qF(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),pb&&Fp.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Hx(),this.projectionDelta=Hx(),this.projectionDeltaWithTransform=Hx()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},h=Hx();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=Vi(),m=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=m!==p,v=this.getStack(),x=!v||v.members.length<=1,y=!!(g&&!x&&this.options.crossfade===!0&&!this.path.some(A_e));this.animationProgress=0;let j;this.mixTargetDelta=w=>{const N=w/1e3;KF(h.x,o.x,N),KF(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Fb(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),C_e(this.relativeTarget,this.relativeTargetOrigin,f,N),j&&i_e(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Vi()),Lc(j,this.relativeTarget)),g&&(this.animationValues=u,JSe(u,d,this.latestValues,N,y,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Wm(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=bs.update(()=>{SN.hasAnimatedSinceResize=!0,this.currentAnimation=h_e(0,zF,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zF),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&qte(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Vi();const h=jc(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=jc(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Lc(l,c),Kx(l,u),Lb(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new a_e),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&zk("z",o,d,this.animationValues);for(let u=0;u<qk.length;u++)zk(`rotate${qk[u]}`,o,d,this.animationValues),zk(`skew${qk[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return f_e;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=_N(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=_N(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Lp(this.latestValues)&&(g.transform=u?u({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),d.transform=o_e(this.projectionDeltaWithTransform,this.treeScale,f),u&&(d.transform=u(f,d.transform));const{x:m,y:p}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${p.origin*100}% 0`,h.animationValues?d.opacity=h===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:d.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in R5){if(f[g]===void 0)continue;const{correct:v,applyTo:x}=R5[g],y=d.transform==="none"?f[g]:v(f[g],h);if(x){const j=x.length;for(let w=0;w<j;w++)d[x[w]]=y}else d[g]=y}return this.options.layoutId&&(d.pointerEvents=h===this?_N(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(HF),this.root.sharedNodes.clear()}}}function p_e(e){e.updateLayout()}function g_e(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:a}=e.options,o=n.source!==e.layout.source;a==="size"?Vc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=jc(f);f.min=s[h].min,f.max=f.min+m}):qte(a,n.layoutBox,s)&&Vc(h=>{const f=o?n.measuredBox[h]:n.layoutBox[h],m=jc(s[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=Hx();Lb(l,s,n.layoutBox);const c=Hx();o?Lb(c,e.applyTransform(i,!0),n.measuredBox):Lb(c,s,n.layoutBox);const d=!$te(l);let u=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const p=Vi();Fb(p,n.layoutBox,f.layoutBox);const g=Vi();Fb(g,s,m.layoutBox),Bte(p,g)||(u=!0),h.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function x_e(e){pb&&Fp.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function v_e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function y_e(e){e.clearSnapshot()}function HF(e){e.clearMeasurements()}function b_e(e){e.isLayoutDirty=!1}function j_e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function WF(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function w_e(e){e.resolveTargetDelta()}function N_e(e){e.calcProjection()}function S_e(e){e.resetSkewAndRotation()}function __e(e){e.removeLeadSnapshot()}function KF(e,t,n){e.translate=xi(t.translate,0,n),e.scale=xi(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function GF(e,t,n,s){e.min=xi(t.min,n.min,s),e.max=xi(t.max,n.max,s)}function C_e(e,t,n,s){GF(e.x,t.x,n.x,s),GF(e.y,t.y,n.y,s)}function A_e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const k_e={duration:.45,ease:[.4,0,.1,1]},YF=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XF=YF("applewebkit/")&&!YF("chrome/")?Math.round:ko;function QF(e){e.min=XF(e.min),e.max=XF(e.max)}function P_e(e){QF(e.x),QF(e.y)}function qte(e,t,n){return e==="position"||e==="preserve-aspect"&&!TSe(UF(t),UF(n),.2)}function T_e(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const E_e=Ute({attachResizeListener:(e,t)=>Hh(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hk={current:void 0},zte=Ute({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Hk.current){const e=new E_e({});e.mount(window),e.setOptions({layoutScroll:!0}),Hk.current=e}return Hk.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),O_e={pan:{Feature:WSe},drag:{Feature:HSe,ProjectionNode:zte,MeasureLayout:Ite}};function ZF(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n);const i=s[n?"onHoverStart":"onHoverEnd"];i&&bs.postRender(()=>i(t,nw(t)))}class R_e extends ip{mount(){const{current:t,props:n}=this.node;t&&(this.unmount=bSe(t,s=>(ZF(this.node,s,!0),i=>ZF(this.node,i,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class D_e extends ip{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Em(Hh(this.node.current,"focus",()=>this.onFocus()),Hh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Hte=(e,t)=>t?e===t?!0:Hte(e,t.parentElement):!1;function Wk(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,nw(n))}class M_e extends ip{constructor(){super(...arguments),this.removeStartListeners=ko,this.removeEndListeners=ko,this.removeAccessibleListeners=ko,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),a=Om(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:h}=this.node.getProps(),f=!h&&!Hte(this.node.current,l.target)?u:d;f&&bs.update(()=>f(l,c))},{passive:!(s.onTap||s.onPointerUp)}),o=Om(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Em(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Wk("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&bs.postRender(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Hh(this.node.current,"keyup",o),Wk("down",(l,c)=>{this.startPress(l,c)})},n=Hh(this.node.current,"keydown",t),s=()=>{this.isPressing&&Wk("cancel",(a,o)=>this.cancelPress(a,o))},i=Hh(this.node.current,"blur",s);this.removeAccessibleListeners=Em(n,i)}}startPress(t,n){this.isPressing=!0;const{onTapStart:s,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&bs.postRender(()=>s(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ste()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&bs.postRender(()=>s(t,n))}mount(){const t=this.node.getProps(),n=Om(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Hh(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Em(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const dT=new WeakMap,Kk=new WeakMap,I_e=e=>{const t=dT.get(e.target);t&&t(e)},L_e=e=>{e.forEach(I_e)};function F_e({root:e,...t}){const n=e||document;Kk.has(n)||Kk.set(n,{});const s=Kk.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(L_e,{root:e,...t})),s[i]}function $_e(e,t,n){const s=F_e(t);return dT.set(e,n),s.observe(e),()=>{dT.delete(e),s.unobserve(e)}}const B_e={some:0,all:1};class V_e extends ip{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:B_e[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=d?u:h;f&&f(c)};return $_e(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(U_e(t,n))&&this.startObserver()}unmount(){}}function U_e({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const q_e={inView:{Feature:V_e},tap:{Feature:M_e},focus:{Feature:D_e},hover:{Feature:R_e}},z_e={layout:{ProjectionNode:zte,MeasureLayout:Ite}},BD=b.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),dC=b.createContext({}),VD=typeof window<"u",Wte=VD?b.useLayoutEffect:b.useEffect,Kte=b.createContext({strict:!1});function H_e(e,t,n,s,i){var a,o;const{visualElement:l}=b.useContext(dC),c=b.useContext(Kte),d=b.useContext(cC),u=b.useContext(BD).reducedMotion,h=b.useRef();s=s||c.renderer,!h.current&&s&&(h.current=s(e,{visualState:t,parent:l,props:n,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const f=h.current,m=b.useContext(Mte);f&&!f.projection&&i&&(f.type==="html"||f.type==="svg")&&W_e(h.current,n,i,m);const p=b.useRef(!1);b.useInsertionEffect(()=>{f&&p.current&&f.update(n,d)});const g=n[bte],v=b.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,g)));return Wte(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),$D.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),b.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,g)}),v.current=!1))}),f}function W_e(e,t,n,s){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Gte(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&zx(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function Gte(e){if(e)return e.options.allowProjection!==!1?e.projection:Gte(e.parent)}function K_e(e,t,n){return b.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):zx(n)&&(n.current=s))},[t])}function uC(e){return aC(e.animate)||vD.some(t=>k1(e[t]))}function Yte(e){return!!(uC(e)||e.variants)}function G_e(e,t){if(uC(e)){const{initial:n,animate:s}=e;return{initial:n===!1||k1(n)?n:void 0,animate:k1(s)?s:void 0}}return e.inherit!==!1?t:{}}function Y_e(e){const{initial:t,animate:n}=G_e(e,b.useContext(dC));return b.useMemo(()=>({initial:t,animate:n}),[JF(t),JF(n)])}function JF(e){return Array.isArray(e)?e.join(" "):e}const e7={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},i0={};for(const e in e7)i0[e]={isEnabled:t=>e7[e].some(n=>!!t[n])};function X_e(e){for(const t in e)i0[t]={...i0[t],...e[t]}}const Q_e=Symbol.for("motionComponentSymbol");function Z_e({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:i}){e&&X_e(e);function a(l,c){let d;const u={...b.useContext(BD),...l,layoutId:J_e(l)},{isStatic:h}=u,f=Y_e(l),m=s(l,h);if(!h&&VD){eCe();const p=tCe(u);d=p.MeasureLayout,f.visualElement=H_e(i,m,u,t,p.ProjectionNode)}return r.jsxs(dC.Provider,{value:f,children:[d&&f.visualElement?r.jsx(d,{visualElement:f.visualElement,...u}):null,n(i,l,K_e(m,f.visualElement,c),m,h,f.visualElement)]})}const o=b.forwardRef(a);return o[Q_e]=i,o}function J_e({layoutId:e}){const t=b.useContext(FD).id;return t&&e!==void 0?t+"-"+e:e}function eCe(e,t){b.useContext(Kte).strict}function tCe(e){const{drag:t,layout:n}=i0;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const rCe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function UD(e){return typeof e!="string"||e.includes("-")?!1:!!(rCe.indexOf(e)>-1||/[A-Z]/u.test(e))}function Xte(e,{style:t,vars:n},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const a in n)e.style.setProperty(a,n[a])}const Qte=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Zte(e,t,n,s){Xte(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(Qte.has(i)?i:LD(i),t.attrs[i])}function Jte(e,{layout:t,layoutId:n}){return Zg.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!R5[e]||e==="opacity")}function qD(e,t,n){var s;const{style:i}=e,a={};for(const o in i)(Ao(i[o])||t.style&&Ao(t.style[o])||Jte(o,e)||((s=n==null?void 0:n.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(a[o]=i[o]);return a}function ere(e,t,n){const s=qD(e,t,n);for(const i in e)if(Ao(e[i])||Ao(t[i])){const a=ew.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=e[i]}return s}function zD(e){const t=b.useRef(null);return t.current===null&&(t.current=e()),t.current}function nCe({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},s,i,a){const o={latestValues:sCe(s,i,a,e),renderState:t()};return n&&(o.mount=l=>n(s,l,o)),o}const tre=e=>(t,n)=>{const s=b.useContext(dC),i=b.useContext(cC),a=()=>nCe(e,t,s,i);return n?a():zD(a)};function sCe(e,t,n,s){const i={},a=s(e,{});for(const f in a)i[f]=_N(a[f]);let{initial:o,animate:l}=e;const c=uC(e),d=Yte(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?l:o;if(h&&typeof h!="boolean"&&!aC(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const p=gD(e,f[m]);if(p){const{transitionEnd:g,transition:v,...x}=p;for(const y in x){let j=x[y];if(Array.isArray(j)){const w=u?j.length-1:0;j=j[w]}j!==null&&(i[y]=j)}for(const y in g)i[y]=g[y]}}}return i}const HD=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),rre=()=>({...HD(),attrs:{}}),nre=(e,t)=>t&&typeof e=="number"?t.transform(e):e,iCe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},aCe=ew.length;function oCe(e,t,n){let s="",i=!0;for(let a=0;a<aCe;a++){const o=ew[a],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=nre(l,CD[o]);if(!c){i=!1;const u=iCe[o]||o;s+=`${u}(${d}) `}n&&(t[o]=d)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}function WD(e,t,n){const{style:s,vars:i,transformOrigin:a}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(Zg.has(c)){o=!0;continue}else if(Yee(c)){i[c]=d;continue}else{const u=nre(d,CD[c]);c.startsWith("origin")?(l=!0,a[c]=u):s[c]=u}}if(t.transform||(o||n?s.transform=oCe(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=a;s.transformOrigin=`${c} ${d} ${u}`}}function t7(e,t,n){return typeof e=="string"?e:Br.transform(t+n*e)}function lCe(e,t,n){const s=t7(t,e.x,e.width),i=t7(n,e.y,e.height);return`${s} ${i}`}const cCe={offset:"stroke-dashoffset",array:"stroke-dasharray"},dCe={offset:"strokeDashoffset",array:"strokeDasharray"};function uCe(e,t,n=1,s=0,i=!0){e.pathLength=1;const a=i?cCe:dCe;e[a.offset]=Br.transform(-s);const o=Br.transform(t),l=Br.transform(n);e[a.array]=`${o} ${l}`}function KD(e,{attrX:t,attrY:n,attrScale:s,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,h){if(WD(e,d,h),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:p}=e;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(i!==void 0||a!==void 0||m.transform)&&(m.transformOrigin=lCe(p,i!==void 0?i:.5,a!==void 0?a:.5)),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),o!==void 0&&uCe(f,o,l,c,!1)}const GD=e=>typeof e=="string"&&e.toLowerCase()==="svg",hCe={useVisualState:tre({scrapeMotionValuesFromProps:ere,createRenderState:rre,onMount:(e,t,{renderState:n,latestValues:s})=>{bs.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),bs.render(()=>{KD(n,s,GD(t.tagName),e.transformTemplate),Zte(t,n)})}})},fCe={useVisualState:tre({scrapeMotionValuesFromProps:qD,createRenderState:HD})};function sre(e,t,n){for(const s in t)!Ao(t[s])&&!Jte(s,n)&&(e[s]=t[s])}function mCe({transformTemplate:e},t){return b.useMemo(()=>{const n=HD();return WD(n,t,e),Object.assign({},n.vars,n.style)},[t])}function pCe(e,t){const n=e.style||{},s={};return sre(s,n,e),Object.assign(s,mCe(e,t)),s}function gCe(e,t){const n={},s=pCe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const xCe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function D5(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||xCe.has(e)}let ire=e=>!D5(e);function vCe(e){e&&(ire=t=>t.startsWith("on")?!D5(t):e(t))}try{vCe(require("@emotion/is-prop-valid").default)}catch{}function yCe(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(ire(i)||n===!0&&D5(i)||!t&&!D5(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}function bCe(e,t,n,s){const i=b.useMemo(()=>{const a=rre();return KD(a,t,GD(s),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};sre(a,e.style,e),i.style={...a,...i.style}}return i}function jCe(e=!1){return(n,s,i,{latestValues:a},o)=>{const c=(UD(n)?bCe:gCe)(s,a,o,n),d=yCe(s,typeof n=="string",e),u=n!==b.Fragment?{...d,...c,ref:i}:{},{children:h}=s,f=b.useMemo(()=>Ao(h)?h.get():h,[h]);return b.createElement(n,{...u,children:f})}}function wCe(e,t){return function(s,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...UD(s)?hCe:fCe,preloadedFeatures:e,useRender:jCe(i),createVisualElement:t,Component:s};return Z_e(o)}}const uT={current:null},are={current:!1};function NCe(){if(are.current=!0,!!VD)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>uT.current=e.matches;e.addListener(t),t()}else uT.current=!1}function SCe(e,t,n){for(const s in t){const i=t[s],a=n[s];if(Ao(i))e.addValue(s,i);else if(Ao(a))e.addValue(s,E1(i,{owner:e}));else if(a!==i)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(s);e.addValue(s,E1(o!==void 0?o:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const r7=new WeakMap,_Ce=[...Zee,wo,Km],CCe=e=>_Ce.find(Qee(e)),n7=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ACe{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ND,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Zu.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,bs.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=uC(n),this.isVariantNode=Yte(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&Ao(m)&&m.set(c[f],!1)}}mount(t){this.current=t,r7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),are.current||NCe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uT.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){r7.delete(this.current),this.projection&&this.projection.unmount(),Wm(this.notifyUpdate),Wm(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Zg.has(t),i=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&bs.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in i0){const n=i0[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Vi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<n7.length;s++){const i=n7[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=t[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=SCe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=E1(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(Kee(i)||Wee(i))?i=parseFloat(i):!CCe(i)&&Km.test(n)&&(i=ate(t,n)),this.setBaseTarget(t,Ao(i)?i.get():i)),Ao(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let i;if(typeof s=="string"||typeof s=="object"){const o=gD(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[t])}if(s&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!Ao(a)?a:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ID),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class ore extends ACe{constructor(){super(...arguments),this.KeyframeResolver=ote}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ao(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function kCe(e){return window.getComputedStyle(e)}class PCe extends ore{constructor(){super(...arguments),this.type="html",this.renderInstance=Xte}readValueFromInstance(t,n){if(Zg.has(n)){const s=AD(n);return s&&s.default||0}else{const s=kCe(t),i=(Yee(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Rte(t,n)}build(t,n,s){WD(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return qD(t,n,s)}}class TCe extends ore{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Vi}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Zg.has(n)){const s=AD(n);return s&&s.default||0}return n=Qte.has(n)?n:LD(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return ere(t,n,s)}build(t,n,s){KD(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,i){Zte(t,n,s,i)}mount(t){this.isSVGTag=GD(t.tagName),super.mount(t)}}const ECe=(e,t)=>UD(e)?new TCe(t):new PCe(t,{allowProjection:e!==b.Fragment}),OCe=wCe({...vSe,...q_e,...O_e,...z_e},ECe),s7=pNe(OCe);class RCe extends b.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function DCe({children:e,isPresent:t}){const n=b.useId(),s=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=b.useContext(BD);return b.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=i.current;if(t||!s.current||!o||!l)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),r.jsx(RCe,{isPresent:t,childRef:s,sizeRef:i,children:b.cloneElement(e,{ref:s})})}const MCe=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=zD(ICe),c=b.useId(),d=b.useCallback(h=>{l.set(h,!0);for(const f of l.values())if(!f)return;s&&s()},[l,s]),u=b.useMemo(()=>({id:c,initial:t,isPresent:n,custom:i,onExitComplete:d,register:h=>(l.set(h,!1),()=>l.delete(h))}),a?[Math.random(),d]:[n,d]);return b.useMemo(()=>{l.forEach((h,f)=>l.set(f,!1))},[n]),b.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(e=r.jsx(DCe,{isPresent:n,children:e})),r.jsx(cC.Provider,{value:u,children:e})};function ICe(){return new Map}const j2=e=>e.key||"";function i7(e){const t=[];return b.Children.forEach(e,n=>{b.isValidElement(n)&&t.push(n)}),t}const LCe=({children:e,exitBeforeEnter:t,custom:n,initial:s=!0,onExitComplete:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=b.useMemo(()=>i7(e),[e]),c=l.map(j2),d=b.useRef(!0),u=b.useRef(l),h=zD(()=>new Map),[f,m]=b.useState(l),[p,g]=b.useState(l);Wte(()=>{d.current=!1,u.current=l;for(let y=0;y<p.length;y++){const j=j2(p[y]);c.includes(j)?h.delete(j):h.get(j)!==!0&&h.set(j,!1)}},[p,c.length,c.join("-")]);const v=[];if(l!==f){let y=[...l];for(let j=0;j<p.length;j++){const w=p[j],N=j2(w);c.includes(N)||(y.splice(j,0,w),v.push(w))}o==="wait"&&v.length&&(y=v),g(i7(y)),m(l);return}const{forceRender:x}=b.useContext(FD);return r.jsx(r.Fragment,{children:p.map(y=>{const j=j2(y),w=l===p||c.includes(j),N=()=>{if(h.has(j))h.set(j,!0);else return;let S=!0;h.forEach(T=>{T||(S=!1)}),S&&(x==null||x(),g(u.current),i&&i())};return r.jsx(MCe,{isPresent:w,initial:!d.current||s?void 0:!1,custom:w?void 0:n,presenceAffectsLayout:a,mode:o,onExitComplete:w?void 0:N,children:y},j)})})};function FCe({className:e}){const[t,n]=b.useState(!1),[s,i]=b.useState(!1),[,a]=Dr();return b.useEffect(()=>{const o=setInterval(()=>{t||(i(!0),setTimeout(()=>i(!1),2500))},5e3),l=setTimeout(()=>{t||i(!0),setTimeout(()=>i(!1),2500)},2e3);return()=>{clearInterval(o),clearTimeout(l)}},[t]),r.jsxs("div",{className:Xe("fixed top-20 right-16 z-50 flex items-center gap-3",e),children:[r.jsx(LCe,{children:(s||t)&&r.jsx(s7.div,{initial:{opacity:0,x:20,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.9},transition:{duration:.3},className:"bg-[#D2691E] text-white px-4 py-2 rounded-full text-sm font-semibold shadow-xl whitespace-nowrap",children:t?"Start V CLIQ Registration ":" Click to Register"})}),r.jsxs(s7.button,{className:"relative group bg-white rounded-full p-1.5 shadow-2xl border-4 border-white hover:border-[#D2691E]/50 transition-colors",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),whileHover:{scale:1.08},whileTap:{scale:.95},onClick:()=>a("/register"),children:[r.jsx("div",{className:"absolute -inset-2 rounded-full bg-gradient-to-r from-[#D2691E]/40 to-[#2D5A27]/40 blur-lg opacity-0 group-hover:opacity-100 transition-opacity"}),r.jsxs("div",{className:"relative w-20 h-20 sm:w-24 sm:h-24 rounded-full overflow-hidden",children:[r.jsx("img",{src:Dee,alt:"V CLIQ - Register Your Homestay",className:"w-full h-full object-cover scale-125"}),r.jsx("div",{className:"absolute inset-0 rounded-full ring-2 ring-inset ring-black/10"})]}),r.jsx("div",{className:"absolute inset-0 rounded-full animate-ping bg-[#D2691E]/20 pointer-events-none",style:{animationDuration:"2s"}})]})]})}const a7={enforce:!1,lockToRecommended:!1},M5={silver:{min:1,max:2999},gold:{min:3e3,max:1e4},diamond:{min:1e4,max:null}},$Ce={mode:"direct"},o7="2022-01-01",BCe="SEQUENTIAL",lre=["System Upgrade in Progress","Scheduled Maintenance","Technical Issue - We are investigating","Portal is temporarily offline"],VCe={messageType:"System Upgrade in Progress"},UCe=e=>e.messageType==="custom"&&e.customMessage.trim().length>0?e.customMessage.trim():lre.includes(e.messageType)?e.messageType:VCe.messageType,l7=["Payment process is being updated","Payment services are temporarily unavailable","Payment gateway under maintenance","Online payment is currently paused"],qCe={diamond:{mc:18e3,tcp:12e3,gp:1e4},gold:{mc:12e3,tcp:8e3,gp:6e3},silver:{mc:8e3,tcp:5e3,gp:3e3}};function zCe(e){const t=qCe[e.category][e.locationType];let n=t*e.validityYears,s=0;e.validityYears===3&&(s=n*.1);let i=0;e.ownerGender==="female"&&(e.discountMode==="ADDITIVE"?i=n*.05:i=(n-s)*.05);let a=0;e.isPangiSubDivision&&(a=(n-s-i)*.5);const o=s+i+a,l=n-o,c=o,d=n>0?o/n*100:0;return{baseFee:t,totalBeforeDiscounts:n,validityDiscount:Math.round(s*100)/100,femaleOwnerDiscount:Math.round(i*100)/100,pangiDiscount:Math.round(a*100)/100,totalDiscount:Math.round(o*100)/100,finalFee:Math.round(l*100)/100,savingsAmount:Math.round(c*100)/100,savingsPercentage:Math.round(d*100)/100}}const ra=6,Yc=12,Gk={diamond:{tariffLabel:"Tariff above 10,000 per room per night"},gold:{tariffLabel:"Tariff between 3,000 and 10,000 per room per night"},silver:{tariffLabel:"Tariff below 3,000 per room per night"}},c7={silver:1,gold:2,diamond:3},My=e=>e.charAt(0).toUpperCase()+e.slice(1);function HCe(e,t,n,s=M5){const i=[],a=[];let o;const l=My(e);if(t<1&&i.push("At least one room must be configured to determine the category."),t>ra&&i.push(`HP Homestay Rules 2025 permit a maximum of ${ra} rooms. You currently have ${t}.`),n<=0)i.push("Please provide nightly rates for at least one room type.");else{const c=cre(t,n,s);o=c;const d=c7[e],u=c7[c],h=Math.round(n).toLocaleString("en-IN");d<u?i.push(`Your highest tariff of ${h} falls under the ${My(c)} bracket. Please switch to ${My(c)} or higher to remain compliant.`):d>u&&a.push(`Your highest tariff of ${h} fits within the ${My(c)} bracket. ${l} is optionalconsider selecting ${My(c)} to lower the registration fee.`)}return{isValid:i.length===0,errors:i,warnings:a,suggestedCategory:o}}function cre(e,t,n=M5){if(t<=0)return"silver";const s=["silver","gold","diamond"];for(const i of s){const a=n[i],o=Math.max(0,Math.floor(a.min)),l=a.max===null?Number.POSITIVE_INFINITY:Math.floor(a.max);if(t>=o&&t<=l)return i}return"diamond"}function WCe(){const[,e]=Dr(),{theme:t}=IZ(),[n,s]=b.useState(""),[i,a]=b.useState(""),[o,l]=b.useState("application"),[c,d]=b.useState(!1),[u,h]=b.useState("top"),f=w=>{const N=document.getElementById(w);N&&N.scrollIntoView({behavior:"smooth",block:"start"})},{data:m={total:0,approved:0,rejected:0,pending:0}}=rt({queryKey:["/api/public/stats"],refetchInterval:6e4}),p=()=>{n.trim()&&e(`/track?${o==="application"?"app":o==="aadhaar"?"aadhaar":"phone"}=${encodeURIComponent(n.trim())}`)},g=()=>{i.trim()&&e(`/verify-certificate?cert=${encodeURIComponent(i.trim())}`)},v=b.useMemo(()=>fNe(),[]),x=b.useMemo(()=>c?[hNe(),...v]:v,[c,v]),y=t==="classic"||t==="mountain-sky"||t==="professional-blue";return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(jf,{title:"HP Tourism eServices",subtitle:"Himachal Pradesh Government",showBack:!1,showHome:!1,onPrimaryLogoToggle:()=>d(w=>!w),actions:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(d2e,{}),r.jsxs(Rb,{children:[r.jsx(Db,{asChild:!0,children:r.jsxs(te,{variant:"ghost",className:"hidden md:flex items-center gap-1",children:["Applications ",r.jsx(Tm,{className:"w-4 h-4"})]})}),r.jsxs(mv,{align:"end",className:"w-56",children:[r.jsx(Uc,{onClick:()=>f("stats"),children:"Application Status"}),r.jsx(Uc,{onClick:()=>f("tracking-section"),children:"Application Tracking"}),r.jsx(Uc,{onClick:()=>f("tracking-section"),children:"Check Certificates"}),r.jsx(Uc,{onClick:()=>e("/procedure-checklist"),children:"Procedure & Checklist"})]})]}),r.jsxs(Rb,{children:[r.jsx(Db,{asChild:!0,children:r.jsxs(te,{variant:"ghost",className:"hidden md:flex items-center gap-1",children:["Login ",r.jsx(Tm,{className:"w-4 h-4"})]})}),r.jsxs(mv,{align:"end",className:"w-40",children:[r.jsx(Uc,{onClick:()=>e("/login?audience=user"),children:"User Login"}),r.jsx(Uc,{onClick:()=>e("/login?audience=office"),children:"Office Login"})]})]}),r.jsx(te,{variant:"ghost",className:"hidden md:inline-flex",onClick:()=>e("/contact"),children:"Contact"}),r.jsx(te,{onClick:()=>e("/register"),"data-testid":"button-register",children:"Register"})]}),floatingComponent:r.jsx(FCe,{className:"static"})}),r.jsxs("section",{className:`relative px-4 sm:px-6 ${y?"py-20 sm:py-24 lg:py-32":"py-12 sm:py-16 lg:py-24 bg-gradient-to-b from-background to-muted/20"}`,children:[y&&r.jsx("div",{className:"absolute inset-0",children:r.jsx(H2e,{images:x,interval:5e3,overlayClassName:"bg-gradient-to-b from-black/30 via-black/20 to-black/30"},"hero-sukhu")}),r.jsxs("div",{className:`${y?"relative z-10":""} max-w-6xl mx-auto text-center`,children:[r.jsx("h1",{className:`font-bold mb-6 text-[clamp(2rem,5vw,3.5rem)] leading-tight ${y?"text-white":"text-foreground"}`,children:"Welcome to HP Tourism Online Services"}),r.jsxs("p",{className:`text-2xl sm:text-3xl mb-8 max-w-3xl mx-auto leading-relaxed ${y?"text-white/90":"text-muted-foreground"}`,children:["Portal for Registration /Renewal of Home Stay Units",r.jsx("br",{}),"Under Himachal Pradesh Home Stay Rules, 2025"]}),r.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[r.jsx(te,{size:"lg",onClick:()=>e("/register"),className:"w-full sm:w-auto","data-testid":"button-get-started",children:"Get Started"}),r.jsx(te,{size:"lg",variant:"outline",className:`${y?"bg-white/10 backdrop-blur-sm border-white/30 text-white hover:bg-white/20":""} w-full sm:w-auto`,onClick:()=>e("/properties"),"data-testid":"button-browse-properties",children:"Browse Properties"})]})]})]}),r.jsx("section",{className:"py-12 px-4 bg-muted/30",id:"stats",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Live Portal Statistics"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(me,{className:"shadow-md border","data-testid":"card-total-applications",children:[r.jsxs(Ce,{className:"text-center pb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx(ir,{className:"w-6 h-6 text-primary"})}),r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"})]}),r.jsx(ge,{className:"text-center",children:r.jsx("p",{className:"text-3xl font-bold","data-testid":"stat-total",children:r.jsx(g2,{value:m.total})})})]}),r.jsxs(me,{className:"shadow-md border","data-testid":"card-approved-applications",children:[r.jsxs(Ce,{className:"text-center pb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx(kr,{className:"w-6 h-6 text-green-600"})}),r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Approved Applications"})]}),r.jsx(ge,{className:"text-center",children:r.jsx("p",{className:"text-3xl font-bold text-green-600","data-testid":"stat-approved",children:r.jsx(g2,{value:m.approved})})})]}),r.jsxs(me,{className:"shadow-md border","data-testid":"card-rejected-applications",children:[r.jsxs(Ce,{className:"text-center pb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx(cd,{className:"w-6 h-6 text-red-600"})}),r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Rejected Applications"})]}),r.jsx(ge,{className:"text-center",children:r.jsx("p",{className:"text-3xl font-bold text-red-600","data-testid":"stat-rejected",children:r.jsx(g2,{value:m.rejected})})})]}),r.jsxs(me,{className:"shadow-md border","data-testid":"card-pending-applications",children:[r.jsxs(Ce,{className:"text-center pb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-orange-50 rounded-full flex items-center justify-center mx-auto mb-2",children:r.jsx(Vs,{className:"w-6 h-6 text-orange-600"})}),r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Pending Applications"})]}),r.jsx(ge,{className:"text-center",children:r.jsx("p",{className:"text-3xl font-bold text-orange-600","data-testid":"stat-pending",children:r.jsx(g2,{value:m.pending})})})]})]})]})}),r.jsx("section",{className:"py-16 px-4",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-3xl font-bold text-center mb-12",children:"Key Features"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs(me,{className:"shadow-md border","data-testid":"card-easy-registration",children:[r.jsxs(Ce,{className:"text-center pb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ba,{className:"w-8 h-8 text-primary"})}),r.jsx(ke,{className:"text-lg",children:"Easy Registration"})]}),r.jsx(ge,{className:"text-center",children:r.jsx(Ue,{children:"Simple step-by-step application process for homestay owners"})})]}),r.jsxs(me,{className:"shadow-md border","data-testid":"card-fast-processing",children:[r.jsxs(Ce,{className:"text-center pb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Vs,{className:"w-8 h-8 text-primary"})}),r.jsx(ke,{className:"text-lg",children:"Fast Processing"})]}),r.jsx(ge,{className:"text-center",children:r.jsx(Ue,{children:"Applications processed within 60 days with automated workflows"})})]}),r.jsxs(me,{className:"shadow-md border","data-testid":"card-digital-documents",children:[r.jsxs(Ce,{className:"text-center pb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(ir,{className:"w-8 h-8 text-primary"})}),r.jsx(ke,{className:"text-lg",children:"Digital Documents"})]}),r.jsx(ge,{className:"text-center",children:r.jsx(Ue,{children:"Upload all required documents online with instant verification"})})]}),r.jsxs(me,{className:"shadow-md border","data-testid":"card-realtime-tracking",children:[r.jsxs(Ce,{className:"text-center pb-4",children:[r.jsx("div",{className:"w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(kr,{className:"w-8 h-8 text-primary"})}),r.jsx(ke,{className:"text-lg",children:"Real-time Tracking"})]}),r.jsx(ge,{className:"text-center",children:r.jsx(Ue,{children:"Track your application status at every step of the process"})})]})]})]})}),r.jsx("section",{className:"py-12 px-4 bg-muted/30",id:"tracking-section",children:r.jsx("div",{className:"max-w-6xl mx-auto",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsxs(me,{className:"shadow-md border",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(gu,{className:"w-6 h-6 text-primary"}),r.jsx(ke,{children:"Track Your Application"})]}),r.jsx(Ue,{children:"Search by Application No., Aadhaar No., or Phone No."})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[r.jsxs(Rb,{children:[r.jsx(Db,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:"w-full sm:w-[150px] justify-between shrink-0",children:[o==="application"&&"Application No.",o==="aadhaar"&&"Aadhaar No.",o==="phone"&&"Phone No.",r.jsx(Tm,{className:"w-4 h-4 ml-2"})]})}),r.jsxs(mv,{align:"start",className:"w-[150px]",children:[r.jsx(Uc,{onClick:()=>l("application"),children:"Application No."}),r.jsx(Uc,{onClick:()=>l("aadhaar"),children:"Aadhaar No."}),r.jsx(Uc,{onClick:()=>l("phone"),children:"Phone No."})]})]}),r.jsx(Pe,{placeholder:o==="application"?"Enter application number":o==="aadhaar"?"Enter Aadhaar number":"Enter phone number",value:n,onChange:w=>s(w.target.value),className:"flex-1","data-testid":"input-application-number"}),r.jsx(te,{onClick:p,className:"w-full sm:w-auto","data-testid":"button-track",children:"Track"})]})})]}),r.jsxs(me,{className:"shadow-md border",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(zh,{className:"w-6 h-6 text-primary"}),r.jsx(ke,{children:"Verify Certificate"})]}),r.jsx(Ue,{children:"Verify the authenticity of homestay certificates"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row",children:[r.jsx(Pe,{placeholder:"Enter certificate number",value:i,onChange:w=>a(w.target.value),"data-testid":"input-certificate-number"}),r.jsx(te,{onClick:g,className:"w-full sm:w-auto","data-testid":"button-verify",children:"Verify"})]})})]})]})})}),r.jsx("section",{className:"py-12 px-4",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-8 bg-gradient-to-r from-amber-50 to-orange-50 rounded-2xl p-8 border border-amber-200 shadow-md",children:[r.jsx("div",{className:"bg-white rounded-xl p-3 shadow-lg border border-amber-100",children:r.jsx("img",{src:Dee,alt:"V CLIQ - A Tourism Awareness Campaign",className:"h-24 md:h-28 w-auto rounded-lg"})}),r.jsxs("div",{className:"text-center md:text-left",children:[r.jsx("div",{className:"text-xs uppercase tracking-wider text-[#D2691E] font-bold mb-1",children:"2025 Tourism Policy Update"}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"V CLIQ Campaign"}),r.jsx("p",{className:"text-gray-700 max-w-lg",children:"Under the 2025 Homestay Policy, the Department promotes responsible tourism through authentic homestay experiences, classified into three categories as detailed below."})]})]})})}),r.jsx("section",{className:"py-16 px-4 bg-muted/20",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx("h2",{className:"text-3xl font-bold text-center mb-4",children:"2025 Homestay Categories"}),r.jsx("p",{className:"text-center text-muted-foreground mb-12",children:"Under the V CLIQ Initiative"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs(me,{className:"shadow-md border relative overflow-hidden","data-testid":"card-diamond",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 overflow-hidden",children:r.jsx("div",{className:"absolute top-3 right-[-32px] w-32 bg-gradient-to-r from-cyan-400 to-blue-500 text-white text-xs font-bold py-1 px-8 rotate-45 text-center shadow-lg",children:"DIAMOND"})}),r.jsxs(Ce,{className:"pt-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-full flex items-center justify-center",children:r.jsx(zh,{className:"w-6 h-6 text-blue-600"})}),r.jsx(ke,{className:"text-2xl",children:"Diamond"})]}),r.jsx(Ue,{className:"text-base",children:"Tariff-based premium category for properties charging above 10,000/night."})]}),r.jsx(ge,{children:r.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4 text-blue-600"}),"Tariff: ",Gk.diamond.tariffLabel]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4 text-blue-600"}),"Capacity: Up to ",ra," rooms / ",Yc," beds"]})]})})]}),r.jsxs(me,{className:"shadow-md border relative overflow-hidden","data-testid":"card-gold",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 overflow-hidden",children:r.jsx("div",{className:"absolute top-3 right-[-32px] w-32 bg-gradient-to-r from-yellow-400 to-amber-500 text-white text-xs font-bold py-1 px-8 rotate-45 text-center shadow-lg",children:"GOLD"})}),r.jsxs(Ce,{className:"pt-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-100 to-amber-100 rounded-full flex items-center justify-center",children:r.jsx(zh,{className:"w-6 h-6 text-amber-600"})}),r.jsx(ke,{className:"text-2xl",children:"Gold"})]}),r.jsx(Ue,{className:"text-base",children:"Tariff-based category for properties between 3,000 and 10,000/night."})]}),r.jsx(ge,{children:r.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4 text-amber-600"}),"Tariff: ",Gk.gold.tariffLabel]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4 text-amber-600"}),"Capacity: Up to ",ra," rooms / ",Yc," beds"]})]})})]}),r.jsxs(me,{className:"shadow-md border relative overflow-hidden","data-testid":"card-silver",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 overflow-hidden",children:r.jsx("div",{className:"absolute top-3 right-[-32px] w-32 bg-gradient-to-r from-slate-300 to-gray-400 text-white text-xs font-bold py-1 px-8 rotate-45 text-center shadow-lg",children:"SILVER"})}),r.jsxs(Ce,{className:"pt-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-100 to-gray-100 rounded-full flex items-center justify-center",children:r.jsx(zh,{className:"w-6 h-6 text-gray-600"})}),r.jsx(ke,{className:"text-2xl",children:"Silver"})]}),r.jsx(Ue,{className:"text-base",children:"Budget-friendly stays with tariffs below 3,000/night."})]}),r.jsx(ge,{children:r.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4 text-gray-600"}),"Tariff: ",Gk.silver.tariffLabel]}),r.jsxs("li",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-4 h-4 text-gray-600"}),"Capacity: Up to ",ra," rooms / ",Yc," beds"]})]})})]})]})]})}),r.jsx("footer",{className:"py-8 px-4 border-t bg-background",children:r.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4 text-center md:text-left",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:" 2025 Government of Himachal Pradesh. All rights reserved."}),r.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground text-sm",children:[r.jsx("span",{children:"Developed by:"}),r.jsx("img",{src:mNe,alt:"Himachal Pradesh State Electronics Dev. Corp. Ltd.",className:"max-h-12 md:max-h-16 h-auto w-auto max-w-[160px] object-contain drop-shadow-sm shrink-0",loading:"lazy"}),r.jsx("span",{children:"HPSEDC, Shimla"})]})]})})]})}var sw=e=>e.type==="checkbox",Jp=e=>e instanceof Date,Xo=e=>e==null;const dre=e=>typeof e=="object";var Yi=e=>!Xo(e)&&!Array.isArray(e)&&dre(e)&&!Jp(e),ure=e=>Yi(e)&&e.target?sw(e.target)?e.target.checked:e.target.value:e,KCe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,hre=(e,t)=>e.has(KCe(t)),GCe=e=>{const t=e.constructor&&e.constructor.prototype;return Yi(t)&&t.hasOwnProperty("isPrototypeOf")},YD=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function to(e){let t;const n=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(YD&&(e instanceof Blob||s))&&(n||Yi(e)))if(t=n?[]:{},!n&&!GCe(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=to(e[i]));else return e;return t}var hC=e=>Array.isArray(e)?e.filter(Boolean):[],qi=e=>e===void 0,Xt=(e,t,n)=>{if(!t||!Yi(e))return n;const s=hC(t.split(/[,[\].]+?/)).reduce((i,a)=>Xo(i)?i:i[a],e);return qi(s)||s===e?qi(e[t])?n:e[t]:s},rc=e=>typeof e=="boolean",XD=e=>/^\w*$/.test(e),fre=e=>hC(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Xn=(e,t,n)=>{let s=-1;const i=XD(t)?[t]:fre(t),a=i.length,o=a-1;for(;++s<a;){const l=i[s];let c=n;if(s!==o){const d=e[l];c=Yi(d)||Array.isArray(d)?d:isNaN(+i[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const I5={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ud={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ah={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},mre=Ae.createContext(null),fC=()=>Ae.useContext(mre),YCe=e=>{const{children:t,...n}=e;return Ae.createElement(mre.Provider,{value:n},t)};var pre=(e,t,n,s=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Ud.all&&(t._proxyFormState[o]=!s||Ud.all),n&&(n[o]=!0),e[o]}});return i};function XCe(e){const t=fC(),{control:n=t.control,disabled:s,name:i,exact:a}=e||{},[o,l]=Ae.useState(n._formState),c=Ae.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=Ae.useRef(i);return d.current=i,Ae.useEffect(()=>n._subscribe({name:d.current,formState:c.current,exact:a,callback:u=>{!s&&l({...n._formState,...u})}}),[n,s,a]),Ae.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),Ae.useMemo(()=>pre(o,n,c.current,!1),[o,n])}var Hu=e=>typeof e=="string",gre=(e,t,n,s,i)=>Hu(e)?(s&&t.watch.add(e),Xt(n,e,i)):Array.isArray(e)?e.map(a=>(s&&t.watch.add(a),Xt(n,a))):(s&&(t.watchAll=!0),n);function QCe(e){const t=fC(),{control:n=t.control,name:s,defaultValue:i,disabled:a,exact:o}=e||{},l=Ae.useRef(s),c=Ae.useRef(i);l.current=s,Ae.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:o,callback:h=>!a&&u(gre(l.current,n._names,h.values||n._formValues,!1,c.current))}),[n,a,o]);const[d,u]=Ae.useState(n._getWatch(s,i));return Ae.useEffect(()=>n._removeUnmounted()),d}function ZCe(e){const t=fC(),{name:n,disabled:s,control:i=t.control,shouldUnregister:a}=e,o=hre(i._names.array,n),l=QCe({control:i,name:n,defaultValue:Xt(i._formValues,n,Xt(i._defaultValues,n,e.defaultValue)),exact:!0}),c=XCe({control:i,name:n,exact:!0}),d=Ae.useRef(e),u=Ae.useRef(i.register(n,{...e.rules,value:l,...rc(e.disabled)?{disabled:e.disabled}:{}})),h=Ae.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Xt(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Xt(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Xt(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Xt(c.validatingFields,n)},error:{enumerable:!0,get:()=>Xt(c.errors,n)}}),[c,n]),f=Ae.useCallback(v=>u.current.onChange({target:{value:ure(v),name:n},type:I5.CHANGE}),[n]),m=Ae.useCallback(()=>u.current.onBlur({target:{value:Xt(i._formValues,n),name:n},type:I5.BLUR}),[n,i._formValues]),p=Ae.useCallback(v=>{const x=Xt(i._fields,n);x&&v&&(x._f.ref={focus:()=>v.focus(),select:()=>v.select(),setCustomValidity:y=>v.setCustomValidity(y),reportValidity:()=>v.reportValidity()})},[i._fields,n]),g=Ae.useMemo(()=>({name:n,value:l,...rc(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:f,onBlur:m,ref:p}),[n,s,c.disabled,f,m,p,l]);return Ae.useEffect(()=>{const v=i._options.shouldUnregister||a;i.register(n,{...d.current.rules,...rc(d.current.disabled)?{disabled:d.current.disabled}:{}});const x=(y,j)=>{const w=Xt(i._fields,y);w&&w._f&&(w._f.mount=j)};if(x(n,!0),v){const y=to(Xt(i._options.defaultValues,n));Xn(i._defaultValues,n,y),qi(Xt(i._formValues,n))&&Xn(i._formValues,n,y)}return!o&&i.register(n),()=>{(o?v&&!i._state.action:v)?i.unregister(n):x(n,!1)}},[n,i,o,a]),Ae.useEffect(()=>{i._setDisabledField({disabled:s,name:n})},[s,n,i]),Ae.useMemo(()=>({field:g,formState:c,fieldState:h}),[g,c,h])}const JCe=e=>e.render(ZCe(e));var xre=(e,t,n,s,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[s]:i||!0}}:{},$b=e=>Array.isArray(e)?e:[e],d7=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}},hT=e=>Xo(e)||!dre(e);function nm(e,t){if(hT(e)||hT(t))return e===t;if(Jp(e)&&Jp(t))return e.getTime()===t.getTime();const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(const i of n){const a=e[i];if(!s.includes(i))return!1;if(i!=="ref"){const o=t[i];if(Jp(a)&&Jp(o)||Yi(a)&&Yi(o)||Array.isArray(a)&&Array.isArray(o)?!nm(a,o):a!==o)return!1}}return!0}var Go=e=>Yi(e)&&!Object.keys(e).length,QD=e=>e.type==="file",qd=e=>typeof e=="function",L5=e=>{if(!YD)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},vre=e=>e.type==="select-multiple",ZD=e=>e.type==="radio",eAe=e=>ZD(e)||sw(e),Yk=e=>L5(e)&&e.isConnected;function tAe(e,t){const n=t.slice(0,-1).length;let s=0;for(;s<n;)e=qi(e)?s++:e[t[s++]];return e}function rAe(e){for(const t in e)if(e.hasOwnProperty(t)&&!qi(e[t]))return!1;return!0}function va(e,t){const n=Array.isArray(t)?t:XD(t)?[t]:fre(t),s=n.length===1?e:tAe(e,n),i=n.length-1,a=n[i];return s&&delete s[a],i!==0&&(Yi(s)&&Go(s)||Array.isArray(s)&&rAe(s))&&va(e,n.slice(0,-1)),e}var yre=e=>{for(const t in e)if(qd(e[t]))return!0;return!1};function F5(e,t={}){const n=Array.isArray(e);if(Yi(e)||n)for(const s in e)Array.isArray(e[s])||Yi(e[s])&&!yre(e[s])?(t[s]=Array.isArray(e[s])?[]:{},F5(e[s],t[s])):Xo(e[s])||(t[s]=!0);return t}function bre(e,t,n){const s=Array.isArray(e);if(Yi(e)||s)for(const i in e)Array.isArray(e[i])||Yi(e[i])&&!yre(e[i])?qi(t)||hT(n[i])?n[i]=Array.isArray(e[i])?F5(e[i],[]):{...F5(e[i])}:bre(e[i],Xo(t)?{}:t[i],n[i]):n[i]=!nm(e[i],t[i]);return n}var Iy=(e,t)=>bre(e,t,F5(t));const u7={value:!1,isValid:!1},h7={value:!0,isValid:!0};var jre=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!qi(e[0].attributes.value)?qi(e[0].value)||e[0].value===""?h7:{value:e[0].value,isValid:!0}:h7:u7}return u7},wre=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:s})=>qi(e)?e:t?e===""?NaN:e&&+e:n&&Hu(e)?new Date(e):s?s(e):e;const f7={isValid:!1,value:null};var Nre=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,f7):f7;function m7(e){const t=e.ref;return QD(t)?t.files:ZD(t)?Nre(e.refs).value:vre(t)?[...t.selectedOptions].map(({value:n})=>n):sw(t)?jre(e.refs).value:wre(qi(t.value)?e.ref.value:t.value,e)}var nAe=(e,t,n,s)=>{const i={};for(const a of e){const o=Xt(t,a);o&&Xn(i,a,o._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:s}},$5=e=>e instanceof RegExp,Ly=e=>qi(e)?e:$5(e)?e.source:Yi(e)?$5(e.value)?e.value.source:e.value:e,p7=e=>({isOnSubmit:!e||e===Ud.onSubmit,isOnBlur:e===Ud.onBlur,isOnChange:e===Ud.onChange,isOnAll:e===Ud.all,isOnTouch:e===Ud.onTouched});const g7="AsyncFunction";var sAe=e=>!!e&&!!e.validate&&!!(qd(e.validate)&&e.validate.constructor.name===g7||Yi(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===g7)),iAe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),x7=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Bb=(e,t,n,s)=>{for(const i of n||Object.keys(e)){const a=Xt(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(Bb(l,t))break}else if(Yi(l)&&Bb(l,t))break}}};function v7(e,t,n){const s=Xt(e,n);if(s||XD(n))return{error:s,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Xt(t,a),l=Xt(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(l&&l.type)return{name:a,error:l};i.pop()}return{name:n}}var aAe=(e,t,n,s)=>{n(e);const{name:i,...a}=e;return Go(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!s||Ud.all))},oAe=(e,t,n)=>!e||!t||e===t||$b(e).some(s=>s&&(n?s===t:s.startsWith(t)||t.startsWith(s))),lAe=(e,t,n,s,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(t||e):(n?s.isOnBlur:i.isOnBlur)?!e:(n?s.isOnChange:i.isOnChange)?e:!0,cAe=(e,t)=>!hC(Xt(e,t)).length&&va(e,t),dAe=(e,t,n)=>{const s=$b(Xt(e,n));return Xn(s,"root",t[n]),Xn(e,n,s),e},CN=e=>Hu(e);function y7(e,t,n="validate"){if(CN(e)||Array.isArray(e)&&e.every(CN)||rc(e)&&!e)return{type:n,message:CN(e)?e:"",ref:t}}var mx=e=>Yi(e)&&!$5(e)?e:{value:e,message:""},b7=async(e,t,n,s,i,a)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:h,max:f,pattern:m,validate:p,name:g,valueAsNumber:v,mount:x}=e._f,y=Xt(n,g);if(!x||t.has(g))return{};const j=l?l[0]:o,w=O=>{i&&j.reportValidity&&(j.setCustomValidity(rc(O)?"":O||""),j.reportValidity())},N={},S=ZD(o),T=sw(o),C=S||T,A=(v||QD(o))&&qi(o.value)&&qi(y)||L5(o)&&o.value===""||y===""||Array.isArray(y)&&!y.length,R=xre.bind(null,g,s,N),k=(O,$,D,q=Ah.maxLength,M=Ah.minLength)=>{const L=O?$:D;N[g]={type:O?q:M,message:L,ref:o,...R(O?q:M,L)}};if(a?!Array.isArray(y)||!y.length:c&&(!C&&(A||Xo(y))||rc(y)&&!y||T&&!jre(l).isValid||S&&!Nre(l).isValid)){const{value:O,message:$}=CN(c)?{value:!!c,message:c}:mx(c);if(O&&(N[g]={type:Ah.required,message:$,ref:j,...R(Ah.required,$)},!s))return w($),N}if(!A&&(!Xo(h)||!Xo(f))){let O,$;const D=mx(f),q=mx(h);if(!Xo(y)&&!isNaN(y)){const M=o.valueAsNumber||y&&+y;Xo(D.value)||(O=M>D.value),Xo(q.value)||($=M<q.value)}else{const M=o.valueAsDate||new Date(y),L=z=>new Date(new Date().toDateString()+" "+z),V=o.type=="time",P=o.type=="week";Hu(D.value)&&y&&(O=V?L(y)>L(D.value):P?y>D.value:M>new Date(D.value)),Hu(q.value)&&y&&($=V?L(y)<L(q.value):P?y<q.value:M<new Date(q.value))}if((O||$)&&(k(!!O,D.message,q.message,Ah.max,Ah.min),!s))return w(N[g].message),N}if((d||u)&&!A&&(Hu(y)||a&&Array.isArray(y))){const O=mx(d),$=mx(u),D=!Xo(O.value)&&y.length>+O.value,q=!Xo($.value)&&y.length<+$.value;if((D||q)&&(k(D,O.message,$.message),!s))return w(N[g].message),N}if(m&&!A&&Hu(y)){const{value:O,message:$}=mx(m);if($5(O)&&!y.match(O)&&(N[g]={type:Ah.pattern,message:$,ref:o,...R(Ah.pattern,$)},!s))return w($),N}if(p){if(qd(p)){const O=await p(y,n),$=y7(O,j);if($&&(N[g]={...$,...R(Ah.validate,$.message)},!s))return w($.message),N}else if(Yi(p)){let O={};for(const $ in p){if(!Go(O)&&!s)break;const D=y7(await p[$](y,n),j,$);D&&(O={...D,...R($,D.message)},w(D.message),s&&(N[g]=O))}if(!Go(O)&&(N[g]={ref:j,...O},!s))return N}}return w(!0),N};const uAe={mode:Ud.onSubmit,reValidateMode:Ud.onChange,shouldFocusError:!0};function hAe(e={}){let t={...uAe,...e},n={submitCount:0,isDirty:!1,isLoading:qd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let i=Yi(t.defaultValues)||Yi(t.values)?to(t.values||t.defaultValues)||{}:{},a=t.shouldUnregister?{}:to(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...u};const f={array:d7(),state:d7()},m=p7(t.mode),p=p7(t.reValidateMode),g=t.criteriaMode===Ud.all,v=xe=>ae=>{clearTimeout(d),d=setTimeout(xe,ae)},x=async xe=>{if(!t.disabled&&(u.isValid||h.isValid||xe)){const ae=t.resolver?Go((await A()).errors):await k(s,!0);ae!==n.isValid&&f.state.next({isValid:ae})}},y=(xe,ae)=>{!t.disabled&&(u.isValidating||u.validatingFields||h.isValidating||h.validatingFields)&&((xe||Array.from(l.mount)).forEach(we=>{we&&(ae?Xn(n.validatingFields,we,ae):va(n.validatingFields,we))}),f.state.next({validatingFields:n.validatingFields,isValidating:!Go(n.validatingFields)}))},j=(xe,ae=[],we,Te,qe=!0,Ke=!0)=>{if(Te&&we&&!t.disabled){if(o.action=!0,Ke&&Array.isArray(Xt(s,xe))){const Ge=we(Xt(s,xe),Te.argA,Te.argB);qe&&Xn(s,xe,Ge)}if(Ke&&Array.isArray(Xt(n.errors,xe))){const Ge=we(Xt(n.errors,xe),Te.argA,Te.argB);qe&&Xn(n.errors,xe,Ge),cAe(n.errors,xe)}if((u.touchedFields||h.touchedFields)&&Ke&&Array.isArray(Xt(n.touchedFields,xe))){const Ge=we(Xt(n.touchedFields,xe),Te.argA,Te.argB);qe&&Xn(n.touchedFields,xe,Ge)}(u.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Iy(i,a)),f.state.next({name:xe,isDirty:$(xe,ae),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Xn(a,xe,ae)},w=(xe,ae)=>{Xn(n.errors,xe,ae),f.state.next({errors:n.errors})},N=xe=>{n.errors=xe,f.state.next({errors:n.errors,isValid:!1})},S=(xe,ae,we,Te)=>{const qe=Xt(s,xe);if(qe){const Ke=Xt(a,xe,qi(we)?Xt(i,xe):we);qi(Ke)||Te&&Te.defaultChecked||ae?Xn(a,xe,ae?Ke:m7(qe._f)):M(xe,Ke),o.mount&&x()}},T=(xe,ae,we,Te,qe)=>{let Ke=!1,Ge=!1;const He={name:xe};if(!t.disabled){if(!we||Te){(u.isDirty||h.isDirty)&&(Ge=n.isDirty,n.isDirty=He.isDirty=$(),Ke=Ge!==He.isDirty);const nt=nm(Xt(i,xe),ae);Ge=!!Xt(n.dirtyFields,xe),nt?va(n.dirtyFields,xe):Xn(n.dirtyFields,xe,!0),He.dirtyFields=n.dirtyFields,Ke=Ke||(u.dirtyFields||h.dirtyFields)&&Ge!==!nt}if(we){const nt=Xt(n.touchedFields,xe);nt||(Xn(n.touchedFields,xe,we),He.touchedFields=n.touchedFields,Ke=Ke||(u.touchedFields||h.touchedFields)&&nt!==we)}Ke&&qe&&f.state.next(He)}return Ke?He:{}},C=(xe,ae,we,Te)=>{const qe=Xt(n.errors,xe),Ke=(u.isValid||h.isValid)&&rc(ae)&&n.isValid!==ae;if(t.delayError&&we?(c=v(()=>w(xe,we)),c(t.delayError)):(clearTimeout(d),c=null,we?Xn(n.errors,xe,we):va(n.errors,xe)),(we?!nm(qe,we):qe)||!Go(Te)||Ke){const Ge={...Te,...Ke&&rc(ae)?{isValid:ae}:{},errors:n.errors,name:xe};n={...n,...Ge},f.state.next(Ge)}},A=async xe=>{y(xe,!0);const ae=await t.resolver(a,t.context,nAe(xe||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return y(xe),ae},R=async xe=>{const{errors:ae}=await A(xe);if(xe)for(const we of xe){const Te=Xt(ae,we);Te?Xn(n.errors,we,Te):va(n.errors,we)}else n.errors=ae;return ae},k=async(xe,ae,we={valid:!0})=>{for(const Te in xe){const qe=xe[Te];if(qe){const{_f:Ke,...Ge}=qe;if(Ke){const He=l.array.has(Ke.name),nt=qe._f&&sAe(qe._f);nt&&u.validatingFields&&y([Te],!0);const Y=await b7(qe,l.disabled,a,g,t.shouldUseNativeValidation&&!ae,He);if(nt&&u.validatingFields&&y([Te]),Y[Ke.name]&&(we.valid=!1,ae))break;!ae&&(Xt(Y,Ke.name)?He?dAe(n.errors,Y,Ke.name):Xn(n.errors,Ke.name,Y[Ke.name]):va(n.errors,Ke.name))}!Go(Ge)&&await k(Ge,ae,we)}}return we.valid},O=()=>{for(const xe of l.unMount){const ae=Xt(s,xe);ae&&(ae._f.refs?ae._f.refs.every(we=>!Yk(we)):!Yk(ae._f.ref))&&X(xe)}l.unMount=new Set},$=(xe,ae)=>!t.disabled&&(xe&&ae&&Xn(a,xe,ae),!nm(F(),i)),D=(xe,ae,we)=>gre(xe,l,{...o.mount?a:qi(ae)?i:Hu(xe)?{[xe]:ae}:ae},we,ae),q=xe=>hC(Xt(o.mount?a:i,xe,t.shouldUnregister?Xt(i,xe,[]):[])),M=(xe,ae,we={})=>{const Te=Xt(s,xe);let qe=ae;if(Te){const Ke=Te._f;Ke&&(!Ke.disabled&&Xn(a,xe,wre(ae,Ke)),qe=L5(Ke.ref)&&Xo(ae)?"":ae,vre(Ke.ref)?[...Ke.ref.options].forEach(Ge=>Ge.selected=qe.includes(Ge.value)):Ke.refs?sw(Ke.ref)?Ke.refs.length>1?Ke.refs.forEach(Ge=>(!Ge.defaultChecked||!Ge.disabled)&&(Ge.checked=Array.isArray(qe)?!!qe.find(He=>He===Ge.value):qe===Ge.value)):Ke.refs[0]&&(Ke.refs[0].checked=!!qe):Ke.refs.forEach(Ge=>Ge.checked=Ge.value===qe):QD(Ke.ref)?Ke.ref.value="":(Ke.ref.value=qe,Ke.ref.type||f.state.next({name:xe,values:to(a)})))}(we.shouldDirty||we.shouldTouch)&&T(xe,qe,we.shouldTouch,we.shouldDirty,!0),we.shouldValidate&&Z(xe)},L=(xe,ae,we)=>{for(const Te in ae){const qe=ae[Te],Ke=`${xe}.${Te}`,Ge=Xt(s,Ke);(l.array.has(xe)||Yi(qe)||Ge&&!Ge._f)&&!Jp(qe)?L(Ke,qe,we):M(Ke,qe,we)}},V=(xe,ae,we={})=>{const Te=Xt(s,xe),qe=l.array.has(xe),Ke=to(ae);Xn(a,xe,Ke),qe?(f.array.next({name:xe,values:to(a)}),(u.isDirty||u.dirtyFields||h.isDirty||h.dirtyFields)&&we.shouldDirty&&f.state.next({name:xe,dirtyFields:Iy(i,a),isDirty:$(xe,Ke)})):Te&&!Te._f&&!Xo(Ke)?L(xe,Ke,we):M(xe,Ke,we),x7(xe,l)&&f.state.next({...n}),f.state.next({name:o.mount?xe:void 0,values:to(a)})},P=async xe=>{o.mount=!0;const ae=xe.target;let we=ae.name,Te=!0;const qe=Xt(s,we),Ke=Ge=>{Te=Number.isNaN(Ge)||Jp(Ge)&&isNaN(Ge.getTime())||nm(Ge,Xt(a,we,Ge))};if(qe){let Ge,He;const nt=ae.type?m7(qe._f):ure(xe),Y=xe.type===I5.BLUR||xe.type===I5.FOCUS_OUT,Ct=!iAe(qe._f)&&!t.resolver&&!Xt(n.errors,we)&&!qe._f.deps||lAe(Y,Xt(n.touchedFields,we),n.isSubmitted,p,m),Vt=x7(we,l,Y);Xn(a,we,nt),Y?(qe._f.onBlur&&qe._f.onBlur(xe),c&&c(0)):qe._f.onChange&&qe._f.onChange(xe);const pt=T(we,nt,Y),Ht=!Go(pt)||Vt;if(!Y&&f.state.next({name:we,type:xe.type,values:to(a)}),Ct)return(u.isValid||h.isValid)&&(t.mode==="onBlur"?Y&&x():Y||x()),Ht&&f.state.next({name:we,...Vt?{}:pt});if(!Y&&Vt&&f.state.next({...n}),t.resolver){const{errors:wr}=await A([we]);if(Ke(nt),Te){const wt=v7(n.errors,s,we),Ut=v7(wr,s,wt.name||we);Ge=Ut.error,we=Ut.name,He=Go(wr)}}else y([we],!0),Ge=(await b7(qe,l.disabled,a,g,t.shouldUseNativeValidation))[we],y([we]),Ke(nt),Te&&(Ge?He=!1:(u.isValid||h.isValid)&&(He=await k(s,!0)));Te&&(qe._f.deps&&Z(qe._f.deps),C(we,He,Ge,pt))}},z=(xe,ae)=>{if(Xt(n.errors,ae)&&xe.focus)return xe.focus(),1},Z=async(xe,ae={})=>{let we,Te;const qe=$b(xe);if(t.resolver){const Ke=await R(qi(xe)?xe:qe);we=Go(Ke),Te=xe?!qe.some(Ge=>Xt(Ke,Ge)):we}else xe?(Te=(await Promise.all(qe.map(async Ke=>{const Ge=Xt(s,Ke);return await k(Ge&&Ge._f?{[Ke]:Ge}:Ge)}))).every(Boolean),!(!Te&&!n.isValid)&&x()):Te=we=await k(s);return f.state.next({...!Hu(xe)||(u.isValid||h.isValid)&&we!==n.isValid?{}:{name:xe},...t.resolver||!xe?{isValid:we}:{},errors:n.errors}),ae.shouldFocus&&!Te&&Bb(s,z,xe?qe:l.mount),Te},F=xe=>{const ae={...o.mount?a:i};return qi(xe)?ae:Hu(xe)?Xt(ae,xe):xe.map(we=>Xt(ae,we))},W=(xe,ae)=>({invalid:!!Xt((ae||n).errors,xe),isDirty:!!Xt((ae||n).dirtyFields,xe),error:Xt((ae||n).errors,xe),isValidating:!!Xt(n.validatingFields,xe),isTouched:!!Xt((ae||n).touchedFields,xe)}),G=xe=>{xe&&$b(xe).forEach(ae=>va(n.errors,ae)),f.state.next({errors:xe?n.errors:{}})},H=(xe,ae,we)=>{const Te=(Xt(s,xe,{_f:{}})._f||{}).ref,qe=Xt(n.errors,xe)||{},{ref:Ke,message:Ge,type:He,...nt}=qe;Xn(n.errors,xe,{...nt,...ae,ref:Te}),f.state.next({name:xe,errors:n.errors,isValid:!1}),we&&we.shouldFocus&&Te&&Te.focus&&Te.focus()},se=(xe,ae)=>qd(xe)?f.state.subscribe({next:we=>xe(D(void 0,ae),we)}):D(xe,ae,!0),J=xe=>f.state.subscribe({next:ae=>{oAe(xe.name,ae.name,xe.exact)&&aAe(ae,xe.formState||u,De,xe.reRenderRoot)&&xe.callback({values:{...a},...n,...ae})}}).unsubscribe,ie=xe=>(o.mount=!0,h={...h,...xe.formState},J({...xe,formState:h})),X=(xe,ae={})=>{for(const we of xe?$b(xe):l.mount)l.mount.delete(we),l.array.delete(we),ae.keepValue||(va(s,we),va(a,we)),!ae.keepError&&va(n.errors,we),!ae.keepDirty&&va(n.dirtyFields,we),!ae.keepTouched&&va(n.touchedFields,we),!ae.keepIsValidating&&va(n.validatingFields,we),!t.shouldUnregister&&!ae.keepDefaultValue&&va(i,we);f.state.next({values:to(a)}),f.state.next({...n,...ae.keepDirty?{isDirty:$()}:{}}),!ae.keepIsValid&&x()},he=({disabled:xe,name:ae})=>{(rc(xe)&&o.mount||xe||l.disabled.has(ae))&&(xe?l.disabled.add(ae):l.disabled.delete(ae))},fe=(xe,ae={})=>{let we=Xt(s,xe);const Te=rc(ae.disabled)||rc(t.disabled);return Xn(s,xe,{...we||{},_f:{...we&&we._f?we._f:{ref:{name:xe}},name:xe,mount:!0,...ae}}),l.mount.add(xe),we?he({disabled:rc(ae.disabled)?ae.disabled:t.disabled,name:xe}):S(xe,!0,ae.value),{...Te?{disabled:ae.disabled||t.disabled}:{},...t.progressive?{required:!!ae.required,min:Ly(ae.min),max:Ly(ae.max),minLength:Ly(ae.minLength),maxLength:Ly(ae.maxLength),pattern:Ly(ae.pattern)}:{},name:xe,onChange:P,onBlur:P,ref:qe=>{if(qe){fe(xe,ae),we=Xt(s,xe);const Ke=qi(qe.value)&&qe.querySelectorAll&&qe.querySelectorAll("input,select,textarea")[0]||qe,Ge=eAe(Ke),He=we._f.refs||[];if(Ge?He.find(nt=>nt===Ke):Ke===we._f.ref)return;Xn(s,xe,{_f:{...we._f,...Ge?{refs:[...He.filter(Yk),Ke,...Array.isArray(Xt(i,xe))?[{}]:[]],ref:{type:Ke.type,name:xe}}:{ref:Ke}}}),S(xe,!1,void 0,Ke)}else we=Xt(s,xe,{}),we._f&&(we._f.mount=!1),(t.shouldUnregister||ae.shouldUnregister)&&!(hre(l.array,xe)&&o.action)&&l.unMount.add(xe)}}},Q=()=>t.shouldFocusError&&Bb(s,z,l.mount),Oe=xe=>{rc(xe)&&(f.state.next({disabled:xe}),Bb(s,(ae,we)=>{const Te=Xt(s,we);Te&&(ae.disabled=Te._f.disabled||xe,Array.isArray(Te._f.refs)&&Te._f.refs.forEach(qe=>{qe.disabled=Te._f.disabled||xe}))},0,!1))},ve=(xe,ae)=>async we=>{let Te;we&&(we.preventDefault&&we.preventDefault(),we.persist&&we.persist());let qe=to(a);if(f.state.next({isSubmitting:!0}),t.resolver){const{errors:Ke,values:Ge}=await A();n.errors=Ke,qe=Ge}else await k(s);if(l.disabled.size)for(const Ke of l.disabled)Xn(qe,Ke,void 0);if(va(n.errors,"root"),Go(n.errors)){f.state.next({errors:{}});try{await xe(qe,we)}catch(Ke){Te=Ke}}else ae&&await ae({...n.errors},we),Q(),setTimeout(Q);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Go(n.errors)&&!Te,submitCount:n.submitCount+1,errors:n.errors}),Te)throw Te},ee=(xe,ae={})=>{Xt(s,xe)&&(qi(ae.defaultValue)?V(xe,to(Xt(i,xe))):(V(xe,ae.defaultValue),Xn(i,xe,to(ae.defaultValue))),ae.keepTouched||va(n.touchedFields,xe),ae.keepDirty||(va(n.dirtyFields,xe),n.isDirty=ae.defaultValue?$(xe,to(Xt(i,xe))):$()),ae.keepError||(va(n.errors,xe),u.isValid&&x()),f.state.next({...n}))},Ee=(xe,ae={})=>{const we=xe?to(xe):i,Te=to(we),qe=Go(xe),Ke=qe?i:Te;if(ae.keepDefaultValues||(i=we),!ae.keepValues){if(ae.keepDirtyValues){const Ge=new Set([...l.mount,...Object.keys(Iy(i,a))]);for(const He of Array.from(Ge))Xt(n.dirtyFields,He)?Xn(Ke,He,Xt(a,He)):V(He,Xt(Ke,He))}else{if(YD&&qi(xe))for(const Ge of l.mount){const He=Xt(s,Ge);if(He&&He._f){const nt=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(L5(nt)){const Y=nt.closest("form");if(Y){Y.reset();break}}}}for(const Ge of l.mount)V(Ge,Xt(Ke,Ge))}a=to(Ke),f.array.next({values:{...Ke}}),f.state.next({values:{...Ke}})}l={mount:ae.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!t.shouldUnregister,f.state.next({submitCount:ae.keepSubmitCount?n.submitCount:0,isDirty:qe?!1:ae.keepDirty?n.isDirty:!!(ae.keepDefaultValues&&!nm(xe,i)),isSubmitted:ae.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:qe?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?Iy(i,a):n.dirtyFields:ae.keepDefaultValues&&xe?Iy(i,xe):ae.keepDirty?n.dirtyFields:{},touchedFields:ae.keepTouched?n.touchedFields:{},errors:ae.keepErrors?n.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Re=(xe,ae)=>Ee(qd(xe)?xe(a):xe,ae),oe=(xe,ae={})=>{const we=Xt(s,xe),Te=we&&we._f;if(Te){const qe=Te.refs?Te.refs[0]:Te.ref;qe.focus&&(qe.focus(),ae.shouldSelect&&qd(qe.select)&&qe.select())}},De=xe=>{n={...n,...xe}},Qe={control:{register:fe,unregister:X,getFieldState:W,handleSubmit:ve,setError:H,_subscribe:J,_runSchema:A,_getWatch:D,_getDirty:$,_setValid:x,_setFieldArray:j,_setDisabledField:he,_setErrors:N,_getFieldArray:q,_reset:Ee,_resetDefaultValues:()=>qd(t.defaultValues)&&t.defaultValues().then(xe=>{Re(xe,t.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:Oe,_subjects:f,_proxyFormState:u,get _fields(){return s},get _formValues(){return a},get _state(){return o},set _state(xe){o=xe},get _defaultValues(){return i},get _names(){return l},set _names(xe){l=xe},get _formState(){return n},get _options(){return t},set _options(xe){t={...t,...xe}}},subscribe:ie,trigger:Z,register:fe,handleSubmit:ve,watch:se,setValue:V,getValues:F,reset:Re,resetField:ee,clearErrors:G,unregister:X,setError:H,setFocus:oe,getFieldState:W};return{...Qe,formControl:Qe}}function lu(e={}){const t=Ae.useRef(void 0),n=Ae.useRef(void 0),[s,i]=Ae.useState({isDirty:!1,isValidating:!1,isLoading:qd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:qd(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:hAe(e),formState:s},e.formControl&&e.defaultValues&&!qd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const a=t.current.control;return a._options=e,Ae.useLayoutEffect(()=>a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0}),[a]),Ae.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ae.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==s.isDirty&&a._subjects.state.next({isDirty:o})}},[a,s.isDirty]),Ae.useEffect(()=>{e.values&&!nm(e.values,n.current)?(a._reset(e.values,a._options.resetOptions),n.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[e.values,a]),Ae.useEffect(()=>{e.errors&&!Go(e.errors)&&a._setErrors(e.errors)},[e.errors,a]),Ae.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),Ae.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[e.shouldUnregister,a]),t.current.formState=pre(s,a),t.current}const j7=(e,t,n)=>{if(e&&"reportValidity"in e){const s=Xt(n,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},Sre=(e,t)=>{for(const n in t.fields){const s=t.fields[n];s&&s.ref&&"reportValidity"in s.ref?j7(s.ref,n,e):s.refs&&s.refs.forEach(i=>j7(i,n,e))}},fAe=(e,t)=>{t.shouldUseNativeValidation&&Sre(e,t);const n={};for(const s in e){const i=Xt(t.fields,s),a=Object.assign(e[s]||{},{ref:i&&i.ref});if(mAe(t.names||Object.keys(e),s)){const o=Object.assign({},Xt(n,s));Xn(o,"root",a),Xn(n,s,o)}else Xn(n,s,a)}return n},mAe=(e,t)=>e.some(n=>n.startsWith(t+"."));var pAe=function(e,t){for(var n={};e.length;){var s=e[0],i=s.code,a=s.message,o=s.path.join(".");if(!n[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];n[o]={message:l.message,type:l.code}}else n[o]={message:a,type:i};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(h){return e.push(h)})}),t){var c=n[o].types,d=c&&c[s.code];n[o]=xre(o,t,n,i,d?[].concat(d,s.message):s.message)}e.shift()}return n},hf=function(e,t,n){return n===void 0&&(n={}),function(s,i,a){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[n.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return a.shouldUseNativeValidation&&Sre({},a),{errors:{},values:n.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:fAe(pAe(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Pn;(function(e){e.assertEqual=i=>i;function t(i){}e.assertIs=t;function n(i){throw new Error}e.assertNever=n,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function s(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=s,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Pn||(Pn={}));var fT;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(fT||(fT={}));const nr=Pn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Fh=e=>{switch(typeof e){case"undefined":return nr.undefined;case"string":return nr.string;case"number":return isNaN(e)?nr.nan:nr.number;case"boolean":return nr.boolean;case"function":return nr.function;case"bigint":return nr.bigint;case"symbol":return nr.symbol;case"object":return Array.isArray(e)?nr.array:e===null?nr.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?nr.promise:typeof Map<"u"&&e instanceof Map?nr.map:typeof Set<"u"&&e instanceof Set?nr.set:typeof Date<"u"&&e instanceof Date?nr.date:nr.object;default:return nr.unknown}},Ft=Pn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),gAe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class gc extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},s={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)s._errors.push(n(o));else{let l=s,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(n(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return i(this),s}static assert(t){if(!(t instanceof gc))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Pn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},s=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(t(i))):s.push(t(i));return{formErrors:s,fieldErrors:n}}get formErrors(){return this.flatten()}}gc.create=e=>new gc(e);const a0=(e,t)=>{let n;switch(e.code){case Ft.invalid_type:e.received===nr.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Ft.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Pn.jsonStringifyReplacer)}`;break;case Ft.unrecognized_keys:n=`Unrecognized key(s) in object: ${Pn.joinValues(e.keys,", ")}`;break;case Ft.invalid_union:n="Invalid input";break;case Ft.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Pn.joinValues(e.options)}`;break;case Ft.invalid_enum_value:n=`Invalid enum value. Expected ${Pn.joinValues(e.options)}, received '${e.received}'`;break;case Ft.invalid_arguments:n="Invalid function arguments";break;case Ft.invalid_return_type:n="Invalid function return type";break;case Ft.invalid_date:n="Invalid date";break;case Ft.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Pn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Ft.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Ft.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Ft.custom:n="Invalid input";break;case Ft.invalid_intersection_types:n="Intersection results could not be merged";break;case Ft.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Ft.not_finite:n="Number must be finite";break;default:n=t.defaultError,Pn.assertNever(e)}return{message:n}};let _re=a0;function xAe(e){_re=e}function B5(){return _re}const V5=e=>{const{data:t,path:n,errorMaps:s,issueData:i}=e,a=[...n,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}},vAe=[];function Qt(e,t){const n=B5(),s=V5({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===a0?void 0:a0].filter(i=>!!i)});e.common.issues.push(s)}class Mo{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const s=[];for(const i of n){if(i.status==="aborted")return Wr;i.status==="dirty"&&t.dirty(),s.push(i.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,n){const s=[];for(const i of n){const a=await i.key,o=await i.value;s.push({key:a,value:o})}return Mo.mergeObjectSync(t,s)}static mergeObjectSync(t,n){const s={};for(const i of n){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return Wr;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(s[a.value]=o.value)}return{status:t.value,value:s}}}const Wr=Object.freeze({status:"aborted"}),Gx=e=>({status:"dirty",value:e}),il=e=>({status:"valid",value:e}),mT=e=>e.status==="aborted",pT=e=>e.status==="dirty",Eg=e=>e.status==="valid",O1=e=>typeof Promise<"u"&&e instanceof Promise;function U5(e,t,n,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Cre(e,t,n,s,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var _r;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(_r||(_r={}));var gb,xb;class ah{constructor(t,n,s,i){this._cachedPath=[],this.parent=t,this.data=n,this._path=s,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const w7=(e,t)=>{if(Eg(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new gc(e.common.issues);return this._error=n,this._error}}};function an(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:s,description:i}=e;if(t&&(n||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{var c,d;const{message:u}=e;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=u??n)!==null&&d!==void 0?d:l.defaultError}},description:i}}class gn{get description(){return this._def.description}_getType(t){return Fh(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Fh(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Mo,ctx:{common:t.parent.common,data:t.data,parsedType:Fh(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(O1(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const s=this.safeParse(t,n);if(s.success)return s.data;throw s.error}safeParse(t,n){var s;const i={common:{issues:[],async:(s=n==null?void 0:n.async)!==null&&s!==void 0?s:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fh(t)},a=this._parseSync({data:t,path:i.path,parent:i});return w7(i,a)}"~validate"(t){var n,s;const i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fh(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:i});return Eg(a)?{value:a.value}:{issues:i.common.issues}}catch(a){!((s=(n=a==null?void 0:a.message)===null||n===void 0?void 0:n.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:i}).then(a=>Eg(a)?{value:a.value}:{issues:i.common.issues})}async parseAsync(t,n){const s=await this.safeParseAsync(t,n);if(s.success)return s.data;throw s.error}async safeParseAsync(t,n){const s={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Fh(t)},i=this._parse({data:t,path:s.path,parent:s}),a=await(O1(i)?i:Promise.resolve(i));return w7(s,a)}refine(t,n){const s=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:Ft.custom,...s(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,n){return this._refinement((s,i)=>t(s)?!0:(i.addIssue(typeof n=="function"?n(s,i):n),!1))}_refinement(t){return new cu({schema:this,typeName:qr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ju.create(this,this._def)}nullable(){return Qm.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return eu.create(this)}promise(){return l0.create(this,this._def)}or(t){return I1.create([this,t],this._def)}and(t){return L1.create(this,t,this._def)}transform(t){return new cu({...an(this._def),schema:this,typeName:qr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new U1({...an(this._def),innerType:this,defaultValue:n,typeName:qr.ZodDefault})}brand(){return new JD({typeName:qr.ZodBranded,type:this,...an(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new q1({...an(this._def),innerType:this,catchValue:n,typeName:qr.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return iw.create(this,t)}readonly(){return z1.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const yAe=/^c[^\s-]{8,}$/i,bAe=/^[0-9a-z]+$/,jAe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wAe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NAe=/^[a-z0-9_-]{21}$/i,SAe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_Ae=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,CAe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,AAe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Xk;const kAe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,PAe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,TAe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,EAe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,OAe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,RAe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Are="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",DAe=new RegExp(`^${Are}$`);function kre(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function MAe(e){return new RegExp(`^${kre(e)}$`)}function Pre(e){let t=`${Are}T${kre(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function IAe(e,t){return!!((t==="v4"||!t)&&kAe.test(e)||(t==="v6"||!t)&&TAe.test(e))}function LAe(e,t){if(!SAe.test(e))return!1;try{const[n]=e.split("."),s=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(s));return!(typeof i!="object"||i===null||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function FAe(e,t){return!!((t==="v4"||!t)&&PAe.test(e)||(t==="v6"||!t)&&EAe.test(e))}class Gd extends gn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==nr.string){const a=this._getOrReturnCtx(t);return Qt(a,{code:Ft.invalid_type,expected:nr.string,received:a.parsedType}),Wr}const s=new Mo;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),s.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Qt(i,{code:Ft.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Qt(i,{code:Ft.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),s.dirty())}else if(a.kind==="email")CAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"email",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="emoji")Xk||(Xk=new RegExp(AAe,"u")),Xk.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"emoji",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="uuid")wAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"uuid",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="nanoid")NAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"nanoid",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid")yAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"cuid",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="cuid2")bAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"cuid2",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="ulid")jAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"ulid",code:Ft.invalid_string,message:a.message}),s.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Qt(i,{validation:"url",code:Ft.invalid_string,message:a.message}),s.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"regex",code:Ft.invalid_string,message:a.message}),s.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),s.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.invalid_string,validation:{startsWith:a.value},message:a.message}),s.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.invalid_string,validation:{endsWith:a.value},message:a.message}),s.dirty()):a.kind==="datetime"?Pre(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.invalid_string,validation:"datetime",message:a.message}),s.dirty()):a.kind==="date"?DAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.invalid_string,validation:"date",message:a.message}),s.dirty()):a.kind==="time"?MAe(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.invalid_string,validation:"time",message:a.message}),s.dirty()):a.kind==="duration"?_Ae.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"duration",code:Ft.invalid_string,message:a.message}),s.dirty()):a.kind==="ip"?IAe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"ip",code:Ft.invalid_string,message:a.message}),s.dirty()):a.kind==="jwt"?LAe(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"jwt",code:Ft.invalid_string,message:a.message}),s.dirty()):a.kind==="cidr"?FAe(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"cidr",code:Ft.invalid_string,message:a.message}),s.dirty()):a.kind==="base64"?OAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"base64",code:Ft.invalid_string,message:a.message}),s.dirty()):a.kind==="base64url"?RAe.test(t.data)||(i=this._getOrReturnCtx(t,i),Qt(i,{validation:"base64url",code:Ft.invalid_string,message:a.message}),s.dirty()):Pn.assertNever(a);return{status:s.value,value:t.data}}_regex(t,n,s){return this.refinement(i=>t.test(i),{validation:n,code:Ft.invalid_string,..._r.errToObj(s)})}_addCheck(t){return new Gd({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",..._r.errToObj(t)})}url(t){return this._addCheck({kind:"url",..._r.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",..._r.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",..._r.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",..._r.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",..._r.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",..._r.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",..._r.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",..._r.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",..._r.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",..._r.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",..._r.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",..._r.errToObj(t)})}datetime(t){var n,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,..._r.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,..._r.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",..._r.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,..._r.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,..._r.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,..._r.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,..._r.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,..._r.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,..._r.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,..._r.errToObj(n)})}nonempty(t){return this.min(1,_r.errToObj(t))}trim(){return new Gd({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Gd({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Gd({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Gd.create=e=>{var t;return new Gd({checks:[],typeName:qr.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...an(e)})};function $Ae(e,t){const n=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,i=n>s?n:s,a=parseInt(e.toFixed(i).replace(".","")),o=parseInt(t.toFixed(i).replace(".",""));return a%o/Math.pow(10,i)}class Gm extends gn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==nr.number){const a=this._getOrReturnCtx(t);return Qt(a,{code:Ft.invalid_type,expected:nr.number,received:a.parsedType}),Wr}let s;const i=new Mo;for(const a of this._def.checks)a.kind==="int"?Pn.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?$Ae(t.data,a.value)!==0&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.not_finite,message:a.message}),i.dirty()):Pn.assertNever(a);return{status:i.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,_r.toString(n))}gt(t,n){return this.setLimit("min",t,!1,_r.toString(n))}lte(t,n){return this.setLimit("max",t,!0,_r.toString(n))}lt(t,n){return this.setLimit("max",t,!1,_r.toString(n))}setLimit(t,n,s,i){return new Gm({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:_r.toString(i)}]})}_addCheck(t){return new Gm({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:_r.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:_r.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:_r.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:_r.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:_r.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:_r.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:_r.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:_r.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:_r.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Pn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(n===null||s.value>n)&&(n=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Gm.create=e=>new Gm({checks:[],typeName:qr.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...an(e)});class Ym extends gn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==nr.bigint)return this._getInvalidInput(t);let s;const i=new Mo;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),Qt(s,{code:Ft.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Pn.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Qt(n,{code:Ft.invalid_type,expected:nr.bigint,received:n.parsedType}),Wr}gte(t,n){return this.setLimit("min",t,!0,_r.toString(n))}gt(t,n){return this.setLimit("min",t,!1,_r.toString(n))}lte(t,n){return this.setLimit("max",t,!0,_r.toString(n))}lt(t,n){return this.setLimit("max",t,!1,_r.toString(n))}setLimit(t,n,s,i){return new Ym({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:s,message:_r.toString(i)}]})}_addCheck(t){return new Ym({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:_r.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:_r.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:_r.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:_r.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:_r.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ym.create=e=>{var t;return new Ym({checks:[],typeName:qr.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...an(e)})};class R1 extends gn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==nr.boolean){const s=this._getOrReturnCtx(t);return Qt(s,{code:Ft.invalid_type,expected:nr.boolean,received:s.parsedType}),Wr}return il(t.data)}}R1.create=e=>new R1({typeName:qr.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...an(e)});class Og extends gn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==nr.date){const a=this._getOrReturnCtx(t);return Qt(a,{code:Ft.invalid_type,expected:nr.date,received:a.parsedType}),Wr}if(isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Qt(a,{code:Ft.invalid_date}),Wr}const s=new Mo;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),s.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Qt(i,{code:Ft.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),s.dirty()):Pn.assertNever(a);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Og({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:_r.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:_r.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Og.create=e=>new Og({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:qr.ZodDate,...an(e)});class q5 extends gn{_parse(t){if(this._getType(t)!==nr.symbol){const s=this._getOrReturnCtx(t);return Qt(s,{code:Ft.invalid_type,expected:nr.symbol,received:s.parsedType}),Wr}return il(t.data)}}q5.create=e=>new q5({typeName:qr.ZodSymbol,...an(e)});class D1 extends gn{_parse(t){if(this._getType(t)!==nr.undefined){const s=this._getOrReturnCtx(t);return Qt(s,{code:Ft.invalid_type,expected:nr.undefined,received:s.parsedType}),Wr}return il(t.data)}}D1.create=e=>new D1({typeName:qr.ZodUndefined,...an(e)});class M1 extends gn{_parse(t){if(this._getType(t)!==nr.null){const s=this._getOrReturnCtx(t);return Qt(s,{code:Ft.invalid_type,expected:nr.null,received:s.parsedType}),Wr}return il(t.data)}}M1.create=e=>new M1({typeName:qr.ZodNull,...an(e)});class o0 extends gn{constructor(){super(...arguments),this._any=!0}_parse(t){return il(t.data)}}o0.create=e=>new o0({typeName:qr.ZodAny,...an(e)});class pg extends gn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return il(t.data)}}pg.create=e=>new pg({typeName:qr.ZodUnknown,...an(e)});class ff extends gn{_parse(t){const n=this._getOrReturnCtx(t);return Qt(n,{code:Ft.invalid_type,expected:nr.never,received:n.parsedType}),Wr}}ff.create=e=>new ff({typeName:qr.ZodNever,...an(e)});class z5 extends gn{_parse(t){if(this._getType(t)!==nr.undefined){const s=this._getOrReturnCtx(t);return Qt(s,{code:Ft.invalid_type,expected:nr.void,received:s.parsedType}),Wr}return il(t.data)}}z5.create=e=>new z5({typeName:qr.ZodVoid,...an(e)});class eu extends gn{_parse(t){const{ctx:n,status:s}=this._processInputParams(t),i=this._def;if(n.parsedType!==nr.array)return Qt(n,{code:Ft.invalid_type,expected:nr.array,received:n.parsedType}),Wr;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(o||l)&&(Qt(n,{code:o?Ft.too_big:Ft.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),s.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(Qt(n,{code:Ft.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),s.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(Qt(n,{code:Ft.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),s.dirty()),n.common.async)return Promise.all([...n.data].map((o,l)=>i.type._parseAsync(new ah(n,o,n.path,l)))).then(o=>Mo.mergeArray(s,o));const a=[...n.data].map((o,l)=>i.type._parseSync(new ah(n,o,n.path,l)));return Mo.mergeArray(s,a)}get element(){return this._def.type}min(t,n){return new eu({...this._def,minLength:{value:t,message:_r.toString(n)}})}max(t,n){return new eu({...this._def,maxLength:{value:t,message:_r.toString(n)}})}length(t,n){return new eu({...this._def,exactLength:{value:t,message:_r.toString(n)}})}nonempty(t){return this.min(1,t)}}eu.create=(e,t)=>new eu({type:e,minLength:null,maxLength:null,exactLength:null,typeName:qr.ZodArray,...an(t)});function Cx(e){if(e instanceof mi){const t={};for(const n in e.shape){const s=e.shape[n];t[n]=Ju.create(Cx(s))}return new mi({...e._def,shape:()=>t})}else return e instanceof eu?new eu({...e._def,type:Cx(e.element)}):e instanceof Ju?Ju.create(Cx(e.unwrap())):e instanceof Qm?Qm.create(Cx(e.unwrap())):e instanceof oh?oh.create(e.items.map(t=>Cx(t))):e}class mi extends gn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Pn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==nr.object){const d=this._getOrReturnCtx(t);return Qt(d,{code:Ft.invalid_type,expected:nr.object,received:d.parsedType}),Wr}const{status:s,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof ff&&this._def.unknownKeys==="strip"))for(const d in i.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=a[d],h=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new ah(i,h,i.path,d)),alwaysSet:d in i.data})}if(this._def.catchall instanceof ff){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(d==="strict")l.length>0&&(Qt(i,{code:Ft.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const h=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new ah(i,h,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const h=await u.key,f=await u.value;d.push({key:h,value:f,alwaysSet:u.alwaysSet})}return d}).then(d=>Mo.mergeObjectSync(s,d)):Mo.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return _r.errToObj,new mi({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,s)=>{var i,a,o,l;const c=(o=(a=(i=this._def).errorMap)===null||a===void 0?void 0:a.call(i,n,s).message)!==null&&o!==void 0?o:s.defaultError;return n.code==="unrecognized_keys"?{message:(l=_r.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new mi({...this._def,unknownKeys:"strip"})}passthrough(){return new mi({...this._def,unknownKeys:"passthrough"})}extend(t){return new mi({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new mi({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:qr.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new mi({...this._def,catchall:t})}pick(t){const n={};return Pn.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(n[s]=this.shape[s])}),new mi({...this._def,shape:()=>n})}omit(t){const n={};return Pn.objectKeys(this.shape).forEach(s=>{t[s]||(n[s]=this.shape[s])}),new mi({...this._def,shape:()=>n})}deepPartial(){return Cx(this)}partial(t){const n={};return Pn.objectKeys(this.shape).forEach(s=>{const i=this.shape[s];t&&!t[s]?n[s]=i:n[s]=i.optional()}),new mi({...this._def,shape:()=>n})}required(t){const n={};return Pn.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])n[s]=this.shape[s];else{let a=this.shape[s];for(;a instanceof Ju;)a=a._def.innerType;n[s]=a}}),new mi({...this._def,shape:()=>n})}keyof(){return Tre(Pn.objectKeys(this.shape))}}mi.create=(e,t)=>new mi({shape:()=>e,unknownKeys:"strip",catchall:ff.create(),typeName:qr.ZodObject,...an(t)});mi.strictCreate=(e,t)=>new mi({shape:()=>e,unknownKeys:"strict",catchall:ff.create(),typeName:qr.ZodObject,...an(t)});mi.lazycreate=(e,t)=>new mi({shape:e,unknownKeys:"strip",catchall:ff.create(),typeName:qr.ZodObject,...an(t)});class I1 extends gn{_parse(t){const{ctx:n}=this._processInputParams(t),s=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new gc(l.ctx.common.issues));return Qt(n,{code:Ft.invalid_union,unionErrors:o}),Wr}if(n.common.async)return Promise.all(s.map(async a=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const c of s){const d={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!a&&(a={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(c=>new gc(c));return Qt(n,{code:Ft.invalid_union,unionErrors:l}),Wr}}get options(){return this._def.options}}I1.create=(e,t)=>new I1({options:e,typeName:qr.ZodUnion,...an(t)});const Rh=e=>e instanceof $1?Rh(e.schema):e instanceof cu?Rh(e.innerType()):e instanceof B1?[e.value]:e instanceof Xm?e.options:e instanceof V1?Pn.objectValues(e.enum):e instanceof U1?Rh(e._def.innerType):e instanceof D1?[void 0]:e instanceof M1?[null]:e instanceof Ju?[void 0,...Rh(e.unwrap())]:e instanceof Qm?[null,...Rh(e.unwrap())]:e instanceof JD||e instanceof z1?Rh(e.unwrap()):e instanceof q1?Rh(e._def.innerType):[];class mC extends gn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nr.object)return Qt(n,{code:Ft.invalid_type,expected:nr.object,received:n.parsedType}),Wr;const s=this.discriminator,i=n.data[s],a=this.optionsMap.get(i);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Qt(n,{code:Ft.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Wr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,s){const i=new Map;for(const a of n){const o=Rh(a.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(i.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);i.set(l,a)}}return new mC({typeName:qr.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...an(s)})}}function gT(e,t){const n=Fh(e),s=Fh(t);if(e===t)return{valid:!0,data:e};if(n===nr.object&&s===nr.object){const i=Pn.objectKeys(t),a=Pn.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const c=gT(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(n===nr.array&&s===nr.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],c=gT(o,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===nr.date&&s===nr.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class L1 extends gn{_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=(a,o)=>{if(mT(a)||mT(o))return Wr;const l=gT(a.value,o.value);return l.valid?((pT(a)||pT(o))&&n.dirty(),{status:n.value,value:l.data}):(Qt(s,{code:Ft.invalid_intersection_types}),Wr)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}L1.create=(e,t,n)=>new L1({left:e,right:t,typeName:qr.ZodIntersection,...an(n)});class oh extends gn{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nr.array)return Qt(s,{code:Ft.invalid_type,expected:nr.array,received:s.parsedType}),Wr;if(s.data.length<this._def.items.length)return Qt(s,{code:Ft.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Wr;!this._def.rest&&s.data.length>this._def.items.length&&(Qt(s,{code:Ft.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new ah(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(a).then(o=>Mo.mergeArray(n,o)):Mo.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new oh({...this._def,rest:t})}}oh.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new oh({items:e,typeName:qr.ZodTuple,rest:null,...an(t)})};class F1 extends gn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nr.object)return Qt(s,{code:Ft.invalid_type,expected:nr.object,received:s.parsedType}),Wr;const i=[],a=this._def.keyType,o=this._def.valueType;for(const l in s.data)i.push({key:a._parse(new ah(s,l,s.path,l)),value:o._parse(new ah(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?Mo.mergeObjectAsync(n,i):Mo.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(t,n,s){return n instanceof gn?new F1({keyType:t,valueType:n,typeName:qr.ZodRecord,...an(s)}):new F1({keyType:Gd.create(),valueType:t,typeName:qr.ZodRecord,...an(n)})}}class H5 extends gn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nr.map)return Qt(s,{code:Ft.invalid_type,expected:nr.map,received:s.parsedType}),Wr;const i=this._def.keyType,a=this._def.valueType,o=[...s.data.entries()].map(([l,c],d)=>({key:i._parse(new ah(s,l,s.path,[d,"key"])),value:a._parse(new ah(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Wr;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(d.value,u.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Wr;(d.status==="dirty"||u.status==="dirty")&&n.dirty(),l.set(d.value,u.value)}return{status:n.value,value:l}}}}H5.create=(e,t,n)=>new H5({valueType:t,keyType:e,typeName:qr.ZodMap,...an(n)});class Rg extends gn{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.parsedType!==nr.set)return Qt(s,{code:Ft.invalid_type,expected:nr.set,received:s.parsedType}),Wr;const i=this._def;i.minSize!==null&&s.data.size<i.minSize.value&&(Qt(s,{code:Ft.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&s.data.size>i.maxSize.value&&(Qt(s,{code:Ft.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const a=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Wr;u.status==="dirty"&&n.dirty(),d.add(u.value)}return{status:n.value,value:d}}const l=[...s.data.values()].map((c,d)=>a._parse(new ah(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,n){return new Rg({...this._def,minSize:{value:t,message:_r.toString(n)}})}max(t,n){return new Rg({...this._def,maxSize:{value:t,message:_r.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Rg.create=(e,t)=>new Rg({valueType:e,minSize:null,maxSize:null,typeName:qr.ZodSet,...an(t)});class pv extends gn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nr.function)return Qt(n,{code:Ft.invalid_type,expected:nr.function,received:n.parsedType}),Wr;function s(l,c){return V5({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,B5(),a0].filter(d=>!!d),issueData:{code:Ft.invalid_arguments,argumentsError:c}})}function i(l,c){return V5({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,B5(),a0].filter(d=>!!d),issueData:{code:Ft.invalid_return_type,returnTypeError:c}})}const a={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof l0){const l=this;return il(async function(...c){const d=new gc([]),u=await l._def.args.parseAsync(c,a).catch(m=>{throw d.addIssue(s(c,m)),d}),h=await Reflect.apply(o,this,u);return await l._def.returns._def.type.parseAsync(h,a).catch(m=>{throw d.addIssue(i(h,m)),d})})}else{const l=this;return il(function(...c){const d=l._def.args.safeParse(c,a);if(!d.success)throw new gc([s(c,d.error)]);const u=Reflect.apply(o,this,d.data),h=l._def.returns.safeParse(u,a);if(!h.success)throw new gc([i(u,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new pv({...this._def,args:oh.create(t).rest(pg.create())})}returns(t){return new pv({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,s){return new pv({args:t||oh.create([]).rest(pg.create()),returns:n||pg.create(),typeName:qr.ZodFunction,...an(s)})}}class $1 extends gn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}$1.create=(e,t)=>new $1({getter:e,typeName:qr.ZodLazy,...an(t)});class B1 extends gn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Qt(n,{received:n.data,code:Ft.invalid_literal,expected:this._def.value}),Wr}return{status:"valid",value:t.data}}get value(){return this._def.value}}B1.create=(e,t)=>new B1({value:e,typeName:qr.ZodLiteral,...an(t)});function Tre(e,t){return new Xm({values:e,typeName:qr.ZodEnum,...an(t)})}class Xm extends gn{constructor(){super(...arguments),gb.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),s=this._def.values;return Qt(n,{expected:Pn.joinValues(s),received:n.parsedType,code:Ft.invalid_type}),Wr}if(U5(this,gb)||Cre(this,gb,new Set(this._def.values)),!U5(this,gb).has(t.data)){const n=this._getOrReturnCtx(t),s=this._def.values;return Qt(n,{received:n.data,code:Ft.invalid_enum_value,options:s}),Wr}return il(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Xm.create(t,{...this._def,...n})}exclude(t,n=this._def){return Xm.create(this.options.filter(s=>!t.includes(s)),{...this._def,...n})}}gb=new WeakMap;Xm.create=Tre;class V1 extends gn{constructor(){super(...arguments),xb.set(this,void 0)}_parse(t){const n=Pn.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==nr.string&&s.parsedType!==nr.number){const i=Pn.objectValues(n);return Qt(s,{expected:Pn.joinValues(i),received:s.parsedType,code:Ft.invalid_type}),Wr}if(U5(this,xb)||Cre(this,xb,new Set(Pn.getValidEnumValues(this._def.values))),!U5(this,xb).has(t.data)){const i=Pn.objectValues(n);return Qt(s,{received:s.data,code:Ft.invalid_enum_value,options:i}),Wr}return il(t.data)}get enum(){return this._def.values}}xb=new WeakMap;V1.create=(e,t)=>new V1({values:e,typeName:qr.ZodNativeEnum,...an(t)});class l0 extends gn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==nr.promise&&n.common.async===!1)return Qt(n,{code:Ft.invalid_type,expected:nr.promise,received:n.parsedType}),Wr;const s=n.parsedType===nr.promise?n.data:Promise.resolve(n.data);return il(s.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}l0.create=(e,t)=>new l0({type:e,typeName:qr.ZodPromise,...an(t)});class cu extends gn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:s}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Qt(s,o),o.fatal?n.abort():n.dirty()},get path(){return s.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(s.data,a);if(s.common.async)return Promise.resolve(o).then(async l=>{if(n.value==="aborted")return Wr;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?Wr:c.status==="dirty"||n.value==="dirty"?Gx(c.value):c});{if(n.value==="aborted")return Wr;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?Wr:l.status==="dirty"||n.value==="dirty"?Gx(l.value):l}}if(i.type==="refinement"){const o=l=>{const c=i.refinement(l,a);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Wr:(l.status==="dirty"&&n.dirty(),o(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Wr:(l.status==="dirty"&&n.dirty(),o(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!Eg(o))return o;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>Eg(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:n.value,value:l})):o);Pn.assertNever(i)}}cu.create=(e,t,n)=>new cu({schema:e,typeName:qr.ZodEffects,effect:t,...an(n)});cu.createWithPreprocess=(e,t,n)=>new cu({schema:t,effect:{type:"preprocess",transform:e},typeName:qr.ZodEffects,...an(n)});class Ju extends gn{_parse(t){return this._getType(t)===nr.undefined?il(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ju.create=(e,t)=>new Ju({innerType:e,typeName:qr.ZodOptional,...an(t)});class Qm extends gn{_parse(t){return this._getType(t)===nr.null?il(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Qm.create=(e,t)=>new Qm({innerType:e,typeName:qr.ZodNullable,...an(t)});class U1 extends gn{_parse(t){const{ctx:n}=this._processInputParams(t);let s=n.data;return n.parsedType===nr.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}U1.create=(e,t)=>new U1({innerType:e,typeName:qr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...an(t)});class q1 extends gn{_parse(t){const{ctx:n}=this._processInputParams(t),s={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return O1(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new gc(s.common.issues)},input:s.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new gc(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}q1.create=(e,t)=>new q1({innerType:e,typeName:qr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...an(t)});class W5 extends gn{_parse(t){if(this._getType(t)!==nr.nan){const s=this._getOrReturnCtx(t);return Qt(s,{code:Ft.invalid_type,expected:nr.nan,received:s.parsedType}),Wr}return{status:"valid",value:t.data}}}W5.create=e=>new W5({typeName:qr.ZodNaN,...an(e)});const BAe=Symbol("zod_brand");class JD extends gn{_parse(t){const{ctx:n}=this._processInputParams(t),s=n.data;return this._def.type._parse({data:s,path:n.path,parent:n})}unwrap(){return this._def.type}}class iw extends gn{_parse(t){const{status:n,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Wr:a.status==="dirty"?(n.dirty(),Gx(a.value)):this._def.out._parseAsync({data:a.value,path:s.path,parent:s})})();{const i=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Wr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:s.path,parent:s})}}static create(t,n){return new iw({in:t,out:n,typeName:qr.ZodPipeline})}}class z1 extends gn{_parse(t){const n=this._def.innerType._parse(t),s=i=>(Eg(i)&&(i.value=Object.freeze(i.value)),i);return O1(n)?n.then(i=>s(i)):s(n)}unwrap(){return this._def.innerType}}z1.create=(e,t)=>new z1({innerType:e,typeName:qr.ZodReadonly,...an(t)});function N7(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function Ere(e,t={},n){return e?o0.create().superRefine((s,i)=>{var a,o;const l=e(s);if(l instanceof Promise)return l.then(c=>{var d,u;if(!c){const h=N7(t,s),f=(u=(d=h.fatal)!==null&&d!==void 0?d:n)!==null&&u!==void 0?u:!0;i.addIssue({code:"custom",...h,fatal:f})}});if(!l){const c=N7(t,s),d=(o=(a=c.fatal)!==null&&a!==void 0?a:n)!==null&&o!==void 0?o:!0;i.addIssue({code:"custom",...c,fatal:d})}}):o0.create()}const VAe={object:mi.lazycreate};var qr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(qr||(qr={}));const UAe=(e,t={message:`Input not instance of ${e.name}`})=>Ere(n=>n instanceof e,t),Ore=Gd.create,Rre=Gm.create,qAe=W5.create,zAe=Ym.create,Dre=R1.create,HAe=Og.create,WAe=q5.create,KAe=D1.create,GAe=M1.create,YAe=o0.create,XAe=pg.create,QAe=ff.create,ZAe=z5.create,JAe=eu.create,eke=mi.create,tke=mi.strictCreate,rke=I1.create,nke=mC.create,ske=L1.create,ike=oh.create,ake=F1.create,oke=H5.create,lke=Rg.create,cke=pv.create,dke=$1.create,uke=B1.create,hke=Xm.create,fke=V1.create,mke=l0.create,S7=cu.create,pke=Ju.create,gke=Qm.create,xke=cu.createWithPreprocess,vke=iw.create,yke=()=>Ore().optional(),bke=()=>Rre().optional(),jke=()=>Dre().optional(),wke={string:e=>Gd.create({...e,coerce:!0}),number:e=>Gm.create({...e,coerce:!0}),boolean:e=>R1.create({...e,coerce:!0}),bigint:e=>Ym.create({...e,coerce:!0}),date:e=>Og.create({...e,coerce:!0})},Nke=Wr;var I=Object.freeze({__proto__:null,defaultErrorMap:a0,setErrorMap:xAe,getErrorMap:B5,makeIssue:V5,EMPTY_PATH:vAe,addIssueToContext:Qt,ParseStatus:Mo,INVALID:Wr,DIRTY:Gx,OK:il,isAborted:mT,isDirty:pT,isValid:Eg,isAsync:O1,get util(){return Pn},get objectUtil(){return fT},ZodParsedType:nr,getParsedType:Fh,ZodType:gn,datetimeRegex:Pre,ZodString:Gd,ZodNumber:Gm,ZodBigInt:Ym,ZodBoolean:R1,ZodDate:Og,ZodSymbol:q5,ZodUndefined:D1,ZodNull:M1,ZodAny:o0,ZodUnknown:pg,ZodNever:ff,ZodVoid:z5,ZodArray:eu,ZodObject:mi,ZodUnion:I1,ZodDiscriminatedUnion:mC,ZodIntersection:L1,ZodTuple:oh,ZodRecord:F1,ZodMap:H5,ZodSet:Rg,ZodFunction:pv,ZodLazy:$1,ZodLiteral:B1,ZodEnum:Xm,ZodNativeEnum:V1,ZodPromise:l0,ZodEffects:cu,ZodTransformer:cu,ZodOptional:Ju,ZodNullable:Qm,ZodDefault:U1,ZodCatch:q1,ZodNaN:W5,BRAND:BAe,ZodBranded:JD,ZodPipeline:iw,ZodReadonly:z1,custom:Ere,Schema:gn,ZodSchema:gn,late:VAe,get ZodFirstPartyTypeKind(){return qr},coerce:wke,any:YAe,array:JAe,bigint:zAe,boolean:Dre,date:HAe,discriminatedUnion:nke,effect:S7,enum:hke,function:cke,instanceof:UAe,intersection:ske,lazy:dke,literal:uke,map:oke,nan:qAe,nativeEnum:fke,never:QAe,null:GAe,nullable:gke,number:Rre,object:eke,oboolean:jke,onumber:bke,optional:pke,ostring:yke,pipeline:vke,preprocess:xke,promise:mke,record:ake,set:lke,strictObject:tke,string:Ore,symbol:WAe,transformer:S7,tuple:ike,undefined:KAe,union:rke,unknown:XAe,void:ZAe,NEVER:Nke,ZodIssueCode:Ft,quotelessJson:gAe,ZodError:gc}),Ske="Label",Mre=b.forwardRef((e,t)=>r.jsx(ar.label,{...e,ref:t,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=e.onMouseDown)==null||i.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Mre.displayName=Ske;var Ire=Mre;const _ke=Yg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),je=b.forwardRef(({className:e,...t},n)=>r.jsx(Ire,{ref:n,className:Xe(_ke(),e),...t}));je.displayName=Ire.displayName;const du=YCe,Lre=b.createContext({}),ot=({...e})=>r.jsx(Lre.Provider,{value:{name:e.name},children:r.jsx(JCe,{...e})}),pC=()=>{const e=b.useContext(Lre),t=b.useContext(Fre),{getFieldState:n,formState:s}=fC(),i=n(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},Fre=b.createContext({}),at=b.forwardRef(({className:e,...t},n)=>{const s=b.useId();return r.jsx(Fre.Provider,{value:{id:s},children:r.jsx("div",{ref:n,className:Xe("space-y-2",e),...t})})});at.displayName="FormItem";const ht=b.forwardRef(({className:e,...t},n)=>{const{error:s,formItemId:i}=pC();return r.jsx(je,{ref:n,className:Xe(s&&"text-destructive",e),htmlFor:i,...t})});ht.displayName="FormLabel";const dt=b.forwardRef(({...e},t)=>{const{error:n,formItemId:s,formDescriptionId:i,formMessageId:a}=pC();return r.jsx(I_,{ref:t,id:s,"aria-describedby":n?`${i} ${a}`:`${i}`,"aria-invalid":!!n,...e})});dt.displayName="FormControl";const ys=b.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:s}=pC();return r.jsx("p",{ref:n,id:s,className:Xe("text-sm text-muted-foreground",e),...t})});ys.displayName="FormDescription";const ct=b.forwardRef(({className:e,children:t,...n},s)=>{const{error:i,formMessageId:a}=pC(),o=i?String((i==null?void 0:i.message)??""):t;return o?r.jsx("p",{ref:s,id:a,className:Xe("text-sm font-medium text-destructive",e),...n,children:o}):null});ct.displayName="FormMessage";var e6="Tabs",[Cke]=oa(e6,[Q0]),$re=Q0(),[Ake,t6]=Cke(e6),Bre=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=X0(l),[h,f]=bc({prop:s,onChange:i,defaultProp:a});return r.jsx(Ake,{scope:n,baseId:mc(),value:h,onValueChange:f,orientation:o,dir:u,activationMode:c,children:r.jsx(ar.div,{dir:u,"data-orientation":o,...d,ref:t})})});Bre.displayName=e6;var Vre="TabsList",Ure=b.forwardRef((e,t)=>{const{__scopeTabs:n,loop:s=!0,...i}=e,a=t6(Vre,n),o=$re(n);return r.jsx(eD,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:s,children:r.jsx(ar.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});Ure.displayName=Vre;var qre="TabsTrigger",zre=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,disabled:i=!1,...a}=e,o=t6(qre,n),l=$re(n),c=Kre(o.baseId,s),d=Gre(o.baseId,s),u=s===o.value;return r.jsx(tD,{asChild:!0,...l,focusable:!i,active:u,children:r.jsx(ar.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...a,ref:t,onMouseDown:$t(e.onMouseDown,h=>{!i&&h.button===0&&h.ctrlKey===!1?o.onValueChange(s):h.preventDefault()}),onKeyDown:$t(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(s)}),onFocus:$t(e.onFocus,()=>{const h=o.activationMode!=="manual";!u&&!i&&h&&o.onValueChange(s)})})})});zre.displayName=qre;var Hre="TabsContent",Wre=b.forwardRef((e,t)=>{const{__scopeTabs:n,value:s,forceMount:i,children:a,...o}=e,l=t6(Hre,n),c=Kre(l.baseId,s),d=Gre(l.baseId,s),u=s===l.value,h=b.useRef(u);return b.useEffect(()=>{const f=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(f)},[]),r.jsx(la,{present:i||u,children:({present:f})=>r.jsx(ar.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!f,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:f&&a})})});Wre.displayName=Hre;function Kre(e,t){return`${e}-trigger-${t}`}function Gre(e,t){return`${e}-content-${t}`}var kke=Bre,Yre=Ure,Xre=zre,Qre=Wre;const aa=kke,Qi=b.forwardRef(({className:e,...t},n)=>r.jsx(Yre,{ref:n,className:Xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));Qi.displayName=Yre.displayName;const Pr=b.forwardRef(({className:e,...t},n)=>r.jsx(Xre,{ref:n,className:Xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));Pr.displayName=Xre.displayName;const Rr=b.forwardRef(({className:e,...t},n)=>r.jsx(Qre,{ref:n,className:Xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Rr.displayName=Qre.displayName;var Pke=Object.defineProperty,Tke=Object.defineProperties,Eke=Object.getOwnPropertyDescriptors,K5=Object.getOwnPropertySymbols,Zre=Object.prototype.hasOwnProperty,Jre=Object.prototype.propertyIsEnumerable,_7=(e,t,n)=>t in e?Pke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oke=(e,t)=>{for(var n in t||(t={}))Zre.call(t,n)&&_7(e,n,t[n]);if(K5)for(var n of K5(t))Jre.call(t,n)&&_7(e,n,t[n]);return e},Rke=(e,t)=>Tke(e,Eke(t)),Dke=(e,t)=>{var n={};for(var s in e)Zre.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&K5)for(var s of K5(e))t.indexOf(s)<0&&Jre.call(e,s)&&(n[s]=e[s]);return n};function Mke(e){let t=setTimeout(e,0),n=setTimeout(e,10),s=setTimeout(e,50);return[t,n,s]}function Ike(e){let t=b.useRef();return b.useEffect(()=>{t.current=e}),t.current}var Lke=18,ene=40,Fke=`${ene}px`,$ke=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Bke({containerRef:e,inputRef:t,pushPasswordManagerStrategy:n,isFocused:s}){let[i,a]=b.useState(!1),[o,l]=b.useState(!1),[c,d]=b.useState(!1),u=b.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&i&&o,[i,o,n]),h=b.useCallback(()=>{let f=e.current,m=t.current;if(!f||!m||c||n==="none")return;let p=f,g=p.getBoundingClientRect().left+p.offsetWidth,v=p.getBoundingClientRect().top+p.offsetHeight/2,x=g-Lke,y=v;document.querySelectorAll($ke).length===0&&document.elementFromPoint(x,y)===f||(a(!0),d(!0))},[e,t,c,n]);return b.useEffect(()=>{let f=e.current;if(!f||n==="none")return;function m(){let g=window.innerWidth-f.getBoundingClientRect().right;l(g>=ene)}m();let p=setInterval(m,1e3);return()=>{clearInterval(p)}},[e,n]),b.useEffect(()=>{let f=s||document.activeElement===t.current;if(n==="none"||!f)return;let m=setTimeout(h,0),p=setTimeout(h,2e3),g=setTimeout(h,5e3),v=setTimeout(()=>{d(!0)},6e3);return()=>{clearTimeout(m),clearTimeout(p),clearTimeout(g),clearTimeout(v)}},[t,s,n,h]),{hasPWMBadge:i,willPushPWMBadge:u,PWM_BADGE_SPACE_WIDTH:Fke}}var tne=b.createContext({}),rne=b.forwardRef((e,t)=>{var n=e,{value:s,onChange:i,maxLength:a,textAlign:o="left",pattern:l,placeholder:c,inputMode:d="numeric",onComplete:u,pushPasswordManagerStrategy:h="increase-width",pasteTransformer:f,containerClassName:m,noScriptCSSFallback:p=Vke,render:g,children:v}=n,x=Dke(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),y,j,w,N,S;let[T,C]=b.useState(typeof x.defaultValue=="string"?x.defaultValue:""),A=s??T,R=Ike(A),k=b.useCallback(ve=>{i==null||i(ve),C(ve)},[i]),O=b.useMemo(()=>l?typeof l=="string"?new RegExp(l):l:null,[l]),$=b.useRef(null),D=b.useRef(null),q=b.useRef({value:A,onChange:k,isIOS:typeof window<"u"&&((j=(y=window==null?void 0:window.CSS)==null?void 0:y.supports)==null?void 0:j.call(y,"-webkit-touch-callout","none"))}),M=b.useRef({prev:[(w=$.current)==null?void 0:w.selectionStart,(N=$.current)==null?void 0:N.selectionEnd,(S=$.current)==null?void 0:S.selectionDirection]});b.useImperativeHandle(t,()=>$.current,[]),b.useEffect(()=>{let ve=$.current,ee=D.current;if(!ve||!ee)return;q.current.value!==ve.value&&q.current.onChange(ve.value),M.current.prev=[ve.selectionStart,ve.selectionEnd,ve.selectionDirection];function Ee(){if(document.activeElement!==ve){F(null),G(null);return}let De=ve.selectionStart,tt=ve.selectionEnd,Qe=ve.selectionDirection,xe=ve.maxLength,ae=ve.value,we=M.current.prev,Te=-1,qe=-1,Ke;if(ae.length!==0&&De!==null&&tt!==null){let Y=De===tt,Ct=De===ae.length&&ae.length<xe;if(Y&&!Ct){let Vt=De;if(Vt===0)Te=0,qe=1,Ke="forward";else if(Vt===xe)Te=Vt-1,qe=Vt,Ke="backward";else if(xe>1&&ae.length>1){let pt=0;if(we[0]!==null&&we[1]!==null){Ke=Vt<we[1]?"backward":"forward";let Ht=we[0]===we[1]&&we[0]<xe;Ke==="backward"&&!Ht&&(pt=-1)}Te=pt+Vt,qe=pt+Vt+1}}Te!==-1&&qe!==-1&&Te!==qe&&$.current.setSelectionRange(Te,qe,Ke)}let Ge=Te!==-1?Te:De,He=qe!==-1?qe:tt,nt=Ke??Qe;F(Ge),G(He),M.current.prev=[Ge,He,nt]}if(document.addEventListener("selectionchange",Ee,{capture:!0}),Ee(),document.activeElement===ve&&z(!0),!document.getElementById("input-otp-style")){let De=document.createElement("style");if(De.id="input-otp-style",document.head.appendChild(De),De.sheet){let tt="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Fy(De.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Fy(De.sheet,`[data-input-otp]:autofill { ${tt} }`),Fy(De.sheet,`[data-input-otp]:-webkit-autofill { ${tt} }`),Fy(De.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Fy(De.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Re=()=>{ee&&ee.style.setProperty("--root-height",`${ve.clientHeight}px`)};Re();let oe=new ResizeObserver(Re);return oe.observe(ve),()=>{document.removeEventListener("selectionchange",Ee,{capture:!0}),oe.disconnect()}},[]);let[L,V]=b.useState(!1),[P,z]=b.useState(!1),[Z,F]=b.useState(null),[W,G]=b.useState(null);b.useEffect(()=>{Mke(()=>{var ve,ee,Ee,Re;(ve=$.current)==null||ve.dispatchEvent(new Event("input"));let oe=(ee=$.current)==null?void 0:ee.selectionStart,De=(Ee=$.current)==null?void 0:Ee.selectionEnd,tt=(Re=$.current)==null?void 0:Re.selectionDirection;oe!==null&&De!==null&&(F(oe),G(De),M.current.prev=[oe,De,tt])})},[A,P]),b.useEffect(()=>{R!==void 0&&A!==R&&R.length<a&&A.length===a&&(u==null||u(A))},[a,u,R,A]);let H=Bke({containerRef:D,inputRef:$,pushPasswordManagerStrategy:h,isFocused:P}),se=b.useCallback(ve=>{let ee=ve.currentTarget.value.slice(0,a);if(ee.length>0&&O&&!O.test(ee)){ve.preventDefault();return}typeof R=="string"&&ee.length<R.length&&document.dispatchEvent(new Event("selectionchange")),k(ee)},[a,k,R,O]),J=b.useCallback(()=>{var ve;if($.current){let ee=Math.min($.current.value.length,a-1),Ee=$.current.value.length;(ve=$.current)==null||ve.setSelectionRange(ee,Ee),F(ee),G(Ee)}z(!0)},[a]),ie=b.useCallback(ve=>{var ee,Ee;let Re=$.current;if(!f&&(!q.current.isIOS||!ve.clipboardData||!Re))return;let oe=ve.clipboardData.getData("text/plain"),De=f?f(oe):oe;ve.preventDefault();let tt=(ee=$.current)==null?void 0:ee.selectionStart,Qe=(Ee=$.current)==null?void 0:Ee.selectionEnd,xe=(tt!==Qe?A.slice(0,tt)+De+A.slice(Qe):A.slice(0,tt)+De+A.slice(tt)).slice(0,a);if(xe.length>0&&O&&!O.test(xe))return;Re.value=xe,k(xe);let ae=Math.min(xe.length,a-1),we=xe.length;Re.setSelectionRange(ae,we),F(ae),G(we)},[a,k,O,A]),X=b.useMemo(()=>({position:"relative",cursor:x.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[x.disabled]),he=b.useMemo(()=>({position:"absolute",inset:0,width:H.willPushPWMBadge?`calc(100% + ${H.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:H.willPushPWMBadge?`inset(0 ${H.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:o,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[H.PWM_BADGE_SPACE_WIDTH,H.willPushPWMBadge,o]),fe=b.useMemo(()=>b.createElement("input",Rke(Oke({autoComplete:x.autoComplete||"one-time-code"},x),{"data-input-otp":!0,"data-input-otp-placeholder-shown":A.length===0||void 0,"data-input-otp-mss":Z,"data-input-otp-mse":W,inputMode:d,pattern:O==null?void 0:O.source,"aria-placeholder":c,style:he,maxLength:a,value:A,ref:$,onPaste:ve=>{var ee;ie(ve),(ee=x.onPaste)==null||ee.call(x,ve)},onChange:se,onMouseOver:ve=>{var ee;V(!0),(ee=x.onMouseOver)==null||ee.call(x,ve)},onMouseLeave:ve=>{var ee;V(!1),(ee=x.onMouseLeave)==null||ee.call(x,ve)},onFocus:ve=>{var ee;J(),(ee=x.onFocus)==null||ee.call(x,ve)},onBlur:ve=>{var ee;z(!1),(ee=x.onBlur)==null||ee.call(x,ve)}})),[se,J,ie,d,he,a,W,Z,x,O==null?void 0:O.source,A]),Q=b.useMemo(()=>({slots:Array.from({length:a}).map((ve,ee)=>{var Ee;let Re=P&&Z!==null&&W!==null&&(Z===W&&ee===Z||ee>=Z&&ee<W),oe=A[ee]!==void 0?A[ee]:null,De=A[0]!==void 0?null:(Ee=c==null?void 0:c[ee])!=null?Ee:null;return{char:oe,placeholderChar:De,isActive:Re,hasFakeCaret:Re&&oe===null}}),isFocused:P,isHovering:!x.disabled&&L}),[P,L,a,W,Z,x.disabled,A]),Oe=b.useMemo(()=>g?g(Q):b.createElement(tne.Provider,{value:Q},v),[v,Q,g]);return b.createElement(b.Fragment,null,p!==null&&b.createElement("noscript",null,b.createElement("style",null,p)),b.createElement("div",{ref:D,"data-input-otp-container":!0,style:X,className:m},Oe,b.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},fe)))});rne.displayName="Input";function Fy(e,t){try{e.insertRule(t)}catch{console.error("input-otp could not insert CSS rule:",t)}}var Vke=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const nne=b.forwardRef(({className:e,containerClassName:t,...n},s)=>r.jsx(rne,{ref:s,containerClassName:Xe("flex items-center gap-2 has-[:disabled]:opacity-50",t),className:Xe("disabled:cursor-not-allowed",e),...n}));nne.displayName="InputOTP";const sne=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("flex items-center",e),...t}));sne.displayName="InputOTPGroup";const ine=b.forwardRef(({index:e,className:t,...n},s)=>{const i=b.useContext(tne),{char:a,hasFakeCaret:o,isActive:l}=i.slots[e];return r.jsxs("div",{ref:s,className:Xe("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",l&&"z-10 ring-2 ring-ring ring-offset-background",t),...n,children:[a,o&&r.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});ine.displayName="InputOTPSlot";const Uke=b.forwardRef(({...e},t)=>r.jsx("div",{ref:t,role:"separator",...e,children:r.jsx(Yxe,{})}));Uke.displayName="InputOTPSeparator";const Qk={primary:"#10b981"},qke=I.object({identifier:I.string().min(3,"Enter username, mobile number, or email"),password:I.string().optional(),captchaAnswer:I.string().optional(),authMode:I.enum(["password","otp"]),otpChannel:I.enum(["sms","email"]).optional()}).superRefine((e,t)=>{e.authMode==="password"&&(!e.password||e.password.trim().length===0)&&t.addIssue({code:I.ZodIssueCode.custom,path:["password"],message:"Password is required"}),e.authMode==="otp"&&!e.otpChannel&&t.addIssue({code:I.ZodIssueCode.custom,path:["otpChannel"],message:"Choose where to receive the OTP"})});function zke(){const[,e]=Dr(),{toast:t}=Tr(),[n,s]=b.useState("user"),[i,a]=b.useState(""),[o,l]=b.useState(!1),[c,d]=b.useState(!0),[u,h]=b.useState(null),[f,m]=b.useState(""),[p,g]=b.useState(null),[v,x]=b.useState(!1),[y,j]=b.useState({sms:!0,email:!0}),[w,N]=b.useState(!1),[S,T]=b.useState(!1),C=lu({resolver:hf(qke),defaultValues:{identifier:"",password:"",captchaAnswer:"",authMode:"password",otpChannel:"sms"}}),A=C.watch("authMode"),R=H=>tC(H.role),k=H=>{const se=H??C.getValues("otpChannel");if(se&&y[se]){C.setValue("otpChannel",se,{shouldValidate:!1});return}if(y.sms){C.setValue("otpChannel","sms",{shouldValidate:!1});return}if(y.email){C.setValue("otpChannel","email",{shouldValidate:!1});return}C.setValue("otpChannel",void 0,{shouldValidate:!1})},O=H=>{A!==H&&(h(null),m(""),g(null),C.setValue("authMode",H,{shouldValidate:!1}),H==="otp"&&(C.setValue("password",""),C.clearErrors("password"),k()))},$=b.useCallback(async()=>{try{l(!0);const se=await(await lt("GET","/api/auth/captcha")).json();if(se.enabled===!1){d(!1),a(""),C.setValue("captchaAnswer","");return}d(!0),a(se.question),C.setValue("captchaAnswer","")}catch(H){t({title:"Captcha unavailable",description:(H==null?void 0:H.message)||"Unable to load captcha. Please try again.",variant:"destructive"})}finally{l(!1)}},[C,t]);b.useEffect(()=>{$()},[$]),b.useEffect(()=>{const H=new URLSearchParams(window.location.search),se=H.get("audience")||H.get("role");(se==="user"||se==="owner")&&s("user"),(se==="office"||se==="officer")&&s("office")},[]),b.useEffect(()=>{let H=!1;return(async()=>{try{const ie=await(await lt("GET","/api/auth/login/options")).json();if(!H){const X=!!(ie!=null&&ie.smsOtpEnabled),he=!!(ie!=null&&ie.emailOtpEnabled),fe=X||he;j({sms:X,email:he}),x(fe);const Q=!!(ie!=null&&ie.otpRequired);T(Q),k(X?"sms":he?"email":void 0),N(!0)}}catch(J){H||(console.warn("[auth] Failed to load login options",J),x(!1),N(!0))}})(),()=>{H=!0}},[]),b.useEffect(()=>{k()},[y.sms,y.email]);const D=b.useRef("citizen"),[q,M]=b.useState(null);b.useEffect(()=>{const se=new URLSearchParams(window.location.search).get("token");se&&se.length>20&&(window.history.replaceState({},document.title,window.location.pathname),L(se)),lt("GET","/api/auth/hpsso/config").then(J=>J.json()).then(J=>M(J)).catch(J=>console.error("Failed to load SSO config:",J))},[]),b.useEffect(()=>{if(q!=null&&q.loginScriptUrl&&!document.querySelector(`script[src="${q.loginScriptUrl}"]`)){const H=document.createElement("script");H.src=q.loginScriptUrl,H.defer=!0,document.body.appendChild(H)}},[q==null?void 0:q.loginScriptUrl]);const L=async H=>{try{const se=document.querySelector(".backdrop"),J=document.getElementById("iframeContainer");J&&(J.style.display="none");const X=await(await lt("POST","/api/auth/hpsso/callback",{token:H,type:D.current})).json();if(X.success)er.clear(),X.action==="login"||X.action==="register"?(t({title:"Login Successful",description:"Redirecting..."}),await new Promise(he=>setTimeout(he,500)),window.location.reload()):X.action==="link_required"&&(t({title:"Account Linking Required",description:X.message}),window.location.reload());else throw new Error(X.error||"SSO Login failed")}catch(se){t({title:"SSO Error",description:se.message,variant:"destructive"})}};b.useEffect(()=>{const H=se=>{if(se.data){if(se.data.success===!0){if(se.data.action==="otp_required"){const{challengeId:J,maskedMobile:ie,expiresAt:X,message:he,channel:fe}=se.data;h({id:J,expiresAt:X,channel:fe??"sms",maskedMobile:ie}),m(""),g(null),t({title:"Verification Required",description:he||"Please verify your identity."});const Q=document.querySelector(".backdrop"),Oe=document.getElementById("iframeContainer");Q&&(Q.style.display="none"),Oe&&(Oe.style.display="none");return}if(se.data.action==="login"){t({title:"Login Successful",description:"Redirecting..."});const J=document.querySelector(".backdrop"),ie=document.getElementById("iframeContainer");J&&(J.style.display="none"),ie&&(ie.style.display="none"),setTimeout(()=>window.location.reload(),500);return}if(se.data.action==="register"){t({title:"Registration Required",description:"Redirecting to registration form..."});const J=document.querySelector(".backdrop"),ie=document.getElementById("iframeContainer");J&&(J.style.display="none"),ie&&(ie.style.display="none");const X=encodeURIComponent(JSON.stringify(se.data));window.location.href=`/auth/hpsso-register?data=${X}`;return}se.data.action==="link_required"&&t({title:"Account Linking Required",description:se.data.message||"Please link your account."})}typeof se.data=="string"&&se.data.length>20?L(se.data):typeof se.data=="object"&&se.data.token&&!se.data.success&&L(se.data.token)}};return window.addEventListener("message",H),()=>window.removeEventListener("message",H)},[]);const V=(H="citizen",se)=>{const J=se||(q==null?void 0:q.serviceId);if(!(q!=null&&q.enabled)||!J){t({title:"Configuration Error",description:"SSO Service ID not configured",variant:"destructive"});return}if(D.current=H,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const fe=`https://sso.hp.gov.in/login-iframe?service_id=${J}&login_type=${H==="staff"?"staff":"citizen"}`;t({title:"Redirecting to Him Access",description:"Please complete authentication on the Him Access portal."}),setTimeout(()=>{window.location.href=fe},500);return}let X=window.getIframeSSO;if(!X)try{X=new Function("try { return getIframeSSO; } catch(e) { return undefined; }")()}catch(he){console.warn("Failed to resolve getIframeSSO via new Function",he)}if(typeof X=="function"){X(J,H);const he=document.querySelector(".backdrop"),fe=document.getElementById("iframeContainer");he&&(he.style.display="block"),fe&&(fe.style.display="block")}else t({title:"One moment",description:"SSO Service is initializing. Please try again in a few seconds."})},P=Ot({mutationFn:async H=>(await lt("POST","/api/auth/login",H)).json(),onSuccess:async H=>{if(H!=null&&H.otpRequired&&H.challengeId&&H.expiresAt){h({id:H.challengeId,expiresAt:H.expiresAt,channel:H.channel??"sms",maskedMobile:H.maskedMobile,maskedEmail:H.maskedEmail}),m(""),g(null),t({title:"OTP sent",description:`Enter the code sent to ${H.maskedMobile??H.maskedEmail??"your registered contact"}.`});return}if(!(H!=null&&H.user)){t({title:"Login failed",description:"Unexpected response from server.",variant:"destructive"});return}er.clear(),await(async(ie=3)=>{var X;for(let he=0;he<ie;he++){try{const Q=await(await lt("GET","/api/auth/me")).json();if((X=Q==null?void 0:Q.user)!=null&&X.id)return!0}catch{}he<ie-1&&await new Promise(fe=>setTimeout(fe,200))}return!1})()?(t({title:"Welcome back!",description:"You have successfully logged in."}),window.location.href=R(H.user)):(t({title:"Welcome back!",description:"Redirecting to dashboard..."}),await new Promise(ie=>setTimeout(ie,300)),window.location.href=R(H.user))},onError:H=>{t({title:"Login failed",description:H.message||"Invalid credentials",variant:"destructive"})}}),z=Ot({mutationFn:async({otp:H})=>(await lt("POST","/api/auth/login/verify-otp",{challengeId:u==null?void 0:u.id,otp:H})).json(),onSuccess:async H=>{er.clear(),await(async(ie=3)=>{var X;for(let he=0;he<ie;he++){try{const Q=await(await lt("GET","/api/auth/me")).json();if((X=Q==null?void 0:Q.user)!=null&&X.id)return!0}catch{}he<ie-1&&await new Promise(fe=>setTimeout(fe,200))}return!1})()?(t({title:"Welcome back!",description:"OTP verified successfully."}),e(R(H.user))):(t({title:"Welcome back!",description:"Redirecting to dashboard..."}),await new Promise(ie=>setTimeout(ie,300)),e(R(H.user)))},onError:H=>{g((H==null?void 0:H.message)||"OTP verification failed")}}),Z=H=>{var se;if(!u){if(c&&!((se=H.captchaAnswer)!=null&&se.trim())){C.setError("captchaAnswer",{message:"Please solve the security check"});return}P.mutate(H,{onSettled:()=>{c&&$()}})}},F=H=>{if(H.preventDefault(),!!u){if(f.trim().length!==6){g("Enter the 6-digit code sent to your phone.");return}g(null),z.mutate({otp:f})}},W=()=>{h(null),m(""),g(null),$()},G=u?new Date(u.expiresAt):null;return r.jsxs("div",{className:"min-h-screen flex bg-white font-sans text-gray-800",children:[r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-gray-900",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-[20s] hover:scale-105",style:{backgroundImage:`url(${pD})`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),r.jsxs("div",{className:"relative z-10 flex flex-col justify-between p-12 w-full h-full text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",onClick:()=>e("/"),children:[r.jsx("div",{className:"bg-white/10 backdrop-blur-md p-2 rounded-lg cursor-pointer hover:bg-white/20 transition",children:r.jsx(Es,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-semibold tracking-wide cursor-pointer",children:"Back to Home"})]}),r.jsxs("div",{className:"space-y-6 max-w-lg",style:{textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:[r.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:[r.jsx("span",{style:{color:Qk.primary},children:"Home Stay"})," ",r.jsx("br",{}),"Registration"]}),r.jsx("p",{className:"text-lg text-gray-200 leading-relaxed opacity-90",children:"Register under HP Homestay Rules 2025 and avail exclusive discounts:"}),r.jsxs("div",{className:"space-y-2 text-base text-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"10% Discount"})," on 3-year registration"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"5% Additional Discount"})," for women owners"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"50% Discount"})," for Pangi Sub-Division"]})]})]}),r.jsx("div",{className:"backdrop",style:{display:"none",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.6)",zIndex:9998,backdropFilter:"blur(4px)"}}),r.jsx("div",{id:"iframeContainer",className:"iframe-container",style:{display:"none",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"550px",maxWidth:"95vw",height:"650px",maxHeight:"95vh",background:"white",zIndex:9999,borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",overflow:"hidden",paddingTop:"0px"}})]}),r.jsx("div",{className:"text-xs text-white/40",children:" 2025 HP Tourism. Beautiful Himachal."})]})]}),r.jsx("div",{className:"flex-1 flex items-center justify-center p-6 md:p-12 relative",children:r.jsxs("div",{className:"max-w-[550px] w-full space-y-8",children:[r.jsxs("div",{className:"lg:hidden flex items-center gap-2 mb-6 text-gray-500",onClick:()=>e("/"),children:[r.jsx(Es,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900",children:u?"Verify OTP":"Welcome back"}),r.jsx("p",{className:"text-xl text-gray-500",children:u?"Please enter the verification code sent to your registered contact.":"Please enter your details to access your dashboard."})]}),u?r.jsxs("form",{onSubmit:F,className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsx("div",{className:"flex justify-center py-4",children:r.jsx(nne,{maxLength:6,value:f,onChange:H=>{m(H.replace(/\D/g,"")),g(null)},autoFocus:!0,children:r.jsx(sne,{children:[0,1,2,3,4,5].map(H=>r.jsx(ine,{index:H,className:"h-12 w-12 border-gray-300 text-lg"},`otp-slot-${H}`))})})}),G&&r.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["Code expires at ",G.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]}),p&&r.jsx("p",{className:"text-sm text-center text-red-600 font-medium bg-red-50 p-2 rounded",children:p}),r.jsx(te,{type:"submit",className:"w-full h-12 text-base font-semibold shadow-lg hover:shadow-xl transition-all rounded-lg text-white",style:{backgroundColor:Qk.primary},disabled:z.isPending||f.length!==6,children:z.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Sign In"}),r.jsx(te,{type:"button",variant:"ghost",className:"w-full text-gray-600 hover:text-green-700 hover:bg-green-50 transition-all font-semibold",onClick:W,children:"Use a different account"})]}):r.jsxs(aa,{value:n,onValueChange:H=>{s(H),e(`/login?audience=${H}`),O("password")},className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-2 bg-gray-100 p-1 h-14 rounded-xl mb-8",children:[r.jsxs(Pr,{value:"user",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:text-emerald-600 data-[state=active]:border data-[state=active]:border-emerald-500 data-[state=active]:shadow-sm text-gray-600 font-medium transition-all",children:[r.jsx(li,{className:"w-4 h-4 mr-2"}),"Citizen / Owner"]}),r.jsxs(Pr,{value:"office",className:"rounded-lg data-[state=active]:bg-white data-[state=active]:text-blue-500 data-[state=active]:border data-[state=active]:border-blue-400 data-[state=active]:shadow-sm text-gray-600 font-medium transition-all",children:[r.jsx(Cl,{className:"w-4 h-4 mr-2"}),"Department"]})]}),r.jsx(du,{...C,children:r.jsxs("form",{onSubmit:C.handleSubmit(Z),className:"space-y-7",children:[r.jsx(ot,{control:C.control,name:"identifier",render:({field:H})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:n==="user"?"Mobile Number or Email":"Username"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:n==="user"?r.jsx(Kg,{className:"w-5 h-5"}):r.jsx(li,{className:"w-5 h-5"})}),r.jsx(Pe,{...H,className:"pl-10 h-14 bg-gray-50 border-gray-200 focus-visible:ring-green-500 focus-visible:border-green-500 transition-all rounded-lg text-lg",placeholder:n==="user"?"e.g. 9876543210":"Enter official username",autoComplete:"off"})]})}),r.jsx(ct,{})]})}),r.jsx("input",{type:"hidden",...C.register("authMode")}),A==="password"&&r.jsx(ot,{control:C.control,name:"password",render:({field:H})=>r.jsxs(at,{children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Password"}),v&&r.jsx("button",{type:"button",onClick:()=>O("otp"),className:"text-sm font-bold text-green-600 hover:text-green-700 hover:underline",children:"Login via OTP"})]}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(su,{className:"w-5 h-5"})}),r.jsx(Pe,{type:"password",...H,className:"pl-10 h-14 bg-gray-50 border-gray-200 focus-visible:ring-green-500 focus-visible:border-green-500 transition-all rounded-lg text-lg",placeholder:"",autoComplete:"new-password"})]})}),r.jsx(ct,{})]})}),n==="user"&&(q==null?void 0:q.enabled)&&A==="password"&&r.jsxs("div",{className:"pt-2 pb-2",children:[r.jsxs("button",{type:"button",onClick:()=>V("citizen",q.serviceId),className:"w-full flex items-center justify-center gap-3 bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-semibold py-3 px-4 rounded-lg transition-all shadow-sm group",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center text-orange-600 font-bold text-xs",children:"H"}),r.jsx("span",{children:"Login with Him Access"}),r.jsx(sa,{className:"w-4 h-4 text-gray-400 group-hover:text-gray-600 transition-colors"})]}),r.jsxs("div",{className:"relative flex py-3 items-center",children:[r.jsx("div",{className:"flex-grow border-t border-gray-200"}),r.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs uppercase font-medium",children:"Or Login with Credentials"}),r.jsx("div",{className:"flex-grow border-t border-gray-200"})]})]}),n==="office"&&(q==null?void 0:q.enabled)&&A==="password"&&r.jsxs("div",{className:"pt-2 pb-2",children:[r.jsxs("button",{type:"button",onClick:()=>V("staff",q.staffServiceId),className:"w-full flex items-center justify-center gap-3 bg-white border border-blue-300 hover:bg-blue-50 text-blue-700 font-semibold py-3 px-4 rounded-lg transition-all shadow-sm group",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold text-xs",children:"H"}),r.jsx("span",{children:"Login with Him Access (Staff)"}),r.jsx(sa,{className:"w-4 h-4 text-blue-400 group-hover:text-blue-600 transition-colors"})]}),r.jsxs("div",{className:"relative flex py-3 items-center",children:[r.jsx("div",{className:"flex-grow border-t border-gray-200"}),r.jsx("span",{className:"flex-shrink-0 mx-4 text-gray-400 text-xs uppercase font-medium",children:"Or Official Login"}),r.jsx("div",{className:"flex-grow border-t border-gray-200"})]})]}),A==="otp"&&r.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx(ht,{className:"text-gray-700 font-medium",children:"Authentication Method"}),r.jsx("button",{type:"button",onClick:()=>O("password"),className:"text-xs font-bold text-gray-500 hover:text-gray-700 hover:underline",children:"Back to Password"})]}),r.jsx(ot,{control:C.control,name:"otpChannel",render:({field:H})=>r.jsxs(at,{children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:["sms","email"].map(se=>r.jsx(te,{type:"button",variant:"outline",className:`h-10 ${H.value===se?"border-green-500 bg-green-50 text-green-700":"text-gray-600"}`,onClick:()=>y[se]&&H.onChange(se),disabled:!y[se],children:se==="sms"?"Send SMS":"Send Email"},se))}),r.jsx(ct,{})]})}),r.jsx("div",{className:"text-xs text-gray-500",children:"We will send a one-time password to your selected contact method."})]}),c?r.jsx(ot,{control:C.control,name:"captchaAnswer",render:({field:H})=>r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex-1 bg-gray-100 border border-gray-200 rounded-lg h-14 flex items-center justify-between px-4 select-none relative overflow-hidden group hover:border-gray-300 transition-colors",children:[r.jsx("div",{className:"flex items-center justify-center w-full relative z-10",children:o?r.jsx(vt,{className:"w-5 h-5 animate-spin text-gray-400"}):r.jsx("span",{className:"font-mono text-xl font-bold tracking-wider text-gray-700",children:i})}),r.jsx("div",{className:"absolute inset-0 bg-gray-50 opacity-0 group-hover:opacity-100 transition-opacity"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx(te,{type:"button",onClick:()=>$(),variant:"outline",className:"h-14 w-14 rounded-lg border-gray-200 hover:bg-gray-50 hover:text-green-600 transition-colors",disabled:o,title:"Refresh Captcha",children:r.jsx(Na,{className:`w-5 h-5 ${o?"animate-spin":""}`})})}),r.jsx("div",{className:"w-24 sm:w-32",children:r.jsx(dt,{children:r.jsx(Pe,{...H,className:"h-14 text-center font-bold text-lg tracking-widest bg-white border-gray-200 focus-visible:ring-green-500 focus-visible:border-green-500 rounded-lg placeholder:font-normal placeholder:tracking-normal placeholder:text-gray-300 placeholder:text-sm",placeholder:"Answer",autoComplete:"off"})})})]})}):r.jsx("div",{className:"text-xs text-center text-gray-300 border border-dashed border-gray-200 rounded p-2",children:"Captcha disabled for this environment"}),r.jsx(ct,{className:"text-center"}),r.jsx(te,{type:"submit",className:"w-full h-14 text-lg font-bold shadow-lg shadow-green-200 hover:shadow-xl hover:shadow-green-300 transition-all rounded-lg text-white",style:{backgroundColor:Qk.primary},disabled:P.isPending,children:P.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-5 w-5 animate-spin"}),"Signing In..."]}):r.jsxs(r.Fragment,{children:["Sign In ",r.jsx(sa,{className:"ml-2 h-5 w-5 opacity-80"})]})}),r.jsx("div",{className:"text-center",children:r.jsx("button",{type:"button",onClick:()=>e("/forgot-password"),className:"text-sm font-medium text-gray-400 hover:text-gray-600 transition-colors",children:"Forgot Password?"})})]})})]}),r.jsxs("div",{className:"mt-8 pt-8 border-t border-gray-100 text-center space-y-2",children:[r.jsx("p",{className:"text-xs text-gray-400",children:"Facing issues? Contact support at"}),r.jsx("a",{href:"mailto:support@hptourism.gov.in",className:"text-sm font-semibold text-gray-600 hover:text-green-600 transition-colors",children:"support@hptourism.gov.in"}),r.jsxs("p",{className:"text-[10px] text-gray-300 pt-2",children:["v","1.0.6"]})]})]})})]})}const Zk={primary:"#00d09c"},w2=e=>e.replace(/[^a-zA-Z\s]/g,"").slice(0,50),C7=(e,t)=>e.replace(/[^0-9]/g,"").slice(0,t),Hke=I.object({firstName:I.string().min(2,"First name must be at least 2 characters").max(50,"First name cannot exceed 50 characters").regex(/^[a-zA-Z\s]+$/,"Name can only contain letters and spaces"),lastName:I.string().max(50,"Last name cannot exceed 50 characters").regex(/^[a-zA-Z\s]*$/,"Name can only contain letters and spaces").optional().or(I.literal("")),mobile:I.string().length(10,"Mobile number must be exactly 10 digits").regex(/^[6-9]\d{9}$/,"Enter a valid 10-digit mobile number starting with 6-9"),email:I.string().max(100,"Email cannot exceed 100 characters").email("Enter a valid email"),password:I.string().min(6,"Password must be at least 6 characters").max(32,"Password cannot exceed 32 characters"),confirmPassword:I.string().min(6,"Confirm password must be at least 6 characters").max(32,"Password cannot exceed 32 characters"),aadhaarNumber:I.string().length(12,"Aadhaar must be exactly 12 digits").regex(/^\d{12}$/,"Aadhaar can only contain digits")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});function Wke(){const[,e]=Dr(),{toast:t}=Tr(),n=lu({resolver:hf(Hke),defaultValues:{firstName:"",lastName:"",mobile:"",email:"",password:"",confirmPassword:"",aadhaarNumber:""}}),s=Ot({mutationFn:async a=>{const{confirmPassword:o,...l}=a,c={...l,fullName:`${l.firstName} ${l.lastName}`.trim(),role:"property_owner",email:l.email||void 0,aadhaarNumber:l.aadhaarNumber};return(await lt("POST","/api/auth/register",c)).json()},onSuccess:()=>{t({title:"Registration successful!",description:"Your account has been created."}),e("/dashboard")},onError:a=>{t({title:"Registration failed",description:a.message||"Please try again",variant:"destructive"})}});b.useEffect(()=>{const a=sessionStorage.getItem("sso_registration_data");if(a)try{const o=JSON.parse(a),c=(o.name||"").trim().split(" "),d=c[0]||"",u=c.slice(1).join(" ")||"";n.setValue("firstName",w2(d)),n.setValue("lastName",w2(u)),n.setValue("mobile",o.mobile||""),n.setValue("email",o.email||""),t({title:"SSO Verified",description:"Your details have been pre-filled from HimAccess."})}catch(o){console.error("Failed to parse SSO data",o)}},[n]);const i=a=>{s.mutate(a)};return r.jsxs("div",{className:"min-h-screen flex bg-white font-sans text-gray-800",children:[r.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-gray-900",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-[20s] hover:scale-105",style:{backgroundImage:`url(${pD})`}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),r.jsxs("div",{className:"relative z-10 flex flex-col justify-between p-12 w-full h-full text-white",children:[r.jsxs("div",{className:"flex items-center gap-3",onClick:()=>e("/"),children:[r.jsx("div",{className:"bg-white/10 backdrop-blur-md p-2 rounded-lg cursor-pointer hover:bg-white/20 transition",children:r.jsx(Es,{className:"w-6 h-6"})}),r.jsx("span",{className:"font-semibold tracking-wide cursor-pointer",children:"Back to Home"})]}),r.jsxs("div",{className:"space-y-6 max-w-lg",style:{textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:[r.jsxs("h1",{className:"text-5xl font-bold leading-tight",children:[r.jsx("span",{style:{color:Zk.primary},children:"Home Stay"})," ",r.jsx("br",{}),"Registration"]}),r.jsx("p",{className:"text-lg text-gray-200 leading-relaxed opacity-90",children:"Register under HP Homestay Rules 2025 and avail exclusive discounts:"}),r.jsxs("div",{className:"space-y-2 text-base text-gray-100",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"10% Discount"})," on 3-year registration"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"5% Additional Discount"})," for women owners"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-emerald-400 font-bold",children:""}),r.jsxs("span",{children:[r.jsx("strong",{children:"50% Discount"})," for Pangi Sub-Division"]})]})]})]}),r.jsx("div",{className:"text-xs text-white/40",children:" 2025 HP Tourism. Beautiful Himachal."})]})]}),r.jsx("div",{className:"flex-1 flex items-center justify-center p-6 md:p-12 relative overflow-y-auto",children:r.jsxs("div",{className:"max-w-[650px] w-full space-y-8 my-auto",children:[r.jsxs("div",{className:"lg:hidden flex items-center gap-2 mb-6 text-gray-500",onClick:()=>e("/"),children:[r.jsx(Es,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Back"})]}),r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx("h2",{className:"text-4xl font-bold text-gray-900",children:"Create Account"}),r.jsx("p",{className:"text-xl text-gray-500",children:"Enter your details to register as a Property Owner"})]}),r.jsx(du,{...n,children:r.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ot,{control:n.control,name:"firstName",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"First Name *"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(li,{className:"w-5 h-5"})}),r.jsx(Pe,{placeholder:"First Name",...a,maxLength:50,onChange:o=>a.onChange(w2(o.target.value)),className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:n.control,name:"lastName",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Last Name"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(li,{className:"w-5 h-5"})}),r.jsx(Pe,{placeholder:"Last Name",...a,maxLength:50,onChange:o=>a.onChange(w2(o.target.value)),className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ot,{control:n.control,name:"mobile",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Mobile Number *"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(Kg,{className:"w-5 h-5"})}),r.jsx(Pe,{placeholder:"10-digit number",...a,maxLength:10,inputMode:"numeric",onChange:o=>a.onChange(C7(o.target.value,10)),className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:n.control,name:"aadhaarNumber",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Aadhaar Number *"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(ir,{className:"w-5 h-5"})}),r.jsx(Pe,{placeholder:"12-digit Aadhaar",...a,maxLength:12,inputMode:"numeric",onChange:o=>a.onChange(C7(o.target.value,12)),className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:n.control,name:"email",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Email Address *"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(Jv,{className:"w-5 h-5"})}),r.jsx(Pe,{type:"email",placeholder:"your@email.com",...a,maxLength:100,className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx(ot,{control:n.control,name:"password",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Password *"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(su,{className:"w-5 h-5"})}),r.jsx(Pe,{type:"password",placeholder:"Min 6 characters",...a,maxLength:32,className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:n.control,name:"confirmPassword",render:({field:a})=>r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-700 font-medium text-lg",children:"Confirm Password *"}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-3 top-3.5 text-gray-400",children:r.jsx(su,{className:"w-5 h-5"})}),r.jsx(Pe,{type:"password",placeholder:"Re-enter password",...a,maxLength:32,className:"pl-10 h-14 bg-gray-50 border-gray-200 focus:ring-green-500 rounded-lg text-lg"})]})}),r.jsx(ct,{})]})})]})]}),r.jsx(te,{type:"submit",className:"w-full h-14 text-lg font-bold shadow-lg hover:shadow-xl transition-all rounded-lg text-white mt-8",style:{backgroundColor:Zk.primary},disabled:s.isPending,children:s.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-5 w-5 animate-spin"}),"Creating Account..."]}):r.jsxs(r.Fragment,{children:["Create Account ",r.jsx(sa,{className:"w-5 h-5 ml-2"})]})}),r.jsxs("div",{className:"text-center pt-2",children:[r.jsx("span",{className:"text-gray-500 text-lg",children:"Already have an account? "}),r.jsx("button",{type:"button",className:"font-bold text-lg hover:underline transition-colors",style:{color:Zk.primary},onClick:()=>e("/login"),children:"Sign in"})]})]})})]})})]})}const Kke=Yg("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-xs",secondary:"border-transparent bg-secondary text-secondary-foreground",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-xs",warning:"border-amber-200 bg-amber-50 text-amber-700 shadow-xs dark:border-amber-400/60 dark:bg-amber-500/20 dark:text-amber-100",outline:" border [border-color:var(--badge-outline)] shadow-xs"}},defaultVariants:{variant:"default"}});function ze({className:e,variant:t,...n}){return r.jsx("div",{className:Xe(Kke({variant:t}),e),...n})}const us=XR,Vb=uJ,Gke=QR,ane=b.forwardRef(({className:e,...t},n)=>r.jsx(Kj,{ref:n,className:Xe("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));ane.displayName=Kj.displayName;const Jn=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Gke,{children:[r.jsx(ane,{}),r.jsxs(Gj,{ref:s,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...n,children:[t,r.jsxs(eC,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[r.jsx(sh,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Jn.displayName=Gj.displayName;const js=({className:e,...t})=>r.jsx("div",{className:Xe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});js.displayName="DialogHeader";const Fa=({className:e,...t})=>r.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Fa.displayName="DialogFooter";const ws=b.forwardRef(({className:e,...t},n)=>r.jsx(Yj,{ref:n,className:Xe("text-lg font-semibold leading-none tracking-tight",e),...t}));ws.displayName=Yj.displayName;const Ns=b.forwardRef(({className:e,...t},n)=>r.jsx(Xj,{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));Ns.displayName=Xj.displayName;const Yke=Yg("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),fn=b.forwardRef(({className:e,variant:t,...n},s)=>r.jsx("div",{ref:s,role:"alert",className:Xe(Yke({variant:t}),e),...n}));fn.displayName="Alert";const Po=b.forwardRef(({className:e,...t},n)=>r.jsx("h5",{ref:n,className:Xe("mb-1 font-medium leading-none tracking-tight",e),...t}));Po.displayName="AlertTitle";const mn=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{ref:n,className:Xe("text-sm [&_p]:leading-relaxed",e),...t}));mn.displayName="AlertDescription";function Xke({user:e}){var i,a,o,l,c,d,u,h,f;const[,t]=Dr(),{data:n}=rt({queryKey:["/api/stats/state"],refetchInterval:6e4}),s=((i=n==null?void 0:n.hero)==null?void 0:i.pendingScrutiny)||0;return r.jsxs("div",{className:"space-y-6 pt-2",children:[r.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-blue-50 via-indigo-50/50 to-white border border-blue-100/50 shadow-sm px-8 py-10 mb-8",children:[r.jsx("div",{className:"absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-blue-100/50 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 -ml-16 -mb-16 w-64 h-64 bg-orange-100/50 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-2 mb-2",children:r.jsxs(ze,{variant:"outline",className:"bg-white/80 backdrop-blur border-blue-200 text-blue-700 px-3 py-1 shadow-sm",children:[r.jsx(Vm,{className:"h-3 w-3 mr-1 text-amber-500 fill-amber-500"}),"Operational Command"]})}),r.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight text-slate-900",children:["Good Morning, ",e.fullName.split(" ")[0]]}),r.jsxs("p",{className:"text-lg text-slate-500 mt-2 max-w-xl",children:["You have ",r.jsxs("span",{className:"font-bold text-slate-800",children:[s," applications"]})," requiring attention today. System performance is optimal."]})]}),r.jsxs("div",{className:"hidden md:flex gap-3",children:[r.jsxs("div",{className:"bg-white/80 backdrop-blur p-4 rounded-2xl border border-white/50 shadow-sm text-center min-w-[100px]",children:[r.jsx("div",{className:"text-xs text-slate-400 font-semibold uppercase tracking-wider",children:"Date"}),r.jsx("div",{className:"font-bold text-slate-700 mt-1",children:new Date().toLocaleDateString("en-IN",{day:"numeric",month:"short"})})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur p-4 rounded-2xl border border-white/50 shadow-sm text-center min-w-[100px]",children:[r.jsx("div",{className:"text-xs text-slate-400 font-semibold uppercase tracking-wider",children:"Time"}),r.jsx("div",{className:"font-bold text-slate-700 mt-1",children:new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})]})]})]}),r.jsx("h3",{className:"text-lg font-semibold",children:"Your Action Queue"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(me,{className:"group relative overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-slate-200 hover:border-orange-200",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-orange-400 to-amber-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-orange-100/50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-semibold text-slate-500 flex items-center justify-between uppercase tracking-wider",children:["Pending Scrutiny",r.jsx("div",{className:"p-2 bg-orange-100 text-orange-600 rounded-lg group-hover:bg-orange-500 group-hover:text-white transition-colors",children:r.jsx(H0,{className:"h-4 w-4"})})]})}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-4xl font-black text-slate-800 tracking-tight my-1 group-hover:text-orange-600 transition-colors",children:s}),r.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Applications waiting for review"}),r.jsxs(te,{variant:"ghost",size:"sm",className:"w-full mt-4 bg-orange-50 text-orange-700 hover:bg-orange-100 hover:text-orange-800 justify-between group-hover:pr-2 transition-all",onClick:()=>t("/workflow-monitoring?status=under_scrutiny"),children:["Review Now ",r.jsx(sa,{className:"h-3 w-3 opacity-0 group-hover:opacity-100 transition-opacity"})]})]})]}),r.jsxs(me,{className:"group relative overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-slate-200 hover:border-blue-200",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-400 to-indigo-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-blue-100/50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-semibold text-slate-500 flex items-center justify-between uppercase tracking-wider",children:["Pending District",r.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg group-hover:bg-blue-500 group-hover:text-white transition-colors",children:r.jsx(Do,{className:"h-4 w-4"})})]})}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-4xl font-black text-slate-800 tracking-tight my-1 group-hover:text-blue-600 transition-colors",children:((a=n==null?void 0:n.hero)==null?void 0:a.pendingDistrict)||0}),r.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"With District Officers"})]})]}),r.jsxs(me,{className:"group relative overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-slate-200 hover:border-purple-200",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-400 to-fuchsia-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-purple-100/50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-semibold text-slate-500 flex items-center justify-between uppercase tracking-wider",children:["Pending Inspection",r.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg group-hover:bg-purple-500 group-hover:text-white transition-colors",children:r.jsx(Mi,{className:"h-4 w-4"})})]})}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-4xl font-black text-slate-800 tracking-tight my-1 group-hover:text-purple-600 transition-colors",children:((o=n==null?void 0:n.hero)==null?void 0:o.pendingInspection)||0}),r.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Site inspections scheduled"})]})]}),r.jsxs(me,{className:"group relative overflow-hidden transition-all duration-300 hover:shadow-lg hover:-translate-y-1 border-slate-200 hover:border-emerald-200",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-emerald-400 to-teal-500"}),r.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-100/50 rounded-bl-full -mr-4 -mt-4 transition-transform group-hover:scale-110"}),r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-semibold text-slate-500 flex items-center justify-between uppercase tracking-wider",children:["Certificates",r.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg group-hover:bg-emerald-500 group-hover:text-white transition-colors",children:r.jsx(kr,{className:"h-4 w-4"})})]})}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-4xl font-black text-slate-800 tracking-tight my-1 group-hover:text-emerald-600 transition-colors",children:((l=n==null?void 0:n.hero)==null?void 0:l.totalApproved)||0}),r.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Total approved applications"})]})]})]}),r.jsx("h3",{className:"text-lg font-semibold mt-6 mb-4 text-slate-800",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(te,{variant:"outline",className:"h-auto py-6 flex flex-col gap-3 hover:bg-blue-50/50 border-slate-200 hover:border-blue-200 hover:shadow-md transition-all group",onClick:()=>t("/analytics"),children:[r.jsx("div",{className:"p-3 rounded-2xl bg-blue-100 text-blue-600 group-hover:bg-blue-600 group-hover:text-white transition-colors",children:r.jsx(gu,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-slate-700 group-hover:text-blue-700 transition-colors",children:"Search Portal"}),r.jsx("div",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Find applications"})]})]}),r.jsxs(te,{variant:"outline",className:"h-auto py-6 flex flex-col gap-3 hover:bg-emerald-50/50 border-slate-200 hover:border-emerald-200 hover:shadow-md transition-all group",onClick:()=>t("/workflow-monitoring"),children:[r.jsx("div",{className:"p-3 rounded-2xl bg-emerald-100 text-emerald-600 group-hover:bg-emerald-600 group-hover:text-white transition-colors",children:r.jsx(ir,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-slate-700 group-hover:text-emerald-700 transition-colors",children:"Generate Reports"}),r.jsx("div",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Export data"})]})]}),r.jsxs(te,{variant:"outline",className:"h-auto py-6 flex flex-col gap-3 hover:bg-purple-50/50 border-slate-200 hover:border-purple-200 hover:shadow-md transition-all group",onClick:()=>t("/admin/users"),children:[r.jsx("div",{className:"p-3 rounded-2xl bg-purple-100 text-purple-600 group-hover:bg-purple-600 group-hover:text-white transition-colors",children:r.jsx(Do,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-slate-700 group-hover:text-purple-700 transition-colors",children:"Manage Users"}),r.jsx("div",{className:"text-xs text-muted-foreground font-normal mt-1",children:"Staff directory"})]})]}),r.jsxs(te,{variant:"outline",className:"h-auto py-6 flex flex-col gap-3 hover:bg-amber-50/50 border-slate-200 hover:border-amber-200 hover:shadow-md transition-all group",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-amber-100 text-amber-600 group-hover:bg-amber-600 group-hover:text-white transition-colors",children:r.jsx(Fm,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"font-semibold text-slate-700 group-hover:text-amber-700 transition-colors",children:"Notifications"}),r.jsx("div",{className:"text-xs text-muted-foreground font-normal mt-1",children:"View alerts"})]})]})]}),r.jsxs(me,{className:"mt-8 border-slate-200 shadow-sm",children:[r.jsxs(Ce,{className:"pb-2",children:[r.jsxs(ke,{className:"text-base font-medium flex items-center justify-between",children:["Application Pipeline Status",r.jsx(ze,{variant:"outline",className:"font-normal text-muted-foreground",children:"Live Application Counts"})]}),r.jsx(Ue,{children:"Real-time distribution of applications across the standard approval workflow"})]}),r.jsx(ge,{className:"pb-8 pt-6",children:r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"flex items-center gap-1 mx-4",children:[{id:"da_review",label:"Scrutiny",count:((c=n==null?void 0:n.pipeline_counts)==null?void 0:c.scrutiny)||0,color:"text-orange-600",bg:"bg-orange-100",border:"border-orange-500"},{id:"forwarded_dtdo",label:"District Review",count:((d=n==null?void 0:n.pipeline_counts)==null?void 0:d.district)||0,color:"text-blue-600",bg:"bg-blue-100",border:"border-blue-500"},{id:"inspection_scheduled",label:"Inspection",count:((u=n==null?void 0:n.pipeline_counts)==null?void 0:u.inspection)||0,color:"text-purple-600",bg:"bg-purple-100",border:"border-purple-500"},{id:"payment_pending",label:"Payment",count:((h=n==null?void 0:n.pipeline_counts)==null?void 0:h.payment)||0,color:"text-indigo-600",bg:"bg-indigo-100",border:"border-indigo-500"},{id:"certificate",label:"Approved",count:((f=n==null?void 0:n.pipeline_counts)==null?void 0:f.approved)||0,color:"text-emerald-600",bg:"bg-emerald-100",border:"border-emerald-500"}].map((m,p,g)=>{const v=p===g.length-1,x=m.count>0;return r.jsxs("div",{className:"flex items-center flex-1 relative group",children:[r.jsxs("div",{className:"flex flex-col items-center z-10 w-full",children:[r.jsxs("div",{className:`
                                                    relative flex h-14 w-14 items-center justify-center rounded-full border-4 text-lg font-bold shadow-md shrink-0 transition-all duration-300
                                                    ${m.bg} ${m.border} ${m.color}
                                                    ${x?"scale-110 shadow-lg":"grayscale-[0.3] opacity-80 group-hover:grayscale-0 group-hover:opacity-100"}
                                                `,children:[x&&r.jsx("span",{className:"absolute inset-0 rounded-full bg-current opacity-20 animate-ping"}),m.count]}),r.jsx("span",{className:`mt-3 text-[10px] font-bold uppercase tracking-wider ${m.color}`,children:m.label})]}),!v&&r.jsx("div",{className:"absolute top-7 left-1/2 w-full h-[3px] bg-slate-100 -z-10 overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-slate-300 to-transparent w-1/2 animate-[shimmer_2s_infinite]"})})]},m.id)})})})})]})]})}function Zr(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function kl(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Qo(e,t){const n=Zr(e);return isNaN(t)?kl(e,NaN):(t&&n.setDate(n.getDate()+t),n)}function uu(e,t){const n=Zr(e);if(isNaN(t))return kl(e,NaN);if(!t)return n;const s=n.getDate(),i=kl(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}const r6=6048e5,Qke=864e5,N2=43200,A7=1440;let Zke={};function J0(){return Zke}function lh(e,t){var l,c,d,u;const n=J0(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Zr(e),a=i.getDay(),o=(a<s?7:0)+a-s;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Dg(e){return lh(e,{weekStartsOn:1})}function one(e){const t=Zr(e),n=t.getFullYear(),s=kl(e,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=Dg(s),a=kl(e,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=Dg(a);return t.getTime()>=i.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function c0(e){const t=Zr(e);return t.setHours(0,0,0,0),t}function d0(e){const t=Zr(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function uc(e,t){const n=c0(e),s=c0(t),i=+n-d0(n),a=+s-d0(s);return Math.round((i-a)/Qke)}function Jke(e){const t=one(e),n=kl(e,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Dg(n)}function xT(e,t){const n=t*7;return Qo(e,n)}function lne(e,t){return uu(e,t*12)}function e4e(e){let t;return e.forEach(function(n){const s=Zr(n);(t===void 0||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}function t4e(e){let t;return e.forEach(n=>{const s=Zr(n);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}function AN(e,t){const n=Zr(e),s=Zr(t),i=n.getTime()-s.getTime();return i<0?-1:i>0?1:i}function cne(e){return kl(e,Date.now())}function jl(e,t){const n=c0(e),s=c0(t);return+n==+s}function n6(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function r4e(e){if(!n6(e)&&typeof e!="number")return!1;const t=Zr(e);return!isNaN(Number(t))}function u0(e,t){const n=Zr(e),s=Zr(t),i=n.getFullYear()-s.getFullYear(),a=n.getMonth()-s.getMonth();return i*12+a}function n4e(e,t,n){const s=lh(e,n),i=lh(t,n),a=+s-d0(s),o=+i-d0(i);return Math.round((a-o)/r6)}function s4e(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function i4e(e,t){return+Zr(e)-+Zr(t)}function a4e(e){const t=Zr(e);return t.setHours(23,59,59,999),t}function gC(e){const t=Zr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function o4e(e){const t=Zr(e);return+a4e(t)==+gC(t)}function l4e(e,t){const n=Zr(e),s=Zr(t),i=AN(n,s),a=Math.abs(u0(n,s));let o;if(a<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*a);let l=AN(n,s)===-i;o4e(Zr(e))&&a===1&&AN(e,s)===1&&(l=!1),o=i*(a-Number(l))}return o===0?0:o}function c4e(e,t,n){const s=i4e(e,t)/1e3;return s4e(n==null?void 0:n.roundingMethod)(s)}function sl(e){const t=Zr(e);return t.setDate(1),t.setHours(0,0,0,0),t}function dne(e){const t=Zr(e),n=kl(e,0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function s6(e,t){var l,c,d,u;const n=J0(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,i=Zr(e),a=i.getDay(),o=(a<s?-7:0)+6-(a-s);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function une(e){return s6(e,{weekStartsOn:1})}const d4e={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},u4e=(e,t,n)=>{let s;const i=d4e[e];return typeof i=="string"?s=i:t===1?s=i.one:s=i.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Jk(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const h4e={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},f4e={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},m4e={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p4e={date:Jk({formats:h4e,defaultWidth:"full"}),time:Jk({formats:f4e,defaultWidth:"full"}),dateTime:Jk({formats:m4e,defaultWidth:"full"})},g4e={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},x4e=(e,t,n,s)=>g4e[e];function $y(e){return(t,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let i;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=n!=null&&n.width?String(n.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const v4e={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},y4e={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},b4e={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},j4e={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},N4e={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S4e=(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},_4e={ordinalNumber:S4e,era:$y({values:v4e,defaultWidth:"wide"}),quarter:$y({values:y4e,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$y({values:b4e,defaultWidth:"wide"}),day:$y({values:j4e,defaultWidth:"wide"}),dayPeriod:$y({values:w4e,defaultWidth:"wide",formattingValues:N4e,defaultFormattingWidth:"wide"})};function By(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?A4e(l,h=>h.test(o)):C4e(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function C4e(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function A4e(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function k4e(e){return(t,n={})=>{const s=t.match(e.matchPattern);if(!s)return null;const i=s[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const P4e=/^(\d+)(th|st|nd|rd)?/i,T4e=/\d+/i,E4e={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},O4e={any:[/^b/i,/^(a|c)/i]},R4e={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},D4e={any:[/1/i,/2/i,/3/i,/4/i]},M4e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},I4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},L4e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},F4e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$4e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},B4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V4e={ordinalNumber:k4e({matchPattern:P4e,parsePattern:T4e,valueCallback:e=>parseInt(e,10)}),era:By({matchPatterns:E4e,defaultMatchWidth:"wide",parsePatterns:O4e,defaultParseWidth:"any"}),quarter:By({matchPatterns:R4e,defaultMatchWidth:"wide",parsePatterns:D4e,defaultParseWidth:"any",valueCallback:e=>e+1}),month:By({matchPatterns:M4e,defaultMatchWidth:"wide",parsePatterns:I4e,defaultParseWidth:"any"}),day:By({matchPatterns:L4e,defaultMatchWidth:"wide",parsePatterns:F4e,defaultParseWidth:"any"}),dayPeriod:By({matchPatterns:$4e,defaultMatchWidth:"any",parsePatterns:B4e,defaultParseWidth:"any"})},i6={code:"en-US",formatDistance:u4e,formatLong:p4e,formatRelative:x4e,localize:_4e,match:V4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function U4e(e){const t=Zr(e);return uc(t,dne(t))+1}function hne(e){const t=Zr(e),n=+Dg(t)-+Jke(t);return Math.round(n/r6)+1}function fne(e,t){var u,h,f,m;const n=Zr(e),s=n.getFullYear(),i=J0(),a=(t==null?void 0:t.firstWeekContainsDate)??((h=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(f=i.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=kl(e,0);o.setFullYear(s+1,0,a),o.setHours(0,0,0,0);const l=lh(o,t),c=kl(e,0);c.setFullYear(s,0,a),c.setHours(0,0,0,0);const d=lh(c,t);return n.getTime()>=l.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function q4e(e,t){var l,c,d,u;const n=J0(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(d=n.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,i=fne(e,t),a=kl(e,0);return a.setFullYear(i,0,s),a.setHours(0,0,0,0),lh(a,t)}function mne(e,t){const n=Zr(e),s=+lh(n,t)-+q4e(n,t);return Math.round(s/r6)+1}function ls(e,t){const n=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return n+s}const zf={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return ls(t==="yy"?s%100:s,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ls(n+1,2)},d(e,t){return ls(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ls(e.getHours()%12||12,t.length)},H(e,t){return ls(e.getHours(),t.length)},m(e,t){return ls(e.getMinutes(),t.length)},s(e,t){return ls(e.getSeconds(),t.length)},S(e,t){const n=t.length,s=e.getMilliseconds(),i=Math.trunc(s*Math.pow(10,n-3));return ls(i,t.length)}},px={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},k7={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const s=e.getFullYear(),i=s>0?s:1-s;return n.ordinalNumber(i,{unit:"year"})}return zf.y(e,t)},Y:function(e,t,n,s){const i=fne(e,s),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return ls(o,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):ls(a,t.length)},R:function(e,t){const n=one(e);return ls(n,t.length)},u:function(e,t){const n=e.getFullYear();return ls(n,t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return ls(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return ls(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return zf.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return ls(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=mne(e,s);return t==="wo"?n.ordinalNumber(i,{unit:"week"}):ls(i,t.length)},I:function(e,t,n){const s=hne(e);return t==="Io"?n.ordinalNumber(s,{unit:"week"}):ls(s,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):zf.d(e,t)},D:function(e,t,n){const s=U4e(e);return t==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):ls(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return ls(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),a=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return ls(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=s===0?7:s;switch(t){case"i":return String(i);case"ii":return ls(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(s===12?i=px.noon:s===0?i=px.midnight:i=s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(s>=17?i=px.evening:s>=12?i=px.afternoon:s>=4?i=px.morning:i=px.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return zf.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):zf.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return t==="Ko"?n.ordinalNumber(s,{unit:"hour"}):ls(s,t.length)},k:function(e,t,n){let s=e.getHours();return s===0&&(s=24),t==="ko"?n.ordinalNumber(s,{unit:"hour"}):ls(s,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):zf.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):zf.s(e,t)},S:function(e,t){return zf.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return T7(s);case"XXXX":case"XX":return $p(s);case"XXXXX":case"XXX":default:return $p(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return T7(s);case"xxxx":case"xx":return $p(s);case"xxxxx":case"xxx":default:return $p(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+P7(s,":");case"OOOO":default:return"GMT"+$p(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+P7(s,":");case"zzzz":default:return"GMT"+$p(s,":")}},t:function(e,t,n){const s=Math.trunc(e.getTime()/1e3);return ls(s,t.length)},T:function(e,t,n){const s=e.getTime();return ls(s,t.length)}};function P7(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),a=s%60;return a===0?n+String(i):n+String(i)+t+ls(a,2)}function T7(e,t){return e%60===0?(e>0?"-":"+")+ls(Math.abs(e)/60,2):$p(e,t)}function $p(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=ls(Math.trunc(s/60),2),a=ls(s%60,2);return n+i+t+a}const E7=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},pne=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},z4e=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return E7(e,t);let a;switch(s){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",E7(s,t)).replace("{{time}}",pne(i,t))},H4e={p:pne,P:z4e},W4e=/^D+$/,K4e=/^Y+$/,G4e=["D","DD","YY","YYYY"];function Y4e(e){return W4e.test(e)}function X4e(e){return K4e.test(e)}function Q4e(e,t,n){const s=Z4e(e,t,n);if(console.warn(s),G4e.includes(e))throw new RangeError(s)}function Z4e(e,t,n){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const J4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ePe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tPe=/^'([^]*?)'?$/,rPe=/''/g,nPe=/[a-zA-Z]/;function sr(e,t,n){var u,h,f,m,p,g,v,x;const s=J0(),i=(n==null?void 0:n.locale)??s.locale??i6,a=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((g=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??s.weekStartsOn??((x=(v=s.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,l=Zr(e);if(!r4e(l))throw new RangeError("Invalid time value");let c=t.match(ePe).map(y=>{const j=y[0];if(j==="p"||j==="P"){const w=H4e[j];return w(y,i.formatLong)}return y}).join("").match(J4e).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const j=y[0];if(j==="'")return{isToken:!1,value:sPe(y)};if(k7[j])return{isToken:!0,value:y};if(j.match(nPe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:y}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const d={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return c.map(y=>{if(!y.isToken)return y.value;const j=y.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&X4e(j)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Y4e(j))&&Q4e(j,t,String(e));const w=k7[j[0]];return w(l,j,i.localize,d)}).join("")}function sPe(e){const t=e.match(tPe);return t?t[1].replace(rPe,"'"):e}function iPe(e,t,n){const s=J0(),i=(n==null?void 0:n.locale)??s.locale??i6,a=2520,o=AN(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o});let c,d;o>0?(c=Zr(t),d=Zr(e)):(c=Zr(e),d=Zr(t));const u=c4e(d,c),h=(d0(d)-d0(c))/1e3,f=Math.round((u-h)/60);let m;if(f<2)return n!=null&&n.includeSeconds?u<5?i.formatDistance("lessThanXSeconds",5,l):u<10?i.formatDistance("lessThanXSeconds",10,l):u<20?i.formatDistance("lessThanXSeconds",20,l):u<40?i.formatDistance("halfAMinute",0,l):u<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):f===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",f,l);if(f<45)return i.formatDistance("xMinutes",f,l);if(f<90)return i.formatDistance("aboutXHours",1,l);if(f<A7){const p=Math.round(f/60);return i.formatDistance("aboutXHours",p,l)}else{if(f<a)return i.formatDistance("xDays",1,l);if(f<N2){const p=Math.round(f/A7);return i.formatDistance("xDays",p,l)}else if(f<N2*2)return m=Math.round(f/N2),i.formatDistance("aboutXMonths",m,l)}if(m=l4e(d,c),m<12){const p=Math.round(f/N2);return i.formatDistance("xMonths",p,l)}else{const p=m%12,g=Math.trunc(m/12);return p<3?i.formatDistance("aboutXYears",g,l):p<9?i.formatDistance("overXYears",g,l):i.formatDistance("almostXYears",g+1,l)}}function ap(e,t){return iPe(e,cne(e),t)}function aPe(e){const t=Zr(e),n=t.getFullYear(),s=t.getMonth(),i=kl(e,0);return i.setFullYear(n,s+1,0),i.setHours(0,0,0,0),i.getDate()}function oPe(e){return Math.trunc(+Zr(e)/1e3)}function lPe(e){const t=Zr(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function cPe(e,t){return n4e(lPe(e),sl(e),t)+1}function vT(e,t){const n=Zr(e),s=Zr(t);return n.getTime()>s.getTime()}function gne(e,t){const n=Zr(e),s=Zr(t);return+n<+s}function xC(e,t){const n=Zr(e),s=Zr(t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function dPe(e,t){const n=Zr(e),s=Zr(t);return n.getFullYear()===s.getFullYear()}function a6(e){return xC(e,cne(e))}function gv(e,t){return Qo(e,-t)}function e4(e,t){const n=Zr(e),s=n.getFullYear(),i=n.getDate(),a=kl(e,0);a.setFullYear(s,t,15),a.setHours(0,0,0,0);const o=aPe(a);return n.setMonth(t,Math.min(i,o)),n}function O7(e,t){const n=Zr(e);return isNaN(+n)?kl(e,NaN):(n.setFullYear(t),n)}var xne="AlertDialog",[uPe]=oa(xne,[YZ]),wf=YZ(),vne=e=>{const{__scopeAlertDialog:t,...n}=e,s=wf(t);return r.jsx(XR,{...s,...n,modal:!0})};vne.displayName=xne;var hPe="AlertDialogTrigger",yne=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wf(n);return r.jsx(uJ,{...i,...s,ref:t})});yne.displayName=hPe;var fPe="AlertDialogPortal",bne=e=>{const{__scopeAlertDialog:t,...n}=e,s=wf(t);return r.jsx(QR,{...s,...n})};bne.displayName=fPe;var mPe="AlertDialogOverlay",jne=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wf(n);return r.jsx(Kj,{...i,...s,ref:t})});jne.displayName=mPe;var xv="AlertDialogContent",[pPe,gPe]=uPe(xv),xPe=_Q("AlertDialogContent"),wne=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:s,...i}=e,a=wf(n),o=b.useRef(null),l=Jr(t,o),c=b.useRef(null);return r.jsx(Y1e,{contentName:xv,titleName:Nne,docsSlug:"alert-dialog",children:r.jsx(pPe,{scope:n,cancelRef:c,children:r.jsxs(Gj,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:$t(i.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[r.jsx(xPe,{children:s}),r.jsx(yPe,{contentRef:o})]})})})});wne.displayName=xv;var Nne="AlertDialogTitle",Sne=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wf(n);return r.jsx(Yj,{...i,...s,ref:t})});Sne.displayName=Nne;var _ne="AlertDialogDescription",Cne=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wf(n);return r.jsx(Xj,{...i,...s,ref:t})});Cne.displayName=_ne;var vPe="AlertDialogAction",Ane=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,i=wf(n);return r.jsx(eC,{...i,...s,ref:t})});Ane.displayName=vPe;var kne="AlertDialogCancel",Pne=b.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...s}=e,{cancelRef:i}=gPe(kne,n),a=wf(n),o=Jr(t,i);return r.jsx(eC,{...a,...s,ref:o})});Pne.displayName=kne;var yPe=({contentRef:e})=>{const t=`\`${xv}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${xv}\` by passing a \`${_ne}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${xv}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return b.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},bPe=vne,jPe=yne,wPe=bne,Tne=jne,Ene=wne,One=Ane,Rne=Pne,Dne=Sne,Mne=Cne;const zd=bPe,R7=jPe,NPe=wPe,Ine=b.forwardRef(({className:e,...t},n)=>r.jsx(Tne,{className:Xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:n}));Ine.displayName=Tne.displayName;const Xc=b.forwardRef(({className:e,...t},n)=>r.jsxs(NPe,{children:[r.jsx(Ine,{}),r.jsx(Ene,{ref:n,className:Xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Xc.displayName=Ene.displayName;const Qc=({className:e,...t})=>r.jsx("div",{className:Xe("flex flex-col space-y-2 text-center sm:text-left",e),...t});Qc.displayName="AlertDialogHeader";const Zc=({className:e,...t})=>r.jsx("div",{className:Xe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zc.displayName="AlertDialogFooter";const Jc=b.forwardRef(({className:e,...t},n)=>r.jsx(Dne,{ref:n,className:Xe("text-lg font-semibold",e),...t}));Jc.displayName=Dne.displayName;const ed=b.forwardRef(({className:e,...t},n)=>r.jsx(Mne,{ref:n,className:Xe("text-sm text-muted-foreground",e),...t}));ed.displayName=Mne.displayName;const Hd=b.forwardRef(({className:e,...t},n)=>r.jsx(One,{ref:n,className:Xe(w1(),e),...t}));Hd.displayName=One.displayName;const td=b.forwardRef(({className:e,...t},n)=>r.jsx(Rne,{ref:n,className:Xe(w1({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));td.displayName=Rne.displayName;const D7=1;function SPe({open:e,onOpenChange:t,mode:n,parentApplicationId:s,currentRooms:i,onSuccess:a}){const{toast:o}=Tr(),[l,c]=b.useState({single:0,double:0,family:0});b.useEffect(()=>{e&&c({single:0,double:0,family:0})},[e]);const d=i.single+i.double+i.family,u=l.single+l.double+l.family,h=n==="add_rooms"?d+u:d-u,f=n==="add_rooms",m=f?"Add":"Delete",p=f?"Specify how many rooms you want to add to your approved inventory.":"Specify how many rooms you want to remove from your approved inventory.";let g=null;u===0?g=`Please specify at least one room to ${m.toLowerCase()}.`:f&&h>ra?g=`HP Homestay Rules permit a maximum of ${ra} rooms. This would result in ${h} rooms.`:f||(l.single>i.single||l.double>i.double||l.family>i.family?g="Cannot delete more rooms than currently exist in that category.":h<D7&&(g=`At least ${D7} room must remain after deletion.`));const v=Ot({mutationFn:async()=>(await lt("POST","/api/service-center",{baseApplicationId:s,serviceType:n,roomDelta:l})).json(),onSuccess:w=>{o({title:"Service Request Created",description:`Your ${m.toLowerCase()} rooms request has been initiated.`}),er.invalidateQueries({queryKey:["/api/service-center"]}),t(!1),w.nextUrl&&a(w.nextUrl)},onError:w=>{o({title:"Request Failed",description:w.message||"Could not create service request",variant:"destructive"})}}),x=(w,N)=>{const S=Math.max(0,Math.floor(N));c(T=>({...T,[w]:S}))},y=()=>{g||v.mutate()},j=(w,N,S)=>{const T=f?ra-d:S;return r.jsxs("div",{className:"flex items-center justify-between gap-4 py-2",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(je,{className:"text-sm font-medium",children:w}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: ",S]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",disabled:l[N]<=0,onClick:()=>x(N,l[N]-1),children:r.jsx(fve,{className:"h-4 w-4"})}),r.jsx(Pe,{type:"number",min:0,max:T,value:l[N],onChange:C=>x(N,parseInt(C.target.value)||0),className:"w-16 text-center"}),r.jsx(te,{type:"button",variant:"outline",size:"icon",className:"h-8 w-8",disabled:l[N]>=T,onClick:()=>x(N,l[N]+1),children:r.jsx(Bm,{className:"h-4 w-4"})})]})]},N)};return r.jsx(us,{open:e,onOpenChange:t,children:r.jsxs(Jn,{className:"sm:max-w-md",children:[r.jsxs(js,{children:[r.jsxs(ws,{children:[m," Rooms"]}),r.jsx(Ns,{children:p})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"rounded-lg border p-4 bg-muted/30",children:[r.jsx("p",{className:"text-sm font-medium mb-2",children:"Current Inventory"}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[r.jsxs("div",{children:["Single: ",r.jsx("span",{className:"font-semibold",children:i.single})]}),r.jsxs("div",{children:["Double: ",r.jsx("span",{className:"font-semibold",children:i.double})]}),r.jsxs("div",{children:["Family: ",r.jsx("span",{className:"font-semibold",children:i.family})]})]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Total: ",d," / ",ra," rooms"]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Rooms to ",m]}),j("Single Bed Rooms","single",i.single),j("Double Bed Rooms","double",i.double),j("Family Suites","family",i.family)]}),u>0&&r.jsxs("div",{className:"rounded-lg border p-4 bg-primary/5",children:[r.jsx("p",{className:"text-sm font-medium",children:f?"After Adding":"After Deletion"}),r.jsxs("p",{className:"text-lg font-semibold text-primary",children:[h," rooms total"]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[f?"+":"-",u," rooms ",f?"added":"removed"]})]}),g&&r.jsxs(fn,{variant:"destructive",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(mn,{children:g})]})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),r.jsxs(te,{onClick:y,disabled:!!g||v.isPending,children:[v.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),m," ",u>0?`${u} Room${u>1?"s":""}`:"Rooms"]})]})]})})}const _Pe=e=>(e==null?void 0:e.trim().toLowerCase())??"",hu=e=>{const t=_Pe(e);return t==="pangi"?"Chamba":t==="kaza"||t==="spiti"||t.includes("kaza")||t==="lahaul"?"Lahaul and Spiti":e||""},Lne="/assets/HP_Gov_TR-DHeYrEcM.png?inline",Fne="/assets/HP_Touris_TR-4lqzuj-v.png?inline",CPe="modulepreload",APe=function(e){return"/"+e},M7={},t4=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=APe(c),c in M7)return;M7[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":CPe,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};function cs(e){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cs(e)}var fu=Uint8Array,hc=Uint16Array,o6=Int32Array,l6=new fu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c6=new fu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),I7=new fu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$ne=function(e,t){for(var n=new hc(31),s=0;s<31;++s)n[s]=t+=1<<e[s-1];for(var i=new o6(n[30]),s=1;s<30;++s)for(var a=n[s];a<n[s+1];++a)i[a]=a-n[s]<<5|s;return{b:n,r:i}},Bne=$ne(l6,2),kPe=Bne.b,yT=Bne.r;kPe[28]=258,yT[258]=28;var PPe=$ne(c6,0),L7=PPe.r,bT=new hc(32768);for(var Xs=0;Xs<32768;++Xs){var Hf=(Xs&43690)>>1|(Xs&21845)<<1;Hf=(Hf&52428)>>2|(Hf&13107)<<2,Hf=(Hf&61680)>>4|(Hf&3855)<<4,bT[Xs]=((Hf&65280)>>8|(Hf&255)<<8)>>1}var Ub=function(e,t,n){for(var s=e.length,i=0,a=new hc(t);i<s;++i)e[i]&&++a[e[i]-1];var o=new hc(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(n){l=new hc(1<<t);var c=15-t;for(i=0;i<s;++i)if(e[i])for(var d=i<<4|e[i],u=t-e[i],h=o[e[i]-1]++<<u,f=h|(1<<u)-1;h<=f;++h)l[bT[h]>>c]=d}else for(l=new hc(s),i=0;i<s;++i)e[i]&&(l[i]=bT[o[e[i]-1]++]>>15-e[i]);return l},Mg=new fu(288);for(var Xs=0;Xs<144;++Xs)Mg[Xs]=8;for(var Xs=144;Xs<256;++Xs)Mg[Xs]=9;for(var Xs=256;Xs<280;++Xs)Mg[Xs]=7;for(var Xs=280;Xs<288;++Xs)Mg[Xs]=8;var G5=new fu(32);for(var Xs=0;Xs<32;++Xs)G5[Xs]=5;var TPe=Ub(Mg,9,0),EPe=Ub(G5,5,0),Vne=function(e){return(e+7)/8|0},OPe=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new fu(e.subarray(t,n))},kh=function(e,t,n){n<<=t&7;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8},Vy=function(e,t,n){n<<=t&7;var s=t/8|0;e[s]|=n,e[s+1]|=n>>8,e[s+2]|=n>>16},r4=function(e,t){for(var n=[],s=0;s<e.length;++s)e[s]&&n.push({s,f:e[s]});var i=n.length,a=n.slice();if(!i)return{t:qne,l:0};if(i==1){var o=new fu(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(N,S){return N.f-S.f}),n.push({s:-1,f:25001});var l=n[0],c=n[1],d=0,u=1,h=2;for(n[0]={s:-1,f:l.f+c.f,l,r:c};u!=i-1;)l=n[n[d].f<n[h].f?d++:h++],c=n[d!=u&&n[d].f<n[h].f?d++:h++],n[u++]={s:-1,f:l.f+c.f,l,r:c};for(var f=a[0].s,s=1;s<i;++s)a[s].s>f&&(f=a[s].s);var m=new hc(f+1),p=jT(n[u-1],m,0);if(p>t){var s=0,g=0,v=p-t,x=1<<v;for(a.sort(function(S,T){return m[T.s]-m[S.s]||S.f-T.f});s<i;++s){var y=a[s].s;if(m[y]>t)g+=x-(1<<p-m[y]),m[y]=t;else break}for(g>>=v;g>0;){var j=a[s].s;m[j]<t?g-=1<<t-m[j]++-1:++s}for(;s>=0&&g;--s){var w=a[s].s;m[w]==t&&(--m[w],++g)}p=t}return{t:new fu(m),l:p}},jT=function(e,t,n){return e.s==-1?Math.max(jT(e.l,t,n+1),jT(e.r,t,n+1)):t[e.s]=n},F7=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new hc(++t),s=0,i=e[0],a=1,o=function(c){n[s++]=c},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:n.subarray(0,s),n:t}},Uy=function(e,t){for(var n=0,s=0;s<t.length;++s)n+=e[s]*t[s];return n},Une=function(e,t,n){var s=n.length,i=Vne(t+2);e[i]=s&255,e[i+1]=s>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<s;++a)e[i+a+4]=n[a];return(i+4+s)*8},$7=function(e,t,n,s,i,a,o,l,c,d,u){kh(t,u++,n),++i[256];for(var h=r4(i,15),f=h.t,m=h.l,p=r4(a,15),g=p.t,v=p.l,x=F7(f),y=x.c,j=x.n,w=F7(g),N=w.c,S=w.n,T=new hc(19),C=0;C<y.length;++C)++T[y[C]&31];for(var C=0;C<N.length;++C)++T[N[C]&31];for(var A=r4(T,7),R=A.t,k=A.l,O=19;O>4&&!R[I7[O-1]];--O);var $=d+5<<3,D=Uy(i,Mg)+Uy(a,G5)+o,q=Uy(i,f)+Uy(a,g)+o+14+3*O+Uy(T,R)+2*T[16]+3*T[17]+7*T[18];if(c>=0&&$<=D&&$<=q)return Une(t,u,e.subarray(c,c+d));var M,L,V,P;if(kh(t,u,1+(q<D)),u+=2,q<D){M=Ub(f,m,0),L=f,V=Ub(g,v,0),P=g;var z=Ub(R,k,0);kh(t,u,j-257),kh(t,u+5,S-1),kh(t,u+10,O-4),u+=14;for(var C=0;C<O;++C)kh(t,u+3*C,R[I7[C]]);u+=3*O;for(var Z=[y,N],F=0;F<2;++F)for(var W=Z[F],C=0;C<W.length;++C){var G=W[C]&31;kh(t,u,z[G]),u+=R[G],G>15&&(kh(t,u,W[C]>>5&127),u+=W[C]>>12)}}else M=TPe,L=Mg,V=EPe,P=G5;for(var C=0;C<l;++C){var H=s[C];if(H>255){var G=H>>18&31;Vy(t,u,M[G+257]),u+=L[G+257],G>7&&(kh(t,u,H>>23&31),u+=l6[G]);var se=H&31;Vy(t,u,V[se]),u+=P[se],se>3&&(Vy(t,u,H>>5&8191),u+=c6[se])}else Vy(t,u,M[H]),u+=L[H]}return Vy(t,u,M[256]),u+L[256]},RPe=new o6([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qne=new fu(0),DPe=function(e,t,n,s,i,a){var o=a.z||e.length,l=new fu(s+o+5*(1+Math.ceil(o/7e3))+i),c=l.subarray(s,l.length-i),d=a.l,u=(a.r||0)&7;if(t){u&&(c[0]=a.r>>3);for(var h=RPe[t-1],f=h>>13,m=h&8191,p=(1<<n)-1,g=a.p||new hc(32768),v=a.h||new hc(p+1),x=Math.ceil(n/3),y=2*x,j=function(ve){return(e[ve]^e[ve+1]<<x^e[ve+2]<<y)&p},w=new o6(25e3),N=new hc(288),S=new hc(32),T=0,C=0,A=a.i||0,R=0,k=a.w||0,O=0;A+2<o;++A){var $=j(A),D=A&32767,q=v[$];if(g[D]=q,v[$]=D,k<=A){var M=o-A;if((T>7e3||R>24576)&&(M>423||!d)){u=$7(e,c,0,w,N,S,C,R,O,A-O,u),R=T=C=0,O=A;for(var L=0;L<286;++L)N[L]=0;for(var L=0;L<30;++L)S[L]=0}var V=2,P=0,z=m,Z=D-q&32767;if(M>2&&$==j(A-Z))for(var F=Math.min(f,M)-1,W=Math.min(32767,A),G=Math.min(258,M);Z<=W&&--z&&D!=q;){if(e[A+V]==e[A+V-Z]){for(var H=0;H<G&&e[A+H]==e[A+H-Z];++H);if(H>V){if(V=H,P=Z,H>F)break;for(var se=Math.min(Z,H-2),J=0,L=0;L<se;++L){var ie=A-Z+L&32767,X=g[ie],he=ie-X&32767;he>J&&(J=he,q=ie)}}}D=q,q=g[D],Z+=D-q&32767}if(P){w[R++]=268435456|yT[V]<<18|L7[P];var fe=yT[V]&31,Q=L7[P]&31;C+=l6[fe]+c6[Q],++N[257+fe],++S[Q],k=A+V,++T}else w[R++]=e[A],++N[e[A]]}}for(A=Math.max(A,k);A<o;++A)w[R++]=e[A],++N[e[A]];u=$7(e,c,d,w,N,S,C,R,O,A-O,u),d||(a.r=u&7|c[u/8|0]<<3,u-=7,a.h=v,a.p=g,a.i=A,a.w=k)}else{for(var A=a.w||0;A<o+d;A+=65535){var Oe=A+65535;Oe>=o&&(c[u/8|0]=d,Oe=o),u=Une(c,u+1,e.subarray(A,Oe))}a.i=o}return OPe(l,0,s+Vne(u)+i)},zne=function(){var e=1,t=0;return{p:function(n){for(var s=e,i=t,a=n.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=s+=n[o];s=(s&65535)+15*(s>>16),i=(i&65535)+15*(i>>16)}e=s,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},MPe=function(e,t,n,s,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new fu(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return DPe(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,s,i)},Hne=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},IPe=function(e,t){var n=t.level,s=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=zne();i.p(t.dictionary),Hne(e,2,i.d())}};function wT(e,t){t||(t={});var n=zne();n.p(e);var s=MPe(e,t,t.dictionary?6:2,4);return IPe(s,t),Hne(s,s.length-4,n.d()),s}var LPe=typeof TextDecoder<"u"&&new TextDecoder,FPe=0;try{LPe.decode(qne,{stream:!0}),FPe=1}catch{}function $Pe(e){if(Array.isArray(e))return e}function BPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function B7(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=Array(t);n<t;n++)s[n]=e[n];return s}function VPe(e,t){if(e){if(typeof e=="string")return B7(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B7(e,t):void 0}}function UPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V7(e,t){return $Pe(e)||BPe(e,t)||VPe(e,t)||UPe()}function U7(e,t="utf8"){return new TextDecoder(t).decode(e)}const qPe=new TextEncoder;function zPe(e){return qPe.encode(e)}const HPe=1024*8,WPe=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),n4={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class d6{constructor(t=HPe,n={}){Ie(this,"buffer");Ie(this,"byteLength");Ie(this,"byteOffset");Ie(this,"length");Ie(this,"offset");Ie(this,"lastWrittenByte");Ie(this,"littleEndian");Ie(this,"_data");Ie(this,"_mark");Ie(this,"_marks");let s=!1;typeof t=="number"?t=new ArrayBuffer(t):(s=!0,this.lastWrittenByte=t.byteLength);const i=n.offset?n.offset>>>0:0,a=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof d6)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),s?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const s=(this.offset+t)*2,i=new Uint8Array(s);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=s,this.byteLength=s,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,n){const s=n4[n].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+s);if(this.littleEndian===WPe&&n!=="uint8"&&n!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+s));l.reverse();const c=new n4[n](l.buffer);return this.offset+=s,c.reverse(),c}const o=new n4[n](a);return this.offset+=s,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let n="";for(let s=0;s<t;s++)n+=this.readChar();return n}readUtf8(t=1){return U7(this.readBytes(t))}decodeText(t=1,n="utf8"){return U7(this.readBytes(t),n)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let n=0;n<t.length;n++)this._data.setUint8(this.offset++,t[n]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let n=0;n<t.length;n++)this.writeUint8(t.charCodeAt(n));return this}writeUtf8(t){return this.writeBytes(zPe(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function ey(e){let t=e.length;for(;--t>=0;)e[t]=0}const KPe=3,GPe=258,Wne=29,YPe=256,XPe=YPe+1+Wne,Kne=30,QPe=512,ZPe=new Array((XPe+2)*2);ey(ZPe);const JPe=new Array(Kne*2);ey(JPe);const e3e=new Array(QPe);ey(e3e);const t3e=new Array(GPe-KPe+1);ey(t3e);const r3e=new Array(Wne);ey(r3e);const n3e=new Array(Kne);ey(n3e);const s3e=(e,t,n,s)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[s++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var NT=s3e;const i3e=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var s=0;s<8;s++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},a3e=new Uint32Array(i3e()),o3e=(e,t,n,s)=>{const i=a3e,a=s+n;e^=-1;for(let o=s;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var Eu=o3e,ST={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Gne={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const l3e=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var c3e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const s in n)l3e(n,s)&&(e[s]=n[s])}}return e},d3e=e=>{let t=0;for(let s=0,i=e.length;s<i;s++)t+=e[s].length;const n=new Uint8Array(t);for(let s=0,i=0,a=e.length;s<a;s++){let o=e[s];n.set(o,i),i+=o.length}return n},Yne={assign:c3e,flattenChunks:d3e};let Xne=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xne=!1}const H1=new Uint8Array(256);for(let e=0;e<256;e++)H1[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;H1[254]=H1[254]=1;var u3e=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,s,i,a,o=e.length,l=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(s=e.charCodeAt(i+1),(s&64512)===56320&&(n=65536+(n-55296<<10)+(s-56320),i++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(l),a=0,i=0;a<l;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(s=e.charCodeAt(i+1),(s&64512)===56320&&(n=65536+(n-55296<<10)+(s-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const h3e=(e,t)=>{if(t<65534&&e.subarray&&Xne)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let s=0;s<t;s++)n+=String.fromCharCode(e[s]);return n};var f3e=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s,i;const a=new Array(n*2);for(i=0,s=0;s<n;){let o=e[s++];if(o<128){a[i++]=o;continue}let l=H1[o];if(l>4){a[i++]=65533,s+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&s<n;)o=o<<6|e[s++]&63,l--;if(l>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return h3e(a,i)},m3e=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+H1[e[n]]>t?n:t},_T={string2buf:u3e,buf2string:f3e,utf8border:m3e};function p3e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var g3e=p3e;const S2=16209,x3e=16191;var v3e=function(t,n){let s,i,a,o,l,c,d,u,h,f,m,p,g,v,x,y,j,w,N,S,T,C,A,R;const k=t.state;s=t.next_in,A=t.input,i=s+(t.avail_in-5),a=t.next_out,R=t.output,o=a-(n-t.avail_out),l=a+(t.avail_out-257),c=k.dmax,d=k.wsize,u=k.whave,h=k.wnext,f=k.window,m=k.hold,p=k.bits,g=k.lencode,v=k.distcode,x=(1<<k.lenbits)-1,y=(1<<k.distbits)-1;e:do{p<15&&(m+=A[s++]<<p,p+=8,m+=A[s++]<<p,p+=8),j=g[m&x];t:for(;;){if(w=j>>>24,m>>>=w,p-=w,w=j>>>16&255,w===0)R[a++]=j&65535;else if(w&16){N=j&65535,w&=15,w&&(p<w&&(m+=A[s++]<<p,p+=8),N+=m&(1<<w)-1,m>>>=w,p-=w),p<15&&(m+=A[s++]<<p,p+=8,m+=A[s++]<<p,p+=8),j=v[m&y];r:for(;;){if(w=j>>>24,m>>>=w,p-=w,w=j>>>16&255,w&16){if(S=j&65535,w&=15,p<w&&(m+=A[s++]<<p,p+=8,p<w&&(m+=A[s++]<<p,p+=8)),S+=m&(1<<w)-1,S>c){t.msg="invalid distance too far back",k.mode=S2;break e}if(m>>>=w,p-=w,w=a-o,S>w){if(w=S-w,w>u&&k.sane){t.msg="invalid distance too far back",k.mode=S2;break e}if(T=0,C=f,h===0){if(T+=d-w,w<N){N-=w;do R[a++]=f[T++];while(--w);T=a-S,C=R}}else if(h<w){if(T+=d+h-w,w-=h,w<N){N-=w;do R[a++]=f[T++];while(--w);if(T=0,h<N){w=h,N-=w;do R[a++]=f[T++];while(--w);T=a-S,C=R}}}else if(T+=h-w,w<N){N-=w;do R[a++]=f[T++];while(--w);T=a-S,C=R}for(;N>2;)R[a++]=C[T++],R[a++]=C[T++],R[a++]=C[T++],N-=3;N&&(R[a++]=C[T++],N>1&&(R[a++]=C[T++]))}else{T=a-S;do R[a++]=R[T++],R[a++]=R[T++],R[a++]=R[T++],N-=3;while(N>2);N&&(R[a++]=R[T++],N>1&&(R[a++]=R[T++]))}}else if(w&64){t.msg="invalid distance code",k.mode=S2;break e}else{j=v[(j&65535)+(m&(1<<w)-1)];continue r}break}}else if(w&64)if(w&32){k.mode=x3e;break e}else{t.msg="invalid literal/length code",k.mode=S2;break e}else{j=g[(j&65535)+(m&(1<<w)-1)];continue t}break}}while(s<i&&a<l);N=p>>3,s-=N,p-=N<<3,m&=(1<<p)-1,t.next_in=s,t.next_out=a,t.avail_in=s<i?5+(i-s):5-(s-i),t.avail_out=a<l?257+(l-a):257-(a-l),k.hold=m,k.bits=p};const gx=15,q7=852,z7=592,H7=0,s4=1,W7=2,y3e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),b3e=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),j3e=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),w3e=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),N3e=(e,t,n,s,i,a,o,l)=>{const c=l.bits;let d=0,u=0,h=0,f=0,m=0,p=0,g=0,v=0,x=0,y=0,j,w,N,S,T,C=null,A;const R=new Uint16Array(gx+1),k=new Uint16Array(gx+1);let O=null,$,D,q;for(d=0;d<=gx;d++)R[d]=0;for(u=0;u<s;u++)R[t[n+u]]++;for(m=c,f=gx;f>=1&&R[f]===0;f--);if(m>f&&(m=f),f===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<f&&R[h]===0;h++);for(m<h&&(m=h),v=1,d=1;d<=gx;d++)if(v<<=1,v-=R[d],v<0)return-1;if(v>0&&(e===H7||f!==1))return-1;for(k[1]=0,d=1;d<gx;d++)k[d+1]=k[d]+R[d];for(u=0;u<s;u++)t[n+u]!==0&&(o[k[t[n+u]]++]=u);if(e===H7?(C=O=o,A=20):e===s4?(C=y3e,O=b3e,A=257):(C=j3e,O=w3e,A=0),y=0,u=0,d=h,T=a,p=m,g=0,N=-1,x=1<<m,S=x-1,e===s4&&x>q7||e===W7&&x>z7)return 1;for(;;){$=d-g,o[u]+1<A?(D=0,q=o[u]):o[u]>=A?(D=O[o[u]-A],q=C[o[u]-A]):(D=96,q=0),j=1<<d-g,w=1<<p,h=w;do w-=j,i[T+(y>>g)+w]=$<<24|D<<16|q|0;while(w!==0);for(j=1<<d-1;y&j;)j>>=1;if(j!==0?(y&=j-1,y+=j):y=0,u++,--R[d]===0){if(d===f)break;d=t[n+o[u]]}if(d>m&&(y&S)!==N){for(g===0&&(g=m),T+=h,p=d-g,v=1<<p;p+g<f&&(v-=R[p+g],!(v<=0));)p++,v<<=1;if(x+=1<<p,e===s4&&x>q7||e===W7&&x>z7)return 1;N=y&S,i[N]=m<<24|p<<16|T-a|0}}return y!==0&&(i[T+y]=d-g<<24|64<<16|0),l.bits=m,0};var qb=N3e;const S3e=0,Qne=1,Zne=2,{Z_FINISH:K7,Z_BLOCK:_3e,Z_TREES:_2,Z_OK:Ig,Z_STREAM_END:C3e,Z_NEED_DICT:A3e,Z_STREAM_ERROR:dd,Z_DATA_ERROR:Jne,Z_MEM_ERROR:ese,Z_BUF_ERROR:k3e,Z_DEFLATED:G7}=Gne,vC=16180,Y7=16181,X7=16182,Q7=16183,Z7=16184,J7=16185,e$=16186,t$=16187,r$=16188,n$=16189,Y5=16190,Ph=16191,i4=16192,s$=16193,a4=16194,i$=16195,a$=16196,o$=16197,l$=16198,C2=16199,A2=16200,c$=16201,d$=16202,u$=16203,h$=16204,f$=16205,o4=16206,m$=16207,p$=16208,ni=16209,tse=16210,rse=16211,P3e=852,T3e=592,E3e=15,O3e=E3e,g$=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function R3e(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Jg=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<vC||t.mode>rse?1:0},nse=e=>{if(Jg(e))return dd;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=vC,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(P3e),t.distcode=t.distdyn=new Int32Array(T3e),t.sane=1,t.back=-1,Ig},sse=e=>{if(Jg(e))return dd;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,nse(e)},ise=(e,t)=>{let n;if(Jg(e))return dd;const s=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?dd:(s.window!==null&&s.wbits!==t&&(s.window=null),s.wrap=n,s.wbits=t,sse(e))},ase=(e,t)=>{if(!e)return dd;const n=new R3e;e.state=n,n.strm=e,n.window=null,n.mode=vC;const s=ise(e,t);return s!==Ig&&(e.state=null),s},D3e=e=>ase(e,O3e);let x$=!0,l4,c4;const M3e=e=>{if(x$){l4=new Int32Array(512),c4=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(qb(Qne,e.lens,0,288,l4,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;qb(Zne,e.lens,0,32,c4,0,e.work,{bits:5}),x$=!1}e.lencode=l4,e.lenbits=9,e.distcode=c4,e.distbits=5},ose=(e,t,n,s)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),s>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>s&&(i=s),a.window.set(t.subarray(n-s,n-s+i),a.wnext),s-=i,s?(a.window.set(t.subarray(n-s,n),0),a.wnext=s,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},I3e=(e,t)=>{let n,s,i,a,o,l,c,d,u,h,f,m,p,g,v=0,x,y,j,w,N,S,T,C;const A=new Uint8Array(4);let R,k;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Jg(e)||!e.output||!e.input&&e.avail_in!==0)return dd;n=e.state,n.mode===Ph&&(n.mode=i4),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,s=e.input,l=e.avail_in,d=n.hold,u=n.bits,h=l,f=c,C=Ig;e:for(;;)switch(n.mode){case vC:if(n.wrap===0){n.mode=i4;break}for(;u<16;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(n.wrap&2&&d===35615){n.wbits===0&&(n.wbits=15),n.check=0,A[0]=d&255,A[1]=d>>>8&255,n.check=Eu(n.check,A,2,0),d=0,u=0,n.mode=Y7;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((d&255)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=ni;break}if((d&15)!==G7){e.msg="unknown compression method",n.mode=ni;break}if(d>>>=4,u-=4,T=(d&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){e.msg="invalid window size",n.mode=ni;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=d&512?n$:Ph,d=0,u=0;break;case Y7:for(;u<16;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(n.flags=d,(n.flags&255)!==G7){e.msg="unknown compression method",n.mode=ni;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=ni;break}n.head&&(n.head.text=d>>8&1),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,n.check=Eu(n.check,A,2,0)),d=0,u=0,n.mode=X7;case X7:for(;u<32;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}n.head&&(n.head.time=d),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,A[2]=d>>>16&255,A[3]=d>>>24&255,n.check=Eu(n.check,A,4,0)),d=0,u=0,n.mode=Q7;case Q7:for(;u<16;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}n.head&&(n.head.xflags=d&255,n.head.os=d>>8),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,n.check=Eu(n.check,A,2,0)),d=0,u=0,n.mode=Z7;case Z7:if(n.flags&1024){for(;u<16;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}n.length=d,n.head&&(n.head.extra_len=d),n.flags&512&&n.wrap&4&&(A[0]=d&255,A[1]=d>>>8&255,n.check=Eu(n.check,A,2,0)),d=0,u=0}else n.head&&(n.head.extra=null);n.mode=J7;case J7:if(n.flags&1024&&(m=n.length,m>l&&(m=l),m&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(s.subarray(a,a+m),T)),n.flags&512&&n.wrap&4&&(n.check=Eu(n.check,s,m,a)),l-=m,a+=m,n.length-=m),n.length))break e;n.length=0,n.mode=e$;case e$:if(n.flags&2048){if(l===0)break e;m=0;do T=s[a+m++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&m<l);if(n.flags&512&&n.wrap&4&&(n.check=Eu(n.check,s,m,a)),l-=m,a+=m,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=t$;case t$:if(n.flags&4096){if(l===0)break e;m=0;do T=s[a+m++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&m<l);if(n.flags&512&&n.wrap&4&&(n.check=Eu(n.check,s,m,a)),l-=m,a+=m,T)break e}else n.head&&(n.head.comment=null);n.mode=r$;case r$:if(n.flags&512){for(;u<16;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(n.wrap&4&&d!==(n.check&65535)){e.msg="header crc mismatch",n.mode=ni;break}d=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Ph;break;case n$:for(;u<32;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}e.adler=n.check=g$(d),d=0,u=0,n.mode=Y5;case Y5:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=u,A3e;e.adler=n.check=1,n.mode=Ph;case Ph:if(t===_3e||t===_2)break e;case i4:if(n.last){d>>>=u&7,u-=u&7,n.mode=o4;break}for(;u<3;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}switch(n.last=d&1,d>>>=1,u-=1,d&3){case 0:n.mode=s$;break;case 1:if(M3e(n),n.mode=C2,t===_2){d>>>=2,u-=2;break e}break;case 2:n.mode=a$;break;case 3:e.msg="invalid block type",n.mode=ni}d>>>=2,u-=2;break;case s$:for(d>>>=u&7,u-=u&7;u<32;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if((d&65535)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=ni;break}if(n.length=d&65535,d=0,u=0,n.mode=a4,t===_2)break e;case a4:n.mode=i$;case i$:if(m=n.length,m){if(m>l&&(m=l),m>c&&(m=c),m===0)break e;i.set(s.subarray(a,a+m),o),l-=m,a+=m,c-=m,o+=m,n.length-=m;break}n.mode=Ph;break;case a$:for(;u<14;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(n.nlen=(d&31)+257,d>>>=5,u-=5,n.ndist=(d&31)+1,d>>>=5,u-=5,n.ncode=(d&15)+4,d>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=ni;break}n.have=0,n.mode=o$;case o$:for(;n.have<n.ncode;){for(;u<3;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}n.lens[O[n.have++]]=d&7,d>>>=3,u-=3}for(;n.have<19;)n.lens[O[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},C=qb(S3e,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,C){e.msg="invalid code lengths set",n.mode=ni;break}n.have=0,n.mode=l$;case l$:for(;n.have<n.nlen+n.ndist;){for(;v=n.lencode[d&(1<<n.lenbits)-1],x=v>>>24,y=v>>>16&255,j=v&65535,!(x<=u);){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(j<16)d>>>=x,u-=x,n.lens[n.have++]=j;else{if(j===16){for(k=x+2;u<k;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(d>>>=x,u-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=ni;break}T=n.lens[n.have-1],m=3+(d&3),d>>>=2,u-=2}else if(j===17){for(k=x+3;u<k;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}d>>>=x,u-=x,T=0,m=3+(d&7),d>>>=3,u-=3}else{for(k=x+7;u<k;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}d>>>=x,u-=x,T=0,m=11+(d&127),d>>>=7,u-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=ni;break}for(;m--;)n.lens[n.have++]=T}}if(n.mode===ni)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=ni;break}if(n.lenbits=9,R={bits:n.lenbits},C=qb(Qne,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,C){e.msg="invalid literal/lengths set",n.mode=ni;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},C=qb(Zne,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,C){e.msg="invalid distances set",n.mode=ni;break}if(n.mode=C2,t===_2)break e;case C2:n.mode=A2;case A2:if(l>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=u,v3e(e,f),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,s=e.input,l=e.avail_in,d=n.hold,u=n.bits,n.mode===Ph&&(n.back=-1);break}for(n.back=0;v=n.lencode[d&(1<<n.lenbits)-1],x=v>>>24,y=v>>>16&255,j=v&65535,!(x<=u);){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(y&&!(y&240)){for(w=x,N=y,S=j;v=n.lencode[S+((d&(1<<w+N)-1)>>w)],x=v>>>24,y=v>>>16&255,j=v&65535,!(w+x<=u);){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}d>>>=w,u-=w,n.back+=w}if(d>>>=x,u-=x,n.back+=x,n.length=j,y===0){n.mode=f$;break}if(y&32){n.back=-1,n.mode=Ph;break}if(y&64){e.msg="invalid literal/length code",n.mode=ni;break}n.extra=y&15,n.mode=c$;case c$:if(n.extra){for(k=n.extra;u<k;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=d$;case d$:for(;v=n.distcode[d&(1<<n.distbits)-1],x=v>>>24,y=v>>>16&255,j=v&65535,!(x<=u);){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(!(y&240)){for(w=x,N=y,S=j;v=n.distcode[S+((d&(1<<w+N)-1)>>w)],x=v>>>24,y=v>>>16&255,j=v&65535,!(w+x<=u);){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}d>>>=w,u-=w,n.back+=w}if(d>>>=x,u-=x,n.back+=x,y&64){e.msg="invalid distance code",n.mode=ni;break}n.offset=j,n.extra=y&15,n.mode=u$;case u$:if(n.extra){for(k=n.extra;u<k;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=ni;break}n.mode=h$;case h$:if(c===0)break e;if(m=f-c,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=ni;break}m>n.wnext?(m-=n.wnext,p=n.wsize-m):p=n.wnext-m,m>n.length&&(m=n.length),g=n.window}else g=i,p=o-n.offset,m=n.length;m>c&&(m=c),c-=m,n.length-=m;do i[o++]=g[p++];while(--m);n.length===0&&(n.mode=A2);break;case f$:if(c===0)break e;i[o++]=n.length,c--,n.mode=A2;break;case o4:if(n.wrap){for(;u<32;){if(l===0)break e;l--,d|=s[a++]<<u,u+=8}if(f-=c,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?Eu(n.check,i,f,o-f):NT(n.check,i,f,o-f)),f=c,n.wrap&4&&(n.flags?d:g$(d))!==n.check){e.msg="incorrect data check",n.mode=ni;break}d=0,u=0}n.mode=m$;case m$:if(n.wrap&&n.flags){for(;u<32;){if(l===0)break e;l--,d+=s[a++]<<u,u+=8}if(n.wrap&4&&d!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=ni;break}d=0,u=0}n.mode=p$;case p$:C=C3e;break e;case ni:C=Jne;break e;case tse:return ese;case rse:default:return dd}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<ni&&(n.mode<o4||t!==K7))&&ose(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?Eu(n.check,i,f,e.next_out-f):NT(n.check,i,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Ph?128:0)+(n.mode===C2||n.mode===a4?256:0),(h===0&&f===0||t===K7)&&C===Ig&&(C=k3e),C},L3e=e=>{if(Jg(e))return dd;let t=e.state;return t.window&&(t.window=null),e.state=null,Ig},F3e=(e,t)=>{if(Jg(e))return dd;const n=e.state;return n.wrap&2?(n.head=t,t.done=!1,Ig):dd},$3e=(e,t)=>{const n=t.length;let s,i,a;return Jg(e)||(s=e.state,s.wrap!==0&&s.mode!==Y5)?dd:s.mode===Y5&&(i=1,i=NT(i,t,n,0),i!==s.check)?Jne:(a=ose(e,t,n,n),a?(s.mode=tse,ese):(s.havedict=1,Ig))};var B3e=sse,V3e=ise,U3e=nse,q3e=D3e,z3e=ase,H3e=I3e,W3e=L3e,K3e=F3e,G3e=$3e,Y3e="pako inflate (from Nodeca project)",$h={inflateReset:B3e,inflateReset2:V3e,inflateResetKeep:U3e,inflateInit:q3e,inflateInit2:z3e,inflate:H3e,inflateEnd:W3e,inflateGetHeader:K3e,inflateSetDictionary:G3e,inflateInfo:Y3e};function X3e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Q3e=X3e;const lse=Object.prototype.toString,{Z_NO_FLUSH:Z3e,Z_FINISH:J3e,Z_OK:W1,Z_STREAM_END:d4,Z_NEED_DICT:u4,Z_STREAM_ERROR:eTe,Z_DATA_ERROR:v$,Z_MEM_ERROR:tTe}=Gne;function aw(e){this.options=Yne.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g3e,this.strm.avail_out=0;let n=$h.inflateInit2(this.strm,t.windowBits);if(n!==W1)throw new Error(ST[n]);if(this.header=new Q3e,$h.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=_T.string2buf(t.dictionary):lse.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=$h.inflateSetDictionary(this.strm,t.dictionary),n!==W1)))throw new Error(ST[n])}aw.prototype.push=function(e,t){const n=this.strm,s=this.options.chunkSize,i=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?J3e:Z3e,lse.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(s),n.next_out=0,n.avail_out=s),a=$h.inflate(n,o),a===u4&&i&&(a=$h.inflateSetDictionary(n,i),a===W1?a=$h.inflate(n,o):a===v$&&(a=u4));n.avail_in>0&&a===d4&&n.state.wrap>0&&e[n.next_in]!==0;)$h.inflateReset(n),a=$h.inflate(n,o);switch(a){case eTe:case v$:case u4:case tTe:return this.onEnd(a),this.ended=!0,!1}if(l=n.avail_out,n.next_out&&(n.avail_out===0||a===d4))if(this.options.to==="string"){let c=_T.utf8border(n.output,n.next_out),d=n.next_out-c,u=_T.buf2string(n.output,c);n.next_out=d,n.avail_out=s-d,d&&n.output.set(n.output.subarray(c,c+d),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===W1&&l===0)){if(a===d4)return a=$h.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};aw.prototype.onData=function(e){this.chunks.push(e)};aw.prototype.onEnd=function(e){e===W1&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Yne.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function rTe(e,t){const n=new aw(t);if(n.push(e),n.err)throw n.msg||ST[n.err];return n.result}var nTe=aw,sTe=rTe,iTe={Inflate:nTe,inflate:sTe};const{Inflate:aTe,inflate:oTe}=iTe;var y$=aTe,lTe=oTe;const cse=[];for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t&1?t=3988292384^t>>>1:t=t>>>1;cse[e]=t}const b$=4294967295;function cTe(e,t,n){let s=e;for(let i=0;i<n;i++)s=cse[(s^t[i])&255]^s>>>8;return s}function dTe(e,t){return(cTe(b$,e,t)^b$)>>>0}function j$(e,t,n){const s=e.readUint32(),i=dTe(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==s)throw new Error(`CRC mismatch for chunk ${n}. Expected ${s}, found ${i}`)}function dse(e,t,n){for(let s=0;s<n;s++)t[s]=e[s]}function use(e,t,n,s){let i=0;for(;i<s;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-s]&255}function hse(e,t,n,s){let i=0;if(n.length===0)for(;i<s;i++)t[i]=e[i];else for(;i<s;i++)t[i]=e[i]+n[i]&255}function fse(e,t,n,s,i){let a=0;if(n.length===0){for(;a<i;a++)t[a]=e[a];for(;a<s;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(n[a]>>1)&255;for(;a<s;a++)t[a]=e[a]+(t[a-i]+n[a]>>1)&255}}function mse(e,t,n,s,i){let a=0;if(n.length===0){for(;a<i;a++)t[a]=e[a];for(;a<s;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+n[a]&255;for(;a<s;a++)t[a]=e[a]+uTe(t[a-i],n[a],n[a-i])&255}}function uTe(e,t,n){const s=e+t-n,i=Math.abs(s-e),a=Math.abs(s-t),o=Math.abs(s-n);return i<=a&&i<=o?e:a<=o?t:n}function hTe(e,t,n,s,i,a){switch(e){case 0:dse(t,n,i);break;case 1:use(t,n,i,a);break;case 2:hse(t,n,s,i);break;case 3:fse(t,n,s,i,a);break;case 4:mse(t,n,s,i,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const fTe=new Uint16Array([255]),mTe=new Uint8Array(fTe.buffer),pTe=mTe[0]===255;function gTe(e){const{data:t,width:n,height:s,channels:i,depth:a}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(a/8)*i,c=new Uint8Array(s*n*l);let d=0;for(let u=0;u<7;u++){const h=o[u],f=Math.ceil((n-h.x)/h.xStep),m=Math.ceil((s-h.y)/h.yStep);if(f<=0||m<=0)continue;const p=f*l,g=new Uint8Array(p);for(let v=0;v<m;v++){const x=t[d++],y=t.subarray(d,d+p);d+=p;const j=new Uint8Array(p);hTe(x,y,j,g,p,l),g.set(j);for(let w=0;w<f;w++){const N=h.x+w*h.xStep,S=h.y+v*h.yStep;if(!(N>=n||S>=s))for(let T=0;T<l;T++)c[(S*n+N)*l+T]=j[w*l+T]}}}if(a===16){const u=new Uint16Array(c.buffer);if(pTe)for(let h=0;h<u.length;h++)u[h]=xTe(u[h]);return u}else return c}function xTe(e){return(e&255)<<8|e>>8&255}const vTe=new Uint16Array([255]),yTe=new Uint8Array(vTe.buffer),bTe=yTe[0]===255,jTe=new Uint8Array(0);function w$(e){const{data:t,width:n,height:s,channels:i,depth:a}=e,o=Math.ceil(a/8)*i,l=Math.ceil(a/8*i*n),c=new Uint8Array(s*l);let d=jTe,u=0,h,f;for(let m=0;m<s;m++){switch(h=t.subarray(u+1,u+1+l),f=c.subarray(m*l,(m+1)*l),t[u]){case 0:dse(h,f,l);break;case 1:use(h,f,l,o);break;case 2:hse(h,f,d,l);break;case 3:fse(h,f,d,l,o);break;case 4:mse(h,f,d,l,o);break;default:throw new Error(`Unsupported filter: ${t[u]}`)}d=f,u+=l+1}if(a===16){const m=new Uint16Array(c.buffer);if(bTe)for(let p=0;p<m.length;p++)m[p]=wTe(m[p]);return m}else return c}function wTe(e){return(e&255)<<8|e>>8&255}const kN=Uint8Array.of(137,80,78,71,13,10,26,10);function N$(e){if(!NTe(e.readBytes(kN.length)))throw new Error("wrong PNG signature")}function NTe(e){if(e.length<kN.length)return!1;for(let t=0;t<kN.length;t++)if(e[t]!==kN[t])return!1;return!0}const STe="tEXt",_Te=0,pse=new TextDecoder("latin1");function CTe(e){if(kTe(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const ATe=/^[\u0000-\u00FF]*$/;function kTe(e){if(!ATe.test(e))throw new Error("invalid latin1 text")}function PTe(e,t,n){const s=gse(t);e[s]=TTe(t,n-s.length-1)}function gse(e){for(e.mark();e.readByte()!==_Te;);const t=e.offset;e.reset();const n=pse.decode(e.readBytes(t-e.offset-1));return e.skip(1),CTe(n),n}function TTe(e,t){return pse.decode(e.readBytes(t))}const Xl={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},h4={UNKNOWN:-1,DEFLATE:0},S$={UNKNOWN:-1,ADAPTIVE:0},f4={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},k2={NONE:0,BACKGROUND:1,PREVIOUS:2},m4={SOURCE:0,OVER:1};class ETe extends d6{constructor(n,s={}){super(n);Ie(this,"_checkCrc");Ie(this,"_inflator");Ie(this,"_png");Ie(this,"_apng");Ie(this,"_end");Ie(this,"_hasPalette");Ie(this,"_palette");Ie(this,"_hasTransparency");Ie(this,"_transparency");Ie(this,"_compressionMethod");Ie(this,"_filterMethod");Ie(this,"_interlaceMethod");Ie(this,"_colorType");Ie(this,"_isAnimated");Ie(this,"_numberOfFrames");Ie(this,"_numberOfPlays");Ie(this,"_frames");Ie(this,"_writingDataChunks");const{checkCrc:i=!1}=s;this._checkCrc=i,this._inflator=new y$,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=h4.UNKNOWN,this._filterMethod=S$.UNKNOWN,this._interlaceMethod=f4.UNKNOWN,this._colorType=Xl.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(N$(this);!this._end;){const n=this.readUint32(),s=this.readChars(4);this.decodeChunk(n,s)}return this.decodeImage(),this._png}decodeApng(){for(N$(this);!this._end;){const n=this.readUint32(),s=this.readChars(4);this.decodeApngChunk(n,s)}return this.decodeApngImage(),this._apng}decodeChunk(n,s){const i=this.offset;switch(s){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case STe:PTe(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?j$(this,n+4,s):this.skip(4)}decodeApngChunk(n,s){const i=this.offset;switch(s!=="fdAT"&&s!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),s){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,s),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${s}`);this._checkCrc?j$(this,n+4,s):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=OTe(this.readUint8());const s=this.readUint8();this._colorType=s;let i;switch(s){case Xl.GREYSCALE:i=1;break;case Xl.TRUECOLOUR:i=3;break;case Xl.INDEXED_COLOUR:i=1;break;case Xl.GREYSCALE_ALPHA:i=2;break;case Xl.TRUECOLOUR_ALPHA:i=4;break;case Xl.UNKNOWN:default:throw new Error(`Unknown color type: ${s}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==h4.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const s=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let a=0;a<s;a++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const s=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let s=n,i=this.offset+this.byteOffset;if(i+=4,s-=4,this._inflator.push(new Uint8Array(this.buffer,i,s)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Xl.GREYSCALE:case Xl.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let s=0;s<n/2;s++)this._transparency[s]=this.readUint16();break}case Xl.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let s=0;for(;s<n;s++){const i=this.readByte();this._palette[s].push(i)}for(;s<this._palette.length;s++)this._palette[s].push(255);break}case Xl.UNKNOWN:case Xl.GREYSCALE_ALPHA:case Xl.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const s=gse(this),i=this.readUint8();if(i!==h4.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const a=this.readBytes(n-s.length-2);this._png.iccEmbeddedProfile={name:s,profile:lTe(a)}}decodepHYs(){const n=this.readUint32(),s=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:s,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const s={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=w$({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)s.data=i.data;else{const a=this._apng.frames.at(n-1);this.disposeFrame(i,a,s),this.addFrameDataToCanvas(s,i)}this._apng.frames.push(s)}}return this._apng}disposeFrame(n,s,i){switch(n.disposeOp){case k2.NONE:break;case k2.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let o=0;o<this._png.width;o++){const l=(a*n.width+o)*this._png.channels;for(let c=0;c<this._png.channels;c++)i.data[l+c]=0}break;case k2.PREVIOUS:i.data.set(s.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,s){const i=1<<this._png.depth,a=(o,l)=>{const c=((o+s.yOffset)*this._png.width+s.xOffset+l)*this._png.channels,d=(o*s.width+l)*this._png.channels;return{index:c,frameIndex:d}};switch(s.blendOp){case m4.SOURCE:for(let o=0;o<s.height;o++)for(let l=0;l<s.width;l++){const{index:c,frameIndex:d}=a(o,l);for(let u=0;u<this._png.channels;u++)n.data[c+u]=s.data[d+u]}break;case m4.OVER:for(let o=0;o<s.height;o++)for(let l=0;l<s.width;l++){const{index:c,frameIndex:d}=a(o,l);for(let u=0;u<this._png.channels;u++){const h=s.data[d+this._png.channels-1]/i,f=u%(this._png.channels-1)===0?1:s.data[d+u],m=Math.floor(h*f+(1-h)*n.data[c+u]);n.data[c+u]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var s;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((s=this._frames)==null?void 0:s.at(0)).data:this._inflator.result;if(this._filterMethod!==S$.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===f4.NO_INTERLACE)this._png.data=w$({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===f4.ADAM7)this._png.data=gTe({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,s=this._frames.at(-1);s?s.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:k2.NONE,blendOp:m4.SOURCE,data:n}),this._inflator=new y$,this._writingDataChunks=!1}}function OTe(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var _$;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(_$||(_$={}));function RTe(e,t){return new ETe(e,t).decode()}var Yr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function p4(){Yr.console&&typeof Yr.console.log=="function"&&Yr.console.log.apply(Yr.console,arguments)}var ks={log:p4,warn:function(e){Yr.console&&(typeof Yr.console.warn=="function"?Yr.console.warn.apply(Yr.console,arguments):p4.call(null,arguments))},error:function(e){Yr.console&&(typeof Yr.console.error=="function"?Yr.console.error.apply(Yr.console,arguments):p4(e))}};function g4(e,t,n){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Bp(s.response,t,n)},s.onerror=function(){ks.error("could not download file")},s.send()}function C$(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function P2(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Bp=Yr.saveAs||((typeof window>"u"?"undefined":cs(window))!=="object"||window!==Yr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var s=Yr.URL||Yr.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?C$(i.href)?g4(e,t,n):P2(i,i.target="_blank"):P2(i)):(i.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(i.href)},4e4),setTimeout(function(){P2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(C$(e))g4(e,t,n);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){P2(s)})}else navigator.msSaveOrOpenBlob(function(i,a){return a===void 0?a={autoBom:!1}:cs(a)!=="object"&&(ks.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return g4(e,t,n);var i=e.type==="application/octet-stream",a=/constructor/i.test(Yr.HTMLElement)||Yr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":cs(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=u:location=u,s=null},l.readAsDataURL(e)}else{var c=Yr.URL||Yr.webkitURL,d=c.createObjectURL(e);s?s.location=d:location.href=d,s=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xse(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],s=0;s<n.length;s++){var i=n[s].re,a=n[s].process,o=i.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}var PN=Yr.atob.bind(Yr),A$=Yr.btoa.bind(Yr);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function x4(e,t){var n=e[0],s=e[1],i=e[2],a=e[3];n=go(n,s,i,a,t[0],7,-680876936),a=go(a,n,s,i,t[1],12,-389564586),i=go(i,a,n,s,t[2],17,606105819),s=go(s,i,a,n,t[3],22,-1044525330),n=go(n,s,i,a,t[4],7,-176418897),a=go(a,n,s,i,t[5],12,1200080426),i=go(i,a,n,s,t[6],17,-1473231341),s=go(s,i,a,n,t[7],22,-45705983),n=go(n,s,i,a,t[8],7,1770035416),a=go(a,n,s,i,t[9],12,-1958414417),i=go(i,a,n,s,t[10],17,-42063),s=go(s,i,a,n,t[11],22,-1990404162),n=go(n,s,i,a,t[12],7,1804603682),a=go(a,n,s,i,t[13],12,-40341101),i=go(i,a,n,s,t[14],17,-1502002290),n=xo(n,s=go(s,i,a,n,t[15],22,1236535329),i,a,t[1],5,-165796510),a=xo(a,n,s,i,t[6],9,-1069501632),i=xo(i,a,n,s,t[11],14,643717713),s=xo(s,i,a,n,t[0],20,-373897302),n=xo(n,s,i,a,t[5],5,-701558691),a=xo(a,n,s,i,t[10],9,38016083),i=xo(i,a,n,s,t[15],14,-660478335),s=xo(s,i,a,n,t[4],20,-405537848),n=xo(n,s,i,a,t[9],5,568446438),a=xo(a,n,s,i,t[14],9,-1019803690),i=xo(i,a,n,s,t[3],14,-187363961),s=xo(s,i,a,n,t[8],20,1163531501),n=xo(n,s,i,a,t[13],5,-1444681467),a=xo(a,n,s,i,t[2],9,-51403784),i=xo(i,a,n,s,t[7],14,1735328473),n=vo(n,s=xo(s,i,a,n,t[12],20,-1926607734),i,a,t[5],4,-378558),a=vo(a,n,s,i,t[8],11,-2022574463),i=vo(i,a,n,s,t[11],16,1839030562),s=vo(s,i,a,n,t[14],23,-35309556),n=vo(n,s,i,a,t[1],4,-1530992060),a=vo(a,n,s,i,t[4],11,1272893353),i=vo(i,a,n,s,t[7],16,-155497632),s=vo(s,i,a,n,t[10],23,-1094730640),n=vo(n,s,i,a,t[13],4,681279174),a=vo(a,n,s,i,t[0],11,-358537222),i=vo(i,a,n,s,t[3],16,-722521979),s=vo(s,i,a,n,t[6],23,76029189),n=vo(n,s,i,a,t[9],4,-640364487),a=vo(a,n,s,i,t[12],11,-421815835),i=vo(i,a,n,s,t[15],16,530742520),n=yo(n,s=vo(s,i,a,n,t[2],23,-995338651),i,a,t[0],6,-198630844),a=yo(a,n,s,i,t[7],10,1126891415),i=yo(i,a,n,s,t[14],15,-1416354905),s=yo(s,i,a,n,t[5],21,-57434055),n=yo(n,s,i,a,t[12],6,1700485571),a=yo(a,n,s,i,t[3],10,-1894986606),i=yo(i,a,n,s,t[10],15,-1051523),s=yo(s,i,a,n,t[1],21,-2054922799),n=yo(n,s,i,a,t[8],6,1873313359),a=yo(a,n,s,i,t[15],10,-30611744),i=yo(i,a,n,s,t[6],15,-1560198380),s=yo(s,i,a,n,t[13],21,1309151649),n=yo(n,s,i,a,t[4],6,-145523070),a=yo(a,n,s,i,t[11],10,-1120210379),i=yo(i,a,n,s,t[2],15,718787259),s=yo(s,i,a,n,t[9],21,-343485551),e[0]=xm(n,e[0]),e[1]=xm(s,e[1]),e[2]=xm(i,e[2]),e[3]=xm(a,e[3])}function yC(e,t,n,s,i,a){return t=xm(xm(t,e),xm(s,a)),xm(t<<i|t>>>32-i,n)}function go(e,t,n,s,i,a,o){return yC(t&n|~t&s,e,t,i,a,o)}function xo(e,t,n,s,i,a,o){return yC(t&s|n&~s,e,t,i,a,o)}function vo(e,t,n,s,i,a,o){return yC(t^n^s,e,t,i,a,o)}function yo(e,t,n,s,i,a,o){return yC(n^(t|~s),e,t,i,a,o)}function vse(e){var t,n=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)x4(s,DTe(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(x4(s,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,x4(s,i),s}function DTe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}var k$="0123456789abcdef".split("");function MTe(e){for(var t="",n=0;n<4;n++)t+=k$[e>>8*n+4&15]+k$[e>>8*n&15];return t}function ITe(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function CT(e){return vse(e).map(ITe).join("")}var LTe=function(e){for(var t=0;t<e.length;t++)e[t]=MTe(e[t]);return e.join("")}(vse("hello"))!="5d41402abc4b2a76b9719d911017c592";function xm(e,t){if(LTe){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function AT(e,t){var n,s,i,a;if(e!==n){for(var o=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}n=e,s=l}else l=s;var h=t.length,f=0,m=0,p="";for(c=0;c<h;c++)m=(m+(u=l[f=(f+1)%256]))%256,l[f]=l[m],l[m]=u,o=l[(l[f]+l[m])%256],p+=String.fromCharCode(t.charCodeAt(c)^o);return p}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var P$={print:4,modify:8,copy:16,"annot-forms":32};function Ax(e,t,n,s){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(P$.perm!==void 0)throw new Error("Invalid permission: "+l);i+=P$[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=CT(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=AT(this.encryptionKey,this.padding)}function kx(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,s=0;s<n;s++){var i=e.charCodeAt(s);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[s]}return t}function T$(e){if(cs(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,s,i){if(i=i||!1,typeof n!="string"||typeof s!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[s,!!i],a},this.unsubscribe=function(n){for(var s in t)if(t[s][n])return delete t[s][n],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var s=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[n]){var o=t[n][a];try{o[0].apply(e,s)}catch(l){Yr.console&&ks.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function X5(e){if(!(this instanceof X5))return new X5(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function yse(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function zp(e,t,n,s,i){if(!(this instanceof zp))return new zp(e,t,n,s,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,yse.call(this,s,i)}function Yx(e,t,n,s,i){if(!(this instanceof Yx))return new Yx(e,t,n,s,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,yse.call(this,s,i)}function Sr(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,c=16,d="S",u=null;cs(e=e||{})==="object"&&(n=e.orientation,s=e.unit||s,i=e.format||i,a=e.compress||e.compressPdf||a,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(a===!0?["FlateEncode"]:o),s=s||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,f={},m={internal:{},__private__:{}};m.__private__.PubSub=T$;var p="1.3",g=m.__private__.getPdfVersion=function(){return p};m.__private__.setPdfVersion=function(B){p=B};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return v};var x=m.__private__.getPageFormat=function(B){return v[B]};i=i||"a4";var y="compat",j="advanced",w=y;function N(){this.saveGraphicsState(),ee(new gr(nt,0,0,-nt,0,da()*nt).toString()+" cm"),this.setFontSize(this.getFontSize()/nt),d="n",w=j}function S(){this.restoreGraphicsState(),d="S",w=y}var T=m.__private__.combineFontStyleAndFontWeight=function(B,re){if(B=="bold"&&re=="normal"||B=="bold"&&re==400||B=="normal"&&re=="italic"||B=="bold"&&re=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return re&&(B=re==400||re==="normal"?B==="italic"?"italic":"normal":re!=700&&re!=="bold"||B!=="normal"?(re==700?"bold":re)+""+B:"bold"),B};m.advancedAPI=function(B){var re=w===y;return re&&N.call(this),typeof B!="function"||(B(this),re&&S.call(this)),this},m.compatAPI=function(B){var re=w===j;return re&&S.call(this),typeof B!="function"||(B(this),re&&N.call(this)),this},m.isAdvancedAPI=function(){return w===j};var C,A=function(B){if(w!==j)throw new Error(B+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(B,re){var Ne=t||re;if(isNaN(B)||isNaN(Ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return B.toFixed(Ne).replace(/0+$/,"")};C=m.hpf=m.__private__.hpf=typeof c=="number"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return R(B,c)}:c==="smart"?function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return R(B,B>-1&&B<1?16:5)}:function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.hpf");return R(B,16)};var k=m.f2=m.__private__.f2=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f2");return R(B,2)},O=m.__private__.f3=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.f3");return R(B,3)},$=m.scale=m.__private__.scale=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.scale");return w===y?B*nt:w===j?B:void 0},D=function(B){return $(function(re){return w===y?da()-re:w===j?re:void 0}(B))};m.__private__.setPrecision=m.setPrecision=function(B){typeof parseInt(B,10)=="number"&&(t=parseInt(B,10))};var q,M="00000000000000000000000000000000",L=m.__private__.getFileId=function(){return M},V=m.__private__.setFileId=function(B){return M=B!==void 0&&/^[a-fA-F0-9]{32}$/.test(B)?B.toUpperCase():M.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(ss=new Ax(u.userPermissions,u.userPassword,u.ownerPassword,M)),M};m.setFileId=function(B){return V(B),this},m.getFileId=function(){return L()};var P=m.__private__.convertDateToPDFDate=function(B){var re=B.getTimezoneOffset(),Ne=re<0?"+":"-",Me=Math.floor(Math.abs(re/60)),We=Math.abs(re%60),gt=[Ne,G(Me),"'",G(We),"'"].join("");return["D:",B.getFullYear(),G(B.getMonth()+1),G(B.getDate()),G(B.getHours()),G(B.getMinutes()),G(B.getSeconds()),gt].join("")},z=m.__private__.convertPDFDateToDate=function(B){var re=parseInt(B.substr(2,4),10),Ne=parseInt(B.substr(6,2),10)-1,Me=parseInt(B.substr(8,2),10),We=parseInt(B.substr(10,2),10),gt=parseInt(B.substr(12,2),10),At=parseInt(B.substr(14,2),10);return new Date(re,Ne,Me,We,gt,At,0)},Z=m.__private__.setCreationDate=function(B){var re;if(B===void 0&&(B=new Date),B instanceof Date)re=P(B);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(B))throw new Error("Invalid argument passed to jsPDF.setCreationDate");re=B}return q=re},F=m.__private__.getCreationDate=function(B){var re=q;return B==="jsDate"&&(re=z(q)),re};m.setCreationDate=function(B){return Z(B),this},m.getCreationDate=function(B){return F(B)};var W,G=m.__private__.padd2=function(B){return("0"+parseInt(B)).slice(-2)},H=m.__private__.padd2Hex=function(B){return("00"+(B=B.toString())).substr(B.length)},se=0,J=[],ie=[],X=0,he=[],fe=[],Q=!1,Oe=ie;m.__private__.setCustomOutputDestination=function(B){Q=!0,Oe=B};var ve=function(B){Q||(Oe=B)};m.__private__.resetCustomOutputDestination=function(){Q=!1,Oe=ie};var ee=m.__private__.out=function(B){return B=B.toString(),X+=B.length+1,Oe.push(B),Oe},Ee=m.__private__.write=function(B){return ee(arguments.length===1?B.toString():Array.prototype.join.call(arguments," "))},Re=m.__private__.getArrayBuffer=function(B){for(var re=B.length,Ne=new ArrayBuffer(re),Me=new Uint8Array(Ne);re--;)Me[re]=B.charCodeAt(re);return Ne},oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return oe};var De=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(B){return De=w===j?B/nt:B,this};var tt,Qe=m.__private__.getFontSize=m.getFontSize=function(){return w===y?De:De*nt},xe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(B){return xe=B,this},m.__private__.getR2L=m.getR2L=function(){return xe};var ae,we=m.__private__.setZoomMode=function(B){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(B))tt=B;else if(isNaN(B)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(B)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+B+'" is not recognized.');tt=B}else tt=parseInt(B,10)};m.__private__.getZoomMode=function(){return tt};var Te,qe=m.__private__.setPageMode=function(B){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(B)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+B+'" is not recognized.');ae=B};m.__private__.getPageMode=function(){return ae};var Ke=m.__private__.setLayoutMode=function(B){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(B)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+B+'" is not recognized.');Te=B};m.__private__.getLayoutMode=function(){return Te},m.__private__.setDisplayMode=m.setDisplayMode=function(B,re,Ne){return we(B),Ke(re),qe(Ne),this};var Ge={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(B){if(Object.keys(Ge).indexOf(B)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ge[B]},m.__private__.getDocumentProperties=function(){return Ge},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(B){for(var re in Ge)Ge.hasOwnProperty(re)&&B[re]&&(Ge[re]=B[re]);return this},m.__private__.setDocumentProperty=function(B,re){if(Object.keys(Ge).indexOf(B)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ge[B]=re};var He,nt,Y,Ct,Vt,pt={},Ht={},wr=[],wt={},Ut={},St={},Be={},lr=null,Wt=0,It=[],yt=new T$(m),ut=e.hotfixes||[],Kt={},Os={},Dt=[],gr=function B(re,Ne,Me,We,gt,At){if(!(this instanceof B))return new B(re,Ne,Me,We,gt,At);isNaN(re)&&(re=1),isNaN(Ne)&&(Ne=0),isNaN(Me)&&(Me=0),isNaN(We)&&(We=1),isNaN(gt)&&(gt=0),isNaN(At)&&(At=0),this._matrix=[re,Ne,Me,We,gt,At]};Object.defineProperty(gr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(gr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(gr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(gr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(gr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(gr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(gr.prototype,"a",{get:function(){return this._matrix[0]},set:function(B){this._matrix[0]=B}}),Object.defineProperty(gr.prototype,"b",{get:function(){return this._matrix[1]},set:function(B){this._matrix[1]=B}}),Object.defineProperty(gr.prototype,"c",{get:function(){return this._matrix[2]},set:function(B){this._matrix[2]=B}}),Object.defineProperty(gr.prototype,"d",{get:function(){return this._matrix[3]},set:function(B){this._matrix[3]=B}}),Object.defineProperty(gr.prototype,"e",{get:function(){return this._matrix[4]},set:function(B){this._matrix[4]=B}}),Object.defineProperty(gr.prototype,"f",{get:function(){return this._matrix[5]},set:function(B){this._matrix[5]=B}}),Object.defineProperty(gr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(gr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(gr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(gr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),gr.prototype.join=function(B){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(B)},gr.prototype.multiply=function(B){var re=B.sx*this.sx+B.shy*this.shx,Ne=B.sx*this.shy+B.shy*this.sy,Me=B.shx*this.sx+B.sy*this.shx,We=B.shx*this.shy+B.sy*this.sy,gt=B.tx*this.sx+B.ty*this.shx+this.tx,At=B.tx*this.shy+B.ty*this.sy+this.ty;return new gr(re,Ne,Me,We,gt,At)},gr.prototype.decompose=function(){var B=this.sx,re=this.shy,Ne=this.shx,Me=this.sy,We=this.tx,gt=this.ty,At=Math.sqrt(B*B+re*re),or=(B/=At)*Ne+(re/=At)*Me;Ne-=B*or,Me-=re*or;var cr=Math.sqrt(Ne*Ne+Me*Me);return or/=cr,B*(Me/=cr)<re*(Ne/=cr)&&(B=-B,re=-re,or=-or,At=-At),{scale:new gr(At,0,0,cr,0,0),translate:new gr(1,0,0,1,We,gt),rotate:new gr(B,re,-re,B,0,0),skew:new gr(1,0,or,1,0,0)}},gr.prototype.toString=function(B){return this.join(" ")},gr.prototype.inversed=function(){var B=this.sx,re=this.shy,Ne=this.shx,Me=this.sy,We=this.tx,gt=this.ty,At=1/(B*Me-re*Ne),or=Me*At,cr=-re*At,Vr=-Ne*At,Qr=B*At;return new gr(or,cr,Vr,Qr,-or*We-Vr*gt,-cr*We-Qr*gt)},gr.prototype.applyToPoint=function(B){var re=B.x*this.sx+B.y*this.shx+this.tx,Ne=B.x*this.shy+B.y*this.sy+this.ty;return new Il(re,Ne)},gr.prototype.applyToRectangle=function(B){var re=this.applyToPoint(B),Ne=this.applyToPoint(new Il(B.x+B.w,B.y+B.h));return new is(re.x,re.y,Ne.x-re.x,Ne.y-re.y)},gr.prototype.clone=function(){var B=this.sx,re=this.shy,Ne=this.shx,Me=this.sy,We=this.tx,gt=this.ty;return new gr(B,re,Ne,Me,We,gt)},m.Matrix=gr;var Fn=m.matrixMult=function(B,re){return re.multiply(B)},bi=new gr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=bi;var An=function(B,re){if(!Ut[B]){var Ne=(re instanceof zp?"Sh":"P")+(Object.keys(wt).length+1).toString(10);re.id=Ne,Ut[B]=Ne,wt[Ne]=re,yt.publish("addPattern",re)}};m.ShadingPattern=zp,m.TilingPattern=Yx,m.addShadingPattern=function(B,re){return A("addShadingPattern()"),An(B,re),this},m.beginTilingPattern=function(B){A("beginTilingPattern()"),bd(B.boundingBox[0],B.boundingBox[1],B.boundingBox[2]-B.boundingBox[0],B.boundingBox[3]-B.boundingBox[1],B.matrix)},m.endTilingPattern=function(B,re){A("endTilingPattern()"),re.stream=fe[W].join(`
`),An(B,re),yt.publish("endTilingPattern",re),Dt.pop().restore()};var ei,rn=m.__private__.newObject=function(){var B=vn();return rs(B,!0),B},vn=m.__private__.newObjectDeferred=function(){return se++,J[se]=function(){return X},se},rs=function(B,re){return re=typeof re=="boolean"&&re,J[B]=X,re&&ee(B+" 0 obj"),B},En=m.__private__.newAdditionalObject=function(){var B={objId:vn(),content:""};return he.push(B),B},ka=vn(),zr=vn(),zt=m.__private__.decodeColorString=function(B){var re=B.split(" ");if(re.length!==2||re[1]!=="g"&&re[1]!=="G")re.length!==5||re[4]!=="k"&&re[4]!=="K"||(re=[(1-re[0])*(1-re[3]),(1-re[1])*(1-re[3]),(1-re[2])*(1-re[3]),"r"]);else{var Ne=parseFloat(re[0]);re=[Ne,Ne,Ne,"r"]}for(var Me="#",We=0;We<3;We++)Me+=("0"+Math.floor(255*parseFloat(re[We])).toString(16)).slice(-2);return Me},ji=m.__private__.encodeColorString=function(B){var re;typeof B=="string"&&(B={ch1:B});var Ne=B.ch1,Me=B.ch2,We=B.ch3,gt=B.ch4,At=B.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ne=="string"&&Ne.charAt(0)!=="#"){var or=new xse(Ne);if(or.ok)Ne=or.toHex();else if(!/^\d*\.?\d*$/.test(Ne))throw new Error('Invalid color "'+Ne+'" passed to jsPDF.encodeColorString.')}if(typeof Ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ne)&&(Ne="#"+Ne[1]+Ne[1]+Ne[2]+Ne[2]+Ne[3]+Ne[3]),typeof Ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ne)){var cr=parseInt(Ne.substr(1),16);Ne=cr>>16&255,Me=cr>>8&255,We=255&cr}if(Me===void 0||gt===void 0&&Ne===Me&&Me===We)re=typeof Ne=="string"?Ne+" "+At[0]:B.precision===2?k(Ne/255)+" "+At[0]:O(Ne/255)+" "+At[0];else if(gt===void 0||cs(gt)==="object"){if(gt&&!isNaN(gt.a)&&gt.a===0)return["1.","1.","1.",At[1]].join(" ");re=typeof Ne=="string"?[Ne,Me,We,At[1]].join(" "):B.precision===2?[k(Ne/255),k(Me/255),k(We/255),At[1]].join(" "):[O(Ne/255),O(Me/255),O(We/255),At[1]].join(" ")}else re=typeof Ne=="string"?[Ne,Me,We,gt,At[2]].join(" "):B.precision===2?[k(Ne),k(Me),k(We),k(gt),At[2]].join(" "):[O(Ne),O(Me),O(We),O(gt),At[2]].join(" ");return re},wi=m.__private__.getFilters=function(){return o},Rs=m.__private__.putStream=function(B){var re=(B=B||{}).data||"",Ne=B.filters||wi(),Me=B.alreadyAppliedFilters||[],We=B.addLength1||!1,gt=re.length,At=B.objectId,or=function(Ci){return Ci};if(u!==null&&At===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(or=ss.encryptor(At,0));var cr={};Ne===!0&&(Ne=["FlateEncode"]);var Vr=B.additionalKeyValues||[],Qr=(cr=Sr.API.processDataByFilters!==void 0?Sr.API.processDataByFilters(re,Ne):{data:re,reverseChain:[]}).reverseChain+(Array.isArray(Me)?Me.join(" "):Me.toString());if(cr.data.length!==0&&(Vr.push({key:"Length",value:cr.data.length}),We===!0&&Vr.push({key:"Length1",value:gt})),Qr.length!=0)if(Qr.split("/").length-1==1)Vr.push({key:"Filter",value:Qr});else{Vr.push({key:"Filter",value:"["+Qr+"]"});for(var Rn=0;Rn<Vr.length;Rn+=1)if(Vr[Rn].key==="DecodeParms"){for(var Cs=[],hi=0;hi<cr.reverseChain.split("/").length-1;hi+=1)Cs.push("null");Cs.push(Vr[Rn].value),Vr[Rn].value="["+Cs.join(" ")+"]"}}ee("<<");for(var Kn=0;Kn<Vr.length;Kn++)ee("/"+Vr[Kn].key+" "+Vr[Kn].value);ee(">>"),cr.data.length!==0&&(ee("stream"),ee(or(cr.data)),ee("endstream"))},st=m.__private__.putPage=function(B){var re=B.number,Ne=B.data,Me=B.objId,We=B.contentsObjId;rs(Me,!0),ee("<</Type /Page"),ee("/Parent "+B.rootDictionaryObjId+" 0 R"),ee("/Resources "+B.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(C(B.mediaBox.bottomLeftX))+" "+parseFloat(C(B.mediaBox.bottomLeftY))+" "+C(B.mediaBox.topRightX)+" "+C(B.mediaBox.topRightY)+"]"),B.cropBox!==null&&ee("/CropBox ["+C(B.cropBox.bottomLeftX)+" "+C(B.cropBox.bottomLeftY)+" "+C(B.cropBox.topRightX)+" "+C(B.cropBox.topRightY)+"]"),B.bleedBox!==null&&ee("/BleedBox ["+C(B.bleedBox.bottomLeftX)+" "+C(B.bleedBox.bottomLeftY)+" "+C(B.bleedBox.topRightX)+" "+C(B.bleedBox.topRightY)+"]"),B.trimBox!==null&&ee("/TrimBox ["+C(B.trimBox.bottomLeftX)+" "+C(B.trimBox.bottomLeftY)+" "+C(B.trimBox.topRightX)+" "+C(B.trimBox.topRightY)+"]"),B.artBox!==null&&ee("/ArtBox ["+C(B.artBox.bottomLeftX)+" "+C(B.artBox.bottomLeftY)+" "+C(B.artBox.topRightX)+" "+C(B.artBox.topRightY)+"]"),typeof B.userUnit=="number"&&B.userUnit!==1&&ee("/UserUnit "+B.userUnit),yt.publish("putPage",{objId:Me,pageContext:It[re],pageNumber:re,page:Ne}),ee("/Contents "+We+" 0 R"),ee(">>"),ee("endobj");var gt=Ne.join(`
`);return w===j&&(gt+=`
Q`),rs(We,!0),Rs({data:gt,filters:wi(),objectId:We}),ee("endobj"),Me},tr=m.__private__.putPages=function(){var B,re,Ne=[];for(B=1;B<=Wt;B++)It[B].objId=vn(),It[B].contentsObjId=vn();for(B=1;B<=Wt;B++)Ne.push(st({number:B,data:fe[B],objId:It[B].objId,contentsObjId:It[B].contentsObjId,mediaBox:It[B].mediaBox,cropBox:It[B].cropBox,bleedBox:It[B].bleedBox,trimBox:It[B].trimBox,artBox:It[B].artBox,userUnit:It[B].userUnit,rootDictionaryObjId:ka,resourceDictionaryObjId:zr}));rs(ka,!0),ee("<</Type /Pages");var Me="/Kids [";for(re=0;re<Wt;re++)Me+=Ne[re]+" 0 R ";ee(Me+"]"),ee("/Count "+Wt),ee(">>"),ee("endobj"),yt.publish("postPutPages")},Zt=function(B){yt.publish("putFont",{font:B,out:ee,newObject:rn,putStream:Rs}),B.isAlreadyPutted!==!0&&(B.objectNumber=rn(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+kx(B.postScriptName)),ee("/Subtype /Type1"),typeof B.encoding=="string"&&ee("/Encoding /"+B.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},$n=function(B){B.objectNumber=rn();var re=[];re.push({key:"Type",value:"/XObject"}),re.push({key:"Subtype",value:"/Form"}),re.push({key:"BBox",value:"["+[C(B.x),C(B.y),C(B.x+B.width),C(B.y+B.height)].join(" ")+"]"}),re.push({key:"Matrix",value:"["+B.matrix.toString()+"]"});var Ne=B.pages[1].join(`
`);Rs({data:Ne,additionalKeyValues:re,objectId:B.objectNumber}),ee("endobj")},_s=function(B,re){re||(re=21);var Ne=rn(),Me=function(At,or){var cr,Vr=[],Qr=1/(or-1);for(cr=0;cr<1;cr+=Qr)Vr.push(cr);if(Vr.push(1),At[0].offset!=0){var Rn={offset:0,color:At[0].color};At.unshift(Rn)}if(At[At.length-1].offset!=1){var Cs={offset:1,color:At[At.length-1].color};At.push(Cs)}for(var hi="",Kn=0,Ci=0;Ci<Vr.length;Ci++){for(cr=Vr[Ci];cr>At[Kn+1].offset;)Kn++;var Ai=At[Kn].offset,ua=(cr-Ai)/(At[Kn+1].offset-Ai),dl=At[Kn].color,ha=At[Kn+1].color;hi+=H(Math.round((1-ua)*dl[0]+ua*ha[0]).toString(16))+H(Math.round((1-ua)*dl[1]+ua*ha[1]).toString(16))+H(Math.round((1-ua)*dl[2]+ua*ha[2]).toString(16))}return hi.trim()}(B.colors,re),We=[];We.push({key:"FunctionType",value:"0"}),We.push({key:"Domain",value:"[0.0 1.0]"}),We.push({key:"Size",value:"["+re+"]"}),We.push({key:"BitsPerSample",value:"8"}),We.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),We.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Rs({data:Me,additionalKeyValues:We,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ne}),ee("endobj"),B.objectNumber=rn(),ee("<< /ShadingType "+B.type),ee("/ColorSpace /DeviceRGB");var gt="/Coords ["+C(parseFloat(B.coords[0]))+" "+C(parseFloat(B.coords[1]))+" ";B.type===2?gt+=C(parseFloat(B.coords[2]))+" "+C(parseFloat(B.coords[3])):gt+=C(parseFloat(B.coords[2]))+" "+C(parseFloat(B.coords[3]))+" "+C(parseFloat(B.coords[4]))+" "+C(parseFloat(B.coords[5])),ee(gt+="]"),B.matrix&&ee("/Matrix ["+B.matrix.toString()+"]"),ee("/Function "+Ne+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},qa=function(B,re){var Ne=vn(),Me=rn();re.push({resourcesOid:Ne,objectOid:Me}),B.objectNumber=Me;var We=[];We.push({key:"Type",value:"/Pattern"}),We.push({key:"PatternType",value:"1"}),We.push({key:"PaintType",value:"1"}),We.push({key:"TilingType",value:"1"}),We.push({key:"BBox",value:"["+B.boundingBox.map(C).join(" ")+"]"}),We.push({key:"XStep",value:C(B.xStep)}),We.push({key:"YStep",value:C(B.yStep)}),We.push({key:"Resources",value:Ne+" 0 R"}),B.matrix&&We.push({key:"Matrix",value:"["+B.matrix.toString()+"]"}),Rs({data:B.stream,additionalKeyValues:We,objectId:B.objectNumber}),ee("endobj")},ms=function(B){for(var re in B.objectNumber=rn(),ee("<<"),B)switch(re){case"opacity":ee("/ca "+k(B[re]));break;case"stroke-opacity":ee("/CA "+k(B[re]))}ee(">>"),ee("endobj")},Ds=function(B){rs(B.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var re in ee("/Font <<"),pt)pt.hasOwnProperty(re)&&(h===!1||h===!0&&f.hasOwnProperty(re))&&ee("/"+re+" "+pt[re].objectNumber+" 0 R");ee(">>")}(),function(){if(Object.keys(wt).length>0){for(var re in ee("/Shading <<"),wt)wt.hasOwnProperty(re)&&wt[re]instanceof zp&&wt[re].objectNumber>=0&&ee("/"+re+" "+wt[re].objectNumber+" 0 R");yt.publish("putShadingPatternDict"),ee(">>")}}(),function(re){if(Object.keys(wt).length>0){for(var Ne in ee("/Pattern <<"),wt)wt.hasOwnProperty(Ne)&&wt[Ne]instanceof m.TilingPattern&&wt[Ne].objectNumber>=0&&wt[Ne].objectNumber<re&&ee("/"+Ne+" "+wt[Ne].objectNumber+" 0 R");yt.publish("putTilingPatternDict"),ee(">>")}}(B.objectOid),function(){if(Object.keys(St).length>0){var re;for(re in ee("/ExtGState <<"),St)St.hasOwnProperty(re)&&St[re].objectNumber>=0&&ee("/"+re+" "+St[re].objectNumber+" 0 R");yt.publish("putGStateDict"),ee(">>")}}(),function(){for(var re in ee("/XObject <<"),Kt)Kt.hasOwnProperty(re)&&Kt[re].objectNumber>=0&&ee("/"+re+" "+Kt[re].objectNumber+" 0 R");yt.publish("putXobjectDict"),ee(">>")}(),ee(">>"),ee("endobj")},di=function(B){Ht[B.fontName]=Ht[B.fontName]||{},Ht[B.fontName][B.fontStyle]=B.id},El=function(B,re,Ne,Me,We){var gt={id:"F"+(Object.keys(pt).length+1).toString(10),postScriptName:B,fontName:re,fontStyle:Ne,encoding:Me,isStandardFont:We||!1,metadata:{}};return yt.publish("addFont",{font:gt,instance:this}),pt[gt.id]=gt,di(gt),gt.id},Li=m.__private__.pdfEscape=m.pdfEscape=function(B,re){return function(Ne,Me){var We,gt,At,or,cr,Vr,Qr,Rn,Cs;if(At=(Me=Me||{}).sourceEncoding||"Unicode",cr=Me.outputEncoding,(Me.autoencode||cr)&&pt[He].metadata&&pt[He].metadata[At]&&pt[He].metadata[At].encoding&&(or=pt[He].metadata[At].encoding,!cr&&pt[He].encoding&&(cr=pt[He].encoding),!cr&&or.codePages&&(cr=or.codePages[0]),typeof cr=="string"&&(cr=or[cr]),cr)){for(Qr=!1,Vr=[],We=0,gt=Ne.length;We<gt;We++)(Rn=cr[Ne.charCodeAt(We)])?Vr.push(String.fromCharCode(Rn)):Vr.push(Ne[We]),Vr[We].charCodeAt(0)>>8&&(Qr=!0);Ne=Vr.join("")}for(We=Ne.length;Qr===void 0&&We!==0;)Ne.charCodeAt(We-1)>>8&&(Qr=!0),We--;if(!Qr)return Ne;for(Vr=Me.noBOM?[]:[254,255],We=0,gt=Ne.length;We<gt;We++){if((Cs=(Rn=Ne.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+Ne+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Vr.push(Cs),Vr.push(Rn-(Cs<<8))}return String.fromCharCode.apply(void 0,Vr)}(B,re).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cl=m.__private__.beginPage=function(B){fe[++Wt]=[],It[Wt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(B[0]),topRightY:Number(B[1])}},ju(Wt),ve(fe[W])},za=function(B,re){var Ne,Me,We;switch(n=re||n,typeof B=="string"&&(Ne=x(B.toLowerCase()),Array.isArray(Ne)&&(Me=Ne[0],We=Ne[1])),Array.isArray(B)&&(Me=B[0]*nt,We=B[1]*nt),isNaN(Me)&&(Me=i[0],We=i[1]),(Me>14400||We>14400)&&(ks.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Me=Math.min(14400,Me),We=Math.min(14400,We)),i=[Me,We],n.substr(0,1)){case"l":We>Me&&(i=[We,Me]);break;case"p":Me>We&&(i=[We,Me])}cl(i),cn(Ml),ee(wn),Su!==0&&ee(Su+" J"),_u!==0&&ee(_u+" j"),yt.publish("addPage",{pageNumber:Wt})},Zi=function(B){B>0&&B<=Wt&&(fe.splice(B,1),It.splice(B,1),Wt--,W>Wt&&(W=Wt),this.setPage(W))},ju=function(B){B>0&&B<=Wt&&(W=B)},pd=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return fe.length-1},Ha=function(B,re,Ne){var Me,We=void 0;return Ne=Ne||{},B=B!==void 0?B:pt[He].fontName,re=re!==void 0?re:pt[He].fontStyle,Me=B.toLowerCase(),Ht[Me]!==void 0&&Ht[Me][re]!==void 0?We=Ht[Me][re]:Ht[B]!==void 0&&Ht[B][re]!==void 0?We=Ht[B][re]:Ne.disableWarning===!1&&ks.warn("Unable to look up font label for font '"+B+"', '"+re+"'. Refer to getFontList() for available fonts."),We||Ne.noFallback||(We=Ht.times[re])==null&&(We=Ht.times.normal),We},_c=m.__private__.putInfo=function(){var B=rn(),re=function(Me){return Me};for(var Ne in u!==null&&(re=ss.encryptor(B,0)),ee("<<"),ee("/Producer ("+Li(re("jsPDF "+Sr.version))+")"),Ge)Ge.hasOwnProperty(Ne)&&Ge[Ne]&&ee("/"+Ne.substr(0,1).toUpperCase()+Ne.substr(1)+" ("+Li(re(Ge[Ne]))+")");ee("/CreationDate ("+Li(re(q))+")"),ee(">>"),ee("endobj")},Cc=m.__private__.putCatalog=function(B){var re=(B=B||{}).rootDictionaryObjId||ka;switch(rn(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+re+" 0 R"),tt||(tt="fullwidth"),tt){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ne=""+tt;Ne.substr(Ne.length-1)==="%"&&(tt=parseInt(tt)/100),typeof tt=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+k(tt)+"]")}switch(Te||(Te="continuous"),Te){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}ae&&ee("/PageMode /"+ae),yt.publish("putCatalog"),ee(">>"),ee("endobj")},Bn=m.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(se+1)),ee("/Root "+se+" 0 R"),ee("/Info "+(se-1)+" 0 R"),u!==null&&ee("/Encrypt "+ss.oid+" 0 R"),ee("/ID [ <"+M+"> <"+M+"> ]"),ee(">>")},wu=m.__private__.putHeader=function(){ee("%PDF-"+p),ee("%")},Io=m.__private__.putXRef=function(){var B="0000000000";ee("xref"),ee("0 "+(se+1)),ee("0000000000 65535 f ");for(var re=1;re<=se;re++)typeof J[re]=="function"?ee((B+J[re]()).slice(-10)+" 00000 n "):J[re]!==void 0?ee((B+J[re]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},zn=m.__private__.buildDocument=function(){var B;se=0,X=0,ie=[],J=[],he=[],ka=vn(),zr=vn(),ve(ie),yt.publish("buildDocument"),wu(),tr(),function(){yt.publish("putAdditionalObjects");for(var Ne=0;Ne<he.length;Ne++){var Me=he[Ne];rs(Me.objId,!0),ee(Me.content),ee("endobj")}yt.publish("postPutAdditionalObjects")}(),B=[],function(){for(var Ne in pt)pt.hasOwnProperty(Ne)&&(h===!1||h===!0&&f.hasOwnProperty(Ne))&&Zt(pt[Ne])}(),function(){var Ne;for(Ne in St)St.hasOwnProperty(Ne)&&ms(St[Ne])}(),function(){for(var Ne in Kt)Kt.hasOwnProperty(Ne)&&$n(Kt[Ne])}(),function(Ne){var Me;for(Me in wt)wt.hasOwnProperty(Me)&&(wt[Me]instanceof zp?_s(wt[Me]):wt[Me]instanceof Yx&&qa(wt[Me],Ne))}(B),yt.publish("putResources"),B.forEach(Ds),Ds({resourcesOid:zr,objectOid:Number.MAX_SAFE_INTEGER}),yt.publish("postPutResources"),u!==null&&(ss.oid=rn(),ee("<<"),ee("/Filter /Standard"),ee("/V "+ss.v),ee("/R "+ss.r),ee("/U <"+ss.toHexString(ss.U)+">"),ee("/O <"+ss.toHexString(ss.O)+">"),ee("/P "+ss.P),ee(">>"),ee("endobj")),_c(),Cc();var re=X;return Io(),Bn(),ee("startxref"),ee(""+re),ee("%%EOF"),ve(fe[W]),ie.join(`
`)},On=m.__private__.getBlob=function(B){return new Blob([Re(B)],{type:"application/pdf"})},ns=m.output=m.__private__.output=(ei=function(B,re){switch(typeof(re=re||{})=="string"?re={filename:re}:re.filename=re.filename||"generated.pdf",B){case void 0:return zn();case"save":m.save(re.filename);break;case"arraybuffer":return Re(zn());case"blob":return On(zn());case"bloburi":case"bloburl":if(Yr.URL!==void 0&&typeof Yr.URL.createObjectURL=="function")return Yr.URL&&Yr.URL.createObjectURL(On(zn()))||void 0;ks.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ne="",Me=zn();try{Ne=A$(Me)}catch{Ne=A$(unescape(encodeURIComponent(Me)))}return"data:application/pdf;filename="+re.filename+";base64,"+Ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Yr)==="[object Window]"){var We="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';re.pdfObjectUrl&&(We=re.pdfObjectUrl,gt="");var At='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+We+'"'+gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(re)+");<\/script></body></html>",or=Yr.open();return or!==null&&or.document.write(At),or}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Yr)==="[object Window]"){var cr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(re.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+re.filename+'" width="500px" height="400px" /></body></html>',Vr=Yr.open();if(Vr!==null){Vr.document.write(cr);var Qr=this;Vr.document.documentElement.querySelector("#pdfViewer").onload=function(){Vr.document.title=re.filename,Vr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qr.output("bloburl"))}}return Vr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Yr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",re)+'"></iframe></body></html>',Cs=Yr.open();if(Cs!==null&&(Cs.document.write(Rn),Cs.document.title=re.filename),Cs||typeof safari>"u")return Cs;break;case"datauri":case"dataurl":return Yr.document.location.href=this.output("datauristring",re);default:return null}},ei.foo=function(){try{return ei.apply(this,arguments)}catch(Ne){var B=Ne.stack||"";~B.indexOf(" at ")&&(B=B.split(" at ")[1]);var re="Error in function "+B.split(`
`)[0].split("<")[0]+": "+Ne.message;if(!Yr.console)throw new Error(re);Yr.console.error(re,Ne),Yr.alert&&alert(re)}},ei.foo.bar=ei,ei.foo),Pa=function(B){return Array.isArray(ut)===!0&&ut.indexOf(B)>-1};switch(s){case"pt":nt=1;break;case"mm":nt=72/25.4;break;case"cm":nt=72/2.54;break;case"in":nt=72;break;case"px":nt=Pa("px_scaling")==1?.75:96/72;break;case"pc":case"em":nt=12;break;case"ex":nt=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);nt=s}var ss=null;Z(),V();var Ni=m.__private__.getPageInfo=m.getPageInfo=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[B].objId,pageNumber:B,pageContext:It[B]}},Lo=m.__private__.getPageInfoByObjId=function(B){if(isNaN(B)||B%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var re in It)if(It[re].objId===B)break;return Ni(re)},lo=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:It[W].objId,pageNumber:W,pageContext:It[W]}};m.addPage=function(){return za.apply(this,arguments),this},m.setPage=function(){return ju.apply(this,arguments),ve.call(this,fe[W]),this},m.insertPage=function(B){return this.addPage(),this.movePage(W,B),this},m.movePage=function(B,re){var Ne,Me;if(B>re){Ne=fe[B],Me=It[B];for(var We=B;We>re;We--)fe[We]=fe[We-1],It[We]=It[We-1];fe[re]=Ne,It[re]=Me,this.setPage(re)}else if(B<re){Ne=fe[B],Me=It[B];for(var gt=B;gt<re;gt++)fe[gt]=fe[gt+1],It[gt]=It[gt+1];fe[re]=Ne,It[re]=Me,this.setPage(re)}return this},m.deletePage=function(){return Zi.apply(this,arguments),this},m.__private__.text=m.text=function(B,re,Ne,Me,We){var gt,At,or,cr,Vr,Qr,Rn,Cs,hi,Kn=(Me=Me||{}).scope||this;if(typeof B=="number"&&typeof re=="number"&&(typeof Ne=="string"||Array.isArray(Ne))){var Ci=Ne;Ne=re,re=B,B=Ci}if(arguments[3]instanceof gr==0?(or=arguments[4],cr=arguments[5],cs(Rn=arguments[3])==="object"&&Rn!==null||(typeof or=="string"&&(cr=or,or=null),typeof Rn=="string"&&(cr=Rn,Rn=null),typeof Rn=="number"&&(or=Rn,Rn=null),Me={flags:Rn,angle:or,align:cr})):(A("The transform parameter of text() with a Matrix value"),hi=We),isNaN(re)||isNaN(Ne)||B==null)throw new Error("Invalid arguments passed to jsPDF.text");if(B.length===0)return Kn;var Ai,ua="",dl=typeof Me.lineHeightFactor=="number"?Me.lineHeightFactor:$o,ha=Kn.internal.scaleFactor;function lx(Nr){return Nr=Nr.split("	").join(Array(Me.TabLen||9).join(" ")),Li(Nr,Rn)}function Ec(Nr){for(var Ar,Hn=Nr.concat(),gs=[],Oa=Hn.length;Oa--;)typeof(Ar=Hn.shift())=="string"?gs.push(Ar):Array.isArray(Nr)&&(Ar.length===1||Ar[1]===void 0&&Ar[2]===void 0)?gs.push(Ar[0]):gs.push([Ar[0],Ar[1],Ar[2]]);return gs}function xh(Nr,Ar){var Hn;if(typeof Nr=="string")Hn=Ar(Nr)[0];else if(Array.isArray(Nr)){for(var gs,Oa,Ra=Nr.concat(),Gn=[],fa=Ra.length;fa--;)typeof(gs=Ra.shift())=="string"?Gn.push(Ar(gs)[0]):Array.isArray(gs)&&typeof gs[0]=="string"&&(Oa=Ar(gs[0],gs[1],gs[2]),Gn.push([Oa[0],Oa[1],Oa[2]]));Hn=Gn}return Hn}var Fl=!1,ul=!0;if(typeof B=="string")Fl=!0;else if(Array.isArray(B)){var Xa=B.concat();At=[];for(var Cu,Ea=Xa.length;Ea--;)(typeof(Cu=Xa.shift())!="string"||Array.isArray(Cu)&&typeof Cu[0]!="string")&&(ul=!1);Fl=ul}if(Fl===!1)throw new Error('Type of text must be string or Array. "'+B+'" is not recognized.');typeof B=="string"&&(B=B.match(/[\r?\n]/)?B.split(/\r\n|\r|\n/g):[B]);var vh=De/Kn.internal.scaleFactor,yh=vh*(dl-1);switch(Me.baseline){case"bottom":Ne-=yh;break;case"top":Ne+=vh-yh;break;case"hanging":Ne+=vh-2*yh;break;case"middle":Ne+=vh/2-yh}if((Qr=Me.maxWidth||0)>0&&(typeof B=="string"?B=Kn.splitTextToSize(B,Qr):Object.prototype.toString.call(B)==="[object Array]"&&(B=B.reduce(function(Nr,Ar){return Nr.concat(Kn.splitTextToSize(Ar,Qr))},[]))),gt={text:B,x:re,y:Ne,options:Me,mutex:{pdfEscape:Li,activeFontKey:He,fonts:pt,activeFontSize:De}},yt.publish("preProcessText",gt),B=gt.text,or=(Me=gt.options).angle,hi instanceof gr==0&&or&&typeof or=="number"){or*=Math.PI/180,Me.rotationDirection===0&&(or=-or),w===j&&(or=-or);var xp=Math.cos(or),$l=Math.sin(or);hi=new gr(xp,$l,-$l,xp,0,0)}else or&&or instanceof gr&&(hi=or);w!==j||hi||(hi=bi),(Vr=Me.charSpace||Ya)!==void 0&&(ua+=C($(Vr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Cs=Me.horizontalScale)!==void 0&&(ua+=C(100*Cs)+` Tz
`),Me.lang;var ti=-1,Oc=Me.renderingMode!==void 0?Me.renderingMode:Me.stroke,bh=Kn.internal.getCurrentPageInfo().pageContext;switch(Oc){case 0:case!1:case"fill":ti=0;break;case 1:case!0:case"stroke":ti=1;break;case 2:case"fillThenStroke":ti=2;break;case 3:case"invisible":ti=3;break;case 4:case"fillAndAddForClipping":ti=4;break;case 5:case"strokeAndAddPathForClipping":ti=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ti=6;break;case 7:case"addToPathForClipping":ti=7}var vp=bh.usedRenderingMode!==void 0?bh.usedRenderingMode:-1;ti!==-1?ua+=ti+` Tr
`:vp!==-1&&(ua+=`0 Tr
`),ti!==-1&&(bh.usedRenderingMode=ti),cr=Me.align||"left";var hl,jh=De*dl,Cf=Kn.internal.pageSize.getWidth(),Af=pt[He];Vr=Me.charSpace||Ya,Qr=Me.maxWidth||0,Rn=Object.assign({autoencode:!0,noBOM:!0},Me.flags);var jd=[],Au=function(Nr){return Kn.getStringUnitWidth(Nr,{font:Af,charSpace:Vr,fontSize:De,doKerning:!1})*De/ha};if(Object.prototype.toString.call(B)==="[object Array]"){var uo;At=Ec(B),cr!=="left"&&(hl=At.map(Au));var ho,wd=0;if(cr==="right"){re-=hl[0],B=[],Ea=At.length;for(var Rc=0;Rc<Ea;Rc++)Rc===0?(ho=_i(re),uo=ue(Ne)):(ho=$(wd-hl[Rc]),uo=-jh),B.push([At[Rc],ho,uo]),wd=hl[Rc]}else if(cr==="center"){re-=hl[0]/2,B=[],Ea=At.length;for(var Nd=0;Nd<Ea;Nd++)Nd===0?(ho=_i(re),uo=ue(Ne)):(ho=$((wd-hl[Nd])/2),uo=-jh),B.push([At[Nd],ho,uo]),wd=hl[Nd]}else if(cr==="left"){B=[],Ea=At.length;for(var kf=0;kf<Ea;kf++)B.push(At[kf])}else if(cr==="justify"&&Af.encoding==="Identity-H"){B=[],Ea=At.length,Qr=Qr!==0?Qr:Cf;for(var wh=0,ri=0;ri<Ea;ri++)if(uo=ri===0?ue(Ne):-jh,ho=ri===0?_i(re):wh,ri<Ea-1){var yp=$((Qr-hl[ri])/(At[ri].split(" ").length-1)),Bl=At[ri].split(" ");B.push([Bl[0]+" ",ho,uo]),wh=0;for(var Vl=1;Vl<Bl.length;Vl++){var Pf=(Au(Bl[Vl-1]+" "+Bl[Vl])-Au(Bl[Vl]))*ha+yp;Vl==Bl.length-1?B.push([Bl[Vl],Pf,0]):B.push([Bl[Vl]+" ",Pf,0]),wh-=Pf}}else B.push([At[ri],ho,uo]);B.push(["",wh,0])}else{if(cr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(B=[],Ea=At.length,Qr=Qr!==0?Qr:Cf,ri=0;ri<Ea;ri++){uo=ri===0?ue(Ne):-jh,ho=ri===0?_i(re):0;var Tf=At[ri].split(" ").length-1,Ef=Tf>0?(Qr-hl[ri])/Tf:0;ri<Ea-1?jd.push(C($(Ef))):jd.push(0),B.push([At[ri],ho,uo])}}}(typeof Me.R2L=="boolean"?Me.R2L:xe)===!0&&(B=xh(B,function(Nr,Ar,Hn){return[Nr.split("").reverse().join(""),Ar,Hn]})),gt={text:B,x:re,y:Ne,options:Me,mutex:{pdfEscape:Li,activeFontKey:He,fonts:pt,activeFontSize:De}},yt.publish("postProcessText",gt),B=gt.text,Ai=gt.mutex.isHex||!1;var Of=pt[He].encoding;Of!=="WinAnsiEncoding"&&Of!=="StandardEncoding"||(B=xh(B,function(Nr,Ar,Hn){return[lx(Nr),Ar,Hn]})),At=Ec(B),B=[];for(var le,Fe,_t,Et=Array.isArray(At[0])?1:0,Er="",en=function(Nr,Ar,Hn){var gs="";return Hn instanceof gr?(Hn=typeof Me.angle=="number"?Fn(Hn,new gr(1,0,0,1,Nr,Ar)):Fn(new gr(1,0,0,1,Nr,Ar),Hn),w===j&&(Hn=Fn(new gr(1,0,0,-1,0,0),Hn)),gs=Hn.join(" ")+` Tm
`):gs=C(Nr)+" "+C(Ar)+` Td
`,gs},Vn=0;Vn<At.length;Vn++){switch(Er="",Et){case 1:_t=(Ai?"<":"(")+At[Vn][0]+(Ai?">":")"),le=parseFloat(At[Vn][1]),Fe=parseFloat(At[Vn][2]);break;case 0:_t=(Ai?"<":"(")+At[Vn]+(Ai?">":")"),le=_i(re),Fe=ue(Ne)}jd!==void 0&&jd[Vn]!==void 0&&(Er=jd[Vn]+` Tw
`),Vn===0?B.push(Er+en(le,Fe,hi)+_t):Et===0?B.push(Er+_t):Et===1&&B.push(Er+en(le,Fe,hi)+_t)}B=Et===0?B.join(` Tj
T* `):B.join(` Tj
`),B+=` Tj
`;var Nn=`BT
/`;return Nn+=He+" "+De+` Tf
`,Nn+=C(De*dl)+` TL
`,Nn+=ps+`
`,Nn+=ua,Nn+=B,ee(Nn+="ET"),f[He]=!0,Kn};var gd=m.__private__.clip=m.clip=function(B){return ee(B==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return gd("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ee("n"),this};var Ji=m.__private__.isValidStyle=function(B){var re=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(B)!==-1&&(re=!0),re};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(B){return Ji(B)&&(d=B),this};var Ol=m.__private__.getStyle=m.getStyle=function(B){var re=d;switch(B){case"D":case"S":re="S";break;case"F":re="f";break;case"FD":case"DF":re="B";break;case"f":case"f*":case"B":case"B*":re=B}return re},Wa=m.close=function(){return ee("h"),this};m.stroke=function(){return ee("S"),this},m.fill=function(B){return Si("f",B),this},m.fillEvenOdd=function(B){return Si("f*",B),this},m.fillStroke=function(B){return Si("B",B),this},m.fillStrokeEvenOdd=function(B){return Si("B*",B),this};var Si=function(B,re){cs(re)==="object"?xd(re,B):ee(B)},Rl=function(B){B===null||w===j&&B===void 0||(B=Ol(B),ee(B))};function Nu(B,re,Ne,Me,We){var gt=new Yx(re||this.boundingBox,Ne||this.xStep,Me||this.yStep,this.gState,We||this.matrix);gt.stream=this.stream;var At=B+"$$"+this.cloneIndex+++"$$";return An(At,gt),gt}var xd=function(B,re){var Ne=Ut[B.key],Me=wt[Ne];if(Me instanceof zp)ee("q"),ee(vd(re)),Me.gState&&m.setGState(Me.gState),ee(B.matrix.toString()+" cm"),ee("/"+Ne+" sh"),ee("Q");else if(Me instanceof Yx){var We=new gr(1,0,0,-1,0,da());B.matrix&&(We=We.multiply(B.matrix||bi),Ne=Nu.call(Me,B.key,B.boundingBox,B.xStep,B.yStep,We).id),ee("q"),ee("/Pattern cs"),ee("/"+Ne+" scn"),Me.gState&&m.setGState(Me.gState),ee(re),ee("Q")}},vd=function(B){switch(B){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Dl=m.moveTo=function(B,re){return ee(C($(B))+" "+C(D(re))+" m"),this},Fo=m.lineTo=function(B,re){return ee(C($(B))+" "+C(D(re))+" l"),this},Ka=m.curveTo=function(B,re,Ne,Me,We,gt){return ee([C($(B)),C(D(re)),C($(Ne)),C(D(Me)),C($(We)),C(D(gt)),"c"].join(" ")),this};m.__private__.line=m.line=function(B,re,Ne,Me,We){if(isNaN(B)||isNaN(re)||isNaN(Ne)||isNaN(Me)||!Ji(We))throw new Error("Invalid arguments passed to jsPDF.line");return w===y?this.lines([[Ne-B,Me-re]],B,re,[1,1],We||"S"):this.lines([[Ne-B,Me-re]],B,re,[1,1]).stroke()},m.__private__.lines=m.lines=function(B,re,Ne,Me,We,gt){var At,or,cr,Vr,Qr,Rn,Cs,hi,Kn,Ci,Ai,ua;if(typeof B=="number"&&(ua=Ne,Ne=re,re=B,B=ua),Me=Me||[1,1],gt=gt||!1,isNaN(re)||isNaN(Ne)||!Array.isArray(B)||!Array.isArray(Me)||!Ji(We)||typeof gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Dl(re,Ne),At=Me[0],or=Me[1],Vr=B.length,Ci=re,Ai=Ne,cr=0;cr<Vr;cr++)(Qr=B[cr]).length===2?(Ci=Qr[0]*At+Ci,Ai=Qr[1]*or+Ai,Fo(Ci,Ai)):(Rn=Qr[0]*At+Ci,Cs=Qr[1]*or+Ai,hi=Qr[2]*At+Ci,Kn=Qr[3]*or+Ai,Ci=Qr[4]*At+Ci,Ai=Qr[5]*or+Ai,Ka(Rn,Cs,hi,Kn,Ci,Ai));return gt&&Wa(),Rl(We),this},m.path=function(B){for(var re=0;re<B.length;re++){var Ne=B[re],Me=Ne.c;switch(Ne.op){case"m":Dl(Me[0],Me[1]);break;case"l":Fo(Me[0],Me[1]);break;case"c":Ka.apply(this,Me);break;case"h":Wa()}}return this},m.__private__.rect=m.rect=function(B,re,Ne,Me,We){if(isNaN(B)||isNaN(re)||isNaN(Ne)||isNaN(Me)||!Ji(We))throw new Error("Invalid arguments passed to jsPDF.rect");return w===y&&(Me=-Me),ee([C($(B)),C(D(re)),C($(Ne)),C($(Me)),"re"].join(" ")),Rl(We),this},m.__private__.triangle=m.triangle=function(B,re,Ne,Me,We,gt,At){if(isNaN(B)||isNaN(re)||isNaN(Ne)||isNaN(Me)||isNaN(We)||isNaN(gt)||!Ji(At))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ne-B,Me-re],[We-Ne,gt-Me],[B-We,re-gt]],B,re,[1,1],At,!0),this},m.__private__.roundedRect=m.roundedRect=function(B,re,Ne,Me,We,gt,At){if(isNaN(B)||isNaN(re)||isNaN(Ne)||isNaN(Me)||isNaN(We)||isNaN(gt)||!Ji(At))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var or=4/3*(Math.SQRT2-1);return We=Math.min(We,.5*Ne),gt=Math.min(gt,.5*Me),this.lines([[Ne-2*We,0],[We*or,0,We,gt-gt*or,We,gt],[0,Me-2*gt],[0,gt*or,-We*or,gt,-We,gt],[2*We-Ne,0],[-We*or,0,-We,-gt*or,-We,-gt],[0,2*gt-Me],[0,-gt*or,We*or,-gt,We,-gt]],B+We,re,[1,1],At,!0),this},m.__private__.ellipse=m.ellipse=function(B,re,Ne,Me,We){if(isNaN(B)||isNaN(re)||isNaN(Ne)||isNaN(Me)||!Ji(We))throw new Error("Invalid arguments passed to jsPDF.ellipse");var gt=4/3*(Math.SQRT2-1)*Ne,At=4/3*(Math.SQRT2-1)*Me;return Dl(B+Ne,re),Ka(B+Ne,re-At,B+gt,re-Me,B,re-Me),Ka(B-gt,re-Me,B-Ne,re-At,B-Ne,re),Ka(B-Ne,re+At,B-gt,re+Me,B,re+Me),Ka(B+gt,re+Me,B+Ne,re+At,B+Ne,re),Rl(We),this},m.__private__.circle=m.circle=function(B,re,Ne,Me){if(isNaN(B)||isNaN(re)||isNaN(Ne)||!Ji(Me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(B,re,Ne,Ne,Me)},m.setFont=function(B,re,Ne){return Ne&&(re=T(re,Ne)),He=Ha(B,re,{disableWarning:!1}),this};var Ac=m.__private__.getFont=m.getFont=function(){return pt[Ha.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var B,re,Ne={};for(B in Ht)if(Ht.hasOwnProperty(B))for(re in Ne[B]=[],Ht[B])Ht[B].hasOwnProperty(re)&&Ne[B].push(re);return Ne},m.addFont=function(B,re,Ne,Me,We){var gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&gt.indexOf(arguments[3])!==-1?We=arguments[3]:arguments[3]&&gt.indexOf(arguments[3])==-1&&(Ne=T(Ne,Me)),El.call(this,B,re,Ne,We=We||"Identity-H")};var $o,Ml=e.lineWidth||.200025,Nt=m.__private__.getLineWidth=m.getLineWidth=function(){return Ml},cn=m.__private__.setLineWidth=m.setLineWidth=function(B){return Ml=B,ee(C($(B))+" w"),this};m.__private__.setLineDash=Sr.API.setLineDash=Sr.API.setLineDashPattern=function(B,re){if(B=B||[],re=re||0,isNaN(re)||!Array.isArray(B))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return B=B.map(function(Ne){return C($(Ne))}).join(" "),re=C($(re)),ee("["+B+"] "+re+" d"),this};var Ta=m.__private__.getLineHeight=m.getLineHeight=function(){return De*$o};m.__private__.getLineHeight=m.getLineHeight=function(){return De*$o};var Ga=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(B){return typeof(B=B||1.15)=="number"&&($o=B),this},Bo=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return $o};Ga(e.lineHeight);var _i=m.__private__.getHorizontalCoordinate=function(B){return $(B)},ue=m.__private__.getVerticalCoordinate=function(B){return w===j?B:It[W].mediaBox.topRightY-It[W].mediaBox.bottomLeftY-$(B)},bt=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(B){return C(_i(B))},vr=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(B){return C(ue(B))},wn=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return zt(wn)},m.__private__.setStrokeColor=m.setDrawColor=function(B,re,Ne,Me){return wn=ji({ch1:B,ch2:re,ch3:Ne,ch4:Me,pdfColorType:"draw",precision:2}),ee(wn),this};var ui=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return zt(ui)},m.__private__.setFillColor=m.setFillColor=function(B,re,Ne,Me){return ui=ji({ch1:B,ch2:re,ch3:Ne,ch4:Me,pdfColorType:"fill",precision:2}),ee(ui),this};var ps=e.textColor||"0 g",co=m.__private__.getTextColor=m.getTextColor=function(){return zt(ps)};m.__private__.setTextColor=m.setTextColor=function(B,re,Ne,Me){return ps=ji({ch1:B,ch2:re,ch3:Ne,ch4:Me,pdfColorType:"text",precision:3}),this};var Ya=e.charSpace,yd=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ya||0)};m.__private__.setCharSpace=m.setCharSpace=function(B){if(isNaN(B))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ya=B,this};var Su=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(B){var re=m.CapJoinStyles[B];if(re===void 0)throw new Error("Line cap style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Su=re,ee(re+" J"),this};var _u=0;m.__private__.setLineJoin=m.setLineJoin=function(B){var re=m.CapJoinStyles[B];if(re===void 0)throw new Error("Line join style of '"+B+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _u=re,ee(re+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(B){if(B=B||0,isNaN(B))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(C($(B))+" M"),this},m.GState=X5,m.setGState=function(B){(B=typeof B=="string"?St[Be[B]]:kc(null,B)).equals(lr)||(ee("/"+B.id+" gs"),lr=B)};var kc=function(B,re){if(!B||!Be[B]){var Ne=!1;for(var Me in St)if(St.hasOwnProperty(Me)&&St[Me].equals(re)){Ne=!0;break}if(Ne)re=St[Me];else{var We="GS"+(Object.keys(St).length+1).toString(10);St[We]=re,re.id=We}return B&&(Be[B]=re.id),yt.publish("addGState",re),re}};m.addGState=function(B,re){return kc(B,re),this},m.saveGraphicsState=function(){return ee("q"),wr.push({key:He,size:De,color:ps}),this},m.restoreGraphicsState=function(){ee("Q");var B=wr.pop();return He=B.key,De=B.size,ps=B.color,lr=null,this},m.setCurrentTransformationMatrix=function(B){return ee(B.toString()+" cm"),this},m.comment=function(B){return ee("#"+B),this};var Il=function(B,re){var Ne=B||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ne},set:function(gt){isNaN(gt)||(Ne=parseFloat(gt))}});var Me=re||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Me},set:function(gt){isNaN(gt)||(Me=parseFloat(gt))}});var We="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return We},set:function(gt){We=gt.toString()}}),this},is=function(B,re,Ne,Me){Il.call(this,B,re),this.type="rect";var We=Ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return We},set:function(At){isNaN(At)||(We=parseFloat(At))}});var gt=Me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return gt},set:function(At){isNaN(At)||(gt=parseFloat(At))}}),this},Ll=function(){this.page=Wt,this.currentPage=W,this.pages=fe.slice(0),this.pagesContext=It.slice(0),this.x=Y,this.y=Ct,this.matrix=Vt,this.width=mp(W),this.height=Tc(W),this.outputDestination=Oe,this.id="",this.objectNumber=-1};Ll.prototype.restore=function(){Wt=this.page,W=this.currentPage,It=this.pagesContext,fe=this.pages,Y=this.x,Ct=this.y,Vt=this.matrix,ax(W,this.width),ca(W,this.height),Oe=this.outputDestination};var bd=function(B,re,Ne,Me,We){Dt.push(new Ll),Wt=W=0,fe=[],Y=B,Ct=re,Vt=We,cl([Ne,Me])};for(var Pc in m.beginFormObject=function(B,re,Ne,Me,We){return bd(B,re,Ne,Me,We),this},m.endFormObject=function(B){return function(re){if(Os[re])Dt.pop().restore();else{var Ne=new Ll,Me="Xo"+(Object.keys(Kt).length+1).toString(10);Ne.id=Me,Os[re]=Me,Kt[Me]=Ne,yt.publish("addFormObject",Ne),Dt.pop().restore()}}(B),this},m.doFormObject=function(B,re){var Ne=Kt[Os[B]];return ee("q"),ee(re.toString()+" cm"),ee("/"+Ne.id+" Do"),ee("Q"),this},m.getFormObject=function(B){var re=Kt[Os[B]];return{x:re.x,y:re.y,width:re.width,height:re.height,matrix:re.matrix}},m.save=function(B,re){return B=B||"generated.pdf",(re=re||{}).returnPromise=re.returnPromise||!1,re.returnPromise===!1?(Bp(On(zn()),B),typeof Bp.unload=="function"&&Yr.setTimeout&&setTimeout(Bp.unload,911),this):new Promise(function(Ne,Me){try{var We=Bp(On(zn()),B);typeof Bp.unload=="function"&&Yr.setTimeout&&setTimeout(Bp.unload,911),Ne(We)}catch(gt){Me(gt.message)}})},Sr.API)Sr.API.hasOwnProperty(Pc)&&(Pc==="events"&&Sr.API.events.length?function(B,re){var Ne,Me,We;for(We=re.length-1;We!==-1;We--)Ne=re[We][0],Me=re[We][1],B.subscribe.apply(B,[Ne].concat(typeof Me=="function"?[Me]:Me))}(yt,Sr.API.events):m[Pc]=Sr.API[Pc]);function mp(B){return It[B].mediaBox.topRightX-It[B].mediaBox.bottomLeftX}function ax(B,re){It[B].mediaBox.topRightX=re+It[B].mediaBox.bottomLeftX}function Tc(B){return It[B].mediaBox.topRightY-It[B].mediaBox.bottomLeftY}function ca(B,re){It[B].mediaBox.topRightY=re+It[B].mediaBox.bottomLeftY}var pp=m.getPageWidth=function(B){return mp(B=B||W)/nt},ox=m.setPageWidth=function(B,re){ax(B,re*nt)},da=m.getPageHeight=function(B){return Tc(B=B||W)/nt},gp=m.setPageHeight=function(B,re){ca(B,re*nt)};return m.internal={pdfEscape:Li,getStyle:Ol,getFont:Ac,getFontSize:Qe,getCharSpace:yd,getTextColor:co,getLineHeight:Ta,getLineHeightFactor:Bo,getLineWidth:Nt,write:Ee,getHorizontalCoordinate:_i,getVerticalCoordinate:ue,getCoordinateString:bt,getVerticalCoordinateString:vr,collections:{},newObject:rn,newAdditionalObject:En,newObjectDeferred:vn,newObjectDeferredBegin:rs,getFilters:wi,putStream:Rs,events:yt,scaleFactor:nt,pageSize:{getWidth:function(){return pp(W)},setWidth:function(B){ox(W,B)},getHeight:function(){return da(W)},setHeight:function(B){gp(W,B)}},encryptionOptions:u,encryption:ss,getEncryptor:function(B){return u!==null?ss.encryptor(B,0):function(re){return re}},output:ns,getNumberOfPages:pd,pages:fe,out:ee,f2:k,f3:O,getPageInfo:Ni,getPageInfoByObjId:Lo,getCurrentPageInfo:lo,getPDFVersion:g,Point:Il,Rectangle:is,Matrix:gr,hasHotfix:Pa},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return pp(W)},set:function(B){ox(W,B)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return da(W)},set:function(B){gp(W,B)},enumerable:!0,configurable:!0}),(function(B){for(var re=0,Ne=oe.length;re<Ne;re++){var Me=El.call(this,B[re][0],B[re][1],B[re][2],oe[re][3],!0);h===!1&&(f[Me]=!0);var We=B[re][0].split("-");di({id:Me,fontName:We[0],fontStyle:We[1]||""})}yt.publish("addFonts",{fonts:pt,dictionary:Ht})}).call(m,oe),He="F1",za(i,n),yt.publish("initialized"),m}Ax.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ax.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Ax.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},Ax.prototype.processOwnerPassword=function(e,t){return AT(CT(t).substr(0,5),e)},Ax.prototype.encryptor=function(e,t){var n=CT(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return AT(n,s)}},X5.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||cs(e)!==cs(this))return!1;var s=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&s--;return s===0},Sr.API={events:[]},Sr.version="3.0.3";var Ei=Sr.API,u6=1,ex=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xx=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},tn=function(e){return e.toFixed(2)},Wf=function(e){return e.toFixed(5)};Ei.__acroform__={};var Pl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},E$=function(e){return e*u6},Du=function(e){var t=new jse,n=xr.internal.getHeight(e)||0,s=xr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(tn(s)),Number(tn(n))],t},FTe=Ei.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},$Te=Ei.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},BTe=Ei.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Hi=Ei.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return BTe(e,t-1)},Wi=Ei.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return FTe(e,t-1)},Ki=Ei.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return $Te(e,t-1)},VTe=Ei.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,i=e[0],a=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=n(i)||0,c.lowerLeft_Y=s(a+l)||0,c.upperRight_X=n(i+o)||0,c.upperRight_Y=s(a)||0,[Number(tn(c.lowerLeft_X)),Number(tn(c.lowerLeft_Y)),Number(tn(c.upperRight_X)),Number(tn(c.upperRight_Y))]},UTe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,s=kT(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+tn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Du(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},kT=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(k){return k.split(`
`)}):i.map(function(k){return[k]});var a=n,o=xr.internal.getHeight(e)||0;o=o<0?-o:o;var l=xr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(k,O,$){if(k+1<i.length){var D=O+" "+i[k+1][0];return T2(D,e,$).width<=l-4}return!1};a++;e:for(;a>0;){t="",a--;var d,u,h=T2("3",e,a).height,f=e.multiline?o-a:(o-h)/2,m=f+=2,p=0,g=0,v=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+T2(t,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var x="",y=0,j=0;j<i.length;j++)if(i.hasOwnProperty(j)){var w=!1;if(i[j].length!==1&&v!==i[j].length-1){if((h+2)*(y+2)+2>o)continue e;x+=i[j][v],w=!0,g=j,j--}else{x=(x+=i[j][v]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var N=parseInt(j),S=c(N,x,a),T=j>=i.length-1;if(S&&!T){x+=" ",v=0;continue}if(S||T){if(T)g=N;else if(e.multiline&&(h+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(y+2)+2>o)continue e;g=N}}for(var C="",A=p;A<=g;A++){var R=i[A];if(e.multiline){if(A===g){C+=R[v]+" ",v=(v+1)%R.length;continue}if(A===p){C+=R[R.length-1]+" ";continue}}C+=R[0]+" "}switch(C=C.substr(C.length-1)==" "?C.substr(0,C.length-1):C,u=T2(C,e,a).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=tn(d)+" "+tn(m)+` Td
`,t+="("+ex(C)+`) Tj
`,t+=-tn(d)+` 0 Td
`,m=-(a+2),u=0,p=w?g:g+1,y++,x=""}break}return s.text=t,s.fontSize=a,s},T2=function(e,t,n){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},qTe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},zTe=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===n.type&&s.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},HTe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(vu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(qTe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");u6=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new wse,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in s)if(s.hasOwnProperty(i)){var a=s[i];a.objId=void 0,a.hasAnnotation&&zTe(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(s,i){var a=!s;for(var o in s||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(o)){var l=s[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=VTe(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=xr.createDefaultAppearanceStream(l),cs(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=UTe(l);c.push({key:"AP",value:"<</N "+u+">>"}),i.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var m=l.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var p=m[o];typeof p=="function"&&(p=p.call(i,l)),h+="/"+o+" "+p+" ",i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p)}}else typeof(p=m)=="function"&&(p=p.call(i,l)),h+="/"+o+" "+p,i.internal.acroformPlugin.xForms.indexOf(p)>=0||i.internal.acroformPlugin.xForms.push(p);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:l.objId}),i.internal.out("endobj")}a&&function(g,v){for(var x in g)if(g.hasOwnProperty(x)){var y=x,j=g[x];v.internal.newObjectDeferredBegin(j.objId,!0),cs(j)==="object"&&typeof j.putStream=="function"&&j.putStream(),delete g[y]}}(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},bse=Ei.__acroform__.arrayToPdfArray=function(e,t,n){var s=function(o){return o};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),cs(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(s=n.internal.getEncryptor(t)),i+="("+ex(s(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},v4=function(e,t,n){var s=function(i){return i};return t!==void 0&&n&&(s=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+ex(s(e))+")"},Wu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wu.prototype.toString=function(){return this.objId+" 0 R"},Wu.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Wu.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var s=t[n],i=this[s];i&&(Array.isArray(i)?e.push({key:s,value:bse(i,this.objId,this.scope)}):i instanceof Wu?(i.scope=this.scope,e.push({key:s,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:s,value:i}))}return e};var jse=function(){Wu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Pl(jse,Wu);var wse=function(){Wu.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(s){return s};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+ex(n(e))+")"}},set:function(n){e=n}})};Pl(wse,Wu);var vu=function e(){Wu.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');t=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Hi(t,3)},set:function(x){x?this.F=Wi(t,3):this.F=Ki(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(x){s=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(x){s[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(x){s[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(x){s[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(x){s[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Q5)return;a="FieldObject"+e.FieldNum++}var x=function(y){return y};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+ex(x(a))+")"},set:function(x){a=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(x){a=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/u6:d},set:function(x){d=x}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(x){u=x}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Q5||this instanceof gg))return v4(h,this.objId,this.scope)},set:function(x){x=x.toString(),h=x}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Ia==0?v4(f,this.objId,this.scope):f},set:function(x){x=x.toString(),f=this instanceof Ia==0?x.substr(0,1)==="("?xx(x.substr(1,x.length-2)):xx(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ia==1?xx(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Ia==1?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ia==0?v4(m,this.objId,this.scope):m},set:function(x){x=x.toString(),m=this instanceof Ia==0?x.substr(0,1)==="("?xx(x.substr(1,x.length-2)):xx(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ia==1?xx(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Ia==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(x){x=!!x,g=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(x){p=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,1)},set:function(x){x?this.Ff=Wi(this.Ff,1):this.Ff=Ki(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,2)},set:function(x){x?this.Ff=Wi(this.Ff,2):this.Ff=Ki(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,3)},set:function(x){x?this.Ff=Wi(this.Ff,3):this.Ff=Ki(this.Ff,3)}});var v=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(v!==null)return v},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');v=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(v){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:v=2;break;case"center":case 1:v=1;break;default:v=0}}})};Pl(vu,Wu);var vv=function(){vu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bse(t,this.objId,this.scope)},set:function(n){var s,i;i=[],typeof(s=n)=="string"&&(i=function(a,o,l){l||(l=1);for(var c,d=[];c=o.exec(a);)d.push(c[l]);return d}(s,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,s){for(s=s||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,18)},set:function(n){n?this.Ff=Wi(this.Ff,18):this.Ff=Ki(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Wi(this.Ff,19):this.Ff=Ki(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,20)},set:function(n){n?(this.Ff=Wi(this.Ff,20),t.sort()):this.Ff=Ki(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,22)},set:function(n){n?this.Ff=Wi(this.Ff,22):this.Ff=Ki(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,23)},set:function(n){n?this.Ff=Wi(this.Ff,23):this.Ff=Ki(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,27)},set:function(n){n?this.Ff=Wi(this.Ff,27):this.Ff=Ki(this.Ff,27)}}),this.hasAppearanceStream=!1};Pl(vv,vu);var yv=function(){vv.call(this),this.fontName="helvetica",this.combo=!1};Pl(yv,vv);var bv=function(){yv.call(this),this.combo=!0};Pl(bv,yv);var TN=function(){bv.call(this),this.edit=!0};Pl(TN,bv);var Ia=function(){vu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,15)},set:function(n){n?this.Ff=Wi(this.Ff,15):this.Ff=Ki(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,16)},set:function(n){n?this.Ff=Wi(this.Ff,16):this.Ff=Ki(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,17)},set:function(n){n?this.Ff=Wi(this.Ff,17):this.Ff=Ki(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,26)},set:function(n){n?this.Ff=Wi(this.Ff,26):this.Ff=Ki(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,i=[];for(s in i.push("<<"),t)i.push("/"+s+" ("+ex(n(t[s]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){cs(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Pl(Ia,vu);var EN=function(){Ia.call(this),this.pushButton=!0};Pl(EN,Ia);var jv=function(){Ia.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Pl(jv,Ia);var Q5=function(){var e,t;vu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),s)o.push("/"+a+" ("+ex(i(s[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){cs(i)==="object"&&(s=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(i){typeof i=="string"&&(s.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Pl(Q5,vu),jv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},jv.prototype.createOption=function(e){var t=new Q5;return t.Parent=this,t.optionName=e,this.Kids.push(t),WTe.call(this.scope,t),t};var ON=function(){Ia.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xr.CheckBox.createAppearanceStream()};Pl(ON,Ia);var gg=function(){vu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,13)},set:function(t){t?this.Ff=Wi(this.Ff,13):this.Ff=Ki(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,21)},set:function(t){t?this.Ff=Wi(this.Ff,21):this.Ff=Ki(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,23)},set:function(t){t?this.Ff=Wi(this.Ff,23):this.Ff=Ki(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,24)},set:function(t){t?this.Ff=Wi(this.Ff,24):this.Ff=Ki(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,25)},set:function(t){t?this.Ff=Wi(this.Ff,25):this.Ff=Ki(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,26)},set:function(t){t?this.Ff=Wi(this.Ff,26):this.Ff=Ki(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Pl(gg,vu);var RN=function(){gg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Hi(this.Ff,14)},set:function(e){e?this.Ff=Wi(this.Ff,14):this.Ff=Ki(this.Ff,14)}}),this.password=!0};Pl(RN,gg);var xr={CheckBox:{createAppearanceStream:function(){return{N:{On:xr.CheckBox.YesNormal},D:{On:xr.CheckBox.YesPushDown,Off:xr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Du(e);t.scope=e.scope;var n=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=kT(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+tn(xr.internal.getWidth(e))+" "+tn(xr.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+s+" "+tn(a.fontSize)+" Tf "+i),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Du(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=[],a=xr.internal.getHeight(e),o=xr.internal.getWidth(e),l=kT(e,e.caption);return i.push("1 g"),i.push("0 0 "+tn(o)+" "+tn(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+tn(o-1)+" "+tn(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+tn(l.fontSize)+" Tf "+s),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Du(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+tn(xr.internal.getWidth(e))+" "+tn(xr.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:xr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=xr.RadioButton.Circle.YesNormal,t.D[e]=xr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Du(e);t.scope=e.scope;var n=[],s=xr.internal.getWidth(e)<=xr.internal.getHeight(e)?xr.internal.getWidth(e)/4:xr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=xr.internal.Bezier_C,a=Number((s*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Wf(xr.internal.getWidth(e)/2)+" "+Wf(xr.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Du(e);t.scope=e.scope;var n=[],s=xr.internal.getWidth(e)<=xr.internal.getHeight(e)?xr.internal.getWidth(e)/4:xr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),a=Number((i*xr.internal.Bezier_C).toFixed(5)),o=Number((s*xr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wf(xr.internal.getWidth(e)/2)+" "+Wf(xr.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Wf(xr.internal.getWidth(e)/2)+" "+Wf(xr.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+o+" "+o+" "+s+" 0 "+s+" c"),n.push("-"+o+" "+s+" -"+s+" "+o+" -"+s+" 0 c"),n.push("-"+s+" -"+o+" -"+o+" -"+s+" 0 -"+s+" c"),n.push(o+" -"+s+" "+s+" -"+o+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Du(e);t.scope=e.scope;var n=[],s=xr.internal.getWidth(e)<=xr.internal.getHeight(e)?xr.internal.getWidth(e)/4:xr.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var i=Number((2*s).toFixed(5)),a=Number((i*xr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Wf(xr.internal.getWidth(e)/2)+" "+Wf(xr.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:xr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=xr.RadioButton.Cross.YesNormal,t.D[e]=xr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Du(e);t.scope=e.scope;var n=[],s=xr.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+tn(xr.internal.getWidth(e)-2)+" "+tn(xr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(tn(s.x1.x)+" "+tn(s.x1.y)+" m"),n.push(tn(s.x2.x)+" "+tn(s.x2.y)+" l"),n.push(tn(s.x4.x)+" "+tn(s.x4.y)+" m"),n.push(tn(s.x3.x)+" "+tn(s.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Du(e);t.scope=e.scope;var n=xr.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+tn(xr.internal.getWidth(e))+" "+tn(xr.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+tn(xr.internal.getWidth(e)-2)+" "+tn(xr.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(tn(n.x1.x)+" "+tn(n.x1.y)+" m"),s.push(tn(n.x2.x)+" "+tn(n.x2.y)+" l"),s.push(tn(n.x4.x)+" "+tn(n.x4.y)+" m"),s.push(tn(n.x3.x)+" "+tn(n.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Du(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+tn(xr.internal.getWidth(e))+" "+tn(xr.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};xr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=xr.internal.getWidth(e),n=xr.internal.getHeight(e),s=Math.min(t,n);return{x1:{x:(t-s)/2,y:(n-s)/2+s},x2:{x:(t-s)/2+s,y:(n-s)/2},x3:{x:(t-s)/2,y:(n-s)/2},x4:{x:(t-s)/2+s,y:(n-s)/2+s}}}},xr.internal.getWidth=function(e){var t=0;return cs(e)==="object"&&(t=E$(e.Rect[2])),t},xr.internal.getHeight=function(e){var t=0;return cs(e)==="object"&&(t=E$(e.Rect[3])),t};var WTe=Ei.addField=function(e){if(HTe(this,e),!(e instanceof vu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ei.AcroFormChoiceField=vv,Ei.AcroFormListBox=yv,Ei.AcroFormComboBox=bv,Ei.AcroFormEditBox=TN,Ei.AcroFormButton=Ia,Ei.AcroFormPushButton=EN,Ei.AcroFormRadioButton=jv,Ei.AcroFormCheckBox=ON,Ei.AcroFormTextField=gg,Ei.AcroFormPasswordField=RN,Ei.AcroFormAppearance=xr,Ei.AcroForm={ChoiceField:vv,ListBox:yv,ComboBox:bv,EditBox:TN,Button:Ia,PushButton:EN,RadioButton:jv,CheckBox:ON,TextField:gg,PasswordField:RN,Appearance:xr},Sr.AcroForm={ChoiceField:vv,ListBox:yv,ComboBox:bv,EditBox:TN,Button:Ia,PushButton:EN,RadioButton:jv,CheckBox:ON,TextField:gg,PasswordField:RN,Appearance:xr};Sr.AcroForm;function Nse(e){return e.reduce(function(t,n,s){return t[n]=s,t},{})}(function(e){var t="addImage_";e.__addimage__={};var n="UNKNOWN",s={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(k,O){var $,D,q,M,L,V=n;if((O=O||n)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(S(k))for(L in s)for(q=s[L],$=0;$<q.length;$+=1){for(M=!0,D=0;D<q[$].length;D+=1)if(q[$][D]!==void 0&&q[$][D]!==k[D]){M=!1;break}if(M===!0){V=L;break}}else for(L in s)for(q=s[L],$=0;$<q.length;$+=1){for(M=!0,D=0;D<q[$].length;D+=1)if(q[$][D]!==void 0&&q[$][D]!==k.charCodeAt(D)){M=!1;break}if(M===!0){V=L;break}}return V===n&&O!==n&&(V=O),V},a=function k(O){for(var $=this.internal.write,D=this.internal.putStream,q=(0,this.internal.getFilters)();q.indexOf("FlateEncode")!==-1;)q.splice(q.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var M=[];if(M.push({key:"Type",value:"/XObject"}),M.push({key:"Subtype",value:"/Image"}),M.push({key:"Width",value:O.width}),M.push({key:"Height",value:O.height}),O.colorSpace===x.INDEXED?M.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(M.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===x.DEVICE_CMYK&&M.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),M.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&M.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var L="",V=0,P=O.transparency.length;V<P;V++)L+=O.transparency[V]+" "+O.transparency[V]+" ";M.push({key:"Mask",value:"["+L+"]"})}O.sMask!==void 0&&M.push({key:"SMask",value:O.objectId+1+" 0 R"});var z=O.filter!==void 0?["/"+O.filter]:void 0;if(D({data:O.data,additionalKeyValues:M,alreadyAppliedFilters:z,objectId:O.objectId}),$("endobj"),"sMask"in O&&O.sMask!==void 0){var Z,F=(Z=O.sMaskBitsPerComponent)!==null&&Z!==void 0?Z:O.bitsPerComponent,W={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:F,data:O.sMask};"filter"in O&&(W.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(F," /Columns ").concat(O.width),W.filter=O.filter),k.call(this,W)}if(O.colorSpace===x.INDEXED){var G=this.internal.newObject();D({data:C(new Uint8Array(O.palette)),objectId:G}),$("endobj")}},o=function(){var k=this.internal.collections[t+"images"];for(var O in k)a.call(this,k[O])},l=function(){var k,O=this.internal.collections[t+"images"],$=this.internal.write;for(var D in O)$("/I"+(k=O[D]).index,k.objectId,"0","R")},c=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},d=function(){var k=this.internal.collections[t+"images"];return c.call(this),k},u=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(k){return typeof e["process"+k.toUpperCase()]=="function"},f=function(k){return cs(k)==="object"&&k.nodeType===1},m=function(k,O){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var $=""+k.getAttribute("src");if($.indexOf("data:image/")===0)return PN(unescape($).split("base64,").pop());var D=e.loadFile($,!0);if(D!==void 0)return D}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var q;switch(O){case"PNG":q="image/png";break;case"WEBP":q="image/webp";break;default:q="image/jpeg"}return PN(k.toDataURL(q,1).split("base64,").pop())}},p=function(k){var O=this.internal.collections[t+"images"];if(O){for(var $ in O)if(k===O[$].alias)return O[$]}},g=function(k,O,$){return k||O||(k=-96,O=-96),k<0&&(k=-1*$.width*72/k/this.internal.scaleFactor),O<0&&(O=-1*$.height*72/O/this.internal.scaleFactor),k===0&&(k=O*$.width/$.height),O===0&&(O=k*$.height/$.width),[k,O]},v=function(k,O,$,D,q,M){var L=g.call(this,$,D,q),V=this.internal.getCoordinateString,P=this.internal.getVerticalCoordinateString,z=d.call(this);if($=L[0],D=L[1],z[q.index]=q,M){M*=Math.PI/180;var Z=Math.cos(M),F=Math.sin(M),W=function(H){return H.toFixed(4)},G=[W(Z),W(F),W(-1*F),W(Z),0,0,"cm"]}this.internal.write("q"),M?(this.internal.write([1,"0","0",1,V(k),P(O+D),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([V($),"0","0",V(D),"0","0","cm"].join(" "))):this.internal.write([V($),"0","0",V(D),V(k),P(O+D),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+q.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},j=e.__addimage__.sHashCode=function(k){var O,$,D=0;if(typeof k=="string")for($=k.length,O=0;O<$;O++)D=(D<<5)-D+k.charCodeAt(O),D|=0;else if(S(k))for($=k.byteLength/2,O=0;O<$;O++)D=(D<<5)-D+k[O],D|=0;return D},w=e.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var O=!0;return k.length===0&&(O=!1),k.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(O=!1),O},N=e.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var O=k.indexOf(",");return O<0?null:k.substring(0,O).trim().endsWith("base64")?k.substring(O+1):null};e.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var S=e.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},T=e.__addimage__.binaryStringToUint8Array=function(k){for(var O=k.length,$=new Uint8Array(O),D=0;D<O;D++)$[D]=k.charCodeAt(D);return $},C=e.__addimage__.arrayBufferToBinaryString=function(k){for(var O="",$=S(k)?k:new Uint8Array(k),D=0;D<$.length;D+=8192)O+=String.fromCharCode.apply(null,$.subarray(D,D+8192));return O};e.addImage=function(){var k,O,$,D,q,M,L,V,P;if(typeof arguments[1]=="number"?(O=n,$=arguments[1],D=arguments[2],q=arguments[3],M=arguments[4],L=arguments[5],V=arguments[6],P=arguments[7]):(O=arguments[1],$=arguments[2],D=arguments[3],q=arguments[4],M=arguments[5],L=arguments[6],V=arguments[7],P=arguments[8]),cs(k=arguments[0])==="object"&&!f(k)&&"imageData"in k){var z=k;k=z.imageData,O=z.format||O||n,$=z.x||$||0,D=z.y||D||0,q=z.w||z.width||q,M=z.h||z.height||M,L=z.alias||L,V=z.compression||V,P=z.rotation||z.angle||P}var Z=this.internal.getFilters();if(V===void 0&&Z.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN($)||isNaN(D))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var F=A.call(this,k,O,L,V);return v.call(this,$,D,q,M,F,P),this};var A=function(k,O,$,D){var q,M,L;if(typeof k=="string"&&i(k)===n){k=unescape(k);var V=R(k,!1);(V!==""||(V=e.loadFile(k,!0))!==void 0)&&(k=V)}if(f(k)&&(k=m(k,O)),O=i(k,O),!h(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((L=$)==null||L.length===0)&&($=function(P){return typeof P=="string"||S(P)?j(P):S(P.data)?j(P.data):null}(k)),(q=p.call(this,$))||(k instanceof Uint8Array||O==="RGBA"||(M=k,k=T(k)),q=this["process"+O.toUpperCase()](k,u.call(this),$,function(P){return P&&typeof P=="string"&&(P=P.toUpperCase()),P in e.image_compression?P:y.NONE}(D),M)),!q)throw new Error("An unknown error occurred whilst processing the image.");return q},R=e.__addimage__.convertBase64ToBinaryString=function(k,O){O=typeof O!="boolean"||O;var $,D="";if(typeof k=="string"){var q;$=(q=N(k))!==null&&q!==void 0?q:k;try{D=PN($)}catch(M){if(O)throw w($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+M.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return D};e.getImageProperties=function(k){var O,$,D="";if(f(k)&&(k=m(k)),typeof k=="string"&&i(k)===n&&((D=R(k,!1))===""&&(D=e.loadFile(k)||""),k=D),$=i(k),!h($))throw new Error("addImage does not support files of type '"+$+"', please ensure that a plugin for '"+$+"' support is added.");if(k instanceof Uint8Array||(k=T(k)),!(O=this["process"+$.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=$,O}})(Sr.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Sr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var s,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(n.objId),d=n.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((s=d[h]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var f=0;f<d.length;f++){s=d[f];var m=this.internal.pdfEscape,p=this.internal.getEncryptor(n.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),v=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(g.objId),y=s.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y)+"] ")+"/Contents ("+m(x(s.contents))+")",a+=" /Popup "+v.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(x(y))+") >>",g.content=a;var j=g.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(s.bounds.x+30)+" "+l(s.bounds.y+s.bounds.h)+" "+o(s.bounds.x+s.bounds.w+30)+" "+l(s.bounds.y)+"] ")+" /Parent "+j,s.open&&(a+=" /Open true"),a+=" >>",v.content=a,this.internal.write(g.objId,"0 R",v.objId,"0 R");break;case"freetext":i="/Rect ["+o(s.bounds.x)+" "+l(s.bounds.y)+" "+o(s.bounds.x+s.bounds.w)+" "+l(s.bounds.y+s.bounds.h)+"] ";var w=s.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(p(s.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(s.options.name){var N=this.annotations._nameMap[s.options.name];s.options.pageNumber=N.page,s.options.top=N.y}else s.options.top||(s.options.top=0);if(i="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",a="",s.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(p(s.options.url))+") >>";else if(s.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,a+=" /FitV "+s.options.left+"]";break;default:var S=l(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),a+=" /XYZ "+s.options.left+" "+S+" "+s.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var s=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":s.pageContext.annotations.push(n)}},e.link=function(n,s,i,a,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(n),y:d(s),w:c(n+i),h:d(s+a)},options:o,type:"link"})},e.textWithLink=function(n,s,i,a){var o,l,c=this.getTextWidth(n),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var u=this.splitTextToSize(n,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(n,s,i,a),i+=.2*d,a.align==="center"&&(s-=c/2),a.align==="right"&&(s-=c),this.link(s,i-d,l,o,a),c},e.getTextWidth=function(n){var s=this.internal.getFontSize();return this.getStringUnitWidth(n)*s/this.internal.scaleFactor}}(Sr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&i.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&a(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var v=0,x=n,y="",j=0;for(v=0;v<g.length;v+=1)x[g.charCodeAt(v)]!==void 0?(j++,typeof(x=x[g.charCodeAt(v)])=="number"&&(y+=String.fromCharCode(x),x=n,j=0),v===g.length-1&&(x=n,y+=g.charAt(v-(j-1)),v-=j-1,j=0)):(x=n,y+=g.charAt(v-j),v-=j,j=0);return y};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&s[g.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(g,v,x){return o(g)?a(g)===!1?-1:!d(g)||!o(v)&&!o(x)||!o(x)&&l(v)||l(g)&&!o(v)||l(g)&&c(v)||l(g)&&l(v)?0:u(g)&&o(v)&&!l(v)&&o(x)&&d(x)?3:l(g)||!o(x)?1:2:-1},m=function(g){var v=0,x=0,y=0,j="",w="",N="",S=(g=g||"").split("\\s+"),T=[];for(v=0;v<S.length;v+=1){for(T.push(""),x=0;x<S[v].length;x+=1)j=S[v][x],w=S[v][x-1],N=S[v][x+1],o(j)?(y=f(j,w,N),T[v]+=y!==-1?String.fromCharCode(t[j.charCodeAt(0)][y]):j):T[v]+=j;T[v]=h(T[v])}return T.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var g,v=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(v)){var y=0;for(x=[],y=0;y<v.length;y+=1)Array.isArray(v[y])?x.push([m(v[y][0]),v[y][1],v[y][2]]):x.push([m(v[y])]);g=x}else g=m(v);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",p])}(Sr.API),Sr.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,s){var i;if((n=n||"2d")!=="2d")return null;for(i in s)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=s[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Sr.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var p=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return p},set:function(g){p=g}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return s.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){s.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),f=d.scaleFactor||this.internal.scaleFactor,m=0,p=0,g=0,v=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(j,w){return j.concat(v.splitTextToSize(w,x))},[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)m<(g=this.getStringUnitWidth(c[y],{font:h})*u)&&(m=g);return m!==0&&(p=c.length),{w:m/=f,h:Math.max((p*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,m&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,n===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,f){if(s.call(this),!u)throw new Error("No data for PDF table.");var m,p,g,v,x=[],y=[],j=[],w={},N={},S=[],T=[],C=(f=f||{}).autoSize||!1,A=f.printHeaders!==!1,R=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,k=f.margins||Object.assign({width:this.getPageWidth()},t),O=typeof f.padding=="number"?f.padding:3,$=f.headerBackgroundColor||"#c8c8c8",D=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=$,this.internal.__cell__.headerTextColor=D,this.setFontSize(R),h==null)y=x=Object.keys(u[0]),j=x.map(function(){return"left"});else if(Array.isArray(h)&&cs(h[0])==="object")for(x=h.map(function(z){return z.name}),y=h.map(function(z){return z.prompt||z.name||""}),j=h.map(function(z){return z.align||"left"}),m=0;m<h.length;m+=1)N[h[m].name]=.7499990551181103*h[m].width;else Array.isArray(h)&&typeof h[0]=="string"&&(y=x=h,j=x.map(function(){return"left"}));if(C||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<x.length;m+=1){for(w[v=x[m]]=u.map(function(z){return z[v]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(y[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=w[v],this.setFont(void 0,"normal"),g=0;g<p.length;g+=1)S.push(this.getTextDimensions(p[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[v]=Math.max.apply(null,S)+O+O,S=[]}if(A){var q={};for(m=0;m<x.length;m+=1)q[x[m]]={},q[x[m]].text=y[m],q[x[m]].align=j[m];var M=l.call(this,q,N);T=x.map(function(z){return new a(c,d,N[z],M,q[z].text,void 0,q[z].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var L=h.reduce(function(z,Z){return z[Z.name]=Z.align,z},{});for(m=0;m<u.length;m+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:m,data:u[m]},this);var V=l.call(this,u[m],N);for(g=0;g<x.length;g+=1){var P=u[m][x[g]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:m,col:g,data:P},this),o.call(this,new a(c,d,N[x[g]],V,P,m+2,L[x[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(m){var p=c[m];return this.splitTextToSize(p.hasOwnProperty("text")?p.text:p,d[m]-u-u)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/f+u+u},this).reduce(function(m,p){return Math.max(m,p)},0)};e.setTableHeaderRow=function(c){s.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,f.push(u)),u.lineNumber=c;var p=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(p)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(Sr.API);var Sse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_se=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],PT=Nse(_se),Cse=[100,200,300,400,500,600,700,800,900],KTe=Nse(Cse);function y4(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return Sse[a=a||"normal"]?a:"normal"}(e.style),s=function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400}(e.weight),i=function(a){return typeof PT[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:s,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,s].join(" ")}}}function O$(e,t,n,s){var i;for(i=n;i>=0&&i<t.length;i+=s)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=s)if(e[t[i]])return e[t[i]]}var GTe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},R$={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function D$(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function M$(e){return e.trimLeft()}function YTe(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function XTe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var E2,I$,L$,vx,O2,F$,$$,B$,b4=["times"];function V$(e,t,n,s,i){var a=4,o=q$;switch(i){case Sr.API.image_compression.FAST:a=1,o=U$;break;case Sr.API.image_compression.MEDIUM:a=6,o=z$;break;case Sr.API.image_compression.SLOW:a=9,o=H$}e=function(c,d,u,h){for(var f,m=c.length/d,p=new Uint8Array(c.length+m),g=[QTe,U$,q$,z$,H$],v=0;v<m;v+=1){var x=v*d,y=c.subarray(x,x+d);if(h)p.set(h(y,u,f),x+v);else{for(var j=g.length,w=[],N=0;N<j;N+=1)w[N]=g[N](y,u,f);var S=JTe(w.concat());p.set(w[S],x+v)}f=y}return p}(e,t,Math.ceil(n*s/8),o);var l=wT(e,{level:a});return Sr.API.__addimage__.arrayBufferToBinaryString(l)}function QTe(e){var t=Array.apply([],e);return t.unshift(0),t}function U$(e,t){var n=e.length,s=[];s[0]=1;for(var i=0;i<n;i+=1){var a=e[i-t]||0;s[i+1]=e[i]-a+256&255}return s}function q$(e,t,n){var s=e.length,i=[];i[0]=2;for(var a=0;a<s;a+=1){var o=n&&n[a]||0;i[a+1]=e[a]-o+256&255}return i}function z$(e,t,n){var s=e.length,i=[];i[0]=3;for(var a=0;a<s;a+=1){var o=e[a-t]||0,l=n&&n[a]||0;i[a+1]=e[a]+256-(o+l>>>1)&255}return i}function H$(e,t,n){var s=e.length,i=[];i[0]=4;for(var a=0;a<s;a+=1){var o=ZTe(e[a-t]||0,n&&n[a]||0,n&&n[a-t]||0);i[a+1]=e[a]-o+256&255}return i}function ZTe(e,t,n){if(e===t&&t===n)return e;var s=Math.abs(t-n),i=Math.abs(e-n),a=Math.abs(e+t-n-n);return s<=i&&s<=a?e:i<=a?t:n}function JTe(e){var t=e.map(function(n){return n.reduce(function(s,i){return s+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function j4(e,t,n){var s=t*n,i=Math.floor(s/8),a=16-(s-8*i+n),o=(1<<n)-1;return Ase(e,i)>>a&o}function W$(e,t,n,s){var i=n*s,a=Math.floor(i/8),o=16-(i-8*a+s),l=(1<<s)-1,c=(t&l)<<o;(function(d,u,h){if(u+1<d.byteLength)d.setUint16(u,h,!1);else{var f=h>>8&255;d.setUint8(u,f)}})(e,a,Ase(e,a)&~(l<<o)&65535|c)}function Ase(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function eEe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,o=1<<1+(7&i);e[t++],e[t++];var l=null,c=null;a&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,f=null,m=0,p=null;for(this.width=n,this.height=s;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,f=e[t++],1&g||(f=null),m=g>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var v=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,w=e[t++],N=w>>6&1,S=1<<1+(7&w),T=l,C=c,A=!1;w>>7&&(A=!0,T=t,C=S,t+=3*S);var R=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}u.push({x:v,y:x,width:y,height:j,has_local_palette:A,palette_offset:T,palette_size:C,data_offset:R,data_length:t-R,transparent_index:f,interlaced:!!N,delay:h,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,$){var D=this.frameInfo(O),q=D.width*D.height,M=new Uint8Array(q);K$(e,D.data_offset,M,q);var L=D.palette_offset,V=D.transparent_index;V===null&&(V=256);var P=D.width,z=n-P,Z=P,F=4*(D.y*n+D.x),W=4*((D.y+D.height)*n+D.x),G=F,H=4*z;D.interlaced===!0&&(H+=4*n*7);for(var se=8,J=0,ie=M.length;J<ie;++J){var X=M[J];if(Z===0&&(Z=P,(G+=H)>=W&&(H=4*z+4*n*(se-1),G=F+(P+z)*(se<<1),se>>=1)),X===V)G+=4;else{var he=e[L+3*X],fe=e[L+3*X+1],Q=e[L+3*X+2];$[G++]=Q,$[G++]=fe,$[G++]=he,$[G++]=255}--Z}},this.decodeAndBlitFrameRGBA=function(O,$){var D=this.frameInfo(O),q=D.width*D.height,M=new Uint8Array(q);K$(e,D.data_offset,M,q);var L=D.palette_offset,V=D.transparent_index;V===null&&(V=256);var P=D.width,z=n-P,Z=P,F=4*(D.y*n+D.x),W=4*((D.y+D.height)*n+D.x),G=F,H=4*z;D.interlaced===!0&&(H+=4*n*7);for(var se=8,J=0,ie=M.length;J<ie;++J){var X=M[J];if(Z===0&&(Z=P,(G+=H)>=W&&(H=4*z+4*n*(se-1),G=F+(P+z)*(se<<1),se>>=1)),X===V)G+=4;else{var he=e[L+3*X],fe=e[L+3*X+1],Q=e[L+3*X+2];$[G++]=he,$[G++]=fe,$[G++]=Q,$[G++]=255}--Z}}}function K$(e,t,n,s){for(var i=e[t++],a=1<<i,o=a+1,l=o+1,c=i+1,d=(1<<c)-1,u=0,h=0,f=0,m=e[t++],p=new Int32Array(4096),g=null;;){for(;u<16&&m!==0;)h|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<c)break;var v=h&d;if(h>>=c,u-=c,v!==a){if(v===o)break;for(var x=v<l?v:g,y=0,j=x;j>a;)j=p[j]>>8,++y;var w=j;if(f+y+(x!==v?1:0)>s)return void ks.log("Warning, gif stream longer than expected.");n[f++]=w;var N=f+=y;for(x!==v&&(n[f++]=w),j=x;y--;)j=p[j],n[--N]=255&j,j>>=8;g!==null&&l<4096&&(p[l++]=g<<8|w,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=v}else l=o+1,d=(1<<(c=i+1))-1,g=null}return f!==s&&ks.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function w4(e){var t,n,s,i,a,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),f=new Array(65535),m=new Array(64),p=new Array(64),g=[],v=0,x=7,y=new Array(64),j=new Array(64),w=new Array(64),N=new Array(256),S=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],C=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],$=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],q=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function M(F,W){for(var G=0,H=0,se=new Array,J=1;J<=16;J++){for(var ie=1;ie<=F[J];ie++)se[W[H]]=[],se[W[H]][0]=G,se[W[H]][1]=J,H++,G++;G*=2}return se}function L(F){for(var W=F[0],G=F[1]-1;G>=0;)W&1<<G&&(v|=1<<x),G--,--x<0&&(v==255?(V(255),V(0)):V(v),x=7,v=0)}function V(F){g.push(F)}function P(F){V(F>>8&255),V(255&F)}function z(F,W,G,H,se){for(var J,ie=se[0],X=se[240],he=function(De,tt){var Qe,xe,ae,we,Te,qe,Ke,Ge,He,nt,Y=0;for(He=0;He<8;++He){Qe=De[Y],xe=De[Y+1],ae=De[Y+2],we=De[Y+3],Te=De[Y+4],qe=De[Y+5],Ke=De[Y+6];var Ct=Qe+(Ge=De[Y+7]),Vt=Qe-Ge,pt=xe+Ke,Ht=xe-Ke,wr=ae+qe,wt=ae-qe,Ut=we+Te,St=we-Te,Be=Ct+Ut,lr=Ct-Ut,Wt=pt+wr,It=pt-wr;De[Y]=Be+Wt,De[Y+4]=Be-Wt;var yt=.707106781*(It+lr);De[Y+2]=lr+yt,De[Y+6]=lr-yt;var ut=.382683433*((Be=St+wt)-(It=Ht+Vt)),Kt=.5411961*Be+ut,Os=1.306562965*It+ut,Dt=.707106781*(Wt=wt+Ht),gr=Vt+Dt,Fn=Vt-Dt;De[Y+5]=Fn+Kt,De[Y+3]=Fn-Kt,De[Y+1]=gr+Os,De[Y+7]=gr-Os,Y+=8}for(Y=0,He=0;He<8;++He){Qe=De[Y],xe=De[Y+8],ae=De[Y+16],we=De[Y+24],Te=De[Y+32],qe=De[Y+40],Ke=De[Y+48];var bi=Qe+(Ge=De[Y+56]),An=Qe-Ge,ei=xe+Ke,rn=xe-Ke,vn=ae+qe,rs=ae-qe,En=we+Te,ka=we-Te,zr=bi+En,zt=bi-En,ji=ei+vn,wi=ei-vn;De[Y]=zr+ji,De[Y+32]=zr-ji;var Rs=.707106781*(wi+zt);De[Y+16]=zt+Rs,De[Y+48]=zt-Rs;var st=.382683433*((zr=ka+rs)-(wi=rn+An)),tr=.5411961*zr+st,Zt=1.306562965*wi+st,$n=.707106781*(ji=rs+rn),_s=An+$n,qa=An-$n;De[Y+40]=qa+tr,De[Y+24]=qa-tr,De[Y+8]=_s+Zt,De[Y+56]=_s-Zt,Y++}for(He=0;He<64;++He)nt=De[He]*tt[He],m[He]=nt>0?nt+.5|0:nt-.5|0;return m}(F,W),fe=0;fe<64;++fe)p[T[fe]]=he[fe];var Q=p[0]-G;G=p[0],Q==0?L(H[0]):(L(H[f[J=32767+Q]]),L(h[J]));for(var Oe=63;Oe>0&&p[Oe]==0;)Oe--;if(Oe==0)return L(ie),G;for(var ve,ee=1;ee<=Oe;){for(var Ee=ee;p[ee]==0&&ee<=Oe;)++ee;var Re=ee-Ee;if(Re>=16){ve=Re>>4;for(var oe=1;oe<=ve;++oe)L(X);Re&=15}J=32767+p[ee],L(se[(Re<<4)+f[J]]),L(h[J]),ee++}return Oe!=63&&L(ie),G}function Z(F){F=Math.min(Math.max(F,1),100),a!=F&&(function(W){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var se=o((G[H]*W+50)/100);se=Math.min(Math.max(se,1),255),l[T[H]]=se}for(var J=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var X=o((J[ie]*W+50)/100);X=Math.min(Math.max(X,1),255),c[T[ie]]=X}for(var he=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],fe=0,Q=0;Q<8;Q++)for(var Oe=0;Oe<8;Oe++)d[fe]=1/(l[T[fe]]*he[Q]*he[Oe]*8),u[fe]=1/(c[T[fe]]*he[Q]*he[Oe]*8),fe++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),a=F)}this.encode=function(F,W){W&&Z(W),g=new Array,v=0,x=7,P(65496),P(65504),P(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),P(1),P(1),V(0),V(0),function(){P(65499),P(132),V(0);for(var xe=0;xe<64;xe++)V(l[xe]);V(1);for(var ae=0;ae<64;ae++)V(c[ae])}(),function(xe,ae){P(65472),P(17),V(8),P(ae),P(xe),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(F.width,F.height),function(){P(65476),P(418),V(0);for(var xe=0;xe<16;xe++)V(C[xe+1]);for(var ae=0;ae<=11;ae++)V(A[ae]);V(16);for(var we=0;we<16;we++)V(R[we+1]);for(var Te=0;Te<=161;Te++)V(k[Te]);V(1);for(var qe=0;qe<16;qe++)V(O[qe+1]);for(var Ke=0;Ke<=11;Ke++)V($[Ke]);V(17);for(var Ge=0;Ge<16;Ge++)V(D[Ge+1]);for(var He=0;He<=161;He++)V(q[He])}(),P(65498),P(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var G=0,H=0,se=0;v=0,x=7,this.encode.displayName="_encode_";for(var J,ie,X,he,fe,Q,Oe,ve,ee,Ee=F.data,Re=F.width,oe=F.height,De=4*Re,tt=0;tt<oe;){for(J=0;J<De;){for(fe=De*tt+J,Oe=-1,ve=0,ee=0;ee<64;ee++)Q=fe+(ve=ee>>3)*De+(Oe=4*(7&ee)),tt+ve>=oe&&(Q-=De*(tt+1+ve-oe)),J+Oe>=De&&(Q-=J+Oe-De+4),ie=Ee[Q++],X=Ee[Q++],he=Ee[Q++],y[ee]=(S[ie]+S[X+256|0]+S[he+512|0]>>16)-128,j[ee]=(S[ie+768|0]+S[X+1024|0]+S[he+1280|0]>>16)-128,w[ee]=(S[ie+1280|0]+S[X+1536|0]+S[he+1792|0]>>16)-128;G=z(y,d,G,t,s),H=z(j,u,H,n,i),se=z(w,u,se,n,i),J+=32}tt+=8}if(x>=0){var Qe=[];Qe[1]=x+1,Qe[0]=(1<<x+1)-1,L(Qe)}return P(65497),new Uint8Array(g)},e=e||50,function(){for(var F=String.fromCharCode,W=0;W<256;W++)N[W]=F(W)}(),t=M(C,A),n=M(O,$),s=M(R,k),i=M(D,q),function(){for(var F=1,W=2,G=1;G<=15;G++){for(var H=F;H<W;H++)f[32767+H]=G,h[32767+H]=[],h[32767+H][1]=G,h[32767+H][0]=H;for(var se=-(W-1);se<=-F;se++)f[32767+se]=G,h[32767+se]=[],h[32767+se][1]=G,h[32767+se][0]=W-1+se;F<<=1,W<<=1}}(),function(){for(var F=0;F<256;F++)S[F]=19595*F,S[F+256|0]=38470*F,S[F+512|0]=7471*F+32768,S[F+768|0]=-11059*F,S[F+1024|0]=-21709*F,S[F+1280|0]=32768*F+8421375,S[F+1536|0]=-27439*F,S[F+1792|0]=-5329*F}(),Z(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Td(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function G$(e){function t(A){if(!A)throw Error("assert :P")}function n(A,R,k){for(var O=0;4>O;O++)if(A[R+O]!=k.charCodeAt(O))return!0;return!1}function s(A,R,k,O,$){for(var D=0;D<$;D++)A[R+D]=k[O+D]}function i(A,R,k,O){for(var $=0;$<O;$++)A[R+$]=k}function a(A){return new Int32Array(A)}function o(A,R){for(var k=[],O=0;O<A;O++)k.push(new R);return k}function l(A,R){var k=[];return function O($,D,q){for(var M=q[D],L=0;L<M&&($.push(q.length>D+1?[]:new R),!(q.length<D+1));L++)O($[L],D+1,q)}(k,0,A),k}var c=function(){var A=this;function R(_,E){for(var U=1<<E-1>>>0;_&U;)U>>>=1;return U?(_&U-1)+U:_}function k(_,E,U,K,ne){t(!(K%U));do _[E+(K-=U)]=ne;while(0<K)}function O(_,E,U,K,ne){if(t(2328>=ne),512>=ne)var ce=a(512);else if((ce=a(ne))==null)return 0;return function(de,pe,ye,Se,$e,et){var _e,Ve,Ye=pe,ft=1<<ye,Je=a(16),xt=a(16);for(t($e!=0),t(Se!=null),t(de!=null),t(0<ye),Ve=0;Ve<$e;++Ve){if(15<Se[Ve])return 0;++Je[Se[Ve]]}if(Je[0]==$e)return 0;for(xt[1]=0,_e=1;15>_e;++_e){if(Je[_e]>1<<_e)return 0;xt[_e+1]=xt[_e]+Je[_e]}for(Ve=0;Ve<$e;++Ve)_e=Se[Ve],0<Se[Ve]&&(et[xt[_e]++]=Ve);if(xt[15]==1)return(Se=new $).g=0,Se.value=et[0],k(de,Ye,1,ft,Se),ft;var jt,Lt=-1,Tt=ft-1,Cr=0,mr=1,dn=1,br=1<<ye;for(Ve=0,_e=1,$e=2;_e<=ye;++_e,$e<<=1){if(mr+=dn<<=1,0>(dn-=Je[_e]))return 0;for(;0<Je[_e];--Je[_e])(Se=new $).g=_e,Se.value=et[Ve++],k(de,Ye+Cr,$e,br,Se),Cr=R(Cr,_e)}for(_e=ye+1,$e=2;15>=_e;++_e,$e<<=1){if(mr+=dn<<=1,0>(dn-=Je[_e]))return 0;for(;0<Je[_e];--Je[_e]){if(Se=new $,(Cr&Tt)!=Lt){for(Ye+=br,jt=1<<(Lt=_e)-ye;15>Lt&&!(0>=(jt-=Je[Lt]));)++Lt,jt<<=1;ft+=br=1<<(jt=Lt-ye),de[pe+(Lt=Cr&Tt)].g=jt+ye,de[pe+Lt].value=Ye-pe-Lt}Se.g=_e-ye,Se.value=et[Ve++],k(de,Ye+(Cr>>ye),$e,br,Se),Cr=R(Cr,_e)}}return mr!=2*xt[15]-1?0:ft}(_,E,U,K,ne,ce)}function $(){this.value=this.g=0}function D(){this.value=this.g=0}function q(){this.G=o(5,$),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Au,D)}function M(_,E,U,K){t(_!=null),t(E!=null),t(2147483648>K),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=E,_.pa=U,_.Jd=E,_.Yc=U+K,_.Zc=4<=K?U+K-4+1:U,ie(_)}function L(_,E){for(var U=0;0<E--;)U|=he(_,128)<<E;return U}function V(_,E){var U=L(_,E);return X(_)?-U:U}function P(_,E,U,K){var ne,ce=0;for(t(_!=null),t(E!=null),t(4294967288>K),_.Sb=K,_.Ra=0,_.u=0,_.h=0,4<K&&(K=4),ne=0;ne<K;++ne)ce+=E[U+ne]<<8*ne;_.Ra=ce,_.bb=K,_.oa=E,_.pa=U}function z(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<wd-8>>>0,++_.bb,_.u-=8;H(_)&&(_.h=1,_.u=0)}function Z(_,E){if(t(0<=E),!_.h&&E<=ho){var U=G(_)&uo[E];return _.u+=E,z(_),U}return _.h=1,_.u=0}function F(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function W(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(_){return _.Ra>>>(_.u&wd-1)>>>0}function H(_){return t(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>wd}function se(_,E){_.u=E,_.h=H(_)}function J(_){_.u>=Rc&&(t(_.u>=Rc),z(_))}function ie(_){t(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(t(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function X(_){return L(_,1)}function he(_,E){var U=_.Ca;0>_.b&&ie(_);var K=_.b,ne=U*E>>>8,ce=(_.I>>>K>ne)+0;for(ce?(U-=ne,_.I-=ne+1<<K>>>0):U=ne+1,K=U,ne=0;256<=K;)ne+=8,K>>=8;return K=7^ne+Nd[K],_.b-=K,_.Ca=(U<<K)-1,ce}function fe(_,E,U){_[E+0]=U>>24&255,_[E+1]=U>>16&255,_[E+2]=U>>8&255,_[E+3]=255&U}function Q(_,E){return _[E+0]|_[E+1]<<8}function Oe(_,E){return Q(_,E)|_[E+2]<<16}function ve(_,E){return Q(_,E)|Q(_,E+2)<<16}function ee(_,E){var U=1<<E;return t(_!=null),t(0<E),_.X=a(U),_.X==null?0:(_.Mb=32-E,_.Xa=E,1)}function Ee(_,E){t(_!=null),t(E!=null),t(_.Xa==E.Xa),s(E.X,0,_.X,0,1<<E.Xa)}function Re(){this.X=[],this.Xa=this.Mb=0}function oe(_,E,U,K){t(U!=null),t(K!=null);var ne=U[0],ce=K[0];return ne==0&&(ne=(_*ce+E/2)/E),ce==0&&(ce=(E*ne+_/2)/_),0>=ne||0>=ce?0:(U[0]=ne,K[0]=ce,1)}function De(_,E){return _+(1<<E)-1>>>E}function tt(_,E){return((4278255360&_)+(4278255360&E)>>>0&4278255360)+((16711935&_)+(16711935&E)>>>0&16711935)>>>0}function Qe(_,E){A[E]=function(U,K,ne,ce,de,pe,ye){var Se;for(Se=0;Se<de;++Se){var $e=A[_](pe[ye+Se-1],ne,ce+Se);pe[ye+Se]=tt(U[K+Se],$e)}}}function xe(){this.ud=this.hd=this.jd=0}function ae(_,E){return((4278124286&(_^E))>>>1)+(_&E)>>>0}function we(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Te(_,E){return we(_+(_-E+.5>>1))}function qe(_,E,U){return Math.abs(E-U)-Math.abs(_-U)}function Ke(_,E,U,K,ne,ce,de){for(K=ce[de-1],U=0;U<ne;++U)ce[de+U]=K=tt(_[E+U],K)}function Ge(_,E,U,K,ne){var ce;for(ce=0;ce<U;++ce){var de=_[E+ce],pe=de>>8&255,ye=16711935&(ye=(ye=16711935&de)+((pe<<16)+pe));K[ne+ce]=(4278255360&de)+ye>>>0}}function He(_,E){E.jd=255&_,E.hd=_>>8&255,E.ud=_>>16&255}function nt(_,E,U,K,ne,ce){var de;for(de=0;de<K;++de){var pe=E[U+de],ye=pe>>>8,Se=pe,$e=255&($e=($e=pe>>>16)+((_.jd<<24>>24)*(ye<<24>>24)>>>5));Se=255&(Se=(Se+=(_.hd<<24>>24)*(ye<<24>>24)>>>5)+((_.ud<<24>>24)*($e<<24>>24)>>>5)),ne[ce+de]=(4278255360&pe)+($e<<16)+Se}}function Y(_,E,U,K,ne){A[E]=function(ce,de,pe,ye,Se,$e,et,_e,Ve){for(ye=et;ye<_e;++ye)for(et=0;et<Ve;++et)Se[$e++]=ne(pe[K(ce[de++])])},A[_]=function(ce,de,pe,ye,Se,$e,et){var _e=8>>ce.b,Ve=ce.Ea,Ye=ce.K[0],ft=ce.w;if(8>_e)for(ce=(1<<ce.b)-1,ft=(1<<_e)-1;de<pe;++de){var Je,xt=0;for(Je=0;Je<Ve;++Je)Je&ce||(xt=K(ye[Se++])),$e[et++]=ne(Ye[xt&ft]),xt>>=_e}else A["VP8LMapColor"+U](ye,Se,Ye,ft,$e,et,de,pe,Ve)}}function Ct(_,E,U,K,ne){for(U=E+U;E<U;){var ce=_[E++];K[ne++]=ce>>16&255,K[ne++]=ce>>8&255,K[ne++]=255&ce}}function Vt(_,E,U,K,ne){for(U=E+U;E<U;){var ce=_[E++];K[ne++]=ce>>16&255,K[ne++]=ce>>8&255,K[ne++]=255&ce,K[ne++]=ce>>24&255}}function pt(_,E,U,K,ne){for(U=E+U;E<U;){var ce=(de=_[E++])>>16&240|de>>12&15,de=240&de|de>>28&15;K[ne++]=ce,K[ne++]=de}}function Ht(_,E,U,K,ne){for(U=E+U;E<U;){var ce=(de=_[E++])>>16&248|de>>13&7,de=de>>5&224|de>>3&31;K[ne++]=ce,K[ne++]=de}}function wr(_,E,U,K,ne){for(U=E+U;E<U;){var ce=_[E++];K[ne++]=255&ce,K[ne++]=ce>>8&255,K[ne++]=ce>>16&255}}function wt(_,E,U,K,ne,ce){if(ce==0)for(U=E+U;E<U;)fe(K,((ce=_[E++])[0]>>24|ce[1]>>8&65280|ce[2]<<8&16711680|ce[3]<<24)>>>0),ne+=32;else s(K,ne,_,E,U)}function Ut(_,E){A[E][0]=A[_+"0"],A[E][1]=A[_+"1"],A[E][2]=A[_+"2"],A[E][3]=A[_+"3"],A[E][4]=A[_+"4"],A[E][5]=A[_+"5"],A[E][6]=A[_+"6"],A[E][7]=A[_+"7"],A[E][8]=A[_+"8"],A[E][9]=A[_+"9"],A[E][10]=A[_+"10"],A[E][11]=A[_+"11"],A[E][12]=A[_+"12"],A[E][13]=A[_+"13"],A[E][14]=A[_+"0"],A[E][15]=A[_+"0"]}function St(_){return _==PA||_==TA||_==Ew||_==EA}function Be(){this.eb=[],this.size=this.A=this.fb=0}function lr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Wt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Be,this.f.kb=new lr,this.sd=null}function It(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ut(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function Kt(_,E){var U=_.T,K=E.ba.f.RGBA,ne=K.eb,ce=K.fb+_.ka*K.A,de=Ic[E.ba.S],pe=_.y,ye=_.O,Se=_.f,$e=_.N,et=_.ea,_e=_.W,Ve=E.cc,Ye=E.dc,ft=E.Mc,Je=E.Nc,xt=_.ka,jt=_.ka+_.T,Lt=_.U,Tt=Lt+1>>1;for(xt==0?de(pe,ye,null,null,Se,$e,et,_e,Se,$e,et,_e,ne,ce,null,null,Lt):(de(E.ec,E.fc,pe,ye,Ve,Ye,ft,Je,Se,$e,et,_e,ne,ce-K.A,ne,ce,Lt),++U);xt+2<jt;xt+=2)Ve=Se,Ye=$e,ft=et,Je=_e,$e+=_.Rc,_e+=_.Rc,ce+=2*K.A,de(pe,(ye+=2*_.fa)-_.fa,pe,ye,Ve,Ye,ft,Je,Se,$e,et,_e,ne,ce-K.A,ne,ce,Lt);return ye+=_.fa,_.j+jt<_.o?(s(E.ec,E.fc,pe,ye,Lt),s(E.cc,E.dc,Se,$e,Tt),s(E.Mc,E.Nc,et,_e,Tt),U--):1&jt||de(pe,ye,null,null,Se,$e,et,_e,Se,$e,et,_e,ne,ce+K.A,null,null,Lt),U}function Os(_,E,U){var K=_.F,ne=[_.J];if(K!=null){var ce=_.U,de=E.ba.S,pe=de==Tw||de==Ew;E=E.ba.f.RGBA;var ye=[0],Se=_.ka;ye[0]=_.T,_.Kb&&(Se==0?--ye[0]:(--Se,ne[0]-=_.width),_.j+_.ka+_.T==_.o&&(ye[0]=_.o-_.j-Se));var $e=E.eb;Se=E.fb+Se*E.A,_=jp(K,ne[0],_.width,ce,ye,$e,Se+(pe?0:3),E.A),t(U==ye),_&&St(de)&&Sd($e,Se,pe,ce,ye,E.A)}return 0}function Dt(_){var E=_.ma,U=E.ba.S,K=11>U,ne=U==kw||U==Pw||U==Tw||U==kA||U==12||St(U);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!Cf(E.Oa,_,ne?11:12))return 0;if(ne&&St(U)&&lx(),_.da)alert("todo:use_scaling");else{if(K){if(E.Ib=ut,_.Kb){if(U=_.U+1>>1,E.memory=a(_.U+2*U),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+_.U,E.Mc=E.cc,E.Nc=E.dc+U,E.Ib=Kt,lx()}}else alert("todo:EmitYUV");ne&&(E.Jb=Os,K&&dl())}if(K&&!vI){for(_=0;256>_;++_)Cfe[_]=89858*(_-128)+Rw>>Ow,Pfe[_]=-22014*(_-128)+Rw,kfe[_]=-45773*(_-128),Afe[_]=113618*(_-128)+Rw>>Ow;for(_=by;_<DA;++_)E=76283*(_-16)+Rw>>Ow,Tfe[_-by]=ti(E,255),Efe[_-by]=ti(E+8>>4,15);vI=1}return 1}function gr(_){var E=_.ma,U=_.U,K=_.T;return t(!(1&_.ka)),0>=U||0>=K?0:(U=E.Ib(_,E),E.Jb!=null&&E.Jb(_,E,U),E.Dc+=U,1)}function Fn(_){_.ma.memory=null}function bi(_,E,U,K){return Z(_,8)!=47?0:(E[0]=Z(_,14)+1,U[0]=Z(_,14)+1,K[0]=Z(_,1),Z(_,3)!=0?0:!_.h)}function An(_,E){if(4>_)return _+1;var U=_-2>>1;return(2+(1&_)<<U)+Z(E,U)+1}function ei(_,E){return 120<E?E-120:1<=(U=((U=hfe[E-1])>>4)*_+(8-(15&U)))?U:1;var U}function rn(_,E,U){var K=G(U),ne=_[E+=255&K].g-8;return 0<ne&&(se(U,U.u+8),K=G(U),E+=_[E].value,E+=K&(1<<ne)-1),se(U,U.u+_[E].g),_[E].value}function vn(_,E,U){return U.g+=_.g,U.value+=_.value<<E>>>0,t(8>=U.g),_.g}function rs(_,E,U){var K=_.xc;return t((E=K==0?0:_.vc[_.md*(U>>K)+(E>>K)])<_.Wb),_.Ya[E]}function En(_,E,U,K){var ne=_.ab,ce=_.c*E,de=_.C;E=de+E;var pe=U,ye=K;for(K=_.Ta,U=_.Ua;0<ne--;){var Se=_.gc[ne],$e=de,et=E,_e=pe,Ve=ye,Ye=(ye=K,pe=U,Se.Ea);switch(t($e<et),t(et<=Se.nc),Se.hc){case 2:ri(_e,Ve,(et-$e)*Ye,ye,pe);break;case 0:var ft=$e,Je=et,xt=ye,jt=pe,Lt=(br=Se).Ea;ft==0&&(kf(_e,Ve,null,null,1,xt,jt),Ke(_e,Ve+1,0,0,Lt-1,xt,jt+1),Ve+=Lt,jt+=Lt,++ft);for(var Tt=1<<br.b,Cr=Tt-1,mr=De(Lt,br.b),dn=br.K,br=br.w+(ft>>br.b)*mr;ft<Je;){var Sn=dn,ma=br,un=1;for(wh(_e,Ve,xt,jt-Lt,1,xt,jt);un<Lt;){var jr=(un&~Cr)+Tt;jr>Lt&&(jr=Lt),(0,Tf[Sn[ma++]>>8&15])(_e,Ve+ +un,xt,jt+un-Lt,jr-un,xt,jt+un),un=jr}Ve+=Lt,jt+=Lt,++ft&Cr||(br+=mr)}et!=Se.nc&&s(ye,pe-Ye,ye,pe+(et-$e-1)*Ye,Ye);break;case 1:for(Ye=_e,Je=Ve,Lt=(_e=Se.Ea)-(jt=_e&~(xt=(Ve=1<<Se.b)-1)),ft=De(_e,Se.b),Tt=Se.K,Se=Se.w+($e>>Se.b)*ft;$e<et;){for(Cr=Tt,mr=Se,dn=new xe,br=Je+jt,Sn=Je+_e;Je<br;)He(Cr[mr++],dn),Ef(dn,Ye,Je,Ve,ye,pe),Je+=Ve,pe+=Ve;Je<Sn&&(He(Cr[mr++],dn),Ef(dn,Ye,Je,Lt,ye,pe),Je+=Lt,pe+=Lt),++$e&xt||(Se+=ft)}break;case 3:if(_e==ye&&Ve==pe&&0<Se.b){for(Je=ye,_e=Ye=pe+(et-$e)*Ye-(jt=(et-$e)*De(Se.Ea,Se.b)),Ve=ye,xt=pe,ft=[],jt=(Lt=jt)-1;0<=jt;--jt)ft[jt]=Ve[xt+jt];for(jt=Lt-1;0<=jt;--jt)Je[_e+jt]=ft[jt];yp(Se,$e,et,ye,Ye,ye,pe)}else yp(Se,$e,et,_e,Ve,ye,pe)}pe=K,ye=U}ye!=U&&s(K,U,pe,ye,ce)}function ka(_,E){var U=_.V,K=_.Ba+_.c*_.C,ne=E-_.C;if(t(E<=_.l.o),t(16>=ne),0<ne){var ce=_.l,de=_.Ta,pe=_.Ua,ye=ce.width;if(En(_,ne,U,K),ne=pe=[pe],t((U=_.C)<(K=E)),t(ce.v<ce.va),K>ce.o&&(K=ce.o),U<ce.j){var Se=ce.j-U;U=ce.j,ne[0]+=Se*ye}if(U>=K?U=0:(ne[0]+=4*ce.v,ce.ka=U-ce.j,ce.U=ce.va-ce.v,ce.T=K-U,U=1),U){if(pe=pe[0],11>(U=_.ca).S){var $e=U.f.RGBA,et=(K=U.S,ne=ce.U,ce=ce.T,Se=$e.eb,$e.A),_e=ce;for($e=$e.fb+_.Ma*$e.A;0<_e--;){var Ve=de,Ye=pe,ft=ne,Je=Se,xt=$e;switch(K){case Aw:Of(Ve,Ye,ft,Je,xt);break;case kw:le(Ve,Ye,ft,Je,xt);break;case PA:le(Ve,Ye,ft,Je,xt),Sd(Je,xt,0,ft,1,0);break;case cI:Et(Ve,Ye,ft,Je,xt);break;case Pw:wt(Ve,Ye,ft,Je,xt,1);break;case TA:wt(Ve,Ye,ft,Je,xt,1),Sd(Je,xt,0,ft,1,0);break;case Tw:wt(Ve,Ye,ft,Je,xt,0);break;case Ew:wt(Ve,Ye,ft,Je,xt,0),Sd(Je,xt,1,ft,1,0);break;case kA:Fe(Ve,Ye,ft,Je,xt);break;case EA:Fe(Ve,Ye,ft,Je,xt),bp(Je,xt,ft,1,0);break;case dI:_t(Ve,Ye,ft,Je,xt);break;default:t(0)}pe+=ye,$e+=et}_.Ma+=ce}else alert("todo:EmitRescaledRowsYUVA");t(_.Ma<=U.height)}}_.C=E,t(_.C<=_.i)}function zr(_){var E;if(0<_.ua)return 0;for(E=0;E<_.Wb;++E){var U=_.Ya[E].G,K=_.Ya[E].H;if(0<U[1][K[1]+0].g||0<U[2][K[2]+0].g||0<U[3][K[3]+0].g)return 0}return 1}function zt(_,E,U,K,ne,ce){if(_.Z!=0){var de=_.qd,pe=_.rd;for(t(If[_.Z]!=null);E<U;++E)If[_.Z](de,pe,K,ne,K,ne,ce),de=K,pe=ne,ne+=ce;_.qd=de,_.rd=pe}}function ji(_,E){var U=_.l.ma,K=U.Z==0||U.Z==1?_.l.j:_.C;if(K=_.C<K?K:_.C,t(E<=_.l.o),E>K){var ne=_.l.width,ce=U.ca,de=U.tb+ne*K,pe=_.V,ye=_.Ba+_.c*K,Se=_.gc;t(_.ab==1),t(Se[0].hc==3),Vl(Se[0],K,E,pe,ye,ce,de),zt(U,K,E,ce,de,ne)}_.C=_.Ma=E}function wi(_,E,U,K,ne,ce,de){var pe=_.$/K,ye=_.$%K,Se=_.m,$e=_.s,et=U+_.$,_e=et;ne=U+K*ne;var Ve=U+K*ce,Ye=280+$e.ua,ft=_.Pb?pe:16777216,Je=0<$e.ua?$e.Wa:null,xt=$e.wc,jt=et<Ve?rs($e,ye,pe):null;t(_.C<ce),t(Ve<=ne);var Lt=!1;e:for(;;){for(;Lt||et<Ve;){var Tt=0;if(pe>=ft){var Cr=et-U;t((ft=_).Pb),ft.wd=ft.m,ft.xd=Cr,0<ft.s.ua&&Ee(ft.s.Wa,ft.s.vb),ft=pe+mfe}if(ye&xt||(jt=rs($e,ye,pe)),t(jt!=null),jt.Qb&&(E[et]=jt.qb,Lt=!0),!Lt)if(J(Se),jt.jc){Tt=Se,Cr=E;var mr=et,dn=jt.pd[G(Tt)&Au-1];t(jt.jc),256>dn.g?(se(Tt,Tt.u+dn.g),Cr[mr]=dn.value,Tt=0):(se(Tt,Tt.u+dn.g-256),t(256<=dn.value),Tt=dn.value),Tt==0&&(Lt=!0)}else Tt=rn(jt.G[0],jt.H[0],Se);if(Se.h)break;if(Lt||256>Tt){if(!Lt)if(jt.nd)E[et]=(jt.qb|Tt<<8)>>>0;else{if(J(Se),Lt=rn(jt.G[1],jt.H[1],Se),J(Se),Cr=rn(jt.G[2],jt.H[2],Se),mr=rn(jt.G[3],jt.H[3],Se),Se.h)break;E[et]=(mr<<24|Lt<<16|Tt<<8|Cr)>>>0}if(Lt=!1,++et,++ye>=K&&(ye=0,++pe,de!=null&&pe<=ce&&!(pe%16)&&de(_,pe),Je!=null))for(;_e<et;)Tt=E[_e++],Je.X[(506832829*Tt&4294967295)>>>Je.Mb]=Tt}else if(280>Tt){if(Tt=An(Tt-256,Se),Cr=rn(jt.G[4],jt.H[4],Se),J(Se),Cr=ei(K,Cr=An(Cr,Se)),Se.h)break;if(et-U<Cr||ne-et<Tt)break e;for(mr=0;mr<Tt;++mr)E[et+mr]=E[et+mr-Cr];for(et+=Tt,ye+=Tt;ye>=K;)ye-=K,++pe,de!=null&&pe<=ce&&!(pe%16)&&de(_,pe);if(t(et<=ne),ye&xt&&(jt=rs($e,ye,pe)),Je!=null)for(;_e<et;)Tt=E[_e++],Je.X[(506832829*Tt&4294967295)>>>Je.Mb]=Tt}else{if(!(Tt<Ye))break e;for(Lt=Tt-280,t(Je!=null);_e<et;)Tt=E[_e++],Je.X[(506832829*Tt&4294967295)>>>Je.Mb]=Tt;Tt=et,t(!(Lt>>>(Cr=Je).Xa)),E[Tt]=Cr.X[Lt],Lt=!0}Lt||t(Se.h==H(Se))}if(_.Pb&&Se.h&&et<ne)t(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&Ee(_.s.vb,_.s.Wa);else{if(Se.h)break e;de!=null&&de(_,pe>ce?ce:pe),_.a=0,_.$=et-U}return 1}return _.a=3,0}function Rs(_){t(_!=null),_.vc=null,_.yc=null,_.Ya=null;var E=_.Wa;E!=null&&(E.X=null),_.vb=null,t(_!=null)}function st(){var _=new cr;return _==null?null:(_.a=0,_.xb=fI,Ut("Predictor","VP8LPredictors"),Ut("Predictor","VP8LPredictors_C"),Ut("PredictorAdd","VP8LPredictorsAdd"),Ut("PredictorAdd","VP8LPredictorsAdd_C"),ri=Ge,Ef=nt,Of=Ct,le=Vt,Fe=pt,_t=Ht,Et=wr,A.VP8LMapColor32b=Bl,A.VP8LMapColor8b=Pf,_)}function tr(_,E,U,K,ne){var ce=1,de=[_],pe=[E],ye=K.m,Se=K.s,$e=null,et=0;e:for(;;){if(U)for(;ce&&Z(ye,1);){var _e=de,Ve=pe,Ye=K,ft=1,Je=Ye.m,xt=Ye.gc[Ye.ab],jt=Z(Je,2);if(Ye.Oc&1<<jt)ce=0;else{switch(Ye.Oc|=1<<jt,xt.hc=jt,xt.Ea=_e[0],xt.nc=Ve[0],xt.K=[null],++Ye.ab,t(4>=Ye.ab),jt){case 0:case 1:xt.b=Z(Je,3)+2,ft=tr(De(xt.Ea,xt.b),De(xt.nc,xt.b),0,Ye,xt.K),xt.K=xt.K[0];break;case 3:var Lt,Tt=Z(Je,8)+1,Cr=16<Tt?0:4<Tt?1:2<Tt?2:3;if(_e[0]=De(xt.Ea,Cr),xt.b=Cr,Lt=ft=tr(Tt,1,0,Ye,xt.K)){var mr,dn=Tt,br=xt,Sn=1<<(8>>br.b),ma=a(Sn);if(ma==null)Lt=0;else{var un=br.K[0],jr=br.w;for(ma[0]=br.K[0][0],mr=1;mr<1*dn;++mr)ma[mr]=tt(un[jr+mr],ma[mr-1]);for(;mr<4*Sn;++mr)ma[mr]=0;br.K[0]=null,br.K[0]=ma,Lt=1}}ft=Lt;break;case 2:break;default:t(0)}ce=ft}}if(de=de[0],pe=pe[0],ce&&Z(ye,1)&&!(ce=1<=(et=Z(ye,4))&&11>=et)){K.a=3;break e}var Gt;if(Gt=ce)t:{var Fi,nn,kn,Hs=K,Qa=de,Uo=pe,ki=et,fo=U,qo=Hs.m,pa=Hs.s,Dn=[null],as=1,Pi=0,os=ffe[ki];r:for(;;){if(fo&&Z(qo,1)){var Za=Z(qo,3)+2,Ad=De(Qa,Za),$i=De(Uo,Za),ml=Ad*$i;if(!tr(Ad,$i,0,Hs,Dn))break r;for(Dn=Dn[0],pa.xc=Za,Fi=0;Fi<ml;++Fi){var As=Dn[Fi]>>8&65535;Dn[Fi]=As,As>=as&&(as=As+1)}}if(qo.h)break r;for(nn=0;5>nn;++nn){var ga=uI[nn];!nn&&0<ki&&(ga+=1<<ki),Pi<ga&&(Pi=ga)}var Hl=o(as*os,$),zo=as,Wl=o(zo,q);if(Wl==null)var Kl=null;else t(65536>=zo),Kl=Wl;var pl=a(Pi);if(Kl==null||pl==null||Hl==null){Hs.a=1;break r}var Gl=Hl;for(Fi=kn=0;Fi<as;++Fi){var Ms=Kl[Fi],Yl=Ms.G,kd=Ms.H,Np=0,Sh=1,Ja=0;for(nn=0;5>nn;++nn){ga=uI[nn],Yl[nn]=Gl,kd[nn]=kn,!nn&&0<ki&&(ga+=1<<ki);s:{var Mw,MA=ga,Iw=Hs,jy=pl,Dfe=Gl,Mfe=kn,IA=0,Lf=Iw.m,Ife=Z(Lf,1);if(i(jy,0,0,MA),Ife){var Lfe=Z(Lf,1)+1,Ffe=Z(Lf,1),jI=Z(Lf,Ffe==0?1:8);jy[jI]=1,Lfe==2&&(jy[jI=Z(Lf,8)]=1);var Lw=1}else{var wI=a(19),NI=Z(Lf,4)+4;if(19<NI){Iw.a=3;var Fw=0;break s}for(Mw=0;Mw<NI;++Mw)wI[ufe[Mw]]=Z(Lf,3);var LA=void 0,wy=void 0,SI=Iw,$fe=wI,$w=MA,_I=jy,FA=0,Ff=SI.m,CI=8,AI=o(128,$);n:for(;O(AI,0,7,$fe,19);){if(Z(Ff,1)){var Bfe=2+2*Z(Ff,3);if((LA=2+Z(Ff,Bfe))>$w)break n}else LA=$w;for(wy=0;wy<$w&&LA--;){J(Ff);var kI=AI[0+(127&G(Ff))];se(Ff,Ff.u+kI.g);var cx=kI.value;if(16>cx)_I[wy++]=cx,cx!=0&&(CI=cx);else{var Vfe=cx==16,PI=cx-16,Ufe=cfe[PI],TI=Z(Ff,lfe[PI])+Ufe;if(wy+TI>$w)break n;for(var qfe=Vfe?CI:0;0<TI--;)_I[wy++]=qfe}}FA=1;break n}FA||(SI.a=3),Lw=FA}(Lw=Lw&&!Lf.h)&&(IA=O(Dfe,Mfe,8,jy,MA)),Lw&&IA!=0?Fw=IA:(Iw.a=3,Fw=0)}if(Fw==0)break r;if(Sh&&dfe[nn]==1&&(Sh=Gl[kn].g==0),Np+=Gl[kn].g,kn+=Fw,3>=nn){var Ny,$A=pl[0];for(Ny=1;Ny<ga;++Ny)pl[Ny]>$A&&($A=pl[Ny]);Ja+=$A}}if(Ms.nd=Sh,Ms.Qb=0,Sh&&(Ms.qb=(Yl[3][kd[3]+0].value<<24|Yl[1][kd[1]+0].value<<16|Yl[2][kd[2]+0].value)>>>0,Np==0&&256>Yl[0][kd[0]+0].value&&(Ms.Qb=1,Ms.qb+=Yl[0][kd[0]+0].value<<8)),Ms.jc=!Ms.Qb&&6>Ja,Ms.jc){var Bw,_h=Ms;for(Bw=0;Bw<Au;++Bw){var $f=Bw,Bf=_h.pd[$f],Vw=_h.G[0][_h.H[0]+$f];256<=Vw.value?(Bf.g=Vw.g+256,Bf.value=Vw.value):(Bf.g=0,Bf.value=0,$f>>=vn(Vw,8,Bf),$f>>=vn(_h.G[1][_h.H[1]+$f],16,Bf),$f>>=vn(_h.G[2][_h.H[2]+$f],0,Bf),vn(_h.G[3][_h.H[3]+$f],24,Bf))}}}pa.vc=Dn,pa.Wb=as,pa.Ya=Kl,pa.yc=Hl,Gt=1;break t}Gt=0}if(!(ce=Gt)){K.a=3;break e}if(0<et){if(Se.ua=1<<et,!ee(Se.Wa,et)){K.a=1,ce=0;break e}}else Se.ua=0;var BA=K,EI=de,zfe=pe,VA=BA.s,UA=VA.xc;if(BA.c=EI,BA.i=zfe,VA.md=De(EI,UA),VA.wc=UA==0?-1:(1<<UA)-1,U){K.xb=jfe;break e}if(($e=a(de*pe))==null){K.a=1,ce=0;break e}ce=(ce=wi(K,$e,0,de,pe,pe,null))&&!ye.h;break e}return ce?(ne!=null?ne[0]=$e:(t($e==null),t(U)),K.$=0,U||Rs(Se)):Rs(Se),ce}function Zt(_,E){var U=_.c*_.i,K=U+E+16*E;return t(_.c<=E),_.V=a(K),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+U+E,1)}function $n(_,E){var U=_.C,K=E-U,ne=_.V,ce=_.Ba+_.c*U;for(t(E<=_.l.o);0<K;){var de=16<K?16:K,pe=_.l.ma,ye=_.l.width,Se=ye*de,$e=pe.ca,et=pe.tb+ye*U,_e=_.Ta,Ve=_.Ua;En(_,de,ne,ce),wp(_e,Ve,$e,et,Se),zt(pe,U,U+de,$e,et,ye),K-=de,ne+=de*_.c,U+=de}t(U==E),_.C=_.Ma=E}function _s(){this.ub=this.yd=this.td=this.Rb=0}function qa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ms(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ds(){this.Yb=function(){var _=[];return function E(U,K,ne){for(var ce=ne[K],de=0;de<ce&&(U.push(ne.length>K+1?[]:0),!(ne.length<K+1));de++)E(U[de],K+1,ne)}(_,0,[3,11]),_}()}function di(){this.jb=a(3),this.Wc=l([4,8],Ds),this.Xc=l([4,17],Ds)}function El(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Li(){this.ld=this.La=this.dd=this.tc=0}function cl(){this.Na=this.la=0}function za(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Zi(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ju(){this.uc=this.M=this.Nb=0,this.wa=Array(new Li),this.Y=0,this.ya=Array(new Zi),this.aa=0,this.l=new _c}function pd(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Ha(){this.cb=this.a=0,this.sc="",this.m=new F,this.Od=new _s,this.Kc=new qa,this.ed=new El,this.Qa=new ms,this.Ic=this.$c=this.Aa=0,this.D=new ju,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,F),this.ia=0,this.pb=o(4,za),this.Pa=new di,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new pd),this.Hd=0,this.rb=Array(new cl),this.sb=0,this.wa=Array(new Li),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Zi),this.L=this.aa=0,this.gd=l([4,2],Li),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _c(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Cc(){var _=new Ha;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,yy||(yy=zn)),_}function Bn(_,E,U){return _.a==0&&(_.a=E,_.sc=U,_.cb=0),0}function wu(_,E,U){return 3<=U&&_[E+0]==157&&_[E+1]==1&&_[E+2]==42}function Io(_,E){if(_==null)return 0;if(_.a=0,_.sc="OK",E==null)return Bn(_,2,"null VP8Io passed to VP8GetHeaders()");var U=E.data,K=E.w,ne=E.ha;if(4>ne)return Bn(_,7,"Truncated header.");var ce=U[K+0]|U[K+1]<<8|U[K+2]<<16,de=_.Od;if(de.Rb=!(1&ce),de.td=ce>>1&7,de.yd=ce>>4&1,de.ub=ce>>5,3<de.td)return Bn(_,3,"Incorrect keyframe parameters.");if(!de.yd)return Bn(_,4,"Frame not displayable.");K+=3,ne-=3;var pe=_.Kc;if(de.Rb){if(7>ne)return Bn(_,7,"cannot parse picture header");if(!wu(U,K,ne))return Bn(_,3,"Bad code word");pe.c=16383&(U[K+4]<<8|U[K+3]),pe.Td=U[K+4]>>6,pe.i=16383&(U[K+6]<<8|U[K+5]),pe.Ud=U[K+6]>>6,K+=7,ne-=7,_.za=pe.c+15>>4,_.Ub=pe.i+15>>4,E.width=pe.c,E.height=pe.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,i((ce=_.Pa).jb,0,255,ce.jb.length),t((ce=_.Qa)!=null),ce.Cb=0,ce.Bb=0,ce.Fb=1,i(ce.Zb,0,0,ce.Zb.length),i(ce.Lb,0,0,ce.Lb)}if(de.ub>ne)return Bn(_,7,"bad partition length");M(ce=_.m,U,K,de.ub),K+=de.ub,ne-=de.ub,de.Rb&&(pe.Ld=X(ce),pe.Kd=X(ce)),pe=_.Qa;var ye,Se=_.Pa;if(t(ce!=null),t(pe!=null),pe.Cb=X(ce),pe.Cb){if(pe.Bb=X(ce),X(ce)){for(pe.Fb=X(ce),ye=0;4>ye;++ye)pe.Zb[ye]=X(ce)?V(ce,7):0;for(ye=0;4>ye;++ye)pe.Lb[ye]=X(ce)?V(ce,6):0}if(pe.Bb)for(ye=0;3>ye;++ye)Se.jb[ye]=X(ce)?L(ce,8):255}else pe.Bb=0;if(ce.Ka)return Bn(_,3,"cannot parse segment header");if((pe=_.ed).zd=X(ce),pe.Tb=L(ce,6),pe.wb=L(ce,3),pe.Pc=X(ce),pe.Pc&&X(ce)){for(Se=0;4>Se;++Se)X(ce)&&(pe.vd[Se]=V(ce,6));for(Se=0;4>Se;++Se)X(ce)&&(pe.od[Se]=V(ce,6))}if(_.L=pe.Tb==0?0:pe.zd?1:2,ce.Ka)return Bn(_,3,"cannot parse filter header");var $e=ne;if(ne=ye=K,K=ye+$e,pe=$e,_.Xb=(1<<L(_.m,2))-1,$e<3*(Se=_.Xb))U=7;else{for(ye+=3*Se,pe-=3*Se,$e=0;$e<Se;++$e){var et=U[ne+0]|U[ne+1]<<8|U[ne+2]<<16;et>pe&&(et=pe),M(_.Jc[+$e],U,ye,et),ye+=et,pe-=et,ne+=3}M(_.Jc[+Se],U,ye,pe),U=ye<K?0:5}if(U!=0)return Bn(_,U,"cannot parse partitions");for(U=L(ye=_.m,7),ne=X(ye)?V(ye,4):0,K=X(ye)?V(ye,4):0,pe=X(ye)?V(ye,4):0,Se=X(ye)?V(ye,4):0,ye=X(ye)?V(ye,4):0,$e=_.Qa,et=0;4>et;++et){if($e.Cb){var _e=$e.Zb[et];$e.Fb||(_e+=U)}else{if(0<et){_.pb[et]=_.pb[0];continue}_e=U}var Ve=_.pb[et];Ve.Sc[0]=OA[ti(_e+ne,127)],Ve.Sc[1]=RA[ti(_e+0,127)],Ve.Eb[0]=2*OA[ti(_e+K,127)],Ve.Eb[1]=101581*RA[ti(_e+pe,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=OA[ti(_e+Se,117)],Ve.Qc[1]=RA[ti(_e+ye,127)],Ve.lc=_e+ye}if(!de.Rb)return Bn(_,4,"Not a key frame.");for(X(ce),de=_.Pa,U=0;4>U;++U){for(ne=0;8>ne;++ne)for(K=0;3>K;++K)for(pe=0;11>pe;++pe)Se=he(ce,yfe[U][ne][K][pe])?L(ce,8):xfe[U][ne][K][pe],de.Wc[U][ne].Yb[K][pe]=Se;for(ne=0;17>ne;++ne)de.Xc[U][ne]=de.Wc[U][bfe[ne]]}return _.kc=X(ce),_.kc&&(_.Bd=L(ce,8)),_.cb=1}function zn(_,E,U,K,ne,ce,de){var pe=E[ne].Yb[U];for(U=0;16>ne;++ne){if(!he(_,pe[U+0]))return ne;for(;!he(_,pe[U+1]);)if(pe=E[++ne].Yb[0],U=0,ne==16)return 16;var ye=E[ne+1].Yb;if(he(_,pe[U+2])){var Se=_,$e=0;if(he(Se,(_e=pe)[(et=U)+3]))if(he(Se,_e[et+6])){for(pe=0,et=2*($e=he(Se,_e[et+8]))+(_e=he(Se,_e[et+9+$e])),$e=0,_e=pfe[et];_e[pe];++pe)$e+=$e+he(Se,_e[pe]);$e+=3+(8<<et)}else he(Se,_e[et+7])?($e=7+2*he(Se,165),$e+=he(Se,145)):$e=5+he(Se,159);else $e=he(Se,_e[et+4])?3+he(Se,_e[et+5]):2;pe=ye[2]}else $e=1,pe=ye[1];ye=de+gfe[ne],0>(Se=_).b&&ie(Se);var et,_e=Se.b,Ve=(et=Se.Ca>>1)-(Se.I>>_e)>>31;--Se.b,Se.Ca+=Ve,Se.Ca|=1,Se.I-=(et+1&Ve)<<_e,ce[ye]=(($e^Ve)-Ve)*K[(0<ne)+0]}return 16}function On(_){var E=_.rb[_.sb-1];E.la=0,E.Na=0,i(_.zc,0,0,_.zc.length),_.ja=0}function ns(_,E,U,K,ne){ne=_[E+U+32*K]+(ne>>3),_[E+U+32*K]=-256&ne?0>ne?0:255:ne}function Pa(_,E,U,K,ne,ce){ns(_,E,0,U,K+ne),ns(_,E,1,U,K+ce),ns(_,E,2,U,K-ce),ns(_,E,3,U,K-ne)}function ss(_){return(20091*_>>16)+_}function Ni(_,E,U,K){var ne,ce=0,de=a(16);for(ne=0;4>ne;++ne){var pe=_[E+0]+_[E+8],ye=_[E+0]-_[E+8],Se=(35468*_[E+4]>>16)-ss(_[E+12]),$e=ss(_[E+4])+(35468*_[E+12]>>16);de[ce+0]=pe+$e,de[ce+1]=ye+Se,de[ce+2]=ye-Se,de[ce+3]=pe-$e,ce+=4,E++}for(ne=ce=0;4>ne;++ne)pe=(_=de[ce+0]+4)+de[ce+8],ye=_-de[ce+8],Se=(35468*de[ce+4]>>16)-ss(de[ce+12]),ns(U,K,0,0,pe+($e=ss(de[ce+4])+(35468*de[ce+12]>>16))),ns(U,K,1,0,ye+Se),ns(U,K,2,0,ye-Se),ns(U,K,3,0,pe-$e),ce++,K+=32}function Lo(_,E,U,K){var ne=_[E+0]+4,ce=35468*_[E+4]>>16,de=ss(_[E+4]),pe=35468*_[E+1]>>16;Pa(U,K,0,ne+de,_=ss(_[E+1]),pe),Pa(U,K,1,ne+ce,_,pe),Pa(U,K,2,ne-ce,_,pe),Pa(U,K,3,ne-de,_,pe)}function lo(_,E,U,K,ne){Ni(_,E,U,K),ne&&Ni(_,E+16,U,K+4)}function gd(_,E,U,K){en(_,E+0,U,K,1),en(_,E+32,U,K+128,1)}function Ji(_,E,U,K){var ne;for(_=_[E+0]+4,ne=0;4>ne;++ne)for(E=0;4>E;++E)ns(U,K,E,ne,_)}function Ol(_,E,U,K){_[E+0]&&Nr(_,E+0,U,K),_[E+16]&&Nr(_,E+16,U,K+4),_[E+32]&&Nr(_,E+32,U,K+128),_[E+48]&&Nr(_,E+48,U,K+128+4)}function Wa(_,E,U,K){var ne,ce=a(16);for(ne=0;4>ne;++ne){var de=_[E+0+ne]+_[E+12+ne],pe=_[E+4+ne]+_[E+8+ne],ye=_[E+4+ne]-_[E+8+ne],Se=_[E+0+ne]-_[E+12+ne];ce[0+ne]=de+pe,ce[8+ne]=de-pe,ce[4+ne]=Se+ye,ce[12+ne]=Se-ye}for(ne=0;4>ne;++ne)de=(_=ce[0+4*ne]+3)+ce[3+4*ne],pe=ce[1+4*ne]+ce[2+4*ne],ye=ce[1+4*ne]-ce[2+4*ne],Se=_-ce[3+4*ne],U[K+0]=de+pe>>3,U[K+16]=Se+ye>>3,U[K+32]=de-pe>>3,U[K+48]=Se-ye>>3,K+=64}function Si(_,E,U){var K,ne=E-32,ce=zl,de=255-_[ne-1];for(K=0;K<U;++K){var pe,ye=ce,Se=de+_[E-1];for(pe=0;pe<U;++pe)_[E+pe]=ye[Se+_[ne+pe]];E+=32}}function Rl(_,E){Si(_,E,4)}function Nu(_,E){Si(_,E,8)}function xd(_,E){Si(_,E,16)}function vd(_,E){var U;for(U=0;16>U;++U)s(_,E+32*U,_,E-32,16)}function Dl(_,E){var U;for(U=16;0<U;--U)i(_,E,_[E-1],16),E+=32}function Fo(_,E,U){var K;for(K=0;16>K;++K)i(E,U+32*K,_,16)}function Ka(_,E){var U,K=16;for(U=0;16>U;++U)K+=_[E-1+32*U]+_[E+U-32];Fo(K>>5,_,E)}function Ac(_,E){var U,K=8;for(U=0;16>U;++U)K+=_[E-1+32*U];Fo(K>>4,_,E)}function $o(_,E){var U,K=8;for(U=0;16>U;++U)K+=_[E+U-32];Fo(K>>4,_,E)}function Ml(_,E){Fo(128,_,E)}function Nt(_,E,U){return _+2*E+U+2>>2}function cn(_,E){var U,K=E-32;for(K=new Uint8Array([Nt(_[K-1],_[K+0],_[K+1]),Nt(_[K+0],_[K+1],_[K+2]),Nt(_[K+1],_[K+2],_[K+3]),Nt(_[K+2],_[K+3],_[K+4])]),U=0;4>U;++U)s(_,E+32*U,K,0,K.length)}function Ta(_,E){var U=_[E-1],K=_[E-1+32],ne=_[E-1+64],ce=_[E-1+96];fe(_,E+0,16843009*Nt(_[E-1-32],U,K)),fe(_,E+32,16843009*Nt(U,K,ne)),fe(_,E+64,16843009*Nt(K,ne,ce)),fe(_,E+96,16843009*Nt(ne,ce,ce))}function Ga(_,E){var U,K=4;for(U=0;4>U;++U)K+=_[E+U-32]+_[E-1+32*U];for(K>>=3,U=0;4>U;++U)i(_,E+32*U,K,4)}function Bo(_,E){var U=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ce=_[E-1-32],de=_[E+0-32],pe=_[E+1-32],ye=_[E+2-32],Se=_[E+3-32];_[E+0+96]=Nt(K,ne,_[E-1+96]),_[E+1+96]=_[E+0+64]=Nt(U,K,ne),_[E+2+96]=_[E+1+64]=_[E+0+32]=Nt(ce,U,K),_[E+3+96]=_[E+2+64]=_[E+1+32]=_[E+0+0]=Nt(de,ce,U),_[E+3+64]=_[E+2+32]=_[E+1+0]=Nt(pe,de,ce),_[E+3+32]=_[E+2+0]=Nt(ye,pe,de),_[E+3+0]=Nt(Se,ye,pe)}function _i(_,E){var U=_[E+1-32],K=_[E+2-32],ne=_[E+3-32],ce=_[E+4-32],de=_[E+5-32],pe=_[E+6-32],ye=_[E+7-32];_[E+0+0]=Nt(_[E+0-32],U,K),_[E+1+0]=_[E+0+32]=Nt(U,K,ne),_[E+2+0]=_[E+1+32]=_[E+0+64]=Nt(K,ne,ce),_[E+3+0]=_[E+2+32]=_[E+1+64]=_[E+0+96]=Nt(ne,ce,de),_[E+3+32]=_[E+2+64]=_[E+1+96]=Nt(ce,de,pe),_[E+3+64]=_[E+2+96]=Nt(de,pe,ye),_[E+3+96]=Nt(pe,ye,ye)}function ue(_,E){var U=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ce=_[E-1-32],de=_[E+0-32],pe=_[E+1-32],ye=_[E+2-32],Se=_[E+3-32];_[E+0+0]=_[E+1+64]=ce+de+1>>1,_[E+1+0]=_[E+2+64]=de+pe+1>>1,_[E+2+0]=_[E+3+64]=pe+ye+1>>1,_[E+3+0]=ye+Se+1>>1,_[E+0+96]=Nt(ne,K,U),_[E+0+64]=Nt(K,U,ce),_[E+0+32]=_[E+1+96]=Nt(U,ce,de),_[E+1+32]=_[E+2+96]=Nt(ce,de,pe),_[E+2+32]=_[E+3+96]=Nt(de,pe,ye),_[E+3+32]=Nt(pe,ye,Se)}function bt(_,E){var U=_[E+0-32],K=_[E+1-32],ne=_[E+2-32],ce=_[E+3-32],de=_[E+4-32],pe=_[E+5-32],ye=_[E+6-32],Se=_[E+7-32];_[E+0+0]=U+K+1>>1,_[E+1+0]=_[E+0+64]=K+ne+1>>1,_[E+2+0]=_[E+1+64]=ne+ce+1>>1,_[E+3+0]=_[E+2+64]=ce+de+1>>1,_[E+0+32]=Nt(U,K,ne),_[E+1+32]=_[E+0+96]=Nt(K,ne,ce),_[E+2+32]=_[E+1+96]=Nt(ne,ce,de),_[E+3+32]=_[E+2+96]=Nt(ce,de,pe),_[E+3+64]=Nt(de,pe,ye),_[E+3+96]=Nt(pe,ye,Se)}function vr(_,E){var U=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ce=_[E-1+96];_[E+0+0]=U+K+1>>1,_[E+2+0]=_[E+0+32]=K+ne+1>>1,_[E+2+32]=_[E+0+64]=ne+ce+1>>1,_[E+1+0]=Nt(U,K,ne),_[E+3+0]=_[E+1+32]=Nt(K,ne,ce),_[E+3+32]=_[E+1+64]=Nt(ne,ce,ce),_[E+3+64]=_[E+2+64]=_[E+0+96]=_[E+1+96]=_[E+2+96]=_[E+3+96]=ce}function wn(_,E){var U=_[E-1+0],K=_[E-1+32],ne=_[E-1+64],ce=_[E-1+96],de=_[E-1-32],pe=_[E+0-32],ye=_[E+1-32],Se=_[E+2-32];_[E+0+0]=_[E+2+32]=U+de+1>>1,_[E+0+32]=_[E+2+64]=K+U+1>>1,_[E+0+64]=_[E+2+96]=ne+K+1>>1,_[E+0+96]=ce+ne+1>>1,_[E+3+0]=Nt(pe,ye,Se),_[E+2+0]=Nt(de,pe,ye),_[E+1+0]=_[E+3+32]=Nt(U,de,pe),_[E+1+32]=_[E+3+64]=Nt(K,U,de),_[E+1+64]=_[E+3+96]=Nt(ne,K,U),_[E+1+96]=Nt(ce,ne,K)}function ui(_,E){var U;for(U=0;8>U;++U)s(_,E+32*U,_,E-32,8)}function ps(_,E){var U;for(U=0;8>U;++U)i(_,E,_[E-1],8),E+=32}function co(_,E,U){var K;for(K=0;8>K;++K)i(E,U+32*K,_,8)}function Ya(_,E){var U,K=8;for(U=0;8>U;++U)K+=_[E+U-32]+_[E-1+32*U];co(K>>4,_,E)}function yd(_,E){var U,K=4;for(U=0;8>U;++U)K+=_[E+U-32];co(K>>3,_,E)}function Su(_,E){var U,K=4;for(U=0;8>U;++U)K+=_[E-1+32*U];co(K>>3,_,E)}function _u(_,E){co(128,_,E)}function kc(_,E,U){var K=_[E-U],ne=_[E+0],ce=3*(ne-K)+xy[1020+_[E-2*U]-_[E+U]],de=vy[112+(ce+4>>3)];_[E-U]=zl[255+K+vy[112+(ce+3>>3)]],_[E+0]=zl[255+ne-de]}function Il(_,E,U,K){var ne=_[E+0],ce=_[E+U];return Mc[255+_[E-2*U]-_[E-U]]>K||Mc[255+ce-ne]>K}function is(_,E,U,K){return 4*Mc[255+_[E-U]-_[E+0]]+Mc[255+_[E-2*U]-_[E+U]]<=K}function Ll(_,E,U,K,ne){var ce=_[E-3*U],de=_[E-2*U],pe=_[E-U],ye=_[E+0],Se=_[E+U],$e=_[E+2*U],et=_[E+3*U];return 4*Mc[255+pe-ye]+Mc[255+de-Se]>K?0:Mc[255+_[E-4*U]-ce]<=ne&&Mc[255+ce-de]<=ne&&Mc[255+de-pe]<=ne&&Mc[255+et-$e]<=ne&&Mc[255+$e-Se]<=ne&&Mc[255+Se-ye]<=ne}function bd(_,E,U,K){var ne=2*K+1;for(K=0;16>K;++K)is(_,E+K,U,ne)&&kc(_,E+K,U)}function Pc(_,E,U,K){var ne=2*K+1;for(K=0;16>K;++K)is(_,E+K*U,1,ne)&&kc(_,E+K*U,1)}function mp(_,E,U,K){var ne;for(ne=3;0<ne;--ne)bd(_,E+=4*U,U,K)}function ax(_,E,U,K){var ne;for(ne=3;0<ne;--ne)Pc(_,E+=4,U,K)}function Tc(_,E,U,K,ne,ce,de,pe){for(ce=2*ce+1;0<ne--;){if(Ll(_,E,U,ce,de))if(Il(_,E,U,pe))kc(_,E,U);else{var ye=_,Se=E,$e=U,et=ye[Se-2*$e],_e=ye[Se-$e],Ve=ye[Se+0],Ye=ye[Se+$e],ft=ye[Se+2*$e],Je=27*(jt=xy[1020+3*(Ve-_e)+xy[1020+et-Ye]])+63>>7,xt=18*jt+63>>7,jt=9*jt+63>>7;ye[Se-3*$e]=zl[255+ye[Se-3*$e]+jt],ye[Se-2*$e]=zl[255+et+xt],ye[Se-$e]=zl[255+_e+Je],ye[Se+0]=zl[255+Ve-Je],ye[Se+$e]=zl[255+Ye-xt],ye[Se+2*$e]=zl[255+ft-jt]}E+=K}}function ca(_,E,U,K,ne,ce,de,pe){for(ce=2*ce+1;0<ne--;){if(Ll(_,E,U,ce,de))if(Il(_,E,U,pe))kc(_,E,U);else{var ye=_,Se=E,$e=U,et=ye[Se-$e],_e=ye[Se+0],Ve=ye[Se+$e],Ye=vy[112+(4+(ft=3*(_e-et))>>3)],ft=vy[112+(ft+3>>3)],Je=Ye+1>>1;ye[Se-2*$e]=zl[255+ye[Se-2*$e]+Je],ye[Se-$e]=zl[255+et+ft],ye[Se+0]=zl[255+_e-Ye],ye[Se+$e]=zl[255+Ve-Je]}E+=K}}function pp(_,E,U,K,ne,ce){Tc(_,E,U,1,16,K,ne,ce)}function ox(_,E,U,K,ne,ce){Tc(_,E,1,U,16,K,ne,ce)}function da(_,E,U,K,ne,ce){var de;for(de=3;0<de;--de)ca(_,E+=4*U,U,1,16,K,ne,ce)}function gp(_,E,U,K,ne,ce){var de;for(de=3;0<de;--de)ca(_,E+=4,1,U,16,K,ne,ce)}function B(_,E,U,K,ne,ce,de,pe){Tc(_,E,ne,1,8,ce,de,pe),Tc(U,K,ne,1,8,ce,de,pe)}function re(_,E,U,K,ne,ce,de,pe){Tc(_,E,1,ne,8,ce,de,pe),Tc(U,K,1,ne,8,ce,de,pe)}function Ne(_,E,U,K,ne,ce,de,pe){ca(_,E+4*ne,ne,1,8,ce,de,pe),ca(U,K+4*ne,ne,1,8,ce,de,pe)}function Me(_,E,U,K,ne,ce,de,pe){ca(_,E+4,1,ne,8,ce,de,pe),ca(U,K+4,1,ne,8,ce,de,pe)}function We(){this.ba=new Wt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function gt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function At(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function or(){this.ua=0,this.Wa=new Re,this.vb=new Re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new $}function cr(){this.xb=this.a=0,this.l=new _c,this.ca=new Wt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new W,this.Pb=0,this.wd=new W,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new or,this.ab=0,this.gc=o(4,At),this.Oc=0}function Vr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _c,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Qr(_,E,U,K,ne,ce,de){for(_=_==null?0:_[E+0],E=0;E<de;++E)ne[ce+E]=_+U[K+E]&255,_=ne[ce+E]}function Rn(_,E,U,K,ne,ce,de){var pe;if(_==null)Qr(null,null,U,K,ne,ce,de);else for(pe=0;pe<de;++pe)ne[ce+pe]=_[E+pe]+U[K+pe]&255}function Cs(_,E,U,K,ne,ce,de){if(_==null)Qr(null,null,U,K,ne,ce,de);else{var pe,ye=_[E+0],Se=ye,$e=ye;for(pe=0;pe<de;++pe)Se=$e+(ye=_[E+pe])-Se,$e=U[K+pe]+(-256&Se?0>Se?0:255:Se)&255,Se=ye,ne[ce+pe]=$e}}function hi(_,E,U,K){var ne=E.width,ce=E.o;if(t(_!=null&&E!=null),0>U||0>=K||U+K>ce)return null;if(!_.Cc){if(_.ga==null){var de;if(_.ga=new Vr,(de=_.ga==null)||(de=E.width*E.o,t(_.Gb.length==0),_.Gb=a(de),_.Uc=0,_.Gb==null?de=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,de=1),de=!de),!de){de=_.ga;var pe=_.Fa,ye=_.P,Se=_.qc,$e=_.mb,et=_.nb,_e=ye+1,Ve=Se-1,Ye=de.l;if(t(pe!=null&&$e!=null&&E!=null),If[0]=null,If[1]=Qr,If[2]=Rn,If[3]=Cs,de.ca=$e,de.tb=et,de.c=E.width,de.i=E.height,t(0<de.c&&0<de.i),1>=Se)E=0;else if(de.$a=3&pe[ye+0],de.Z=pe[ye+0]>>2&3,de.Lc=pe[ye+0]>>4&3,ye=pe[ye+0]>>6&3,0>de.$a||1<de.$a||4<=de.Z||1<de.Lc||ye)E=0;else if(Ye.put=gr,Ye.ac=Dt,Ye.bc=Fn,Ye.ma=de,Ye.width=E.width,Ye.height=E.height,Ye.Da=E.Da,Ye.v=E.v,Ye.va=E.va,Ye.j=E.j,Ye.o=E.o,de.$a)e:{t(de.$a==1),E=st();t:for(;;){if(E==null){E=0;break e}if(t(de!=null),de.mc=E,E.c=de.c,E.i=de.i,E.l=de.l,E.l.ma=de,E.l.width=de.c,E.l.height=de.i,E.a=0,P(E.m,pe,_e,Ve),!tr(de.c,de.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&zr(E.s)?(de.ic=1,pe=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(pe),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(de.ic=0,E=Zt(E,de.c)),!E))break t;E=1;break e}de.mc=null,E=0}else E=Ve>=de.c*de.i;de=!E}if(de)return null;_.ga.Lc!=1?_.Ga=0:K=ce-U}t(_.ga!=null),t(U+K<=ce);e:{if(E=(pe=_.ga).c,ce=pe.l.o,pe.$a==0){if(_e=_.rc,Ve=_.Vc,Ye=_.Fa,ye=_.P+1+U*E,Se=_.mb,$e=_.nb+U*E,t(ye<=_.P+_.qc),pe.Z!=0)for(t(If[pe.Z]!=null),de=0;de<K;++de)If[pe.Z](_e,Ve,Ye,ye,Se,$e,E),_e=Se,Ve=$e,$e+=E,ye+=E;else for(de=0;de<K;++de)s(Se,$e,Ye,ye,E),_e=Se,Ve=$e,$e+=E,ye+=E;_.rc=_e,_.Vc=Ve}else{if(t(pe.mc!=null),E=U+K,t((de=pe.mc)!=null),t(E<=de.i),de.C>=E)E=1;else if(pe.ic||dl(),pe.ic){pe=de.V,_e=de.Ba,Ve=de.c;var ft=de.i,Je=(Ye=1,ye=de.$/Ve,Se=de.$%Ve,$e=de.m,et=de.s,de.$),xt=Ve*ft,jt=Ve*E,Lt=et.wc,Tt=Je<jt?rs(et,Se,ye):null;t(Je<=xt),t(E<=ft),t(zr(et));t:for(;;){for(;!$e.h&&Je<jt;){if(Se&Lt||(Tt=rs(et,Se,ye)),t(Tt!=null),J($e),256>(ft=rn(Tt.G[0],Tt.H[0],$e)))pe[_e+Je]=ft,++Je,++Se>=Ve&&(Se=0,++ye<=E&&!(ye%16)&&ji(de,ye));else{if(!(280>ft)){Ye=0;break t}ft=An(ft-256,$e);var Cr,mr=rn(Tt.G[4],Tt.H[4],$e);if(J($e),!(Je>=(mr=ei(Ve,mr=An(mr,$e)))&&xt-Je>=ft)){Ye=0;break t}for(Cr=0;Cr<ft;++Cr)pe[_e+Je+Cr]=pe[_e+Je+Cr-mr];for(Je+=ft,Se+=ft;Se>=Ve;)Se-=Ve,++ye<=E&&!(ye%16)&&ji(de,ye);Je<jt&&Se&Lt&&(Tt=rs(et,Se,ye))}t($e.h==H($e))}ji(de,ye>E?E:ye);break t}!Ye||$e.h&&Je<xt?(Ye=0,de.a=$e.h?5:3):de.$=Je,E=Ye}else E=wi(de,de.V,de.Ba,de.c,de.i,E,$n);if(!E){K=0;break e}}U+K>=ce&&(_.Cc=1),K=1}if(!K)return null;if(_.Cc&&((K=_.ga)!=null&&(K.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+U*ne}function Kn(_,E,U,K,ne,ce){for(;0<ne--;){var de,pe=_,ye=E+(U?1:0),Se=_,$e=E+(U?0:3);for(de=0;de<K;++de){var et=Se[$e+4*de];et!=255&&(et*=32897,pe[ye+4*de+0]=pe[ye+4*de+0]*et>>23,pe[ye+4*de+1]=pe[ye+4*de+1]*et>>23,pe[ye+4*de+2]=pe[ye+4*de+2]*et>>23)}E+=ce}}function Ci(_,E,U,K,ne){for(;0<K--;){var ce;for(ce=0;ce<U;++ce){var de=_[E+2*ce+0],pe=15&(Se=_[E+2*ce+1]),ye=4369*pe,Se=(240&Se|Se>>4)*ye>>16;_[E+2*ce+0]=(240&de|de>>4)*ye>>16&240|(15&de|de<<4)*ye>>16>>4&15,_[E+2*ce+1]=240&Se|pe}E+=ne}}function Ai(_,E,U,K,ne,ce,de,pe){var ye,Se,$e=255;for(Se=0;Se<ne;++Se){for(ye=0;ye<K;++ye){var et=_[E+ye];ce[de+4*ye]=et,$e&=et}E+=U,de+=pe}return $e!=255}function ua(_,E,U,K,ne){var ce;for(ce=0;ce<ne;++ce)U[K+ce]=_[E+ce]>>8}function dl(){Sd=Kn,bp=Ci,jp=Ai,wp=ua}function ha(_,E,U){A[_]=function(K,ne,ce,de,pe,ye,Se,$e,et,_e,Ve,Ye,ft,Je,xt,jt,Lt){var Tt,Cr=Lt-1>>1,mr=pe[ye+0]|Se[$e+0]<<16,dn=et[_e+0]|Ve[Ye+0]<<16;t(K!=null);var br=3*mr+dn+131074>>2;for(E(K[ne+0],255&br,br>>16,ft,Je),ce!=null&&(br=3*dn+mr+131074>>2,E(ce[de+0],255&br,br>>16,xt,jt)),Tt=1;Tt<=Cr;++Tt){var Sn=pe[ye+Tt]|Se[$e+Tt]<<16,ma=et[_e+Tt]|Ve[Ye+Tt]<<16,un=mr+Sn+dn+ma+524296,jr=un+2*(Sn+dn)>>3;br=jr+mr>>1,mr=(un=un+2*(mr+ma)>>3)+Sn>>1,E(K[ne+2*Tt-1],255&br,br>>16,ft,Je+(2*Tt-1)*U),E(K[ne+2*Tt-0],255&mr,mr>>16,ft,Je+(2*Tt-0)*U),ce!=null&&(br=un+dn>>1,mr=jr+ma>>1,E(ce[de+2*Tt-1],255&br,br>>16,xt,jt+(2*Tt-1)*U),E(ce[de+2*Tt+0],255&mr,mr>>16,xt,jt+(2*Tt+0)*U)),mr=Sn,dn=ma}1&Lt||(br=3*mr+dn+131074>>2,E(K[ne+Lt-1],255&br,br>>16,ft,Je+(Lt-1)*U),ce!=null&&(br=3*dn+mr+131074>>2,E(ce[de+Lt-1],255&br,br>>16,xt,jt+(Lt-1)*U)))}}function lx(){Ic[Aw]=wfe,Ic[kw]=mI,Ic[cI]=Nfe,Ic[Pw]=pI,Ic[Tw]=gI,Ic[kA]=xI,Ic[dI]=Sfe,Ic[PA]=mI,Ic[TA]=pI,Ic[Ew]=gI,Ic[EA]=xI}function Ec(_){return _&-16384?0>_?0:255:_>>_fe}function xh(_,E){return Ec((19077*_>>8)+(26149*E>>8)-14234)}function Fl(_,E,U){return Ec((19077*_>>8)-(6419*E>>8)-(13320*U>>8)+8708)}function ul(_,E){return Ec((19077*_>>8)+(33050*E>>8)-17685)}function Xa(_,E,U,K,ne){K[ne+0]=xh(_,U),K[ne+1]=Fl(_,E,U),K[ne+2]=ul(_,E)}function Cu(_,E,U,K,ne){K[ne+0]=ul(_,E),K[ne+1]=Fl(_,E,U),K[ne+2]=xh(_,U)}function Ea(_,E,U,K,ne){var ce=Fl(_,E,U);E=ce<<3&224|ul(_,E)>>3,K[ne+0]=248&xh(_,U)|ce>>5,K[ne+1]=E}function vh(_,E,U,K,ne){var ce=240&ul(_,E)|15;K[ne+0]=240&xh(_,U)|Fl(_,E,U)>>4,K[ne+1]=ce}function yh(_,E,U,K,ne){K[ne+0]=255,Xa(_,E,U,K,ne+1)}function xp(_,E,U,K,ne){Cu(_,E,U,K,ne),K[ne+3]=255}function $l(_,E,U,K,ne){Xa(_,E,U,K,ne),K[ne+3]=255}function ti(_,E){return 0>_?0:_>E?E:_}function Oc(_,E,U){A[_]=function(K,ne,ce,de,pe,ye,Se,$e,et){for(var _e=$e+(-2&et)*U;$e!=_e;)E(K[ne+0],ce[de+0],pe[ye+0],Se,$e),E(K[ne+1],ce[de+0],pe[ye+0],Se,$e+U),ne+=2,++de,++ye,$e+=2*U;1&et&&E(K[ne+0],ce[de+0],pe[ye+0],Se,$e)}}function bh(_,E,U){return U==0?_==0?E==0?6:5:E==0?4:0:U}function vp(_,E,U,K,ne){switch(_>>>30){case 3:en(E,U,K,ne,0);break;case 2:Vn(E,U,K,ne);break;case 1:Nr(E,U,K,ne)}}function hl(_,E){var U,K,ne=E.M,ce=E.Nb,de=_.oc,pe=_.pc+40,ye=_.oc,Se=_.pc+584,$e=_.oc,et=_.pc+600;for(U=0;16>U;++U)de[pe+32*U-1]=129;for(U=0;8>U;++U)ye[Se+32*U-1]=129,$e[et+32*U-1]=129;for(0<ne?de[pe-1-32]=ye[Se-1-32]=$e[et-1-32]=129:(i(de,pe-32-1,127,21),i(ye,Se-32-1,127,9),i($e,et-32-1,127,9)),K=0;K<_.za;++K){var _e=E.ya[E.aa+K];if(0<K){for(U=-1;16>U;++U)s(de,pe+32*U-4,de,pe+32*U+12,4);for(U=-1;8>U;++U)s(ye,Se+32*U-4,ye,Se+32*U+4,4),s($e,et+32*U-4,$e,et+32*U+4,4)}var Ve=_.Gd,Ye=_.Hd+K,ft=_e.ad,Je=_e.Hc;if(0<ne&&(s(de,pe-32,Ve[Ye].y,0,16),s(ye,Se-32,Ve[Ye].f,0,8),s($e,et-32,Ve[Ye].ea,0,8)),_e.Za){var xt=de,jt=pe-32+16;for(0<ne&&(K>=_.za-1?i(xt,jt,Ve[Ye].y[15],4):s(xt,jt,Ve[Ye+1].y,0,4)),U=0;4>U;U++)xt[jt+128+U]=xt[jt+256+U]=xt[jt+384+U]=xt[jt+0+U];for(U=0;16>U;++U,Je<<=2)xt=de,jt=pe+yI[U],Cd[_e.Ob[U]](xt,jt),vp(Je,ft,16*+U,xt,jt)}else if(xt=bh(K,ne,_e.Ob[0]),Mf[xt](de,pe),Je!=0)for(U=0;16>U;++U,Je<<=2)vp(Je,ft,16*+U,de,pe+yI[U]);for(U=_e.Gc,xt=bh(K,ne,_e.Dd),Nh[xt](ye,Se),Nh[xt]($e,et),Je=ft,xt=ye,jt=Se,255&(_e=0|U)&&(170&_e?Nn(Je,256,xt,jt):Ar(Je,256,xt,jt)),_e=$e,Je=et,255&(U>>=8)&&(170&U?Nn(ft,320,_e,Je):Ar(ft,320,_e,Je)),ne<_.Ub-1&&(s(Ve[Ye].y,0,de,pe+480,16),s(Ve[Ye].f,0,ye,Se+224,8),s(Ve[Ye].ea,0,$e,et+224,8)),U=8*ce*_.B,Ve=_.sa,Ye=_.ta+16*K+16*ce*_.R,ft=_.qa,_e=_.ra+8*K+U,Je=_.Ha,xt=_.Ia+8*K+U,U=0;16>U;++U)s(Ve,Ye+U*_.R,de,pe+32*U,16);for(U=0;8>U;++U)s(ft,_e+U*_.B,ye,Se+32*U,8),s(Je,xt+U*_.B,$e,et+32*U,8)}}function jh(_,E,U,K,ne,ce,de,pe,ye){var Se=[0],$e=[0],et=0,_e=ye!=null?ye.kd:0,Ve=ye??new gt;if(_==null||12>U)return 7;Ve.data=_,Ve.w=E,Ve.ha=U,E=[E],U=[U],Ve.gb=[Ve.gb];e:{var Ye=E,ft=U,Je=Ve.gb;if(t(_!=null),t(ft!=null),t(Je!=null),Je[0]=0,12<=ft[0]&&!n(_,Ye[0],"RIFF")){if(n(_,Ye[0]+8,"WEBP")){Je=3;break e}var xt=ve(_,Ye[0]+4);if(12>xt||4294967286<xt){Je=3;break e}if(_e&&xt>ft[0]-8){Je=7;break e}Je[0]=xt,Ye[0]+=12,ft[0]-=12}Je=0}if(Je!=0)return Je;for(xt=0<Ve.gb[0],U=U[0];;){e:{var jt=_;ft=E,Je=U;var Lt=Se,Tt=$e,Cr=Ye=[0];if((br=et=[et])[0]=0,8>Je[0])Je=7;else{if(!n(jt,ft[0],"VP8X")){if(ve(jt,ft[0]+4)!=10){Je=3;break e}if(18>Je[0]){Je=7;break e}var mr=ve(jt,ft[0]+8),dn=1+Oe(jt,ft[0]+12);if(2147483648<=dn*(jt=1+Oe(jt,ft[0]+15))){Je=3;break e}Cr!=null&&(Cr[0]=mr),Lt!=null&&(Lt[0]=dn),Tt!=null&&(Tt[0]=jt),ft[0]+=18,Je[0]-=18,br[0]=1}Je=0}}if(et=et[0],Ye=Ye[0],Je!=0)return Je;if(ft=!!(2&Ye),!xt&&et)return 3;if(ce!=null&&(ce[0]=!!(16&Ye)),de!=null&&(de[0]=ft),pe!=null&&(pe[0]=0),de=Se[0],Ye=$e[0],et&&ft&&ye==null){Je=0;break}if(4>U){Je=7;break}if(xt&&et||!xt&&!et&&!n(_,E[0],"ALPH")){U=[U],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{mr=_,Je=E,xt=U;var br=Ve.gb;Lt=Ve.na,Tt=Ve.P,Cr=Ve.Sa,dn=22,t(mr!=null),t(xt!=null),jt=Je[0];var Sn=xt[0];for(t(Lt!=null),t(Cr!=null),Lt[0]=null,Tt[0]=null,Cr[0]=0;;){if(Je[0]=jt,xt[0]=Sn,8>Sn){Je=7;break e}var ma=ve(mr,jt+4);if(4294967286<ma){Je=3;break e}var un=8+ma+1&-2;if(dn+=un,0<br&&dn>br){Je=3;break e}if(!n(mr,jt,"VP8 ")||!n(mr,jt,"VP8L")){Je=0;break e}if(Sn[0]<un){Je=7;break e}n(mr,jt,"ALPH")||(Lt[0]=mr,Tt[0]=jt+8,Cr[0]=ma),jt+=un,Sn-=un}}if(U=U[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],Je!=0)break}U=[U],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(br=_,Je=E,xt=U,Lt=Ve.gb[0],Tt=Ve.Ja,Cr=Ve.xa,mr=Je[0],jt=!n(br,mr,"VP8 "),dn=!n(br,mr,"VP8L"),t(br!=null),t(xt!=null),t(Tt!=null),t(Cr!=null),8>xt[0])Je=7;else{if(jt||dn){if(br=ve(br,mr+4),12<=Lt&&br>Lt-12){Je=3;break e}if(_e&&br>xt[0]-8){Je=7;break e}Tt[0]=br,Je[0]+=8,xt[0]-=8,Cr[0]=dn}else Cr[0]=5<=xt[0]&&br[mr+0]==47&&!(br[mr+4]>>5),Tt[0]=xt[0];Je=0}if(U=U[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],E=E[0],Je!=0)break;if(4294967286<Ve.Ja)return 3;if(pe==null||ft||(pe[0]=Ve.xa?2:1),de=[de],Ye=[Ye],Ve.xa){if(5>U){Je=7;break}pe=de,_e=Ye,ft=ce,_==null||5>U?_=0:5<=U&&_[E+0]==47&&!(_[E+4]>>5)?(xt=[0],br=[0],Lt=[0],P(Tt=new W,_,E,U),bi(Tt,xt,br,Lt)?(pe!=null&&(pe[0]=xt[0]),_e!=null&&(_e[0]=br[0]),ft!=null&&(ft[0]=Lt[0]),_=1):_=0):_=0}else{if(10>U){Je=7;break}pe=Ye,_==null||10>U||!wu(_,E+3,U-3)?_=0:(_e=_[E+0]|_[E+1]<<8|_[E+2]<<16,ft=16383&(_[E+7]<<8|_[E+6]),_=16383&(_[E+9]<<8|_[E+8]),1&_e||3<(_e>>1&7)||!(_e>>4&1)||_e>>5>=Ve.Ja||!ft||!_?_=0:(de&&(de[0]=ft),pe&&(pe[0]=_),_=1))}if(!_||(de=de[0],Ye=Ye[0],et&&(Se[0]!=de||$e[0]!=Ye)))return 3;ye!=null&&(ye[0]=Ve,ye.offset=E-ye.w,t(4294967286>E-ye.w),t(ye.offset==ye.ha-U));break}return Je==0||Je==7&&et&&ye==null?(ce!=null&&(ce[0]|=Ve.na!=null&&0<Ve.na.length),K!=null&&(K[0]=de),ne!=null&&(ne[0]=Ye),0):Je}function Cf(_,E,U){var K=E.width,ne=E.height,ce=0,de=0,pe=K,ye=ne;if(E.Da=_!=null&&0<_.Da,E.Da&&(pe=_.cd,ye=_.bd,ce=_.v,de=_.j,11>U||(ce&=-2,de&=-2),0>ce||0>de||0>=pe||0>=ye||ce+pe>K||de+ye>ne))return 0;if(E.v=ce,E.j=de,E.va=ce+pe,E.o=de+ye,E.U=pe,E.T=ye,E.da=_!=null&&0<_.da,E.da){if(!oe(pe,ye,U=[_.ib],ce=[_.hb]))return 0;E.ib=U[0],E.hb=ce[0]}return E.ob=_!=null&&_.ob,E.Kb=_==null||!_.Sd,E.da&&(E.ob=E.ib<3*K/4&&E.hb<3*ne/4,E.Kb=0),1}function Af(_){if(_==null)return 2;if(11>_.S){var E=_.f.RGBA;E.fb+=(_.height-1)*E.A,E.A=-E.A}else E=_.f.kb,_=_.height,E.O+=(_-1)*E.fa,E.fa=-E.fa,E.N+=(_-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(_-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(_-1)*E.lb,E.lb=-E.lb);return 0}function jd(_,E,U,K){if(K==null||0>=_||0>=E)return 2;if(U!=null){if(U.Da){var ne=U.cd,ce=U.bd,de=-2&U.v,pe=-2&U.j;if(0>de||0>pe||0>=ne||0>=ce||de+ne>_||pe+ce>E)return 2;_=ne,E=ce}if(U.da){if(!oe(_,E,ne=[U.ib],ce=[U.hb]))return 2;_=ne[0],E=ce[0]}}K.width=_,K.height=E;e:{var ye=K.width,Se=K.height;if(_=K.S,0>=ye||0>=Se||!(_>=Aw&&13>_))_=2;else{if(0>=K.Rd&&K.sd==null){de=ce=ne=E=0;var $e=(pe=ye*bI[_])*Se;if(11>_||(ce=(Se+1)/2*(E=(ye+1)/2),_==12&&(de=(ne=ye)*Se)),(Se=a($e+2*ce+de))==null){_=1;break e}K.sd=Se,11>_?((ye=K.f.RGBA).eb=Se,ye.fb=0,ye.A=pe,ye.size=$e):((ye=K.f.kb).y=Se,ye.O=0,ye.fa=pe,ye.Fd=$e,ye.f=Se,ye.N=0+$e,ye.Ab=E,ye.Cd=ce,ye.ea=Se,ye.W=0+$e+ce,ye.Db=E,ye.Ed=ce,_==12&&(ye.F=Se,ye.J=0+$e+2*ce),ye.Tc=de,ye.lb=ne)}if(E=1,ne=K.S,ce=K.width,de=K.height,ne>=Aw&&13>ne)if(11>ne)_=K.f.RGBA,E&=(pe=Math.abs(_.A))*(de-1)+ce<=_.size,E&=pe>=ce*bI[ne],E&=_.eb!=null;else{_=K.f.kb,pe=(ce+1)/2,$e=(de+1)/2,ye=Math.abs(_.fa),Se=Math.abs(_.Ab);var et=Math.abs(_.Db),_e=Math.abs(_.lb),Ve=_e*(de-1)+ce;E&=ye*(de-1)+ce<=_.Fd,E&=Se*($e-1)+pe<=_.Cd,E=(E&=et*($e-1)+pe<=_.Ed)&ye>=ce&Se>=pe&et>=pe,E&=_.y!=null,E&=_.f!=null,E&=_.ea!=null,ne==12&&(E&=_e>=ce,E&=Ve<=_.Tc,E&=_.F!=null)}else E=0;_=E?0:2}}return _!=0||U!=null&&U.fd&&(_=Af(K)),_}var Au=64,uo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ho=24,wd=32,Rc=8,Nd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(_){return _},A.Predictor2=function(_,E,U){return E[U+0]},A.Predictor3=function(_,E,U){return E[U+1]},A.Predictor4=function(_,E,U){return E[U-1]},A.Predictor5=function(_,E,U){return ae(ae(_,E[U+1]),E[U+0])},A.Predictor6=function(_,E,U){return ae(_,E[U-1])},A.Predictor7=function(_,E,U){return ae(_,E[U+0])},A.Predictor8=function(_,E,U){return ae(E[U-1],E[U+0])},A.Predictor9=function(_,E,U){return ae(E[U+0],E[U+1])},A.Predictor10=function(_,E,U){return ae(ae(_,E[U-1]),ae(E[U+0],E[U+1]))},A.Predictor11=function(_,E,U){var K=E[U+0];return 0>=qe(K>>24&255,_>>24&255,(E=E[U-1])>>24&255)+qe(K>>16&255,_>>16&255,E>>16&255)+qe(K>>8&255,_>>8&255,E>>8&255)+qe(255&K,255&_,255&E)?K:_},A.Predictor12=function(_,E,U){var K=E[U+0];return(we((_>>24&255)+(K>>24&255)-((E=E[U-1])>>24&255))<<24|we((_>>16&255)+(K>>16&255)-(E>>16&255))<<16|we((_>>8&255)+(K>>8&255)-(E>>8&255))<<8|we((255&_)+(255&K)-(255&E)))>>>0},A.Predictor13=function(_,E,U){var K=E[U-1];return(Te((_=ae(_,E[U+0]))>>24&255,K>>24&255)<<24|Te(_>>16&255,K>>16&255)<<16|Te(_>>8&255,K>>8&255)<<8|Te(255&_,255&K))>>>0};var kf=A.PredictorAdd0;A.PredictorAdd1=Ke,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var wh=A.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",function(_){return _>>8&255},function(_){return _}),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(_){return _},function(_){return _>>8&255});var ri,yp=A.ColorIndexInverseTransform,Bl=A.MapARGB,Vl=A.VP8LColorIndexInverseTransformAlpha,Pf=A.MapAlpha,Tf=A.VP8LPredictorsAdd=[];Tf.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Ef,Of,le,Fe,_t,Et,Er,en,Vn,Nn,Nr,Ar,Hn,gs,Oa,Ra,Gn,fa,fl,Ul,ql,Rf,ku,Pu,Sd,bp,jp,wp,zs=a(511),_d=a(2041),Df=a(225),Vo=a(767),Dc=0,xy=_d,vy=Df,zl=Vo,Mc=zs,Aw=0,kw=1,cI=2,Pw=3,Tw=4,kA=5,dI=6,PA=7,TA=8,Ew=9,EA=10,lfe=[2,3,7],cfe=[3,3,11],uI=[280,256,256,256,40],dfe=[0,1,1,1,0],ufe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],hfe=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ffe=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mfe=8,OA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],RA=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],yy=null,pfe=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],gfe=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hI=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],xfe=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],vfe=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yfe=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bfe=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Mf=[],Cd=[],Nh=[],jfe=1,fI=2,If=[],Ic=[];ha("UpsampleRgbLinePair",Xa,3),ha("UpsampleBgrLinePair",Cu,3),ha("UpsampleRgbaLinePair",$l,4),ha("UpsampleBgraLinePair",xp,4),ha("UpsampleArgbLinePair",yh,4),ha("UpsampleRgba4444LinePair",vh,2),ha("UpsampleRgb565LinePair",Ea,2);var wfe=A.UpsampleRgbLinePair,Nfe=A.UpsampleBgrLinePair,mI=A.UpsampleRgbaLinePair,pI=A.UpsampleBgraLinePair,gI=A.UpsampleArgbLinePair,xI=A.UpsampleRgba4444LinePair,Sfe=A.UpsampleRgb565LinePair,Ow=16,Rw=1<<Ow-1,by=-227,DA=482,_fe=6,vI=0,Cfe=a(256),Afe=a(256),kfe=a(256),Pfe=a(256),Tfe=a(DA-by),Efe=a(DA-by);Oc("YuvToRgbRow",Xa,3),Oc("YuvToBgrRow",Cu,3),Oc("YuvToRgbaRow",$l,4),Oc("YuvToBgraRow",xp,4),Oc("YuvToArgbRow",yh,4),Oc("YuvToRgba4444Row",vh,2),Oc("YuvToRgb565Row",Ea,2);var yI=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Dw=[0,2,8],Ofe=[8,7,6,4,4,2,2,2,1,1,1,1],Rfe=1;this.WebPDecodeRGBA=function(_,E,U,K,ne){var ce=kw,de=new We,pe=new Wt;de.ba=pe,pe.S=ce,pe.width=[pe.width],pe.height=[pe.height];var ye=pe.width,Se=pe.height,$e=new It;if($e==null||_==null)var et=2;else t($e!=null),et=jh(_,E,U,$e.width,$e.height,$e.Pd,$e.Qd,$e.format,null);if(et!=0?ye=0:(ye!=null&&(ye[0]=$e.width[0]),Se!=null&&(Se[0]=$e.height[0]),ye=1),ye){pe.width=pe.width[0],pe.height=pe.height[0],K!=null&&(K[0]=pe.width),ne!=null&&(ne[0]=pe.height);e:{if(K=new _c,(ne=new gt).data=_,ne.w=E,ne.ha=U,ne.kd=1,E=[0],t(ne!=null),((_=jh(ne.data,ne.w,ne.ha,null,null,null,E,null,ne))==0||_==7)&&E[0]&&(_=4),(E=_)==0){if(t(de!=null),K.data=ne.data,K.w=ne.w+ne.offset,K.ha=ne.ha-ne.offset,K.put=gr,K.ac=Dt,K.bc=Fn,K.ma=de,ne.xa){if((_=st())==null){de=1;break e}if(function(_e,Ve){var Ye=[0],ft=[0],Je=[0];t:for(;;){if(_e==null)return 0;if(Ve==null)return _e.a=2,0;if(_e.l=Ve,_e.a=0,P(_e.m,Ve.data,Ve.w,Ve.ha),!bi(_e.m,Ye,ft,Je)){_e.a=3;break t}if(_e.xb=fI,Ve.width=Ye[0],Ve.height=ft[0],!tr(Ye[0],ft[0],1,_e,null))break t;return 1}return t(_e.a!=0),0}(_,K)){if(K=(E=jd(K.width,K.height,de.Oa,de.ba))==0){t:{K=_;r:for(;;){if(K==null){K=0;break t}if(t(K.s.yc!=null),t(K.s.Ya!=null),t(0<K.s.Wb),t((U=K.l)!=null),t((ne=U.ma)!=null),K.xb!=0){if(K.ca=ne.ba,K.tb=ne.tb,t(K.ca!=null),!Cf(ne.Oa,U,Pw)){K.a=2;break r}if(!Zt(K,U.width)||U.da)break r;if((U.da||St(K.ca.S))&&dl(),11>K.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),K.ca.f.kb.F!=null&&dl()),K.Pb&&0<K.s.ua&&K.s.vb.X==null&&!ee(K.s.vb,K.s.Wa.Xa)){K.a=1;break r}K.xb=0}if(!wi(K,K.V,K.Ba,K.c,K.i,U.o,ka))break r;ne.Dc=K.Ma,K=1;break t}t(K.a!=0),K=0}K=!K}K&&(E=_.a)}else E=_.a}else{if((_=new Cc)==null){de=1;break e}if(_.Fa=ne.na,_.P=ne.P,_.qc=ne.Sa,Io(_,K)){if((E=jd(K.width,K.height,de.Oa,de.ba))==0){if(_.Aa=0,U=de.Oa,t((ne=_)!=null),U!=null){if(0<(ye=0>(ye=U.Md)?0:100<ye?255:255*ye/100)){for(Se=$e=0;4>Se;++Se)12>(et=ne.pb[Se]).lc&&(et.ia=ye*Ofe[0>et.lc?0:et.lc]>>3),$e|=et.ia;$e&&(alert("todo:VP8InitRandom"),ne.ia=1)}ne.Ga=U.Id,100<ne.Ga?ne.Ga=100:0>ne.Ga&&(ne.Ga=0)}(function(_e,Ve){if(_e==null)return 0;if(Ve==null)return Bn(_e,2,"NULL VP8Io parameter in VP8Decode().");if(!_e.cb&&!Io(_e,Ve))return 0;if(t(_e.cb),Ve.ac==null||Ve.ac(Ve)){Ve.ob&&(_e.L=0);var Ye=Dw[_e.L];if(_e.L==2?(_e.yb=0,_e.zb=0):(_e.yb=Ve.v-Ye>>4,_e.zb=Ve.j-Ye>>4,0>_e.yb&&(_e.yb=0),0>_e.zb&&(_e.zb=0)),_e.Va=Ve.o+15+Ye>>4,_e.Hb=Ve.va+15+Ye>>4,_e.Hb>_e.za&&(_e.Hb=_e.za),_e.Va>_e.Ub&&(_e.Va=_e.Ub),0<_e.L){var ft=_e.ed;for(Ye=0;4>Ye;++Ye){var Je;if(_e.Qa.Cb){var xt=_e.Qa.Lb[Ye];_e.Qa.Fb||(xt+=ft.Tb)}else xt=ft.Tb;for(Je=0;1>=Je;++Je){var jt=_e.gd[Ye][Je],Lt=xt;if(ft.Pc&&(Lt+=ft.vd[0],Je&&(Lt+=ft.od[0])),0<(Lt=0>Lt?0:63<Lt?63:Lt)){var Tt=Lt;0<ft.wb&&(Tt=4<ft.wb?Tt>>2:Tt>>1)>9-ft.wb&&(Tt=9-ft.wb),1>Tt&&(Tt=1),jt.dd=Tt,jt.tc=2*Lt+Tt,jt.ld=40<=Lt?2:15<=Lt?1:0}else jt.tc=0;jt.La=Je}}}Ye=0}else Bn(_e,6,"Frame setup failed"),Ye=_e.a;if(Ye=Ye==0){if(Ye){_e.$c=0,0<_e.Aa||(_e.Ic=Rfe);t:{Ye=_e.Ic,ft=4*(Tt=_e.za);var Cr=32*Tt,mr=Tt+1,dn=0<_e.L?Tt*(0<_e.Aa?2:1):0,br=(_e.Aa==2?2:1)*Tt;if((jt=ft+832+(Je=3*(16*Ye+Dw[_e.L])/2*Cr)+(xt=_e.Fa!=null&&0<_e.Fa.length?_e.Kc.c*_e.Kc.i:0))!=jt)Ye=0;else{if(jt>_e.Vb){if(_e.Vb=0,_e.Ec=a(jt),_e.Fc=0,_e.Ec==null){Ye=Bn(_e,1,"no memory during frame initialization.");break t}_e.Vb=jt}jt=_e.Ec,Lt=_e.Fc,_e.Ac=jt,_e.Bc=Lt,Lt+=ft,_e.Gd=o(Cr,pd),_e.Hd=0,_e.rb=o(mr+1,cl),_e.sb=1,_e.wa=dn?o(dn,Li):null,_e.Y=0,_e.D.Nb=0,_e.D.wa=_e.wa,_e.D.Y=_e.Y,0<_e.Aa&&(_e.D.Y+=Tt),t(!0),_e.oc=jt,_e.pc=Lt,Lt+=832,_e.ya=o(br,Zi),_e.aa=0,_e.D.ya=_e.ya,_e.D.aa=_e.aa,_e.Aa==2&&(_e.D.aa+=Tt),_e.R=16*Tt,_e.B=8*Tt,Tt=(Cr=Dw[_e.L])*_e.R,Cr=Cr/2*_e.B,_e.sa=jt,_e.ta=Lt+Tt,_e.qa=_e.sa,_e.ra=_e.ta+16*Ye*_e.R+Cr,_e.Ha=_e.qa,_e.Ia=_e.ra+8*Ye*_e.B+Cr,_e.$c=0,Lt+=Je,_e.mb=xt?jt:null,_e.nb=xt?Lt:null,t(Lt+xt<=_e.Fc+_e.Vb),On(_e),i(_e.Ac,_e.Bc,0,ft),Ye=1}}if(Ye){if(Ve.ka=0,Ve.y=_e.sa,Ve.O=_e.ta,Ve.f=_e.qa,Ve.N=_e.ra,Ve.ea=_e.Ha,Ve.Vd=_e.Ia,Ve.fa=_e.R,Ve.Rc=_e.B,Ve.F=null,Ve.J=0,!Dc){for(Ye=-255;255>=Ye;++Ye)zs[255+Ye]=0>Ye?-Ye:Ye;for(Ye=-1020;1020>=Ye;++Ye)_d[1020+Ye]=-128>Ye?-128:127<Ye?127:Ye;for(Ye=-112;112>=Ye;++Ye)Df[112+Ye]=-16>Ye?-16:15<Ye?15:Ye;for(Ye=-255;510>=Ye;++Ye)Vo[255+Ye]=0>Ye?0:255<Ye?255:Ye;Dc=1}Er=Wa,en=lo,Nn=gd,Nr=Ji,Ar=Ol,Vn=Lo,Hn=pp,gs=ox,Oa=B,Ra=re,Gn=da,fa=gp,fl=Ne,Ul=Me,ql=bd,Rf=Pc,ku=mp,Pu=ax,Cd[0]=Ga,Cd[1]=Rl,Cd[2]=cn,Cd[3]=Ta,Cd[4]=Bo,Cd[5]=ue,Cd[6]=_i,Cd[7]=bt,Cd[8]=wn,Cd[9]=vr,Mf[0]=Ka,Mf[1]=xd,Mf[2]=vd,Mf[3]=Dl,Mf[4]=Ac,Mf[5]=$o,Mf[6]=Ml,Nh[0]=Ya,Nh[1]=Nu,Nh[2]=ui,Nh[3]=ps,Nh[4]=Su,Nh[5]=yd,Nh[6]=_u,Ye=1}else Ye=0}Ye&&(Ye=function(Sn,ma){for(Sn.M=0;Sn.M<Sn.Va;++Sn.M){var un,jr=Sn.Jc[Sn.M&Sn.Xb],Gt=Sn.m,Fi=Sn;for(un=0;un<Fi.za;++un){var nn=Gt,kn=Fi,Hs=kn.Ac,Qa=kn.Bc+4*un,Uo=kn.zc,ki=kn.ya[kn.aa+un];if(kn.Qa.Bb?ki.$b=he(nn,kn.Pa.jb[0])?2+he(nn,kn.Pa.jb[2]):he(nn,kn.Pa.jb[1]):ki.$b=0,kn.kc&&(ki.Ad=he(nn,kn.Bd)),ki.Za=!he(nn,145)+0,ki.Za){var fo=ki.Ob,qo=0;for(kn=0;4>kn;++kn){var pa,Dn=Uo[0+kn];for(pa=0;4>pa;++pa){Dn=vfe[Hs[Qa+pa]][Dn];for(var as=hI[he(nn,Dn[0])];0<as;)as=hI[2*as+he(nn,Dn[as])];Dn=-as,Hs[Qa+pa]=Dn}s(fo,qo,Hs,Qa,4),qo+=4,Uo[0+kn]=Dn}}else Dn=he(nn,156)?he(nn,128)?1:3:he(nn,163)?2:0,ki.Ob[0]=Dn,i(Hs,Qa,Dn,4),i(Uo,0,Dn,4);ki.Dd=he(nn,142)?he(nn,114)?he(nn,183)?1:3:2:0}if(Fi.m.Ka)return Bn(Sn,7,"Premature end-of-partition0 encountered.");for(;Sn.ja<Sn.za;++Sn.ja){if(Fi=jr,nn=(Gt=Sn).rb[Gt.sb-1],Hs=Gt.rb[Gt.sb+Gt.ja],un=Gt.ya[Gt.aa+Gt.ja],Qa=Gt.kc?un.Ad:0)nn.la=Hs.la=0,un.Za||(nn.Na=Hs.Na=0),un.Hc=0,un.Gc=0,un.ia=0;else{var Pi,os;if(nn=Hs,Hs=Fi,Qa=Gt.Pa.Xc,Uo=Gt.ya[Gt.aa+Gt.ja],ki=Gt.pb[Uo.$b],kn=Uo.ad,fo=0,qo=Gt.rb[Gt.sb-1],Dn=pa=0,i(kn,fo,0,384),Uo.Za)var Za=0,Ad=Qa[3];else{as=a(16);var $i=nn.Na+qo.Na;if($i=yy(Hs,Qa[1],$i,ki.Eb,0,as,0),nn.Na=qo.Na=(0<$i)+0,1<$i)Er(as,0,kn,fo);else{var ml=as[0]+3>>3;for(as=0;256>as;as+=16)kn[fo+as]=ml}Za=1,Ad=Qa[0]}var As=15&nn.la,ga=15&qo.la;for(as=0;4>as;++as){var Hl=1&ga;for(ml=os=0;4>ml;++ml)As=As>>1|(Hl=($i=yy(Hs,Ad,$i=Hl+(1&As),ki.Sc,Za,kn,fo))>Za)<<7,os=os<<2|(3<$i?3:1<$i?2:kn[fo+0]!=0),fo+=16;As>>=4,ga=ga>>1|Hl<<7,pa=(pa<<8|os)>>>0}for(Ad=As,Za=ga>>4,Pi=0;4>Pi;Pi+=2){for(os=0,As=nn.la>>4+Pi,ga=qo.la>>4+Pi,as=0;2>as;++as){for(Hl=1&ga,ml=0;2>ml;++ml)$i=Hl+(1&As),As=As>>1|(Hl=0<($i=yy(Hs,Qa[2],$i,ki.Qc,0,kn,fo)))<<3,os=os<<2|(3<$i?3:1<$i?2:kn[fo+0]!=0),fo+=16;As>>=2,ga=ga>>1|Hl<<5}Dn|=os<<4*Pi,Ad|=As<<4<<Pi,Za|=(240&ga)<<Pi}nn.la=Ad,qo.la=Za,Uo.Hc=pa,Uo.Gc=Dn,Uo.ia=43690&Dn?0:ki.ia,Qa=!(pa|Dn)}if(0<Gt.L&&(Gt.wa[Gt.Y+Gt.ja]=Gt.gd[un.$b][un.Za],Gt.wa[Gt.Y+Gt.ja].La|=!Qa),Fi.Ka)return Bn(Sn,7,"Premature end-of-file encountered.")}if(On(Sn),Gt=ma,Fi=1,un=(jr=Sn).D,nn=0<jr.L&&jr.M>=jr.zb&&jr.M<=jr.Va,jr.Aa==0)t:{if(un.M=jr.M,un.uc=nn,hl(jr,un),Fi=1,un=(os=jr.D).Nb,nn=(Dn=Dw[jr.L])*jr.R,Hs=Dn/2*jr.B,as=16*un*jr.R,ml=8*un*jr.B,Qa=jr.sa,Uo=jr.ta-nn+as,ki=jr.qa,kn=jr.ra-Hs+ml,fo=jr.Ha,qo=jr.Ia-Hs+ml,ga=(As=os.M)==0,pa=As>=jr.Va-1,jr.Aa==2&&hl(jr,os),os.uc)for(Hl=($i=jr).D.M,t($i.D.uc),os=$i.yb;os<$i.Hb;++os){Za=os,Ad=Hl;var zo=(Wl=(Ja=$i).D).Nb;Pi=Ja.R;var Wl=Wl.wa[Wl.Y+Za],Kl=Ja.sa,pl=Ja.ta+16*zo*Pi+16*Za,Gl=Wl.dd,Ms=Wl.tc;if(Ms!=0)if(t(3<=Ms),Ja.L==1)0<Za&&Rf(Kl,pl,Pi,Ms+4),Wl.La&&Pu(Kl,pl,Pi,Ms),0<Ad&&ql(Kl,pl,Pi,Ms+4),Wl.La&&ku(Kl,pl,Pi,Ms);else{var Yl=Ja.B,kd=Ja.qa,Np=Ja.ra+8*zo*Yl+8*Za,Sh=Ja.Ha,Ja=Ja.Ia+8*zo*Yl+8*Za;zo=Wl.ld,0<Za&&(gs(Kl,pl,Pi,Ms+4,Gl,zo),Ra(kd,Np,Sh,Ja,Yl,Ms+4,Gl,zo)),Wl.La&&(fa(Kl,pl,Pi,Ms,Gl,zo),Ul(kd,Np,Sh,Ja,Yl,Ms,Gl,zo)),0<Ad&&(Hn(Kl,pl,Pi,Ms+4,Gl,zo),Oa(kd,Np,Sh,Ja,Yl,Ms+4,Gl,zo)),Wl.La&&(Gn(Kl,pl,Pi,Ms,Gl,zo),fl(kd,Np,Sh,Ja,Yl,Ms,Gl,zo))}}if(jr.ia&&alert("todo:DitherRow"),Gt.put!=null){if(os=16*As,As=16*(As+1),ga?(Gt.y=jr.sa,Gt.O=jr.ta+as,Gt.f=jr.qa,Gt.N=jr.ra+ml,Gt.ea=jr.Ha,Gt.W=jr.Ia+ml):(os-=Dn,Gt.y=Qa,Gt.O=Uo,Gt.f=ki,Gt.N=kn,Gt.ea=fo,Gt.W=qo),pa||(As-=Dn),As>Gt.o&&(As=Gt.o),Gt.F=null,Gt.J=null,jr.Fa!=null&&0<jr.Fa.length&&os<As&&(Gt.J=hi(jr,Gt,os,As-os),Gt.F=jr.mb,Gt.F==null&&Gt.F.length==0)){Fi=Bn(jr,3,"Could not decode alpha data.");break t}os<Gt.j&&(Dn=Gt.j-os,os=Gt.j,t(!(1&Dn)),Gt.O+=jr.R*Dn,Gt.N+=jr.B*(Dn>>1),Gt.W+=jr.B*(Dn>>1),Gt.F!=null&&(Gt.J+=Gt.width*Dn)),os<As&&(Gt.O+=Gt.v,Gt.N+=Gt.v>>1,Gt.W+=Gt.v>>1,Gt.F!=null&&(Gt.J+=Gt.v),Gt.ka=os-Gt.j,Gt.U=Gt.va-Gt.v,Gt.T=As-os,Fi=Gt.put(Gt))}un+1!=jr.Ic||pa||(s(jr.sa,jr.ta-nn,Qa,Uo+16*jr.R,nn),s(jr.qa,jr.ra-Hs,ki,kn+8*jr.B,Hs),s(jr.Ha,jr.Ia-Hs,fo,qo+8*jr.B,Hs))}if(!Fi)return Bn(Sn,6,"Output aborted.")}return 1}(_e,Ve)),Ve.bc!=null&&Ve.bc(Ve),Ye&=1}return Ye?(_e.cb=0,Ye):0})(_,K)||(E=_.a)}}else E=_.a}E==0&&de.Oa!=null&&de.Oa.fd&&(E=Af(de.ba))}de=E}ce=de!=0?null:11>ce?pe.f.RGBA.eb:pe.f.kb.y}else ce=null;return ce};var bI=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(A,R){for(var k="",O=0;O<4;O++)k+=String.fromCharCode(A[R++]);return k}function u(A,R){return A[R+0]|A[R+1]<<8}function h(A,R){return(A[R+0]|A[R+1]<<8|A[R+2]<<16)>>>0}function f(A,R){return(A[R+0]|A[R+1]<<8|A[R+2]<<16|A[R+3]<<24)>>>0}new c;var m=[0],p=[0],g=[],v=new c,x=e,y=function(A,R){var k={},O=0,$=!1,D=0,q=0;if(k.frames=[],!function(F,W){for(var G=0;G<4;G++)if(F[W+G]!="RIFF".charCodeAt(G))return!0;return!1}(A,R)){for(f(A,R+=4),R+=8;R<A.length;){var M=d(A,R),L=f(A,R+=4);R+=4;var V=L+(1&L);switch(M){case"VP8 ":case"VP8L":k.frames[O]===void 0&&(k.frames[O]={}),(Z=k.frames[O]).src_off=$?q:R-8,Z.src_size=D+L+8,O++,$&&($=!1,D=0,q=0);break;case"VP8X":(Z=k.header={}).feature_flags=A[R];var P=R+4;Z.canvas_width=1+h(A,P),P+=3,Z.canvas_height=1+h(A,P),P+=3;break;case"ALPH":$=!0,D=V+8,q=R-8;break;case"ANIM":(Z=k.header).bgcolor=f(A,R),P=R+4,Z.loop_count=u(A,P),P+=2;break;case"ANMF":var z,Z;(Z=k.frames[O]={}).offset_x=2*h(A,R),R+=3,Z.offset_y=2*h(A,R),R+=3,Z.width=1+h(A,R),R+=3,Z.height=1+h(A,R),R+=3,Z.duration=h(A,R),R+=3,z=A[R++],Z.dispose=1&z,Z.blend=z>>1&1}M!="ANMF"&&(R+=V)}return k}}(x,0);y.response=x,y.rgbaoutput=!0,y.dataurl=!1;var j=y.header?y.header:null,w=y.frames?y.frames:null;if(j){j.loop_counter=j.loop_count,m=[j.canvas_height],p=[j.canvas_width];for(var N=0;N<w.length&&w[N].blend!=0;N++);}var S=w[0],T=v.WebPDecodeRGBA(x,S.src_off,S.src_size,p,m);S.rgba=T,S.imgwidth=p[0],S.imgheight=m[0];for(var C=0;C<p[0]*m[0]*4;C++)g[C]=T[C];return this.width=p,this.height=m,this.data=g,this}(function(e){var t,n,s,i,a,o,l,c,d,u=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new o,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new o,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=F;Object.defineProperty(this,"pdf",{get:function(){return W}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(ve){G=!!ve}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(ve){H=!!ve}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(ve){isNaN(ve)||(se=ve)}});var J=0;Object.defineProperty(this,"posY",{get:function(){return J},set:function(ve){isNaN(ve)||(J=ve)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ve){var ee;typeof ve=="number"?ee=[ve,ve,ve,ve]:((ee=new Array(4))[0]=ve[0],ee[1]=ve.length>=2?ve[1]:ee[0],ee[2]=ve.length>=3?ve[2]:ee[0],ee[3]=ve.length>=4?ve[3]:ee[1]),d.margin=ee}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(ve){ie=ve}});var X=0;Object.defineProperty(this,"lastBreak",{get:function(){return X},set:function(ve){X=ve}});var he=[];Object.defineProperty(this,"pageBreaks",{get:function(){return he},set:function(ve){he=ve}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ve){ve instanceof u&&(d=ve)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ve){d.path=ve}});var fe=[];Object.defineProperty(this,"ctxStack",{get:function(){return fe},set:function(ve){fe=ve}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ve){var ee;ee=f(ve),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ve){var ee=f(ve);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ve){["butt","round","square"].indexOf(ve)!==-1&&(this.ctx.lineCap=ve,this.pdf.setLineCap(ve))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ve){isNaN(ve)||(this.ctx.lineWidth=ve,this.pdf.setLineWidth(ve))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ve){["bevel","round","miter"].indexOf(ve)!==-1&&(this.ctx.lineJoin=ve,this.pdf.setLineJoin(ve))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ve){isNaN(ve)||(this.ctx.miterLimit=ve,this.pdf.setMiterLimit(ve))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ve){this.ctx.textBaseline=ve}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ve){["right","end","center","left","start"].indexOf(ve)!==-1&&(this.ctx.textAlign=ve)}});var Q=null,Oe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Oe},set:function(ve){Q=null,Oe=ve}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ve){var ee;if(this.ctx.font=ve,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ve))!==null){var Ee=ee[1];ee[2];var Re=ee[3],oe=ee[4];ee[5];var De=ee[6],tt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(oe)[2];oe=Math.floor(tt==="px"?parseFloat(oe)*this.pdf.internal.scaleFactor:tt==="em"?parseFloat(oe)*this.pdf.getFontSize():parseFloat(oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(oe);var Qe=function(nt){var Y,Ct,Vt=[],pt=nt.trim();if(pt==="")return b4;if(pt in R$)return[R$[pt]];for(;pt!=="";){switch(Ct=null,Y=(pt=M$(pt)).charAt(0)){case'"':case"'":Ct=YTe(pt.substring(1),Y);break;default:Ct=XTe(pt)}if(Ct===null||(Vt.push(Ct[0]),(pt=M$(Ct[1]))!==""&&pt.charAt(0)!==","))return b4;pt=pt.replace(/^,/,"")}return Vt}(De);if(this.fontFaces){var xe=function(nt,Y){if(Q===null){var Ct=function(Vt){var pt=[];return Object.keys(Vt).forEach(function(Ht){Vt[Ht].forEach(function(wr){var wt=null;switch(wr){case"bold":wt={family:Ht,weight:"bold"};break;case"italic":wt={family:Ht,style:"italic"};break;case"bolditalic":wt={family:Ht,weight:"bold",style:"italic"};break;case"":case"normal":wt={family:Ht}}wt!==null&&(wt.ref={name:Ht,style:wr},pt.push(wt))})}),pt}(nt.getFontList());Q=function(Vt){for(var pt={},Ht=0;Ht<Vt.length;++Ht){var wr=y4(Vt[Ht]),wt=wr.family,Ut=wr.stretch,St=wr.style,Be=wr.weight;pt[wt]=pt[wt]||{},pt[wt][Ut]=pt[wt][Ut]||{},pt[wt][Ut][St]=pt[wt][Ut][St]||{},pt[wt][Ut][St][Be]=wr}return pt}(Ct.concat(Y))}return Q}(this.pdf,this.fontFaces),ae=Qe.map(function(nt){return{family:nt,stretch:"normal",weight:Re,style:Ee}}),we=function(nt,Y,Ct){for(var Vt=(Ct=Ct||{}).defaultFontFamily||"times",pt=Object.assign({},GTe,Ct.genericFontFamilies||{}),Ht=null,wr=null,wt=0;wt<Y.length;++wt)if(pt[(Ht=y4(Y[wt])).family]&&(Ht.family=pt[Ht.family]),nt.hasOwnProperty(Ht.family)){wr=nt[Ht.family];break}if(!(wr=wr||nt[Vt]))throw new Error("Could not find a font-family for the rule '"+D$(Ht)+"' and default family '"+Vt+"'.");if(wr=function(Ut,St){if(St[Ut])return St[Ut];var Be=PT[Ut],lr=Be<=PT.normal?-1:1,Wt=O$(St,_se,Be,lr);if(!Wt)throw new Error("Could not find a matching font-stretch value for "+Ut);return Wt}(Ht.stretch,wr),wr=function(Ut,St){if(St[Ut])return St[Ut];for(var Be=Sse[Ut],lr=0;lr<Be.length;++lr)if(St[Be[lr]])return St[Be[lr]];throw new Error("Could not find a matching font-style for "+Ut)}(Ht.style,wr),!(wr=function(Ut,St){if(St[Ut])return St[Ut];if(Ut===400&&St[500])return St[500];if(Ut===500&&St[400])return St[400];var Be=KTe[Ut],lr=O$(St,Cse,Be,Ut<400?-1:1);if(!lr)throw new Error("Could not find a matching font-weight for value "+Ut);return lr}(Ht.weight,wr)))throw new Error("Failed to resolve a font for the rule '"+D$(Ht)+"'.");return wr}(xe,ae);this.pdf.setFont(we.ref.name,we.ref.style)}else{var Te="";(Re==="bold"||parseInt(Re,10)>=700||Ee==="bold")&&(Te="bold"),Ee==="italic"&&(Te+="italic"),Te.length===0&&(Te="normal");for(var qe="",Ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ge=0;Ge<Qe.length;Ge++){if(this.pdf.internal.getFont(Qe[Ge],Te,{noFallback:!0,disableWarning:!0})!==void 0){qe=Qe[Ge];break}if(Te==="bolditalic"&&this.pdf.internal.getFont(Qe[Ge],"bold",{noFallback:!0,disableWarning:!0})!==void 0)qe=Qe[Ge],Te="bold";else if(this.pdf.internal.getFont(Qe[Ge],"normal",{noFallback:!0,disableWarning:!0})!==void 0){qe=Qe[Ge],Te="normal";break}}if(qe===""){for(var He=0;He<Qe.length;He++)if(Ke[Qe[He]]){qe=Ke[Qe[He]];break}}qe=qe===""?"Times":qe,this.pdf.setFont(qe,Te)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ve){this.ctx.globalCompositeOperation=ve}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ve){this.ctx.globalAlpha=ve}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ve){this.ctx.lineDashOffset=ve,Z.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ve){this.ctx.lineDash=ve,Z.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ve){this.ctx.ignoreClearRect=!!ve}})};h.prototype.setLineDash=function(F){this.lineDash=F},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){w.call(this,"fill",!1)},h.prototype.stroke=function(){w.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(F,W){if(isNaN(F)||isNaN(W))throw ks.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(F,W));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(F,W)},h.prototype.closePath=function(){var F=new o(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&cs(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){F=new o(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(F.x,F.y)},h.prototype.lineTo=function(F,W){if(isNaN(F)||isNaN(W))throw ks.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(F,W));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},h.prototype.quadraticCurveTo=function(F,W,G,H){if(isNaN(G)||isNaN(H)||isNaN(F)||isNaN(W))throw ks.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new o(G,H)),J=this.ctx.transform.applyToPoint(new o(F,W));this.path.push({type:"qct",x1:J.x,y1:J.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.bezierCurveTo=function(F,W,G,H,se,J){if(isNaN(se)||isNaN(J)||isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H))throw ks.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new o(se,J)),X=this.ctx.transform.applyToPoint(new o(F,W)),he=this.ctx.transform.applyToPoint(new o(G,H));this.path.push({type:"bct",x1:X.x,y1:X.y,x2:he.x,y2:he.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},h.prototype.arc=function(F,W,G,H,se,J){if(isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H)||isNaN(se))throw ks.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(J=!!J,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new o(F,W));F=ie.x,W=ie.y;var X=this.ctx.transform.applyToPoint(new o(0,G)),he=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(X.x-he.x,2)+Math.pow(X.y-he.y,2))}Math.abs(se-H)>=2*Math.PI&&(H=0,se=2*Math.PI),this.path.push({type:"arc",x:F,y:W,radius:G,startAngle:H,endAngle:se,counterclockwise:J})},h.prototype.arcTo=function(F,W,G,H,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(F,W,G,H){if(isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H))throw ks.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,W),this.lineTo(F+G,W),this.lineTo(F+G,W+H),this.lineTo(F,W+H),this.lineTo(F,W),this.lineTo(F+G,W),this.lineTo(F,W)},h.prototype.fillRect=function(F,W,G,H){if(isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H))throw ks.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,W,G,H),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(F,W,G,H){if(isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H))throw ks.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(F,W,G,H),this.stroke())},h.prototype.clearRect=function(F,W,G,H){if(isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H))throw ks.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,W,G,H))},h.prototype.save=function(F){F=typeof F!="boolean"||F;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},h.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(W),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(F){var W,G,H,se;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))W=0,G=0,H=0,se=0;else{var J=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(J!==null)W=parseInt(J[1]),G=parseInt(J[2]),H=parseInt(J[3]),se=1;else if((J=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)W=parseInt(J[1]),G=parseInt(J[2]),H=parseInt(J[3]),se=parseFloat(J[4]);else{if(se=1,typeof F=="string"&&F.charAt(0)!=="#"){var ie=new xse(F);F=ie.ok?ie.toHex():"#000000"}F.length===4?(W=F.substring(1,2),W+=W,G=F.substring(2,3),G+=G,H=F.substring(3,4),H+=H):(W=F.substring(1,3),G=F.substring(3,5),H=F.substring(5,7)),W=parseInt(W,16),G=parseInt(G,16),H=parseInt(H,16)}}return{r:W,g:G,b:H,a:se,style:F}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},p=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(F,W,G,H){if(isNaN(W)||isNaN(G)||typeof F!="string")throw ks.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!m.call(this)){var se=V(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;O.call(this,{text:F,x:W,y:G,scale:J,angle:se,align:this.textAlign,maxWidth:H})}},h.prototype.strokeText=function(F,W,G,H){if(isNaN(W)||isNaN(G)||typeof F!="string")throw ks.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){H=isNaN(H)?void 0:H;var se=V(this.ctx.transform.rotation),J=this.ctx.transform.scaleX;O.call(this,{text:F,x:W,y:G,scale:J,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:H})}},h.prototype.measureText=function(F){if(typeof F!="string")throw ks.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,G=this.pdf.internal.scaleFactor,H=W.internal.getFontSize(),se=W.getStringUnitWidth(F)*H/W.internal.scaleFactor;return new function(J){var ie=(J=J||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this}({width:se*=Math.round(96*G/72*1e4)/1e4})},h.prototype.scale=function(F,W){if(isNaN(F)||isNaN(W))throw ks.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(F,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},h.prototype.rotate=function(F){if(isNaN(F))throw ks.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},h.prototype.translate=function(F,W){if(isNaN(F)||isNaN(W))throw ks.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,F,W);this.ctx.transform=this.ctx.transform.multiply(G)},h.prototype.transform=function(F,W,G,H,se,J){if(isNaN(F)||isNaN(W)||isNaN(G)||isNaN(H)||isNaN(se)||isNaN(J))throw ks.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(F,W,G,H,se,J);this.ctx.transform=this.ctx.transform.multiply(ie)},h.prototype.setTransform=function(F,W,G,H,se,J){F=isNaN(F)?1:F,W=isNaN(W)?0:W,G=isNaN(G)?0:G,H=isNaN(H)?1:H,se=isNaN(se)?0:se,J=isNaN(J)?0:J,this.ctx.transform=new c(F,W,G,H,se,J)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(F,W,G,H,se,J,ie,X,he){var fe=this.pdf.getImageProperties(F),Q=1,Oe=1,ve=1,ee=1;H!==void 0&&X!==void 0&&(ve=X/H,ee=he/se,Q=fe.width/H*X/H,Oe=fe.height/se*he/se),J===void 0&&(J=W,ie=G,W=0,G=0),H!==void 0&&X===void 0&&(X=H,he=se),H===void 0&&X===void 0&&(X=fe.width,he=fe.height);for(var Ee,Re=this.ctx.transform.decompose(),oe=V(Re.rotate.shx),De=new c,tt=(De=(De=(De=De.multiply(Re.translate)).multiply(Re.skew)).multiply(Re.scale)).applyToRectangle(new l(J-W*ve,ie-G*ee,H*Q,se*Oe)),Qe=v.call(this,tt),xe=[],ae=0;ae<Qe.length;ae+=1)xe.indexOf(Qe[ae])===-1&&xe.push(Qe[ae]);if(j(xe),this.autoPaging)for(var we=xe[0],Te=xe[xe.length-1],qe=we;qe<Te+1;qe++){this.pdf.setPage(qe);var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=qe===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Y=qe===1?0:He+(qe-2)*nt;if(this.ctx.clip_path.length!==0){var Ct=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Ee,this.posX+this.margin[3],-Y+Ge+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=Ct}var Vt=JSON.parse(JSON.stringify(tt));Vt=y([Vt],this.posX+this.margin[3],-Y+Ge+this.ctx.prevPageLastElemOffset)[0];var pt=(qe>we||qe<Te)&&g.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,nt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,oe),pt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",tt.x,tt.y,tt.w,tt.h,null,null,oe)};var v=function(F,W,G){var H=[];W=W||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":H.push(Math.floor((F.y+se)/G)+1);break;case"arc":H.push(Math.floor((F.y+se-F.radius)/G)+1),H.push(Math.floor((F.y+se+F.radius)/G)+1);break;case"qct":var J=P(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);H.push(Math.floor((J.y+se)/G)+1),H.push(Math.floor((J.y+J.h+se)/G)+1);break;case"bct":var ie=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);H.push(Math.floor((ie.y+se)/G)+1),H.push(Math.floor((ie.y+ie.h+se)/G)+1);break;case"rect":H.push(Math.floor((F.y+se)/G)+1),H.push(Math.floor((F.y+F.h+se)/G)+1)}for(var X=0;X<H.length;X+=1)for(;this.pdf.internal.getNumberOfPages()<H[X];)x.call(this);return H},x=function(){var F=this.fillStyle,W=this.strokeStyle,G=this.font,H=this.lineCap,se=this.lineWidth,J=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=W,this.font=G,this.lineCap=H,this.lineWidth=se,this.lineJoin=J},y=function(F,W,G){for(var H=0;H<F.length;H++)switch(F[H].type){case"bct":F[H].x2+=W,F[H].y2+=G;case"qct":F[H].x1+=W,F[H].y1+=G;default:F[H].x+=W,F[H].y+=G}return F},j=function(F){return F.sort(function(W,G){return W-G})},w=function(F,W){for(var G,H,se=this.fillStyle,J=this.strokeStyle,ie=this.lineCap,X=this.lineWidth,he=Math.abs(X*this.ctx.transform.scaleX),fe=this.lineJoin,Q=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),ve=[],ee=0;ee<Oe.length;ee++)if(Oe[ee].x!==void 0)for(var Ee=v.call(this,Oe[ee]),Re=0;Re<Ee.length;Re+=1)ve.indexOf(Ee[Re])===-1&&ve.push(Ee[Re]);for(var oe=0;oe<ve.length;oe++)for(;this.pdf.internal.getNumberOfPages()<ve[oe];)x.call(this);if(j(ve),this.autoPaging)for(var De=ve[0],tt=ve[ve.length-1],Qe=De;Qe<tt+1;Qe++){this.pdf.setPage(Qe),this.fillStyle=se,this.strokeStyle=J,this.lineCap=ie,this.lineWidth=he,this.lineJoin=fe;var xe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ae=Qe===1?this.posY+this.margin[0]:this.margin[0],we=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Te=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=Qe===1?0:we+(Qe-2)*Te;if(this.ctx.clip_path.length!==0){var Ke=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(G,this.posX+this.margin[3],-qe+ae+this.ctx.prevPageLastElemOffset),N.call(this,F,!0),this.path=Ke}if(H=JSON.parse(JSON.stringify(Q)),this.path=y(H,this.posX+this.margin[3],-qe+ae+this.ctx.prevPageLastElemOffset),W===!1||Qe===0){var Ge=(Qe>De||Qe<tt)&&g.call(this);Ge&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xe,Te,null).clip().discardPath()),N.call(this,F,W),Ge&&this.pdf.restoreGraphicsState()}this.lineWidth=X}else this.lineWidth=he,N.call(this,F,W),this.lineWidth=X;this.path=Q},N=function(F,W){if((F!=="stroke"||W||!p.call(this))&&(F==="stroke"||W||!m.call(this))){for(var G,H,se=[],J=this.path,ie=0;ie<J.length;ie++){var X=J[ie];switch(X.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:X,deltas:[],abs:[]});break;case"lt":var he=se.length;if(J[ie-1]&&!isNaN(J[ie-1].x)&&(G=[X.x-J[ie-1].x,X.y-J[ie-1].y],he>0)){for(;he>=0;he--)if(se[he-1].close!==!0&&se[he-1].begin!==!0){se[he-1].deltas.push(G),se[he-1].abs.push(X);break}}break;case"bct":G=[X.x1-J[ie-1].x,X.y1-J[ie-1].y,X.x2-J[ie-1].x,X.y2-J[ie-1].y,X.x-J[ie-1].x,X.y-J[ie-1].y],se[se.length-1].deltas.push(G);break;case"qct":var fe=J[ie-1].x+2/3*(X.x1-J[ie-1].x),Q=J[ie-1].y+2/3*(X.y1-J[ie-1].y),Oe=X.x+2/3*(X.x1-X.x),ve=X.y+2/3*(X.y1-X.y),ee=X.x,Ee=X.y;G=[fe-J[ie-1].x,Q-J[ie-1].y,Oe-J[ie-1].x,ve-J[ie-1].y,ee-J[ie-1].x,Ee-J[ie-1].y],se[se.length-1].deltas.push(G);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(X)}}H=W?null:F==="stroke"?"stroke":"fill";for(var Re=!1,oe=0;oe<se.length;oe++)if(se[oe].arc)for(var De=se[oe].abs,tt=0;tt<De.length;tt++){var Qe=De[tt];Qe.type==="arc"?C.call(this,Qe.x,Qe.y,Qe.radius,Qe.startAngle,Qe.endAngle,Qe.counterclockwise,void 0,W,!Re):$.call(this,Qe.x,Qe.y),Re=!0}else if(se[oe].close===!0)this.pdf.internal.out("h"),Re=!1;else if(se[oe].begin!==!0){var xe=se[oe].start.x,ae=se[oe].start.y;D.call(this,se[oe].deltas,xe,ae),Re=!0}H&&A.call(this,H),W&&R.call(this)}},S=function(F){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-G;case"top":return F+W-G;case"hanging":return F+W-2*G;case"middle":return F+W/2-G;default:return F}},T=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(W,G){this.colorStops.push([W,G])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(F,W,G,H,se,J,ie,X,he){for(var fe=M.call(this,G,H,se,J),Q=0;Q<fe.length;Q++){var Oe=fe[Q];Q===0&&(he?k.call(this,Oe.x1+F,Oe.y1+W):$.call(this,Oe.x1+F,Oe.y1+W)),q.call(this,F,W,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}X?R.call(this):A.call(this,ie)},A=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(F,W){this.pdf.internal.out(n(F)+" "+s(W)+" m")},O=function(F){var W;switch(F.align){case"right":case"end":W="right";break;case"center":W="center";break;default:W="left"}var G=this.pdf.getTextDimensions(F.text),H=S.call(this,F.y),se=T.call(this,H)-G.h,J=this.ctx.transform.applyToPoint(new o(F.x,H)),ie=this.ctx.transform.decompose(),X=new c;X=(X=(X=X.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var he,fe,Q,Oe=this.ctx.transform.applyToRectangle(new l(F.x,H,G.w,G.h)),ve=X.applyToRectangle(new l(F.x,se,G.w,G.h)),ee=v.call(this,ve),Ee=[],Re=0;Re<ee.length;Re+=1)Ee.indexOf(ee[Re])===-1&&Ee.push(ee[Re]);if(j(Ee),this.autoPaging)for(var oe=Ee[0],De=Ee[Ee.length-1],tt=oe;tt<De+1;tt++){this.pdf.setPage(tt);var Qe=tt===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ae=this.pdf.internal.pageSize.height-this.margin[2],we=ae-this.margin[0],Te=this.pdf.internal.pageSize.width-this.margin[1],qe=Te-this.margin[3],Ke=tt===1?0:xe+(tt-2)*we;if(this.ctx.clip_path.length!==0){var Ge=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(he,this.posX+this.margin[3],-1*Ke+Qe),N.call(this,"fill",!0),this.path=Ge}var He=y([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-Ke+Qe+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*F.scale),Q=this.lineWidth,this.lineWidth=Q*F.scale);var nt=this.autoPaging!=="text";if(nt||He.y+He.h<=ae){if(nt||He.y>=Qe&&He.x<=Te){var Y=nt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Te-He.x)[0],Ct=y([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Ke+Qe+this.ctx.prevPageLastElemOffset)[0],Vt=nt&&(tt>oe||tt<De)&&g.call(this);Vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,we,null).clip().discardPath()),this.pdf.text(Y,Ct.x,Ct.y,{angle:F.angle,align:W,renderingMode:F.renderingMode}),Vt&&this.pdf.restoreGraphicsState()}}else He.y<ae&&(this.ctx.prevPageLastElemOffset+=ae-He.y);F.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=Q)}else F.scale>=.01&&(fe=this.pdf.internal.getFontSize(),this.pdf.setFontSize(fe*F.scale),Q=this.lineWidth,this.lineWidth=Q*F.scale),this.pdf.text(F.text,J.x+this.posX,J.y+this.posY,{angle:F.angle,align:W,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(fe),this.lineWidth=Q)},$=function(F,W,G,H){G=G||0,H=H||0,this.pdf.internal.out(n(F+G)+" "+s(W+H)+" l")},D=function(F,W,G){return this.pdf.lines(F,W,G,null,null)},q=function(F,W,G,H,se,J,ie,X){this.pdf.internal.out([t(i(G+F)),t(a(H+W)),t(i(se+F)),t(a(J+W)),t(i(ie+F)),t(a(X+W)),"c"].join(" "))},M=function(F,W,G,H){for(var se=2*Math.PI,J=Math.PI/2;W>G;)W-=se;var ie=Math.abs(G-W);ie<se&&H&&(ie=se-ie);for(var X=[],he=H?-1:1,fe=W;ie>1e-5;){var Q=fe+he*Math.min(ie,J);X.push(L.call(this,F,fe,Q)),ie-=Math.abs(Q-fe),fe=Q}return X},L=function(F,W,G){var H=(G-W)/2,se=F*Math.cos(H),J=F*Math.sin(H),ie=se,X=-J,he=ie*ie+X*X,fe=he+ie*se+X*J,Q=4/3*(Math.sqrt(2*he*fe)-fe)/(ie*J-X*se),Oe=ie-Q*X,ve=X+Q*ie,ee=Oe,Ee=-ve,Re=H+W,oe=Math.cos(Re),De=Math.sin(Re);return{x1:F*Math.cos(W),y1:F*Math.sin(W),x2:Oe*oe-ve*De,y2:Oe*De+ve*oe,x3:ee*oe-Ee*De,y3:ee*De+Ee*oe,x4:F*Math.cos(G),y4:F*Math.sin(G)}},V=function(F){return 180*F/Math.PI},P=function(F,W,G,H,se,J){var ie=F+.5*(G-F),X=W+.5*(H-W),he=se+.5*(G-se),fe=J+.5*(H-J),Q=Math.min(F,se,ie,he),Oe=Math.max(F,se,ie,he),ve=Math.min(W,J,X,fe),ee=Math.max(W,J,X,fe);return new l(Q,ve,Oe-Q,ee-ve)},z=function(F,W,G,H,se,J,ie,X){var he,fe,Q,Oe,ve,ee,Ee,Re,oe,De,tt,Qe,xe,ae,we=G-F,Te=H-W,qe=se-G,Ke=J-H,Ge=ie-se,He=X-J;for(fe=0;fe<41;fe++)oe=(Ee=(Q=F+(he=fe/40)*we)+he*((ve=G+he*qe)-Q))+he*(ve+he*(se+he*Ge-ve)-Ee),De=(Re=(Oe=W+he*Te)+he*((ee=H+he*Ke)-Oe))+he*(ee+he*(J+he*He-ee)-Re),fe==0?(tt=oe,Qe=De,xe=oe,ae=De):(tt=Math.min(tt,oe),Qe=Math.min(Qe,De),xe=Math.max(xe,oe),ae=Math.max(ae,De));return new l(Math.round(tt),Math.round(Qe),Math.round(xe-tt),Math.round(ae-Qe))},Z=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,W,G=(F=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:W}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(Sr.API),function(e){var t=function(o){var l,c,d,u,h,f,m,p,g,v;for(c=[],d=0,u=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;u>d;d+=4)(h=(o.charCodeAt(d)<<24)+(o.charCodeAt(d+1)<<16)+(o.charCodeAt(d+2)<<8)+o.charCodeAt(d+3))!==0?(f=(h=((h=((h=((h=(h-(v=h%85))/85)-(g=h%85))/85)-(p=h%85))/85)-(m=h%85))/85)%85,c.push(f+33,m+33,p+33,g+33,v+33)):c.push(122);return function(x,y){for(var j=y;j>0;j--)x.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},n=function(o){var l,c,d,u,h,f=String,m="length",p=255,g="charCodeAt",v="slice",x="replace";for(o[v](-2),o=o[v](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),d=[],u=0,h=(o+=l="uuuuu"[v](o[m]%5||5))[m];h>u;u+=5)c=52200625*(o[g](u)-33)+614125*(o[g](u+1)-33)+7225*(o[g](u+2)-33)+85*(o[g](u+3)-33)+(o[g](u+4)-33),d.push(p&c>>24,p&c>>16,p&c>>8,p&c);return function(y,j){for(var w=j;w>0;w--)y.pop()}(d,l[m]),f.fromCharCode.apply(f,d)},s=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var c="",d=0;d<o.length;d+=2)c+=String.fromCharCode("0x"+(o[d]+o[d+1]));return c},a=function(o){for(var l=new Uint8Array(o.length),c=o.length;c--;)l[c]=o.charCodeAt(c);return(l=wT(l)).reduce(function(d,u){return d+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,l){var c=0,d=o||"",u=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":d=n(d),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=i(d),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=s(d),u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=a(d),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:d,reverseChain:u.reverse().join(" ")}}}(Sr.API),function(e){e.loadFile=function(t,n,s){return function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,f=0,m=function(p){var g=p.length,v=[],x=String.fromCharCode;for(f=0;f<g;f+=1)v.push(x(255&p.charCodeAt(f)));return v.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(m(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return m(h.responseText)}(i,a,o)}catch{}return l}(t,n,s)},e.loadImageFile=e.loadFile}(Sr.API),function(e){function t(){return(Yr.html2canvas?Promise.resolve(Yr.html2canvas):t4(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function n(){return(Yr.DOMPurify?Promise.resolve(Yr.DOMPurify):t4(()=>import("./purify.es-B6FQ9oRL.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var s=function(l){var c=cs(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},i=function(l,c){var d=document.createElement(l);for(var u in c.className&&(d.className=c.className),c.innerHTML&&c.dompurify&&(d.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)d.style[u]=c.style[u];return d},a=function l(c,d){for(var u=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),h=c.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||u.appendChild(l(h,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(u.width=c.width,u.height=c.height,u.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(u.value=c.value),u.addEventListener("load",function(){u.scrollTop=c.scrollTop,u.scrollLeft=c.scrollLeft},!0)),u},o=function l(c){var d=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),u=l.convert(Promise.resolve(),d);return(u=u.setProgress(1,l,1,[l])).set(c)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,c){return l.__proto__=c||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l),c){case"string":return this.then(n).then(function(d){return this.set({src:i("div",{innerHTML:l,dompurify:d})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,c(this.prop.container,d)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var d=this.opt.jsPDF,u=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],g=p.src.find(function(v){return v.format==="truetype"});g&&d.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,d.context2d.save(!0),c(this.prop.container,f)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,c,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},o.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(s(l)!=="object")return this;var c=Object.keys(l||{}).map(function(d){if(d in o.template.prop)return function(){this.prop[d]=l[d]};switch(d){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[d]=l[d]}}},this);return this.then(function(){return this.thenList(c)})},o.prototype.get=function(l,c){return this.then(function(){var d=l in o.template.prop?this.prop[l]:this.opt[l];return c?c(d):d})},o.prototype.setMargin=function(l){return this.then(function(){switch(s(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function c(d,u){return Math.floor(d*u/72*96)}return this.then(function(){(l=l||Sr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,c,d,u){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),d!=null&&(this.progress.n=d),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,c,d,u){return this.setProgress(l?this.progress.val+l:null,c||null,d?this.progress.n+d:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(l,c){var d=this;return this.thenCore(l,c,function(u,h){return d.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return d.updateProgress(null,u),f}).then(u,h).then(function(f){return d.updateProgress(1),f})})},o.prototype.thenCore=function(l,c,d){d=d||Promise.prototype.then;var u=this;l&&(l=l.bind(u)),c&&(c=c.bind(u));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?u:o.convert(Object.assign({},u),Promise.prototype),f=d.call(h,l,c);return o.convert(f,u.__proto__)},o.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},o.prototype.thenList=function(l){var c=this;return l.forEach(function(d){c=c.thenCore(d)}),c},o.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return o.convert(c,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Sr.getPageSize=function(l,c,d){if(cs(l)==="object"){var u=l;l=u.orientation,c=u.unit||c,d=u.format||d}c=c||"mm",d=d||"a4",l=(""+(l||"P")).toLowerCase();var h,f=(""+d).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+c}var p,g=0,v=0;if(m.hasOwnProperty(f))g=m[f][1]/h,v=m[f][0]/h;else try{g=d[1],v=d[0]}catch{throw new Error("Invalid format: "+d)}if(l==="p"||l==="portrait")l="p",v>g&&(p=v,v=g,g=p);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",g>v&&(p=v,v=g,g=p)}return{width:v,height:g,unit:c,k:h,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(y4):null;var d=new o(c);return c.worker?d:d.from(l).doCallback()}}(Sr.API),Sr.API.addJS=function(e){return L$=e,this.internal.events.subscribe("postPutResources",function(){E2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(E2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),I$=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+L$+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){E2!==void 0&&I$!==void 0&&this.internal.out("/Names <</JavaScript "+E2+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=s.exec(o);if(l!=null){var c=l[1];n.internal.newObjectDeferredBegin(c,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(a=0;a<d;a++){var h=n.internal.newObject();u.push(h);var f=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<u.length;a++)n.internal.write("(page_"+(a+1)+")"+u[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(s,i,a){var o={title:i,options:a,children:[]};return s==null&&(s=this.root),s.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(s){s.id=n.internal.newObjectDeferred();for(var i=0;i<s.children.length;i++)this.genIds_r(s.children[i])},n.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},n.outline.renderItems=function(s){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<s.children.length;a++){var o=s.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(s)),a>0&&this.line("/Prev "+this.makeRef(s.children[a-1])),a<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var d=0;d<s.children.length;d++)this.renderItems(s.children[d])},n.outline.line=function(s){this.ctx.val+=s+`\r
`},n.outline.makeRef=function(s){return s.id+" 0 R"},n.outline.makeString=function(s){return"("+n.internal.pdfEscape(s)+")"},n.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(s,i){for(var a=0;a<i.children.length;a++)s.count++,this.count_r(s,i.children[a]);return s.count}}])}(Sr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,s,i,a,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,c=function(h){for(var f,m=256*h.charCodeAt(4)+h.charCodeAt(5),p=h.length,g={width:0,height:0,numcomponents:1},v=4;v<p;v+=2){if(v+=m,t.indexOf(h.charCodeAt(v+1))!==-1){f=256*h.charCodeAt(v+5)+h.charCodeAt(v+6),g={width:256*h.charCodeAt(v+7)+h.charCodeAt(v+8),height:f,numcomponents:h.charCodeAt(v+9)};break}m=256*h.charCodeAt(v+2)+h.charCodeAt(v+3)}return g}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),c.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:n,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:s,alias:i}}return u}}(Sr.API),Sr.API.processPNG=function(e,t,n,s){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=RTe(e,{checkCrc:!0}),o=a.width,l=a.height,c=a.channels,d=a.palette,u=a.depth;i=d&&c===1?function(C){for(var A=C.width,R=C.height,k=C.data,O=C.palette,$=C.depth,D=!1,q=[],M=[],L=void 0,V=!1,P=0,z=0;z<O.length;z++){var Z=V7(O[z],4),F=Z[0],W=Z[1],G=Z[2],H=Z[3];q.push(F,W,G),H!=null&&(H===0?(P++,M.length<1&&M.push(z)):H<255&&(V=!0))}if(V||P>1){D=!0,M=void 0;var se=A*R;L=new Uint8Array(se);for(var J=new DataView(k.buffer),ie=0;ie<se;ie++){var X=j4(J,ie,$),he=V7(O[X],4)[3];L[ie]=he}}else P===0&&(M=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:D?8:void 0,colorBytes:k,alphaBytes:L,needSMask:D,palette:q,mask:M}}(a):c===2||c===4?function(C){for(var A=C.data,R=C.width,k=C.height,O=C.channels,$=C.depth,D=O===2?"DeviceGray":"DeviceRGB",q=O-1,M=R*k,L=q,V=M*L,P=1*M,z=Math.ceil(V*$/8),Z=Math.ceil(P*$/8),F=new Uint8Array(z),W=new Uint8Array(Z),G=new DataView(A.buffer),H=new DataView(F.buffer),se=new DataView(W.buffer),J=!1,ie=0;ie<M;ie++){for(var X=ie*O,he=0;he<L;he++)W$(H,j4(G,X+he,$),ie*L+he,$);var fe=j4(G,X+L,$);fe<(1<<$)-1&&(J=!0),W$(se,fe,1*ie,$)}return{colorSpace:D,colorsPerPixel:q,sMaskBitsPerComponent:J?$:void 0,colorBytes:F,alphaBytes:W,needSMask:J}}(a):function(C){var A=C.data,R=C.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:R,colorsPerPixel:R==="DeviceGray"?1:3,colorBytes:A instanceof Uint16Array?function(k){for(var O=k.length,$=new Uint8Array(2*O),D=new DataView($.buffer,$.byteOffset,$.byteLength),q=0;q<O;q++)D.setUint16(2*q,k[q],!1);return $}(A):A,needSMask:!1}}(a);var h,f,m,p=i,g=p.colorSpace,v=p.colorsPerPixel,x=p.sMaskBitsPerComponent,y=p.colorBytes,j=p.alphaBytes,w=p.needSMask,N=p.palette,S=p.mask,T=null;return s!==Sr.API.image_compression.NONE&&typeof wT=="function"?(T=function(C){var A;switch(C){case Sr.API.image_compression.FAST:A=11;break;case Sr.API.image_compression.MEDIUM:A=13;break;case Sr.API.image_compression.SLOW:A=14;break;default:A=12}return A}(s),h=this.decode.FLATE_DECODE,f="/Predictor ".concat(T," /Colors ").concat(v," /BitsPerComponent ").concat(u," /Columns ").concat(o),e=V$(y,Math.ceil(o*v*u/8),v,u,s),w&&(m=V$(j,Math.ceil(o*x/8),1,x,s))):(h=void 0,f=void 0,e=y,w&&(m=j)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:e,index:t,filter:h,decodeParameters:f,transparency:S,palette:N,sMask:m,predictor:T,width:o,height:l,bitsPerComponent:u,sMaskBitsPerComponent:x,colorSpace:g}}},function(e){e.processGIF89A=function(t,n,s,i){var a=new eEe(t),o=a.width,l=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new w4(100).encode(d,100);return e.processJPEG.call(this,u,n,s,i)},e.processGIF87A=e.processGIF89A}(Sr.API),Td.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:s,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Td.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){ks.log("bit decode error:"+n)}},Td.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var c=this.palette[a>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Td.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),o=s*this.width*4+2*i*4,l=a>>4,c=15&a,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*i+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Td.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*s;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Td.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,d=a>>15?255:0,u=s*this.width*4+4*i;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},Td.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var i=this.bottom_up?s:this.height-1-s,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&n)/n*255|0,d=(o>>11)/t*255|0,u=i*this.width*4+4*a;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},Td.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=s,this.data[o+3]=255}this.pos+=this.width%4}},Td.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=s,this.data[l+3]=o}},Td.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,s,i){var a=new Td(t,!1),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new w4(100).encode(c,100);return e.processJPEG.call(this,d,n,s,i)}}(Sr.API),G$.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,s,i){var a=new G$(t),o=a.width,l=a.height,c={data:a.getData(),width:o,height:l},d=new w4(100).encode(c,100);return e.processJPEG.call(this,d,n,s,i)}}(Sr.API),Sr.API.processRGBA=function(e,t,n){for(var s=e.data,i=s.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,c=0,d=0;d<i;d+=4){var u=s[d],h=s[d+1],f=s[d+2],m=s[d+3];a[l++]=u,a[l++]=h,a[l++]=f,o[c++]=m}var p=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Sr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},vx=Sr.API,O2=vx.getCharWidthsArray=function(e,t){var n,s,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:i.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,f=0,m=e.length,p=0,g=l[0]||c,v=[];for(n=0;n<m;n++)s=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?v.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(s))+o*(1e3/a)||0)/1e3):(f=h&&cs(d[s])==="object"&&!isNaN(parseInt(d[s][p],10))?d[s][p]/u:0,v.push((l[s]||g)/c+f)),p=s;return v},F$=vx.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return vx.processArabic&&(e=vx.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,n,i)/n:O2.apply(this,arguments).reduce(function(a,o){return a+o},0)},$$=function(e,t,n,s){for(var i=[],a=0,o=e.length,l=0;a!==o&&l+t[a]<n;)l+=t[a],a++;i.push(e.slice(0,a));var c=a;for(l=0;a!==o;)l+t[a]>s&&(i.push(e.slice(c,a)),l=0,c=a),l+=t[a],a++;return c!==a&&i.push(e.slice(c,a)),i},B$=function(e,t,n){n||(n={});var s,i,a,o,l,c,d,u=[],h=[u],f=n.textIndent||0,m=0,p=0,g=e.split(" "),v=O2.apply(this,[" ",n])[0];if(c=n.lineIndent===-1?g[0].length+2:n.lineIndent||0){var x=Array(c).join(" "),y=[];g.map(function(w){(w=w.split(/\s*\n/)).length>1?y=y.concat(w.map(function(N,S){return(S&&N.length?`
`:"")+N})):y.push(w[0])}),g=y,c=F$.apply(this,[x,n])}for(a=0,o=g.length;a<o;a++){var j=0;if(s=g[a],c&&s[0]==`
`&&(s=s.substr(1),j=1),f+m+(p=(i=O2.apply(this,[s,n])).reduce(function(w,N){return w+N},0))>t||j){if(p>t){for(l=$$.apply(this,[s,i,t-(f+m),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);p=i.slice(s.length-(u[0]?u[0].length:0)).reduce(function(w,N){return w+N},0)}else u=[s];h.push(u),f=p+c,m=v}else u.push(s),f+=m+p,m=v}return d=c?function(w,N){return(N?x:"")+w.join(" ")}:function(w){return w.join(" ")},h.map(d)},vx.splitTextToSize=function(e,t,n){var s,i=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle),f="Unicode";return h.metadata[f]?{widths:h.metadata[f].widths||{0:1},kerning:h.metadata[f].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=n.lineIndent;var l,c,d=[];for(l=0,c=s.length;l<c;l++)d=d.concat(B$.apply(this,[s[l],o,a]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",n="klmnopqrstuvwxyz",s={},i={},a=0;a<16;a++)s[n[a]]=t[a],i[t[a]]=n[a];var o=function(f){return"0x"+parseInt(f,10).toString(16)},l=e.__fontmetrics__.compress=function(f){var m,p,g,v,x=["{"];for(var y in f){if(m=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=o(y).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof m=="number")m<0?(g=o(m).slice(3),v="-"):(g=o(m).slice(2),v=""),g=v+g.slice(0,-1)+i[g.slice(-1)];else{if(cs(m)!=="object")throw new Error("Don't know what to do with value type "+cs(m)+".");g=l(m)}x.push(p+g)}return x.push("}"),x.join("")},c=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,g,v,x={},y=1,j=x,w=[],N="",S="",T=f.length-1,C=1;C<T;C+=1)(v=f[C])=="'"?m?(g=m.join(""),m=void 0):m=[]:m?m.push(v):v=="{"?(w.push([j,g]),j={},g=void 0):v=="}"?((p=w.pop())[0][p[1]]=j,g=void 0,j=p[0]):v=="-"?y=-1:g===void 0?s.hasOwnProperty(v)?(N+=s[v],g=parseInt(N,16)*y,y=1,N=""):N+=v:s.hasOwnProperty(v)?(S+=s[v],j[g]=parseInt(S,16)*y,y=1,g=void 0,S=""):S+=v;return x},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},h={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var m=f.font,p=h.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[m.postScriptName];g&&(m.metadata.Unicode.encoding=g,m.encoding=g.codePages[0])}])}(Sr.API),function(e){var t=function(n){for(var s=n.length,i=new Uint8Array(s),a=0;a<s;a++)i[a]=n.charCodeAt(a);return i};e.API.events.push(["addFont",function(n){var s=void 0,i=n.font,a=n.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(s=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(PN(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,s)}}])}(Sr),Sr.API.addSvgAsImage=function(e,t,n,s,i,a,o,l){if(isNaN(t)||isNaN(n))throw ks.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw ks.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=i;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(Yr.canvg?Promise.resolve(Yr.canvg):t4(()=>import("./index.es-DnM15Lzq.js"),[])).catch(function(f){return Promise.reject(new Error("Could not load canvg: "+f))}).then(function(f){return f.default?f.default:f}).then(function(f){return f.fromString(d,e,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(f){return f.render(u)}).then(function(){h.addImage(c.toDataURL("image/jpeg",1),t,n,s,i,o,l)})},Sr.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var i=0;i<this.internal.pages[s].length;i++)this.internal.pages[s][i]=this.internal.pages[s][i].replace(t,n);return this},Sr.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var s,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function f(p,g){var v,x=!1;for(v=0;v<p.length;v+=1)p[v]===g&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(h=0;h<m;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if(cs(e)==="object"){for(i in e)if(a=e[i],f(l,i)&&a!==void 0){if(n[i].type==="boolean"&&typeof a=="boolean")n[i].value=a;else if(n[i].type==="name"&&f(n[i].valueSet,a))n[i].value=a;else if(n[i].type==="integer"&&Number.isInteger(a))n[i].value=a;else if(n[i].type==="array"){for(d=0;d<a.length;d+=1)if(s=!0,a[d].length===1&&typeof a[d][0]=="number")c.push(String(a[d]-1));else if(a[d].length>1){for(u=0;u<a[d].length;u+=1)typeof a[d][u]!="number"&&(s=!1);s===!0&&c.push([a[d][0]-1,a[d][1]-1].join(" "))}n[i].value="["+c.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var p,g=[];for(p in n)n[p].explicitSet===!0&&(n[p].type==="name"?g.push("/"+p+" /"+n[p].value):g.push("/"+p+" "+n[p].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(s)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=a.length+o.length+l.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Sr.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,f=a.length;h<f;++h){if(l=o.metadata.characterToGlyph(a.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},s=function(a){var o,l,c,d,u,h,f;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,f=(l=Object.keys(a).sort(function(m,p){return m-p})).length;h<f;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(d=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",p=0;p<f.length;p++)m+=String.fromCharCode(f[p]);var g=d();u({data:m,addLength1:!0,objectId:g}),c("endobj");var v=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+kx(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+kx(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+v+" 0 R"),c("/BaseFont /"+kx(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,f="",m=0;m<h.length;m++)f+=String.fromCharCode(h[m]);var p=d();u({data:f,addLength1:!0,objectId:p}),c("endobj");var g=d();u({data:s(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var v=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+p+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+kx(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+kx(l.fontName)+"/FontDescriptor "+v+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",c=a.x,d=a.y,u=a.options||{},h=a.mutex||{},f=h.pdfEscape,m=h.activeFontKey,p=h.fonts,g=m,v="",x=0,y="",j=p[g].encoding;if(p[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(y=l,g=m,Array.isArray(l)&&(y=l[0]),x=0;x<y.length;x+=1)p[g].metadata.hasOwnProperty("cmap")&&(o=p[g].metadata.cmap.unicode.codeMap[y[x].charCodeAt(0)]),o||y[x].charCodeAt(0)<256&&p[g].metadata.hasOwnProperty("Unicode")?v+=y[x]:v+="";var w="";return parseInt(g.slice(1))<14||j==="WinAnsiEncoding"?w=f(v,g).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):j==="Identity-H"&&(w=n(v,p[g])),h.isHex=!0,{text:w,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(a){var o=a.text||"",l=[],c={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([i(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(i(Object.assign({},c,{text:o[d]})).text);a.text=l}else a.text=i(Object.assign({},c,{text:o})).text}])}(Sr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,s){return t.call(this),this.internal.vFS[n]=s,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Sr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var i,a,o,l,c,d,u,h=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],p={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},v=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,j=0;this.__bidiEngine__={};var w=function(k){var O=k.charCodeAt(),$=O>>8,D=g[$];return D!==void 0?h[256*D+(255&O)]:$===252||$===253?"AL":x.test($)?"L":$===8?"R":"N"},N=function(k){for(var O,$=0;$<k.length;$++){if((O=w(k.charAt($)))==="L")return!1;if(O==="R")return!0}return!1},S=function(k,O,$,D){var q,M,L,V,P=O[D];switch(P){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"N":case"AN":break;case"EN":y&&(P="AN");break;case"AL":y=!0,P="R";break;case"WS":case"BN":P="N";break;case"CS":D<1||D+1>=O.length||(q=$[D-1])!=="EN"&&q!=="AN"||(M=O[D+1])!=="EN"&&M!=="AN"?P="N":y&&(M="AN"),P=M===q?M:"N";break;case"ES":P=(q=D>0?$[D-1]:"B")==="EN"&&D+1<O.length&&O[D+1]==="EN"?"EN":"N";break;case"ET":if(D>0&&$[D-1]==="EN"){P="EN";break}if(y){P="N";break}for(L=D+1,V=O.length;L<V&&O[L]==="ET";)L++;P=L<V&&O[L]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(V=O.length,L=D+1;L<V&&O[L]==="NSM";)L++;if(L<V){var z=k[D],Z=z>=1425&&z<=2303||z===64286;if(q=O[L],Z&&(q==="R"||q==="AL")){P="R";break}}}P=D<1||(q=O[D-1])==="B"?"N":$[D-1];break;case"B":y=!1,i=!0,P=j;break;case"S":a=!0,P="N"}return P},T=function(k,O,$){var D=k.split("");return $&&C(D,$,{hiLevel:j}),D.reverse(),O&&O.reverse(),D.join("")},C=function(k,O,$){var D,q,M,L,V,P=-1,z=k.length,Z=0,F=[],W=j?m:f,G=[];for(y=!1,i=!1,a=!1,q=0;q<z;q++)G[q]=w(k[q]);for(M=0;M<z;M++){if(V=Z,F[M]=S(k,G,F,M),D=240&(Z=W[V][p[F[M]]]),Z&=15,O[M]=L=W[Z][5],D>0)if(D===16){for(q=P;q<M;q++)O[q]=1;P=-1}else P=-1;if(W[Z][6])P===-1&&(P=M);else if(P>-1){for(q=P;q<M;q++)O[q]=L;P=-1}G[M]==="B"&&(O[M]=0),$.hiLevel|=L}a&&function(H,se,J){for(var ie=0;ie<J;ie++)if(H[ie]==="S"){se[ie]=j;for(var X=ie-1;X>=0&&H[X]==="WS";X--)se[X]=j}}(G,O,z)},A=function(k,O,$,D,q){if(!(q.hiLevel<k)){if(k===1&&j===1&&!i)return O.reverse(),void($&&$.reverse());for(var M,L,V,P,z=O.length,Z=0;Z<z;){if(D[Z]>=k){for(V=Z+1;V<z&&D[V]>=k;)V++;for(P=Z,L=V-1;P<L;P++,L--)M=O[P],O[P]=O[L],O[L]=M,$&&(M=$[P],$[P]=$[L],$[L]=M);Z=V}Z++}}},R=function(k,O,$){var D=k.split(""),q={hiLevel:j};return $||($=[]),C(D,$,q),function(M,L,V){if(V.hiLevel!==0&&u)for(var P,z=0;z<M.length;z++)L[z]===1&&(P=v.indexOf(M[z]))>=0&&(M[z]=v[P+1])}(D,$,q),A(2,D,O,$,q),A(1,D,O,$,q),D.join("")};return this.__bidiEngine__.doBidiReorder=function(k,O,$){if(function(q,M){if(M)for(var L=0;L<q.length;L++)M[L]=L;l===void 0&&(l=N(q)),d===void 0&&(d=N(q))}(k,O),o||!c||d)if(o&&c&&l^d)j=l?1:0,k=T(k,O,$);else if(!o&&c&&d)j=l?1:0,k=R(k,O,$),k=T(k,O);else if(!o||l||c||d){if(o&&!c&&l^d)k=T(k,O),l?(j=0,k=R(k,O,$)):(j=1,k=R(k,O,$),k=T(k,O));else if(o&&l&&!c&&d)j=1,k=R(k,O,$),k=T(k,O);else if(!o&&!c&&l^d){var D=u;l?(j=1,k=R(k,O,$),j=0,u=!1,k=R(k,O,$),u=D):(j=0,k=R(k,O,$),k=T(k,O),j=1,u=!1,k=R(k,O,$),u=D,k=T(k,O))}}else j=0,k=R(k,O,$);else j=l?1:0,k=R(k,O,$);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,c=k.isOutputVisual,l=k.isInputRtl,d=k.isOutputRtl,u=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var i=s.text;s.x,s.y;var a=s.options||{};s.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([n.doBidiReorder(i[l])]);s.text=o}else s.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Sr),Sr.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Zm(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new pEe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new tEe(this.contents),this.head=new nEe(this),this.name=new lEe(this),this.cmap=new kse(this),this.toUnicode={},this.hhea=new sEe(this),this.maxp=new cEe(this),this.hmtx=new dEe(this),this.post=new aEe(this),this.os2=new iEe(this),this.loca=new mEe(this),this.glyf=new uEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,s,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(s=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,s){var i,a,o,l;for(o=0,a=0,l=(t=""+t).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+s*(1e3/n)||0;return o*(n/1e3)},e.prototype.lineHeight=function(t,n){var s;return n==null&&(n=!1),s=n?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var yu,Zm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,s;for(s=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)s[n]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var n,s,i;for(i=[],n=0,s=t.length;0<=s?n<s:n>s;n=0<=s?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,s,i,a,o,l,c;return t=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^s)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*n+1099511627776*s+4294967296*i+16777216*a+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var n,s;return n=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,s;for(n=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)n.push(this.readByte());return n},e.prototype.write=function(t){var n,s,i,a;for(a=[],s=0,i=t.length;s<i;s++)n=t[s],a.push(this.writeByte(n));return a},e}(),tEe=function(){var e;function t(n){var s,i,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)s={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(n){var s,i,a,o,l,c,d,u,h,f,m,p,g;for(g in m=Object.keys(n).length,c=Math.log(2),h=16*Math.floor(Math.log(m)/c),o=Math.floor(h/c),u=16*m-h,(i=new Zm).writeInt(this.scalarType),i.writeShort(m),i.writeShort(h),i.writeShort(o),i.writeShort(u),a=16*m,d=i.pos+a,l=null,p=[],n)for(f=n[g],i.writeString(g),i.writeInt(e(f)),i.writeInt(d),i.writeInt(f.length),p=p.concat(f),g==="head"&&(l=d),d+=f.length;d%4;)p.push(0),d++;return i.write(p),s=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(s),i.data},e=function(n){var s,i,a,o;for(n=Pse.call(n);n.length%4;)n.push(0);for(a=new Zm(n),i=0,s=0,o=n.length;s<o;s=s+=4)i+=a.readUInt32();return 4294967295&i},t}(),rEe={}.hasOwnProperty,hh=function(e,t){for(var n in t)rEe.call(t,n)&&(e[n]=t[n]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};yu=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var nEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new Zm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),Y$=function(){function e(t,n){var s,i,a,o,l,c,d,u,h,f,m,p,g,v,x,y,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),f=m/2,t.pos+=6,a=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(t.readUInt16());return N}(),t.pos+=2,g=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(t.readUInt16());return N}(),d=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(t.readUInt16());return N}(),u=function(){var w,N;for(N=[],c=w=0;0<=f?w<f:w>f;c=0<=f?++w:--w)N.push(t.readUInt16());return N}(),i=(this.length-t.pos+this.offset)/2,l=function(){var w,N;for(N=[],c=w=0;0<=i?w<i:w>i;c=0<=i?++w:--w)N.push(t.readUInt16());return N}(),c=x=0,j=a.length;x<j;c=++x)for(v=a[c],s=y=p=g[c];p<=v?y<=v:y>=v;s=p<=v?++y:--y)u[c]===0?o=s+d[c]:(o=l[u[c]/2+(s-p)-(f-c)]||0)!==0&&(o+=d[c]),this.codeMap[s]=65535&o}t.pos=h}return e.encode=function(t,n){var s,i,a,o,l,c,d,u,h,f,m,p,g,v,x,y,j,w,N,S,T,C,A,R,k,O,$,D,q,M,L,V,P,z,Z,F,W,G,H,se,J,ie,X,he,fe,Q;switch(D=new Zm,o=Object.keys(t).sort(function(Oe,ve){return Oe-ve}),n){case"macroman":for(g=0,v=function(){var Oe=[];for(p=0;p<256;++p)Oe.push(0);return Oe}(),y={0:0},a={},q=0,P=o.length;q<P;q++)y[X=t[i=o[q]]]==null&&(y[X]=++g),a[i]={old:t[i],new:y[t[i]]},v[i]=y[t[i]];return D.writeUInt16(1),D.writeUInt16(0),D.writeUInt32(12),D.writeUInt16(0),D.writeUInt16(262),D.writeUInt16(0),D.write(v),{charMap:a,subtable:D.data,maxGlyphID:g+1};case"unicode":for(O=[],h=[],j=0,y={},s={},x=d=null,M=0,z=o.length;M<z;M++)y[N=t[i=o[M]]]==null&&(y[N]=++j),s[i]={old:N,new:y[N]},l=y[N]-i,x!=null&&l===d||(x&&h.push(x),O.push(i),d=l),x=i;for(x&&h.push(x),h.push(65535),O.push(65535),R=2*(A=O.length),C=2*Math.pow(Math.log(A)/Math.LN2,2),f=Math.log(C/2)/Math.LN2,T=2*A-C,c=[],S=[],m=[],p=L=0,Z=O.length;L<Z;p=++L){if(k=O[p],u=h[p],k===65535){c.push(0),S.push(0);break}if(k-($=s[k].new)>=32768)for(c.push(0),S.push(2*(m.length+A-p)),i=V=k;k<=u?V<=u:V>=u;i=k<=u?++V:--V)m.push(s[i].new);else c.push($-k),S.push(0)}for(D.writeUInt16(3),D.writeUInt16(1),D.writeUInt32(12),D.writeUInt16(4),D.writeUInt16(16+8*A+2*m.length),D.writeUInt16(0),D.writeUInt16(R),D.writeUInt16(C),D.writeUInt16(f),D.writeUInt16(T),J=0,F=h.length;J<F;J++)i=h[J],D.writeUInt16(i);for(D.writeUInt16(0),ie=0,W=O.length;ie<W;ie++)i=O[ie],D.writeUInt16(i);for(he=0,G=c.length;he<G;he++)l=c[he],D.writeUInt16(l);for(fe=0,H=S.length;fe<H;fe++)w=S[fe],D.writeUInt16(w);for(Q=0,se=m.length;Q<se;Q++)g=m[Q],D.writeUInt16(g);return{charMap:s,subtable:D.data,maxGlyphID:j+1}}},e}(),kse=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,s,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new Y$(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var s,i;return n==null&&(n="macroman"),s=Y$.encode(t,n),(i=new Zm).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),sEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),iEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(t.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),aEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="post",e.prototype.parse=function(t){var n,s,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(s=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)n=t.readByte(),i.push(this.names.push(t.readString(n)));return i;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 262144:return this.map=(function(){var o,l,c;for(c=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)c.push(t.readUInt32());return c}).call(this)}},e}(),oEe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},lEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="name",e.prototype.parse=function(t){var n,s,i,a,o,l,c,d,u,h,f;for(t.pos=this.offset,t.readShort(),n=t.readShort(),l=t.readShort(),s=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(c={},a=u=0,h=s.length;u<h;a=++u)i=s[a],t.pos=i.offset,d=t.readString(i.length),o=new oEe(d,i),c[f=i.nameID]==null&&(c[f]=[]),c[i.nameID].push(o);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),cEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),dEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,s,i,a,o,l,c;for(t.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,u;for(u=[],n=d=0;0<=i?d<i:d>i;n=0<=i?++d:--d)u.push(t.readInt16());return u}(),this.widths=(function(){var d,u,h,f;for(f=[],d=0,u=(h=this.metrics).length;d<u;d++)a=h[d],f.push(a.advance);return f}).call(this),s=this.widths[this.widths.length-1],c=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)c.push(this.widths.push(s));return c},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),Pse=[].slice,uEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,s,i,a,o,l,c,d,u,h;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,s=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+s,o=(l=new Zm(n.read(i))).readShort(),d=l.readShort(),h=l.readShort(),c=l.readShort(),u=l.readShort(),this.cache[t]=o===-1?new fEe(l,d,h,c,u):new hEe(l,o,d,h,c,u),this.cache[t]))},e.prototype.encode=function(t,n,s){var i,a,o,l,c;for(o=[],a=[],l=0,c=n.length;l<c;l++)i=t[n[l]],a.push(o.length),i&&(o=o.concat(i.encode(s)));return a.push(o.length),{table:o,offsets:a}},e}(),hEe=function(){function e(t,n,s,i,a,o){this.raw=t,this.numberOfContours=n,this.xMin=s,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),fEe=function(){function e(t,n,s,i,a){var o,l;for(this.raw=t,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,n,s;for(n=new Zm(Pse.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),mEe=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return hh(e,yu),e.prototype.tag="loca",e.prototype.parse=function(t){var n,s;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<s.length;++o)if(s[o]=i,a<n.length&&n[a]==o){++a,s[o]=i;var l=this.offsets[o],c=this.offsets[o+1]-l;c>0&&(i+=c)}for(var d=new Array(4*s.length),u=0;u<s.length;++u)d[4*u+3]=255&s[u],d[4*u+2]=(65280&s[u])>>8,d[4*u+1]=(16711680&s[u])>>16,d[4*u]=(4278190080&s[u])>>24;return d},e}(),pEe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,s,i,a;for(n in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)s=a[n],t[n]=i[s];return t},e.prototype.glyphsFor=function(t){var n,s,i,a,o,l,c;for(i={},o=0,l=t.length;o<l;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in n=[],i)(s=i[a])!=null&&s.compound&&n.push.apply(n,s.glyphIDs);if(n.length>0)for(a in c=this.glyphsFor(n))s=c[a],i[a]=s;return i},e.prototype.encode=function(t,n){var s,i,a,o,l,c,d,u,h,f,m,p,g,v,x;for(i in s=kse.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},x=s.charMap)m[(c=x[i]).old]=c.new;for(p in f=s.maxGlyphID,o)p in m||(m[p]=f++);return u=function(y){var j,w;for(j in w={},y)w[y[j]]=j;return w}(m),h=Object.keys(u).sort(function(y,j){return y-j}),g=function(){var y,j,w;for(w=[],y=0,j=h.length;y<j;y++)l=h[y],w.push(u[l]);return w}(),a=this.font.glyf.encode(o,g,m),d=this.font.loca.encode(a.offsets,g),v={cmap:this.font.cmap.raw(),glyf:a.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(v["OS/2"]=this.font.os2.raw()),this.font.directory.encode(v)},e}();Sr.API.PDFObject=function(){var e;function t(){}return e=function(n,s){return(Array(s+1).join("0")+n).slice(-s)},t.convert=function(n){var s,i,a,o;if(Array.isArray(n))return"["+function(){var l,c,d;for(d=[],l=0,c=n.length;l<c;l++)s=n[l],d.push(t.convert(s));return d}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in a=["<<"],n)o=n[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+n},t}();const gEe={policy_portrait:{orientation:"portrait",marginX:24,marginTop:28,headerSpacing:8,bodyLineHeight:5.4,tableColumns:[14,70,26,52],tableRowHeight:9,colors:{primary:[19,73,138],accent:[19,73,138],text:[33,37,41],borderOuter:[21,71,138],borderInner:[21,71,138]},showLogos:!0},policy_landscape:{orientation:"landscape",marginX:30,marginTop:26,headerSpacing:6,bodyLineHeight:5,tableColumns:[16,122,34,60],tableRowHeight:8.2,colors:{primary:[19,73,138],accent:[19,73,138],text:[33,37,41],borderOuter:[21,71,138],borderInner:[21,71,138]},showLogos:!0},policy_heritage:{orientation:"portrait",marginX:24,marginTop:28,headerSpacing:8,bodyLineHeight:5.2,tableColumns:[14,70,26,52],tableRowHeight:9,colors:{primary:[92,54,14],accent:[171,119,44],text:[66,47,27],borderOuter:[92,54,14],borderInner:[202,160,95],background:[253,246,233]},showLogos:!0}},xEe={diamond:"Tariff Rs. 10,000 and above per room per day",gold:"Tariff between Rs. 3,000 and Rs. 9,999 per room per day",silver:"Tariff less than Rs. 3,000 per room per day"},K1="__________",R2={gov:{aspectRatio:148/194,portraitWidth:27,landscapeWidth:22},tourism:{aspectRatio:176/195,portraitWidth:27,landscapeWidth:22}};function bC(e,t="policy_heritage",n){const s=gEe[t],i=new Sr({orientation:s.orientation,unit:"mm",format:"a4"});vEe(i,e,s);const o=`HP_Homestay_Certificate_${EEe(e.certificateNumber||"N_A")}_${t}.pdf`;try{const l=i.output("blob"),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=o,d.style.display="none",document.body.appendChild(d),d.click(),setTimeout(()=>{document.body.removeChild(d),URL.revokeObjectURL(c)},100)}catch(l){console.warn("Blob download failed, using fallback:",l),i.save(o)}}function vEe(e,t,n,s){const i=e.internal.pageSize.getWidth(),a=e.internal.pageSize.getHeight(),o=i-n.marginX*2,l=n.orientation==="portrait"?1:.82;yEe(e,i,a,n);const c=bEe(e,i,Lne,Fne,n);let d=Math.max(n.marginTop,c+8);d=jEe(e,d,i,n),e.setFont("times","normal"),e.setFontSize(11.2),e.setTextColor(...n.colors.text),d+=12*l,e.setFont("times","bold"),e.text(`RC No.: ${_p(t.certificateNumber)}`,n.marginX,d),e.text(`Valid till: ${X$(t.certificateExpiryDate)}`,i-n.marginX,d,{align:"right"}),d+=11*l,e.setFont("times","normal");const u=_p(t.propertyName),h=_p(SEe(t)),f=kEe(t.ownerGender),m=_p(t.ownerName),p=_p(CEe(t)),g=TEe(t.category),v=xEe[(t.category||"").toLowerCase()];d=zy(e,`This is to certify that the Home Stay unit known as ${u} located in the tourist area ${h} has been registered with the Department of Tourism & Civil Aviation, Himachal Pradesh.`,{x:n.marginX,y:d,maxWidth:o,lineHeight:n.bodyLineHeight}),d=zy(e,"The Home Stay unit is to be operated / being operated by:",{x:n.marginX,y:d+2*l,maxWidth:o,lineHeight:n.bodyLineHeight}),e.setFont("times","bold");const x=PEe(t.ownerGender),y=`${f} ${m} ${x} ${p}`;e.text(y,i/2,d+3*l,{align:"center"}),d=d+3*l+n.bodyLineHeight,e.setFont("times","normal"),d=zy(e,"Proprietor / Owner(s) / Promoter(s) of the said Home Stay unit has been registered under the Himachal Pradesh Tourism Development and Registration Act, 2002 and the rules made thereunder.",{x:n.marginX,y:d+2*l,maxWidth:o,lineHeight:n.bodyLineHeight}),d+=4*l,e.setFont("times","bold"),e.text(`Category: ${g}`,n.marginX,d),v&&(e.setFont("times","italic"),e.setFontSize(10.2),e.text(`(${v})`,n.marginX+40,d),e.setFontSize(11.2)),e.setFont("times","normal"),d+=8*l,d=wEe(e,t,n,d),d+=5*l,d=zy(e,"Note: Total number of beds shall not exceed 12.",{x:n.marginX,y:d,maxWidth:o,lineHeight:n.bodyLineHeight,fontSize:10.2,fontStyle:"italic"}),d+=5*l,d=zy(e,`Registered address: ${AEe(t)}`,{x:n.marginX,y:d,maxWidth:o,lineHeight:n.bodyLineHeight,fontSize:10.5});const j=["Display this certificate prominently at the Homestay property.","Registration remains subject to adherence with HP Homestay Rules 2025.","Any change in ownership or property configuration must be reported for revalidation."],w=a-18,N=28*l,S=j.length*(n.bodyLineHeight+.5)+10,T=12*l+N+S;d+T>w&&(d=Math.max(n.marginTop,w-T)),d+=10*l,e.setFont("times","normal"),e.setFontSize(11),e.text(`Place: ${_p(_Ee(t))}`,n.marginX,d),d+=n.bodyLineHeight,e.text(`Date: ${X$(t.certificateIssuedDate)}`,n.marginX,d);const C=8*l;let A=d+C;const R=14*l;if(A+R>w){const M=A+R-w;A-=M}e.setDrawColor(140,101,52),e.setLineWidth(.4),e.line(i-n.marginX-50,A-2,i-n.marginX,A-2),e.setFont("times","italic"),e.setFontSize(10.5),e.text("(Prescribed Authority)",i-n.marginX,A+2,{align:"right"}),e.setFont("times","bold"),e.setFontSize(11),e.text("District Tourism Development Officer",i-n.marginX,A+8,{align:"right"}),e.setFont("times","normal"),e.text(_p(hu(t.district)),i-n.marginX,A+14,{align:"right"});const k=n.bodyLineHeight+1.5,$=j.length*(k+2)+14,D=Math.max(A+20,a-n.marginTop-$);e.setFont("times","bold"),e.setFontSize(11),e.text("Important Instructions:",n.marginX,D),e.setFont("times","normal"),e.setFontSize(10.3);let q=D+7;j.forEach(M=>{e.splitTextToSize(` ${M}`,o).forEach((P,z)=>{const Z=z===0?n.marginX:n.marginX+4;e.text(P,Z,q),q+=n.bodyLineHeight+.5}),q+=1})}function yEe(e,t,n,s){s.colors.background&&(e.setFillColor(...s.colors.background),e.rect(0,0,t,n,"F")),e.setDrawColor(...s.colors.borderOuter),e.setLineWidth(s.colors.background?1.4:1.2),e.rect(8,8,t-8*2,n-8*2),e.setDrawColor(...s.colors.borderInner),e.setLineWidth(s.colors.background?.9:.6),e.rect(12,12,t-12*2,n-12*2)}function bEe(e,t,n,s,i){if(i.showLogos===!1)return i.marginTop-6;const a=i.orientation==="portrait"?"portraitWidth":"landscapeWidth",o=R2.gov[a],l=o*R2.gov.aspectRatio,c=R2.tourism[a],d=c*R2.tourism.aspectRatio,u=Math.max(10,i.marginTop-14),h=(p,g,v,x)=>(e.addImage(p,"PNG",g,u,v,x),u+x),f=h(n,i.marginX,o,l),m=h(s,t-i.marginX-c,c,d);return e.setDrawColor(...i.colors.accent),e.setLineWidth(.6),e.line(i.marginX,Math.max(f,m)+2,t-i.marginX,Math.max(f,m)+2),Math.max(f,m)+2}function jEe(e,t,n,s){let i=t;return e.setFont("times","bold"),e.setFontSize(17),e.setTextColor(...s.colors.primary),e.text("GOVERNMENT OF HIMACHAL PRADESH",n/2,i,{align:"center"}),i+=s.headerSpacing,e.setFontSize(13),e.text("DEPARTMENT OF TOURISM & CIVIL AVIATION",n/2,i,{align:"center"}),i+=s.headerSpacing,e.setFontSize(12),e.text("CERTIFICATE OF REGISTRATION OF A HOME STAY UNIT",n/2,i,{align:"center"}),e.setTextColor(...s.colors.text),i}function wEe(e,t,n,s){const i=S4(t.singleBedRoomRate),a=S4(t.doubleBedRoomRate),o=S4(t.familySuiteRate),l=[{sl:"1.",label:"Single bed rooms",count:N4(t.singleBedRooms),rate:t.singleBedRooms&&t.singleBedRooms>0?i:"-"},{sl:"2.",label:"Double bed rooms",count:N4(t.doubleBedRooms),rate:t.doubleBedRooms&&t.doubleBedRooms>0?a:"-"},{sl:"3.",label:"Family suite",count:N4(t.familySuites),rate:t.familySuites&&t.familySuites>0?o:"-"}],c=["Sl.No.","Details of accommodation","No. of rooms","Proposed room rent per day"],d=n.tableColumns.reduce((p,g)=>p+g,0),u=n.marginX,h=n.tableRowHeight*(l.length+1);e.setDrawColor(...n.colors.text),e.setLineWidth(.4),e.rect(u,s,d,h),e.setFillColor(248,234,208),e.rect(u,s,d,n.tableRowHeight,"F");let f=u;for(const p of n.tableColumns)e.line(f,s,f,s+h),f+=p;e.line(f,s,f,s+h);let m=s+n.tableRowHeight;for(let p=0;p<l.length;p++)e.line(u,m,u+d,m),m+=n.tableRowHeight;return e.setFont("times","bold"),e.setFontSize(10.5),e.setTextColor(...n.colors.primary),f=u,c.forEach((p,g)=>{qy(e,p,f,s,n.tableColumns[g],n.tableRowHeight,g===1?"left":"center"),f+=n.tableColumns[g]}),e.setFont("times","normal"),e.setFontSize(10.5),e.setTextColor(...n.colors.text),l.forEach((p,g)=>{const v=s+n.tableRowHeight*(g+1);let x=u;qy(e,p.sl,x,v,n.tableColumns[0],n.tableRowHeight,"center"),x+=n.tableColumns[0],qy(e,p.label,x,v,n.tableColumns[1],n.tableRowHeight,"left"),x+=n.tableColumns[1],qy(e,p.count,x,v,n.tableColumns[2],n.tableRowHeight,"center"),x+=n.tableColumns[2],qy(e,p.rate,x,v,n.tableColumns[3],n.tableRowHeight,"center")}),s+h}function qy(e,t,n,s,i,a,o){const d=Math.max(i-6,10),u=e.splitTextToSize(t,d),h=4;let f=s+2.2+h/2;for(const m of u)o==="center"?e.text(m,n+i/2,f,{align:"center"}):o==="right"?e.text(m,n+i-3,f,{align:"right"}):e.text(m,n+3,f),f+=h}function zy(e,t,n){const{x:s,y:i,maxWidth:a,lineHeight:o=5.2,fontSize:l=11,fontStyle:c="normal",color:d}=n;e.setFont("times",c),e.setFontSize(l),d&&e.setTextColor(d[0],d[1],d[2]);const u=e.splitTextToSize(t,a);let h=i;for(const f of u)e.text(f,s,h),h+=o;return h}function X$(e){return NEe(e)??K1}function NEe(e){if(!e)return null;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?null:t.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})}function N4(e){return!e||e<=0?"":`${e}`}function SEe(e){const t=[e.gramPanchayat,e.block,e.tehsil,e.urbanBody,hu(e.district)].filter(n=>n&&n.trim());return t.length>0?t.join(", "):e.address?e.address:hu(e.district)||""}function _Ee(e){return hu(e.district)||e.tehsil||e.block||e.urbanBody||e.gramPanchayat||e.address||""}function CEe(e){var i;if(typeof e.guardianName=="string"&&e.guardianName.trim())return e.guardianName.trim();const t=(i=e.serviceContext)==null?void 0:i.legacyGuardianName;if(typeof t=="string"&&t.trim())return t.trim();const n=["ownerGuardianName","ownerParentName","ownerParentage","ownerFatherName","ownerSpouseName"],s=e;for(const a of n){const o=s[a];if(typeof o=="string"&&o.trim())return o.trim()}if(typeof console<"u"){const a=e.applicationNumber||e.id||"unknown-id";console.warn(`[certificate] Guardian/father name missing for application ${a}. Please update the record in Admin RC queue.`)}return""}function AEe(e){return[e.address,e.gramPanchayat,e.tehsil,hu(e.district),e.pincode?`PIN: ${e.pincode}`:""].filter(n=>n&&n.trim()).join(", ")||K1}function kEe(e){return e==="female"?"Smt.":"Sh."}function PEe(e){return e==="female"?"w/o":"s/o"}function S4(e){if(e==null)return"";let t;if(typeof e=="string"){const s=e.replace(/[^\d.]/g,"");t=parseFloat(s)}else t=e;return!Number.isFinite(t)||t<=0?"":`Rs. ${Math.round(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}/-`}function TEe(e){return e?e.trim().toUpperCase():K1}function _p(e){return e==null?K1:e.toString().trim()||K1}function EEe(e){return e.replace(/[^\w.-]+/g,"_")}const Cp={renew:"",addRooms:"",deleteRooms:"",changeCategory:"",changeOwnership:"",cancelCertificate:"",downloadRC:""},_4=e=>{if(!e)return null;try{return sr(new Date(e),"d MMM yyyy")}catch{return null}},OEe=()=>r.jsx(me,{className:"border-dashed bg-muted/40",children:r.jsx(ge,{className:"py-8 text-center text-sm text-muted-foreground",children:"Once approved, manage your certificate here."})});function REe(){const[,e]=Dr(),{data:t,isLoading:n,isError:s}=rt({queryKey:["/api/service-center"]}),[i,a]=b.useState(new Set),o=S=>{a(T=>{const C=new Set(T);return C.has(S)?C.delete(S):C.add(S),C})},[l,c]=b.useState(null),[d,u]=b.useState(null),h=(S,T,C)=>{c({open:!0,mode:S,parentId:T,currentRooms:C})},f=()=>c(null),m=S=>{f(),e(S)},{toast:p}=Tr(),[g,v]=b.useState(null),x=Ot({mutationFn:async S=>{await lt("DELETE",`/api/applications/${S}`)},onSuccess:()=>{p({title:"Draft Discarded",description:"The incomplete service request has been removed. You can now start a new one."}),v(null),er.invalidateQueries({queryKey:["/api/service-center"]})},onError:S=>{p({title:"Failed to Discard",description:S.message||"Could not remove the draft. Please try again.",variant:"destructive"})}}),[y,j]=b.useState(null),w=async S=>{try{j(S),p({title:"Preparing Certificate",description:"Please wait while we generate your Registration Certificate..."});const C=await(await lt("GET",`/api/applications/${S}`)).json();if(!C||!C.application)throw new Error("Could not retrieve application details");bC(C.application,"policy_heritage"),p({title:"Download Started",description:"Your certificate has been downloaded successfully."})}catch(T){console.error("RC Download failed:",T),p({title:"Download Failed",description:"Could not download the certificate. Please try again.",variant:"destructive"})}finally{j(null)}};if(n)return r.jsxs("section",{className:"mb-8",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx(Lr,{className:"h-6 w-40"}),r.jsx(Lr,{className:"mt-2 h-4 w-72"})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(Lr,{className:"h-5 w-48"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Lr,{className:"h-4 w-full"}),r.jsx(Lr,{className:"h-4 w-2/3"}),r.jsx(Lr,{className:"h-10 w-full"})]})]})]});if(s)return null;const N=(t==null?void 0:t.applications)??[];return N.length===0?r.jsxs("section",{className:"mb-8",children:[r.jsxs("div",{className:"mb-3",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Service Center"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Renew or amend approved applications without starting from scratch."})]}),r.jsx(OEe,{})]}):r.jsxs("section",{className:"mb-10",children:[r.jsxs("div",{className:"max-w-2xl space-y-4",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Service Center"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your approved homestay certificates"})]}),N.map(S=>{const T=_4(S.certificateExpiryDate),C=_4(S.renewalWindowStart),A=_4(S.renewalWindowEnd),R=!!(C&&A);S.activeServiceRequest&&`${S.activeServiceRequest.applicationKind.replace(/_/g," ").toUpperCase()}${S.activeServiceRequest.status.replace(/_/g," ")}`;const k=!!S.activeServiceRequest,O=!S.canRenew||k,$=i.has(S.id);return r.jsx(me,{className:"rounded-xl border border-slate-200 bg-white shadow-sm",children:r.jsxs(ge,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 rounded-lg bg-green-100 flex items-center justify-center shrink-0",children:r.jsx(Fr,{className:"w-4 h-4 text-green-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-slate-900",children:S.propertyName}),r.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[r.jsx(Al,{className:"w-3 h-3"}),T?`Expires ${T}`:"Certificate pending"]})]})]}),r.jsx(ze,{variant:"outline",className:"rounded-full bg-emerald-50 text-emerald-700 border-emerald-200 text-xs px-2 py-0.5",children:S.applicationNumber})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 mb-3",children:[r.jsxs("span",{className:"font-medium",children:[" ",S.totalRooms," rooms"]}),r.jsx("span",{className:"text-slate-400",children:"|"}),r.jsxs("span",{children:[S.rooms.single,"S  ",S.rooms.double,"D  ",S.rooms.family,"F"]}),R&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-slate-400",children:"|"}),r.jsxs("span",{className:"text-xs",children:[" Renewal: ",C," - ",A]})]})]}),S.activeServiceRequest&&r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg px-3 py-2 mb-3 text-sm text-amber-700 flex items-center gap-2",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["Active: ",S.activeServiceRequest.applicationKind.replace(/_/g," ")," (",S.activeServiceRequest.status.replace(/_/g," "),")"]})]}),S.activeServiceRequest&&S.activeServiceRequest.status==="draft"&&r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(te,{variant:"outline",size:"sm",className:"text-xs rounded-full border-amber-300 text-amber-700 hover:bg-amber-50",onClick:()=>e(`/applications/new?draft=${S.activeServiceRequest.id}`),children:" Resume Draft"}),r.jsxs(te,{variant:"ghost",size:"sm",className:"text-xs text-rose-600 hover:text-rose-700 hover:bg-rose-50",onClick:()=>v({id:S.activeServiceRequest.id,kind:S.activeServiceRequest.applicationKind}),children:[r.jsx(nh,{className:"h-3 w-3 mr-1"}),"Discard"]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2 border-t",children:[r.jsxs(te,{disabled:O,size:"sm",className:Xe("rounded-full bg-emerald-600 text-white hover:bg-emerald-700",O&&"bg-muted text-muted-foreground hover:bg-muted"),children:[Cp.renew," Renew"]}),r.jsxs(te,{variant:"outline",size:"sm",className:"rounded-full",onClick:()=>w(S.id),disabled:y===S.id,children:[y===S.id?r.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx("span",{className:"mr-1",children:Cp.downloadRC}),y===S.id?"Generating...":"Download RC"]}),!k&&r.jsx(te,{variant:$?"secondary":"ghost",size:"sm",className:Xe("rounded-full ml-auto",$&&"bg-amber-100 text-amber-800 hover:bg-amber-200"),onClick:()=>o(S.id),children:$?" Lock Amendments":" Unlock Amendments"})]}),$&&!k&&r.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2 mt-2 bg-amber-50 rounded-lg p-3 border border-amber-200",children:[r.jsx("span",{className:"text-xs text-amber-700 font-medium mr-2",children:" Amendment Actions:"}),r.jsxs(te,{variant:"outline",size:"sm",disabled:!S.canAddRooms,className:"rounded-full text-xs border-blue-200 hover:bg-blue-50",onClick:()=>u({type:"add_rooms",appId:S.id,rooms:S.rooms}),children:[Cp.addRooms," Add Rooms"]}),r.jsxs(te,{variant:"outline",size:"sm",disabled:!S.canDeleteRooms,className:"rounded-full text-xs border-orange-200 hover:bg-orange-50",onClick:()=>u({type:"delete_rooms",appId:S.id,rooms:S.rooms}),children:[Cp.deleteRooms," Delete Rooms"]}),r.jsxs(te,{variant:"outline",size:"sm",className:"rounded-full text-xs border-purple-200 hover:bg-purple-50",onClick:()=>u({type:"change_category",appId:S.id}),children:[Cp.changeCategory," Change Category"]}),r.jsxs(te,{variant:"outline",size:"sm",className:"rounded-full text-xs border-indigo-200 hover:bg-indigo-50",onClick:()=>u({type:"change_ownership",appId:S.id}),children:[Cp.changeOwnership," Change Ownership"]}),r.jsxs(te,{variant:"outline",size:"sm",className:"rounded-full text-xs border-rose-200 text-rose-600 hover:bg-rose-50",onClick:()=>u({type:"cancel_certificate",appId:S.id}),children:[Cp.cancelCertificate," Cancel Certificate"]})]})]})},S.id)})]}),l&&r.jsx(SPe,{open:l.open,onOpenChange:S=>!S&&f(),mode:l.mode,parentApplicationId:l.parentId,currentRooms:l.currentRooms,onSuccess:m}),r.jsx(zd,{open:!!d,onOpenChange:S=>!S&&u(null),children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsxs(Jc,{children:[(d==null?void 0:d.type)==="add_rooms"&&"Add Rooms to Certificate?",(d==null?void 0:d.type)==="delete_rooms"&&"Delete Rooms from Certificate?",(d==null?void 0:d.type)==="change_category"&&"Change Property Category?",(d==null?void 0:d.type)==="change_ownership"&&"Transfer Property Ownership?",(d==null?void 0:d.type)==="cancel_certificate"&&"Cancel Your Certificate?"]}),r.jsxs(ed,{children:[(d==null?void 0:d.type)==="add_rooms"&&"This will start a new request to add rooms to your certificate. You can cancel anytime before final submission.",(d==null?void 0:d.type)==="delete_rooms"&&"This will start a request to remove rooms from your certificate. This action requires approval.",(d==null?void 0:d.type)==="change_category"&&"This will start a request to change your property category. Your certificate details will be updated upon approval.",(d==null?void 0:d.type)==="change_ownership"&&"This will start a request to transfer ownership. You will need to upload proof of transfer (Sale Deed/Gift Deed).",(d==null?void 0:d.type)==="cancel_certificate"&&" WARNING: This will permanently cancel your certificate. This action cannot be undone easily."]})]}),r.jsxs(Zc,{children:[r.jsx(td,{children:"Go Back"}),r.jsx(Hd,{onClick:()=>{d&&(d.type==="add_rooms"&&d.rooms?h("add_rooms",d.appId,d.rooms):d.type==="delete_rooms"&&d.rooms?h("delete_rooms",d.appId,d.rooms):d.type==="change_category"?e(`/applications/service-request?type=change_category&parentId=${d.appId}`):d.type==="change_ownership"?e(`/applications/service-request?type=change_ownership&parentId=${d.appId}`):d.type==="cancel_certificate"&&e(`/applications/service-request?type=cancel_certificate&parentId=${d.appId}`),u(null))},className:(d==null?void 0:d.type)==="cancel_certificate"?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"",children:(d==null?void 0:d.type)==="cancel_certificate"?"Yes, Cancel Certificate":"Proceed"})]})]})}),r.jsx(zd,{open:!!g,onOpenChange:S=>!S&&v(null),children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:"Discard Service Request?"}),r.jsxs(ed,{children:["This will permanently delete your"," ",r.jsx("strong",{children:g==null?void 0:g.kind.replace(/_/g," ")})," draft. You can start a new service request after discarding."]})]}),r.jsxs(Zc,{children:[r.jsx(td,{children:"Cancel"}),r.jsxs(Hd,{onClick:()=>g&&x.mutate(g.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:x.isPending,children:[x.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Discard Draft"]})]})]})})]})}const vb=[{id:"da_review",label:"With Dealing Assistant"},{id:"forwarded_dtdo",label:"Forwarded to DTDO"},{id:"inspection_scheduled",label:"Inspection Scheduled"},{id:"inspection_completed",label:"Inspection Completed"},{id:"payment_pending",label:"Payment Pending"},{id:"certificate",label:"Registration Approved"}],DEe={draft:0,paid_pending_submit:0,submitted:0,district_review:0,under_scrutiny:0,forwarded_to_dtdo:1,sent_back_for_corrections:0,reverted_to_applicant:0,objection_raised:1,state_review:1,reverted_by_dtdo:1,inspection_scheduled:2,inspection_completed:3,payment_pending:4,verified_for_payment:4,approved:5,rejected:5},MEe={draft:"Complete the draft to submit your application.",paid_pending_submit:"Payment received. Please confirm submission to proceed.",submitted:"Your application is with the Dealing Assistant for review.",district_review:"Your application is with the Dealing Assistant for review.",under_scrutiny:"Your application is being reviewed by the Dealing Assistant.",forwarded_to_dtdo:"Your application is with the DTDO for decision.",state_review:"Your application is with the DTDO for decision.",sent_back_for_corrections:"Action required: update the application with the requested corrections.",reverted_to_applicant:"Action required: update the application with the requested corrections.",objection_raised:"DTDO raised an objection. Please review and respond.",reverted_by_dtdo:"DTDO requested revisions  please review the remarks.",inspection_scheduled:"The inspection has been scheduled. Keep an eye on notifications.",inspection_completed:"Inspection finished. Awaiting final payment instructions.",payment_pending:"Complete the payment to receive your registration certificate.",verified_for_payment:"Payment verified  certificate will unlock shortly.",approved:"Certificate is ready for download.",rejected:"Application closed. Contact support for clarifications."},IEe="We'll keep this tracker updated and notify you when action is needed.",Q$=e=>{const t=e.status;let n=t?DEe[t]??0:0;e.siteInspectionCompletedDate?n=Math.max(n,3):e.siteInspectionScheduledDate&&(n=Math.max(n,2)),(e.status==="payment_pending"||e.status==="verified_for_payment")&&(n=Math.max(n,4)),(e.approvedAt||e.status==="approved")&&(n=Math.max(n,5));const s=vb.length-1,i=Math.min(Math.max(n,0),s),a=t&&MEe[t]||IEe;return{stageIndex:i,summary:a}};function LEe(){const[e,t]=Dr(),[n,s]=b.useState("all"),[i,a]=b.useState(null),[o,l]=b.useState(!1),[c,d]=b.useState(!1),[u,h]=b.useState(null),{toast:f}=Tr(),m=ci(),p=async P=>{if(confirm("Are you sure you want to discard this draft? This action cannot be undone."))try{await lt("DELETE",`/api/applications/${P}`),f({title:"Draft discarded",description:"Your draft application has been deleted."}),g()}catch(z){console.error("Failed to delete draft:",z),f({title:"Error",description:"Failed to discard draft. Please try again.",variant:"destructive"})}},g=()=>{m.invalidateQueries({queryKey:["/api/applications"]}),m.invalidateQueries({queryKey:["/api/auth/me"]})},{data:v,isLoading:x,error:y}=rt({queryKey:["/api/auth/me"],retry:!1}),{data:j,isLoading:w}=rt({queryKey:["/api/applications"],enabled:!!(v!=null&&v.user)}),{data:N}=rt({queryKey:["/api/settings/enable-legacy-registrations"],staleTime:60*1e3}),S=(N==null?void 0:N.enabled)!==!1,T=b.useMemo(()=>{const P=e.includes("?")?e.split("?")[1]:"";return new URLSearchParams(P)},[e]),C=T.get("payment"),A=T.get("application"),R=T.get("appNo"),k=C==="success"&&!!A,O=C==="failed"&&!!A;if(b.useEffect(()=>{if(C){const P=window.setTimeout(()=>{const z=e.split("?")[0];t(z,{replace:!0})},6e3);return()=>window.clearTimeout(P)}},[C,e,t]),x)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(Lr,{className:"h-12 w-48"})});if(y||!(v!=null&&v.user))return setTimeout(()=>t("/login"),0),r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("p",{children:"Redirecting to login..."})});const $=v.user,D=(j==null?void 0:j.applications)||[],q=P=>P.applicationType==="adventure_sports"?"adventure_sports":"homestay",M=(()=>{switch(n){case"homestay":return D.filter(P=>q(P)==="homestay");case"adventure_sports":return D.filter(P=>q(P)==="adventure_sports");case"new_applications":return D.filter(P=>["draft","paid_pending_submit","submitted"].includes(P.status||""));case"under_process":return D.filter(P=>["under_scrutiny","forwarded_to_dtdo","inspection_scheduled","inspection_completed"].includes(P.status||""));case"completed":return D.filter(P=>["approved","rejected"].includes(P.status||""));case"draft":return D.filter(P=>P.status==="draft");case"pending":return D.filter(P=>["submitted","district_review"].includes(P.status||""));case"approved":return D.filter(P=>P.status==="approved");case"sent_back":return D.filter(P=>["sent_back_for_corrections","reverted_to_applicant","reverted_by_dtdo"].includes(P.status||""));case"all":default:return D}})(),L={total:D.length,homestay:D.filter(P=>q(P)==="homestay").length,adventure:D.filter(P=>q(P)==="adventure_sports").length,draft:D.filter(P=>P.status==="draft").length,submitted:D.filter(P=>P.status==="submitted").length,approved:D.filter(P=>P.status==="approved").length,rejected:D.filter(P=>P.status==="rejected").length,paymentPending:D.filter(P=>P.status==="payment_pending"||P.status==="verified_for_payment").length,inspectionScheduled:D.filter(P=>P.status==="inspection_scheduled").length,sentBack:D.filter(P=>P.status==="sent_back_for_corrections"||P.status==="reverted_to_applicant"||P.status==="reverted_by_dtdo").length,underProcess:D.filter(P=>["under_scrutiny","forwarded_to_dtdo","inspection_scheduled","inspection_completed"].includes(P.status||"")).length,newApps:D.filter(P=>["draft","paid_pending_submit","submitted"].includes(P.status||"")).length,resubmitted:D.filter(P=>P.status==="submitted"&&P.resubmittedCount&&P.resubmittedCount>0).length},V=P=>{const Z={draft:{variant:"outline",label:"Draft"},submitted:{variant:"secondary",label:"Submitted"},district_review:{variant:"secondary",label:"District Review"},state_review:{variant:"secondary",label:"State Review"},sent_back_for_corrections:{variant:"warning",label:"Sent Back"},reverted_to_applicant:{variant:"warning",label:"Reverted by DA"},reverted_by_dtdo:{variant:"warning",label:"Reverted by Prescribed Authority"},objection_raised:{variant:"warning",label:"DTDO Objection"},inspection_scheduled:{variant:"secondary",label:"Inspection Scheduled"},inspection_completed:{variant:"secondary",label:"Inspection Completed"},payment_pending:{variant:"secondary",label:"Payment Pending"},verified_for_payment:{variant:"secondary",label:"Payment Verified"},approved:{variant:"default",label:"Approved"},rejected:{variant:"destructive",label:"Rejected"}}[P]||{variant:"outline",label:P};return r.jsx(ze,{variant:Z.variant,children:Z.label})};return r.jsxs("div",{className:"bg-background p-6",children:[($.role==="state_officer"||$.role==="admin")&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:r.jsx(Xke,{user:$})}),!($.role==="state_officer"||$.role==="admin")&&r.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[k&&r.jsxs(fn,{className:"mb-6 border-green-500 bg-green-50",children:[r.jsx(Fr,{className:"h-5 w-5 text-green-600"}),r.jsx(Po,{children:"Payment Successful"}),r.jsxs(mn,{children:["Application ",R||A," approved. Certificate ready."]}),r.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:r.jsxs(te,{size:"sm",onClick:()=>t(`/applications/${A}`),children:[r.jsx(ds,{className:"w-4 h-4 mr-2"}),"Download Certificate"]})})]}),O&&r.jsxs(fn,{className:"mb-6 border-destructive/40 bg-red-50",children:[r.jsx(oo,{className:"h-5 w-5 text-red-600"}),r.jsxs("div",{children:[r.jsx(Po,{children:"Payment Failed"}),r.jsxs(mn,{children:["We could not confirm the payment for application ",R||A,". Please try again or contact support with your HimKosh reference ID."]})]})]}),$.role==="property_owner"&&r.jsx(REe,{}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:"Dashboard"}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your applications"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(te,{variant:"outline",onClick:g,children:[r.jsx(Na,{className:"w-4 h-4 mr-2"})," Refresh"]}),$.role==="property_owner"&&S&&r.jsx(te,{variant:"secondary",onClick:()=>t("/existing-owner"),"data-testid":"button-existing-rc-registration",children:"Existing RC Registration"}),$.role==="property_owner"&&r.jsxs(te,{onClick:()=>{const P=D.find(z=>z.status!=="approved"&&z.status!=="rejected");P?P.status==="draft"?t(`/applications/new?draft=${P.id}`):t(`/applications/${P.id}`):d(!0)},children:[r.jsx(Bm,{className:"w-4 h-4 mr-2"})," New Application"]})]})]}),L.paymentPending>0&&$.role==="property_owner"&&r.jsx("div",{className:"mb-6 p-4 border rounded-lg bg-green-50 border-green-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_a,{className:"h-5 w-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-green-800",children:"Payment Pending"}),r.jsxs("p",{className:"text-sm text-green-700",children:["You have ",L.paymentPending," application(s) ready for payment."]})]})]})}),L.sentBack>0&&$.role==="property_owner"&&(()=>{const P=D.find(z=>z.status==="sent_back_for_corrections"||z.status==="reverted_to_applicant"||z.status==="reverted_by_dtdo");return P?r.jsxs("div",{className:"mb-6 flex items-start gap-4 rounded-lg border-2 border-orange-400 bg-orange-50 p-5",children:[r.jsx(jn,{className:"w-7 h-7 text-orange-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-orange-800",children:" Action Required"}),r.jsx("p",{className:"text-orange-700 mt-1",children:P.status==="reverted_by_dtdo"?"The DTDO has requested revisions to your application. Please review the remarks and make the necessary corrections.":"The Dealing Assistant has sent back your application for corrections. Please review the feedback and resubmit."}),r.jsxs("div",{className:"flex flex-wrap gap-3 mt-4",children:[r.jsxs(te,{className:"bg-orange-600 hover:bg-orange-700",onClick:()=>t(`/applications/new?application=${P.id}`),children:[r.jsx(Zxe,{className:"w-4 h-4 mr-2"}),"Review & Submit Corrections"]}),r.jsx(te,{variant:"outline",onClick:()=>t(`/applications/${P.id}`),children:"View Details"})]})]})]}):null})(),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[r.jsx(me,{className:Xe("cursor-pointer hover:shadow-md transition shadow-sm border-l-4 border-l-emerald-500",n==="new_applications"&&"ring-2 ring-emerald-500"),onClick:()=>s("new_applications"),children:r.jsxs(ge,{className:"p-4",children:[r.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1",children:"New Applications"}),r.jsx("div",{className:"text-3xl font-bold text-foreground",children:L.newApps}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Drafts: ",L.draft,"  Submitted: ",L.submitted]})]})}),r.jsx(me,{className:Xe("cursor-pointer hover:shadow-md transition shadow-sm border-l-4 border-l-blue-500",n==="under_process"&&"ring-2 ring-blue-500"),onClick:()=>s("under_process"),children:r.jsxs(ge,{className:"p-4",children:[r.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1",children:"Under Process"}),r.jsx("div",{className:"text-3xl font-bold text-foreground",children:L.underProcess}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Inspections: ",L.inspectionScheduled,"  Payment pending: ",L.paymentPending]})]})}),r.jsx(me,{className:Xe("cursor-pointer hover:shadow-md transition shadow-sm border-l-4 border-l-orange-500 bg-orange-50/30",n==="sent_back"&&"ring-2 ring-orange-500"),onClick:()=>s("sent_back"),children:r.jsxs(ge,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("div",{className:"text-xs font-semibold text-orange-700 uppercase tracking-wider",children:"Pending / Corrections"}),L.sentBack>0&&r.jsx(jn,{className:"w-4 h-4 text-orange-500"})]}),r.jsx("div",{className:"text-3xl font-bold text-orange-900",children:L.sentBack}),r.jsxs("div",{className:"text-xs text-orange-700/70 mt-1",children:["Sent back: ",L.sentBack,"  Resubmitted: ",L.resubmitted]})]})}),r.jsx(me,{className:Xe("cursor-pointer hover:shadow-md transition shadow-sm border-l-4 border-l-gray-300",n==="completed"&&"ring-2 ring-gray-400"),onClick:()=>s("completed"),children:r.jsxs(ge,{className:"p-4",children:[r.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1",children:"Completed"}),r.jsx("div",{className:"text-3xl font-bold text-foreground",children:L.approved+L.rejected}),r.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Approved: ",L.approved,"  Rejected: ",L.rejected]})]})})]}),$.role==="property_owner"&&r.jsx("div",{className:"mb-8",children:r.jsxs(me,{className:"bg-gradient-to-r from-slate-50 to-white dark:from-slate-900 dark:to-background border-slate-200 dark:border-slate-800",children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(x5,{className:"w-5 h-5 text-slate-600"}),r.jsx(ke,{className:"text-lg",children:"Useful Formats"})]}),r.jsx(Ue,{children:"Downloadable formats for required documents."})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("a",{href:"/print/affidavit",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-lg border bg-white hover:bg-slate-50 transition-colors group",children:[r.jsx("div",{className:"p-2 rounded-full bg-emerald-50 text-emerald-600 group-hover:bg-emerald-100 transition-colors",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:"Affidavit Format"}),r.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-emerald-600 transition-colors",children:"Section 29 Declaration"})]})]}),r.jsxs("a",{href:"/print/undertaking",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-lg border bg-white hover:bg-slate-50 transition-colors group",children:[r.jsx("div",{className:"p-2 rounded-full bg-blue-50 text-blue-600 group-hover:bg-blue-100 transition-colors",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:"Undertaking Format"}),r.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-blue-600 transition-colors",children:"Form-C Acceptance"})]})]})]})})]})}),D.length>0&&(()=>{const P=D.find(Z=>Z.status!=="approved"&&Z.status!=="rejected")||D[0];if(!P)return null;const z=Q$(P);return r.jsxs(me,{className:"mb-8",children:[r.jsx(Ce,{className:"pb-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{className:"text-base",children:"Application Status"}),r.jsxs(Ue,{children:[P.propertyName||"Your Application","  ",P.applicationNumber||"DRAFT"]})]}),r.jsxs("div",{className:"flex gap-2",children:[P.status==="draft"&&r.jsx(te,{variant:"destructive",size:"icon",onClick:()=>p(P.id),title:"Discard Draft",className:"h-9 w-9 bg-rose-100 text-rose-600 hover:bg-rose-200 border-rose-200 border shadow-none",children:r.jsx(nh,{className:"w-4 h-4"})}),r.jsx(te,{variant:"outline",size:"sm",onClick:()=>{P.status==="draft"?t(`/applications/new?draft=${P.id}`):t(`/applications/${P.id}`)},children:"View Details"})]})]})}),r.jsxs(ge,{children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"flex items-center gap-1",children:vb.map((Z,F)=>{const W=F<=z.stageIndex,G=F<z.stageIndex,H=F===vb.length-1;return r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsx("div",{className:Xe("flex h-8 w-8 items-center justify-center rounded-full border-2 text-xs font-semibold transition-all shrink-0",W?"border-emerald-500 bg-emerald-500 text-white shadow-[0_0_0_4px_rgba(34,197,94,0.15)]":"border-muted-foreground/30 bg-background text-muted-foreground"),children:W&&r.jsx(Fr,{className:"w-4 h-4"})}),!H&&r.jsx("div",{className:Xe("h-[3px] flex-1 rounded-full transition-all mx-1",G?"bg-gradient-to-r from-emerald-300 to-emerald-500":"bg-muted-foreground/20")})]},Z.id)})}),r.jsx("div",{className:"mt-3 grid gap-2 text-center text-[10px] font-semibold uppercase tracking-wide",style:{gridTemplateColumns:`repeat(${vb.length}, minmax(0, 1fr))`},children:vb.map((Z,F)=>r.jsx("span",{className:Xe("leading-tight",F<=z.stageIndex?"text-emerald-600":"text-muted-foreground"),children:Z.label},`${Z.id}-label`))})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:z.summary})]})]})})(),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx(ke,{children:"Applications"}),r.jsx(Ue,{children:n==="all"?"All your applications":`Viewing ${n.replace("_"," ")} applications`})]})})}),r.jsx(ge,{children:w?r.jsxs("div",{className:"space-y-3",children:[r.jsx(Lr,{className:"h-16 w-full"}),r.jsx(Lr,{className:"h-16 w-full"})]}):M.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(ir,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No applications found matching this filter."}),$.role==="property_owner"&&n==="all"&&!D.some(P=>P.status!=="approved"&&P.status!=="rejected")&&r.jsx(te,{variant:"ghost",onClick:()=>l(!0),className:"mt-2",children:"Start a new application"})]}):r.jsx("div",{className:"space-y-4",children:M.map(P=>{const z=Q$(P);return r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition cursor-pointer gap-4",onClick:()=>{q(P)==="adventure_sports"?P.status==="draft"?t(`/adventure-sports/register?id=${P.id}`):t(`/adventure-sports/applications/${P.id}`):P.status==="draft"?t(`/applications/new?draft=${P.id}`):t(`/applications/${P.id}`)},children:[r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:Xe("p-2 rounded-lg mt-1",q(P)==="homestay"?"bg-emerald-100 text-emerald-700":"bg-blue-100 text-blue-700"),children:q(P)==="homestay"?r.jsx(Ba,{className:"h-5 w-5"}):r.jsx(rh,{className:"h-5 w-5"})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h4",{className:"font-semibold text-lg",children:P.propertyName||"Untitled Application"}),V(P.status||"draft")]}),r.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2 mt-1",children:[r.jsxs("span",{children:["#",P.applicationNumber||"DRAFT"]}),r.jsx("span",{className:"hidden md:inline",children:""}),r.jsx("span",{className:"capitalize",children:q(P).replace("_"," ")}),P.district&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"hidden md:inline",children:""}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Js,{className:"h-3 w-3"})," ",P.district]})]})]}),r.jsx("div",{className:"text-xs text-muted-foreground mt-2 md:hidden",children:z.summary})]})]}),r.jsxs("div",{className:"flex flex-col md:items-end gap-2 md:w-1/3",children:[r.jsx("span",{className:"text-sm text-muted-foreground hidden md:block text-right",children:z.summary}),r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(Vs,{className:"h-3 w-3"}),"Updated ",new Date(P.updatedAt||P.createdAt||Date.now()).toLocaleDateString()]})]})]},P.id)})})})]}),r.jsx(us,{open:o,onOpenChange:l,children:r.jsxs(Jn,{className:"sm:max-w-md",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Start New Application"}),r.jsx(Ns,{children:"Select the type of service you want to register for."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[r.jsxs("div",{className:"cursor-pointer border rounded-lg p-4 hover:border-emerald-500 hover:bg-emerald-50 transition text-center space-y-2 group",onClick:()=>{l(!1),d(!0)},children:[r.jsx("div",{className:"h-12 w-12 bg-emerald-100 text-emerald-700 rounded-full flex items-center justify-center mx-auto group-hover:bg-emerald-200 transition",children:r.jsx(Ba,{className:"h-6 w-6"})}),r.jsx("h3",{className:"font-medium",children:"Homestay"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Register B&B / Homestay"})]}),r.jsxs("div",{className:"cursor-pointer border rounded-lg p-4 hover:border-blue-500 hover:bg-blue-50 transition text-center space-y-2 group",onClick:()=>{l(!1),t("/adventure-sports/register")},children:[r.jsx("div",{className:"h-12 w-12 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center mx-auto group-hover:bg-blue-200 transition",children:r.jsx(rh,{className:"h-6 w-6"})}),r.jsx("h3",{className:"font-medium",children:"Adventure Sports"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Water, Air & Land Sports"})]})]})]})}),r.jsx(us,{open:!!u,onOpenChange:P=>!P&&h(null),children:r.jsxs(Jn,{className:"max-w-4xl h-[80vh] flex flex-col p-0",children:[r.jsxs(js,{className:"p-4 border-b",children:[r.jsx(ws,{children:"Document Preview"}),r.jsx(Ns,{children:"Previewing document template. You can download the editable format using the Download button."})]}),r.jsx("div",{className:"flex-1 bg-slate-100 p-4",children:u&&r.jsx("iframe",{src:u,className:"w-full h-full rounded border bg-white shadow-sm",title:"Document Preview"})}),r.jsx(Fa,{className:"p-4 border-t",children:r.jsx(te,{onClick:()=>h(null),children:"Close Preview"})})]})}),r.jsx(us,{open:c,onOpenChange:d,children:r.jsxs(Jn,{className:"max-w-2xl max-h-[85vh] overflow-y-auto p-0",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-emerald-700 text-white p-6 rounded-t-lg",children:r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-3 text-2xl text-white",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx(Mi,{className:"w-5 h-5"})}),"Documents Checklist"]}),r.jsx(Ns,{className:"text-emerald-100 text-lg mt-2",children:"Keep these documents ready before you start your application."})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-lg p-4 flex items-start gap-3",children:[r.jsx(Kr,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-emerald-800 text-sm",children:"File Size Limits"}),r.jsxs("p",{className:"text-sm text-emerald-700",children:[" ",r.jsx("strong",{children:"Documents (PDF)"}),": Max 5 MB per file.",r.jsx("br",{})," ",r.jsx("strong",{children:"Photos"}),": Max 10 MB per file (we will optimize them for you)."]})]})]}),r.jsxs("div",{className:"flex items-start gap-3 p-4 bg-blue-50 border border-blue-100 rounded-xl",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:r.jsx(Ux,{className:"w-4 h-4 text-blue-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-blue-900 text-sm",children:"Pro Tip"}),r.jsx("p",{className:"text-sm text-blue-700",children:"Having all documents ready will help you complete the application in one session"})]})]}),r.jsx("div",{className:"p-5 rounded-xl border-2 border-amber-200 bg-gradient-to-br from-amber-50 to-orange-50",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-amber-100 flex items-center justify-center shrink-0",children:r.jsx(dQ,{className:"w-6 h-6 text-amber-600"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold text-lg text-amber-900",children:"Property Photographs"}),r.jsxs("p",{className:"text-amber-800 mt-1",children:["Upload ",r.jsx("span",{className:"font-bold text-amber-950",children:"minimum 2"})," and up to ",r.jsx("span",{className:"font-bold text-amber-950",children:"10 best photographs"})," of your property."]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:["External views","Rooms","Bathrooms","Common areas","Surroundings"].map(P=>r.jsx("span",{className:"px-2.5 py-1 bg-amber-100 text-amber-800 text-xs font-medium rounded-full",children:P},P))})]})]})}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-bold text-base text-foreground flex items-center gap-2 mb-4",children:[r.jsx(x5,{className:"w-5 h-5 text-muted-foreground"}),"Required Documents",r.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"(Rule 4, ANNEXURE-II)"})]}),r.jsxs("div",{className:"space-y-3",children:[[{title:"Revenue Papers (Jamabandi/Tatima)",desc:"Land ownership proof [ANNEXURE-II, Sl.3]",template:null},{title:"Affidavit (Section 29)",desc:"Self-declaration [ANNEXURE-II, Sl.4]",template:"/print/affidavit"},{title:"Undertaking (Form-C)",desc:"Compliance declaration [ANNEXURE-II, Sl.5]",template:"/print/undertaking"}].map((P,z)=>r.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border bg-card hover:bg-muted/50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center shrink-0",children:r.jsx(Qp,{className:"w-5 h-5 text-emerald-600"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-foreground",children:P.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:P.desc})]}),P.template?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("a",{href:P.template,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded-lg transition-colors",onClick:Z=>Z.stopPropagation(),children:[r.jsx(ds,{className:"w-3 h-3"}),"Format"]}),r.jsx("a",{href:"#",className:"flex items-center justify-center w-8 h-8 text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded-lg transition-colors",onClick:Z=>{Z.preventDefault(),Z.stopPropagation(),P.template&&h(P.template)},title:"Preview",children:r.jsx(Cg,{className:"w-4 h-4"})})]}):r.jsx(Fr,{className:"w-5 h-5 text-muted-foreground/30"})]},z)),r.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl border border-dashed bg-slate-50 hover:bg-slate-100 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-200 flex items-center justify-center shrink-0",children:r.jsx(Qp,{className:"w-5 h-5 text-slate-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:"font-bold text-slate-700",children:["Co-sharer Affidavit ",r.jsx("span",{className:"text-xs font-normal text-amber-600",children:"(If joint ownership)"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"For joint holding [ANNEXURE-I, 6b]"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("a",{href:"/templates/co-sharer-affidavit.html",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-3 py-1.5 text-xs font-medium text-slate-600 bg-slate-200 hover:bg-slate-300 rounded-lg transition-colors",onClick:P=>P.stopPropagation(),children:[r.jsx(ds,{className:"w-3 h-3"}),"Format"]}),r.jsx("a",{href:"#",className:"flex items-center justify-center w-8 h-8 text-slate-600 bg-slate-200 hover:bg-slate-300 rounded-lg transition-colors",onClick:P=>{P.preventDefault(),P.stopPropagation(),h("/templates/co-sharer-affidavit.html")},title:"Preview",children:r.jsx(Cg,{className:"w-4 h-4"})})]})]})]})]}),r.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"px-5 py-4 bg-gradient-to-r from-yellow-50 to-amber-50 border-b border-yellow-100",children:[r.jsxs("h3",{className:"font-bold text-base text-yellow-900 flex items-center gap-2",children:[r.jsx(Cl,{className:"w-5 h-5"}),"Additional for Gold & Diamond Category",r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-amber-500 text-white text-xs font-medium rounded",children:"Required"})]}),r.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"These documents are mandatory if applying for Gold or Diamond category."})]}),r.jsx("div",{className:"p-4 space-y-3 bg-yellow-50/30",children:[{title:"Commercial Electricity Bill",desc:"Recent utility bill under commercial connection"},{title:"Commercial Water Bill",desc:"Recent water connection bill"}].map((P,z)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-white border border-yellow-100",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-yellow-100 flex items-center justify-center shrink-0",children:r.jsx(Qp,{className:"w-4 h-4 text-yellow-700"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm text-foreground",children:P.title}),r.jsx("p",{className:"text-xs text-muted-foreground",children:P.desc})]})]},z))})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-slate-50 border border-slate-200",children:[r.jsxs("h4",{className:"font-semibold text-sm text-slate-700 flex items-center gap-2 mb-3",children:[r.jsx(Js,{className:"w-4 h-4"}),"You'll also need to provide:"]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:["Property address with PIN","Owner Aadhaar number","Number of rooms & rates","GPS coordinates (optional)"].map((P,z)=>r.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-400"}),P]},z))})]})]}),r.jsxs("div",{className:"p-6 pt-4 border-t bg-muted/30 flex flex-col sm:flex-row gap-3",children:[r.jsx(te,{variant:"outline",onClick:()=>d(!1),className:"flex-1 h-12 text-base",children:"I'll Come Back Later"}),r.jsxs(te,{onClick:()=>{d(!1),t("/applications/new")},className:"flex-1 h-12 text-base bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(Fr,{className:"w-5 h-5 mr-2"}),"I Have All Documents Ready"]})]})]})})]})]})}const FEe={draft:"draft",submitted:"submitted",forwarded_to_dtdo:"submitted",under_scrutiny:"under_review",dtdo_review:"under_review",legacy_rc_review:"under_review",correction_resubmitted:"under_review",sent_back_for_corrections:"correction_required",reverted_to_applicant:"correction_required",reverted_by_dtdo:"correction_required",objection_raised:"correction_required",inspection_scheduled:"inspection_pending",scheduled:"inspection_pending",verified_for_payment:"payment_pending",approved:"approved",rejected:"rejected",certificate_cancelled:"cancelled",superseded:"cancelled"},$Ee={draft:"Draft",submitted:"Submitted",under_review:"Under Review",correction_required:"Correction Required",inspection_pending:"Inspection Pending",payment_pending:"Payment Pending",approved:"Approved",rejected:"Rejected",cancelled:"Cancelled"};function BEe(e){return e?FEe[e]||"under_review":"draft"}function VEe(e){if(!e)return"Draft";const t=BEe(e);return $Ee[t]}const UEe=["sent_back_for_corrections","reverted_to_applicant","reverted_by_dtdo","objection_raised"],qEe=new Set(UEe),mf=e=>e?qEe.has(e):!1,zEe=[{id:"da_review",label:"With Dealing Assistant",short:"DA Review"},{id:"forwarded_dtdo",label:"Forwarded to DTDO",short:"DTDO"},{id:"inspection_scheduled",label:"Inspection Scheduled",short:"Inspection"},{id:"inspection_completed",label:"Inspection Completed",short:"Completed"},{id:"payment_pending",label:"Payment Pending",short:"Payment"},{id:"certificate",label:"Registration Approved",short:"Approved"}],HEe=[{id:"da_review",label:"With Dealing Assistant",short:"DA Review"},{id:"forwarded_dtdo",label:"Forwarded to DTDO",short:"DTDO"},{id:"certificate",label:"RC Verified",short:"Verified"}],WEe={draft:0,submitted:0,under_scrutiny:0,district_review:0,sent_back_for_corrections:0,reverted_to_applicant:0,forwarded_to_dtdo:1,state_review:1,dtdo_review:1,reverted_by_dtdo:1,inspection_scheduled:2,inspection_under_review:3,inspection_completed:3,payment_pending:4,verified_for_payment:4,approved:5,rejected:5},KEe={draft:0,submitted:0,under_scrutiny:0,district_review:0,sent_back_for_corrections:0,reverted_to_applicant:0,forwarded_to_dtdo:1,state_review:1,dtdo_review:1,approved:2,rejected:2},GEe=e=>{const t=e.applicationKind==="existing_rc_onboarding",n=t?HEe:zEe,s=t?KEe:WEe;let i=e.status?s[e.status]??0:0;t||(e.siteInspectionCompletedDate?i=Math.max(i,3):e.siteInspectionScheduledDate&&(i=Math.max(i,2)),(e.status==="payment_pending"||e.status==="verified_for_payment")&&(i=Math.max(i,4))),(e.approvedAt||e.status==="approved")&&(i=n.length-1);const a=Math.min(Math.max(i,0),n.length-1);return{stageIndex:a,currentMilestone:n[a],milestones:n}},YEe=e=>{const t=e.status,n={draft:"Complete the draft to submit your application.",submitted:"Your application is with the Dealing Assistant for review.",under_scrutiny:"Your application is being reviewed by the Dealing Assistant.",district_review:"Your application is with the Dealing Assistant for review.",forwarded_to_dtdo:"Your application has been forwarded to DTDO for final decision.",state_review:"Your application is with the DTDO for decision.",dtdo_review:"Your application is under DTDO review.",sent_back_for_corrections:"Action required: update the application with the requested corrections.",reverted_to_applicant:"Action required: update the application with the requested corrections.",reverted_by_dtdo:"DTDO requested revisions  please review the remarks.",inspection_scheduled:"The inspection has been scheduled. Keep an eye on notifications.",inspection_under_review:"Inspection report is under review.",inspection_completed:"Inspection finished. Awaiting final payment instructions.",payment_pending:"Complete the payment to receive your registration certificate.",verified_for_payment:"Payment verified  certificate will unlock shortly.",approved:e.certificateNumber?`Certificate ${e.certificateNumber} is ready for download.`:"Certificate is ready for download.",rejected:"Application closed. Contact support for clarifications."};return t?n[t]||"We'll keep this tracker updated and notify you when action is needed.":""};function XEe(){var q;const[e,t]=Dr(),n=ci(),[s,i]=b.useState(!1),{toast:a}=Tr(),o=async M=>{if(confirm("Are you sure you want to discard this draft? This action cannot be undone."))try{await lt("DELETE",`/api/applications/${M}`),a({title:"Draft discarded",description:"Your draft application has been deleted."}),l()}catch(L){console.error("Failed to delete draft:",L),a({title:"Error",description:"Failed to discard draft. Please try again.",variant:"destructive"})}},l=()=>{n.invalidateQueries({queryKey:["/api/applications"]}),n.invalidateQueries({queryKey:["/api/auth/me"]})},{data:c,isLoading:d}=rt({queryKey:["/api/auth/me"],retry:!1}),{data:u,isLoading:h}=rt({queryKey:["/api/applications"],enabled:!!(c!=null&&c.user)}),{data:f}=rt({queryKey:["/api/existing-owners/draft"],enabled:!!(c!=null&&c.user),staleTime:30*1e3}),m=!!(f!=null&&f.draft),{data:p}=rt({queryKey:["/api/settings/enable-legacy-registrations"],staleTime:60*1e3}),g=(p==null?void 0:p.enabled)!==!1;if(d)return r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx(Lr,{className:"h-12 w-48"})});if(!(c!=null&&c.user))return setTimeout(()=>t("/login"),0),r.jsx("div",{className:"flex items-center justify-center p-8",children:r.jsx("p",{children:"Redirecting to login..."})});const v=c.user,x=(u==null?void 0:u.applications)||[],y=x[0]||null,j=y&&(y.status==="draft"||y.status!=="approved"&&y.status!=="rejected"),w=M=>{var L;return mf(M.status)&&!!((L=M.latestCorrection)!=null&&L.createdAt||M.correctionSubmissionCount)},N=x.filter(M=>M.status==="draft").length,S=x.filter(M=>M.status!=="draft"&&M.status!=="approved"&&M.status!=="rejected"&&!w(M)).length,T=x.filter(M=>M.status==="inspection_scheduled"||M.status==="inspection_completed"||M.status==="inspection_under_review"||M.status==="payment_pending"||M.status==="verified_for_payment").length,C=x.filter(M=>M.status==="sent_back_for_corrections"||M.status==="reverted_to_applicant"||M.status==="reverted_by_dtdo"||w(M)).length,A=x.filter(M=>M.status==="approved"||M.status==="rejected").length,R=x.filter(M=>M.status==="approved").length,k=x.filter(M=>M.status==="rejected").length,O=N+S,$=x.filter(M=>M.status==="sent_back_for_corrections"||M.status==="reverted_to_applicant"||M.status==="reverted_by_dtdo"||w(M)).filter(M=>{var L;return!((L=M.latestCorrection)!=null&&L.createdAt)}).length,D=(y==null?void 0:y.applicationKind)==="existing_rc_onboarding";return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between mb-8",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[r.jsx(Ba,{className:"inline w-7 h-7 mr-2 mb-1"}),"Welcome, ",((q=v.fullName)==null?void 0:q.split(" ")[0])||"Owner","!"]}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your homestay applications"})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[r.jsx(te,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),"data-testid":"button-switch-to-old-dashboard",className:"text-xs",children:"Switch to Classic View"}),r.jsxs(te,{variant:"outline",onClick:l,"data-testid":"button-dashboard-refresh",children:[r.jsx(Na,{className:"w-4 h-4 mr-2"}),"Refresh"]}),g&&r.jsx(te,{variant:m?"default":"outline",onClick:()=>t("/existing-owner"),"data-testid":"button-existing-rc-registration",disabled:j&&D,className:m?"bg-emerald-600 hover:bg-emerald-700":"",children:m?r.jsxs(r.Fragment,{children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Resume RC Draft"]}):"Existing RC Registration"}),r.jsxs(te,{onClick:()=>{if(y){y.status==="draft"?t(`/applications/new?draft=${y.id}`):t(`/applications/${y.id}`);return}i(!0)},"data-testid":"button-new-application",disabled:j&&!D,children:[r.jsx(Bm,{className:"w-4 h-4 mr-2"}),"New Application"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4 mb-6",children:[r.jsxs(me,{className:"border-emerald-200 bg-emerald-50/50 dark:border-emerald-800 dark:bg-emerald-950/20",children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ue,{className:"text-emerald-700 dark:text-emerald-400",children:"NEW APPLICATIONS"}),r.jsx(ir,{className:"w-5 h-5 text-emerald-600"})]}),r.jsx(ke,{className:"text-4xl",children:O})]}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Drafts and newly submitted files."}),r.jsxs("div",{className:"flex gap-2 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Drafts: ",N]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Submitted: ",S]})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ue,{children:"UNDER PROCESS"}),r.jsx(Vs,{className:"w-5 h-5 text-blue-600"})]}),r.jsx(ke,{className:"text-4xl",children:T})]}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Inspections and payments in progress."}),r.jsxs("div",{className:"flex gap-2 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Inspection scheduled: ",x.filter(M=>M.status==="inspection_scheduled").length]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Payment pending: ",x.filter(M=>M.status==="payment_pending").length]})]})]})]}),r.jsxs(me,{className:Xe(C>0?"border-amber-200 bg-amber-50/50 dark:border-amber-800 dark:bg-amber-950/20":""),children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ue,{className:C>0?"text-amber-700":"",children:"PENDING / CORRECTIONS"}),C>0?r.jsx(Kr,{className:"w-5 h-5 text-amber-600"}):r.jsx(Fr,{className:"w-5 h-5 text-muted-foreground"})]}),r.jsx(ke,{className:Xe("text-4xl",C>0?"text-amber-600":""),children:C})]}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Applications requiring updates."}),r.jsx("div",{className:"flex gap-2 mt-2 text-xs text-muted-foreground",children:r.jsxs("span",{children:["Sent back: ",$]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(Ue,{children:"COMPLETED"}),r.jsx(Fr,{className:"w-5 h-5 text-green-600"})]}),r.jsx(ke,{className:"text-4xl",children:A})]}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Decisions finalized."}),r.jsxs("div",{className:"flex gap-2 mt-2 text-xs text-muted-foreground",children:[r.jsxs("span",{children:["Approved: ",R]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["Rejected: ",k]})]})]})]})]}),r.jsx("div",{className:"mb-8",children:r.jsxs(me,{className:"bg-gradient-to-r from-slate-50 to-white dark:from-slate-900 dark:to-background border-slate-200 dark:border-slate-800",children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(x5,{className:"w-5 h-5 text-slate-600"}),r.jsx(ke,{className:"text-lg",children:"Useful Formats"})]}),r.jsx(Ue,{children:"Downloadable formats for required documents."})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsxs("a",{href:"/print/affidavit",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-lg border bg-white hover:bg-slate-50 transition-colors group",children:[r.jsx("div",{className:"p-2 rounded-full bg-emerald-50 text-emerald-600 group-hover:bg-emerald-100 transition-colors",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:"Affidavit Format"}),r.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-emerald-600 transition-colors",children:"Section 29 Declaration"})]})]}),r.jsxs("a",{href:"/print/undertaking",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 rounded-lg border bg-white hover:bg-slate-50 transition-colors group",children:[r.jsx("div",{className:"p-2 rounded-full bg-blue-50 text-blue-600 group-hover:bg-blue-100 transition-colors",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-medium",children:"Undertaking Format"}),r.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-blue-600 transition-colors",children:"Form-C Acceptance"})]})]})]})})]})}),y?r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ke,{children:["Status: ",D?"Existing RC Onboarding":"New Application"]}),r.jsx(Ue,{children:"Track your latest homestay application."})]}),r.jsxs("div",{className:"flex gap-2",children:[y.status==="draft"&&r.jsx(te,{variant:"destructive",size:"icon",onClick:()=>o(y.id),title:"Discard Draft",className:"bg-rose-100 text-rose-600 hover:bg-rose-200 border-rose-200 border shadow-none","data-testid":"button-discard-draft",children:r.jsx(nh,{className:"w-4 h-4"})}),r.jsx(te,{variant:"outline",onClick:()=>{y.status==="draft"?t(`/applications/new?draft=${y.id}`):y.status==="sent_back_for_corrections"||y.status==="reverted_to_applicant"||y.status==="reverted_by_dtdo"?t(`/applications/new?application=${y.id}`):t(`/applications/${y.id}`)},children:y.status==="draft"?r.jsxs(r.Fragment,{children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Resume Editing"]}):r.jsxs(r.Fragment,{children:["View Details",r.jsx(lf,{className:"w-4 h-4 ml-2"})]})})]})]})}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-4",children:[(y.status==="sent_back_for_corrections"||y.status==="reverted_to_applicant"||y.status==="reverted_by_dtdo")&&r.jsxs("div",{className:"flex items-start gap-3 rounded-lg border-2 border-orange-400 bg-orange-50 dark:bg-orange-900/20 p-4",children:[r.jsx(jn,{className:"w-6 h-6 text-orange-600 flex-shrink-0 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-orange-800 dark:text-orange-300",children:"Action Required"}),r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400 mt-1",children:y.status==="reverted_by_dtdo"?"The DTDO has requested revisions. Please review the remarks and make the necessary corrections.":"The Dealing Assistant has sent back your application for corrections. Please review and resubmit."}),r.jsxs(te,{className:"mt-3 bg-orange-600 hover:bg-orange-700",size:"sm",onClick:()=>t(`/applications/new?application=${y.id}`),children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Review & Submit Corrections"]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-semibold",children:y.propertyName}),r.jsx(ze,{variant:y.status==="draft"?"outline":"secondary",children:y.status==="draft"?"Draft":y.status.replace(/_/g," ").replace(/\b\w/g,M=>M.toUpperCase())}),r.jsx(ze,{variant:"outline",className:"capitalize",children:y.category})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Application Type:"})," ",D?"Existing RC Onboarding":"New Registration"]}),!D&&r.jsxs("p",{children:[r.jsx("strong",{children:"Location:"})," ",y.district,"  ",y.totalRooms," rooms"]}),y.submittedAt&&r.jsxs("p",{children:[r.jsx("strong",{children:"Submitted:"})," ",new Date(y.submittedAt).toLocaleDateString()]}),y.status==="draft"&&r.jsxs("p",{className:"text-muted-foreground mt-1",children:["Started: ",new Date(y.createdAt).toLocaleDateString(),"  Last edited: ",new Date(y.updatedAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"mt-6 rounded-2xl border bg-white px-4 py-3 shadow-sm dark:bg-card",children:[r.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"APPLICATION PROGRESS"}),r.jsx(QEe,{application:y}),r.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:YEe(y)})]})]})})]}):r.jsx(me,{children:r.jsx(ge,{className:"py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Applications Yet"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"Get started by creating your first homestay application."}),r.jsxs("div",{className:"flex justify-center gap-3",children:[r.jsxs(te,{onClick:()=>i(!0),children:[r.jsx(Bm,{className:"w-4 h-4 mr-2"}),"New Application"]}),g&&r.jsx(te,{variant:"outline",onClick:()=>t("/existing-owner"),children:"Existing RC Holder"})]})]})})}),r.jsx(us,{open:s,onOpenChange:i,children:r.jsxs(Jn,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2 text-xl",children:[r.jsx(Mi,{className:"w-6 h-6 text-emerald-600"}),"Documents Checklist"]}),r.jsx(Ns,{className:"text-lg",children:"Keep these documents ready before you start your application."})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 rounded-lg p-4 flex items-start gap-3",children:[r.jsx(Kr,{className:"w-5 h-5 text-emerald-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-semibold text-emerald-800 text-sm",children:"File Size Limits"}),r.jsxs("p",{className:"text-sm text-emerald-700",children:[" ",r.jsx("strong",{children:"Documents (PDF)"}),": Max 5 MB per file.",r.jsx("br",{})," ",r.jsx("strong",{children:"Photos"}),": Max 10 MB per file (we will optimize them for you)."]})]})]}),r.jsx("div",{className:"p-4 rounded-lg border bg-amber-50 dark:bg-amber-950/20 border-amber-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(dQ,{className:"w-6 h-6 text-amber-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-200",children:"Property Photographs"}),r.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-300 mt-1",children:["Upload ",r.jsx("span",{className:"font-bold",children:"minimum 2"})," and up to ",r.jsx("span",{className:"font-bold",children:"10 best photographs"})," of your property."]}),r.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 mt-2",children:"Include: External views, rooms, common areas, bathrooms, surroundings"})]})]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[r.jsx(x5,{className:"w-5 h-5 text-slate-600"}),"Required Documents ",r.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:"(Rule 4, ANNEXURE-II)"})]}),r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-slate-50 dark:bg-slate-900",children:[r.jsx(Qp,{className:"w-5 h-5 text-emerald-600 shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-bold text-sm",children:"Revenue Papers (Jamabandi/Tatima)"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Land ownership proof [ANNEXURE-II, Sl.3]"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-slate-50 dark:bg-slate-900",children:[r.jsx(Qp,{className:"w-5 h-5 text-emerald-600 shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-bold text-sm",children:"Affidavit (Section 29)"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Self-declaration [ANNEXURE-II, Sl.4]"})]}),r.jsx("a",{href:"/print/affidavit",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded transition-colors shrink-0",children:" Format"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-slate-50 dark:bg-slate-900",children:[r.jsx(Qp,{className:"w-5 h-5 text-emerald-600 shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-bold text-sm",children:"Undertaking (Form-C)"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Compliance declaration [ANNEXURE-II, Sl.5]"})]}),r.jsx("a",{href:"/print/undertaking",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-emerald-700 bg-emerald-100 hover:bg-emerald-200 rounded transition-colors shrink-0",children:" Format"})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-dashed bg-slate-100 dark:bg-slate-800",children:[r.jsx(Qp,{className:"w-5 h-5 text-slate-500 shrink-0"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"font-bold text-sm text-slate-700 dark:text-slate-300",children:["Co-sharer Affidavit ",r.jsx("span",{className:"text-xs font-normal text-amber-600",children:"(If joint ownership)"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"For joint holding [ANNEXURE-I, 6b]"})]}),r.jsx("a",{href:"/templates/co-sharer-affidavit.html",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-slate-600 bg-slate-200 hover:bg-slate-300 rounded transition-colors shrink-0",children:" Format"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Cl,{className:"w-5 h-5 text-slate-600"}),"Additional for Gold & Diamond Category"]}),r.jsxs("div",{className:"grid gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200",children:[r.jsx(_a,{className:"w-5 h-5 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:"Commercial Electricity Bill"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent utility bill under commercial connection"})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-yellow-50 dark:bg-yellow-950/20 border-yellow-200",children:[r.jsx(_a,{className:"w-5 h-5 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:"Commercial Water Bill"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Recent water utility bill"})]})]})]})]}),r.jsx("div",{className:"p-4 rounded-lg border bg-blue-50 dark:bg-blue-950/20 border-blue-200",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Js,{className:"w-6 h-6 text-blue-600 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-200",children:"Property Details Needed"}),r.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-300 mt-2 space-y-1",children:[r.jsx("li",{children:" Exact property address with PIN code"}),r.jsx("li",{children:" Number of rooms and their rates"}),r.jsx("li",{children:" Owner Aadhaar number (for verification)"}),r.jsx("li",{children:" GPS location coordinates (if available)"})]})]})]})})]}),r.jsxs(Fa,{className:"flex-col sm:flex-row gap-3",children:[r.jsx(te,{variant:"outline",onClick:()=>i(!1),className:"w-full sm:w-auto",children:"I'll Come Back Later"}),r.jsxs(te,{onClick:()=>{i(!1),t("/applications/new")},className:"w-full sm:w-auto bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Yes, I Have All Documents Ready"]})]})]})})]})}function QEe({application:e}){const t=GEe(e),n=t.milestones;return r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-1",children:n.map((s,i)=>{const a=i<=t.stageIndex,o=i<t.stageIndex,l=i===n.length-1;return r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsx("div",{className:Xe("flex h-8 w-8 items-center justify-center rounded-full border-2 text-xs font-semibold transition-all",a?"border-primary bg-primary text-white shadow-[0_0_0_4px_rgba(34,197,94,0.15)]":"border-muted-foreground/30 bg-background text-muted-foreground"),children:a&&r.jsx(Fr,{className:"w-4 h-4"})}),!l&&r.jsx("div",{className:Xe("h-[3px] flex-1 rounded-full transition-all mx-1",o?"bg-gradient-to-r from-emerald-300 to-emerald-500":"bg-muted-foreground/20")})]},s.id)})}),r.jsx("div",{className:"mt-3 grid gap-2 text-center text-[10px] font-semibold uppercase tracking-wide",style:{gridTemplateColumns:`repeat(${n.length}, minmax(0, 1fr))`},children:n.map((s,i)=>r.jsx("span",{className:Xe("leading-tight",i<=t.stageIndex?"text-primary":"text-muted-foreground"),children:s.short},`${s.id}-label`))})]})}const Pt=Symbol.for("drizzle:entityKind");function ta(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,Pt))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let n=Object.getPrototypeOf(e).constructor;if(n)for(;n;){if(Pt in n&&n[Pt]===t[Pt])return!0;n=Object.getPrototypeOf(n)}return!1}var Lz,SP;let G1=(Lz=Pt,SP=class{constructor(t,n){Ie(this,"name");Ie(this,"keyAsName");Ie(this,"primary");Ie(this,"notNull");Ie(this,"default");Ie(this,"defaultFn");Ie(this,"onUpdateFn");Ie(this,"hasDefault");Ie(this,"isUnique");Ie(this,"uniqueName");Ie(this,"uniqueType");Ie(this,"dataType");Ie(this,"columnType");Ie(this,"enumValues");Ie(this,"generated");Ie(this,"generatedIdentity");Ie(this,"config");this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}},Ie(SP,Lz,"Column"),SP);var Fz;Fz=Pt;class Tse{constructor(t,n,s){Ie(this,"config");Ie(this,"$default",this.$defaultFn);Ie(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}Ie(Tse,Fz,"ColumnBuilder");const wv=Symbol.for("drizzle:Name");var $z;$z=Pt;class Ese{constructor(t,n){Ie(this,"reference");Ie(this,"_onUpdate","no action");Ie(this,"_onDelete","no action");this.reference=()=>{const{name:s,columns:i,foreignColumns:a}=t();return{name:s,columns:i,foreignTable:a[0].table,foreignColumns:a}},n&&(this._onUpdate=n.onUpdate,this._onDelete=n.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new Ose(t,this)}}Ie(Ese,$z,"PgForeignKeyBuilder");var Bz;Bz=Pt;class Ose{constructor(t,n){Ie(this,"reference");Ie(this,"onUpdate");Ie(this,"onDelete");this.table=t,this.reference=n.reference,this.onUpdate=n._onUpdate,this.onDelete=n._onDelete}getName(){const{name:t,columns:n,foreignColumns:s}=this.reference(),i=n.map(l=>l.name),a=s.map(l=>l.name),o=[this.table[wv],...i,s[0].table[wv],...a];return t??`${o.join("_")}_fk`}}Ie(Ose,Bz,"PgForeignKey");function ZEe(e,...t){return e(...t)}function JEe(e,t){return`${e[wv]}_${t.join("_")}_unique`}function Z$(e,t,n){for(let s=t;s<e.length;s++){const i=e[s];if(i==="\\"){s++;continue}if(i==='"')return[e.slice(t,s).replace(/\\/g,""),s+1];if(!n&&(i===","||i==="}"))return[e.slice(t,s).replace(/\\/g,""),s]}return[e.slice(t).replace(/\\/g,""),e.length]}function Rse(e,t=0){const n=[];let s=t,i=!1;for(;s<e.length;){const a=e[s];if(a===","){(i||s===t)&&n.push(""),i=!0,s++;continue}if(i=!1,a==="\\"){s+=2;continue}if(a==='"'){const[c,d]=Z$(e,s+1,!0);n.push(c),s=d;continue}if(a==="}")return[n,s+1];if(a==="{"){const[c,d]=Rse(e,s+1);n.push(c),s=d;continue}const[o,l]=Z$(e,s,!1);n.push(o),s=l}return[n,s]}function eOe(e){const[t]=Rse(e,1);return t}function Dse(e){return`{${e.map(t=>Array.isArray(t)?Dse(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var Vz,Uz;class Tn extends(Uz=Tse,Vz=Pt,Uz){constructor(){super(...arguments);Ie(this,"foreignKeyConfigs",[])}array(n){return new Ise(this.config.name,this,n)}references(n,s={}){return this.foreignKeyConfigs.push({ref:n,actions:s}),this}unique(n,s){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=s==null?void 0:s.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,s){return this.foreignKeyConfigs.map(({ref:i,actions:a})=>ZEe((o,l)=>{const c=new Ese(()=>{const d=o();return{columns:[n],foreignColumns:[d]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(s)},i,a))}buildExtraConfigColumn(n){return new Mse(n,this.config)}}Ie(Tn,Vz,"PgColumnBuilder");var qz,zz;class ln extends(zz=G1,qz=Pt,zz){constructor(t,n){n.uniqueName||(n.uniqueName=JEe(t,[n.name])),super(t,n),this.table=t}}Ie(ln,qz,"PgColumn");var Hz,Wz;class Mse extends(Wz=ln,Hz=Pt,Wz){constructor(){super(...arguments);Ie(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});Ie(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}Ie(Mse,Hz,"ExtraConfigColumn");var Kz;Kz=Pt;class DN{constructor(t,n,s,i){Ie(this,"name");Ie(this,"keyAsName");Ie(this,"type");Ie(this,"indexConfig");this.name=t,this.keyAsName=n,this.type=s,this.indexConfig=i}}Ie(DN,Kz,"IndexedColumn");var Gz,Yz;class Ise extends(Yz=Tn,Gz=Pt,Yz){constructor(t,n,s){super(t,"array","PgArray"),this.config.baseBuilder=n,this.config.size=s}build(t){const n=this.config.baseBuilder.build(t);return new TT(t,this.config,n)}}Ie(Ise,Gz,"PgArrayBuilder");var Xz,Qz;const p_=class p_ extends(Qz=ln,Xz=Pt,Qz){constructor(n,s,i,a){super(n,s);Ie(this,"size");this.baseColumn=i,this.range=a,this.size=s.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(n){return typeof n=="string"&&(n=eOe(n)),n.map(s=>this.baseColumn.mapFromDriverValue(s))}mapToDriverValue(n,s=!1){const i=n.map(a=>a===null?null:ta(this.baseColumn,p_)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return s?i:Dse(i)}};Ie(p_,Xz,"PgArray");let TT=p_;const J$=Symbol.for("drizzle:isPgEnum");function tOe(e){return!!e&&typeof e=="function"&&J$ in e&&e[J$]===!0}var Zz;Zz=Pt;class h6{constructor(t,n,s,i=!1){this._={brand:"Subquery",sql:t,selectedFields:n,alias:s,isWith:i}}}Ie(h6,Zz,"Subquery");const rOe={startActiveSpan(e,t){return t()}},Nv=Symbol.for("drizzle:ViewBaseConfig"),C4=Symbol.for("drizzle:Schema"),eB=Symbol.for("drizzle:Columns"),tB=Symbol.for("drizzle:ExtraConfigColumns"),A4=Symbol.for("drizzle:OriginalName"),k4=Symbol.for("drizzle:BaseName"),Z5=Symbol.for("drizzle:IsAlias"),rB=Symbol.for("drizzle:ExtraConfigBuilder"),Lse=Symbol.for("drizzle:IsDrizzleTable");var Jz,eH,tH,rH,nH,sH,iH,aH,oH,lH,nN;let sc=(lH=Pt,oH=wv,aH=A4,iH=C4,sH=eB,nH=tB,rH=k4,tH=Z5,eH=Lse,Jz=rB,nN=class{constructor(t,n,s){Ie(this,oH);Ie(this,aH);Ie(this,iH);Ie(this,sH);Ie(this,nH);Ie(this,rH);Ie(this,tH,!1);Ie(this,eH,!0);Ie(this,Jz);this[wv]=this[A4]=t,this[C4]=n,this[k4]=s}},Ie(nN,lH,"Table"),Ie(nN,"Symbol",{Name:wv,Schema:C4,OriginalName:A4,Columns:eB,ExtraConfigColumns:tB,BaseName:k4,IsAlias:Z5,ExtraConfigBuilder:rB}),nN);function Fse(e){return typeof e=="object"&&e!==null&&Lse in e}function nOe(e){return e!=null&&typeof e.getSQL=="function"}function sOe(e){var n;const t={sql:"",params:[]};for(const s of e)t.sql+=s.sql,t.params.push(...s.params),(n=s.typings)!=null&&n.length&&(t.typings||(t.typings=[]),t.typings.push(...s.typings));return t}var cH;cH=Pt;class Hc{constructor(t){Ie(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new Ii([this])}}Ie(Hc,cH,"StringChunk");var dH;dH=Pt;const Kp=class Kp{constructor(t){Ie(this,"decoder",$se);Ie(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return rOe.startActiveSpan("drizzle.buildSQL",n=>{const s=this.buildQueryFromSourceParams(this.queryChunks,t);return n==null||n.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(t,n){const s=Object.assign({},n,{inlineParams:n.inlineParams||this.shouldInlineParams,paramStartIndex:n.paramStartIndex||{value:0}}),{casing:i,escapeName:a,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:d}=s;return sOe(t.map(u=>{var h;if(ta(u,Hc))return{sql:u.value.join(""),params:[]};if(ta(u,J5))return{sql:a(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const f=[new Hc("(")];for(const[m,p]of u.entries())f.push(p),m<u.length-1&&f.push(new Hc(", "));return f.push(new Hc(")")),this.buildQueryFromSourceParams(f,s)}if(ta(u,Kp))return this.buildQueryFromSourceParams(u.queryChunks,{...s,inlineParams:c||u.shouldInlineParams});if(ta(u,sc)){const f=u[sc.Symbol.Schema],m=u[sc.Symbol.Name];return{sql:f===void 0||u[Z5]?a(m):a(f)+"."+a(m),params:[]}}if(ta(u,G1)){const f=i.getColumnCasing(u);if(n.invokeSource==="indexes")return{sql:a(f),params:[]};const m=u.table[sc.Symbol.Schema];return{sql:u.table[Z5]||m===void 0?a(u.table[sc.Symbol.Name])+"."+a(f):a(m)+"."+a(u.table[sc.Symbol.Name])+"."+a(f),params:[]}}if(ta(u,Use)){const f=u[Nv].schema,m=u[Nv].name;return{sql:f===void 0||u[Nv].isAlias?a(m):a(f)+"."+a(m),params:[]}}if(ta(u,f6)){if(ta(u.value,eS))return{sql:o(d.value++,u),params:[u],typings:["none"]};const f=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(ta(f,Kp))return this.buildQueryFromSourceParams([f],s);if(c)return{sql:this.mapInlineParam(f,s),params:[]};let m=["none"];return l&&(m=[l(u.encoder)]),{sql:o(d.value++,f),params:[f],typings:m}}return ta(u,eS)?{sql:o(d.value++,u),params:[u],typings:["none"]}:ta(u,Kp.Aliased)&&u.fieldAlias!==void 0?{sql:a(u.fieldAlias),params:[]}:ta(u,h6)?u._.isWith?{sql:a(u._.alias),params:[]}:this.buildQueryFromSourceParams([new Hc("("),u._.sql,new Hc(") "),new J5(u._.alias)],s):tOe(u)?u.schema?{sql:a(u.schema)+"."+a(u.enumName),params:[]}:{sql:a(u.enumName),params:[]}:nOe(u)?(h=u.shouldOmitSQLParens)!=null&&h.call(u)?this.buildQueryFromSourceParams([u.getSQL()],s):this.buildQueryFromSourceParams([new Hc("("),u.getSQL(),new Hc(")")],s):c?{sql:this.mapInlineParam(u,s),params:[]}:{sql:o(d.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(t,{escapeString:n}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return n(t);if(typeof t=="object"){const s=t.toString();return n(s==="[object Object]"?JSON.stringify(t):s)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new Kp.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};Ie(Kp,dH,"SQL");let Ii=Kp;var uH;uH=Pt;class J5{constructor(t){Ie(this,"brand");this.value=t}getSQL(){return new Ii([this])}}Ie(J5,uH,"Name");const $se={mapFromDriverValue:e=>e},Bse={mapToDriverValue:e=>e};({...$se,...Bse});var hH;hH=Pt;class f6{constructor(t,n=Bse){Ie(this,"brand");this.value=t,this.encoder=n}getSQL(){return new Ii([this])}}Ie(f6,hH,"Param");function yn(e,...t){const n=[];(t.length>0||e.length>0&&e[0]!=="")&&n.push(new Hc(e[0]));for(const[s,i]of t.entries())n.push(i,new Hc(e[s+1]));return new Ii(n)}(e=>{function t(){return new Ii([])}e.empty=t;function n(c){return new Ii(c)}e.fromList=n;function s(c){return new Ii([new Hc(c)])}e.raw=s;function i(c,d){const u=[];for(const[h,f]of c.entries())h>0&&d!==void 0&&u.push(d),u.push(f);return new Ii(u)}e.join=i;function a(c){return new J5(c)}e.identifier=a;function o(c){return new eS(c)}e.placeholder=o;function l(c,d){return new f6(c,d)}e.param=l})(yn||(yn={}));(e=>{var n;n=Pt;const s=class s{constructor(a,o){Ie(this,"isSelectionField",!1);this.sql=a,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};Ie(s,n,"SQL.Aliased");let t=s;e.Aliased=t})(Ii||(Ii={}));var fH;fH=Pt;class eS{constructor(t){this.name=t}getSQL(){return new Ii([this])}}Ie(eS,fH,"Placeholder");const Vse=Symbol.for("drizzle:IsDrizzleView");var mH,pH,gH;gH=Pt,pH=Nv,mH=Vse;class Use{constructor({name:t,schema:n,selectedFields:s,query:i}){Ie(this,pH);Ie(this,mH,!0);this[Nv]={name:t,originalName:t,schema:n,selectedFields:s,query:i,isExisting:!i,isAlias:!1}}getSQL(){return new Ii([this])}}Ie(Use,gH,"View");function iOe(e){return typeof e=="object"&&e!==null&&Vse in e}G1.prototype.getSQL=function(){return new Ii([this])};sc.prototype.getSQL=function(){return new Ii([this])};h6.prototype.getSQL=function(){return new Ii([this])};function aOe(e){return e[sc.Symbol.Columns]}function oOe(e){return e[Nv].selectedFields}function Va(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var xH,vH;class ow extends(vH=Tn,xH=Pt,vH){generatedAlwaysAsIdentity(t){if(t){const{name:n,...s}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...s}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}Ie(ow,xH,"PgIntColumnBaseBuilder");var yH,bH;class qse extends(bH=ow,yH=Pt,bH){constructor(t){super(t,"number","PgBigInt53")}build(t){return new zse(t,this.config)}}Ie(qse,yH,"PgBigInt53Builder");var jH,wH;class zse extends(wH=ln,jH=Pt,wH){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}Ie(zse,jH,"PgBigInt53");var NH,SH;class Hse extends(SH=ow,NH=Pt,SH){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new Wse(t,this.config)}}Ie(Hse,NH,"PgBigInt64Builder");var _H,CH;class Wse extends(CH=ln,_H=Pt,CH){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}Ie(Wse,_H,"PgBigInt64");function lOe(e,t){const{name:n,config:s}=Va(e,t);return s.mode==="number"?new qse(n):new Hse(n)}var AH,kH;class Kse extends(kH=Tn,AH=Pt,kH){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Gse(t,this.config)}}Ie(Kse,AH,"PgBigSerial53Builder");var PH,TH;class Gse extends(TH=ln,PH=Pt,TH){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}Ie(Gse,PH,"PgBigSerial53");var EH,OH;class Yse extends(OH=Tn,EH=Pt,OH){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new Xse(t,this.config)}}Ie(Yse,EH,"PgBigSerial64Builder");var RH,DH;class Xse extends(DH=ln,RH=Pt,DH){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}Ie(Xse,RH,"PgBigSerial64");function cOe(e,t){const{name:n,config:s}=Va(e,t);return s.mode==="number"?new Kse(n):new Yse(n)}var MH,IH;class Qse extends(IH=Tn,MH=Pt,IH){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new Zse(t,this.config)}}Ie(Qse,MH,"PgBooleanBuilder");var LH,FH;class Zse extends(FH=ln,LH=Pt,FH){getSQLType(){return"boolean"}}Ie(Zse,LH,"PgBoolean");function ai(e){return new Qse(e??"")}var $H,BH;class Jse extends(BH=Tn,$H=Pt,BH){constructor(t,n){super(t,"string","PgChar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new eie(t,this.config)}}Ie(Jse,$H,"PgCharBuilder");var VH,UH;class eie extends(UH=ln,VH=Pt,UH){constructor(){super(...arguments);Ie(this,"length",this.config.length);Ie(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}Ie(eie,VH,"PgChar");function dOe(e,t={}){const{name:n,config:s}=Va(e,t);return new Jse(n,s)}var qH,zH;class tie extends(zH=Tn,qH=Pt,zH){constructor(t){super(t,"string","PgCidr")}build(t){return new rie(t,this.config)}}Ie(tie,qH,"PgCidrBuilder");var HH,WH;class rie extends(WH=ln,HH=Pt,WH){getSQLType(){return"cidr"}}Ie(rie,HH,"PgCidr");function uOe(e){return new tie(e??"")}var KH,GH;class nie extends(GH=Tn,KH=Pt,GH){constructor(t,n,s){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=n,this.config.customTypeParams=s}build(t){return new sie(t,this.config)}}Ie(nie,KH,"PgCustomColumnBuilder");var YH,XH;class sie extends(XH=ln,YH=Pt,XH){constructor(n,s){super(n,s);Ie(this,"sqlName");Ie(this,"mapTo");Ie(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(n){return typeof this.mapFrom=="function"?this.mapFrom(n):n}mapToDriverValue(n){return typeof this.mapTo=="function"?this.mapTo(n):n}}Ie(sie,YH,"PgCustomColumn");function hOe(e){return(t,n)=>{const{name:s,config:i}=Va(t,n);return new nie(s,i,e)}}var QH,ZH;class ty extends(ZH=Tn,QH=Pt,ZH){defaultNow(){return this.default(yn`now()`)}}Ie(ty,QH,"PgDateColumnBaseBuilder");var JH,eW;class iie extends(eW=ty,JH=Pt,eW){constructor(t){super(t,"date","PgDate")}build(t){return new aie(t,this.config)}}Ie(iie,JH,"PgDateBuilder");var tW,rW;class aie extends(rW=ln,tW=Pt,rW){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}Ie(aie,tW,"PgDate");var nW,sW;class oie extends(sW=ty,nW=Pt,sW){constructor(t){super(t,"string","PgDateString")}build(t){return new lie(t,this.config)}}Ie(oie,nW,"PgDateStringBuilder");var iW,aW;class lie extends(aW=ln,iW=Pt,aW){getSQLType(){return"date"}}Ie(lie,iW,"PgDateString");function fOe(e,t){const{name:n,config:s}=Va(e,t);return(s==null?void 0:s.mode)==="date"?new iie(n):new oie(n)}var oW,lW;class cie extends(lW=Tn,oW=Pt,lW){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new die(t,this.config)}}Ie(cie,oW,"PgDoublePrecisionBuilder");var cW,dW;class die extends(dW=ln,cW=Pt,dW){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}Ie(die,cW,"PgDoublePrecision");function mOe(e){return new cie(e??"")}var uW,hW;class uie extends(hW=Tn,uW=Pt,hW){constructor(t){super(t,"string","PgInet")}build(t){return new hie(t,this.config)}}Ie(uie,uW,"PgInetBuilder");var fW,mW;class hie extends(mW=ln,fW=Pt,mW){getSQLType(){return"inet"}}Ie(hie,fW,"PgInet");function pOe(e){return new uie(e??"")}var pW,gW;class fie extends(gW=ow,pW=Pt,gW){constructor(t){super(t,"number","PgInteger")}build(t){return new mie(t,this.config)}}Ie(fie,pW,"PgIntegerBuilder");var xW,vW;class mie extends(vW=ln,xW=Pt,vW){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}Ie(mie,xW,"PgInteger");function Qn(e){return new fie(e??"")}var yW,bW;class pie extends(bW=Tn,yW=Pt,bW){constructor(t,n){super(t,"string","PgInterval"),this.config.intervalConfig=n}build(t){return new gie(t,this.config)}}Ie(pie,yW,"PgIntervalBuilder");var jW,wW;class gie extends(wW=ln,jW=Pt,wW){constructor(){super(...arguments);Ie(this,"fields",this.config.intervalConfig.fields);Ie(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const n=this.fields?` ${this.fields}`:"",s=this.precision?`(${this.precision})`:"";return`interval${n}${s}`}}Ie(gie,jW,"PgInterval");function gOe(e,t={}){const{name:n,config:s}=Va(e,t);return new pie(n,s)}var NW,SW;class xie extends(SW=Tn,NW=Pt,SW){constructor(t){super(t,"json","PgJson")}build(t){return new vie(t,this.config)}}Ie(xie,NW,"PgJsonBuilder");var _W,CW;class vie extends(CW=ln,_W=Pt,CW){constructor(t,n){super(t,n)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}Ie(vie,_W,"PgJson");function xOe(e){return new xie(e??"")}var AW,kW;class yie extends(kW=Tn,AW=Pt,kW){constructor(t){super(t,"json","PgJsonb")}build(t){return new bie(t,this.config)}}Ie(yie,AW,"PgJsonbBuilder");var PW,TW;class bie extends(TW=ln,PW=Pt,TW){constructor(t,n){super(t,n)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}Ie(bie,PW,"PgJsonb");function xs(e){return new yie(e??"")}var EW,OW;class jie extends(OW=Tn,EW=Pt,OW){constructor(t){super(t,"array","PgLine")}build(t){return new wie(t,this.config)}}Ie(jie,EW,"PgLineBuilder");var RW,DW;class wie extends(DW=ln,RW=Pt,DW){getSQLType(){return"line"}mapFromDriverValue(t){const[n,s,i]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(s),Number.parseFloat(i)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}Ie(wie,RW,"PgLine");var MW,IW;class Nie extends(IW=Tn,MW=Pt,IW){constructor(t){super(t,"json","PgLineABC")}build(t){return new Sie(t,this.config)}}Ie(Nie,MW,"PgLineABCBuilder");var LW,FW;class Sie extends(FW=ln,LW=Pt,FW){getSQLType(){return"line"}mapFromDriverValue(t){const[n,s,i]=t.slice(1,-1).split(",");return{a:Number.parseFloat(n),b:Number.parseFloat(s),c:Number.parseFloat(i)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}Ie(Sie,LW,"PgLineABC");function vOe(e,t){const{name:n,config:s}=Va(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new jie(n):new Nie(n)}var $W,BW;class _ie extends(BW=Tn,$W=Pt,BW){constructor(t){super(t,"string","PgMacaddr")}build(t){return new Cie(t,this.config)}}Ie(_ie,$W,"PgMacaddrBuilder");var VW,UW;class Cie extends(UW=ln,VW=Pt,UW){getSQLType(){return"macaddr"}}Ie(Cie,VW,"PgMacaddr");function yOe(e){return new _ie(e??"")}var qW,zW;class Aie extends(zW=Tn,qW=Pt,zW){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new kie(t,this.config)}}Ie(Aie,qW,"PgMacaddr8Builder");var HW,WW;class kie extends(WW=ln,HW=Pt,WW){getSQLType(){return"macaddr8"}}Ie(kie,HW,"PgMacaddr8");function bOe(e){return new Aie(e??"")}var KW,GW;class Pie extends(GW=Tn,KW=Pt,GW){constructor(t,n,s){super(t,"string","PgNumeric"),this.config.precision=n,this.config.scale=s}build(t){return new Tie(t,this.config)}}Ie(Pie,KW,"PgNumericBuilder");var YW,XW;class Tie extends(XW=ln,YW=Pt,XW){constructor(n,s){super(n,s);Ie(this,"precision");Ie(this,"scale");this.precision=s.precision,this.scale=s.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}Ie(Tie,YW,"PgNumeric");function Eie(e,t){const{name:n,config:s}=Va(e,t);return new Pie(n,s==null?void 0:s.precision,s==null?void 0:s.scale)}const Mn=Eie;var QW,ZW;class Oie extends(ZW=Tn,QW=Pt,ZW){constructor(t){super(t,"array","PgPointTuple")}build(t){return new Rie(t,this.config)}}Ie(Oie,QW,"PgPointTupleBuilder");var JW,eK;class Rie extends(eK=ln,JW=Pt,eK){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,s]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(s)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}Ie(Rie,JW,"PgPointTuple");var tK,rK;class Die extends(rK=Tn,tK=Pt,rK){constructor(t){super(t,"json","PgPointObject")}build(t){return new Mie(t,this.config)}}Ie(Die,tK,"PgPointObjectBuilder");var nK,sK;class Mie extends(sK=ln,nK=Pt,sK){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[n,s]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(s)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}Ie(Mie,nK,"PgPointObject");function jOe(e,t){const{name:n,config:s}=Va(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new Oie(n):new Die(n)}function wOe(e){const t=[];for(let n=0;n<e.length;n+=2)t.push(Number.parseInt(e.slice(n,n+2),16));return new Uint8Array(t)}function nB(e,t){const n=new ArrayBuffer(8),s=new DataView(n);for(let i=0;i<8;i++)s.setUint8(i,e[t+i]);return s.getFloat64(0,!0)}function Iie(e){const t=wOe(e);let n=0;const s=t[n];n+=1;const i=new DataView(t.buffer),a=i.getUint32(n,s===1);if(n+=4,a&536870912&&(i.getUint32(n,s===1),n+=4),(a&65535)===1){const o=nB(t,n);n+=8;const l=nB(t,n);return n+=8,[o,l]}throw new Error("Unsupported geometry type")}var iK,aK;class Lie extends(aK=Tn,iK=Pt,aK){constructor(t){super(t,"array","PgGeometry")}build(t){return new Fie(t,this.config)}}Ie(Lie,iK,"PgGeometryBuilder");var oK,lK;class Fie extends(lK=ln,oK=Pt,lK){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return Iie(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}Ie(Fie,oK,"PgGeometry");var cK,dK;class $ie extends(dK=Tn,cK=Pt,dK){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new Bie(t,this.config)}}Ie($ie,cK,"PgGeometryObjectBuilder");var uK,hK;class Bie extends(hK=ln,uK=Pt,hK){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=Iie(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}Ie(Bie,uK,"PgGeometryObject");function NOe(e,t){const{name:n,config:s}=Va(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new Lie(n):new $ie(n)}var fK,mK;class Vie extends(mK=Tn,fK=Pt,mK){constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new Uie(t,this.config)}}Ie(Vie,fK,"PgRealBuilder");var pK,gK;class Uie extends(gK=ln,pK=Pt,gK){constructor(n,s){super(n,s);Ie(this,"mapFromDriverValue",n=>typeof n=="string"?Number.parseFloat(n):n)}getSQLType(){return"real"}}Ie(Uie,pK,"PgReal");function SOe(e){return new Vie(e??"")}var xK,vK;class qie extends(vK=Tn,xK=Pt,vK){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new zie(t,this.config)}}Ie(qie,xK,"PgSerialBuilder");var yK,bK;class zie extends(bK=ln,yK=Pt,bK){getSQLType(){return"serial"}}Ie(zie,yK,"PgSerial");function _Oe(e){return new qie(e??"")}var jK,wK;class Hie extends(wK=ow,jK=Pt,wK){constructor(t){super(t,"number","PgSmallInt")}build(t){return new Wie(t,this.config)}}Ie(Hie,jK,"PgSmallIntBuilder");var NK,SK;class Wie extends(SK=ln,NK=Pt,SK){constructor(){super(...arguments);Ie(this,"mapFromDriverValue",n=>typeof n=="string"?Number(n):n)}getSQLType(){return"smallint"}}Ie(Wie,NK,"PgSmallInt");function COe(e){return new Hie(e??"")}var _K,CK;class Kie extends(CK=Tn,_K=Pt,CK){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Gie(t,this.config)}}Ie(Kie,_K,"PgSmallSerialBuilder");var AK,kK;class Gie extends(kK=ln,AK=Pt,kK){getSQLType(){return"smallserial"}}Ie(Gie,AK,"PgSmallSerial");function AOe(e){return new Kie(e??"")}var PK,TK;class Yie extends(TK=Tn,PK=Pt,TK){constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new Xie(t,this.config)}}Ie(Yie,PK,"PgTextBuilder");var EK,OK;class Xie extends(OK=ln,EK=Pt,OK){constructor(){super(...arguments);Ie(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}Ie(Xie,EK,"PgText");function Yt(e,t={}){const{name:n,config:s}=Va(e,t);return new Yie(n,s)}var RK,DK;class Qie extends(DK=ty,RK=Pt,DK){constructor(t,n,s){super(t,"string","PgTime"),this.withTimezone=n,this.precision=s,this.config.withTimezone=n,this.config.precision=s}build(t){return new Zie(t,this.config)}}Ie(Qie,RK,"PgTimeBuilder");var MK,IK;class Zie extends(IK=ln,MK=Pt,IK){constructor(n,s){super(n,s);Ie(this,"withTimezone");Ie(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}Ie(Zie,MK,"PgTime");function kOe(e,t={}){const{name:n,config:s}=Va(e,t);return new Qie(n,s.withTimezone??!1,s.precision)}var LK,FK;class Jie extends(FK=ty,LK=Pt,FK){constructor(t,n,s){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=s}build(t){return new eae(t,this.config)}}Ie(Jie,LK,"PgTimestampBuilder");var $K,BK;class eae extends(BK=ln,$K=Pt,BK){constructor(n,s){super(n,s);Ie(this,"withTimezone");Ie(this,"precision");Ie(this,"mapFromDriverValue",n=>new Date(this.withTimezone?n:n+"+0000"));Ie(this,"mapToDriverValue",n=>n.toISOString());this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}Ie(eae,$K,"PgTimestamp");var VK,UK;class tae extends(UK=ty,VK=Pt,UK){constructor(t,n,s){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=s}build(t){return new rae(t,this.config)}}Ie(tae,VK,"PgTimestampStringBuilder");var qK,zK;class rae extends(zK=ln,qK=Pt,zK){constructor(n,s){super(n,s);Ie(this,"withTimezone");Ie(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}Ie(rae,qK,"PgTimestampString");function kt(e,t={}){const{name:n,config:s}=Va(e,t);return(s==null?void 0:s.mode)==="string"?new tae(n,s.withTimezone??!1,s.precision):new Jie(n,(s==null?void 0:s.withTimezone)??!1,s==null?void 0:s.precision)}var HK,WK;class nae extends(WK=Tn,HK=Pt,WK){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(yn`gen_random_uuid()`)}build(t){return new sae(t,this.config)}}Ie(nae,HK,"PgUUIDBuilder");var KK,GK;class sae extends(GK=ln,KK=Pt,GK){getSQLType(){return"uuid"}}Ie(sae,KK,"PgUUID");function POe(e){return new nae(e??"")}var YK,XK;class iae extends(XK=Tn,YK=Pt,XK){constructor(t,n){super(t,"string","PgVarchar"),this.config.length=n.length,this.config.enumValues=n.enum}build(t){return new aae(t,this.config)}}Ie(iae,YK,"PgVarcharBuilder");var QK,ZK;class aae extends(ZK=ln,QK=Pt,ZK){constructor(){super(...arguments);Ie(this,"length",this.config.length);Ie(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}Ie(aae,QK,"PgVarchar");function be(e,t={}){const{name:n,config:s}=Va(e,t);return new iae(n,s)}var JK,eG;class oae extends(eG=Tn,JK=Pt,eG){constructor(t,n){super(t,"string","PgBinaryVector"),this.config.dimensions=n.dimensions}build(t){return new lae(t,this.config)}}Ie(oae,JK,"PgBinaryVectorBuilder");var tG,rG;class lae extends(rG=ln,tG=Pt,rG){constructor(){super(...arguments);Ie(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}Ie(lae,tG,"PgBinaryVector");function TOe(e,t){const{name:n,config:s}=Va(e,t);return new oae(n,s)}var nG,sG;class cae extends(sG=Tn,nG=Pt,sG){constructor(t,n){super(t,"array","PgHalfVector"),this.config.dimensions=n.dimensions}build(t){return new dae(t,this.config)}}Ie(cae,nG,"PgHalfVectorBuilder");var iG,aG;class dae extends(aG=ln,iG=Pt,aG){constructor(){super(...arguments);Ie(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}Ie(dae,iG,"PgHalfVector");function EOe(e,t){const{name:n,config:s}=Va(e,t);return new cae(n,s)}var oG,lG;class uae extends(lG=Tn,oG=Pt,lG){constructor(t,n){super(t,"string","PgSparseVector"),this.config.dimensions=n.dimensions}build(t){return new hae(t,this.config)}}Ie(uae,oG,"PgSparseVectorBuilder");var cG,dG;class hae extends(dG=ln,cG=Pt,dG){constructor(){super(...arguments);Ie(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}Ie(hae,cG,"PgSparseVector");function OOe(e,t){const{name:n,config:s}=Va(e,t);return new uae(n,s)}var uG,hG;class fae extends(hG=Tn,uG=Pt,hG){constructor(t,n){super(t,"array","PgVector"),this.config.dimensions=n.dimensions}build(t){return new mae(t,this.config)}}Ie(fae,uG,"PgVectorBuilder");var fG,mG;class mae extends(mG=ln,fG=Pt,mG){constructor(){super(...arguments);Ie(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}Ie(mae,fG,"PgVector");function ROe(e,t){const{name:n,config:s}=Va(e,t);return new fae(n,s)}function DOe(){return{bigint:lOe,bigserial:cOe,boolean:ai,char:dOe,cidr:uOe,customType:hOe,date:fOe,doublePrecision:mOe,inet:pOe,integer:Qn,interval:gOe,json:xOe,jsonb:xs,line:vOe,macaddr:yOe,macaddr8:bOe,numeric:Eie,point:jOe,geometry:NOe,real:SOe,serial:_Oe,smallint:COe,smallserial:AOe,text:Yt,time:kOe,timestamp:kt,uuid:POe,varchar:be,bit:TOe,halfvec:EOe,sparsevec:OOe,vector:ROe}}const ET=Symbol.for("drizzle:PgInlineForeignKeys"),sB=Symbol.for("drizzle:EnableRLS");var pG,gG,xG,vG,yG;class zb extends(yG=sc,vG=Pt,xG=ET,gG=sB,pG=sc.Symbol.ExtraConfigBuilder,yG){constructor(){super(...arguments);Ie(this,xG,[]);Ie(this,gG,!1);Ie(this,pG)}}Ie(zb,vG,"PgTable"),Ie(zb,"Symbol",Object.assign({},sc.Symbol,{InlineForeignKeys:ET,EnableRLS:sB}));function MOe(e,t,n,s,i=e){const a=new zb(e,s,i),o=typeof t=="function"?t(DOe()):t,l=Object.fromEntries(Object.entries(o).map(([u,h])=>{const f=h;f.setName(u);const m=f.build(a);return a[ET].push(...f.buildForeignKeys(m,a)),[u,m]})),c=Object.fromEntries(Object.entries(o).map(([u,h])=>{const f=h;f.setName(u);const m=f.buildExtraConfigColumn(a);return[u,m]})),d=Object.assign(a,l);return d[sc.Symbol.Columns]=l,d[sc.Symbol.ExtraConfigColumns]=c,n&&(d[zb.Symbol.ExtraConfigBuilder]=n),Object.assign(d,{enableRLS:()=>(d[zb.Symbol.EnableRLS]=!0,d)})}const Cn=(e,t,n)=>MOe(e,t,n,void 0);var bG;bG=Pt;class pae{constructor(t,n){this.unique=t,this.name=n}on(...t){return new MN(t.map(n=>{if(ta(n,Ii))return n;n=n;const s=new DN(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=JSON.parse(JSON.stringify(n.defaultConfig)),s}),this.unique,!1,this.name)}onOnly(...t){return new MN(t.map(n=>{if(ta(n,Ii))return n;n=n;const s=new DN(n.name,!!n.keyAsName,n.columnType,n.indexConfig);return n.indexConfig=n.defaultConfig,s}),this.unique,!0,this.name)}using(t,...n){return new MN(n.map(s=>{if(ta(s,Ii))return s;s=s;const i=new DN(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=JSON.parse(JSON.stringify(s.defaultConfig)),i}),this.unique,!0,this.name,t)}}Ie(pae,bG,"PgIndexBuilderOn");var jG;jG=Pt;class MN{constructor(t,n,s,i,a="btree"){Ie(this,"config");this.config={name:i,columns:t,unique:n,only:s,method:a}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new gae(this.config,t)}}Ie(MN,jG,"PgIndexBuilder");var wG;wG=Pt;class gae{constructor(t,n){Ie(this,"config");this.config={...t,table:n}}}Ie(gae,wG,"PgIndex");function Vh(e){return new pae(!1,e)}const fi={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Ui(e,t){return t.includes(e.columnType)}function xae(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const IOe=xae,LOe=I.union([I.string(),I.number(),I.boolean(),I.null()]),FOe=I.union([LOe,I.record(I.any()),I.array(I.any())]),$Oe=I.custom(e=>e instanceof Buffer);function vae(e,t){const n=(t==null?void 0:t.zodInstance)??I,s=(t==null?void 0:t.coerce)??{};let i;return xae(e)&&(i=e.enumValues.length?n.enum(e.enumValues):n.string()),i||(Ui(e,["PgGeometry","PgPointTuple"])?i=n.tuple([n.number(),n.number()]):Ui(e,["PgGeometryObject","PgPointObject"])?i=n.object({x:n.number(),y:n.number()}):Ui(e,["PgHalfVector","PgVector"])?(i=n.array(n.number()),i=e.dimensions?i.length(e.dimensions):i):Ui(e,["PgLine"])?i=n.tuple([n.number(),n.number(),n.number()]):Ui(e,["PgLineABC"])?i=n.object({a:n.number(),b:n.number(),c:n.number()}):Ui(e,["PgArray"])?(i=n.array(vae(e.baseColumn,n)),i=e.size?i.length(e.size):i):e.dataType==="array"?i=n.array(n.any()):e.dataType==="number"?i=BOe(e,n,s):e.dataType==="bigint"?i=VOe(e,n,s):e.dataType==="boolean"?i=s===!0||s.boolean?n.coerce.boolean():n.boolean():e.dataType==="date"?i=s===!0||s.date?n.coerce.date():n.date():e.dataType==="string"?i=UOe(e,n,s):e.dataType==="json"?i=FOe:e.dataType==="custom"?i=n.any():e.dataType==="buffer"&&(i=$Oe)),i||(i=n.any()),i}function BOe(e,t,n){let s=e.getSQLType().includes("unsigned"),i,a,o=!1;Ui(e,["MySqlTinyInt","SingleStoreTinyInt"])?(i=s?0:fi.INT8_MIN,a=s?fi.INT8_UNSIGNED_MAX:fi.INT8_MAX,o=!0):Ui(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(i=s?0:fi.INT16_MIN,a=s?fi.INT16_UNSIGNED_MAX:fi.INT16_MAX,o=!0):Ui(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(i=s?0:fi.INT24_MIN,a=s?fi.INT24_UNSIGNED_MAX:fi.INT24_MAX,o=Ui(e,["MySqlMediumInt","SingleStoreMediumInt"])):Ui(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(i=s?0:fi.INT32_MIN,a=s?fi.INT32_UNSIGNED_MAX:fi.INT32_MAX,o=!0):Ui(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(i=s?0:fi.INT48_MIN,a=s?fi.INT48_UNSIGNED_MAX:fi.INT48_MAX):Ui(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||Ui(e,["MySqlSerial","SingleStoreSerial"]),i=s?0:Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,o=!0):Ui(e,["MySqlYear","SingleStoreYear"])?(i=1901,a=2155,o=!0):(i=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER);let l=n===!0||n!=null&&n.number?t.coerce.number():t.number();return l=l.min(i).max(a),o?l.int():l}function VOe(e,t,n){const s=e.getSQLType().includes("unsigned"),i=s?0n:fi.INT64_MIN,a=s?fi.INT64_UNSIGNED_MAX:fi.INT64_MAX;return(n===!0||n!=null&&n.bigint?t.coerce.bigint():t.bigint()).min(i).max(a)}function UOe(e,t,n){if(Ui(e,["PgUUID"]))return t.string().uuid();let s,i,a=!1;Ui(e,["PgVarchar","SQLiteText"])?s=e.length:Ui(e,["MySqlVarChar","SingleStoreVarChar"])?s=e.length??fi.INT16_UNSIGNED_MAX:Ui(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?s=fi.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?s=fi.INT24_UNSIGNED_MAX:e.textType==="text"?s=fi.INT16_UNSIGNED_MAX:s=fi.INT8_UNSIGNED_MAX),Ui(e,["PgChar","MySqlChar","SingleStoreChar"])&&(s=e.length,a=!0),Ui(e,["PgBinaryVector"])&&(i=/^[01]+$/,s=e.dimensions);let o=n===!0||n!=null&&n.string?t.coerce.string():t.string();return o=i?o.regex(i):o,s&&a?o.length(s):s?o.max(s):o}function m6(e){return Fse(e)?aOe(e):oOe(e)}function p6(e,t,n,s){const i={};for(const[a,o]of Object.entries(e)){if(!ta(o,G1)&&!ta(o,Ii)&&!ta(o,Ii.Aliased)&&typeof o=="object"){const h=Fse(o)||iOe(o)?m6(o):o;i[a]=p6(h,t[a]??{},n,s);continue}const l=t[a];if(l!==void 0&&typeof l!="function"){i[a]=l;continue}const c=ta(o,G1)?o:void 0,d=c?vae(c,s):I.any(),u=typeof l=="function"?l(d):d;n.never(c)||(i[a]=u,c&&(n.nullable(c)&&(i[a]=i[a].nullable()),n.optional(c)&&(i[a]=i[a].optional())))}return I.object(i)}function qOe(e,t){return I.enum(e.enumValues)}const zOe={never:()=>!1,optional:()=>!1,nullable:e=>!e.notNull},HOe={never:e=>{var t,n;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((n=e==null?void 0:e.generatedIdentity)==null?void 0:n.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},Ss=(e,t)=>{if(IOe(e))return qOe(e);const n=m6(e);return p6(n,{},zOe)},Wn=(e,t)=>{const n=m6(e);return p6(n,t??{},HOe)},WOe=["new_registration","renewal","add_rooms","delete_rooms","cancel_certificate","change_category","change_ownership"],yae=I.enum(WOe),bae=I.object({requestedRooms:I.object({single:I.number().int().min(0).optional(),double:I.number().int().min(0).optional(),family:I.number().int().min(0).optional(),total:I.number().int().min(0).optional()}).partial().optional(),requestedRoomDelta:I.number().int().optional(),requestedDeletions:I.array(I.object({roomType:I.string().min(1),count:I.number().int().min(1)})).optional(),renewalWindow:I.object({start:I.string().min(4),end:I.string().min(4)}).partial().optional(),requiresPayment:I.boolean().optional(),inheritsCertificateExpiry:I.string().optional(),note:I.string().optional(),legacyGuardianName:I.union([I.string(),I.null()]).optional(),legacyOnboarding:I.boolean().optional()}).partial(),xn=Cn("users",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),mobile:be("mobile",{length:15}).notNull().unique(),fullName:Yt("full_name").notNull(),firstName:be("first_name",{length:100}),lastName:be("last_name",{length:100}),username:be("username",{length:50}),email:be("email",{length:255}),alternatePhone:be("alternate_phone",{length:15}),designation:be("designation",{length:100}),department:be("department",{length:100}),employeeId:be("employee_id",{length:50}),officeAddress:Yt("office_address"),officePhone:be("office_phone",{length:15}),role:be("role",{length:50}).notNull().default("property_owner"),aadhaarNumber:be("aadhaar_number",{length:12}).unique(),ssoId:be("sso_id",{length:50}).unique(),district:be("district",{length:100}),signatureUrl:Yt("signature_url"),password:Yt("password"),enabledServices:xs("enabled_services").$type().default(yn`'["homestay"]'::jsonb`),isActive:ai("is_active").default(!0),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()},e=>({mobileIdx:Vh("users_mobile_idx").on(e.mobile),roleIdx:Vh("users_role_idx").on(e.role),districtIdx:Vh("users_district_idx").on(e.district)}));Wn(xn,{mobile:I.string().regex(/^[6-9]\d{9}$/,"Invalid mobile number"),email:I.string().email().optional().or(I.literal("")),fullName:I.string().min(3,"Name must be at least 3 characters"),firstName:I.string().min(1).optional().or(I.literal("")),lastName:I.string().min(1).optional().or(I.literal("")),username:I.string().min(3).optional().or(I.literal("")),alternatePhone:I.string().regex(/^[6-9]\d{9}$/,"Invalid phone number").optional().or(I.literal("")),designation:I.string().optional().or(I.literal("")),department:I.string().optional().or(I.literal("")),employeeId:I.string().optional().or(I.literal("")),officeAddress:I.string().optional().or(I.literal("")),officePhone:I.string().regex(/^[6-9]\d{9}$/,"Invalid phone number").optional().or(I.literal("")),role:I.enum(["property_owner","district_officer","state_officer","admin","dealing_assistant","district_tourism_officer","super_admin","admin_rc","system_admin"]),aadhaarNumber:I.string().regex(/^\d{12}$/,"Invalid Aadhaar number").optional().or(I.literal("")),district:I.string().optional().or(I.literal("")),signatureUrl:I.string().optional().or(I.literal("")),password:I.string().min(1,"Password is required")}).omit({id:!0,createdAt:!0,updatedAt:!0,isActive:!0});Ss(xn);const jae=Cn("user_profiles",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),userId:be("user_id").notNull().unique().references(()=>xn.id,{onDelete:"cascade"}),fullName:be("full_name",{length:255}).notNull(),gender:be("gender",{length:10}).notNull(),aadhaarNumber:be("aadhaar_number",{length:12}),mobile:be("mobile",{length:15}).notNull(),email:be("email",{length:255}),district:be("district",{length:100}),tehsil:be("tehsil",{length:100}),block:be("block",{length:100}),gramPanchayat:be("gram_panchayat",{length:100}),urbanBody:be("urban_body",{length:200}),ward:be("ward",{length:50}),address:Yt("address"),pincode:be("pincode",{length:10}),telephone:be("telephone",{length:20}),fax:be("fax",{length:20}),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(jae,{fullName:I.string().min(3,"Name must be at least 3 characters"),gender:I.enum(["male","female"]),aadhaarNumber:I.string().regex(/^\d{12}$/,"Invalid Aadhaar number").optional().or(I.literal("")),mobile:I.string().regex(/^[6-9]\d{9}$/,"Invalid mobile number"),email:I.string().email().optional().or(I.literal("")),district:I.string().optional().or(I.literal("")),tehsil:I.string().optional().or(I.literal("")),block:I.string().optional().or(I.literal("")),gramPanchayat:I.string().optional().or(I.literal("")),urbanBody:I.string().optional().or(I.literal("")),ward:I.string().optional().or(I.literal("")),address:I.string().optional().or(I.literal("")),pincode:I.string().regex(/^[1-9]\d{5}$/,"Invalid pincode").optional().or(I.literal("")),telephone:I.string().optional().or(I.literal("")),fax:I.string().optional().or(I.literal(""))}).omit({id:!0,userId:!0,createdAt:!0,updatedAt:!0});const KOe=I.object({firstName:I.string().min(2,"First name must be at least 2 characters"),lastName:I.string().min(2,"Last name must be at least 2 characters"),gender:I.enum(["male","female"]),aadhaarNumber:I.string().regex(/^\d{12}$/,"Invalid Aadhaar number").optional().or(I.literal("")),mobile:I.string().regex(/^[6-9]\d{9}$/,"Invalid mobile number"),email:I.string().email().optional().or(I.literal("")),district:I.string().optional().or(I.literal("")),tehsil:I.string().optional().or(I.literal("")),block:I.string().optional().or(I.literal("")),gramPanchayat:I.string().optional().or(I.literal("")),urbanBody:I.string().optional().or(I.literal("")),ward:I.string().optional().or(I.literal("")),address:I.string().optional().or(I.literal("")),pincode:I.string().regex(/^[1-9]\d{5}$/,"Invalid pincode").optional().or(I.literal("")),telephone:I.string().optional().or(I.literal(""))});Ss(jae);const wae=["new_property","existing_property","new_project","new_rooms"],Ca=Cn("homestay_applications",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),userId:be("user_id").notNull().references(()=>xn.id),applicationNumber:be("application_number",{length:50}).notNull().unique(),applicationKind:be("application_kind",{length:30}).$type().notNull().default("new_registration"),parentApplicationId:be("parent_application_id"),parentApplicationNumber:be("parent_application_number",{length:50}),parentCertificateNumber:be("parent_certificate_number",{length:50}),inheritedCertificateValidUpto:kt("inherited_certificate_valid_upto"),serviceContext:xs("service_context").$type(),serviceNotes:Yt("service_notes"),serviceRequestedAt:kt("service_requested_at"),applicationType:be("application_type",{length:50}).default("homestay"),waterSportsData:xs("water_sports_data").$type(),adventureSportsData:xs("adventure_sports_data").$type(),propertyName:be("property_name",{length:255}).notNull(),category:be("category",{length:20}).notNull(),locationType:be("location_type",{length:10}).notNull(),totalRooms:Qn("total_rooms").notNull(),district:be("district",{length:100}).notNull(),districtOther:be("district_other",{length:100}),tehsil:be("tehsil",{length:100}).notNull(),tehsilOther:be("tehsil_other",{length:100}),block:be("block",{length:100}),blockOther:be("block_other",{length:100}),gramPanchayat:be("gram_panchayat",{length:100}),gramPanchayatOther:be("gram_panchayat_other",{length:100}),urbanBody:be("urban_body",{length:200}),urbanBodyOther:be("urban_body_other",{length:200}),ward:be("ward",{length:50}),address:Yt("address").notNull(),pincode:be("pincode",{length:10}).notNull(),telephone:be("telephone",{length:20}),fax:be("fax",{length:20}),latitude:Mn("latitude",{precision:10,scale:8}),longitude:Mn("longitude",{precision:11,scale:8}),ownerName:be("owner_name",{length:255}).notNull(),ownerGender:be("owner_gender",{length:10}).notNull(),ownerMobile:be("owner_mobile",{length:15}).notNull(),ownerEmail:be("owner_email",{length:255}),guardianName:be("guardian_name",{length:255}),ownerAadhaar:be("owner_aadhaar",{length:12}).notNull(),guardianRelation:be("guardian_relation",{length:20}).default("father"),propertyOwnership:be("property_ownership",{length:10}).$type().notNull().default("owned"),proposedRoomRate:Mn("proposed_room_rate",{precision:10,scale:2}),projectType:be("project_type",{length:20}).$type().notNull(),propertyArea:Mn("property_area",{precision:10,scale:2}).notNull(),propertyAreaUnit:be("property_area_unit",{length:10}).$type().default("sqm"),singleBedRooms:Qn("single_bed_rooms").default(0),singleBedBeds:Qn("single_bed_beds").default(1),singleBedRoomSize:Mn("single_bed_room_size",{precision:10,scale:2}),singleBedRoomRate:Mn("single_bed_room_rate",{precision:10,scale:2}),doubleBedRooms:Qn("double_bed_rooms").default(0),doubleBedBeds:Qn("double_bed_beds").default(2),doubleBedRoomSize:Mn("double_bed_room_size",{precision:10,scale:2}),doubleBedRoomRate:Mn("double_bed_room_rate",{precision:10,scale:2}),familySuites:Qn("family_suites").default(0),familySuiteBeds:Qn("family_suite_beds").default(4),familySuiteSize:Mn("family_suite_size",{precision:10,scale:2}),familySuiteRate:Mn("family_suite_rate",{precision:10,scale:2}),attachedWashrooms:Qn("attached_washrooms").notNull(),gstin:be("gstin",{length:15}),selectedCategory:be("selected_category",{length:20}),averageRoomRate:Mn("average_room_rate",{precision:10,scale:2}),highestRoomRate:Mn("highest_room_rate",{precision:10,scale:2}),lowestRoomRate:Mn("lowest_room_rate",{precision:10,scale:2}),certificateValidityYears:Qn("certificate_validity_years").default(1),isPangiSubDivision:ai("is_pangi_sub_division").default(!1),distanceAirport:Mn("distance_airport",{precision:10,scale:2}),distanceRailway:Mn("distance_railway",{precision:10,scale:2}),distanceCityCenter:Mn("distance_city_center",{precision:10,scale:2}),distanceShopping:Mn("distance_shopping",{precision:10,scale:2}),distanceBusStand:Mn("distance_bus_stand",{precision:10,scale:2}),keyLocationHighlight1:Yt("key_location_highlight1"),keyLocationHighlight2:Yt("key_location_highlight2"),lobbyArea:Mn("lobby_area",{precision:10,scale:2}),diningArea:Mn("dining_area",{precision:10,scale:2}),parkingArea:Yt("parking_area"),ecoFriendlyFacilities:Yt("eco_friendly_facilities"),differentlyAbledFacilities:Yt("differently_abled_facilities"),fireEquipmentDetails:Yt("fire_equipment_details"),nearestHospital:be("nearest_hospital",{length:255}),amenities:xs("amenities").$type(),nearbyAttractions:xs("nearby_attractions").$type(),mandatoryChecklist:xs("mandatory_checklist").$type(),desirableChecklist:xs("desirable_checklist").$type(),rooms:xs("rooms").$type(),baseFee:Mn("base_fee",{precision:10,scale:2}),totalBeforeDiscounts:Mn("total_before_discounts",{precision:10,scale:2}),validityDiscount:Mn("validity_discount",{precision:10,scale:2}).default("0"),femaleOwnerDiscount:Mn("female_owner_discount",{precision:10,scale:2}).default("0"),pangiDiscount:Mn("pangi_discount",{precision:10,scale:2}).default("0"),totalDiscount:Mn("total_discount",{precision:10,scale:2}).default("0"),totalFee:Mn("total_fee",{precision:10,scale:2}),perRoomFee:Mn("per_room_fee",{precision:10,scale:2}),gstAmount:Mn("gst_amount",{precision:10,scale:2}),status:be("status",{length:50}).default("draft"),currentStage:be("current_stage",{length:50}),currentPage:Qn("current_page").default(1),districtOfficerId:be("district_officer_id").references(()=>xn.id),districtReviewDate:kt("district_review_date"),districtNotes:Yt("district_notes"),daId:be("da_id").references(()=>xn.id),daReviewDate:kt("da_review_date"),daForwardedDate:kt("da_forwarded_date"),daRemarks:Yt("da_remarks"),stateOfficerId:be("state_officer_id").references(()=>xn.id),stateReviewDate:kt("state_review_date"),stateNotes:Yt("state_notes"),dtdoId:be("dtdo_id").references(()=>xn.id),dtdoReviewDate:kt("dtdo_review_date"),correctionSubmissionCount:Qn("correction_submission_count").notNull().default(0),revertCount:Qn("revert_count").notNull().default(0),dtdoRemarks:Yt("dtdo_remarks"),rejectionReason:Yt("rejection_reason"),clarificationRequested:Yt("clarification_requested"),siteInspectionScheduledDate:kt("site_inspection_scheduled_date"),siteInspectionCompletedDate:kt("site_inspection_completed_date"),siteInspectionOfficerId:be("site_inspection_officer_id").references(()=>xn.id),siteInspectionNotes:Yt("site_inspection_notes"),siteInspectionOutcome:be("site_inspection_outcome",{length:50}),siteInspectionFindings:xs("site_inspection_findings").$type(),ownershipProofUrl:Yt("ownership_proof_url"),aadhaarCardUrl:Yt("aadhaar_card_url"),panCardUrl:Yt("pan_card_url"),gstCertificateUrl:Yt("gst_certificate_url"),fireSafetyNocUrl:Yt("fire_safety_noc_url"),pollutionClearanceUrl:Yt("pollution_clearance_url"),buildingPlanUrl:Yt("building_plan_url"),propertyPhotosUrls:xs("property_photos_urls").$type(),documents:xs("documents").$type(),certificateNumber:be("certificate_number",{length:50}).unique(),certificateIssuedDate:kt("certificate_issued_date"),certificateExpiryDate:kt("certificate_expiry_date"),paymentStatus:be("payment_status",{length:20}).$type().default("pending"),paymentId:be("payment_id",{length:100}),paymentAmount:Mn("payment_amount",{precision:10,scale:2}),paymentDate:kt("payment_date"),refundDate:kt("refund_date"),refundReason:Yt("refund_reason"),submittedAt:kt("submitted_at"),approvedAt:kt("approved_at"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow(),formCompletionTimeSeconds:Qn("form_completion_time_seconds")},e=>({statusIdx:Vh("app_status_idx").on(e.status),districtIdx:Vh("app_district_idx").on(e.district),userIdIdx:Vh("app_user_id_idx").on(e.userId),appKindIdx:Vh("app_kind_idx").on(e.applicationKind),combinedDashboardIdx:Vh("app_dashboard_idx").on(e.district,e.status)}));Wn(Ca,{applicationKind:yae.default("new_registration"),parentApplicationId:I.string().uuid().optional(),parentApplicationNumber:I.string().optional().or(I.literal("")),parentCertificateNumber:I.string().optional().or(I.literal("")),inheritedCertificateValidUpto:I.union([I.date(),I.string()]).optional(),serviceContext:bae.optional(),serviceNotes:I.string().optional().or(I.literal("")),serviceRequestedAt:I.union([I.date(),I.string()]).optional(),propertyName:I.string().min(3,"Property name must be at least 3 characters"),category:I.enum(["diamond","gold","silver"]),locationType:I.enum(["mc","tcp","gp"]),totalRooms:I.number().int().min(0).max(6),district:I.string().min(2,"District is required"),tehsil:I.string().min(2,"Tehsil is required"),block:I.string().optional().or(I.literal("")),gramPanchayat:I.string().optional().or(I.literal("")),urbanBody:I.string().optional().or(I.literal("")),ward:I.string().optional().or(I.literal("")),address:I.string().min(10,"Address must be at least 10 characters"),pincode:I.string().regex(/^[1-9]\d{5}$/,"Invalid pincode"),telephone:I.string().optional(),fax:I.string().optional(),ownerName:I.string().min(3),ownerGender:I.enum(["male","female","other"]),ownerMobile:I.string().regex(/^[6-9]\d{9}$/),ownerEmail:I.string().email().optional().or(I.literal("")),guardianName:I.string().min(3).optional().or(I.literal("")),guardianRelation:I.enum(["s_o","d_o","w_o","c_o","father","husband","guardian"]).optional().default("s_o"),ownerAadhaar:I.string().regex(/^\d{12}$/),proposedRoomRate:I.number().min(100,"Room rate must be at least 100").optional(),projectType:I.enum(wae),propertyArea:I.number().min(1,"Property area required"),propertyAreaUnit:I.enum(["sqm","sqft","kanal","marla","bigha","biswa"]).default("sqm"),singleBedRooms:I.number().int().min(0).default(0),singleBedBeds:I.number().int().min(0).default(1),singleBedRoomSize:I.number().min(0).optional(),singleBedRoomRate:I.number().min(100,"Single bed room rate must be at least 100").optional(),doubleBedRooms:I.number().int().min(0).default(0),doubleBedBeds:I.number().int().min(0).default(2),doubleBedRoomSize:I.number().min(0).optional(),doubleBedRoomRate:I.number().min(100,"Double bed room rate must be at least 100").optional(),familySuites:I.number().int().min(0).max(3).default(0),familySuiteBeds:I.number().int().min(0).default(4),familySuiteSize:I.number().min(0).optional(),familySuiteRate:I.number().min(100,"Family suite rate must be at least 100").optional(),attachedWashrooms:I.number().int().min(0),gstin:I.string().optional().or(I.literal("")),selectedCategory:I.enum(["diamond","gold","silver"]).optional(),averageRoomRate:I.number().min(0).optional(),highestRoomRate:I.number().min(0).optional(),lowestRoomRate:I.number().min(0).optional(),certificateValidityYears:I.number().int().min(1).max(3).default(1),isPangiSubDivision:I.boolean().default(!1),distanceAirport:I.number().min(0).optional(),distanceRailway:I.number().min(0).optional(),distanceCityCenter:I.number().min(0).optional(),distanceShopping:I.number().min(0).optional(),distanceBusStand:I.number().min(0).optional(),lobbyArea:I.number().min(0).optional(),diningArea:I.number().min(0).optional(),parkingArea:I.string().optional().or(I.literal("")),ecoFriendlyFacilities:I.string().optional().or(I.literal("")),differentlyAbledFacilities:I.string().optional().or(I.literal("")),fireEquipmentDetails:I.string().optional().or(I.literal("")),nearestHospital:I.string().optional().or(I.literal("")),mandatoryChecklist:I.record(I.string(),I.boolean()).optional(),desirableChecklist:I.record(I.string(),I.boolean()).optional()}).omit({id:!0,applicationNumber:!0,createdAt:!0,updatedAt:!0}).superRefine((e,t)=>{const n=e.singleBedRooms??0,s=e.doubleBedRooms??0,i=e.familySuites??0,a=n+s+i;n*(e.singleBedBeds??0)+s*(e.doubleBedBeds??0)+i*(e.familySuiteBeds??0)>12&&t.addIssue({path:["singleBedBeds"],code:I.ZodIssueCode.custom,message:"Total beds cannot exceed 12 across all room types"}),a>0&&(e.attachedWashrooms??0)<a&&t.addIssue({path:["attachedWashrooms"],code:I.ZodIssueCode.custom,message:"Every room must have its own washroom. Increase attached washrooms to at least the total rooms."})});Wn(Ca,{applicationKind:yae.optional(),parentApplicationId:I.string().uuid().optional(),parentApplicationNumber:I.string().optional().or(I.literal("")),parentCertificateNumber:I.string().optional().or(I.literal("")),inheritedCertificateValidUpto:I.union([I.date(),I.string()]).optional(),serviceContext:bae.optional(),serviceNotes:I.string().optional().or(I.literal("")),serviceRequestedAt:I.union([I.date(),I.string()]).optional(),propertyName:I.string().min(1).optional().or(I.literal("")),category:I.enum(["diamond","gold","silver"]).optional(),locationType:I.enum(["mc","tcp","gp"]).optional(),totalRooms:I.number().int().min(0).optional(),district:I.string().optional().or(I.literal("")),tehsil:I.string().optional().or(I.literal("")),block:I.string().optional().or(I.literal("")),gramPanchayat:I.string().optional().or(I.literal("")),urbanBody:I.string().optional().or(I.literal("")),ward:I.string().optional().or(I.literal("")),address:I.string().optional().or(I.literal("")),pincode:I.string().optional().or(I.literal("")),telephone:I.string().optional().or(I.literal("")),fax:I.string().optional().or(I.literal("")),ownerName:I.string().optional().or(I.literal("")),ownerGender:I.enum(["male","female","other"]).optional(),ownerMobile:I.string().optional().or(I.literal("")),ownerEmail:I.string().optional().or(I.literal("")),guardianName:I.string().optional().or(I.literal("")),guardianRelation:I.enum(["s_o","d_o","w_o","c_o"]).optional(),ownerAadhaar:I.string().optional().or(I.literal("")),proposedRoomRate:I.number().optional(),projectType:I.enum(wae).optional(),propertyArea:I.number().optional(),singleBedRooms:I.number().int().min(0).optional(),singleBedBeds:I.number().int().min(0).optional(),singleBedRoomSize:I.number().optional(),singleBedRoomRate:I.number().optional(),doubleBedRooms:I.number().int().min(0).optional(),doubleBedBeds:I.number().int().min(0).optional(),doubleBedRoomSize:I.number().optional(),doubleBedRoomRate:I.number().optional(),familySuites:I.number().int().optional(),familySuiteBeds:I.number().int().min(0).optional(),familySuiteSize:I.number().optional(),familySuiteRate:I.number().optional(),attachedWashrooms:I.number().int().optional(),gstin:I.string().optional().or(I.literal("")),selectedCategory:I.enum(["diamond","gold","silver"]).optional(),averageRoomRate:I.number().optional(),highestRoomRate:I.number().optional(),lowestRoomRate:I.number().optional(),certificateValidityYears:I.number().int().optional(),isPangiSubDivision:I.boolean().optional(),distanceAirport:I.number().optional(),distanceRailway:I.number().optional(),distanceCityCenter:I.number().optional(),distanceShopping:I.number().optional(),distanceBusStand:I.number().optional(),lobbyArea:I.number().optional(),diningArea:I.number().optional(),parkingArea:I.string().optional().or(I.literal("")),ecoFriendlyFacilities:I.string().optional().or(I.literal("")),differentlyAbledFacilities:I.string().optional().or(I.literal("")),fireEquipmentDetails:I.string().optional().or(I.literal("")),nearestHospital:I.string().optional().or(I.literal("")),mandatoryChecklist:I.record(I.string(),I.boolean()).optional(),desirableChecklist:I.record(I.string(),I.boolean()).optional(),baseFee:I.number().optional(),totalBeforeDiscounts:I.number().optional(),validityDiscount:I.number().optional(),femaleOwnerDiscount:I.number().optional(),pangiDiscount:I.number().optional(),totalDiscount:I.number().optional(),totalFee:I.number().optional(),perRoomFee:I.number().optional(),gstAmount:I.number().optional()}).omit({id:!0,applicationNumber:!0,createdAt:!0,updatedAt:!0});Ss(Ca);const g6=Cn("documents",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}),documentType:be("document_type",{length:100}).notNull(),fileName:be("file_name",{length:255}).notNull(),filePath:Yt("file_path").notNull(),fileSize:Qn("file_size").notNull(),mimeType:be("mime_type",{length:100}).notNull(),uploadDate:kt("upload_date").defaultNow(),aiVerificationStatus:be("ai_verification_status",{length:50}),aiConfidenceScore:Mn("ai_confidence_score",{precision:5,scale:2}),aiNotes:Yt("ai_notes"),isVerified:ai("is_verified").default(!1),verificationStatus:be("verification_status",{length:50}).default("pending"),verifiedBy:be("verified_by").references(()=>xn.id),verificationDate:kt("verification_date"),verificationNotes:Yt("verification_notes")});Wn(g6).omit({id:!0,uploadDate:!0});Ss(g6);const GOe=Cn("storage_objects",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),objectKey:Yt("object_key").notNull().unique(),storageProvider:be("storage_provider",{length:20}).notNull().default("local"),fileType:be("file_type",{length:100}).notNull(),category:be("category",{length:100}).default("general"),mimeType:be("mime_type",{length:100}).default("application/octet-stream"),sizeBytes:Qn("size_bytes").notNull().default(0),checksumSha256:be("checksum_sha256",{length:128}),uploadedBy:be("uploaded_by").references(()=>xn.id),applicationId:be("application_id").references(()=>Ca.id,{onDelete:"set null"}),documentId:be("document_id").references(()=>g6.id,{onDelete:"set null"}),createdAt:kt("created_at").defaultNow(),lastAccessedAt:kt("last_accessed_at")});Cn("session",{sid:be("sid").primaryKey().notNull(),sess:xs("sess").notNull(),expire:kt("expire",{precision:6}).notNull()});Wn(GOe).omit({id:!0,createdAt:!0});const Nae=Cn("payments",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id),paymentType:be("payment_type",{length:50}).notNull(),amount:Mn("amount",{precision:10,scale:2}).notNull(),paymentGateway:be("payment_gateway",{length:50}),gatewayTransactionId:be("gateway_transaction_id",{length:255}).unique(),paymentMethod:be("payment_method",{length:50}),paymentStatus:be("payment_status",{length:50}).default("pending"),paymentLink:Yt("payment_link"),qrCodeUrl:Yt("qr_code_url"),paymentLinkExpiryDate:kt("payment_link_expiry_date"),initiatedAt:kt("initiated_at").defaultNow(),completedAt:kt("completed_at"),receiptNumber:be("receipt_number",{length:100}).unique(),receiptUrl:Yt("receipt_url")});Wn(Nae).omit({id:!0,initiatedAt:!0});Ss(Nae);const Sae=Cn("notifications",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),userId:be("user_id").notNull().references(()=>xn.id),applicationId:be("application_id").references(()=>Ca.id),type:be("type",{length:100}).notNull(),title:be("title",{length:255}).notNull(),message:Yt("message").notNull(),channels:xs("channels").$type(),isRead:ai("is_read").default(!1),readAt:kt("read_at"),createdAt:kt("created_at").defaultNow()});Wn(Sae).omit({id:!0,createdAt:!0});Ss(Sae);const _ae=Cn("application_actions",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}),officerId:be("officer_id").notNull().references(()=>xn.id),action:be("action",{length:50}).notNull(),previousStatus:be("previous_status",{length:50}),newStatus:be("new_status",{length:50}),feedback:Yt("feedback"),issuesFound:xs("issues_found").$type(),createdAt:kt("created_at").defaultNow()});Wn(_ae,{action:I.enum(["submitted","approved","rejected","sent_back_for_corrections","clarification_requested","site_inspection_scheduled","document_verified","payment_verified","inspection_acknowledged","correction_resubmitted"]),feedback:I.string().min(10,"Feedback must be at least 10 characters")}).omit({id:!0,createdAt:!0});Ss(_ae);const Cae=Cn("reviews",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id),userId:be("user_id").notNull().references(()=>xn.id),rating:Qn("rating").notNull(),reviewText:Yt("review_text"),isVerifiedStay:ai("is_verified_stay").default(!1),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Cae,{rating:I.number().int().min(1).max(5),reviewText:I.string().min(10,"Review must be at least 10 characters").optional()}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Cae);const jC=Cn("support_tickets",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),ticketNumber:be("ticket_number",{length:50}).notNull().unique(),applicantId:be("applicant_id").notNull().references(()=>xn.id),applicationId:be("application_id").references(()=>Ca.id),serviceType:be("service_type",{length:50}).default("homestay"),category:be("category",{length:50}).notNull(),subject:be("subject",{length:255}).notNull(),description:Yt("description").notNull(),status:be("status",{length:30}).notNull().default("open"),priority:be("priority",{length:20}).notNull().default("medium"),assignedTo:be("assigned_to").references(()=>xn.id),assignedAt:kt("assigned_at"),escalatedFrom:be("escalated_from").references(()=>xn.id),escalatedAt:kt("escalated_at"),escalationLevel:Qn("escalation_level").default(0),slaDeadline:kt("sla_deadline"),slaBreach:ai("sla_breach").default(!1),resolvedAt:kt("resolved_at"),resolvedBy:be("resolved_by").references(()=>xn.id),resolutionNotes:Yt("resolution_notes"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(jC,{category:I.enum(["delay","payment","document","inspection","technical","general","escalation","other"]),status:I.enum(["open","assigned","in_progress","resolved","closed"]),priority:I.enum(["low","medium","high","urgent"]),subject:I.string().min(5,"Subject must be at least 5 characters").max(255),description:I.string().min(20,"Description must be at least 20 characters")}).omit({id:!0,ticketNumber:!0,createdAt:!0,updatedAt:!0});Ss(jC);const Aae=Cn("ticket_messages",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),ticketId:be("ticket_id").notNull().references(()=>jC.id,{onDelete:"cascade"}),senderId:be("sender_id").notNull().references(()=>xn.id),senderRole:be("sender_role",{length:30}).notNull(),message:Yt("message").notNull(),attachments:xs("attachments").$type(),isInternal:ai("is_internal").default(!1),isRead:ai("is_read").default(!1),readAt:kt("read_at"),createdAt:kt("created_at").defaultNow()});Wn(Aae,{senderRole:I.enum(["applicant","officer","system"]),message:I.string().min(1,"Message cannot be empty")}).omit({id:!0,createdAt:!0});Ss(Aae);const kae=Cn("ticket_actions",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),ticketId:be("ticket_id").notNull().references(()=>jC.id,{onDelete:"cascade"}),actorId:be("actor_id").references(()=>xn.id),actorRole:be("actor_role",{length:30}),action:be("action",{length:50}).notNull(),previousStatus:be("previous_status",{length:30}),newStatus:be("new_status",{length:30}),previousPriority:be("previous_priority",{length:20}),newPriority:be("new_priority",{length:20}),previousAssignee:be("previous_assignee").references(()=>xn.id),newAssignee:be("new_assignee").references(()=>xn.id),notes:Yt("notes"),metadata:xs("metadata").$type(),ipAddress:be("ip_address",{length:45}),createdAt:kt("created_at").defaultNow()});Wn(kae,{action:I.enum(["created","assigned","status_changed","priority_changed","escalated","message_sent","attachment_added","sla_breached","resolved","closed","reopened"]),actorRole:I.enum(["applicant","officer","system"]).optional()}).omit({id:!0,createdAt:!0});Ss(kae);const Pae=Cn("audit_logs",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),userId:be("user_id").references(()=>xn.id),action:be("action",{length:100}).notNull(),details:xs("details"),ipAddress:be("ip_address",{length:45}),userAgent:Yt("user_agent"),createdAt:kt("created_at").defaultNow()});Wn(Pae).omit({id:!0,createdAt:!0});Ss(Pae);const Tae=Cn("production_stats",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),totalApplications:Qn("total_applications").notNull(),approvedApplications:Qn("approved_applications").notNull(),rejectedApplications:Qn("rejected_applications").notNull(),pendingApplications:Qn("pending_applications").notNull(),scrapedAt:kt("scraped_at").defaultNow(),sourceUrl:Yt("source_url")});Wn(Tae).omit({id:!0,scrapedAt:!0});Ss(Tae);const Eae=Cn("himkosh_transactions",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id),deptRefNo:be("dept_ref_no",{length:45}).notNull(),appRefNo:be("app_ref_no",{length:20}).notNull().unique(),totalAmount:Qn("total_amount").notNull(),tenderBy:be("tender_by",{length:70}).notNull(),merchantCode:be("merchant_code",{length:15}),deptId:be("dept_id",{length:10}),serviceCode:be("service_code",{length:5}),ddo:be("ddo",{length:12}),head1:be("head1",{length:14}),amount1:Qn("amount1"),head2:be("head2",{length:14}),amount2:Qn("amount2"),head3:be("head3",{length:14}),amount3:Qn("amount3"),head4:be("head4",{length:14}),amount4:Qn("amount4"),head10:be("head10",{length:50}),amount10:Qn("amount10"),periodFrom:be("period_from",{length:10}),periodTo:be("period_to",{length:10}),encryptedRequest:Yt("encrypted_request"),requestChecksum:be("request_checksum",{length:32}),echTxnId:be("ech_txn_id",{length:10}).unique(),bankCIN:be("bank_cin",{length:20}),bankName:be("bank_name",{length:10}),paymentDate:be("payment_date",{length:14}),status:be("status",{length:70}),statusCd:be("status_cd",{length:1}),responseChecksum:be("response_checksum",{length:32}),isDoubleVerified:ai("is_double_verified").default(!1),doubleVerificationDate:kt("double_verification_date"),doubleVerificationData:xs("double_verification_data"),challanPrintUrl:Yt("challan_print_url"),portalBaseUrl:Yt("portal_base_url"),transactionStatus:be("transaction_status",{length:50}).default("initiated"),initiatedAt:kt("initiated_at").defaultNow(),respondedAt:kt("responded_at"),verifiedAt:kt("verified_at"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow(),isArchived:ai("is_archived").default(!1)});Wn(Eae,{deptRefNo:I.string().min(1),appRefNo:I.string().min(1),totalAmount:I.number().int().min(1),tenderBy:I.string().min(3)}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Eae);const Oae=Cn("ccavenue_transactions",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id),orderId:be("order_id",{length:50}).notNull().unique(),trackingId:be("tracking_id",{length:50}).unique(),currency:be("currency",{length:10}).default("INR"),amount:Mn("amount",{precision:10,scale:2}).notNull(),billingName:be("billing_name",{length:100}),billingAddress:Yt("billing_address"),billingCity:be("billing_city",{length:50}),billingZip:be("billing_zip",{length:20}),billingCountry:be("billing_country",{length:50}),billingTel:be("billing_tel",{length:20}),billingEmail:be("billing_email",{length:100}),orderStatus:be("order_status",{length:50}).default("Initiated"),failureMessage:Yt("failure_message"),paymentMode:be("payment_mode",{length:50}),cardName:be("card_name",{length:50}),statusCode:be("status_code",{length:10}),statusMessage:Yt("status_message"),bankRefNo:be("bank_ref_no",{length:50}),transDate:kt("trans_date"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Oae).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Oae);const Rae=Cn("ddo_codes",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),district:be("district",{length:100}).notNull().unique(),ddoCode:be("ddo_code",{length:20}).notNull(),ddoDescription:Yt("ddo_description").notNull(),treasuryCode:be("treasury_code",{length:10}).notNull(),head1:be("head1",{length:50}),isActive:ai("is_active").default(!0),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Rae,{district:I.string().min(2),ddoCode:I.string().min(3),ddoDescription:I.string().min(3),treasuryCode:I.string().min(3)}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Rae);const x6=Cn("inspection_orders",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}),scheduledBy:be("scheduled_by").notNull().references(()=>xn.id),scheduledDate:kt("scheduled_date").notNull(),assignedTo:be("assigned_to").notNull().references(()=>xn.id),assignedDate:kt("assigned_date").notNull(),inspectionDate:kt("inspection_date").notNull(),inspectionAddress:Yt("inspection_address").notNull(),specialInstructions:Yt("special_instructions"),status:be("status",{length:50}).default("scheduled"),dtdoNotes:Yt("dtdo_notes"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(x6,{inspectionDate:I.date().or(I.string()),inspectionAddress:I.string().min(10,"Address must be at least 10 characters"),specialInstructions:I.string().optional().or(I.literal("")),dtdoNotes:I.string().optional().or(I.literal(""))}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(x6);const v6=Cn("inspection_reports",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),inspectionOrderId:be("inspection_order_id").notNull().references(()=>x6.id,{onDelete:"cascade"}),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}),submittedBy:be("submitted_by").notNull().references(()=>xn.id),submittedDate:kt("submitted_date").notNull(),actualInspectionDate:kt("actual_inspection_date").notNull(),roomCountVerified:ai("room_count_verified").notNull(),actualRoomCount:Qn("actual_room_count"),categoryMeetsStandards:ai("category_meets_standards").notNull(),recommendedCategory:be("recommended_category",{length:20}),mandatoryChecklist:xs("mandatory_checklist").$type(),mandatoryRemarks:Yt("mandatory_remarks"),desirableChecklist:xs("desirable_checklist").$type(),desirableRemarks:Yt("desirable_remarks"),amenitiesVerified:xs("amenities_verified").$type(),amenitiesIssues:Yt("amenities_issues"),fireSafetyCompliant:ai("fire_safety_compliant"),fireSafetyIssues:Yt("fire_safety_issues"),structuralSafety:ai("structural_safety"),structuralIssues:Yt("structural_issues"),overallSatisfactory:ai("overall_satisfactory").notNull(),recommendation:be("recommendation",{length:50}).notNull(),detailedFindings:Yt("detailed_findings").notNull(),inspectionPhotos:xs("inspection_photos").$type(),reportDocumentUrl:Yt("report_document_url"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(v6,{actualInspectionDate:I.date().or(I.string()),roomCountVerified:I.boolean(),actualRoomCount:I.number().int().min(0).optional(),categoryMeetsStandards:I.boolean(),recommendedCategory:I.enum(["diamond","gold","silver"]).optional().or(I.literal("")),mandatoryChecklist:I.object({applicationForm:I.boolean(),documents:I.boolean(),onlinePayment:I.boolean(),wellMaintained:I.boolean(),cleanRooms:I.boolean(),comfortableBedding:I.boolean(),roomSize:I.boolean(),cleanKitchen:I.boolean(),cutleryCrockery:I.boolean(),waterFacility:I.boolean(),wasteDisposal:I.boolean(),energySavingLights:I.boolean(),visitorBook:I.boolean(),doctorDetails:I.boolean(),luggageAssistance:I.boolean(),fireEquipment:I.boolean(),guestRegister:I.boolean(),cctvCameras:I.boolean()}).optional(),desirableChecklist:I.object({parking:I.boolean(),attachedBathroom:I.boolean(),toiletAmenities:I.boolean(),hotColdWater:I.boolean(),waterConservation:I.boolean(),diningArea:I.boolean(),wardrobe:I.boolean(),storage:I.boolean(),furniture:I.boolean(),laundry:I.boolean(),refrigerator:I.boolean(),lounge:I.boolean(),heatingCooling:I.boolean(),luggageHelp:I.boolean(),safeStorage:I.boolean(),securityGuard:I.boolean(),himachaliCrafts:I.boolean(),rainwaterHarvesting:I.boolean()}).optional(),fireSafetyCompliant:I.boolean().optional(),structuralSafety:I.boolean().optional(),overallSatisfactory:I.boolean(),recommendation:I.enum(["approve","raise_objections"]),detailedFindings:I.string().min(20,"Detailed findings must be at least 20 characters")}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(v6);const y6=Cn("objections",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}),inspectionReportId:be("inspection_report_id").references(()=>v6.id),raisedBy:be("raised_by").notNull().references(()=>xn.id),raisedDate:kt("raised_date").notNull(),objectionType:be("objection_type",{length:50}).notNull(),objectionTitle:be("objection_title",{length:255}).notNull(),objectionDescription:Yt("objection_description").notNull(),severity:be("severity",{length:20}).notNull(),responseDeadline:kt("response_deadline"),status:be("status",{length:50}).default("pending"),resolutionNotes:Yt("resolution_notes"),resolvedBy:be("resolved_by").references(()=>xn.id),resolvedDate:kt("resolved_date"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(y6,{objectionType:I.enum(["document_incomplete","category_mismatch","safety_violation","amenity_mismatch","structural_issue","other"]),objectionTitle:I.string().min(5,"Title must be at least 5 characters"),objectionDescription:I.string().min(20,"Description must be at least 20 characters"),severity:I.enum(["minor","major","critical"]),responseDeadline:I.date().or(I.string()).optional()}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(y6);const Dae=Cn("clarifications",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),objectionId:be("objection_id").notNull().references(()=>y6.id,{onDelete:"cascade"}),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}),submittedBy:be("submitted_by").notNull().references(()=>xn.id),submittedDate:kt("submitted_date").notNull(),clarificationText:Yt("clarification_text").notNull(),supportingDocuments:xs("supporting_documents").$type(),reviewedBy:be("reviewed_by").references(()=>xn.id),reviewedDate:kt("reviewed_date"),reviewStatus:be("review_status",{length:50}),reviewNotes:Yt("review_notes"),updatedAt:kt("updated_at").defaultNow()});Wn(Dae,{clarificationText:I.string().min(20,"Clarification must be at least 20 characters")}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Dae);const Mae=Cn("certificates",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),applicationId:be("application_id").notNull().references(()=>Ca.id,{onDelete:"cascade"}).unique(),certificateNumber:be("certificate_number",{length:50}).notNull().unique(),certificateType:be("certificate_type",{length:50}).default("homestay_registration"),issuedDate:kt("issued_date").notNull(),validFrom:kt("valid_from").notNull(),validUpto:kt("valid_upto").notNull(),propertyName:be("property_name",{length:255}).notNull(),category:be("category",{length:20}).notNull(),address:Yt("address").notNull(),district:be("district",{length:100}).notNull(),ownerName:be("owner_name",{length:255}).notNull(),ownerMobile:be("owner_mobile",{length:15}).notNull(),certificatePdfUrl:Yt("certificate_pdf_url"),qrCodeData:Yt("qr_code_data"),digitalSignature:Yt("digital_signature"),issuedBy:be("issued_by").references(()=>xn.id),status:be("status",{length:50}).default("active"),revocationReason:Yt("revocation_reason"),revokedBy:be("revoked_by").references(()=>xn.id),revokedDate:kt("revoked_date"),renewalReminderSent:ai("renewal_reminder_sent").default(!1),renewalApplicationId:be("renewal_application_id").references(()=>Ca.id),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Mae,{certificateNumber:I.string().min(5),issuedDate:I.date().or(I.string()),validFrom:I.date().or(I.string()),validUpto:I.date().or(I.string()),propertyName:I.string().min(3),category:I.enum(["diamond","gold","silver"]),address:I.string().min(10),district:I.string().min(2),ownerName:I.string().min(3),ownerMobile:I.string().regex(/^[6-9]\d{9}$/)}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Mae);const Iae=Cn("system_settings",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),settingKey:be("setting_key",{length:100}).notNull().unique(),settingValue:xs("setting_value").notNull(),description:Yt("description"),category:be("category",{length:50}).default("general"),updatedBy:be("updated_by").references(()=>xn.id),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Iae,{settingKey:I.string().min(1,"Setting key is required"),settingValue:I.any(),description:I.string().optional().or(I.literal("")),category:I.enum(["general","payment","notification","security"]).optional()}).omit({id:!0,createdAt:!0,updatedAt:!0});Ss(Iae);Cn("login_otp_challenges",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),userId:be("user_id").notNull().references(()=>xn.id,{onDelete:"cascade"}),otpHash:be("otp_hash",{length:255}).notNull(),expiresAt:kt("expires_at").notNull(),consumedAt:kt("consumed_at"),createdAt:kt("created_at").defaultNow()});Cn("password_reset_challenges",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),userId:be("user_id").notNull().references(()=>xn.id,{onDelete:"cascade"}),channel:be("channel",{length:32}).notNull(),recipient:be("recipient",{length:255}),otpHash:be("otp_hash",{length:255}).notNull(),expiresAt:kt("expires_at").notNull(),consumedAt:kt("consumed_at"),createdAt:kt("created_at").defaultNow()});const ry=Cn("lgd_districts",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),lgdCode:be("lgd_code",{length:20}).unique(),districtName:be("district_name",{length:100}).notNull().unique(),divisionName:be("division_name",{length:100}),isActive:ai("is_active").default(!0).notNull(),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(ry,{districtName:I.string().min(2),lgdCode:I.string().optional(),divisionName:I.string().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0,isActive:!0});Ss(ry);const b6=Cn("lgd_tehsils",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),lgdCode:be("lgd_code",{length:20}).unique(),tehsilName:be("tehsil_name",{length:100}).notNull(),districtId:be("district_id").notNull().references(()=>ry.id,{onDelete:"cascade"}),tehsilType:be("tehsil_type",{length:50}).default("tehsil"),isActive:ai("is_active").default(!0).notNull(),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(b6,{tehsilName:I.string().min(2),districtId:I.string().uuid(),lgdCode:I.string().optional(),tehsilType:I.enum(["tehsil","sub_division","sub_tehsil"]).optional()}).omit({id:!0,createdAt:!0,updatedAt:!0,isActive:!0});Ss(b6);const j6=Cn("lgd_blocks",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),lgdCode:be("lgd_code",{length:20}).unique(),blockName:be("block_name",{length:100}).notNull(),districtId:be("district_id").notNull().references(()=>ry.id,{onDelete:"cascade"}),tehsilId:be("tehsil_id").references(()=>b6.id,{onDelete:"set null"}),isActive:ai("is_active").default(!0).notNull(),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(j6,{blockName:I.string().min(2),districtId:I.string().uuid(),lgdCode:I.string().optional(),tehsilId:I.string().uuid().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0,isActive:!0});Ss(j6);const Lae=Cn("lgd_gram_panchayats",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),lgdCode:be("lgd_code",{length:20}).unique(),gramPanchayatName:be("gram_panchayat_name",{length:100}).notNull(),districtId:be("district_id").notNull().references(()=>ry.id,{onDelete:"cascade"}),blockId:be("block_id").references(()=>j6.id,{onDelete:"cascade"}),isActive:ai("is_active").default(!0).notNull(),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Lae,{gramPanchayatName:I.string().min(2),districtId:I.string().uuid(),blockId:I.string().uuid().optional(),lgdCode:I.string().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0,isActive:!0});Ss(Lae);const Fae=Cn("lgd_urban_bodies",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),lgdCode:be("lgd_code",{length:20}).unique(),urbanBodyName:be("urban_body_name",{length:200}).notNull(),districtId:be("district_id").notNull().references(()=>ry.id,{onDelete:"cascade"}),bodyType:be("body_type",{length:50}).notNull(),numberOfWards:Qn("number_of_wards"),isActive:ai("is_active").default(!0).notNull(),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow()});Wn(Fae,{urbanBodyName:I.string().min(2),districtId:I.string().uuid(),bodyType:I.enum(["mc","tcp","np"]),lgdCode:I.string().optional(),numberOfWards:I.number().int().positive().optional()}).omit({id:!0,createdAt:!0,updatedAt:!0,isActive:!0});Ss(Fae);const wC=Cn("grievances",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),ticketNumber:be("ticket_number",{length:50}).notNull().unique(),ticketType:be("ticket_type",{length:20}).default("owner_grievance"),userId:be("user_id").references(()=>xn.id),applicationId:be("application_id").references(()=>Ca.id),category:be("category",{length:50}).notNull(),priority:be("priority",{length:20}).default("medium"),status:be("status",{length:20}).default("open"),subject:be("subject",{length:255}).notNull(),description:Yt("description").notNull(),assignedTo:be("assigned_to").references(()=>xn.id),resolutionNotes:Yt("resolution_notes"),attachments:xs("attachments").$type(),lastCommentAt:kt("last_comment_at"),lastReadByOwner:kt("last_read_by_owner"),lastReadByOfficer:kt("last_read_by_officer"),createdAt:kt("created_at").defaultNow(),updatedAt:kt("updated_at").defaultNow(),resolvedAt:kt("resolved_at")}),YOe=Wn(wC,{ticketType:I.enum(["owner_grievance","internal_ticket"]).optional().default("owner_grievance"),category:I.enum(["payment","application","portal","policy_query","system_issue","other"]),priority:I.enum(["low","medium","high","critical"]).optional(),status:I.enum(["open","in_progress","resolved","closed"]).optional(),subject:I.string().min(5,"Subject must be at least 5 characters"),description:I.string().min(10,"Description must be at least 10 characters"),attachments:I.array(I.string()).optional()}).omit({id:!0,ticketNumber:!0,createdAt:!0,updatedAt:!0,resolvedAt:!0,resolutionNotes:!0,userId:!0,assignedTo:!0});Ss(wC);const XOe=Cn("grievance_comments",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),grievanceId:be("grievance_id").notNull().references(()=>wC.id,{onDelete:"cascade"}),userId:be("user_id").notNull().references(()=>xn.id),comment:Yt("comment").notNull(),isInternal:ai("is_internal").default(!1),createdAt:kt("created_at").defaultNow()});Wn(XOe,{comment:I.string().min(1,"Comment cannot be empty"),isInternal:I.boolean().optional()}).omit({id:!0,createdAt:!0,userId:!0,grievanceId:!0});Cn("grievance_audit_log",{id:be("id").primaryKey().default(yn`gen_random_uuid()`),grievanceId:be("grievance_id").notNull().references(()=>wC.id,{onDelete:"cascade"}),action:be("action",{length:50}).notNull(),oldValue:Yt("old_value"),newValue:Yt("new_value"),performedBy:be("performed_by").notNull().references(()=>xn.id),performedAt:kt("performed_at").defaultNow(),ipAddress:be("ip_address",{length:50}),userAgent:Yt("user_agent")});Cn("session",{sid:be("sid").primaryKey().notNull(),sess:xs("sess").notNull(),expire:kt("expire",{precision:6}).notNull()},e=>({expireIdx:Vh("IDX_session_expire").on(e.expire)}));function OT(e,[t,n]){return Math.min(n,Math.max(t,e))}function NC(e){const t=b.useRef({value:e,previous:e});return b.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var QOe=[" ","Enter","ArrowUp","ArrowDown"],ZOe=[" ","Enter"],lw="Select",[SC,_C,JOe]=L_(lw),[ny]=oa(lw,[JOe,sp]),CC=sp(),[eRe,op]=ny(lw),[tRe,rRe]=ny(lw),$ae=e=>{const{__scopeSelect:t,children:n,open:s,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:h,disabled:f,required:m,form:p}=e,g=CC(t),[v,x]=b.useState(null),[y,j]=b.useState(null),[w,N]=b.useState(!1),S=X0(d),[T=!1,C]=bc({prop:s,defaultProp:i,onChange:a}),[A,R]=bc({prop:o,defaultProp:l,onChange:c}),k=b.useRef(null),O=v?p||!!v.closest("form"):!0,[$,D]=b.useState(new Set),q=Array.from($).map(M=>M.props.value).join(";");return r.jsx(z_,{...g,children:r.jsxs(eRe,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:y,onValueNodeChange:j,valueNodeHasChildren:w,onValueNodeHasChildrenChange:N,contentId:mc(),value:A,onValueChange:R,open:T,onOpenChange:C,dir:S,triggerPointerDownPosRef:k,disabled:f,children:[r.jsx(SC.Provider,{scope:t,children:r.jsx(tRe,{scope:e.__scopeSelect,onNativeOptionAdd:b.useCallback(M=>{D(L=>new Set(L).add(M))},[]),onNativeOptionRemove:b.useCallback(M=>{D(L=>{const V=new Set(L);return V.delete(M),V})},[]),children:n})}),O?r.jsxs(doe,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:h,value:A,onChange:M=>R(M.target.value),disabled:f,form:p,children:[A===void 0?r.jsx("option",{value:""}):null,Array.from($)]},q):null]})})};$ae.displayName=lw;var Bae="SelectTrigger",Vae=b.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:s=!1,...i}=e,a=CC(n),o=op(Bae,n),l=o.disabled||s,c=Jr(t,o.onTriggerChange),d=_C(n),u=b.useRef("touch"),[h,f,m]=uoe(g=>{const v=d().filter(j=>!j.disabled),x=v.find(j=>j.value===o.value),y=hoe(v,g,x);y!==void 0&&o.onValueChange(y.value)}),p=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return r.jsx(zj,{asChild:!0,...a,children:r.jsx(ar.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":coe(o.value)?"":void 0,...i,ref:c,onClick:$t(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&p(g)}),onPointerDown:$t(i.onPointerDown,g=>{u.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(p(g),g.preventDefault())}),onKeyDown:$t(i.onKeyDown,g=>{const v=h.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(v&&g.key===" ")&&QOe.includes(g.key)&&(p(),g.preventDefault())})})})});Vae.displayName=Bae;var Uae="SelectValue",qae=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,children:a,placeholder:o="",...l}=e,c=op(Uae,n),{onValueNodeHasChildrenChange:d}=c,u=a!==void 0,h=Jr(t,c.onValueNodeChange);return Xi(()=>{d(u)},[d,u]),r.jsx(ar.span,{...l,ref:h,style:{pointerEvents:"none"},children:coe(c.value)?r.jsx(r.Fragment,{children:o}):a})});qae.displayName=Uae;var nRe="SelectIcon",zae=b.forwardRef((e,t)=>{const{__scopeSelect:n,children:s,...i}=e;return r.jsx(ar.span,{"aria-hidden":!0,...i,ref:t,children:s||""})});zae.displayName=nRe;var sRe="SelectPortal",Hae=e=>r.jsx(W0,{asChild:!0,...e});Hae.displayName=sRe;var Lg="SelectContent",Wae=b.forwardRef((e,t)=>{const n=op(Lg,e.__scopeSelect),[s,i]=b.useState();if(Xi(()=>{i(new DocumentFragment)},[]),!n.open){const a=s;return a?Hg.createPortal(r.jsx(Kae,{scope:e.__scopeSelect,children:r.jsx(SC.Slot,{scope:e.__scopeSelect,children:r.jsx("div",{children:e.children})})}),a):null}return r.jsx(Gae,{...e,ref:t})});Wae.displayName=Lg;var Dd=10,[Kae,lp]=ny(Lg),iRe="SelectContentImpl",aRe=Um("SelectContent.RemoveScroll"),Gae=b.forwardRef((e,t)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:g,avoidCollisions:v,...x}=e,y=op(Lg,n),[j,w]=b.useState(null),[N,S]=b.useState(null),T=Jr(t,J=>w(J)),[C,A]=b.useState(null),[R,k]=b.useState(null),O=_C(n),[$,D]=b.useState(!1),q=b.useRef(!1);b.useEffect(()=>{if(j)return J_(j)},[j]),Q_();const M=b.useCallback(J=>{const[ie,...X]=O().map(Q=>Q.ref.current),[he]=X.slice(-1),fe=document.activeElement;for(const Q of J)if(Q===fe||(Q==null||Q.scrollIntoView({block:"nearest"}),Q===ie&&N&&(N.scrollTop=0),Q===he&&N&&(N.scrollTop=N.scrollHeight),Q==null||Q.focus(),document.activeElement!==fe))return},[O,N]),L=b.useCallback(()=>M([C,j]),[M,C,j]);b.useEffect(()=>{$&&L()},[$,L]);const{onOpenChange:V,triggerPointerDownPosRef:P}=y;b.useEffect(()=>{if(j){let J={x:0,y:0};const ie=he=>{var fe,Q;J={x:Math.abs(Math.round(he.pageX)-(((fe=P.current)==null?void 0:fe.x)??0)),y:Math.abs(Math.round(he.pageY)-(((Q=P.current)==null?void 0:Q.y)??0))}},X=he=>{J.x<=10&&J.y<=10?he.preventDefault():j.contains(he.target)||V(!1),document.removeEventListener("pointermove",ie),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",ie),document.addEventListener("pointerup",X,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ie),document.removeEventListener("pointerup",X,{capture:!0})}}},[j,V,P]),b.useEffect(()=>{const J=()=>V(!1);return window.addEventListener("blur",J),window.addEventListener("resize",J),()=>{window.removeEventListener("blur",J),window.removeEventListener("resize",J)}},[V]);const[z,Z]=uoe(J=>{const ie=O().filter(fe=>!fe.disabled),X=ie.find(fe=>fe.ref.current===document.activeElement),he=hoe(ie,J,X);he&&setTimeout(()=>he.ref.current.focus())}),F=b.useCallback((J,ie,X)=>{const he=!q.current&&!X;(y.value!==void 0&&y.value===ie||he)&&(A(J),he&&(q.current=!0))},[y.value]),W=b.useCallback(()=>j==null?void 0:j.focus(),[j]),G=b.useCallback((J,ie,X)=>{const he=!q.current&&!X;(y.value!==void 0&&y.value===ie||he)&&k(J)},[y.value]),H=s==="popper"?RT:Yae,se=H===RT?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:h,collisionBoundary:f,collisionPadding:m,sticky:p,hideWhenDetached:g,avoidCollisions:v}:{};return r.jsx(Kae,{scope:n,content:j,viewport:N,onViewportChange:S,itemRefCallback:F,selectedItem:C,onItemLeave:W,itemTextRefCallback:G,focusSelectedItem:L,selectedItemText:R,position:s,isPositioned:$,searchRef:z,children:r.jsx(Wj,{as:aRe,allowPinchZoom:!0,children:r.jsx(Hj,{asChild:!0,trapped:y.open,onMountAutoFocus:J=>{J.preventDefault()},onUnmountAutoFocus:$t(i,J=>{var ie;(ie=y.trigger)==null||ie.focus({preventScroll:!0}),J.preventDefault()}),children:r.jsx(Gg,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:J=>J.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:r.jsx(H,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:J=>J.preventDefault(),...x,...se,onPlaced:()=>D(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:$t(x.onKeyDown,J=>{const ie=J.ctrlKey||J.altKey||J.metaKey;if(J.key==="Tab"&&J.preventDefault(),!ie&&J.key.length===1&&Z(J.key),["ArrowUp","ArrowDown","Home","End"].includes(J.key)){let he=O().filter(fe=>!fe.disabled).map(fe=>fe.ref.current);if(["ArrowUp","End"].includes(J.key)&&(he=he.slice().reverse()),["ArrowUp","ArrowDown"].includes(J.key)){const fe=J.target,Q=he.indexOf(fe);he=he.slice(Q+1)}setTimeout(()=>M(he)),J.preventDefault()}})})})})})})});Gae.displayName=iRe;var oRe="SelectItemAlignedPosition",Yae=b.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:s,...i}=e,a=op(Lg,n),o=lp(Lg,n),[l,c]=b.useState(null),[d,u]=b.useState(null),h=Jr(t,T=>u(T)),f=_C(n),m=b.useRef(!1),p=b.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:x,focusSelectedItem:y}=o,j=b.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&d&&g&&v&&x){const T=a.trigger.getBoundingClientRect(),C=d.getBoundingClientRect(),A=a.valueNode.getBoundingClientRect(),R=x.getBoundingClientRect();if(a.dir!=="rtl"){const fe=R.left-C.left,Q=A.left-fe,Oe=T.left-Q,ve=T.width+Oe,ee=Math.max(ve,C.width),Ee=window.innerWidth-Dd,Re=OT(Q,[Dd,Math.max(Dd,Ee-ee)]);l.style.minWidth=ve+"px",l.style.left=Re+"px"}else{const fe=C.right-R.right,Q=window.innerWidth-A.right-fe,Oe=window.innerWidth-T.right-Q,ve=T.width+Oe,ee=Math.max(ve,C.width),Ee=window.innerWidth-Dd,Re=OT(Q,[Dd,Math.max(Dd,Ee-ee)]);l.style.minWidth=ve+"px",l.style.right=Re+"px"}const k=f(),O=window.innerHeight-Dd*2,$=g.scrollHeight,D=window.getComputedStyle(d),q=parseInt(D.borderTopWidth,10),M=parseInt(D.paddingTop,10),L=parseInt(D.borderBottomWidth,10),V=parseInt(D.paddingBottom,10),P=q+M+$+V+L,z=Math.min(v.offsetHeight*5,P),Z=window.getComputedStyle(g),F=parseInt(Z.paddingTop,10),W=parseInt(Z.paddingBottom,10),G=T.top+T.height/2-Dd,H=O-G,se=v.offsetHeight/2,J=v.offsetTop+se,ie=q+M+J,X=P-ie;if(ie<=G){const fe=k.length>0&&v===k[k.length-1].ref.current;l.style.bottom="0px";const Q=d.clientHeight-g.offsetTop-g.offsetHeight,Oe=Math.max(H,se+(fe?W:0)+Q+L),ve=ie+Oe;l.style.height=ve+"px"}else{const fe=k.length>0&&v===k[0].ref.current;l.style.top="0px";const Oe=Math.max(G,q+g.offsetTop+(fe?F:0)+se)+X;l.style.height=Oe+"px",g.scrollTop=ie-G+g.offsetTop}l.style.margin=`${Dd}px 0`,l.style.minHeight=z+"px",l.style.maxHeight=O+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[f,a.trigger,a.valueNode,l,d,g,v,x,a.dir,s]);Xi(()=>j(),[j]);const[w,N]=b.useState();Xi(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const S=b.useCallback(T=>{T&&p.current===!0&&(j(),y==null||y(),p.current=!1)},[j,y]);return r.jsx(cRe,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:r.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:r.jsx(ar.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Yae.displayName=oRe;var lRe="SelectPopperPosition",RT=b.forwardRef((e,t)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Dd,...a}=e,o=CC(n);return r.jsx(H_,{...o,...a,ref:t,align:s,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});RT.displayName=lRe;var[cRe,w6]=ny(Lg,{}),DT="SelectViewport",Xae=b.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:s,...i}=e,a=lp(DT,n),o=w6(DT,n),l=Jr(t,a.onViewportChange),c=b.useRef(0);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),r.jsx(SC.Slot,{scope:n,children:r.jsx(ar.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$t(i.onScroll,d=>{const u=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&h){const m=Math.abs(c.current-u.scrollTop);if(m>0){const p=window.innerHeight-Dd*2,g=parseFloat(h.style.minHeight),v=parseFloat(h.style.height),x=Math.max(g,v);if(x<p){const y=x+m,j=Math.min(p,y),w=y-j;h.style.height=j+"px",h.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,h.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});Xae.displayName=DT;var Qae="SelectGroup",[dRe,uRe]=ny(Qae),hRe=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=mc();return r.jsx(dRe,{scope:n,id:i,children:r.jsx(ar.div,{role:"group","aria-labelledby":i,...s,ref:t})})});hRe.displayName=Qae;var Zae="SelectLabel",Jae=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=uRe(Zae,n);return r.jsx(ar.div,{id:i.id,...s,ref:t})});Jae.displayName=Zae;var tS="SelectItem",[fRe,eoe]=ny(tS),toe=b.forwardRef((e,t)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:a,...o}=e,l=op(tS,n),c=lp(tS,n),d=l.value===s,[u,h]=b.useState(a??""),[f,m]=b.useState(!1),p=Jr(t,y=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,y,s,i)}),g=mc(),v=b.useRef("touch"),x=()=>{i||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return r.jsx(fRe,{scope:n,value:s,disabled:i,textId:g,isSelected:d,onItemTextChange:b.useCallback(y=>{h(j=>j||((y==null?void 0:y.textContent)??"").trim())},[]),children:r.jsx(SC.ItemSlot,{scope:n,value:s,disabled:i,textValue:u,children:r.jsx(ar.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":d&&f,"data-state":d?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:p,onFocus:$t(o.onFocus,()=>m(!0)),onBlur:$t(o.onBlur,()=>m(!1)),onClick:$t(o.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:$t(o.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:$t(o.onPointerDown,y=>{v.current=y.pointerType}),onPointerMove:$t(o.onPointerMove,y=>{var j;v.current=y.pointerType,i?(j=c.onItemLeave)==null||j.call(c):v.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$t(o.onPointerLeave,y=>{var j;y.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:$t(o.onKeyDown,y=>{var w;((w=c.searchRef)==null?void 0:w.current)!==""&&y.key===" "||(ZOe.includes(y.key)&&x(),y.key===" "&&y.preventDefault())})})})})});toe.displayName=tS;var yb="SelectItemText",roe=b.forwardRef((e,t)=>{const{__scopeSelect:n,className:s,style:i,...a}=e,o=op(yb,n),l=lp(yb,n),c=eoe(yb,n),d=rRe(yb,n),[u,h]=b.useState(null),f=Jr(t,x=>h(x),c.onItemTextChange,x=>{var y;return(y=l.itemTextRefCallback)==null?void 0:y.call(l,x,c.value,c.disabled)}),m=u==null?void 0:u.textContent,p=b.useMemo(()=>r.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=d;return Xi(()=>(g(p),()=>v(p)),[g,v,p]),r.jsxs(r.Fragment,{children:[r.jsx(ar.span,{id:c.textId,...a,ref:f}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Hg.createPortal(a.children,o.valueNode):null]})});roe.displayName=yb;var noe="SelectItemIndicator",soe=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return eoe(noe,n).isSelected?r.jsx(ar.span,{"aria-hidden":!0,...s,ref:t}):null});soe.displayName=noe;var MT="SelectScrollUpButton",ioe=b.forwardRef((e,t)=>{const n=lp(MT,e.__scopeSelect),s=w6(MT,e.__scopeSelect),[i,a]=b.useState(!1),o=Jr(t,s.onScrollButtonChange);return Xi(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;a(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(ooe,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ioe.displayName=MT;var IT="SelectScrollDownButton",aoe=b.forwardRef((e,t)=>{const n=lp(IT,e.__scopeSelect),s=w6(IT,e.__scopeSelect),[i,a]=b.useState(!1),o=Jr(t,s.onScrollButtonChange);return Xi(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),i?r.jsx(ooe,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});aoe.displayName=IT;var ooe=b.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=e,a=lp("SelectScrollButton",n),o=b.useRef(null),l=_C(n),c=b.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),Xi(()=>{var u;const d=l().find(h=>h.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),r.jsx(ar.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:$t(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:$t(i.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:$t(i.onPointerLeave,()=>{c()})})}),mRe="SelectSeparator",loe=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e;return r.jsx(ar.div,{"aria-hidden":!0,...s,ref:t})});loe.displayName=mRe;var LT="SelectArrow",pRe=b.forwardRef((e,t)=>{const{__scopeSelect:n,...s}=e,i=CC(n),a=op(LT,n),o=lp(LT,n);return a.open&&o.position==="popper"?r.jsx(W_,{...i,...s,ref:t}):null});pRe.displayName=LT;function coe(e){return e===""||e===void 0}var doe=b.forwardRef((e,t)=>{const{value:n,...s}=e,i=b.useRef(null),a=Jr(t,i),o=NC(n);return b.useEffect(()=>{const l=i.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&u){const h=new Event("change",{bubbles:!0});u.call(l,n),l.dispatchEvent(h)}},[o,n]),r.jsx(Uj,{asChild:!0,children:r.jsx("select",{...s,ref:a,defaultValue:n})})});doe.displayName="BubbleSelect";function uoe(e){const t=ii(e),n=b.useRef(""),s=b.useRef(0),i=b.useCallback(o=>{const l=n.current+o;t(l),function c(d){n.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),a=b.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,a]}function hoe(e,t,n){const i=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let o=gRe(e,Math.max(a,0));i.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function gRe(e,t){return e.map((n,s)=>e[(t+s)%e.length])}var xRe=$ae,foe=Vae,vRe=qae,yRe=zae,bRe=Hae,moe=Wae,jRe=Xae,poe=Jae,goe=toe,wRe=roe,NRe=soe,xoe=ioe,voe=aoe,yoe=loe;const pr=xRe,yr=vRe,ur=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(foe,{ref:s,className:Xe("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,r.jsx(yRe,{asChild:!0,children:r.jsx(Tm,{className:"h-4 w-4 opacity-50"})})]}));ur.displayName=foe.displayName;const boe=b.forwardRef(({className:e,...t},n)=>r.jsx(xoe,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Uxe,{className:"h-4 w-4"})}));boe.displayName=xoe.displayName;const joe=b.forwardRef(({className:e,...t},n)=>r.jsx(voe,{ref:n,className:Xe("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(Tm,{className:"h-4 w-4"})}));joe.displayName=voe.displayName;const hr=b.forwardRef(({className:e,children:t,position:n="popper",...s},i)=>r.jsx(bRe,{children:r.jsxs(moe,{ref:i,className:Xe("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...s,children:[r.jsx(boe,{}),r.jsx(jRe,{className:Xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(joe,{})]})}));hr.displayName=moe.displayName;const SRe=b.forwardRef(({className:e,...t},n)=>r.jsx(poe,{ref:n,className:Xe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));SRe.displayName=poe.displayName;const it=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(goe,{ref:s,className:Xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(NRe,{children:r.jsx(Qd,{className:"h-4 w-4"})})}),r.jsx(wRe,{children:t})]}));it.displayName=goe.displayName;const _Re=b.forwardRef(({className:e,...t},n)=>r.jsx(yoe,{ref:n,className:Xe("-mx-1 my-1 h-px bg-muted",e),...t}));_Re.displayName=yoe.displayName;const Ur=b.forwardRef(({className:e,...t},n)=>r.jsx("textarea",{className:Xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...t}));Ur.displayName="Textarea";const woe=[{state:"Himachal Pradesh",district:"Bilaspur",tehsils:["Bharari","Bilaspur Sadar","Ghumarwin","Jhanduta","Kalol","Naina Devi","Namhol"]},{state:"Himachal Pradesh",district:"Chamba",tehsils:["Bhalai","Bharmour","Bhattiyat","Chamba","Churah","Dalhousie","Dharwala","Holi","Kakira","Pangi","Pukhri","Saho","Saluni","Sihunta","Telka"]},{state:"Himachal Pradesh",district:"Hamirpur",tehsils:["Barsar","Bhoranj","Bhota","Dhatwal","Galore","Hamirpur","Jahu","Kangoo","Lambloo","Nadaun","Tauni Devi Bamson","Tira Sujanpur"]},{state:"Himachal Pradesh",district:"Kangra",tehsils:["Alampur","Baijnath","Baroh","Bharoli","Bhawarna","Chadiyar","Dadasiba","Dareeni","Dehra Gopipur","Dharamshala","Dhira","Fatehpur","Gangath","Harchakian","Haripur","Indora","Jaisinghpur","Jaswan","Jawalamukhi","Jawali","Kangra","Khundian","Kotla","Lagru","Majheen","Multhan","Nagrota Bagwan","Nagrota Surian","Nurpur","Palampur","Panchrukhi","Pragpur","Raja Ka Talab","Rakkar","Rey","Sadwan","Shahpur","Sulah","Thakurdwara","Thural"]},{state:"Himachal Pradesh",district:"Kinnaur",tehsils:["Hangrang","Kalpa","Moorang","Nichar","Poo","Sangla","Tapri"]},{state:"Himachal Pradesh",district:"Kullu",tehsils:["Anni","Banjar","Bhuntar","Jari","Kullu","Manali","Nirmand","Nither","Sainj"]},{state:"Himachal Pradesh",district:"Lahaul and Spiti",tehsils:["Lahaul","Spiti","Udaipur"]},{state:"Himachal Pradesh",district:"Mandi",tehsils:["Aut","Bagachnogi","Bagshad","Baldwara","Balh","Bali Chowki","Bhadrota","Chachyot","Chhatri","Dehar","Dhalwan","Dharmpur","Jogindarnagar","Karsog","Katoula","Kotli","Lad Bharol","Makridi","Mandap","Mandi","Nihri","Padhar","Pangna","Rewalsar","Sandhol","Sarkaghat","Sundarnagar","Thachi","Thunag","Tihra","Tikken"]},{state:"Himachal Pradesh",district:"Shimla",tehsils:["Chaupal","Chirgaon","Deha","Dhami","Dodra Kwar","Jalog","Jangla","Jubbal","Junga","Kalbog","Kotgarh","Kotkhai","Kumarsain","Kupvi","Nankhari","Nerwa","Rampur","Rohru","Sarahan","Sarawati Nagar","Shimla Rural","Shimla Urban","Sunni","Taklech","Theog","Tikar"]},{state:"Himachal Pradesh",district:"Sirmaur",tehsils:["Dadahu","Haripurdhar","Kamrau","Majra","Nahan","Narag","Nohra","Pachhad","Pajhota","Paonta Sahib","Rajgarh","Renuka","Ronhat","Shillai"]},{state:"Himachal Pradesh",district:"Solan",tehsils:["Arki","Baddi","Darlaghat","Kandaghat","Kasauli","Krishangarh","Kunihar","Loharghat","Mamlig","Nalagarh","Panjehra","Parwanoo","Ramshahr","Solan"]},{state:"Himachal Pradesh",district:"Una",tehsils:["Amb","Bangana","Bharwain","Birhu Kalan","Dulahar","Gagret","Ghanari","Haroli","Ispur","Jol","Mehatpur","Una"]}],N6="Himachal Pradesh";function cw(e=N6){return woe.filter(t=>t.state===e).map(t=>t.district).sort()}function vm(e){var t;return((t=woe.find(n=>n.district===e))==null?void 0:t.tehsils)??[]}const dw=[{value:"mc",label:"Municipal Corporation / Municipal Council"},{value:"tcp",label:"Town & Country Planning / SADA / Nagar Panchayat Area"},{value:"gp",label:"Gram Panchayat"}],CRe=I.object({newPassword:I.string().min(6,"New password must be at least 6 characters"),confirmPassword:I.string().min(6,"Please confirm the new password")}).superRefine((e,t)=>{e.newPassword!==e.confirmPassword&&t.addIssue({code:I.ZodIssueCode.custom,message:"Passwords do not match",path:["confirmPassword"]})}),ARe=N6;function kRe(){const{toast:e}=Tr(),[,t]=Dr(),{data:n}=rt({queryKey:["/api/auth/me"]}),s=n==null?void 0:n.user,{data:i,isLoading:a}=rt({queryKey:["/api/profile"],enabled:!!s&&s.role==="property_owner",retry:!1,staleTime:0,refetchOnMount:!0,refetchOnReconnect:!0,refetchOnWindowFocus:!1}),o=b.useRef(!1),l=lu({resolver:hf(KOe),defaultValues:{firstName:"",lastName:"",gender:"male",aadhaarNumber:"",mobile:"",email:"",district:"",tehsil:"",gramPanchayat:"",urbanBody:"",ward:"",address:"",pincode:"",telephone:""}}),c=lu({resolver:hf(CRe),defaultValues:{newPassword:"",confirmPassword:""}});b.useEffect(()=>{s&&s.role&&s.role!=="property_owner"&&(s.role==="dealing_assistant"?t("/da/profile"):s.role==="district_tourism_officer"?t("/dtdo/profile"):t("/"))},[s,t]),b.useEffect(()=>{if(i){o.current=!0;const m=(i.fullName||"").split(" "),p=m[0]||"",g=m.slice(1).join(" ")||"";l.reset({firstName:p,lastName:g,gender:i.gender,aadhaarNumber:i.aadhaarNumber||"",mobile:i.mobile,email:i.email||"",district:i.district||"",tehsil:i.tehsil||"",gramPanchayat:i.gramPanchayat||"",urbanBody:i.urbanBody||"",ward:i.ward||"",address:i.address||"",pincode:i.pincode||"",telephone:i.telephone||""}),setTimeout(()=>{o.current=!1},0)}else if(s){const m=(s.fullName||"").split(" "),p=m[0]||"",g=m.slice(1).join(" ")||"";l.reset({firstName:p,lastName:g,gender:"male",aadhaarNumber:s.aadhaarNumber||"",mobile:s.mobile||"",email:s.email||"",district:s.district||"",tehsil:"",gramPanchayat:"",urbanBody:"",ward:"",address:"",pincode:"",telephone:""})}},[i,s,l]);const d=Ot({mutationFn:async m=>await lt("POST","/api/profile",m),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/profile"]}),e({title:"Profile saved successfully",description:"Your profile information has been updated. This will be used to auto-fill future applications."})},onError:m=>{e({variant:"destructive",title:"Failed to save profile",description:m.message||"Please try again."})}}),u=Ot({mutationFn:async m=>await lt("POST","/api/owner/change-password",m),onSuccess:()=>{c.reset(),e({title:"Password updated",description:"Your password has been changed successfully."})},onError:m=>{e({variant:"destructive",title:"Failed to change password",description:(m==null?void 0:m.message)||"Please check your current password and try again."})}}),h=m=>{const{firstName:p,lastName:g,...v}=m,x={...v,fullName:`${p} ${g}`.trim()};d.mutate(x)},f=m=>{u.mutate(m)};return s&&s.role!=="property_owner"?null:a?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})}):r.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(li,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"My Profile"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Save your default information here to auto-fill future homestay registration applications. You can always override these values when filling out an application."})]}),r.jsx(du,{...l,children:r.jsxs("form",{onSubmit:l.handleSubmit(h),className:"space-y-6",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Personal Information"}),r.jsx(Ue,{children:"Your basic personal details that will be used across all applications"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:l.control,name:"firstName",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"First Name *"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"Enter your first name","data-testid":"input-profile-firstname",characterRestriction:"alpha-space",maxLength:50})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:l.control,name:"lastName",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Last Name *"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"Enter your last name","data-testid":"input-profile-lastname",characterRestriction:"alpha-space",maxLength:50})}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:l.control,name:"gender",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Gender *"}),r.jsxs(pr,{onValueChange:m.onChange,value:m.value,children:[r.jsx(dt,{children:r.jsx(ur,{"data-testid":"select-profile-gender",children:r.jsx(yr,{placeholder:"Select gender"})})}),r.jsxs(hr,{children:[r.jsx(it,{value:"male",children:"Male"}),r.jsx(it,{value:"female",children:"Female"})]})]}),r.jsx(ys,{children:"Female property owners receive an additional 5% discount on registration fees"}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:l.control,name:"aadhaarNumber",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Aadhaar Number"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"123456789012",maxLength:12,"data-testid":"input-profile-aadhaar",characterRestriction:"numeric"})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:l.control,name:"mobile",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Mobile Number *"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"9876543210",maxLength:10,"data-testid":"input-profile-mobile",characterRestriction:"numeric"})}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:l.control,name:"email",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Email Address"}),r.jsx(dt,{children:r.jsx(Pe,{...m,type:"email",placeholder:"your.email@example.com","data-testid":"input-profile-email"})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Address Information"}),r.jsx(Ue,{children:"Your contact address details (LGD hierarchical format)"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(ht,{children:"State"}),r.jsx(Pe,{value:ARe,readOnly:!0,disabled:!0,className:"bg-muted/60","aria-readonly":!0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Homestay pilot currently covers Himachal Pradesh."})]}),r.jsx(ot,{control:l.control,name:"district",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"District"}),r.jsxs(pr,{onValueChange:p=>{m.onChange(p),!o.current&&(l.setValue("tehsil",""),l.setValue("gramPanchayat",""),l.setValue("urbanBody",""),l.setValue("ward",""))},value:m.value,children:[r.jsx(dt,{children:r.jsx(ur,{"data-testid":"select-profile-district",children:r.jsx(yr,{placeholder:"Select district"})})}),r.jsx(hr,{children:cw().map(p=>r.jsx(it,{value:p,children:p},p))})]}),r.jsx(ys,{children:"Select your district first"}),r.jsx(ct,{})]})}),r.jsx(ot,{control:l.control,name:"tehsil",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Tehsil"}),r.jsxs(pr,{onValueChange:p=>{m.onChange(p),l.setValue("gramPanchayat",""),l.setValue("urbanBody",""),l.setValue("ward","")},value:m.value,disabled:!l.watch("district"),children:[r.jsx(dt,{children:r.jsx(ur,{"data-testid":"select-profile-tehsil",children:r.jsx(yr,{placeholder:"Select tehsil"})})}),r.jsx(hr,{children:vm(l.watch("district")).map(p=>r.jsx(it,{value:p,children:p},p))})]}),r.jsx(ys,{children:"Select tehsil after district"}),r.jsx(ct,{})]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsx(ot,{control:l.control,name:"gramPanchayat",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Village / Locality (PO)"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"Village, locality, or Post Office","data-testid":"input-profile-gp"})}),r.jsx(ys,{children:"Required for Gram Panchayat areas; optional for MC/TCP."}),r.jsx(ct,{})]})})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:l.control,name:"urbanBody",render:({field:m,fieldState:p})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Urban Body / MC / TCP (for urban areas)"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"Type your MC/TCP/Nagar Panchayat","data-testid":"input-profile-urban-body","aria-invalid":p.invalid})}),r.jsx(ys,{children:"Enter the name of the urban local body manually."}),r.jsx(ct,{})]})}),r.jsx(ot,{control:l.control,name:"ward",render:({field:m,fieldState:p})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Ward / Zone (for urban areas)"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"Enter ward or zone","data-testid":"input-profile-ward-manual","aria-invalid":p.invalid})}),r.jsx(ys,{children:"Enter the ward / zone number manually."}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:l.control,name:"address",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Street Address"}),r.jsx(dt,{children:r.jsx(Ur,{...m,placeholder:"House/Building number, Street, Locality",rows:3,"data-testid":"input-profile-address"})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(ot,{control:l.control,name:"pincode",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Pincode"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"171001",maxLength:6,"data-testid":"input-profile-pincode",characterRestriction:"numeric"})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:l.control,name:"telephone",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Telephone (Landline)"}),r.jsx(dt,{children:r.jsx(Pe,{...m,placeholder:"0177-2812345","data-testid":"input-profile-telephone"})}),r.jsx(ct,{})]})})]})]})]}),r.jsx("div",{className:"flex justify-end gap-4",children:r.jsx(te,{type:"submit",disabled:d.isPending||!l.formState.isDirty,"data-testid":"button-save-profile",children:d.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"mr-2 h-4 w-4"}),"Save Profile"]})})})]})}),r.jsxs(me,{className:"mt-8",children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"h-5 w-5 text-primary"}),r.jsxs("div",{children:[r.jsx(ke,{children:"Security"}),r.jsx(Ue,{children:"Update your password regularly to keep the account secure."})]})]})}),r.jsx(ge,{children:r.jsx(du,{...c,children:r.jsxs("form",{onSubmit:c.handleSubmit(f),className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:c.control,name:"newPassword",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"New password"}),r.jsx(dt,{children:r.jsx(Pe,{type:"password",placeholder:"Enter new password",...m})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:c.control,name:"confirmPassword",render:({field:m})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Confirm new password"}),r.jsx(dt,{children:r.jsx(Pe,{type:"password",placeholder:"Re-enter new password",...m})}),r.jsx(ct,{})]})}),r.jsx("div",{className:"md:col-span-3 flex justify-end",children:r.jsx(te,{type:"submit",disabled:u.isPending,className:"w-full md:w-auto",children:u.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):"Update password"})})]})})})]})]})}const PRe="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let rS=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=PRe[n[e]&63];return t};var S6="Checkbox",[TRe]=oa(S6),[ERe,ORe]=TRe(S6),Noe=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=b.useState(null),p=Jr(t,w=>m(w)),g=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[x=!1,y]=bc({prop:i,defaultProp:a,onChange:d}),j=b.useRef(x);return b.useEffect(()=>{const w=f==null?void 0:f.form;if(w){const N=()=>y(j.current);return w.addEventListener("reset",N),()=>w.removeEventListener("reset",N)}},[f,y]),r.jsxs(ERe,{scope:n,state:x,disabled:l,children:[r.jsx(ar.button,{type:"button",role:"checkbox","aria-checked":Rm(x)?"mixed":x,"aria-required":o,"data-state":Coe(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:p,onKeyDown:$t(e.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:$t(e.onClick,w=>{y(N=>Rm(N)?!0:!N),v&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),v&&r.jsx(RRe,{control:f,bubbles:!g.current,name:s,value:c,checked:x,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:Rm(a)?!1:a})]})});Noe.displayName=S6;var Soe="CheckboxIndicator",_oe=b.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:s,...i}=e,a=ORe(Soe,n);return r.jsx(la,{present:s||Rm(a.state)||a.state===!0,children:r.jsx(ar.span,{"data-state":Coe(a.state),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});_oe.displayName=Soe;var RRe=e=>{const{control:t,checked:n,bubbles:s=!0,defaultChecked:i,...a}=e,o=b.useRef(null),l=NC(n),c=q_(t);b.useEffect(()=>{const u=o.current,h=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&m){const p=new Event("click",{bubbles:s});u.indeterminate=Rm(n),m.call(u,Rm(n)?!1:n),u.dispatchEvent(p)}},[l,n,s]);const d=b.useRef(Rm(n)?!1:n);return r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??d.current,...a,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Rm(e){return e==="indeterminate"}function Coe(e){return Rm(e)?"indeterminate":e?"checked":"unchecked"}var Aoe=Noe,DRe=_oe;const Zs=b.forwardRef(({className:e,...t},n)=>r.jsx(Aoe,{ref:n,className:Xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:r.jsx(DRe,{className:Xe("flex items-center justify-center text-current"),children:r.jsx(Qd,{className:"h-4 w-4"})})}));Zs.displayName=Aoe.displayName;const koe={new_registration:{label:"New Registration",className:"bg-slate-100 text-slate-700 border-slate-200 dark:bg-slate-900/40 dark:text-slate-200 dark:border-slate-700"},renewal:{label:"Renewal",className:"bg-indigo-100 text-indigo-700 border-indigo-200 dark:bg-indigo-900/40 dark:text-indigo-200 dark:border-indigo-700"},add_rooms:{label:"Add Rooms",className:"bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-900/40 dark:text-emerald-200 dark:border-emerald-700"},delete_rooms:{label:"Delete Rooms",className:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-900/40 dark:text-rose-200 dark:border-rose-700"},cancel_certificate:{label:"Cancel Certificate",className:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-900/40 dark:text-amber-200 dark:border-amber-700"},change_category:{label:"Change Category",className:"bg-blue-100 text-blue-700 border-blue-200 dark:bg-blue-900/40 dark:text-blue-200 dark:border-blue-700"},change_ownership:{label:"Change Ownership",className:"bg-purple-100 text-purple-700 border-purple-200 dark:bg-purple-900/40 dark:text-purple-200 dark:border-purple-700"}};function FT(e){return koe[e??"new_registration"].label}function Xx(e){return!!(e&&e!=="new_registration")}function Poe({kind:e,showDefault:t=!1,className:n}){const s=e??"new_registration";if(!t&&s==="new_registration")return null;const i=koe[s];return r.jsx(ze,{variant:"outline",className:Xe("text-[11px] font-semibold uppercase tracking-wide border",i.className,n),children:i.label})}function MRe(e,t){return b.useReducer((n,s)=>t[n][s]??n,e)}var _6="ScrollArea",[Toe]=oa(_6),[IRe,hd]=Toe(_6),Eoe=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:s="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,c]=b.useState(null),[d,u]=b.useState(null),[h,f]=b.useState(null),[m,p]=b.useState(null),[g,v]=b.useState(null),[x,y]=b.useState(0),[j,w]=b.useState(0),[N,S]=b.useState(!1),[T,C]=b.useState(!1),A=Jr(t,k=>c(k)),R=X0(i);return r.jsx(IRe,{scope:n,type:s,dir:R,scrollHideDelay:a,scrollArea:l,viewport:d,onViewportChange:u,content:h,onContentChange:f,scrollbarX:m,onScrollbarXChange:p,scrollbarXEnabled:N,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:y,onCornerHeightChange:w,children:r.jsx(ar.div,{dir:R,...o,ref:A,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":j+"px",...e.style}})})});Eoe.displayName=_6;var Ooe="ScrollAreaViewport",Roe=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:s,nonce:i,...a}=e,o=hd(Ooe,n),l=b.useRef(null),c=Jr(t,l,o.onViewportChange);return r.jsxs(r.Fragment,{children:[r.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),r.jsx(ar.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:r.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});Roe.displayName=Ooe;var fh="ScrollAreaScrollbar",C6=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=hd(fh,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return b.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?r.jsx(LRe,{...s,ref:t,forceMount:n}):i.type==="scroll"?r.jsx(FRe,{...s,ref:t,forceMount:n}):i.type==="auto"?r.jsx(Doe,{...s,ref:t,forceMount:n}):i.type==="always"?r.jsx(A6,{...s,ref:t}):null});C6.displayName=fh;var LRe=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=hd(fh,e.__scopeScrollArea),[a,o]=b.useState(!1);return b.useEffect(()=>{const l=i.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),r.jsx(la,{present:n||a,children:r.jsx(Doe,{"data-state":a?"visible":"hidden",...s,ref:t})})}),FRe=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=hd(fh,e.__scopeScrollArea),a=e.orientation==="horizontal",o=kC(()=>c("SCROLL_END"),100),[l,c]=MRe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,i.scrollHideDelay,c]),b.useEffect(()=>{const d=i.viewport,u=a?"scrollLeft":"scrollTop";if(d){let h=d[u];const f=()=>{const m=d[u];h!==m&&(c("SCROLL"),o()),h=m};return d.addEventListener("scroll",f),()=>d.removeEventListener("scroll",f)}},[i.viewport,a,c,o]),r.jsx(la,{present:n||l!=="hidden",children:r.jsx(A6,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:$t(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:$t(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Doe=b.forwardRef((e,t)=>{const n=hd(fh,e.__scopeScrollArea),{forceMount:s,...i}=e,[a,o]=b.useState(!1),l=e.orientation==="horizontal",c=kC(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,u=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:u)}},10);return h0(n.viewport,c),h0(n.content,c),r.jsx(la,{present:s||a,children:r.jsx(A6,{"data-state":a?"visible":"hidden",...i,ref:t})})}),A6=b.forwardRef((e,t)=>{const{orientation:n="vertical",...s}=e,i=hd(fh,e.__scopeScrollArea),a=b.useRef(null),o=b.useRef(0),[l,c]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=$oe(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:f=>o.current=f};function h(f,m){return zRe(f,o.current,l,m)}return n==="horizontal"?r.jsx($Re,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollLeft,m=iB(f,l,i.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollLeft=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollLeft=h(f,i.dir))}}):n==="vertical"?r.jsx(BRe,{...u,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const f=i.viewport.scrollTop,m=iB(f,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:f=>{i.viewport&&(i.viewport.scrollTop=f)},onDragScroll:f=>{i.viewport&&(i.viewport.scrollTop=h(f))}}):null}),$Re=b.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=hd(fh,e.__scopeScrollArea),[o,l]=b.useState(),c=b.useRef(null),d=Jr(t,c,a.onScrollbarXChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(Ioe,{"data-orientation":"horizontal",...i,ref:d,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":AC(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,h)=>{if(a.viewport){const f=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),Voe(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:sS(o.paddingLeft),paddingEnd:sS(o.paddingRight)}})}})}),BRe=b.forwardRef((e,t)=>{const{sizes:n,onSizesChange:s,...i}=e,a=hd(fh,e.__scopeScrollArea),[o,l]=b.useState(),c=b.useRef(null),d=Jr(t,c,a.onScrollbarYChange);return b.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),r.jsx(Ioe,{"data-orientation":"vertical",...i,ref:d,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":AC(n)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,h)=>{if(a.viewport){const f=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),Voe(f,h)&&u.preventDefault()}},onResize:()=>{c.current&&a.viewport&&o&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:sS(o.paddingTop),paddingEnd:sS(o.paddingBottom)}})}})}),[VRe,Moe]=Toe(fh),Ioe=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:h,...f}=e,m=hd(fh,n),[p,g]=b.useState(null),v=Jr(t,A=>g(A)),x=b.useRef(null),y=b.useRef(""),j=m.viewport,w=s.content-s.viewport,N=ii(u),S=ii(c),T=kC(h,10);function C(A){if(x.current){const R=A.clientX-x.current.left,k=A.clientY-x.current.top;d({x:R,y:k})}}return b.useEffect(()=>{const A=R=>{const k=R.target;(p==null?void 0:p.contains(k))&&N(R,w)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[j,p,w,N]),b.useEffect(S,[s,S]),h0(p,T),h0(m.content,T),r.jsx(VRe,{scope:n,scrollbar:p,hasThumb:i,onThumbChange:ii(a),onThumbPointerUp:ii(o),onThumbPositionChange:S,onThumbPointerDown:ii(l),children:r.jsx(ar.div,{...f,ref:v,style:{position:"absolute",...f.style},onPointerDown:$t(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),x.current=p.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(A))}),onPointerMove:$t(e.onPointerMove,C),onPointerUp:$t(e.onPointerUp,A=>{const R=A.target;R.hasPointerCapture(A.pointerId)&&R.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),nS="ScrollAreaThumb",Loe=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=Moe(nS,e.__scopeScrollArea);return r.jsx(la,{present:n||i.hasThumb,children:r.jsx(URe,{ref:t,...s})})}),URe=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:s,...i}=e,a=hd(nS,n),o=Moe(nS,n),{onThumbPositionChange:l}=o,c=Jr(t,h=>o.onThumbChange(h)),d=b.useRef(void 0),u=kC(()=>{d.current&&(d.current(),d.current=void 0)},100);return b.useEffect(()=>{const h=a.viewport;if(h){const f=()=>{if(u(),!d.current){const m=HRe(h,l);d.current=m,l()}};return l(),h.addEventListener("scroll",f),()=>h.removeEventListener("scroll",f)}},[a.viewport,u,l]),r.jsx(ar.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:$t(e.onPointerDownCapture,h=>{const m=h.target.getBoundingClientRect(),p=h.clientX-m.left,g=h.clientY-m.top;o.onThumbPointerDown({x:p,y:g})}),onPointerUp:$t(e.onPointerUp,o.onThumbPointerUp)})});Loe.displayName=nS;var k6="ScrollAreaCorner",Foe=b.forwardRef((e,t)=>{const n=hd(k6,e.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?r.jsx(qRe,{...e,ref:t}):null});Foe.displayName=k6;var qRe=b.forwardRef((e,t)=>{const{__scopeScrollArea:n,...s}=e,i=hd(k6,n),[a,o]=b.useState(0),[l,c]=b.useState(0),d=!!(a&&l);return h0(i.scrollbarX,()=>{var h;const u=((h=i.scrollbarX)==null?void 0:h.offsetHeight)||0;i.onCornerHeightChange(u),c(u)}),h0(i.scrollbarY,()=>{var h;const u=((h=i.scrollbarY)==null?void 0:h.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),d?r.jsx(ar.div,{...s,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function sS(e){return e?parseInt(e,10):0}function $oe(e,t){const n=e/t;return isNaN(n)?0:n}function AC(e){const t=$oe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-n)*t;return Math.max(s,18)}function zRe(e,t,n,s="ltr"){const i=AC(n),a=i/2,o=t||a,l=i-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,u=n.content-n.viewport,h=s==="ltr"?[0,u]:[u*-1,0];return Boe([c,d],h)(e)}function iB(e,t,n="ltr"){const s=AC(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-s,c=n==="ltr"?[0,o]:[o*-1,0],d=OT(e,c);return Boe([0,o],[0,l])(d)}function Boe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Voe(e,t){return e>0&&e<t}var HRe=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},s=0;return function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=n.left!==a.left,l=n.top!==a.top;(o||l)&&t(),n=a,s=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(s)};function kC(e,t){const n=ii(e),s=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(s.current),[]),b.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,t)},[n,t])}function h0(e,t){const n=ii(t);Xi(()=>{let s=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(s),i.unobserve(e)}}},[e,n])}var Uoe=Eoe,WRe=Roe,KRe=Foe;const P6=b.forwardRef(({className:e,children:t,...n},s)=>r.jsxs(Uoe,{ref:s,className:Xe("relative overflow-hidden",e),...n,children:[r.jsx(WRe,{className:"h-full w-full rounded-[inherit]",children:t}),r.jsx(qoe,{}),r.jsx(KRe,{})]}));P6.displayName=Uoe.displayName;const qoe=b.forwardRef(({className:e,orientation:t="vertical",...n},s)=>r.jsx(C6,{ref:s,orientation:t,className:Xe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:r.jsx(Loe,{className:"relative flex-1 rounded-full bg-border"})}));qoe.displayName=C6.displayName;function GRe({currentStep:e,maxStepReached:t,totalSteps:n,formData:s,onStepClick:i,steps:a,step4Completion:o}){const l=c=>{const d=c.requiredFields;if(d.length===0)return 0;const u=d.filter(h=>{const f=s[h];return Array.isArray(f)?f.length>0:typeof f=="string"?f.trim()!=="":typeof f=="number"?f>0:f!=null&&f!==""});return Math.round(u.length/d.length*100)};return r.jsx("div",{className:"w-full mb-8",children:r.jsx("div",{className:"flex items-center justify-between gap-2",children:a.map((c,d)=>{const u=c.id===4&&o!==void 0?o:l(c),h=e===c.id,f=e>c.id,m=c.id<=t;return r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("button",{type:"button",onClick:()=>m&&i(c.id),disabled:!m,className:Xe("w-full text-left transition-all",m?"cursor-pointer":"cursor-not-allowed opacity-50"),"data-testid":`stepper-step-${c.id}`,children:r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:Xe("w-7 h-7 rounded-full flex items-center justify-center text-xs font-medium transition-all",h&&"bg-primary text-primary-foreground ring-2 ring-primary ring-offset-2",f&&!h&&"bg-primary/20 text-primary",!h&&!f&&"bg-muted text-muted-foreground"),children:f?r.jsx(Qd,{className:"w-4 h-4"}):c.icon?r.jsx(c.icon,{className:"w-4 h-4"}):c.id}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:Xe("text-xs font-medium truncate transition-colors",h&&"text-primary",f&&!h&&"text-foreground",!h&&!f&&"text-muted-foreground"),children:c.shortLabel}),u>0&&r.jsxs("p",{className:"text-[10px] text-muted-foreground",children:[u,"% complete"]})]})]}),r.jsx("div",{className:"h-1.5 bg-muted rounded-full overflow-hidden",children:r.jsx("div",{className:Xe("h-full transition-all duration-300",h&&"bg-primary",f&&!h&&"bg-primary/60",!h&&!f&&"bg-muted-foreground/20"),style:{width:`${u}%`}})})]})}),d<n-1&&r.jsx("div",{className:"hidden sm:block w-full h-0.5 bg-muted absolute top-3.5 left-1/2 -translate-y-1/2 -z-10"})]},c.id)})})})}const PC={documents:{allowedMimeTypes:["application/pdf","image/jpeg","image/png","image/jpg"],allowedExtensions:[".pdf",".jpg",".jpeg",".png"],maxFileSizeMB:25},photos:{allowedMimeTypes:["image/jpeg","image/png","image/jpg","application/pdf"],allowedExtensions:[".jpg",".jpeg",".png",".pdf"],maxFileSizeMB:25},totalPerApplicationMB:100},YRe=N6,XRe=cw(),aB=e=>{if(!e||e.trim()==="")return 0;const t=parseInt(e,10);return Number.isNaN(t)?0:Math.max(0,t)},QRe=/^\d*(\.\d*)?$/,ZRe=e=>{if(!e)return;const t=e.replace(/,/g,"").trim();if(!t||!QRe.test(t))return;const n=parseFloat(t);if(!(Number.isNaN(n)||n<0))return n},JRe=e=>e.toUpperCase().replace(/[^0-9A-Z]/g,"").slice(0,15),bb="17",eDe=6-bb.length,oB=e=>e.replace(/[^\d]/g,"").slice(0,eDe),tDe=e=>ZRe(e),rDe=dw;dw.reduce((e,t)=>({...e,[t.value]:t.label}),{});const nDe=[{value:"female",label:"Female (5% additional discount)"},{value:"male",label:"Male"}],sDe={leased:"Lease Deed"},lB=[{value:"silver",title:"Silver",description:""},{value:"gold",title:"Gold",description:""},{value:"diamond",title:"Diamond",description:""}],cB=[{value:"single",label:"Type 1 (Single)"},{value:"double",label:"Type 2 (Double)"},{value:"suite",label:"Suite"}],dB=6;I.object({propertyName:I.string().min(3,"Property name must be at least 3 characters"),locationType:I.enum(["mc","tcp","gp"]),district:I.string().min(1,"District is required"),tehsil:I.string().optional(),tehsilOther:I.string().optional().or(I.literal("")),gramPanchayat:I.string().optional(),gramPanchayatOther:I.string().optional().or(I.literal("")),urbanBody:I.string().optional(),urbanBodyOther:I.string().optional().or(I.literal("")),ward:I.string().optional(),address:I.string().min(10,"House/Building number and street required"),pincode:I.string().regex(/^[1-9]\d{5}$/,"Enter valid 6-digit pincode"),telephone:I.string().optional().or(I.literal("")),ownerEmail:I.string().min(1,"Email is required").email("Enter valid email"),ownerMobile:I.string().regex(/^[6-9]\d{9}$/,"Enter valid 10-digit mobile"),ownerName:I.string().min(3,"Owner name is required"),ownerFirstName:I.string().min(1,"First name is required").regex(/^[A-Za-z\s'-]+$/,"First name can only contain letters"),ownerLastName:I.string().min(1,"Last name is required").regex(/^[A-Za-z\s'-]+$/,"Last name can only contain letters"),ownerGender:I.enum(["male","female","other"]),ownerAadhaar:I.string().min(1,"Aadhaar is required").regex(/^\d{12}$/,"Aadhaar must be 12 digits"),guardianName:I.string().min(3,"Relative/Guardian name is required"),guardianRelation:I.enum(["s_o","d_o","w_o","c_o","father","husband","guardian"]).default("s_o"),propertyOwnership:I.enum(["owned","leased"]),category:I.enum(["diamond","gold","silver"]),proposedRoomRate:I.number().optional(),singleBedRoomRate:I.number().min(0).optional(),doubleBedRoomRate:I.number().min(0).optional(),familySuiteRate:I.number().min(0).optional(),distanceAirport:I.number().min(0).optional(),distanceRailway:I.number().min(0).optional(),distanceCityCenter:I.number().min(0).optional(),distanceShopping:I.number().min(0).optional(),distanceBusStand:I.number().min(0).optional(),projectType:I.enum(["new_property","existing_property","new_project","new_rooms"]),propertyArea:I.number().min(1,"Property area is required"),propertyAreaUnit:I.enum(["sqm","sqft","kanal","marla","bigha","biswa"]).default("sqm"),propertyAreaConversionRate:I.number().min(.001).optional(),propertyAreaSqM:I.number().min(0).optional(),singleBedRooms:I.number().int().min(0).default(0),singleBedBeds:I.number().int().min(0).default(1),singleBedRoomSize:I.number().min(0).optional(),doubleBedRooms:I.number().int().min(0).default(0),doubleBedBeds:I.number().int().min(0).default(2),doubleBedRoomSize:I.number().min(0).optional(),familySuites:I.number().int().min(0).max(3,"Maximum 3 family suites").default(0),familySuiteBeds:I.number().int().min(0).default(4),familySuiteSize:I.number().min(0).optional(),attachedWashrooms:I.number().int().min(0),lobbyArea:I.number().min(0).optional(),diningArea:I.number().min(0).optional(),parkingArea:I.string().optional().or(I.literal("")),ecoFriendlyFacilities:I.string().optional().or(I.literal("")),differentlyAbledFacilities:I.string().optional().or(I.literal("")),fireEquipmentDetails:I.string().min(10,"Fire safety equipment details must be at least 10 characters"),gstin:I.string().optional().or(I.literal("")),certificateValidityYears:I.enum(["1","3"]).default("1"),nearestHospital:I.string().optional().or(I.literal("")),mandatoryChecklist:I.record(I.string(),I.boolean()).optional(),desirableChecklist:I.record(I.string(),I.boolean()).optional(),keyLocationHighlight1:I.string().optional().or(I.literal("")),keyLocationHighlight2:I.string().optional().or(I.literal(""))});const iDe={single:{roomsField:"singleBedRooms",bedsField:"singleBedBeds",rateField:"singleBedRoomRate",sizeField:"singleBedRoomSize",defaultBeds:1},double:{roomsField:"doubleBedRooms",bedsField:"doubleBedBeds",rateField:"doubleBedRoomRate",sizeField:"doubleBedRoomSize",defaultBeds:2},suite:{roomsField:"familySuites",bedsField:"familySuiteBeds",rateField:"familySuiteRate",sizeField:"familySuiteSize",defaultBeds:4}},uB=[{value:"lt3k",label:"Less than 3,000/night",explanation:"Eligible for SILVER category",minRate:0,maxRate:2999,minCategory:"silver"},{value:"3kto10k",label:"3,000  10,000/night",explanation:"Requires GOLD category or higher",minRate:3e3,maxRate:1e4,minCategory:"gold"},{value:"gt10k",label:"Above 10,000/night",explanation:"Requires DIAMOND category",minRate:1e4,maxRate:5e4,minCategory:"diamond"}],D2={silver:1,gold:2,diamond:3},Px=e=>typeof e.bedsPerRoom=="number"&&e.bedsPerRoom>0?e.bedsPerRoom:iDe[e.roomType].defaultBeds,aDe=(e,t)=>e.reduce((n,s)=>{if(t&&s.id===t)return n;const i=Math.max(0,s.quantity),a=i*Px(s);return{rooms:n.rooms+i,beds:n.beds+a}},{rooms:0,beds:0});I.object({propertyName:I.string().optional(),locationType:I.enum(["mc","tcp","gp"]).optional(),district:I.string().optional(),tehsil:I.string().optional(),tehsilOther:I.string().optional(),gramPanchayat:I.string().optional(),gramPanchayatOther:I.string().optional(),urbanBody:I.string().optional(),urbanBodyOther:I.string().optional(),ward:I.string().optional(),address:I.string().optional(),pincode:I.string().optional(),telephone:I.string().optional(),ownerEmail:I.string().optional(),ownerMobile:I.string().optional(),ownerName:I.string().optional(),ownerFirstName:I.string().optional(),ownerLastName:I.string().optional(),ownerGender:I.enum(["male","female","other"]).optional(),ownerAadhaar:I.string().optional(),guardianName:I.string().optional(),guardianRelation:I.enum(["s_o","d_o","w_o","c_o","father","husband","guardian"]).optional(),propertyOwnership:I.enum(["owned","leased"]).optional(),category:I.enum(["diamond","gold","silver"]).optional(),proposedRoomRate:I.number().optional(),singleBedRoomRate:I.number().optional(),doubleBedRoomRate:I.number().optional(),familySuiteRate:I.number().optional(),distanceAirport:I.number().optional(),distanceRailway:I.number().optional(),distanceCityCenter:I.number().optional(),distanceShopping:I.number().optional(),distanceBusStand:I.number().optional(),projectType:I.enum(["new_property","existing_property","new_project","new_rooms"]).optional(),propertyArea:I.number().optional(),propertyAreaUnit:I.enum(["sqm","sqft","kanal","marla","bigha","biswa"]).optional(),propertyAreaConversionRate:I.number().optional(),propertyAreaSqM:I.number().optional(),singleBedRooms:I.number().optional(),singleBedBeds:I.number().optional(),singleBedRoomSize:I.number().optional(),doubleBedRooms:I.number().optional(),doubleBedBeds:I.number().optional(),doubleBedRoomSize:I.number().optional(),familySuites:I.number().optional(),familySuiteBeds:I.number().optional(),familySuiteSize:I.number().optional(),attachedWashrooms:I.number().optional(),lobbyArea:I.number().optional(),diningArea:I.number().optional(),parkingArea:I.string().optional(),ecoFriendlyFacilities:I.string().optional(),differentlyAbledFacilities:I.string().optional(),fireEquipmentDetails:I.string().optional(),gstin:I.string().optional(),certificateValidityYears:I.enum(["1","3"]).optional(),nearestHospital:I.string().optional(),mandatoryChecklist:I.record(I.string(),I.boolean()).optional(),desirableChecklist:I.record(I.string(),I.boolean()).optional()});function oDe({form:e,step:t,isServiceDraft:n,watchedDistrict:s,locationType:i,pincodeSuffixValue:a,showPincodeHint:o,showRequiredWarning:l=!1,gramFieldConfig:c,urbanBodyConfig:d}){const u=b.useRef(!1),h=b.useRef(null),f=b.useRef(null);h.current===null&&(h.current=e.getValues("gramPanchayat")||""),f.current===null&&(f.current=e.getValues("urbanBody")||"");const m=!!h.current,p=!!f.current;return r.jsx(me,{className:"shadow-lg border-0 overflow-hidden",children:r.jsxs(ge,{className:"p-0",children:[n&&r.jsx("div",{className:"m-6 mb-0 bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Property identity is inherited from your approved application. Start a new registration if structural details need to change."})}),r.jsxs("div",{className:"space-y-0",children:[r.jsxs("div",{className:"border-b",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white px-6 py-4 rounded-t-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"1"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Basic Information"}),r.jsx("p",{className:"text-sm text-white/70",children:"Property name and registration type"})]})]})}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:e.control,name:"propertyName",rules:{required:"Property name is required"},render:({field:g,fieldState:v})=>{var x;return r.jsxs(at,{children:[r.jsxs(ht,{children:["Homestay Name ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"e.g., Himalayan View Homestay","data-testid":"input-property-name","aria-invalid":v.invalid,className:v.invalid?"border-destructive focus-visible:ring-destructive":l&&!((x=g.value)!=null&&x.trim())?"border-amber-400 ring-2 ring-amber-200":"",disabled:n,...g})}),r.jsx(ys,{children:"Choose a memorable name for your homestay"}),r.jsx(ct,{})]})}}),r.jsx(ot,{control:e.control,name:"projectType",rules:{required:"Property type is required"},render:({field:g})=>{const v=n?"Existing Property (Service Request)":"New Homestay Registration";return r.jsxs(at,{children:[r.jsxs(ht,{children:[n?"Service Request":"New Registration"," ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{value:v,readOnly:!0,className:"bg-gray-50 cursor-not-allowed","data-testid":"input-project-type"})}),r.jsx(ys,{children:n?"Amendment request for your approved property.":"Submit a fresh homestay registration."}),r.jsx(ct,{})]})}})]})})]}),r.jsxs("div",{className:"border-b",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"2"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Location Hierarchy"}),r.jsx("p",{className:"text-sm text-white/70",children:"State, District, and Tehsil selection"})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-xs text-gray-500",children:"State"}),r.jsx(Pe,{value:YRe,readOnly:!0,className:"h-11 bg-gray-50"}),r.jsx("p",{className:"text-xs text-gray-400",children:"Portal supports HP only"})]}),r.jsx(ot,{control:e.control,name:"district",rules:{required:"District is required"},render:({field:g,fieldState:v})=>{var x;return r.jsxs(at,{children:[r.jsxs(ht,{children:["District ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs(pr,{onValueChange:y=>{if(g.onChange(y),u.current)return;e.setValue("gramPanchayat",""),e.setValue("urbanBody",""),e.setValue("ward",""),e.clearErrors("ward");const w=vm(y).length===0?"__other":"";e.setValue("tehsil",w,{shouldDirty:!1,shouldValidate:t>=1}),e.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:t>=1})},value:g.value||void 0,children:[r.jsx(dt,{children:r.jsx(ur,{"data-testid":"select-district",className:v.invalid?"border-destructive focus-visible:ring-destructive":l&&!((x=g.value)!=null&&x.trim())?"border-amber-400 ring-2 ring-amber-200":"","aria-invalid":v.invalid,children:r.jsx(yr,{placeholder:"Select district"})})}),r.jsx(hr,{children:XRe.map(y=>r.jsx(it,{value:y,children:y},y))})]}),r.jsx(ys,{children:"Select your district first"}),r.jsx(ct,{})]})}}),r.jsx(ot,{control:e.control,name:"tehsil",render:({field:g,fieldState:v})=>r.jsxs(at,{children:[r.jsxs(ht,{children:["Tehsil ",r.jsx("span",{className:"text-destructive",children:"*"})]}),(()=>{var N;const x=s||"",y=vm(x),j=g.value,w=j&&typeof j=="string"&&!y.includes(j);return r.jsxs(pr,{onValueChange:S=>{const T=e.getValues("tehsil");if(g.onChange(S),u.current)return;const C=S!==T;!u.current&&C&&(e.setValue("gramPanchayat","",{shouldDirty:!1,shouldValidate:t>=1}),e.setValue("urbanBody","",{shouldDirty:!1,shouldValidate:t>=1}),e.setValue("ward","",{shouldDirty:!1,shouldValidate:t>=1}),e.clearErrors("ward")),!u.current&&S!=="__other"&&e.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:t>=1})},value:g.value||void 0,disabled:!x||n,children:[r.jsx(dt,{children:r.jsx(ur,{"data-testid":"select-tehsil",className:v.invalid?"border-destructive focus-visible:ring-destructive":l&&!((N=g.value)!=null&&N.trim())?"border-amber-400 ring-2 ring-amber-200":"","aria-invalid":v.invalid,children:r.jsx(yr,{placeholder:"Select tehsil"})})}),r.jsxs(hr,{children:[y.map(S=>r.jsx(it,{value:S,children:S},S)),r.jsx(it,{value:"__other",children:"Other (Manual Entry)"}),w&&r.jsx(it,{value:j,children:j},j)]})]})})(),r.jsx(ys,{children:"Select tehsil after district"}),r.jsx(ct,{}),e.watch("tehsil")==="__other"&&r.jsx(ot,{control:e.control,name:"tehsilOther",rules:{required:"Please enter the tehsil name"},render:({field:x,fieldState:y})=>r.jsxs(at,{className:"mt-3",children:[r.jsxs(ht,{children:["Manual Tehsil Entry ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Type tehsil or subdivision name","data-testid":"input-tehsil-other",value:x.value??"",onChange:j=>x.onChange(j.target.value),"aria-invalid":y.invalid})}),r.jsx(ys,{children:"Provide the correct tehsil if it is not listed above."}),r.jsx(ct,{})]})})]})})]}),r.jsx(ot,{control:e.control,name:"locationType",rules:{required:"Location type is required"},render:({field:g})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Location Type ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:rDe.map(v=>r.jsx("div",{onClick:()=>{n||(g.onChange(v.value),v.value==="gp"&&(e.setValue("urbanBody","",{shouldDirty:!1,shouldValidate:t>=1}),e.setValue("ward","",{shouldDirty:!1,shouldValidate:t>=1}),e.clearErrors("ward")))},className:`p-4 rounded-lg border-2 transition-all ${n?"cursor-not-allowed opacity-60":"cursor-pointer"} ${g.value===v.value?"border-primary bg-primary/5 ring-2 ring-primary/20":"border-gray-200 hover:border-gray-300"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:v.label}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:v.value==="gp"?"Fees start from 3,000":v.value==="mc"?"Fees start from 8,000":"Fees start from 5,000"})]}),g.value===v.value&&r.jsx("svg",{className:"w-5 h-5 text-primary",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]})},v.value))}),r.jsx(ct,{})]})}),c&&r.jsx(ot,{control:e.control,name:"gramPanchayat",rules:{validate:g=>g!=null&&g.trim()?!0:c.requiredMessage},render:({field:g,fieldState:v})=>{var x;return r.jsxs(at,{children:[r.jsxs(ht,{className:"flex items-center gap-1",children:[c.label,r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:c.placeholder,"data-testid":"input-gram-panchayat",value:g.value??"",onChange:y=>g.onChange(y.target.value),disabled:n&&m,"aria-invalid":v.invalid,className:v.invalid?"border-destructive focus-visible:ring-destructive":l&&!((x=g.value)!=null&&x.trim())?"border-amber-400 ring-2 ring-amber-200":""})}),r.jsx(ys,{children:c.description}),r.jsx(ct,{})]})}}),(i==="mc"||i==="tcp")&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:e.control,name:"urbanBody",rules:{required:"Urban local body is required"},render:({field:g,fieldState:v})=>r.jsxs(at,{children:[r.jsxs(ht,{children:[d.label," ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:d.placeholder,"data-testid":"input-urban-body",value:g.value??"",onChange:x=>{var y;g.onChange(x.target.value),(y=x.target.value)!=null&&y.trim()&&e.clearErrors("urbanBody"),e.setValue("ward","",{shouldDirty:!1,shouldValidate:t>=1}),e.clearErrors("ward")},disabled:n&&p,"aria-invalid":v.invalid})}),r.jsx(ys,{children:d.description}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"ward",render:({field:g,fieldState:v})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Ward / Zone (optional)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Ward number or zone","data-testid":"input-ward-manual",value:g.value??"",onChange:x=>g.onChange(x.target.value),"aria-invalid":v.invalid})}),r.jsx(ys,{children:"Provide the ward or zone if assigned by the urban body."}),r.jsx(ct,{})]})})]})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-500 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"3"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Address Details"}),r.jsx("p",{className:"text-sm text-white/70",children:"Complete postal address and PIN code"})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx(ot,{control:e.control,name:"address",rules:{required:"Address is required"},render:({field:g,fieldState:v})=>{var x;return r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["House/Building Number, Street & Locality ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"e.g., House No. 123, Main Road, Near Post Office",className:`min-h-20 ${v.invalid?"border-destructive focus-visible:ring-destructive":l&&!((x=g.value)!=null&&x.trim())?"border-amber-400 ring-2 ring-amber-200":""}`,"data-testid":"input-address","aria-invalid":v.invalid,...g})}),r.jsx("p",{className:"text-xs text-gray-400",children:"Specific address details with landmarks"}),r.jsx(ct,{})]})}}),r.jsx(ot,{control:e.control,name:"pincode",rules:{required:"PIN code is required",validate:g=>/^[1-9]\d{5}$/.test(g)?!0:"Enter a valid 6-digit PIN code"},render:({field:g,fieldState:v})=>r.jsxs(at,{children:[r.jsxs(ht,{children:["PIN Code ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"inline-flex items-center rounded-md border bg-muted px-3 py-2 font-mono text-sm text-muted-foreground",children:[bb,"-"]}),r.jsx(Pe,{placeholder:"Last 4 digits","data-testid":"input-pincode","aria-invalid":v.invalid,className:`bg-muted/60 ${o?"border-amber-500 focus-visible:ring-amber-500 ring-offset-background":""}`,value:a,onChange:x=>{const y=oB(x.target.value);g.onChange((bb+y).slice(0,6))},onBlur:x=>{const y=oB(x.target.value);g.onChange((bb+y).slice(0,6)),g.onBlur()}})]})}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Prefix ",r.jsx("span",{className:"font-semibold",children:bb})," is fixedenter the last 4 digits of your PIN code."]}),o&&r.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"Enter all remaining digits to continue."}),r.jsx(ct,{})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsx(ot,{control:e.control,name:"telephone",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Telephone (Optional)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Landline number","data-testid":"input-telephone",...g})}),r.jsx(ct,{})]})})})]})]})]})]})})}var T6="Radio",[lDe,zoe]=oa(T6),[cDe,dDe]=lDe(T6),Hoe=b.forwardRef((e,t)=>{const{__scopeRadio:n,name:s,checked:i=!1,required:a,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[h,f]=b.useState(null),m=Jr(t,v=>f(v)),p=b.useRef(!1),g=h?d||!!h.closest("form"):!0;return r.jsxs(cDe,{scope:n,checked:i,disabled:o,children:[r.jsx(ar.button,{type:"button",role:"radio","aria-checked":i,"data-state":Goe(i),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:$t(e.onClick,v=>{i||c==null||c(),g&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})}),g&&r.jsx(uDe,{control:h,bubbles:!p.current,name:s,value:l,checked:i,required:a,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Hoe.displayName=T6;var Woe="RadioIndicator",Koe=b.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:s,...i}=e,a=dDe(Woe,n);return r.jsx(la,{present:s||a.checked,children:r.jsx(ar.span,{"data-state":Goe(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t})})});Koe.displayName=Woe;var uDe=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=b.useRef(null),o=NC(n),l=q_(t);return b.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:s});h.call(c,n),c.dispatchEvent(f)}},[o,n,s]),r.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Goe(e){return e?"checked":"unchecked"}var hDe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],E6="RadioGroup",[fDe]=oa(E6,[Q0,zoe]),Yoe=Q0(),Xoe=zoe(),[mDe,pDe]=fDe(E6),Qoe=b.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:s,defaultValue:i,value:a,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:h,...f}=e,m=Yoe(n),p=X0(d),[g,v]=bc({prop:a,defaultProp:i,onChange:h});return r.jsx(mDe,{scope:n,name:s,required:o,disabled:l,value:g,onValueChange:v,children:r.jsx(eD,{asChild:!0,...m,orientation:c,dir:p,loop:u,children:r.jsx(ar.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:p,...f,ref:t})})})});Qoe.displayName=E6;var Zoe="RadioGroupItem",Joe=b.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:s,...i}=e,a=pDe(Zoe,n),o=a.disabled||s,l=Yoe(n),c=Xoe(n),d=b.useRef(null),u=Jr(t,d),h=a.value===i.value,f=b.useRef(!1);return b.useEffect(()=>{const m=g=>{hDe.includes(g.key)&&(f.current=!0)},p=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",p),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",p)}},[]),r.jsx(tD,{asChild:!0,...l,focusable:!o,active:h,children:r.jsx(Hoe,{disabled:o,required:a.required,checked:h,...c,...i,name:a.name,ref:u,onCheck:()=>a.onValueChange(i.value),onKeyDown:$t(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:$t(i.onFocus,()=>{var m;f.current&&((m=d.current)==null||m.click())})})})});Joe.displayName=Zoe;var gDe="RadioGroupIndicator",ele=b.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...s}=e,i=Xoe(n);return r.jsx(Koe,{...i,...s,ref:t})});ele.displayName=gDe;var tle=Qoe,rle=Joe,xDe=ele;const wc=b.forwardRef(({className:e,...t},n)=>r.jsx(tle,{className:Xe("grid gap-2",e),...t,ref:n}));wc.displayName=tle.displayName;const Ps=b.forwardRef(({className:e,...t},n)=>r.jsx(rle,{ref:n,className:Xe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:r.jsx(xDe,{className:"flex items-center justify-center",children:r.jsx(hQ,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Ps.displayName=rle.displayName;function vDe({form:e,ownerGender:t,propertyOwnership:n,goToProfile:s,showRequiredWarning:i=!1}){const a=e.watch("applicationKind")==="change_ownership",o=!a,l=o?"bg-gray-50 cursor-not-allowed":"";return r.jsx(me,{className:"shadow-lg border-0 overflow-hidden",children:r.jsxs(ge,{className:"p-0",children:[o&&r.jsx("div",{className:"m-6 mb-0 bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ag,{className:"w-5 h-5 text-blue-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Profile-managed details"}),r.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Name, contact and Aadhaar information come from your verified profile. Update them via"," ",r.jsx(te,{type:"button",variant:"link",size:"sm",className:"h-auto p-0 text-blue-700 font-semibold underline",onClick:s,children:"My Profile"})," ","before starting the application."]})]})]})}),a&&r.jsx("div",{className:"m-6 mb-0 bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Ag,{className:"w-5 h-5 text-amber-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Change of Ownership"}),r.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["Please enter the personal details of the ",r.jsx("strong",{children:"NEW OWNER"})," below. Upload Proof of Ownership / Sale Deed in the Documents section."]})]})]})}),r.jsxs("div",{className:"border-b",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white px-6 py-4 mt-6",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"1"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Personal Information"}),r.jsx("p",{className:"text-sm text-white/70",children:"Owner's name and identity details"})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:e.control,name:"ownerFirstName",render:({field:c})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["First Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",readOnly:o,className:`h-11 ${l}`})}),o&&r.jsx("p",{className:"text-xs text-gray-400",children:"Managed via profile"}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"ownerLastName",render:({field:c})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Last Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",readOnly:o,className:`h-11 ${l}`})}),o&&r.jsx("p",{className:"text-xs text-gray-400",children:"Managed via profile"}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:e.control,name:"ownerName",render:({field:c})=>r.jsxs(at,{children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Owner Full Name (auto-filled)"}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",readOnly:o,className:`h-11 ${l}`})}),r.jsx("p",{className:"text-xs text-gray-400",children:o?"Generated from first and last name":"Enter full name of new owner"}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx(ot,{control:e.control,name:"guardianRelation",rules:{required:"Relationship is required"},render:({field:c,fieldState:d})=>r.jsxs(at,{className:"col-span-1",children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Relationship ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs(pr,{onValueChange:u=>{c.onChange(u),u==="s_o"?e.setValue("ownerGender","male"):(u==="d_o"||u==="w_o")&&e.setValue("ownerGender","female")},value:c.value||"",children:[r.jsx(dt,{children:r.jsx(ur,{className:`h-11 ${d.invalid||i&&(!c.value||!["s_o","d_o","w_o","c_o"].includes((c.value||"").toLowerCase()))?"!border-amber-400 !ring-2 !ring-amber-200":""}`,children:r.jsx(yr,{placeholder:"Select"})})}),r.jsxs(hr,{children:[r.jsx(it,{value:"s_o",children:"S/O"}),r.jsx(it,{value:"d_o",children:"D/O"}),r.jsx(it,{value:"w_o",children:"W/O"}),r.jsx(it,{value:"c_o",children:"C/O"})]})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"guardianName",render:({field:c})=>r.jsxs(at,{className:"col-span-2",children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Full Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",placeholder:"As per Aadhaar card",className:`h-11 ${i&&(!c.value||c.value.trim().length<3)?"border-amber-400 ring-2 ring-amber-200":""}`})}),r.jsx("p",{className:"text-xs text-gray-400",children:"Required for registration certificate"}),r.jsx(ct,{})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:e.control,name:"ownerGender",render:({field:c})=>r.jsxs(at,{children:[r.jsx("label",{className:"text-xs text-gray-500",children:"Gender (affects registration fee)"}),r.jsxs(pr,{onValueChange:c.onChange,value:c.value,children:[r.jsx(dt,{children:r.jsx(ur,{className:"h-11",children:r.jsx(yr,{placeholder:"Select gender"})})}),r.jsx(hr,{children:nDe.map(d=>r.jsx(it,{value:d.value,children:d.label},d.value))})]}),r.jsx("p",{className:"text-xs text-gray-400",children:"Female owners receive 5% additional fee discount"}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"ownerAadhaar",render:({field:c})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Aadhaar Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",readOnly:o,className:`h-11 font-mono ${l}`})}),o&&r.jsx("p",{className:"text-xs text-gray-400",children:"Managed via profile"}),r.jsx(ct,{})]})})]})]})]}),r.jsxs("div",{className:"border-b",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"2"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Contact Details"}),r.jsx("p",{className:"text-sm text-white/70",children:"Mobile and email for communication"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:e.control,name:"ownerMobile",render:({field:c})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Mobile Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",readOnly:o,className:`h-11 ${l}`})}),o&&r.jsx("p",{className:"text-xs text-gray-400",children:"Managed via profile"}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"ownerEmail",render:({field:c})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Email ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{...c,value:c.value??"",readOnly:!0,type:"email",className:"h-11 bg-gray-50 cursor-not-allowed"})}),r.jsx("p",{className:"text-xs text-gray-400",children:"Managed via profile"}),r.jsx(ct,{})]})})]})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-500 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"3"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Property Ownership"}),r.jsx("p",{className:"text-sm text-white/70",children:"Ownership status verification"})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx(ot,{control:e.control,name:"propertyOwnership",render:({field:c})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500",children:["Property Ownership ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsxs(wc,{onValueChange:c.onChange,value:c.value,className:"flex gap-4 mt-2",children:[r.jsxs("label",{htmlFor:"owned",className:`flex items-center space-x-3 p-4 rounded-lg border-2 cursor-pointer transition-all flex-1 ${c.value==="owned"?"border-primary bg-primary/5":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Ps,{value:"owned",id:"owned"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Owned"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Property is under your name"})]})]}),r.jsxs("label",{htmlFor:"leased",className:`flex items-center space-x-3 p-4 rounded-lg border-2 cursor-pointer transition-all flex-1 ${c.value==="leased"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(Ps,{value:"leased",id:"leased"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:sDe.leased}),r.jsx("p",{className:"text-xs text-gray-500",children:"Property on lease deed"})]})]})]})}),r.jsx(ct,{})]})}),n==="leased"&&r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"w-5 h-5 text-orange-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Lease Deed Applications Not Accepted"}),r.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"The tourism department currently processes homestay registrations only for properties under clear ownership. Applications submitted on lease or sale deeds are not entertained."})]})]})}),t==="female"&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(Vm,{className:"w-5 h-5 text-green-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-700",children:"Special Discount Eligible!"}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["As a female property owner, you qualify for an additional ",r.jsx("strong",{children:"5% discount"})," on registration fees. This discount will be automatically applied to your final fee calculation."]})]})]})})]})]})]})})}const yDe=[{value:"sqm",label:"Sq.M"},{value:"sqft",label:"Sq.Ft"},{value:"marla",label:"Marla"},{value:"kanal",label:"Kanal"},{value:"biswa",label:"Biswa"},{value:"bigha",label:"Bigha"}],Ap=e=>{switch(e){case"silver":return{label:"Silver",variant:"secondary",color:"bg-slate-200 text-slate-800"};case"gold":return{label:"Gold",variant:"default",color:"bg-amber-100 text-amber-800 border-amber-200"};case"diamond":return{label:"Diamond",variant:"outline",color:"bg-cyan-50 text-cyan-900 border-cyan-200"};default:return{label:e,variant:"outline",color:""}}},bDe=(e,t)=>e<t.min?"below":t.max!==null&&e>t.max?"above":"within",jDe=e=>e.max===null?`Above ${e.min}`:`${e.min} - ${e.max}`;function wDe({form:e,category:t,totalRooms:n,totalBeds:s,highestTariffLabel:i,highestRoomRate:a,categoryRateBands:o,roomCalcMode:l,type2CategoryConflict:c,categoryWarnings:d,lockToRecommendedCategory:u,suggestedCategory:h,type2Rows:f,addType2Row:m,removeType2Row:p,updateType2Row:g,resetType2Rows:v,syncAttachedBaths:x,setSyncAttachedBaths:y,selectedAmenities:j,setSelectedAmenities:w,openAreaConverter:N,resolvedCategory:S,resolvedCategoryBand:T,shouldLockCategoryWarning:C,activeApplicationKind:A,currentCategory:R,originalRates:k,fixedQuantities:O}){var Z;const $=A==="change_category",D=A==="delete_rooms",q=b.useRef({});b.useEffect(()=>{D&&f.length>0&&f.forEach(F=>{q.current[F.id]===void 0&&(q.current[F.id]=F.quantity)})},[D,f]);const M=yDe,L=$&&R?lB.filter(F=>D2[F.value]>D2[R]):lB,V=e.watch("propertyArea"),P=e.watch("propertyAreaUnit"),z=e.watch("propertyAreaConversionRate");return b.useEffect(()=>{const F=V||0,W=P||"sqm",G=z;let H=null;W==="sqm"?H=F:F>0&&G&&G>0&&(H=F*G),H!==null&&e.setValue("propertyAreaSqM",parseFloat(H.toFixed(2)))},[V,P,z,e]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-6 rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold",children:""})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Property Area"}),r.jsx("p",{className:"text-blue-100 text-sm",children:"As per Annexure-I #6a"})]})]})})}),r.jsx("div",{className:"bg-white p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(ot,{control:e.control,name:"propertyArea",render:({field:F})=>r.jsxs(at,{children:[r.jsxs(ht,{children:["Area of Property ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:1,max:999999,step:"0.01",placeholder:"Enter area",className:`h-11 no-spinners ${!D&&(!F.value||F.value<=0)?"!border-amber-400 !ring-2 !ring-amber-200":""} ${D?"bg-gray-100 text-gray-500 pointer-events-none":""}`,value:F.value===0||F.value===null||F.value===void 0?"":F.value,readOnly:D,onChange:W=>{if(D)return;const G=W.target.value;if(G===""){F.onChange(null);return}const H=parseFloat(G);F.onChange(Math.min(999999,Math.max(0,H)))}})}),!D&&(!F.value||F.value<=0)&&r.jsx("p",{className:"text-xs text-amber-600 font-medium",children:"Required field"}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"propertyAreaUnit",render:({field:F})=>r.jsxs(at,{children:[r.jsxs(ht,{children:["Unit ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs(pr,{value:F.value,disabled:D,onValueChange:W=>{F.onChange(W),W==="sqft"?e.setValue("propertyAreaConversionRate",.092903):W==="sqm"?e.setValue("propertyAreaConversionRate",1):e.setValue("propertyAreaConversionRate",void 0)},children:[r.jsx(dt,{children:r.jsx(ur,{className:"h-11",children:r.jsx(yr,{placeholder:"Select unit"})})}),r.jsx(hr,{children:M.map(W=>r.jsx(it,{value:W.value,children:W.label},W.value))})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:e.control,name:"propertyAreaConversionRate",render:({field:F})=>{const W=e.watch("propertyAreaUnit")||"sqm",G=W==="sqft"||W==="sqm";return W!=="sqm"?r.jsxs(at,{children:[r.jsxs(ht,{children:["Conversion Rate",G&&r.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(fixed)"})]}),r.jsx(dt,{children:r.jsxs("div",{className:"relative",children:[r.jsx(Pe,{type:"number",min:.001,max:99999,step:"0.01",placeholder:G?"":"Enter rate",className:`h-11 pr-16 no-spinners ${G?"bg-gray-50":""} ${D?"bg-gray-100 text-gray-500":""}`,readOnly:G||D,value:F.value===null||F.value===void 0?"":F.value,onChange:se=>{if(G)return;const J=se.target.value;if(J===""){F.onChange(void 0);return}F.onChange(parseFloat(J))}}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:" Sq.M"})]})}),r.jsx(ys,{className:"text-xs",children:G?r.jsxs("span",{className:"text-gray-500",children:["1 ",W==="sqft"?"Sq.Ft":"Sq.M"," = ",F.value," Sq.M"]}):r.jsx("span",{className:"text-amber-600",children:"Enter your district's rate"})}),r.jsx(ct,{})]}):r.jsxs(at,{children:[r.jsx(ht,{className:"text-gray-400",children:"Conversion Rate"}),r.jsx("div",{className:"h-11 flex items-center text-sm text-gray-400 italic",children:"Not needed for Sq.M"})]})}}),r.jsx(ot,{control:e.control,name:"propertyAreaSqM",render:({field:F})=>{const W=e.watch("propertyArea")||0,G=e.watch("propertyAreaUnit")||"sqm",H=e.watch("propertyAreaConversionRate");let se=null;G==="sqm"?se=W:W>0&&H&&H>0&&(se=W*H);const J=G!=="sqm"&&(!H||H<=0);return r.jsxs(at,{children:[r.jsx(ht,{children:"Area in Sq.M"}),r.jsx("div",{className:`h-11 flex items-center px-3 rounded-md border ${J?"bg-amber-50 border-amber-200":"bg-emerald-50 border-emerald-200"}`,children:J?r.jsx("span",{className:"text-amber-600 text-sm",children:"Enter conversion rate"}):se!==null?r.jsx("span",{className:"text-emerald-700 font-semibold text-lg",children:se.toFixed(2)}):r.jsx("span",{className:"text-gray-400 text-sm",children:""})}),r.jsx(ys,{className:"text-xs text-gray-500",children:"Used in certificate"})]})}})]})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Rooms"}),r.jsx("div",{className:`text-3xl font-bold ${n>ra?"text-red-500":"text-gray-900"}`,children:n}),r.jsxs("div",{className:"text-xs text-emerald-600",children:["Limit: ",ra," rooms"]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Total Beds"}),r.jsx("div",{className:`text-3xl font-bold ${s>Yc?"text-red-500":"text-gray-900"}`,children:s}),r.jsxs("div",{className:"text-xs text-emerald-600",children:["Limit: ",Yc," beds"]})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Highest Rate"}),r.jsx("div",{className:"text-3xl font-bold text-emerald-600",children:a>0?`${a.toLocaleString()}`:""}),r.jsx("div",{className:"text-xs text-gray-500",children:"Per Day"})]}),r.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 rounded-xl border border-emerald-200 p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Category"}),r.jsx("div",{className:"mt-1",children:r.jsx(ze,{variant:Ap(t).variant,className:"text-sm font-semibold",children:Ap(t).label})}),r.jsx("div",{className:"text-xs text-emerald-600 mt-1",children:"Auto-selected"})]})]}),r.jsxs("div",{className:"mb-6 rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 text-white p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold",children:"1"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Room Configuration"}),r.jsx("p",{className:"text-slate-300 text-sm",children:"Add your rooms with beds per room and daily rate"})]})]}),!D&&r.jsxs(te,{type:"button",variant:"secondary",size:"sm",onClick:m,disabled:n>=ra,className:"gap-2",children:[r.jsx(Bm,{className:"w-4 h-4"}),"Add Room Type"]})]})}),r.jsxs("div",{className:"bg-white p-4 space-y-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-sm font-medium",children:"Room Configuration"}),r.jsx(te,{type:"button",variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive hover:bg-destructive/10 h-8 text-xs",onClick:v,disabled:f.length<=1&&f[0].quantity===1,children:"Reset Rooms"})]}),r.jsx("div",{className:"space-y-3",children:f.map((F,W)=>{var ee,Ee;const{rooms:G,beds:H}=aDe(f,F.id),se=Math.max(0,ra-G),J=Math.max(0,Yc-H),ie=Math.max(1,Px(F)),X=Math.floor(J/ie),he=D?q.current[F.id]??F.quantity:999,fe=Math.max(1,Math.min(se,X,he)),Q=Array.from({length:fe},(Re,oe)=>oe+1);let Oe;return F.roomType==="single"?Oe=[1]:F.roomType==="double"?Oe=[2]:F.roomType==="suite"?Oe=[3,4]:Oe=[1,2,3,4],F.quantity>fe&&g(F.id,{quantity:fe}),!Oe.includes(Px(F))&&Oe.length>0&&g(F.id,{bedsPerRoom:Oe[0]}),l==="direct"&&typeof F.customRate=="number"&&bDe(F.customRate,T),r.jsxs("div",{className:"relative grid grid-cols-1 md:grid-cols-12 gap-3 p-4 rounded-lg border transition-all bg-card hover:border-primary/30",children:[r.jsxs("div",{className:"md:col-span-2 min-w-0",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Room Type"}),D?r.jsx("div",{className:"h-9 px-3 py-2 text-sm border border-input rounded-md bg-muted text-muted-foreground flex items-center",children:((ee=cB.find(Re=>Re.value===F.roomType))==null?void 0:ee.label)||F.roomType}):r.jsxs(pr,{value:F.roomType,onValueChange:Re=>g(F.id,{roomType:Re}),children:[r.jsx(ur,{className:"h-9",children:r.jsx(yr,{})}),r.jsx(hr,{children:cB.map(Re=>r.jsx(it,{value:Re.value,children:Re.label},Re.value))})]})]}),r.jsxs("div",{className:"md:col-span-4 grid grid-cols-2 gap-2 min-w-0",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"No. of Rooms"}),D&&O&&O[F.roomType]!==void 0?r.jsxs("div",{className:"h-9 px-3 py-2 text-sm border border-input rounded-md bg-muted text-muted-foreground flex items-center font-semibold",children:[O[F.roomType]," Rooms"]}):r.jsxs(pr,{value:String(F.quantity),onValueChange:Re=>{const oe=aB(Re),De=oe>0?Math.max(1,Math.min(dB,Math.floor(J/Math.max(1,oe)))):dB,tt=Math.min(Px(F),De);g(F.id,{quantity:oe,bedsPerRoom:tt})},children:[r.jsx(ur,{className:"h-9",children:r.jsx(yr,{})}),r.jsx(hr,{children:Q.map(Re=>r.jsxs(it,{value:String(Re),children:[Re," ",Re===1?"Room":"Rooms"]},Re))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Beds/Room"}),D?r.jsxs("div",{className:"h-9 px-3 py-2 text-sm border border-input rounded-md bg-muted text-muted-foreground flex items-center",children:[Px(F)," Beds"]}):r.jsxs(pr,{value:String(Px(F)),onValueChange:Re=>{const oe=aB(Re),De=Math.floor(J/Math.max(1,oe)),tt=Math.min(se,De),Qe=Math.min(F.quantity,Math.max(0,tt));g(F.id,{bedsPerRoom:oe,quantity:Qe})},children:[r.jsx(ur,{className:"h-9",children:r.jsx(yr,{})}),r.jsx(hr,{children:Oe.map(Re=>r.jsxs(it,{value:String(Re),children:[Re," Beds"]},Re))})]})]})]}),r.jsxs("div",{className:"md:col-span-2 min-w-0",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:l==="direct"?"Tariff Per Day":"Tariff Range"}),l==="direct"?(()=>{const Re=A==="delete_rooms",oe=Re&&k?k[F.roomType]||0:F.customRate===""?"":F.customRate,De=!Re&&F.quantity>0&&(F.customRate===""||F.customRate===void 0||F.customRate===null||F.customRate<=0);return r.jsxs("div",{children:[r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground pointer-events-none",children:""}),r.jsx(Pe,{type:"number",min:0,max:999999,placeholder:Re?"":"Enter tariff",className:`h-9 pl-7 w-full no-spinners ${De?"ring-2 ring-amber-500 border-amber-500 focus:ring-amber-500":""} ${Re?"bg-gray-100 text-gray-500":""}`,value:oe,readOnly:Re,onChange:tt=>{if(Re)return;const Qe=tt.target.value;if(Qe===""){g(F.id,{customRate:""});return}const xe=parseFloat(Qe),ae=Math.min(999999,Math.max(0,xe));g(F.id,{customRate:ae})}})]}),De&&r.jsx("p",{className:"text-xs text-amber-600 mt-1 font-medium",children:"Required"})]})})():r.jsxs(pr,{value:F.tariffBucket,onValueChange:Re=>g(F.id,{tariffBucket:Re}),children:[r.jsx(ur,{className:`h-9 ${D2[((Ee=uB.find(Re=>Re.value===F.tariffBucket))==null?void 0:Ee.minCategory)||"silver"]>D2[t]?"border-destructive text-destructive":""}`,children:r.jsx(yr,{})}),r.jsx(hr,{children:uB.map(Re=>r.jsx(it,{value:Re.value,children:Re.label},Re.value))})]})]}),r.jsx("div",{className:"md:col-span-3 min-w-0",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Room Area"}),r.jsx(Pe,{type:"number",min:1,max:999999,step:"0.01",value:F.area===0||F.area===null||F.area===void 0||F.area===""?"":F.area,placeholder:"Enter area",className:"h-9 no-spinners",onChange:Re=>{const oe=Re.target.value;if(oe===""){g(F.id,{area:""});return}const De=parseFloat(oe);g(F.id,{area:Math.min(999999,Math.max(0,De))})}})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-xs font-medium text-muted-foreground mb-1.5 block",children:"Units"}),r.jsxs(pr,{value:F.areaUnit||"sqft",onValueChange:Re=>g(F.id,{areaUnit:Re}),children:[r.jsx(ur,{className:"h-9 w-[85px] shrink-0",children:r.jsx(yr,{})}),r.jsxs(hr,{children:[r.jsx(it,{value:"sqft",children:"Sq.Ft"}),r.jsx(it,{value:"sqm",children:"Sq.M"})]})]})]})]})}),r.jsx("div",{className:"md:col-span-1 flex items-end justify-end",children:r.jsx(te,{type:"button",variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground hover:text-destructive shrink-0",onClick:()=>p(F.id),disabled:f.length===1,children:r.jsx(nh,{className:"w-4 h-4"})})})]},F.id)})}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg border border-emerald-200",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx(lQ,{className:"w-4 h-4 text-emerald-600"}),r.jsxs("span",{className:"font-medium",children:[n," ",n===1?"room":"rooms",", ",s," ",s===1?"bed":"beds"," configured"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[r.jsx(cd,{className:"w-4 h-4 text-emerald-600"}),r.jsxs("span",{children:["Highest rate: ",r.jsxs("strong",{className:"text-emerald-700",children:["",a.toLocaleString(),"/night"]})]})]})]}),h&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-700",children:[r.jsx(sa,{className:"w-4 h-4"}),r.jsxs("span",{children:["Applicable Category: ",r.jsx("strong",{children:Ap(h).label.toUpperCase()})]})]})]})]}),r.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border ${x?"bg-muted/30":"bg-destructive/10 border-destructive/50"}`,children:[r.jsx(Zs,{id:"attached-baths",checked:x,onCheckedChange:F=>{const W=!!F;y(W),W&&e.setValue("attachedWashrooms",n)}}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{htmlFor:"attached-baths",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"All rooms have attached washrooms"}),x?r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total attached washrooms: ",n]}):r.jsx("p",{className:"text-xs text-destructive font-medium",children:" Required: All rooms must have attached washrooms as per HP Tourism guidelines"})]})]}),(t==="gold"||t==="diamond")&&r.jsx("div",{className:"pt-4 border-t",children:r.jsx(ot,{control:e.control,name:"gstin",render:({field:F})=>r.jsxs(at,{children:[r.jsx(ht,{children:"GSTIN Number"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"22AAAAA0000A1Z5",maxLength:15,...F,onChange:W=>F.onChange(JRe(W.target.value))})}),r.jsx(ys,{children:"Required for Gold and Diamond categories"}),r.jsx(ct,{})]})})})]})]}),r.jsxs("div",{className:"mb-6 rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold",children:"2"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Category Selection"}),r.jsx("p",{className:"text-emerald-100 text-sm",children:"Category is automatically selected based on your highest room rate"})]})]})}),r.jsxs("div",{className:"bg-white p-6",children:[$&&R&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[r.jsx("div",{className:"text-sm text-blue-800 font-medium mb-1",children:"Current Category"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ze,{variant:Ap(R).variant,className:"text-sm",children:Ap(R).label}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"Select a higher category to upgrade your property."})]})]}),L.length===0?r.jsx("div",{className:"text-center p-8 border-2 border-dashed rounded-xl bg-slate-50",children:r.jsxs("p",{className:"text-muted-foreground",children:["You are already at the highest category (",Ap(R||"diamond").label,")."]})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:L.map(F=>{const W=t===F.value,G=h===F.value,H=u&&!G,se=o[F.value],J={silver:r.jsx(dv,{className:"w-6 h-6 text-gray-700"}),gold:r.jsx(Gxe,{className:"w-6 h-6 text-amber-500"}),diamond:r.jsx(rve,{className:"w-6 h-6 text-neutral-600"})},ie={silver:{border:W?"border-gray-700 ring-2 ring-gray-600":"border-gray-500",bg:W?"bg-gradient-to-br from-gray-300 via-slate-300 to-gray-400":"bg-gradient-to-br from-gray-200 to-slate-300",iconBg:"bg-gradient-to-br from-gray-400 to-slate-500",text:"text-gray-900"},gold:{border:W?"border-amber-500 ring-2 ring-amber-400":"border-amber-300",bg:W?"bg-gradient-to-br from-amber-100 via-yellow-50 to-amber-200":"bg-gradient-to-br from-amber-50 to-yellow-100",iconBg:"bg-gradient-to-br from-amber-200 to-yellow-300",text:"text-amber-800"},diamond:{border:W?"border-neutral-400 ring-2 ring-neutral-300":"border-neutral-300",bg:W?"bg-gradient-to-br from-neutral-50 via-white to-zinc-100":"bg-gradient-to-br from-white to-neutral-100",iconBg:"bg-gradient-to-br from-neutral-200 to-zinc-300",text:"text-neutral-700"}},X=ie[F.value]||ie.silver,he=J[F.value];return r.jsxs("div",{onClick:()=>{!H&&!D&&e.setValue("category",F.value)},className:`
                                                relative p-5 rounded-xl border-2 cursor-pointer transition-all
                                                ${X.border} ${X.bg}
                                                ${!W&&!G?"opacity-60":""}
                                                ${H||D?"opacity-50 cursor-not-allowed":"hover:shadow-md"}
                                                ${H?"grayscale":""}
                                            `,children:[G&&r.jsxs(ze,{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-emerald-500 text-white px-3 py-1 shadow-lg",children:[r.jsx(Vm,{className:"w-3 h-3 mr-1"}),"APPLICABLE"]}),r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${X.iconBg}`,children:he}),W&&r.jsx(Fr,{className:"w-6 h-6 text-emerald-500"})]}),r.jsx("h3",{className:`text-xl font-bold mb-1 ${W||G?"text-gray-900":"text-gray-500"}`,children:F.title}),F.description&&r.jsx("p",{className:`text-sm mb-3 ${W||G?"text-gray-600":"text-gray-400"}`,children:F.description}),r.jsxs("div",{className:`text-base font-semibold mt-2 ${W||G?X.text:"text-gray-400"}`,children:["Tariff Range: ",jDe(se)]})]},F.value)})}),h&&r.jsx("div",{className:"p-4 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg border border-emerald-200",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Fr,{className:"w-6 h-6 text-emerald-600 flex-shrink-0"}),r.jsxs("div",{children:[r.jsxs("p",{className:"font-medium text-emerald-800",children:["Applicable Category: ",r.jsx("strong",{children:Ap(h).label.toUpperCase()})]}),r.jsxs("p",{className:"text-sm text-emerald-600",children:["Based on your highest room rate of ",a.toLocaleString(),"/night"]})]})]})})]})]})]}),A!=="delete_rooms"&&r.jsxs(me,{className:"border-l-4 border-l-blue-500",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"w-5 h-5 text-blue-500"}),r.jsx(ke,{children:"Mandatory Safety Checklist"})]}),r.jsx(Ue,{children:"Confirm availability of critical safety infrastructure"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`flex items-start space-x-3 p-3 border rounded-lg transition-colors ${j.cctv?"bg-blue-50/50 border-blue-200":"hover:bg-muted/50"}`,children:[r.jsx(Zs,{id:"check-cctv",checked:j.cctv||!1,onCheckedChange:F=>w(W=>({...W,cctv:!!F}))}),r.jsxs("label",{htmlFor:"check-cctv",className:"grid gap-1.5 cursor-pointer",children:[r.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.jsx(wQ,{className:"w-4 h-4 text-muted-foreground"}),"CCTV Surveillance"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Required at entrance and common areas"})]})]}),r.jsxs("div",{className:`flex items-start space-x-3 p-3 border rounded-lg transition-colors ${j.fireSafety?"bg-blue-50/50 border-blue-200":"hover:bg-muted/50"}`,children:[r.jsx(Zs,{id:"check-fire",checked:j.fireSafety||!1,onCheckedChange:F=>w(W=>({...W,fireSafety:!!F}))}),r.jsxs("label",{htmlFor:"check-fire",className:"grid gap-1.5 cursor-pointer",children:[r.jsxs("div",{className:"font-medium flex items-center gap-2",children:[r.jsx(mQ,{className:"w-4 h-4 text-muted-foreground"}),"Fire Safety Equipment"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Extinguishers and smoke detectors installed"})]})]})]}),j.fireSafety&&r.jsx(ot,{control:e.control,name:"fireEquipmentDetails",render:({field:F})=>{var H;const W=((H=F.value)==null?void 0:H.length)||0,G=W<10;return r.jsxs(at,{children:[r.jsxs(ht,{className:"text-sm",children:["Fire Safety Equipment Details (Annexure-I #6g) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(dt,{children:r.jsx("textarea",{...F,value:F.value||"",placeholder:"E.g., 2 fire extinguishers (kitchen, lobby), smoke detectors in all rooms, fire alarm system...",className:`w-full min-h-[80px] p-3 text-sm border rounded-md resize-none focus:ring-2 focus:ring-primary focus:border-transparent ${G?"border-red-500 border-2 bg-red-50":"border-gray-300"}`,required:!0})}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("p",{className:`text-xs ${G?"text-red-500 font-medium":"text-muted-foreground"}`,children:G?" Required: Enter at least 10 characters to proceed":"Fire fighting equipment details provided"}),r.jsxs("span",{className:`text-xs font-medium ${G?"text-red-500":"text-emerald-600"}`,children:[W," chars (min. 10)"]})]})]})}}),(!j.cctv||!j.fireSafety)&&r.jsxs(fn,{variant:"destructive",className:"py-2",children:[r.jsx(jn,{className:"h-4 w-4"}),r.jsx(Po,{className:"text-sm font-medium",children:"Safety Requirements Incomplete"}),r.jsx(mn,{className:"text-xs",children:"You must confirm both CCTV and Fire Safety equipment availability to proceed."})]}),j.cctv&&j.fireSafety&&(((Z=e.watch("fireEquipmentDetails"))==null?void 0:Z.trim().length)||0)<10&&r.jsxs(fn,{className:"py-2 border-amber-300 bg-amber-50",children:[r.jsx(jn,{className:"h-4 w-4 text-amber-600"}),r.jsx(Po,{className:"text-sm font-medium text-amber-800",children:"Fire Safety Details Required"}),r.jsx(mn,{className:"text-xs text-amber-700",children:"Please provide details of fire fighting equipment (Annexure-I #6g) - at least 10 characters to proceed to next step."})]})]})]})]})}const NDe=[{key:"distanceAirport",label:"Airport",icon:AR},{key:"distanceRailway",label:"Railway Station",icon:Tve},{key:"distanceCityCenter",label:"City Centre",icon:Cl},{key:"distanceShopping",label:"Shopping Centre",icon:Nve},{key:"distanceBusStand",label:"Bus Stand",icon:cQ}],Iu=[{id:"1",label:"Application Form (ANNEXURE-I) complete",autoCheck:!0,autoReason:"Auto-verified from application"},{id:"2",label:"Documents list (ANNEXURE-II) uploaded",autoCheck:!0,autoReason:"Auto-verified from documents"},{id:"3",label:"Online payment facility (UPI, Net, Debit/Credit Card) + cash option in low-connectivity areas",autoCheck:!1},{id:"4",label:"Well maintained and well equipped house and guest rooms with quality carpets/rugs/tiles/marble flooring, furniture, fittings",autoCheck:!1},{id:"5",label:"All rooms clean, airy, pest free, without dampness, with outside window/ventilation",autoCheck:!1},{id:"6",label:"Comfortable bed with good quality linen & bedding",autoCheck:!1},{id:"7",label:"Adherence to minimum room and bathroom size in sq. ft.",autoCheck:!0,autoReason:"Auto-verified from room configuration"},{id:"8",label:"Well maintained smoke free, clean, hygienic, odour free, pest free kitchen",autoCheck:!1},{id:"9",label:"Good quality cutlery and crockery",autoCheck:!1},{id:"10",label:"RO/Aqua Guard water facility",autoCheck:!1},{id:"11",label:"Garbage disposal as per Municipal/applicable laws",autoCheck:!1},{id:"12",label:"Energy Saving Lighting (CFL/LED) in guest rooms and public areas",autoCheck:!1},{id:"13",label:"Visitor book and feedback facilities",autoCheck:!1},{id:"14",label:"Name, address and telephone number of doctors",autoCheck:!1},{id:"15",label:"Facilities for assisting tourists with forgotten/left back luggage",autoCheck:!1},{id:"16",label:"Basic fire equipments",autoCheck:!1},{id:"17",label:"Register (physical or electronic) for guest check-in/out with passport details for foreign tourists",autoCheck:!1},{id:"18",label:"CCTVs in common areas",autoCheck:!1}],$T=[{id:"1",label:"Sufficient parking with adequate road width"},{id:"2",label:"Attached private bathroom with toiletries"},{id:"3",label:"WC toilet with seat, lid, toilet paper"},{id:"4",label:"Running hot & cold water with proper sewerage"},{id:"5",label:"Water saving taps/shower"},{id:"6",label:"Dining area serving Authentic Himachali Food"},{id:"7",label:"Wardrobe with at least 4 clothes hangers"},{id:"8",label:"Shelves or drawer space"},{id:"9",label:"Good quality chairs, working table, furniture"},{id:"10",label:"Washing Machines/dryers or laundry/dry cleaning arrangements"},{id:"11",label:"Refrigerator"},{id:"12",label:"Lounge or seating in lobby"},{id:"13",label:"Heating and cooling in enclosed public rooms"},{id:"14",label:"Luggage assistance on request"},{id:"15",label:"Safekeeping facilities in room"},{id:"16",label:"Security guard"},{id:"17",label:"Vernacular Architecture & Himachali Handicrafts"},{id:"18",label:"Rainwater harvesting system"},{id:"19",label:"Accessible / Differently abled friendly"},{id:"20",label:"Senior Citizen Friendly"}],M2=Iu.length,P4=()=>{const e={};return Iu.forEach(t=>{t.autoCheck&&(e[t.id]=!0)}),e};function SDe({form:e,selectedAttractions:t,setSelectedAttractions:n,mandatoryChecks:s,setMandatoryChecks:i}){const[a,o]=b.useState({}),[l,c]=b.useState([{id:"1",description:""}]);b.useEffect(()=>{const w=e.getValues("desirableChecklist");if(w&&Object.keys(w).length>0){o(w);return}const N=e.getValues("ecoFriendlyFacilities")||"",S=e.getValues("differentlyAbledFacilities")||"",T=(N+","+S).toLowerCase(),C={};$T.forEach(A=>{T.includes(A.label.toLowerCase())&&(C[A.id]=!0)}),o(C)},[e]);const d=(w,N)=>{const S={...a,[w]:N};o(S),e.setValue("desirableChecklist",S,{shouldDirty:!0})},[u,h]=b.useState({lobbyArea:"",diningArea:"",parkingCapacity:""}),f=Object.values(s).filter(Boolean).length,m=Object.values(a).filter(Boolean).length,p=Iu.every(w=>s[w.id]),g=Iu.filter(w=>!w.autoCheck).length,v=Iu.filter(w=>!w.autoCheck&&s[w.id]).length,x=()=>{l.length<5&&c([...l,{id:Date.now().toString(),description:""}])};b.useEffect(()=>{const w=e.getValues("lobbyArea"),N=e.getValues("diningArea"),S=e.getValues("parkingArea");h({lobbyArea:w?String(w):"",diningArea:N?String(N):"",parkingCapacity:S||""})},[e]),b.useEffect(()=>{const w=u.lobbyArea?parseFloat(u.lobbyArea):void 0,N=u.diningArea?parseFloat(u.diningArea):void 0;e.setValue("lobbyArea",w,{shouldDirty:!0}),e.setValue("diningArea",N,{shouldDirty:!0}),e.setValue("parkingArea",u.parkingCapacity,{shouldDirty:!0})},[u,e]);const y=w=>{l.length>1&&c(l.filter(N=>N.id!==w))},j=(w,N)=>{c(l.map(S=>S.id===w?{...S,description:N}:S))};return r.jsxs(aa,{defaultValue:"mandatory",className:"w-full space-y-6",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-2 p-1 bg-slate-100/80 rounded-xl",children:[r.jsxs(Pr,{value:"mandatory",className:"group data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-slate-900 py-3 rounded-lg transition-all duration-300 font-bold flex gap-2 border border-transparent data-[state=active]:border-slate-200",children:[r.jsx("div",{className:`p-1 rounded-full ${p?"bg-slate-100 text-slate-600":"bg-slate-100 text-slate-500 group-data-[state=active]:bg-slate-800 group-data-[state=active]:text-white"}`,children:p?r.jsx(Fr,{className:"w-4 h-4"}):r.jsx(Gi,{className:"w-4 h-4"})}),"Mandatory Checklist",p&&r.jsx(ze,{variant:"outline",className:"ml-2 bg-slate-100 text-slate-700 border-slate-200",children:"Complete"})]}),r.jsxs(Pr,{value:"optional",className:"group data-[state=active]:bg-white data-[state=active]:shadow-sm data-[state=active]:text-slate-900 py-3 rounded-lg transition-all duration-300 font-bold flex gap-2 border border-transparent data-[state=active]:border-slate-200",children:[r.jsx("div",{className:"p-1 rounded-full bg-slate-100 text-slate-500 group-data-[state=active]:bg-slate-800 group-data-[state=active]:text-white",children:r.jsx(Vm,{className:"w-4 h-4"})}),"Property Details (Optional)"]})]}),r.jsx(Rr,{value:"mandatory",className:"animate-in fade-in-50 slide-in-from-bottom-2 duration-300",children:r.jsx(me,{className:`shadow-lg overflow-hidden rounded-xl border transition-colors duration-500 ${p?"border-slate-300":"border-slate-200"}`,children:r.jsx(ge,{className:"p-0",children:r.jsxs("div",{className:"border-b transition-colors duration-500",children:[r.jsx("div",{className:"bg-gradient-to-r px-6 py-5 text-white transition-all duration-500 from-slate-800 to-slate-700",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center shadow-inner backdrop-blur-sm",children:p?r.jsx(Fr,{className:"w-6 h-6"}):r.jsx(Gi,{className:"w-6 h-6"})}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:["Mandatory Checklist",r.jsx(ze,{variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-0",children:"Annexure-III"})]}),r.jsx("p",{className:"text-sm text-white/80 font-medium mt-0.5",children:p?"Great! All mandatory requirements are confirmed.":"All 18 items must be confirmed to proceed."})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-2xl font-bold",children:[f,r.jsx("span",{className:"text-lg text-white/60 font-medium",children:"/18"})]}),r.jsx("p",{className:"text-xs text-white/70 uppercase tracking-wider font-semibold",children:"Confirmed"})]})]})})]})}),r.jsxs("div",{className:"p-6 space-y-6 bg-slate-50/50",children:[r.jsxs(fn,{className:"bg-blue-50/50 border-blue-100",children:[r.jsx(Ag,{className:"h-4 w-4 text-blue-600"}),r.jsxs(mn,{className:"text-sm text-blue-800 flex items-center gap-2",children:[r.jsx("span",{className:"font-semibold",children:"Note:"})," These items will be physically verified during the departmental inspection."]})]}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-5 border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"text-sm font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-700 flex items-center justify-center",children:r.jsx(Fr,{className:"w-4 h-4 text-white"})}),"Auto-Verified Items",r.jsx("span",{className:"text-xs font-normal text-slate-500 ml-auto",children:"Verified automatically from your application"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Iu.filter(w=>w.autoCheck).map(w=>r.jsxs("div",{className:"flex items-center gap-3 px-4 py-4 rounded-xl bg-white border border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 flex items-center justify-center shrink-0 shadow-sm",children:r.jsx(Qd,{className:"w-4 h-4 text-slate-700"})}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("span",{className:"text-sm text-gray-800 font-medium leading-tight block",children:w.label.split("(")[0].trim()})}),r.jsx(ze,{className:"shrink-0 text-[10px] bg-slate-100 text-slate-700 border-slate-200 font-semibold",children:"AUTO"})]},w.id))})]}),r.jsxs("div",{className:"bg-white rounded-xl p-5 border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-5",children:[r.jsxs("h3",{className:"text-sm font-bold text-slate-900 flex items-center gap-3",children:[r.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${v===g?"bg-slate-800":"bg-slate-200"}`,children:v===g?r.jsx(Qd,{className:"w-4 h-4 text-white"}):r.jsx("span",{className:"text-xs text-slate-700 font-bold",children:v})}),r.jsx("span",{children:"Facilities to Confirm"}),r.jsxs(ze,{variant:"outline",className:`ml-2 ${v===g?"bg-slate-100 text-slate-700 border-slate-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:[v,"/",g]})]}),r.jsx(te,{type:"button",variant:"outline",size:"sm",className:"text-xs h-8 px-4 border-slate-200 hover:bg-slate-100 hover:border-slate-300 text-slate-700 font-medium",onClick:()=>{const w=Iu.filter(S=>!S.autoCheck).every(S=>s[S.id]),N={...s};Iu.filter(S=>!S.autoCheck).forEach(S=>{N[S.id]=!w}),i(N)},children:v===g?"Deselect All":"Select All"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Iu.filter(w=>!w.autoCheck).map(w=>{const N=s[w.id];return r.jsxs("label",{htmlFor:`mandatory-${w.id}`,className:`group relative flex items-start gap-4 p-4 rounded-xl border transition-all duration-200 cursor-pointer ${N?"border-slate-600 bg-slate-50 shadow-sm ring-1 ring-slate-600":"border-gray-200 bg-white hover:border-slate-300 hover:bg-slate-50/50 hover:shadow-sm"}`,children:[r.jsx(Zs,{id:`mandatory-${w.id}`,checked:N||!1,onCheckedChange:S=>i(T=>({...T,[w.id]:!!S})),className:`mt-0.5 h-5 w-5 rounded transition-all duration-300 ${N?"data-[state=checked]:bg-slate-800 data-[state=checked]:border-slate-800":"border-gray-300"}`}),r.jsx("div",{className:"flex-1",children:r.jsx("span",{className:`text-sm font-medium leading-relaxed transition-colors ${N?"text-slate-900":"text-gray-700 group-hover:text-gray-900"}`,children:w.label})}),N&&r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx(Qd,{className:"w-4 h-4 text-slate-600"})})]},w.id)})})]}),!p&&r.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-xl bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 shadow-sm animate-in slide-in-from-top-1",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center shrink-0",children:r.jsx(jn,{className:"h-5 w-5 text-amber-600"})}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-bold text-amber-900",children:[18-f," items remaining"]}),r.jsx("p",{className:"text-xs text-amber-700",children:"Please confirm all facilities to complete the checklist"})]})]})]})]})})})}),r.jsxs(Rr,{value:"optional",className:"space-y-6",children:[r.jsx(me,{className:"shadow-lg border-0 overflow-hidden",children:r.jsxs(ge,{className:"p-0",children:[r.jsxs("div",{className:"border-b",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"1"}),r.jsxs("div",{children:[r.jsxs("h2",{className:"font-semibold",children:["Distances from Key Locations ",r.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded text-white font-bold ml-2",children:"(OPTIONAL)"})]}),r.jsx("p",{className:"text-sm text-white/70",children:"Approximate distances in kilometers (Annexure-I #4)"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[NDe.map(w=>{const N=w.icon;return r.jsx(ot,{control:e.control,name:w.key,render:({field:S})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500 flex items-center gap-2",children:[r.jsx(N,{className:"w-4 h-4"}),w.label]}),r.jsxs("div",{className:"relative",children:[r.jsx(dt,{children:r.jsx(Pe,{type:"number",placeholder:"Distance in KM",className:"h-11 pr-12",min:0,step:"any",value:S.value??"",onChange:T=>S.onChange(tDe(T.target.value))})}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-medium",children:"KM"})]}),r.jsx(ct,{})]})},w.key)}),r.jsx(ot,{control:e.control,name:"nearestHospital",render:({field:w})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-xs text-gray-500 flex items-center gap-2",children:[r.jsx(ove,{className:"w-4 h-4"}),"Nearest Hospital"]}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Name & Distance (e.g. Civil Hospital, 5km)",className:"h-11",...w})}),r.jsx(ct,{})]})})]})})]}),r.jsxs("div",{className:"border-b",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"2"}),r.jsxs("div",{children:[r.jsxs("h2",{className:"font-semibold",children:["Public Areas (Annexure-I #6e) ",r.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded text-white font-bold ml-2",children:"(OPTIONAL)"})]}),r.jsx("p",{className:"text-sm text-white/70",children:"Details of lobby, dining, and parking facilities"})]})]})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs text-gray-500 flex items-center gap-2",children:[r.jsx(yQ,{className:"w-4 h-4"}),"Lobby/Lounge Area"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Pe,{type:"number",placeholder:"Enter area",className:"h-11 pr-16",min:0,value:u.lobbyArea,onChange:w=>h(N=>({...N,lobbyArea:w.target.value}))}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-medium",children:"Sq.Ft"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs text-gray-500 flex items-center gap-2",children:[r.jsx(Vj,{className:"w-4 h-4"}),"Dining Space"]}),r.jsxs("div",{className:"relative",children:[r.jsx(Pe,{type:"number",placeholder:"Enter area",className:"h-11 pr-16",min:0,value:u.diningArea,onChange:w=>h(N=>({...N,diningArea:w.target.value}))}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-400 font-medium",children:"Sq.Ft"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"text-xs text-gray-500 flex items-center gap-2",children:[r.jsx(Js,{className:"w-4 h-4"}),"Parking Capacity"]}),r.jsx(Pe,{type:"text",placeholder:"e.g. 5 cars",className:"h-11",value:u.parkingCapacity,onChange:w=>h(N=>({...N,parkingCapacity:w.target.value}))})]})]})})]})]})}),r.jsxs(me,{className:"shadow-lg border-0 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"3"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Js,{className:"w-5 h-5"}),"Nearby Attractions ",r.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded text-white font-bold ml-2",children:"(OPTIONAL)"})]}),r.jsx("p",{className:"text-sm text-white/70",children:"Describe tourist attractions near your property (Optional - 100-200 words each)"})]}),r.jsxs(ze,{className:"bg-white/20 text-white",children:[l.filter(w=>w.description.trim().length>0).length,"/",l.length]})]})})]})}),r.jsx(ge,{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[l.map((w,N)=>r.jsxs("div",{className:"relative",children:[r.jsxs("div",{className:"absolute left-3 top-3 text-sm font-bold text-gray-400",children:["#",N+1]}),r.jsx(Ur,{placeholder:`Describe attraction #${N+1}...`,className:"min-h-[100px] pl-10",value:w.description,onChange:S=>j(w.id,S.target.value)}),l.length>1&&r.jsx("button",{type:"button",onClick:()=>y(w.id),className:"absolute right-3 top-3 text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},w.id)),l.length<5&&r.jsx(te,{type:"button",variant:"outline",onClick:x,className:"w-full border-dashed",children:"+ Add Another Attraction"})]})})]}),r.jsxs(me,{className:"shadow-lg border-0 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-700 to-slate-600 text-white px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-bold",children:"4"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"font-semibold flex items-center gap-2",children:[r.jsx(Vm,{className:"w-5 h-5"}),"Good to Have (Annexure-III Desirable) ",r.jsx("span",{className:"text-xs bg-white/20 px-2 py-0.5 rounded text-white font-bold ml-2",children:"(OPTIONAL)"})]}),r.jsx("p",{className:"text-sm text-white/70",children:"Optional amenities - not mandatory for registration"})]}),r.jsxs(ze,{className:"bg-white/20 text-white",children:[m," Selected"]})]})})]})}),r.jsxs(ge,{className:"p-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:$T.map(w=>{const N=!!a[w.id];return r.jsxs("label",{htmlFor:`opt-${w.id}`,className:`flex items-start gap-4 p-4 rounded-xl border-2 cursor-pointer transition-all duration-200 group relative select-none ${N?"bg-slate-50 border-slate-600 shadow-sm":"bg-white border-slate-100 hover:border-slate-300 hover:shadow-sm"}`,children:[r.jsx(Zs,{id:`opt-${w.id}`,checked:N,onCheckedChange:S=>d(w.id,!!S),className:`mt-0.5 transition-all duration-300 ${N?"data-[state=checked]:bg-slate-800 border-slate-800":"border-slate-300"}`}),r.jsx("div",{className:"flex-1 space-y-1",children:r.jsx("span",{className:`text-sm font-medium transition-colors duration-200 ${N?"text-slate-900":"text-slate-600 group-hover:text-slate-900"}`,children:w.label})})]},w.id)})}),r.jsx("div",{className:"mt-6 pt-6 border-t",children:r.jsx(ot,{control:e.control,name:"ecoFriendlyFacilities",render:({field:w})=>r.jsxs(at,{children:[r.jsxs("label",{className:"text-sm font-semibold flex items-center gap-2 mb-2",children:[r.jsx(uve,{className:"w-4 h-4 text-emerald-600"}),"Eco-Friendly Facilities Description"]}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"Additional details about solar panels, rainwater harvesting, waste management, etc.",className:"min-h-[100px]",...w})}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"You can edit the list above or add more details here."}),r.jsx(ct,{})]})})})]})]})]})]})}function _De(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(s){if(s!=="default"&&!(s in e)){var i=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:function(){return n[s]}})}})}),Object.freeze(e)}function nle(e,t){return new Promise(function(n,s){let i;return CDe(e).then(function(a){try{return i=a,n(new Blob([t.slice(0,2),i,t.slice(2)],{type:"image/jpeg"}))}catch(o){return s(o)}},s)})}const CDe=e=>new Promise((t,n)=>{const s=new FileReader;s.addEventListener("load",({target:{result:i}})=>{const a=new DataView(i);let o=0;if(a.getUint16(o)!==65496)return n("not a valid JPEG");for(o+=2;;){const l=a.getUint16(o);if(l===65498)break;const c=a.getUint16(o+2);if(l===65505&&a.getUint32(o+4)===1165519206){const d=o+10;let u;switch(a.getUint16(d)){case 18761:u=!0;break;case 19789:u=!1;break;default:return n("TIFF header contains invalid endian")}if(a.getUint16(d+2,u)!==42)return n("TIFF header contains invalid version");const h=a.getUint32(d+4,u),f=d+h+2+12*a.getUint16(d+h,u);for(let m=d+h+2;m<f;m+=12)if(a.getUint16(m,u)==274){if(a.getUint16(m+2,u)!==3)return n("Orientation data type is invalid");if(a.getUint32(m+4,u)!==1)return n("Orientation data count is invalid");a.setUint16(m+8,1,u);break}return t(i.slice(o,o+2+c))}o+=2+c}return t(new Blob)}),s.readAsArrayBuffer(e)});var iS={},ADe={get exports(){return iS},set exports(e){iS=e}};(function(e){var t,n,s={};ADe.exports=s,s.parse=function(i,a){for(var o=s.bin.readUshort,l=s.bin.readUint,c=0,d={},u=new Uint8Array(i),h=u.length-4;l(u,h)!=101010256;)h--;c=h,c+=4;var f=o(u,c+=4);o(u,c+=2);var m=l(u,c+=2),p=l(u,c+=4);c+=4,c=p;for(var g=0;g<f;g++){l(u,c),c+=4,c+=4,c+=4,l(u,c+=4),m=l(u,c+=4);var v=l(u,c+=4),x=o(u,c+=4),y=o(u,c+2),j=o(u,c+4);c+=6;var w=l(u,c+=8);c+=4,c+=x+y+j,s._readLocal(u,w,d,m,v,a)}return d},s._readLocal=function(i,a,o,l,c,d){var u=s.bin.readUshort,h=s.bin.readUint;h(i,a),u(i,a+=4),u(i,a+=2);var f=u(i,a+=2);h(i,a+=2),h(i,a+=4),a+=4;var m=u(i,a+=8),p=u(i,a+=2);a+=2;var g=s.bin.readUTF8(i,a,m);if(a+=m,a+=p,d)o[g]={size:c,csize:l};else{var v=new Uint8Array(i.buffer,a);if(f==0)o[g]=new Uint8Array(v.buffer.slice(a,a+l));else{if(f!=8)throw"unknown compression method: "+f;var x=new Uint8Array(c);s.inflateRaw(v,x),o[g]=x}}},s.inflateRaw=function(i,a){return s.F.inflate(i,a)},s.inflate=function(i,a){return i[0],i[1],s.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),a)},s.deflate=function(i,a){a==null&&(a={level:6});var o=0,l=new Uint8Array(50+Math.floor(1.1*i.length));l[o]=120,l[o+1]=156,o+=2,o=s.F.deflateRaw(i,l,o,a.level);var c=s.adler(i,0,i.length);return l[o+0]=c>>>24&255,l[o+1]=c>>>16&255,l[o+2]=c>>>8&255,l[o+3]=c>>>0&255,new Uint8Array(l.buffer,0,o+4)},s.deflateRaw=function(i,a){a==null&&(a={level:6});var o=new Uint8Array(50+Math.floor(1.1*i.length)),l=s.F.deflateRaw(i,o,l,a.level);return new Uint8Array(o.buffer,0,l)},s.encode=function(i,a){a==null&&(a=!1);var o=0,l=s.bin.writeUint,c=s.bin.writeUshort,d={};for(var u in i){var h=!s._noNeed(u)&&!a,f=i[u],m=s.crc.crc(f,0,f.length);d[u]={cpr:h,usize:f.length,crc:m,file:h?s.deflateRaw(f):f}}for(var u in d)o+=d[u].file.length+30+46+2*s.bin.sizeUTF8(u);o+=22;var p=new Uint8Array(o),g=0,v=[];for(var u in d){var x=d[u];v.push(g),g=s._writeHeader(p,g,u,x,0)}var y=0,j=g;for(var u in d)x=d[u],v.push(g),g=s._writeHeader(p,g,u,x,1,v[y++]);var w=g-j;return l(p,g,101010256),g+=4,c(p,g+=4,y),c(p,g+=2,y),l(p,g+=2,w),l(p,g+=4,j),g+=4,g+=2,p.buffer},s._noNeed=function(i){var a=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(a)!=-1},s._writeHeader=function(i,a,o,l,c,d){var u=s.bin.writeUint,h=s.bin.writeUshort,f=l.file;return u(i,a,c==0?67324752:33639248),a+=4,c==1&&(a+=2),h(i,a,20),h(i,a+=2,0),h(i,a+=2,l.cpr?8:0),u(i,a+=2,0),u(i,a+=4,l.crc),u(i,a+=4,f.length),u(i,a+=4,l.usize),h(i,a+=4,s.bin.sizeUTF8(o)),h(i,a+=2,0),a+=2,c==1&&(a+=2,a+=2,u(i,a+=6,d),a+=4),a+=s.bin.writeUTF8(i,a,o),c==0&&(i.set(f,a),a+=f.length),a},s.crc={table:function(){for(var i=new Uint32Array(256),a=0;a<256;a++){for(var o=a,l=0;l<8;l++)1&o?o=3988292384^o>>>1:o>>>=1;i[a]=o}return i}(),update:function(i,a,o,l){for(var c=0;c<l;c++)i=s.crc.table[255&(i^a[o+c])]^i>>>8;return i},crc:function(i,a,o){return 4294967295^s.crc.update(4294967295,i,a,o)}},s.adler=function(i,a,o){for(var l=1,c=0,d=a,u=a+o;d<u;){for(var h=Math.min(d+5552,u);d<h;)c+=l+=i[d++];l%=65521,c%=65521}return c<<16|l},s.bin={readUshort:function(i,a){return i[a]|i[a+1]<<8},writeUshort:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255},readUint:function(i,a){return 16777216*i[a+3]+(i[a+2]<<16|i[a+1]<<8|i[a])},writeUint:function(i,a,o){i[a]=255&o,i[a+1]=o>>8&255,i[a+2]=o>>16&255,i[a+3]=o>>24&255},readASCII:function(i,a,o){for(var l="",c=0;c<o;c++)l+=String.fromCharCode(i[a+c]);return l},writeASCII:function(i,a,o){for(var l=0;l<o.length;l++)i[a+l]=o.charCodeAt(l)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,a,o){for(var l,c="",d=0;d<o;d++)c+="%"+s.bin.pad(i[a+d].toString(16));try{l=decodeURIComponent(c)}catch{return s.bin.readASCII(i,a,o)}return l},writeUTF8:function(i,a,o){for(var l=o.length,c=0,d=0;d<l;d++){var u=o.charCodeAt(d);if(!(4294967168&u))i[a+c]=u,c++;else if(!(4294965248&u))i[a+c]=192|u>>6,i[a+c+1]=128|u>>0&63,c+=2;else if(!(4294901760&u))i[a+c]=224|u>>12,i[a+c+1]=128|u>>6&63,i[a+c+2]=128|u>>0&63,c+=3;else{if(4292870144&u)throw"e";i[a+c]=240|u>>18,i[a+c+1]=128|u>>12&63,i[a+c+2]=128|u>>6&63,i[a+c+3]=128|u>>0&63,c+=4}}return c},sizeUTF8:function(i){for(var a=i.length,o=0,l=0;l<a;l++){var c=i.charCodeAt(l);if(!(4294967168&c))o++;else if(!(4294965248&c))o+=2;else if(!(4294901760&c))o+=3;else{if(4292870144&c)throw"e";o+=4}}return o}},s.F={},s.F.deflateRaw=function(i,a,o,l){var c=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],d=s.F.U,u=s.F._goodIndex;s.F._hash;var h=s.F._putsE,f=0,m=o<<3,p=0,g=i.length;if(l==0){for(;f<g;)h(a,m,f+(k=Math.min(65535,g-f))==g?1:0),m=s.F._copyExact(i,f,k,a,m+8),f+=k;return m>>>3}var v=d.lits,x=d.strt,y=d.prev,j=0,w=0,N=0,S=0,T=0,C=0;for(g>2&&(x[C=s.F._hash(i,0)]=0),f=0;f<g;f++){if(T=C,f+1<g-2){C=s.F._hash(i,f+1);var A=f+1&32767;y[A]=x[C],x[C]=A}if(p<=f){(j>14e3||w>26697)&&g-f>100&&(p<f&&(v[j]=f-p,j+=2,p=f),m=s.F._writeBlock(f==g-1||p==g?1:0,v,j,S,i,N,f-N,a,m),j=w=S=0,N=f);var R=0;f<g-2&&(R=s.F._bestMatch(i,f,y,T,Math.min(c[2],g-f),c[3]));var k=R>>>16,O=65535&R;if(R!=0){O=65535&R;var $=u(k=R>>>16,d.of0);d.lhst[257+$]++;var D=u(O,d.df0);d.dhst[D]++,S+=d.exb[$]+d.dxb[D],v[j]=k<<23|f-p,v[j+1]=O<<16|$<<8|D,j+=2,p=f+k}else d.lhst[i[f]]++;w++}}for(N==f&&i.length!=0||(p<f&&(v[j]=f-p,j+=2,p=f),m=s.F._writeBlock(1,v,j,S,i,N,f-N,a,m),j=0,w=0,j=w=S=0,N=f);7&m;)m++;return m>>>3},s.F._bestMatch=function(i,a,o,l,c,d){var u=32767&a,h=o[u],f=u-h+32768&32767;if(h==u||l!=s.F._hash(i,a-f))return 0;for(var m=0,p=0,g=Math.min(32767,a);f<=g&&--d!=0&&h!=u;){if(m==0||i[a+m]==i[a+m-f]){var v=s.F._howLong(i,a,f);if(v>m){if(p=f,(m=v)>=c)break;f+2<v&&(v=f+2);for(var x=0,y=0;y<v-2;y++){var j=a-f+y+32768&32767,w=j-o[j]+32768&32767;w>x&&(x=w,h=j)}}}f+=(u=h)-(h=o[u])+32768&32767}return m<<16|p},s.F._howLong=function(i,a,o){if(i[a]!=i[a-o]||i[a+1]!=i[a+1-o]||i[a+2]!=i[a+2-o])return 0;var l=a,c=Math.min(i.length,a+258);for(a+=3;a<c&&i[a]==i[a-o];)a++;return a-l},s.F._hash=function(i,a){return(i[a]<<8|i[a+1])+(i[a+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(i,a,o,l,c,d,u,h,f){var m,p,g,v,x,y,j,w,N,S=s.F.U,T=s.F._putsF,C=s.F._putsE;S.lhst[256]++,p=(m=s.F.getTrees())[0],g=m[1],v=m[2],x=m[3],y=m[4],j=m[5],w=m[6],N=m[7];var A=32+(f+3&7?8-(f+3&7):0)+(u<<3),R=l+s.F.contSize(S.fltree,S.lhst)+s.F.contSize(S.fdtree,S.dhst),k=l+s.F.contSize(S.ltree,S.lhst)+s.F.contSize(S.dtree,S.dhst);k+=14+3*j+s.F.contSize(S.itree,S.ihst)+(2*S.ihst[16]+3*S.ihst[17]+7*S.ihst[18]);for(var O=0;O<286;O++)S.lhst[O]=0;for(O=0;O<30;O++)S.dhst[O]=0;for(O=0;O<19;O++)S.ihst[O]=0;var $=A<R&&A<k?0:R<k?1:2;if(T(h,f,i),T(h,f+1,$),f+=3,$==0){for(;7&f;)f++;f=s.F._copyExact(c,d,u,h,f)}else{var D,q;if($==1&&(D=S.fltree,q=S.fdtree),$==2){s.F.makeCodes(S.ltree,p),s.F.revCodes(S.ltree,p),s.F.makeCodes(S.dtree,g),s.F.revCodes(S.dtree,g),s.F.makeCodes(S.itree,v),s.F.revCodes(S.itree,v),D=S.ltree,q=S.dtree,C(h,f,x-257),C(h,f+=5,y-1),C(h,f+=5,j-4),f+=4;for(var M=0;M<j;M++)C(h,f+3*M,S.itree[1+(S.ordr[M]<<1)]);f+=3*j,f=s.F._codeTiny(w,S.itree,h,f),f=s.F._codeTiny(N,S.itree,h,f)}for(var L=d,V=0;V<o;V+=2){for(var P=a[V],z=P>>>23,Z=L+(8388607&P);L<Z;)f=s.F._writeLit(c[L++],D,h,f);if(z!=0){var F=a[V+1],W=F>>16,G=F>>8&255,H=255&F;C(h,f=s.F._writeLit(257+G,D,h,f),z-S.of0[G]),f+=S.exb[G],T(h,f=s.F._writeLit(H,q,h,f),W-S.df0[H]),f+=S.dxb[H],L+=z}}f=s.F._writeLit(256,D,h,f)}return f},s.F._copyExact=function(i,a,o,l,c){var d=c>>>3;return l[d]=o,l[d+1]=o>>>8,l[d+2]=255-l[d],l[d+3]=255-l[d+1],d+=4,l.set(new Uint8Array(i.buffer,a,o),d),c+(o+4<<3)},s.F.getTrees=function(){for(var i=s.F.U,a=s.F._hufTree(i.lhst,i.ltree,15),o=s.F._hufTree(i.dhst,i.dtree,15),l=[],c=s.F._lenCodes(i.ltree,l),d=[],u=s.F._lenCodes(i.dtree,d),h=0;h<l.length;h+=2)i.ihst[l[h]]++;for(h=0;h<d.length;h+=2)i.ihst[d[h]]++;for(var f=s.F._hufTree(i.ihst,i.itree,7),m=19;m>4&&i.itree[1+(i.ordr[m-1]<<1)]==0;)m--;return[a,o,f,c,u,m,l,d]},s.F.getSecond=function(i){for(var a=[],o=0;o<i.length;o+=2)a.push(i[o+1]);return a},s.F.nonZero=function(i){for(var a="",o=0;o<i.length;o+=2)i[o+1]!=0&&(a+=(o>>1)+",");return a},s.F.contSize=function(i,a){for(var o=0,l=0;l<a.length;l++)o+=a[l]*i[1+(l<<1)];return o},s.F._codeTiny=function(i,a,o,l){for(var c=0;c<i.length;c+=2){var d=i[c],u=i[c+1];l=s.F._writeLit(d,a,o,l);var h=d==16?2:d==17?3:7;d>15&&(s.F._putsE(o,l,u,h),l+=h)}return l},s.F._lenCodes=function(i,a){for(var o=i.length;o!=2&&i[o-1]==0;)o-=2;for(var l=0;l<o;l+=2){var c=i[l+1],d=l+3<o?i[l+3]:-1,u=l+5<o?i[l+5]:-1,h=l==0?-1:i[l-1];if(c==0&&d==c&&u==c){for(var f=l+5;f+2<o&&i[f+2]==c;)f+=2;(m=Math.min(f+1-l>>>1,138))<11?a.push(17,m-3):a.push(18,m-11),l+=2*m-2}else if(c==h&&d==c&&u==c){for(f=l+5;f+2<o&&i[f+2]==c;)f+=2;var m=Math.min(f+1-l>>>1,6);a.push(16,m-3),l+=2*m-2}else a.push(c,0)}return o>>>1},s.F._hufTree=function(i,a,o){var l=[],c=i.length,d=a.length,u=0;for(u=0;u<d;u+=2)a[u]=0,a[u+1]=0;for(u=0;u<c;u++)i[u]!=0&&l.push({lit:u,f:i[u]});var h=l.length,f=l.slice(0);if(h==0)return 0;if(h==1){var m=l[0].lit;return f=m==0?1:0,a[1+(m<<1)]=1,a[1+(f<<1)]=1,1}l.sort(function(w,N){return w.f-N.f});var p=l[0],g=l[1],v=0,x=1,y=2;for(l[0]={lit:-1,f:p.f+g.f,l:p,r:g,d:0};x!=h-1;)p=v!=x&&(y==h||l[v].f<l[y].f)?l[v++]:l[y++],g=v!=x&&(y==h||l[v].f<l[y].f)?l[v++]:l[y++],l[x++]={lit:-1,f:p.f+g.f,l:p,r:g};var j=s.F.setDepth(l[x-1],0);for(j>o&&(s.F.restrictDepth(f,o,j),j=o),u=0;u<h;u++)a[1+(f[u].lit<<1)]=f[u].d;return j},s.F.setDepth=function(i,a){return i.lit!=-1?(i.d=a,a):Math.max(s.F.setDepth(i.l,a+1),s.F.setDepth(i.r,a+1))},s.F.restrictDepth=function(i,a,o){var l=0,c=1<<o-a,d=0;for(i.sort(function(h,f){return f.d==h.d?h.f-f.f:f.d-h.d}),l=0;l<i.length&&i[l].d>a;l++){var u=i[l].d;i[l].d=a,d+=c-(1<<o-u)}for(d>>>=o-a;d>0;)(u=i[l].d)<a?(i[l].d++,d-=1<<a-u-1):l++;for(;l>=0;l--)i[l].d==a&&d<0&&(i[l].d--,d++);d!=0&&console.log("debt left")},s.F._goodIndex=function(i,a){var o=0;return a[16|o]<=i&&(o|=16),a[8|o]<=i&&(o|=8),a[4|o]<=i&&(o|=4),a[2|o]<=i&&(o|=2),a[1|o]<=i&&(o|=1),o},s.F._writeLit=function(i,a,o,l){return s.F._putsF(o,l,a[i<<1]),l+a[1+(i<<1)]},s.F.inflate=function(i,a){var o=Uint8Array;if(i[0]==3&&i[1]==0)return a||new o(0);var l=s.F,c=l._bitsF,d=l._bitsE,u=l._decodeTiny,h=l.makeCodes,f=l.codes2map,m=l._get17,p=l.U,g=a==null;g&&(a=new o(i.length>>>2<<3));for(var v,x,y=0,j=0,w=0,N=0,S=0,T=0,C=0,A=0,R=0;y==0;)if(y=c(i,R,1),j=c(i,R+1,2),R+=3,j!=0){if(g&&(a=s.F._check(a,A+(1<<17))),j==1&&(v=p.flmap,x=p.fdmap,T=511,C=31),j==2){w=d(i,R,5)+257,N=d(i,R+5,5)+1,S=d(i,R+10,4)+4,R+=14;for(var k=0;k<38;k+=2)p.itree[k]=0,p.itree[k+1]=0;var O=1;for(k=0;k<S;k++){var $=d(i,R+3*k,3);p.itree[1+(p.ordr[k]<<1)]=$,$>O&&(O=$)}R+=3*S,h(p.itree,O),f(p.itree,O,p.imap),v=p.lmap,x=p.dmap,R=u(p.imap,(1<<O)-1,w+N,i,R,p.ttree);var D=l._copyOut(p.ttree,0,w,p.ltree);T=(1<<D)-1;var q=l._copyOut(p.ttree,w,N,p.dtree);C=(1<<q)-1,h(p.ltree,D),f(p.ltree,D,v),h(p.dtree,q),f(p.dtree,q,x)}for(;;){var M=v[m(i,R)&T];R+=15&M;var L=M>>>4;if(!(L>>>8))a[A++]=L;else{if(L==256)break;var V=A+L-254;if(L>264){var P=p.ldef[L-257];V=A+(P>>>3)+d(i,R,7&P),R+=7&P}var z=x[m(i,R)&C];R+=15&z;var Z=z>>>4,F=p.ddef[Z],W=(F>>>4)+c(i,R,15&F);for(R+=15&F,g&&(a=s.F._check(a,A+(1<<17)));A<V;)a[A]=a[A++-W],a[A]=a[A++-W],a[A]=a[A++-W],a[A]=a[A++-W];A=V}}}else{7&R&&(R+=8-(7&R));var G=4+(R>>>3),H=i[G-4]|i[G-3]<<8;g&&(a=s.F._check(a,A+H)),a.set(new o(i.buffer,i.byteOffset+G,H),A),R=G+H<<3,A+=H}return a.length==A?a:a.slice(0,A)},s.F._check=function(i,a){var o=i.length;if(a<=o)return i;var l=new Uint8Array(Math.max(o<<1,a));return l.set(i,0),l},s.F._decodeTiny=function(i,a,o,l,c,d){for(var u=s.F._bitsE,h=s.F._get17,f=0;f<o;){var m=i[h(l,c)&a];c+=15&m;var p=m>>>4;if(p<=15)d[f]=p,f++;else{var g=0,v=0;p==16?(v=3+u(l,c,2),c+=2,g=d[f-1]):p==17?(v=3+u(l,c,3),c+=3):p==18&&(v=11+u(l,c,7),c+=7);for(var x=f+v;f<x;)d[f]=g,f++}}return c},s.F._copyOut=function(i,a,o,l){for(var c=0,d=0,u=l.length>>>1;d<o;){var h=i[d+a];l[d<<1]=0,l[1+(d<<1)]=h,h>c&&(c=h),d++}for(;d<u;)l[d<<1]=0,l[1+(d<<1)]=0,d++;return c},s.F.makeCodes=function(i,a){for(var o,l,c,d,u=s.F.U,h=i.length,f=u.bl_count,m=0;m<=a;m++)f[m]=0;for(m=1;m<h;m+=2)f[i[m]]++;var p=u.next_code;for(o=0,f[0]=0,l=1;l<=a;l++)o=o+f[l-1]<<1,p[l]=o;for(c=0;c<h;c+=2)(d=i[c+1])!=0&&(i[c]=p[d],p[d]++)},s.F.codes2map=function(i,a,o){for(var l=i.length,c=s.F.U.rev15,d=0;d<l;d+=2)if(i[d+1]!=0)for(var u=d>>1,h=i[d+1],f=u<<4|h,m=a-h,p=i[d]<<m,g=p+(1<<m);p!=g;)o[c[p]>>>15-a]=f,p++},s.F.revCodes=function(i,a){for(var o=s.F.U.rev15,l=15-a,c=0;c<i.length;c+=2){var d=i[c]<<a-i[c+1];i[c]=o[d]>>>l}},s.F._putsE=function(i,a,o){o<<=7&a;var l=a>>>3;i[l]|=o,i[l+1]|=o>>>8},s.F._putsF=function(i,a,o){o<<=7&a;var l=a>>>3;i[l]|=o,i[l+1]|=o>>>8,i[l+2]|=o>>>16},s.F._bitsE=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8)>>>(7&a)&(1<<o)-1},s.F._bitsF=function(i,a,o){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)&(1<<o)-1},s.F._get17=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16)>>>(7&a)},s.F._get25=function(i,a){return(i[a>>>3]|i[1+(a>>>3)]<<8|i[2+(a>>>3)]<<16|i[3+(a>>>3)]<<24)>>>(7&a)},s.F.U=(t=Uint16Array,n=Uint32Array,{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new n(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new n(286),dhst:new n(30),ihst:new n(19),lits:new n(15e3),strt:new t(65536),prev:new t(32768)}),function(){for(var i=s.F.U,a=0;a<32768;a++){var o=a;o=(4278255360&(o=(4042322160&(o=(3435973836&(o=(2863311530&o)>>>1|(1431655765&o)<<1))>>>2|(858993459&o)<<2))>>>4|(252645135&o)<<4))>>>8|(16711935&o)<<8,i.rev15[a]=(o>>>16|o<<16)>>>17}function l(c,d,u){for(;d--!=0;)c.push(0,u)}for(a=0;a<32;a++)i.ldef[a]=i.of0[a]<<3|i.exb[a],i.ddef[a]=i.df0[a]<<4|i.dxb[a];l(i.fltree,144,8),l(i.fltree,112,9),l(i.fltree,24,7),l(i.fltree,8,8),s.F.makeCodes(i.fltree,9),s.F.codes2map(i.fltree,9,i.flmap),s.F.revCodes(i.fltree,9),l(i.fdtree,32,5),s.F.makeCodes(i.fdtree,5),s.F.codes2map(i.fdtree,5,i.fdmap),s.F.revCodes(i.fdtree,5),l(i.itree,19,0),l(i.ltree,286,0),l(i.dtree,30,0),l(i.ttree,320,0)}()})();var kDe=_De({__proto__:null,default:iS},[iS]);const Od=function(){var e={nextZero(u,h){for(;u[h]!=0;)h++;return h},readUshort:(u,h)=>u[h]<<8|u[h+1],writeUshort(u,h,f){u[h]=f>>8&255,u[h+1]=255&f},readUint:(u,h)=>16777216*u[h]+(u[h+1]<<16|u[h+2]<<8|u[h+3]),writeUint(u,h,f){u[h]=f>>24&255,u[h+1]=f>>16&255,u[h+2]=f>>8&255,u[h+3]=255&f},readASCII(u,h,f){let m="";for(let p=0;p<f;p++)m+=String.fromCharCode(u[h+p]);return m},writeASCII(u,h,f){for(let m=0;m<f.length;m++)u[h+m]=f.charCodeAt(m)},readBytes(u,h,f){const m=[];for(let p=0;p<f;p++)m.push(u[h+p]);return m},pad:u=>u.length<2?`0${u}`:u,readUTF8(u,h,f){let m,p="";for(let g=0;g<f;g++)p+=`%${e.pad(u[h+g].toString(16))}`;try{m=decodeURIComponent(p)}catch{return e.readASCII(u,h,f)}return m}};function t(u,h,f,m){const p=h*f,g=a(m),v=Math.ceil(h*g/8),x=new Uint8Array(4*p),y=new Uint32Array(x.buffer),{ctype:j}=m,{depth:w}=m,N=e.readUshort;if(j==6){const P=p<<2;if(w==8)for(var S=0;S<P;S+=4)x[S]=u[S],x[S+1]=u[S+1],x[S+2]=u[S+2],x[S+3]=u[S+3];if(w==16)for(S=0;S<P;S++)x[S]=u[S<<1]}else if(j==2){const P=m.tabs.tRNS;if(P==null){if(w==8)for(S=0;S<p;S++){var T=3*S;y[S]=255<<24|u[T+2]<<16|u[T+1]<<8|u[T]}if(w==16)for(S=0;S<p;S++)T=6*S,y[S]=255<<24|u[T+4]<<16|u[T+2]<<8|u[T]}else{var C=P[0];const z=P[1],Z=P[2];if(w==8)for(S=0;S<p;S++){var A=S<<2;T=3*S,y[S]=255<<24|u[T+2]<<16|u[T+1]<<8|u[T],u[T]==C&&u[T+1]==z&&u[T+2]==Z&&(x[A+3]=0)}if(w==16)for(S=0;S<p;S++)A=S<<2,T=6*S,y[S]=255<<24|u[T+4]<<16|u[T+2]<<8|u[T],N(u,T)==C&&N(u,T+2)==z&&N(u,T+4)==Z&&(x[A+3]=0)}}else if(j==3){const P=m.tabs.PLTE,z=m.tabs.tRNS,Z=z?z.length:0;if(w==1)for(var R=0;R<f;R++){var k=R*v,O=R*h;for(S=0;S<h;S++){A=O+S<<2;var $=3*(D=u[k+(S>>3)]>>7-((7&S)<<0)&1);x[A]=P[$],x[A+1]=P[$+1],x[A+2]=P[$+2],x[A+3]=D<Z?z[D]:255}}if(w==2)for(R=0;R<f;R++)for(k=R*v,O=R*h,S=0;S<h;S++)A=O+S<<2,$=3*(D=u[k+(S>>2)]>>6-((3&S)<<1)&3),x[A]=P[$],x[A+1]=P[$+1],x[A+2]=P[$+2],x[A+3]=D<Z?z[D]:255;if(w==4)for(R=0;R<f;R++)for(k=R*v,O=R*h,S=0;S<h;S++)A=O+S<<2,$=3*(D=u[k+(S>>1)]>>4-((1&S)<<2)&15),x[A]=P[$],x[A+1]=P[$+1],x[A+2]=P[$+2],x[A+3]=D<Z?z[D]:255;if(w==8)for(S=0;S<p;S++){var D;A=S<<2,$=3*(D=u[S]),x[A]=P[$],x[A+1]=P[$+1],x[A+2]=P[$+2],x[A+3]=D<Z?z[D]:255}}else if(j==4){if(w==8)for(S=0;S<p;S++){A=S<<2;var q=u[M=S<<1];x[A]=q,x[A+1]=q,x[A+2]=q,x[A+3]=u[M+1]}if(w==16)for(S=0;S<p;S++){var M;A=S<<2,q=u[M=S<<2],x[A]=q,x[A+1]=q,x[A+2]=q,x[A+3]=u[M+2]}}else if(j==0)for(C=m.tabs.tRNS?m.tabs.tRNS:-1,R=0;R<f;R++){const P=R*v,z=R*h;if(w==1)for(var L=0;L<h;L++){var V=(q=255*(u[P+(L>>>3)]>>>7-(7&L)&1))==255*C?0:255;y[z+L]=V<<24|q<<16|q<<8|q}else if(w==2)for(L=0;L<h;L++)V=(q=85*(u[P+(L>>>2)]>>>6-((3&L)<<1)&3))==85*C?0:255,y[z+L]=V<<24|q<<16|q<<8|q;else if(w==4)for(L=0;L<h;L++)V=(q=17*(u[P+(L>>>1)]>>>4-((1&L)<<2)&15))==17*C?0:255,y[z+L]=V<<24|q<<16|q<<8|q;else if(w==8)for(L=0;L<h;L++)V=(q=u[P+L])==C?0:255,y[z+L]=V<<24|q<<16|q<<8|q;else if(w==16)for(L=0;L<h;L++)q=u[P+(L<<1)],V=N(u,P+(L<<1))==C?0:255,y[z+L]=V<<24|q<<16|q<<8|q}return x}function n(u,h,f,m){const p=a(u),g=Math.ceil(f*p/8),v=new Uint8Array((g+1+u.interlace)*m);return h=u.tabs.CgBI?i(h,v):s(h,v),u.interlace==0?h=o(h,u,0,f,m):u.interlace==1&&(h=function(y,j){const w=j.width,N=j.height,S=a(j),T=S>>3,C=Math.ceil(w*S/8),A=new Uint8Array(N*C);let R=0;const k=[0,0,4,0,2,0,1],O=[0,4,0,2,0,1,0],$=[8,8,8,4,4,2,2],D=[8,8,4,4,2,2,1];let q=0;for(;q<7;){const L=$[q],V=D[q];let P=0,z=0,Z=k[q];for(;Z<N;)Z+=L,z++;let F=O[q];for(;F<w;)F+=V,P++;const W=Math.ceil(P*S/8);o(y,j,R,P,z);let G=0,H=k[q];for(;H<N;){let se=O[q],J=R+G*W<<3;for(;se<w;){var M;if(S==1&&(M=(M=y[J>>3])>>7-(7&J)&1,A[H*C+(se>>3)]|=M<<7-((7&se)<<0)),S==2&&(M=(M=y[J>>3])>>6-(7&J)&3,A[H*C+(se>>2)]|=M<<6-((3&se)<<1)),S==4&&(M=(M=y[J>>3])>>4-(7&J)&15,A[H*C+(se>>1)]|=M<<4-((1&se)<<2)),S>=8){const ie=H*C+se*T;for(let X=0;X<T;X++)A[ie+X]=y[(J>>3)+X]}J+=S,se+=V}G++,H+=L}P*z!=0&&(R+=z*(1+W)),q+=1}return A}(h,u)),h}function s(u,h){return i(new Uint8Array(u.buffer,2,u.length-6),h)}var i=function(){const u={H:{}};return u.H.N=function(h,f){const m=Uint8Array;let p,g,v=0,x=0,y=0,j=0,w=0,N=0,S=0,T=0,C=0;if(h[0]==3&&h[1]==0)return f||new m(0);const A=u.H,R=A.b,k=A.e,O=A.R,$=A.n,D=A.A,q=A.Z,M=A.m,L=f==null;for(L&&(f=new m(h.length>>>2<<5));v==0;)if(v=R(h,C,1),x=R(h,C+1,2),C+=3,x!=0){if(L&&(f=u.H.W(f,T+(1<<17))),x==1&&(p=M.J,g=M.h,N=511,S=31),x==2){y=k(h,C,5)+257,j=k(h,C+5,5)+1,w=k(h,C+10,4)+4,C+=14;let P=1;for(var V=0;V<38;V+=2)M.Q[V]=0,M.Q[V+1]=0;for(V=0;V<w;V++){const F=k(h,C+3*V,3);M.Q[1+(M.X[V]<<1)]=F,F>P&&(P=F)}C+=3*w,$(M.Q,P),D(M.Q,P,M.u),p=M.w,g=M.d,C=O(M.u,(1<<P)-1,y+j,h,C,M.v);const z=A.V(M.v,0,y,M.C);N=(1<<z)-1;const Z=A.V(M.v,y,j,M.D);S=(1<<Z)-1,$(M.C,z),D(M.C,z,p),$(M.D,Z),D(M.D,Z,g)}for(;;){const P=p[q(h,C)&N];C+=15&P;const z=P>>>4;if(!(z>>>8))f[T++]=z;else{if(z==256)break;{let Z=T+z-254;if(z>264){const se=M.q[z-257];Z=T+(se>>>3)+k(h,C,7&se),C+=7&se}const F=g[q(h,C)&S];C+=15&F;const W=F>>>4,G=M.c[W],H=(G>>>4)+R(h,C,15&G);for(C+=15&G;T<Z;)f[T]=f[T++-H],f[T]=f[T++-H],f[T]=f[T++-H],f[T]=f[T++-H];T=Z}}}}else{7&C&&(C+=8-(7&C));const P=4+(C>>>3),z=h[P-4]|h[P-3]<<8;L&&(f=u.H.W(f,T+z)),f.set(new m(h.buffer,h.byteOffset+P,z),T),C=P+z<<3,T+=z}return f.length==T?f:f.slice(0,T)},u.H.W=function(h,f){const m=h.length;if(f<=m)return h;const p=new Uint8Array(m<<1);return p.set(h,0),p},u.H.R=function(h,f,m,p,g,v){const x=u.H.e,y=u.H.Z;let j=0;for(;j<m;){const w=h[y(p,g)&f];g+=15&w;const N=w>>>4;if(N<=15)v[j]=N,j++;else{let S=0,T=0;N==16?(T=3+x(p,g,2),g+=2,S=v[j-1]):N==17?(T=3+x(p,g,3),g+=3):N==18&&(T=11+x(p,g,7),g+=7);const C=j+T;for(;j<C;)v[j]=S,j++}}return g},u.H.V=function(h,f,m,p){let g=0,v=0;const x=p.length>>>1;for(;v<m;){const y=h[v+f];p[v<<1]=0,p[1+(v<<1)]=y,y>g&&(g=y),v++}for(;v<x;)p[v<<1]=0,p[1+(v<<1)]=0,v++;return g},u.H.n=function(h,f){const m=u.H.m,p=h.length;let g,v,x,y;const j=m.j;for(var w=0;w<=f;w++)j[w]=0;for(w=1;w<p;w+=2)j[h[w]]++;const N=m.K;for(g=0,j[0]=0,v=1;v<=f;v++)g=g+j[v-1]<<1,N[v]=g;for(x=0;x<p;x+=2)y=h[x+1],y!=0&&(h[x]=N[y],N[y]++)},u.H.A=function(h,f,m){const p=h.length,g=u.H.m.r;for(let v=0;v<p;v+=2)if(h[v+1]!=0){const x=v>>1,y=h[v+1],j=x<<4|y,w=f-y;let N=h[v]<<w;const S=N+(1<<w);for(;N!=S;)m[g[N]>>>15-f]=j,N++}},u.H.l=function(h,f){const m=u.H.m.r,p=15-f;for(let g=0;g<h.length;g+=2){const v=h[g]<<f-h[g+1];h[g]=m[v]>>>p}},u.H.M=function(h,f,m){m<<=7&f;const p=f>>>3;h[p]|=m,h[p+1]|=m>>>8},u.H.I=function(h,f,m){m<<=7&f;const p=f>>>3;h[p]|=m,h[p+1]|=m>>>8,h[p+2]|=m>>>16},u.H.e=function(h,f,m){return(h[f>>>3]|h[1+(f>>>3)]<<8)>>>(7&f)&(1<<m)-1},u.H.b=function(h,f,m){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16)>>>(7&f)&(1<<m)-1},u.H.Z=function(h,f){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16)>>>(7&f)},u.H.i=function(h,f){return(h[f>>>3]|h[1+(f>>>3)]<<8|h[2+(f>>>3)]<<16|h[3+(f>>>3)]<<24)>>>(7&f)},u.H.m=function(){const h=Uint16Array,f=Uint32Array;return{K:new h(16),j:new h(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new h(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new f(32),J:new h(512),_:[],h:new h(32),$:[],w:new h(32768),C:[],v:[],d:new h(32768),D:[],u:new h(512),Q:[],r:new h(32768),s:new f(286),Y:new f(30),a:new f(19),t:new f(15e3),k:new h(65536),g:new h(32768)}}(),function(){const h=u.H.m;for(var f=0;f<32768;f++){let p=f;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,h.r[f]=(p>>>16|p<<16)>>>17}function m(p,g,v){for(;g--!=0;)p.push(0,v)}for(f=0;f<32;f++)h.q[f]=h.S[f]<<3|h.T[f],h.c[f]=h.p[f]<<4|h.z[f];m(h._,144,8),m(h._,112,9),m(h._,24,7),m(h._,8,8),u.H.n(h._,9),u.H.A(h._,9,h.J),u.H.l(h._,9),m(h.$,32,5),u.H.n(h.$,5),u.H.A(h.$,5,h.h),u.H.l(h.$,5),m(h.Q,19,0),m(h.C,286,0),m(h.D,30,0),m(h.v,320,0)}(),u.H.N}();function a(u){return[1,null,3,1,2,null,4][u.ctype]*u.depth}function o(u,h,f,m,p){let g=a(h);const v=Math.ceil(m*g/8);let x,y;g=Math.ceil(g/8);let j=u[f],w=0;if(j>1&&(u[f]=[0,0,1][j-2]),j==3)for(w=g;w<v;w++)u[w+1]=u[w+1]+(u[w+1-g]>>>1)&255;for(let N=0;N<p;N++)if(x=f+N*v,y=x+N+1,j=u[y-1],w=0,j==0)for(;w<v;w++)u[x+w]=u[y+w];else if(j==1){for(;w<g;w++)u[x+w]=u[y+w];for(;w<v;w++)u[x+w]=u[y+w]+u[x+w-g]}else if(j==2)for(;w<v;w++)u[x+w]=u[y+w]+u[x+w-v];else if(j==3){for(;w<g;w++)u[x+w]=u[y+w]+(u[x+w-v]>>>1);for(;w<v;w++)u[x+w]=u[y+w]+(u[x+w-v]+u[x+w-g]>>>1)}else{for(;w<g;w++)u[x+w]=u[y+w]+l(0,u[x+w-v],0);for(;w<v;w++)u[x+w]=u[y+w]+l(u[x+w-g],u[x+w-v],u[x+w-g-v])}return u}function l(u,h,f){const m=u+h-f,p=m-u,g=m-h,v=m-f;return p*p<=g*g&&p*p<=v*v?u:g*g<=v*v?h:f}function c(u,h,f){f.width=e.readUint(u,h),h+=4,f.height=e.readUint(u,h),h+=4,f.depth=u[h],h++,f.ctype=u[h],h++,f.compress=u[h],h++,f.filter=u[h],h++,f.interlace=u[h],h++}function d(u,h,f,m,p,g,v,x,y){const j=Math.min(h,p),w=Math.min(f,g);let N=0,S=0;for(let q=0;q<w;q++)for(let M=0;M<j;M++)if(v>=0&&x>=0?(N=q*h+M<<2,S=(x+q)*p+v+M<<2):(N=(-x+q)*h-v+M<<2,S=q*p+M<<2),y==0)m[S]=u[N],m[S+1]=u[N+1],m[S+2]=u[N+2],m[S+3]=u[N+3];else if(y==1){var T=u[N+3]*.00392156862745098,C=u[N]*T,A=u[N+1]*T,R=u[N+2]*T,k=m[S+3]*(1/255),O=m[S]*k,$=m[S+1]*k,D=m[S+2]*k;const L=1-T,V=T+k*L,P=V==0?0:1/V;m[S+3]=255*V,m[S+0]=(C+O*L)*P,m[S+1]=(A+$*L)*P,m[S+2]=(R+D*L)*P}else if(y==2)T=u[N+3],C=u[N],A=u[N+1],R=u[N+2],k=m[S+3],O=m[S],$=m[S+1],D=m[S+2],T==k&&C==O&&A==$&&R==D?(m[S]=0,m[S+1]=0,m[S+2]=0,m[S+3]=0):(m[S]=C,m[S+1]=A,m[S+2]=R,m[S+3]=T);else if(y==3){if(T=u[N+3],C=u[N],A=u[N+1],R=u[N+2],k=m[S+3],O=m[S],$=m[S+1],D=m[S+2],T==k&&C==O&&A==$&&R==D)continue;if(T<220&&k>20)return!1}return!0}return{decode:function(h){const f=new Uint8Array(h);let m=8;const p=e,g=p.readUshort,v=p.readUint,x={tabs:{},frames:[]},y=new Uint8Array(f.length);let j,w=0,N=0;const S=[137,80,78,71,13,10,26,10];for(var T=0;T<8;T++)if(f[T]!=S[T])throw"The input is not a PNG file!";for(;m<f.length;){const q=p.readUint(f,m);m+=4;const M=p.readASCII(f,m,4);if(m+=4,M=="IHDR")c(f,m,x);else if(M=="iCCP"){for(var C=m;f[C]!=0;)C++;p.readASCII(f,m,C-m),f[C+1];const L=f.slice(C+2,m+q);let V=null;try{V=s(L)}catch{V=i(L)}x.tabs[M]=V}else if(M=="CgBI")x.tabs[M]=f.slice(m,m+4);else if(M=="IDAT"){for(T=0;T<q;T++)y[w+T]=f[m+T];w+=q}else if(M=="acTL")x.tabs[M]={num_frames:v(f,m),num_plays:v(f,m+4)},j=new Uint8Array(f.length);else if(M=="fcTL"){N!=0&&((D=x.frames[x.frames.length-1]).data=n(x,j.slice(0,N),D.rect.width,D.rect.height),N=0);const L={x:v(f,m+12),y:v(f,m+16),width:v(f,m+4),height:v(f,m+8)};let V=g(f,m+22);V=g(f,m+20)/(V==0?100:V);const P={rect:L,delay:Math.round(1e3*V),dispose:f[m+24],blend:f[m+25]};x.frames.push(P)}else if(M=="fdAT"){for(T=0;T<q-4;T++)j[N+T]=f[m+T+4];N+=q-4}else if(M=="pHYs")x.tabs[M]=[p.readUint(f,m),p.readUint(f,m+4),f[m+8]];else if(M=="cHRM")for(x.tabs[M]=[],T=0;T<8;T++)x.tabs[M].push(p.readUint(f,m+4*T));else if(M=="tEXt"||M=="zTXt"){x.tabs[M]==null&&(x.tabs[M]={});var A=p.nextZero(f,m),R=p.readASCII(f,m,A-m),k=m+q-A-1;if(M=="tEXt")$=p.readASCII(f,A+1,k);else{var O=s(f.slice(A+2,A+2+k));$=p.readUTF8(O,0,O.length)}x.tabs[M][R]=$}else if(M=="iTXt"){x.tabs[M]==null&&(x.tabs[M]={}),A=0,C=m,A=p.nextZero(f,C),R=p.readASCII(f,C,A-C);const L=f[C=A+1];var $;f[C+1],C+=2,A=p.nextZero(f,C),p.readASCII(f,C,A-C),C=A+1,A=p.nextZero(f,C),p.readUTF8(f,C,A-C),k=q-((C=A+1)-m),L==0?$=p.readUTF8(f,C,k):(O=s(f.slice(C,C+k)),$=p.readUTF8(O,0,O.length)),x.tabs[M][R]=$}else if(M=="PLTE")x.tabs[M]=p.readBytes(f,m,q);else if(M=="hIST"){const L=x.tabs.PLTE.length/3;for(x.tabs[M]=[],T=0;T<L;T++)x.tabs[M].push(g(f,m+2*T))}else if(M=="tRNS")x.ctype==3?x.tabs[M]=p.readBytes(f,m,q):x.ctype==0?x.tabs[M]=g(f,m):x.ctype==2&&(x.tabs[M]=[g(f,m),g(f,m+2),g(f,m+4)]);else if(M=="gAMA")x.tabs[M]=p.readUint(f,m)/1e5;else if(M=="sRGB")x.tabs[M]=f[m];else if(M=="bKGD")x.ctype==0||x.ctype==4?x.tabs[M]=[g(f,m)]:x.ctype==2||x.ctype==6?x.tabs[M]=[g(f,m),g(f,m+2),g(f,m+4)]:x.ctype==3&&(x.tabs[M]=f[m]);else if(M=="IEND")break;m+=q,p.readUint(f,m),m+=4}var D;return N!=0&&((D=x.frames[x.frames.length-1]).data=n(x,j.slice(0,N),D.rect.width,D.rect.height)),x.data=n(x,y,x.width,x.height),delete x.compress,delete x.interlace,delete x.filter,x},toRGBA8:function(h){const f=h.width,m=h.height;if(h.tabs.acTL==null)return[t(h.data,f,m,h).buffer];const p=[];h.frames[0].data==null&&(h.frames[0].data=h.data);const g=f*m*4,v=new Uint8Array(g),x=new Uint8Array(g),y=new Uint8Array(g);for(let w=0;w<h.frames.length;w++){const N=h.frames[w],S=N.rect.x,T=N.rect.y,C=N.rect.width,A=N.rect.height,R=t(N.data,C,A,h);if(w!=0)for(var j=0;j<g;j++)y[j]=v[j];if(N.blend==0?d(R,C,A,v,f,m,S,T,0):N.blend==1&&d(R,C,A,v,f,m,S,T,1),p.push(v.buffer.slice(0)),N.dispose!=0){if(N.dispose==1)d(x,C,A,v,f,m,S,T,0);else if(N.dispose==2)for(j=0;j<g;j++)v[j]=y[j]}}return p},_paeth:l,_copyTile:d,_bin:e}}();(function(){const{_copyTile:e}=Od,{_bin:t}=Od,n=Od._paeth;var s={table:function(){const C=new Uint32Array(256);for(let A=0;A<256;A++){let R=A;for(let k=0;k<8;k++)1&R?R=3988292384^R>>>1:R>>>=1;C[A]=R}return C}(),update(C,A,R,k){for(let O=0;O<k;O++)C=s.table[255&(C^A[R+O])]^C>>>8;return C},crc:(C,A,R)=>4294967295^s.update(4294967295,C,A,R)};function i(C,A,R,k){A[R]+=C[0]*k>>4,A[R+1]+=C[1]*k>>4,A[R+2]+=C[2]*k>>4,A[R+3]+=C[3]*k>>4}function a(C){return Math.max(0,Math.min(255,C))}function o(C,A){const R=C[0]-A[0],k=C[1]-A[1],O=C[2]-A[2],$=C[3]-A[3];return R*R+k*k+O*O+$*$}function l(C,A,R,k,O,$,D){D==null&&(D=1);const q=k.length,M=[];for(var L=0;L<q;L++){const H=k[L];M.push([H>>>0&255,H>>>8&255,H>>>16&255,H>>>24&255])}for(L=0;L<q;L++){let H=4294967295;for(var V=0,P=0;P<q;P++){var z=o(M[L],M[P]);P!=L&&z<H&&(H=z,V=P)}}const Z=new Uint32Array(O.buffer),F=new Int16Array(A*R*4),W=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(L=0;L<W.length;L++)W[L]=255*((W[L]+.5)/16-.5);for(let H=0;H<R;H++)for(let se=0;se<A;se++){var G;L=4*(H*A+se),D!=2?G=[a(C[L]+F[L]),a(C[L+1]+F[L+1]),a(C[L+2]+F[L+2]),a(C[L+3]+F[L+3])]:(z=W[4*(3&H)+(3&se)],G=[a(C[L]+z),a(C[L+1]+z),a(C[L+2]+z),a(C[L+3]+z)]),V=0;let J=16777215;for(P=0;P<q;P++){const he=o(G,M[P]);he<J&&(J=he,V=P)}const ie=M[V],X=[G[0]-ie[0],G[1]-ie[1],G[2]-ie[2],G[3]-ie[3]];D==1&&(se!=A-1&&i(X,F,L+4,7),H!=R-1&&(se!=0&&i(X,F,L+4*A-4,3),i(X,F,L+4*A,5),se!=A-1&&i(X,F,L+4*A+4,1))),$[L>>2]=V,Z[L>>2]=k[V]}}function c(C,A,R,k,O){O==null&&(O={});const{crc:$}=s,D=t.writeUint,q=t.writeUshort,M=t.writeASCII;let L=8;const V=C.frames.length>1;let P,z=!1,Z=33+(V?20:0);if(O.sRGB!=null&&(Z+=13),O.pHYs!=null&&(Z+=21),O.iCCP!=null&&(P=pako.deflate(O.iCCP),Z+=21+P.length+4),C.ctype==3){for(var F=C.plte.length,W=0;W<F;W++)C.plte[W]>>>24!=255&&(z=!0);Z+=8+3*F+4+(z?8+1*F+4:0)}for(var G=0;G<C.frames.length;G++)V&&(Z+=38),Z+=(ie=C.frames[G]).cimg.length+12,G!=0&&(Z+=4);Z+=12;const H=new Uint8Array(Z),se=[137,80,78,71,13,10,26,10];for(W=0;W<8;W++)H[W]=se[W];if(D(H,L,13),L+=4,M(H,L,"IHDR"),L+=4,D(H,L,A),L+=4,D(H,L,R),L+=4,H[L]=C.depth,L++,H[L]=C.ctype,L++,H[L]=0,L++,H[L]=0,L++,H[L]=0,L++,D(H,L,$(H,L-17,17)),L+=4,O.sRGB!=null&&(D(H,L,1),L+=4,M(H,L,"sRGB"),L+=4,H[L]=O.sRGB,L++,D(H,L,$(H,L-5,5)),L+=4),O.iCCP!=null){const X=13+P.length;D(H,L,X),L+=4,M(H,L,"iCCP"),L+=4,M(H,L,"ICC profile"),L+=11,L+=2,H.set(P,L),L+=P.length,D(H,L,$(H,L-(X+4),X+4)),L+=4}if(O.pHYs!=null&&(D(H,L,9),L+=4,M(H,L,"pHYs"),L+=4,D(H,L,O.pHYs[0]),L+=4,D(H,L,O.pHYs[1]),L+=4,H[L]=O.pHYs[2],L++,D(H,L,$(H,L-13,13)),L+=4),V&&(D(H,L,8),L+=4,M(H,L,"acTL"),L+=4,D(H,L,C.frames.length),L+=4,D(H,L,O.loop!=null?O.loop:0),L+=4,D(H,L,$(H,L-12,12)),L+=4),C.ctype==3){for(D(H,L,3*(F=C.plte.length)),L+=4,M(H,L,"PLTE"),L+=4,W=0;W<F;W++){const X=3*W,he=C.plte[W],fe=255&he,Q=he>>>8&255,Oe=he>>>16&255;H[L+X+0]=fe,H[L+X+1]=Q,H[L+X+2]=Oe}if(L+=3*F,D(H,L,$(H,L-3*F-4,3*F+4)),L+=4,z){for(D(H,L,F),L+=4,M(H,L,"tRNS"),L+=4,W=0;W<F;W++)H[L+W]=C.plte[W]>>>24&255;L+=F,D(H,L,$(H,L-F-4,F+4)),L+=4}}let J=0;for(G=0;G<C.frames.length;G++){var ie=C.frames[G];V&&(D(H,L,26),L+=4,M(H,L,"fcTL"),L+=4,D(H,L,J++),L+=4,D(H,L,ie.rect.width),L+=4,D(H,L,ie.rect.height),L+=4,D(H,L,ie.rect.x),L+=4,D(H,L,ie.rect.y),L+=4,q(H,L,k[G]),L+=2,q(H,L,1e3),L+=2,H[L]=ie.dispose,L++,H[L]=ie.blend,L++,D(H,L,$(H,L-30,30)),L+=4);const X=ie.cimg;D(H,L,(F=X.length)+(G==0?0:4)),L+=4;const he=L;M(H,L,G==0?"IDAT":"fdAT"),L+=4,G!=0&&(D(H,L,J++),L+=4),H.set(X,L),L+=F,D(H,L,$(H,he,L-he)),L+=4}return D(H,L,0),L+=4,M(H,L,"IEND"),L+=4,D(H,L,$(H,L-4,4)),L+=4,H.buffer}function d(C,A,R){for(let k=0;k<C.frames.length;k++){const O=C.frames[k];O.rect.width;const $=O.rect.height,D=new Uint8Array($*O.bpl+$);O.cimg=m(O.img,$,O.bpp,O.bpl,D,A,R)}}function u(C,A,R,k,O){const $=O[0],D=O[1],q=O[2],M=O[3],L=O[4],V=O[5];let P=6,z=8,Z=255;for(var F=0;F<C.length;F++){const Ee=new Uint8Array(C[F]);for(var W=Ee.length,G=0;G<W;G+=4)Z&=Ee[G+3]}const H=Z!=255,se=function(Re,oe,De,tt,Qe,xe){const ae=[];for(var we=0;we<Re.length;we++){const nt=new Uint8Array(Re[we]),Y=new Uint32Array(nt.buffer);var Te;let Ct=0,Vt=0,pt=oe,Ht=De,wr=tt?1:0;if(we!=0){const wt=xe||tt||we==1||ae[we-2].dispose!=0?1:2;let Ut=0,St=1e9;for(let Be=0;Be<wt;Be++){var qe=new Uint8Array(Re[we-1-Be]);const lr=new Uint32Array(Re[we-1-Be]);let Wt=oe,It=De,yt=-1,ut=-1;for(let Os=0;Os<De;Os++)for(let Dt=0;Dt<oe;Dt++)Y[Ge=Os*oe+Dt]!=lr[Ge]&&(Dt<Wt&&(Wt=Dt),Dt>yt&&(yt=Dt),Os<It&&(It=Os),Os>ut&&(ut=Os));yt==-1&&(Wt=It=yt=ut=0),Qe&&((1&Wt)==1&&Wt--,(1&It)==1&&It--);const Kt=(yt-Wt+1)*(ut-It+1);Kt<St&&(St=Kt,Ut=Be,Ct=Wt,Vt=It,pt=yt-Wt+1,Ht=ut-It+1)}qe=new Uint8Array(Re[we-1-Ut]),Ut==1&&(ae[we-1].dispose=2),Te=new Uint8Array(pt*Ht*4),e(qe,oe,De,Te,pt,Ht,-Ct,-Vt,0),wr=e(nt,oe,De,Te,pt,Ht,-Ct,-Vt,3)?1:0,wr==1?f(nt,oe,De,Te,{x:Ct,y:Vt,width:pt,height:Ht}):e(nt,oe,De,Te,pt,Ht,-Ct,-Vt,0)}else Te=nt.slice(0);ae.push({rect:{x:Ct,y:Vt,width:pt,height:Ht},img:Te,blend:wr,dispose:0})}if(tt)for(we=0;we<ae.length;we++){if((He=ae[we]).blend==1)continue;const nt=He.rect,Y=ae[we-1].rect,Ct=Math.min(nt.x,Y.x),Vt=Math.min(nt.y,Y.y),pt={x:Ct,y:Vt,width:Math.max(nt.x+nt.width,Y.x+Y.width)-Ct,height:Math.max(nt.y+nt.height,Y.y+Y.height)-Vt};ae[we-1].dispose=1,we-1!=0&&h(Re,oe,De,ae,we-1,pt,Qe),h(Re,oe,De,ae,we,pt,Qe)}let Ke=0;if(Re.length!=1)for(var Ge=0;Ge<ae.length;Ge++){var He;Ke+=(He=ae[Ge]).rect.width*He.rect.height}return ae}(C,A,R,$,D,q),J={},ie=[],X=[];if(k!=0){const Ee=[];for(G=0;G<se.length;G++)Ee.push(se[G].img.buffer);const Re=function(Qe){let xe=0;for(var ae=0;ae<Qe.length;ae++)xe+=Qe[ae].byteLength;const we=new Uint8Array(xe);let Te=0;for(ae=0;ae<Qe.length;ae++){const qe=new Uint8Array(Qe[ae]),Ke=qe.length;for(let Ge=0;Ge<Ke;Ge+=4){let He=qe[Ge],nt=qe[Ge+1],Y=qe[Ge+2];const Ct=qe[Ge+3];Ct==0&&(He=nt=Y=0),we[Te+Ge]=He,we[Te+Ge+1]=nt,we[Te+Ge+2]=Y,we[Te+Ge+3]=Ct}Te+=Ke}return we.buffer}(Ee),oe=g(Re,k);for(G=0;G<oe.plte.length;G++)ie.push(oe.plte[G].est.rgba);let De=0;for(G=0;G<se.length;G++){const tt=(fe=se[G]).img.length;var he=new Uint8Array(oe.inds.buffer,De>>2,tt>>2);X.push(he);const Qe=new Uint8Array(oe.abuf,De,tt);V&&l(fe.img,fe.rect.width,fe.rect.height,ie,Qe,he),fe.img.set(Qe),De+=tt}}else for(F=0;F<se.length;F++){var fe=se[F];const Ee=new Uint32Array(fe.img.buffer);var Q=fe.rect.width;for(W=Ee.length,he=new Uint8Array(W),X.push(he),G=0;G<W;G++){const Re=Ee[G];if(G!=0&&Re==Ee[G-1])he[G]=he[G-1];else if(G>Q&&Re==Ee[G-Q])he[G]=he[G-Q];else{let oe=J[Re];if(oe==null&&(J[Re]=oe=ie.length,ie.push(Re),ie.length>=300))break;he[G]=oe}}}const Oe=ie.length;for(Oe<=256&&L==0&&(z=Oe<=2?1:Oe<=4?2:Oe<=16?4:8,z=Math.max(z,M)),F=0;F<se.length;F++){(fe=se[F]).rect.x,fe.rect.y,Q=fe.rect.width;const Ee=fe.rect.height;let Re=fe.img;new Uint32Array(Re.buffer);let oe=4*Q,De=4;if(Oe<=256&&L==0){oe=Math.ceil(z*Q/8);var ve=new Uint8Array(oe*Ee);const tt=X[F];for(let Qe=0;Qe<Ee;Qe++){G=Qe*oe;const xe=Qe*Q;if(z==8)for(var ee=0;ee<Q;ee++)ve[G+ee]=tt[xe+ee];else if(z==4)for(ee=0;ee<Q;ee++)ve[G+(ee>>1)]|=tt[xe+ee]<<4-4*(1&ee);else if(z==2)for(ee=0;ee<Q;ee++)ve[G+(ee>>2)]|=tt[xe+ee]<<6-2*(3&ee);else if(z==1)for(ee=0;ee<Q;ee++)ve[G+(ee>>3)]|=tt[xe+ee]<<7-1*(7&ee)}Re=ve,P=3,De=1}else if(H==0&&se.length==1){ve=new Uint8Array(Q*Ee*3);const tt=Q*Ee;for(G=0;G<tt;G++){const Qe=3*G,xe=4*G;ve[Qe]=Re[xe],ve[Qe+1]=Re[xe+1],ve[Qe+2]=Re[xe+2]}Re=ve,P=2,De=3,oe=3*Q}fe.img=Re,fe.bpl=oe,fe.bpp=De}return{ctype:P,depth:z,plte:ie,frames:se}}function h(C,A,R,k,O,$,D){const q=Uint8Array,M=Uint32Array,L=new q(C[O-1]),V=new M(C[O-1]),P=O+1<C.length?new q(C[O+1]):null,z=new q(C[O]),Z=new M(z.buffer);let F=A,W=R,G=-1,H=-1;for(let J=0;J<$.height;J++)for(let ie=0;ie<$.width;ie++){const X=$.x+ie,he=$.y+J,fe=he*A+X,Q=Z[fe];Q==0||k[O-1].dispose==0&&V[fe]==Q&&(P==null||P[4*fe+3]!=0)||(X<F&&(F=X),X>G&&(G=X),he<W&&(W=he),he>H&&(H=he))}G==-1&&(F=W=G=H=0),D&&((1&F)==1&&F--,(1&W)==1&&W--),$={x:F,y:W,width:G-F+1,height:H-W+1};const se=k[O];se.rect=$,se.blend=1,se.img=new Uint8Array($.width*$.height*4),k[O-1].dispose==0?(e(L,A,R,se.img,$.width,$.height,-$.x,-$.y,0),f(z,A,R,se.img,$)):e(z,A,R,se.img,$.width,$.height,-$.x,-$.y,0)}function f(C,A,R,k,O){e(C,A,R,k,O.width,O.height,-O.x,-O.y,2)}function m(C,A,R,k,O,$,D){const q=[];let M,L=[0,1,2,3,4];$!=-1?L=[$]:(A*k>5e5||R==1)&&(L=[0]),D&&(M={level:0});const V=kDe;for(var P=0;P<L.length;P++){for(let F=0;F<A;F++)p(O,C,F,k,R,L[P]);q.push(V.deflate(O,M))}let z,Z=1e9;for(P=0;P<q.length;P++)q[P].length<Z&&(z=P,Z=q[P].length);return q[z]}function p(C,A,R,k,O,$){const D=R*k;let q=D+R;if(C[q]=$,q++,$==0)if(k<500)for(var M=0;M<k;M++)C[q+M]=A[D+M];else C.set(new Uint8Array(A.buffer,D,k),q);else if($==1){for(M=0;M<O;M++)C[q+M]=A[D+M];for(M=O;M<k;M++)C[q+M]=A[D+M]-A[D+M-O]+256&255}else if(R==0){for(M=0;M<O;M++)C[q+M]=A[D+M];if($==2)for(M=O;M<k;M++)C[q+M]=A[D+M];if($==3)for(M=O;M<k;M++)C[q+M]=A[D+M]-(A[D+M-O]>>1)+256&255;if($==4)for(M=O;M<k;M++)C[q+M]=A[D+M]-n(A[D+M-O],0,0)+256&255}else{if($==2)for(M=0;M<k;M++)C[q+M]=A[D+M]+256-A[D+M-k]&255;if($==3){for(M=0;M<O;M++)C[q+M]=A[D+M]+256-(A[D+M-k]>>1)&255;for(M=O;M<k;M++)C[q+M]=A[D+M]+256-(A[D+M-k]+A[D+M-O]>>1)&255}if($==4){for(M=0;M<O;M++)C[q+M]=A[D+M]+256-n(0,A[D+M-k],0)&255;for(M=O;M<k;M++)C[q+M]=A[D+M]+256-n(A[D+M-O],A[D+M-k],A[D+M-O-k])&255}}}function g(C,A){const R=new Uint8Array(C),k=R.slice(0),O=new Uint32Array(k.buffer),$=v(k,A),D=$[0],q=$[1],M=R.length,L=new Uint8Array(M>>2);let V;if(R.length<2e7)for(var P=0;P<M;P+=4)V=x(D,z=R[P]*(1/255),Z=R[P+1]*(1/255),F=R[P+2]*(1/255),W=R[P+3]*(1/255)),L[P>>2]=V.ind,O[P>>2]=V.est.rgba;else for(P=0;P<M;P+=4){var z=R[P]*.00392156862745098,Z=R[P+1]*(1/255),F=R[P+2]*(1/255),W=R[P+3]*(1/255);for(V=D;V.left;)V=y(V.est,z,Z,F,W)<=0?V.left:V.right;L[P>>2]=V.ind,O[P>>2]=V.est.rgba}return{abuf:k.buffer,inds:L,plte:q}}function v(C,A,R){R==null&&(R=1e-4);const k=new Uint32Array(C.buffer),O={i0:0,i1:C.length,bst:null,est:null,tdst:0,left:null,right:null};O.bst=N(C,O.i0,O.i1),O.est=S(O.bst);const $=[O];for(;$.length<A;){let q=0,M=0;for(var D=0;D<$.length;D++)$[D].est.L>q&&(q=$[D].est.L,M=D);if(q<R)break;const L=$[M],V=j(C,k,L.i0,L.i1,L.est.e,L.est.eMq255);if(L.i0>=V||L.i1<=V){L.est.L=0;continue}const P={i0:L.i0,i1:V,bst:null,est:null,tdst:0,left:null,right:null};P.bst=N(C,P.i0,P.i1),P.est=S(P.bst);const z={i0:V,i1:L.i1,bst:null,est:null,tdst:0,left:null,right:null};for(z.bst={R:[],m:[],N:L.bst.N-P.bst.N},D=0;D<16;D++)z.bst.R[D]=L.bst.R[D]-P.bst.R[D];for(D=0;D<4;D++)z.bst.m[D]=L.bst.m[D]-P.bst.m[D];z.est=S(z.bst),L.left=P,L.right=z,$[M]=P,$.push(z)}for($.sort((q,M)=>M.bst.N-q.bst.N),D=0;D<$.length;D++)$[D].ind=D;return[O,$]}function x(C,A,R,k,O){if(C.left==null)return C.tdst=function(P,z,Z,F,W){const G=z-P[0],H=Z-P[1],se=F-P[2],J=W-P[3];return G*G+H*H+se*se+J*J}(C.est.q,A,R,k,O),C;const $=y(C.est,A,R,k,O);let D=C.left,q=C.right;$>0&&(D=C.right,q=C.left);const M=x(D,A,R,k,O);if(M.tdst<=$*$)return M;const L=x(q,A,R,k,O);return L.tdst<M.tdst?L:M}function y(C,A,R,k,O){const{e:$}=C;return $[0]*A+$[1]*R+$[2]*k+$[3]*O-C.eMq}function j(C,A,R,k,O,$){for(k-=4;R<k;){for(;w(C,R,O)<=$;)R+=4;for(;w(C,k,O)>$;)k-=4;if(R>=k)break;const D=A[R>>2];A[R>>2]=A[k>>2],A[k>>2]=D,R+=4,k-=4}for(;w(C,R,O)>$;)R-=4;return R+4}function w(C,A,R){return C[A]*R[0]+C[A+1]*R[1]+C[A+2]*R[2]+C[A+3]*R[3]}function N(C,A,R){const k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O=[0,0,0,0],$=R-A>>2;for(let D=A;D<R;D+=4){const q=C[D]*.00392156862745098,M=C[D+1]*(1/255),L=C[D+2]*(1/255),V=C[D+3]*(1/255);O[0]+=q,O[1]+=M,O[2]+=L,O[3]+=V,k[0]+=q*q,k[1]+=q*M,k[2]+=q*L,k[3]+=q*V,k[5]+=M*M,k[6]+=M*L,k[7]+=M*V,k[10]+=L*L,k[11]+=L*V,k[15]+=V*V}return k[4]=k[1],k[8]=k[2],k[9]=k[6],k[12]=k[3],k[13]=k[7],k[14]=k[11],{R:k,m:O,N:$}}function S(C){const{R:A}=C,{m:R}=C,{N:k}=C,O=R[0],$=R[1],D=R[2],q=R[3],M=k==0?0:1/k,L=[A[0]-O*O*M,A[1]-O*$*M,A[2]-O*D*M,A[3]-O*q*M,A[4]-$*O*M,A[5]-$*$*M,A[6]-$*D*M,A[7]-$*q*M,A[8]-D*O*M,A[9]-D*$*M,A[10]-D*D*M,A[11]-D*q*M,A[12]-q*O*M,A[13]-q*$*M,A[14]-q*D*M,A[15]-q*q*M],V=L,P=T;let z=[Math.random(),Math.random(),Math.random(),Math.random()],Z=0,F=0;if(k!=0)for(let G=0;G<16&&(z=P.multVec(V,z),F=Math.sqrt(P.dot(z,z)),z=P.sml(1/F,z),!(G!=0&&Math.abs(F-Z)<1e-9));G++)Z=F;const W=[O*M,$*M,D*M,q*M];return{Cov:L,q:W,e:z,L:Z,eMq255:P.dot(P.sml(255,W),z),eMq:P.dot(z,W),rgba:(Math.round(255*W[3])<<24|Math.round(255*W[2])<<16|Math.round(255*W[1])<<8|Math.round(255*W[0])<<0)>>>0}}var T={multVec:(C,A)=>[C[0]*A[0]+C[1]*A[1]+C[2]*A[2]+C[3]*A[3],C[4]*A[0]+C[5]*A[1]+C[6]*A[2]+C[7]*A[3],C[8]*A[0]+C[9]*A[1]+C[10]*A[2]+C[11]*A[3],C[12]*A[0]+C[13]*A[1]+C[14]*A[2]+C[15]*A[3]],dot:(C,A)=>C[0]*A[0]+C[1]*A[1]+C[2]*A[2]+C[3]*A[3],sml:(C,A)=>[C*A[0],C*A[1],C*A[2],C*A[3]]};Od.encode=function(A,R,k,O,$,D,q){O==null&&(O=0),q==null&&(q=!1);const M=u(A,R,k,O,[!1,!1,!1,0,q,!1]);return d(M,-1),c(M,R,k,$,D)},Od.encodeLL=function(A,R,k,O,$,D,q,M){const L={ctype:0+(O==1?0:2)+($==0?0:4),depth:D,frames:[]},V=(O+$)*D,P=V*R;for(let z=0;z<A.length;z++)L.frames.push({rect:{x:0,y:0,width:R,height:k},img:new Uint8Array(A[z]),blend:0,dispose:1,bpp:Math.ceil(V/8),bpl:Math.ceil(P/8)});return d(L,0,!0),c(L,R,k,q,M)},Od.encode.compress=u,Od.encode.dither=l,Od.quantize=g,Od.quantize.getKDtree=v,Od.quantize.getNearest=x})();const sle={toArrayBuffer(e,t){const n=e.width,s=e.height,i=n<<2,a=e.getContext("2d").getImageData(0,0,n,s),o=new Uint32Array(a.data.buffer),l=(32*n+31)/32<<2,c=l*s,d=122+c,u=new ArrayBuffer(d),h=new DataView(u),f=1<<20;let m,p,g,v,x=f,y=0,j=0,w=0;function N(C){h.setUint16(j,C,!0),j+=2}function S(C){h.setUint32(j,C,!0),j+=4}function T(C){j+=C}N(19778),S(d),T(4),S(122),S(108),S(n),S(-s>>>0),N(1),N(32),S(3),S(c),S(2835),S(2835),T(8),S(16711680),S(65280),S(255),S(4278190080),S(1466527264),function C(){for(;y<s&&x>0;){for(v=122+y*l,m=0;m<i;)x--,p=o[w++],g=p>>>24,h.setUint32(v+m,p<<8|g),m+=4;y++}w<o.length?(x=f,setTimeout(C,sle._dly)):t(u)}()},toBlob(e,t){this.toArrayBuffer(e,n=>{t(new Blob([n],{type:"image/bmp"}))})},_dly:9};var yl={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},PDe={[yl.CHROME]:16384,[yl.FIREFOX]:11180,[yl.DESKTOP_SAFARI]:16384,[yl.IE]:8192,[yl.IOS]:4096,[yl.ETC]:8192};const O6=typeof window<"u",ile=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,aS=O6&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),TDe=(O6||ile)&&(aS&&aS.getOriginalSymbol(window,"File")||typeof File<"u"&&File),ale=(O6||ile)&&(aS&&aS.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function R6(e,t,n=Date.now()){return new Promise(s=>{const i=e.split(","),a=i[0].match(/:(.*?);/)[1],o=globalThis.atob(i[1]);let l=o.length;const c=new Uint8Array(l);for(;l--;)c[l]=o.charCodeAt(l);const d=new Blob([c],{type:a});d.name=t,d.lastModified=n,s(d)})}function ole(e){return new Promise((t,n)=>{const s=new ale;s.onload=()=>t(s.result),s.onerror=i=>n(i),s.readAsDataURL(e)})}function lle(e){return new Promise((t,n)=>{const s=new Image;s.onload=()=>t(s),s.onerror=i=>n(i),s.src=e})}function eg(){if(eg.cachedResult!==void 0)return eg.cachedResult;let e=yl.ETC;const{userAgent:t}=navigator;return/Chrom(e|ium)/i.test(t)?e=yl.CHROME:/iP(ad|od|hone)/i.test(t)&&/WebKit/i.test(t)?e=yl.IOS:/Safari/i.test(t)?e=yl.DESKTOP_SAFARI:/Firefox/i.test(t)?e=yl.FIREFOX:(/MSIE/i.test(t)||document.documentMode)&&(e=yl.IE),eg.cachedResult=e,eg.cachedResult}function cle(e,t){const n=eg(),s=PDe[n];let i=e,a=t,o=i*a;const l=i>a?a/i:i/a;for(;o>s*s;){const c=(s+i)/2,d=(s+a)/2;c<d?(a=d,i=d*l):(a=c*l,i=c),o=i*a}return{width:i,height:a}}function TC(e,t){let n,s;try{if(n=new OffscreenCanvas(e,t),s=n.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{n=document.createElement("canvas"),s=n.getContext("2d")}return n.width=e,n.height=t,[n,s]}function dle(e,t){const{width:n,height:s}=cle(e.width,e.height),[i,a]=TC(n,s);return t&&/jpe?g/.test(t)&&(a.fillStyle="white",a.fillRect(0,0,i.width,i.height)),a.drawImage(e,0,0,i.width,i.height),i}function IN(){return IN.cachedResult!==void 0||(IN.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),IN.cachedResult}function oS(e,t={}){return new Promise(function(n,s){let i,a;var o=function(){try{return a=dle(i,t.fileType||e.type),n([i,a])}catch(c){return s(c)}},l=function(c){try{var d=function(u){try{throw u}catch(h){return s(h)}};try{let u;return ole(e).then(function(h){try{return u=h,lle(u).then(function(f){try{return i=f,function(){try{return o()}catch(m){return s(m)}}()}catch(m){return d(m)}},d)}catch(f){return d(f)}},d)}catch(u){d(u)}}catch(u){return s(u)}};try{if(IN()||[yl.DESKTOP_SAFARI,yl.MOBILE_SAFARI].includes(eg()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(c){try{return i=c,o()}catch{return l()}},l)}catch{l()}})}function lS(e,t,n,s,i=1){return new Promise(function(a,o){let l;if(t==="image/png"){let d,u,h;return d=e.getContext("2d"),{data:u}=d.getImageData(0,0,e.width,e.height),h=Od.encode([u.buffer],e.width,e.height,4096*i),l=new Blob([h],{type:t}),l.name=n,l.lastModified=s,c.call(this)}{let d=function(){return c.call(this)};if(t==="image/bmp")return new Promise(u=>sle.toBlob(e,u)).then((function(u){try{return l=u,l.name=n,l.lastModified=s,d.call(this)}catch(h){return o(h)}}).bind(this),o);{let u=function(){return d.call(this)};if(typeof OffscreenCanvas=="function"&&e instanceof OffscreenCanvas)return e.convertToBlob({type:t,quality:i}).then((function(h){try{return l=h,l.name=n,l.lastModified=s,u.call(this)}catch(f){return o(f)}}).bind(this),o);{let h;return h=e.toDataURL(t,i),R6(h,n,s).then((function(f){try{return l=f,u.call(this)}catch(m){return o(m)}}).bind(this),o)}}}function c(){return a(l)}})}function Vu(e){e.width=0,e.height=0}function Qx(){return new Promise(function(e,t){let n,s,i,a;return Qx.cachedResult!==void 0?e(Qx.cachedResult):R6("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(o){try{return n=o,oS(n).then(function(l){try{return s=l[1],lS(s,n.type,n.name,n.lastModified).then(function(c){try{return i=c,Vu(s),oS(i).then(function(d){try{return a=d[0],Qx.cachedResult=a.width===1&&a.height===2,e(Qx.cachedResult)}catch(u){return t(u)}},t)}catch(d){return t(d)}},t)}catch(c){return t(c)}},t)}catch(l){return t(l)}},t)})}function ule(e){return new Promise((t,n)=>{const s=new ale;s.onload=i=>{const a=new DataView(i.target.result);if(a.getUint16(0,!1)!=65496)return t(-2);const o=a.byteLength;let l=2;for(;l<o;){if(a.getUint16(l+2,!1)<=8)return t(-1);const c=a.getUint16(l,!1);if(l+=2,c==65505){if(a.getUint32(l+=2,!1)!=1165519206)return t(-1);const d=a.getUint16(l+=6,!1)==18761;l+=a.getUint32(l+4,d);const u=a.getUint16(l,d);l+=2;for(let h=0;h<u;h++)if(a.getUint16(l+12*h,d)==274)return t(a.getUint16(l+12*h+8,d))}else{if((65280&c)!=65280)break;l+=a.getUint16(l,!1)}}return t(-1)},s.onerror=i=>n(i),s.readAsArrayBuffer(e)})}function hle(e,t){const{width:n}=e,{height:s}=e,{maxWidthOrHeight:i}=t;let a,o=e;return isFinite(i)&&(n>i||s>i)&&([o,a]=TC(n,s),n>s?(o.width=i,o.height=s/n*i):(o.width=n/s*i,o.height=i),a.drawImage(e,0,0,o.width,o.height),Vu(e)),o}function fle(e,t){const{width:n}=e,{height:s}=e,[i,a]=TC(n,s);switch(t>4&&t<9?(i.width=s,i.height=n):(i.width=n,i.height=s),t){case 2:a.transform(-1,0,0,1,n,0);break;case 3:a.transform(-1,0,0,-1,n,s);break;case 4:a.transform(1,0,0,-1,0,s);break;case 5:a.transform(0,1,1,0,0,0);break;case 6:a.transform(0,1,-1,0,s,0);break;case 7:a.transform(0,-1,-1,0,s,n);break;case 8:a.transform(0,-1,1,0,0,n)}return a.drawImage(e,0,0,n,s),Vu(e),i}function hB(e,t,n=0){return new Promise(function(s,i){let a,o,l,c,d,u,h,f,m,p,g,v,x,y,j,w,N,S,T,C;function A(k=5){if(t.signal&&t.signal.aborted)throw t.signal.reason;a+=k,t.onProgress(Math.min(a,100))}function R(k){if(t.signal&&t.signal.aborted)throw t.signal.reason;a=Math.min(Math.max(k,a),100),t.onProgress(a)}return a=n,o=t.maxIteration||10,l=1024*t.maxSizeMB*1024,A(),oS(e,t).then((function(k){try{return[,c]=k,A(),d=hle(c,t),A(),new Promise(function(O,$){var D;if(!(D=t.exifOrientation))return ule(e).then((function(M){try{return D=M,q.call(this)}catch(L){return $(L)}}).bind(this),$);function q(){return O(D)}return q.call(this)}).then((function(O){try{return u=O,A(),Qx().then((function($){try{return h=$?d:fle(d,u),A(),f=t.initialQuality||1,m=t.fileType||e.type,lS(h,m,e.name,e.lastModified,f).then((function(D){try{{let M=function(){if(o--&&(j>l||j>x)){let V,P;return V=C?.95*T.width:T.width,P=C?.95*T.height:T.height,[N,S]=TC(V,P),S.drawImage(T,0,0,V,P),f*=m==="image/png"?.85:.95,lS(N,m,e.name,e.lastModified,f).then(function(z){try{return w=z,Vu(T),T=N,j=w.size,R(Math.min(99,Math.floor((y-j)/(y-l)*100))),M}catch(Z){return i(Z)}},i)}return[1]},L=function(){return Vu(T),Vu(N),Vu(d),Vu(h),Vu(c),R(100),s(w)};if(p=D,A(),g=p.size>l,v=p.size>e.size,!g&&!v)return R(100),s(p);var q;return x=e.size,y=p.size,j=y,T=h,C=!t.alwaysKeepResolution&&g,(q=(function(V){for(;V;){if(V.then)return void V.then(q,i);try{if(V.pop){if(V.length)return V.pop()?L.call(this):V;V=M}else V=V.call(this)}catch(P){return i(P)}}}).bind(this))(M)}}catch(M){return i(M)}}).bind(this),i)}catch(D){return i(D)}}).bind(this),i)}catch($){return i($)}}).bind(this),i)}catch(O){return i(O)}}).bind(this),i)})}const EDe=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let T4;function ODe(e,t){return new Promise((n,s)=>{T4||(T4=function(o){const l=[];return l.push(o),URL.createObjectURL(new Blob(l))}(EDe));const i=new Worker(T4);i.addEventListener("message",function(o){if(t.signal&&t.signal.aborted)i.terminate();else if(o.data.progress===void 0){if(o.data.error)return s(new Error(o.data.error)),void i.terminate();n(o.data.file),i.terminate()}else t.onProgress(o.data.progress)}),i.addEventListener("error",s),t.signal&&t.signal.addEventListener("abort",()=>{s(t.signal.reason),i.terminate()}),i.postMessage({file:e,imageCompressionLibUrl:t.libURL,options:{...t,onProgress:void 0,signal:void 0}})})}function bo(e,t){return new Promise(function(n,s){let i,a,o,l,c,d;if(i={...t},o=0,{onProgress:l}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,c=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=m=>{o=m,typeof l=="function"&&l(o)},!(e instanceof Blob||e instanceof TDe))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return s(new Error("The file given is not an image"));if(d=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!c||typeof Worker!="function"||d)return hB(e,i).then((function(m){try{return a=m,f.call(this)}catch(p){return s(p)}}).bind(this),s);var u=(function(){try{return f.call(this)}catch(m){return s(m)}}).bind(this),h=function(m){try{return hB(e,i).then(function(p){try{return a=p,u()}catch(g){return s(g)}},s)}catch(p){return s(p)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",ODe(e,i).then(function(m){try{return a=m,u()}catch{return h()}},h)}catch{h()}function f(){try{a.name=e.name,a.lastModified=e.lastModified}catch{}try{i.preserveExif&&e.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(a=nle(e,a))}catch{}return n(a)}})}bo.getDataUrlFromFile=ole,bo.getFilefromDataUrl=R6,bo.loadImage=lle,bo.drawImageInCanvas=dle,bo.drawFileInCanvas=oS,bo.canvasToFile=lS,bo.getExifOrientation=ule,bo.handleMaxWidthOrHeight=hle,bo.followExifOrientation=fle,bo.cleanupCanvasMemory=Vu,bo.isAutoOrientationInBrowser=Qx,bo.approximateBelowMaximumCanvasSizeOfBrowser=cle,bo.copyExifWithoutOrientation=nle,bo.getBrowserName=eg,bo.version="2.0.2";function Wc({label:e,accept:t,multiple:n=!1,maxFiles:s=1,fileType:i="document",category:a="documents",onUploadComplete:o,existingFiles:l=[],className:c="",isMissing:d=!1,showDescription:u=!1,hideNote:h=!1}){const{toast:f}=Tr(),m=b.useRef(null),[p,g]=b.useState(!1),[v,x]=b.useState(""),[y,j]=b.useState(l),{data:w}=rt({queryKey:["/api/settings/upload-policy"],staleTime:5*60*1e3}),N=w??PC,S=N[a],T=b.useMemo(()=>new Set(S.allowedMimeTypes.map(J=>J.toLowerCase())),[S.allowedMimeTypes]),C=b.useMemo(()=>new Set(S.allowedExtensions.map(J=>J.toLowerCase())),[S.allowedExtensions]),A=N.documents,R=N.photos,k=.5,O=b.useMemo(()=>{const J=new Set;if(S.allowedExtensions.forEach(ie=>{ie&&typeof ie=="string"&&J.add(ie.toLowerCase())}),S.allowedMimeTypes.forEach(ie=>{ie&&typeof ie=="string"&&J.add(ie.toLowerCase())}),J.size!==0)return Array.from(J).join(",")},[S.allowedExtensions,S.allowedMimeTypes]),$=t??O,D=J=>{const ie=J.lastIndexOf(".");return ie===-1||ie===J.length-1?"":J.slice(ie).toLowerCase()},q=J=>(J||"").split(";")[0].trim().toLowerCase(),M={".pdf":["application/pdf"],".jpg":["image/jpeg","image/jpg"],".jpeg":["image/jpeg","image/jpg"],".png":["image/png"],".gif":["image/gif"],".webp":["image/webp"]},L=J=>{const ie=q(J);if(t){const X=t.split(",").filter(he=>he.startsWith(".")).map(he=>he.toLowerCase().trim());if(X.length>0){const he=new Set;return X.forEach(fe=>{const Q=M[fe];Q&&Q.forEach(Oe=>he.add(Oe))}),he.size>0?he.has(ie):!0}}return ie?!!(T.size===0||T.has(ie)||ie==="image/jpg"&&T.has("image/jpeg")):T.size===0},V=J=>{if(t){const ie=t.split(",").filter(X=>X.startsWith(".")).map(X=>X.toLowerCase().trim());if(ie.length>0)return ie.includes(J.toLowerCase())}return C.size?C.has(J.toLowerCase()):!0},P=(J,ie)=>{try{const X=/^https?:\/\//i.test(J),he=new URL(J,X?void 0:window.location.origin);return Object.entries(ie).forEach(([fe,Q])=>{Q&&he.searchParams.set(fe,Q)}),X?he.toString():`${he.pathname}${he.search}${he.hash}`}catch{return J}},z=J=>{if(!Number.isFinite(J)||J<=0)return"0 B";const ie=["B","KB","MB","GB"],X=Math.min(Math.floor(Math.log(J)/Math.log(1024)),ie.length-1),he=J/Math.pow(1024,X);return`${he%1===0?he:he.toFixed(1)} ${ie[X]}`};b.useEffect(()=>{j(l)},[l]);const Z=async J=>{const ie=Array.from(J.target.files||[]);if(ie.length===0)return;const X=s-y.length;if(ie.length>X){f({title:"Too many files",description:`You can only upload ${X} more file(s)`,variant:"destructive"}),J.target.value="";return}const he=[],fe=[];g(!0);for(const Q of ie){x(`Processing ${Q.name}...`);const Oe=D(Q.name),ve=q(Q.type)||"application/octet-stream";let ee=!1;const Ee=ve==="application/pdf",Re=ve.startsWith("image/");if(Ee){const oe=A.maxFileSizeMB;Q.size<=oe*1024*1024?ee=!0:fe.push(`Oops! ${Q.name} is too large (${z(Q.size)}). Please keep PDF documents under ${oe}MB.`)}else if(Re){const oe=R.maxFileSizeMB;Q.size<=oe*1024*1024?ee=!0:fe.push(`That photo is a bit too heavy! ${Q.name} is ${z(Q.size)}. Please use an image under ${oe}MB.`)}else Q.size<=S.maxFileSizeMB*1024*1024?ee=!0:fe.push(`${Q.name} exceeds the ${S.maxFileSizeMB}MB limit.`);if(ee){if(!V(Oe)){fe.push(`Sorry, we can't accept ${Q.name}. Please try a valid file type.`);continue}if(!L(ve)){fe.push(`Sorry, the file type of ${Q.name} isn't supported.`);continue}if(Re)try{if(Q.size<=k*1024*1024){he.push(Q);continue}const De=await bo(Q,{maxSizeMB:k,maxWidthOrHeight:1920,useWebWorker:!0}),tt=new File([De],Q.name,{type:Q.type,lastModified:Date.now()});he.push(tt)}catch(oe){console.error("Compression failed:",oe),fe.push(`Failed to compress ${Q.name}. Please try a smaller image.`)}else he.push(Q)}}if(x(""),fe.length>0&&f({title:"Some files were skipped",description:fe.join(`
`),variant:"destructive"}),he.length===0){g(!1),J.target.value="";return}try{const Q=[];for(const ve of he){x(`Uploading ${ve.name}...`);const ee=q(ve.type)||"application/octet-stream",Ee=new URLSearchParams({fileType:i,category:a,fileName:ve.name,fileSize:ve.size.toString(),mimeType:ee}),Re=await fetch(`/api/upload-url?${Ee.toString()}`,{credentials:"include"});if(!Re.ok){const xe=await Re.text();throw new Error(xe||`Failed to prepare upload for ${ve.name}`)}const{uploadUrl:oe,filePath:De}=await Re.json(),tt=oe.startsWith("/api/local-object/upload")?P(oe,{category:a,name:ve.name,size:ve.size.toString(),mime:ee}):oe,Qe=await fetch(tt,{method:"PUT",body:ve,credentials:"include",headers:{"Content-Type":ee}});if(!Qe.ok){const xe=await Qe.text();throw new Error(xe||`Failed to upload ${ve.name}`)}Q.push({filePath:De,fileName:ve.name,fileSize:ve.size,mimeType:ee})}const Oe=[...y,...Q];j(Oe),o(Oe),f({title:"Upload successful",description:`${Q.length} file(s) uploaded successfully`})}catch(Q){console.error("Upload error:",Q),f({title:"Upload failed",description:Q instanceof Error?Q.message:"Failed to upload files",variant:"destructive"})}finally{g(!1),x(""),J.target.value=""}},F=J=>{const ie=y.filter((X,he)=>he!==J);j(ie),o(ie)},W=(J,ie)=>{const X=[...y];X[J]={...X[J],description:ie},j(X),o(X)},G=J=>{if(J===0)return"0 B";const ie=1024,X=["B","KB","MB","GB"],he=Math.floor(Math.log(J)/Math.log(ie));return Math.round(J/Math.pow(ie,he)*100)/100+" "+X[he]},H=y.length>0,se=H?y.length<s?"Add More":"Replace":e;return r.jsxs("div",{className:c,children:[r.jsx("div",{className:"space-y-2",children:H&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Current Documents:"}),y.map((J,ie)=>r.jsx("div",{className:"border rounded-md bg-card",children:r.jsxs("div",{className:`flex items-center justify-between p-3 gap-3 ${u?"flex-wrap md:flex-nowrap":""}`,children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 shrink-0",children:[r.jsx(ir,{className:"w-5 h-5 text-primary flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("span",{className:"text-sm font-medium truncate block max-w-[150px]",children:J.fileName}),r.jsx("span",{className:"text-xs text-muted-foreground",children:G(J.fileSize)})]})]}),u&&r.jsx("div",{className:"flex-1 min-w-[200px]",children:r.jsx("input",{type:"text",placeholder:"Document Info",value:J.description||"",onChange:X=>W(ie,X.target.value),className:"w-full text-sm border border-gray-300 rounded-md px-3 py-1.5 focus:border-primary focus:ring-1 focus:ring-primary focus:outline-none bg-gray-50 placeholder:text-gray-400"})}),r.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.jsx(te,{type:"button",variant:"outline",size:"sm",asChild:!0,"data-testid":`button-view-file-${ie}`,children:r.jsx("a",{href:`/api/object-storage/view?path=${encodeURIComponent(J.filePath)}&mime=${encodeURIComponent(J.mimeType)}&filename=${encodeURIComponent(J.fileName)}`,target:"_blank",rel:"noopener noreferrer",children:"View"})}),r.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>F(ie),"data-testid":`button-remove-file-${ie}`,children:r.jsx(sh,{className:"w-4 h-4"})})]})]})},ie))]})}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{type:"button",variant:H?"secondary":"outline",className:d?"border-orange-400 text-orange-600 hover:text-orange-700 hover:border-orange-500":"",onClick:()=>{var J;return(J=m.current)==null?void 0:J.click()},disabled:p||y.length>=s,"data-testid":`button-upload-${e.toLowerCase().replace(/\s+/g,"-")}`,children:p?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),v||"Uploading..."]}):r.jsxs(r.Fragment,{children:[r.jsx(e0,{className:"w-4 h-4 mr-2"}),se]})}),y.length>0&&r.jsxs("span",{className:"text-sm text-muted-foreground",children:[y.length," / ",s," file(s)"]})]}),!h&&r.jsx("p",{className:"text-xs text-muted-foreground ml-1",children:"Note: Documents max 5MB (PDF). Photos max 10MB (we'll automatically optimize them for you!)."})]}),r.jsx("input",{ref:m,type:"file",accept:$,multiple:n,onChange:Z,className:"hidden"})]})}var D6="Progress",M6=100,[RDe]=oa(D6),[DDe,MDe]=RDe(D6),mle=b.forwardRef((e,t)=>{const{__scopeProgress:n,value:s=null,max:i,getValueLabel:a=IDe,...o}=e;(i||i===0)&&!fB(i)&&console.error(LDe(`${i}`,"Progress"));const l=fB(i)?i:M6;s!==null&&!mB(s,l)&&console.error(FDe(`${s}`,"Progress"));const c=mB(s,l)?s:null,d=cS(c)?a(c,l):void 0;return r.jsx(DDe,{scope:n,value:c,max:l,children:r.jsx(ar.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":cS(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":xle(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});mle.displayName=D6;var ple="ProgressIndicator",gle=b.forwardRef((e,t)=>{const{__scopeProgress:n,...s}=e,i=MDe(ple,n);return r.jsx(ar.div,{"data-state":xle(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...s,ref:t})});gle.displayName=ple;function IDe(e,t){return`${Math.round(e/t*100)}%`}function xle(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function cS(e){return typeof e=="number"}function fB(e){return cS(e)&&!isNaN(e)&&e>0}function mB(e,t){return cS(e)&&!isNaN(e)&&e<=t&&e>=0}function LDe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${M6}\`.`}function FDe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${M6} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vle=mle,$De=gle;const f0=b.forwardRef(({className:e,value:t,...n},s)=>r.jsx(vle,{ref:s,className:Xe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:r.jsx($De,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));f0.displayName=vle.displayName;function BDe({uploadedDocuments:e,setUploadedDocuments:t,propertyPhotos:n,setPropertyPhotos:s,additionalDocuments:i,setAdditionalDocuments:a,requiresCommercialUtilityProof:o,isCorrection:l=!1,correctionNotes:c,applicationKind:d,isLegacyRC:u=!1}){const h=d==="delete_rooms",{data:f}=rt({queryKey:["/api/settings/upload-policy"],staleTime:5*60*1e3}),m=f??PC,p=m.documents.maxFileSizeMB,g=m.photos.maxFileSizeMB,v=u?1:o?6:4;let x=0;u?i.length>0&&x++:(e.revenuePapers.length>0&&x++,e.affidavitSection29.length>0&&x++,e.undertakingFormC.length>0&&x++,n.length>=2&&x++,o&&(e.commercialElectricityBill.length>0&&x++,e.commercialWaterBill.length>0&&x++));const y=x/v*100;return r.jsxs("div",{className:"space-y-4",children:[r.jsx(me,{className:"shadow-sm",children:r.jsxs(ge,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Document Upload Progress"}),r.jsxs("span",{className:"text-sm text-gray-500",children:[x,"/",v," required sections"]})]}),r.jsx(f0,{value:y,className:"h-2"})]})}),r.jsx(me,{className:"shadow-lg border-0 overflow-hidden",children:r.jsxs(ge,{className:"p-0",children:[l&&r.jsx("div",{className:"m-6 mb-0 bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"w-5 h-5 text-amber-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-amber-800",children:u?"Existing RC - Supporting Documents":"Correction Mode"}),r.jsx("p",{className:"text-xs text-amber-700 mt-1",children:u?"Upload any supporting documents needed for your Existing RC application.":"Please update the documents that need correction and resubmit your application."}),c&&r.jsxs("div",{className:"mt-2 p-3 bg-white rounded border border-amber-200",children:[r.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:"DA Feedback:"}),r.jsx("p",{className:"text-xs text-gray-600",children:c})]})]})]})}),r.jsx("div",{className:`bg-gradient-to-r from-slate-800 to-slate-700 text-white px-6 py-4 ${l?"mt-6":"rounded-t-lg"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-semibold",children:"Required Documents"}),r.jsx("p",{className:"text-sm text-white/70",children:"Upload all mandatory documents to proceed"})]})]})}),r.jsxs("div",{className:"mx-6 mt-4 bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm text-amber-800",children:[r.jsx("p",{className:"font-medium",children:" Document Upload Requirements"}),r.jsxs("p",{className:"text-xs mt-1",children:["Maximum file size: ",p,"MB for PDF documents, ",g,"MB for photos/images. Large images will be automatically optimized."]})]}),u?r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Existing RC Applications"})," only require supporting documents. You do not need to upload Revenue Papers, Affidavits, or other new registration documents."]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(l8,{className:"w-4 h-4 text-gray-500"}),r.jsx("label",{className:"text-sm font-medium",children:"Supporting Documents (Up to 5 files)"})]}),r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Upload any additional documents as per requirement."}),r.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Allowed formats: PDF, PNG, JPG, JPEG"}),r.jsx(Wc,{label:"Upload Supporting Documents",multiple:!0,maxFiles:5,fileType:"additional-document",category:"documents",accept:".pdf,.png,.jpg,.jpeg",onUploadComplete:j=>a(j),existingFiles:i})]})]}):r.jsxs("div",{className:"divide-y",children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:["Revenue Papers (Jamabandi & Tatima) ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Land revenue records showing ownership of the property"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed format: PDF only"})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[e.revenuePapers.length,"/2 files"]})]}),r.jsx(Wc,{label:"Upload Revenue Papers",maxFiles:2,fileType:"revenue-papers",accept:".pdf",onUploadComplete:j=>t(w=>({...w,revenuePapers:j})),existingFiles:e.revenuePapers,isMissing:!h&&e.revenuePapers.length===0,hideNote:!0})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:["Affidavit under Section 29 ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Sworn statement as per homestay regulations"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed format: PDF only"})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[e.affidavitSection29.length,"/1 files"]})]}),r.jsx(Wc,{label:"Upload Affidavit",maxFiles:1,fileType:"affidavit-section29",accept:".pdf",onUploadComplete:j=>t(w=>({...w,affidavitSection29:j})),existingFiles:e.affidavitSection29,isMissing:!h&&e.affidavitSection29.length===0,hideNote:!0})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:["Undertaking in Form-C ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Signed undertaking form as per prescribed format"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed format: PDF only"})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[e.undertakingFormC.length,"/1 files"]})]}),r.jsx(Wc,{label:"Upload Form-C",maxFiles:1,fileType:"undertaking-form-c",accept:".pdf",onUploadComplete:j=>t(w=>({...w,undertakingFormC:j})),existingFiles:e.undertakingFormC,isMissing:!h&&e.undertakingFormC.length===0,hideNote:!0})]}),o&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:["Proof of Commercial Electricity Bill ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Latest electricity bill showing commercial tariff"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed format: PDF only"})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[e.commercialElectricityBill.length,"/1 files"]})]}),r.jsx(Wc,{label:"Upload Electricity Bill",maxFiles:1,fileType:"commercial-electricity-bill",accept:".pdf",onUploadComplete:j=>t(w=>({...w,commercialElectricityBill:j})),existingFiles:e.commercialElectricityBill,isMissing:!h&&e.commercialElectricityBill.length===0,hideNote:!0})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:["Proof of Commercial Water Bill ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Commercial water connection bill for the homestay"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed format: PDF only"})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[e.commercialWaterBill.length,"/1 files"]})]}),r.jsx(Wc,{label:"Upload Water Bill",maxFiles:1,fileType:"commercial-water-bill",accept:".pdf",onUploadComplete:j=>t(w=>({...w,commercialWaterBill:j})),existingFiles:e.commercialWaterBill,isMissing:!h&&e.commercialWaterBill.length===0,hideNote:!0})]})]}),r.jsxs("div",{className:"p-6 bg-gray-50/50",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lve,{className:"w-5 h-5 text-blue-600"}),r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-gray-900",children:["Property Photographs ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Clear photos of property exterior, rooms, and facilities (Min: 2)"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed formats: PNG, JPG, JPEG only"})]})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[n.length,"/10 files"]})]}),r.jsx(Wc,{label:"Upload Property Photos",multiple:!0,maxFiles:10,fileType:"property-photo",category:"photos",accept:".png,.jpg,.jpeg",onUploadComplete:j=>s(j),existingFiles:n,isMissing:!h&&n.length<2,hideNote:!0})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l8,{className:"w-5 h-5 text-gray-500"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-medium text-gray-900",children:"Additional/Supporting Documents"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Any additional documents as per requirement (Optional)"}),r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Allowed formats: PDF, PNG, JPG, JPEG"})]})]}),r.jsxs("span",{className:"text-xs text-gray-400",children:[i.length,"/5 files"]})]}),r.jsx(Wc,{showDescription:!0,label:"Upload Supporting Documents",multiple:!0,maxFiles:5,fileType:"additional-document",category:"documents",accept:".pdf,.png,.jpg,.jpeg",onUploadComplete:j=>a(j),existingFiles:i,hideNote:!0})]})]})]})}),!u&&(()=>{const j=!h&&e.revenuePapers.length===0,w=!h&&e.affidavitSection29.length===0,N=!h&&e.undertakingFormC.length===0,S=!h&&o&&e.commercialElectricityBill.length===0,T=!h&&o&&e.commercialWaterBill.length===0,C=!h&&n.length<2;return j||w||N||S||T||C?r.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"w-5 h-5 text-orange-600 mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Required documents missing:"}),r.jsxs("ul",{className:"text-xs text-orange-700 list-disc list-inside mt-1 space-y-0.5",children:[j&&r.jsx("li",{children:"Revenue Papers (Jamabandi & Tatima)"}),w&&r.jsx("li",{children:"Affidavit under Section 29"}),N&&r.jsx("li",{children:"Undertaking in Form-C"}),S&&r.jsx("li",{children:"Proof of commercial electricity bill"}),T&&r.jsx("li",{children:"Proof of commercial water bill"}),C&&r.jsxs("li",{children:["At least 2 property photos (",n.length,"/2)"]})]})]})]})}):null})()]})}const pB=e=>{if(e)return e.charAt(0).toUpperCase()+e.slice(1)},VDe=e=>{var s,i,a,o;let t=e.district;return((s=e.district)==null?void 0:s.toLowerCase())==="pangi"?t="Chamba":((a=(i=e.district)==null?void 0:i.toLowerCase())!=null&&a.includes("kaza")||((o=e.district)==null?void 0:o.toLowerCase())==="spiti")&&(t="Lahaul and Spiti"),[e.address,e.tehsilOther&&e.tehsil==="__other"?e.tehsilOther:e.tehsil,t,e.pincode].filter(l=>!!(l&&l.toString().trim().length)).join(", ")},UDe=e=>e==null||e===""?"":e;function yle({application:e,owner:t,title:n="Application Summary",icon:s,extraRows:i=[],className:a,highlightCategoryBadge:o=!0}){const l=(t==null?void 0:t.name)??e.ownerName,c=(t==null?void 0:t.mobile)??e.ownerMobile,d=VDe(e),u=[{label:"Application #",value:e.applicationNumber||e.id},{label:"Property Name",value:e.propertyName},{label:"Owner",value:l},{label:"Contact",value:c},{label:"Email",value:(t==null?void 0:t.email)??(e==null?void 0:e.ownerEmail)},{label:"Location",value:d},{label:"Total Rooms",value:e.totalRooms!=null?e.totalRooms.toString():void 0}];o&&e.category?u.push({label:"Category",value:r.jsx(ze,{variant:"secondary",className:"capitalize",children:pB(e.category)})}):u.push({label:"Category",value:pB(e.category)}),u.push({label:"Status",value:e.status?e.status.replace(/_/g," "):void 0});const h=[...u,...i];return r.jsxs(me,{className:Xe("space-y-2",a),children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"flex items-center gap-2 text-base",children:[s,n]})}),r.jsx(ge,{className:"space-y-2 text-sm",children:h.map(f=>r.jsxs("div",{className:"flex justify-between gap-3",children:[r.jsx("span",{className:"text-muted-foreground",children:f.label}),r.jsx("span",{className:"font-medium text-right",children:UDe(f.value)})]},f.label))})]})}const qDe={SHOW_AMENITIES_SELECTION:!1};function zDe({form:e,selectedAmenities:t,setSelectedAmenities:n,AMENITIES:s,MANDATORY_AMENITY_IDS:i,category:a,locationType:o,certificateValidityYears:l,fees:c,getCategoryBadge:d,LOCATION_LABEL_MAP:u,totalRooms:h,activeDraftApplication:f,correctionId:m,selectedAmenitiesCount:p,isUpgrade:g=!1,upgradeFeeInfo:v}){return r.jsxs("div",{className:"space-y-6",children:[qDe.SHOW_AMENITIES_SELECTION,r.jsxs("div",{className:"rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[r.jsx("div",{className:"bg-gradient-to-r from-slate-600 to-slate-700 text-white p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold",children:"2"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Certificate Validity Period"}),r.jsx("p",{className:"text-slate-200 text-sm",children:"Choose your registration duration"})]})]})}),r.jsx("div",{className:"bg-white p-6",children:r.jsx(ot,{control:e.control,name:"certificateValidityYears",render:({field:x})=>r.jsxs(at,{children:[r.jsx(dt,{children:r.jsxs(wc,{onValueChange:x.onChange,value:x.value,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:`flex items-start space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all hover-elevate ${x.value==="1"?"border-primary bg-primary/5":"border-border"}`,children:[r.jsx(Ps,{value:"1",id:"validity-1",className:"mt-1"}),r.jsxs("label",{htmlFor:"validity-1",className:"flex-1 cursor-pointer",children:[r.jsx("div",{className:"font-medium mb-1",children:"1 Year (Standard)"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Annual fee: ",c.baseFee.toFixed(0)]})]})]}),r.jsxs("div",{className:`flex items-start space-x-3 p-4 border-2 rounded-lg cursor-pointer transition-all hover-elevate ${x.value==="3"?"border-primary bg-primary/5":"border-border"}`,children:[r.jsx(Ps,{value:"3",id:"validity-3",className:"mt-1"}),r.jsxs("label",{htmlFor:"validity-3",className:"flex-1 cursor-pointer",children:[r.jsxs("div",{className:"font-medium mb-1 flex items-center gap-2",children:["3 Years (Lump Sum)",r.jsx(ze,{variant:"default",className:"text-xs",children:"10% OFF"})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Save ",(c.baseFee*3*.1).toFixed(0)," with 3-year payment"]})]})]})]})}),r.jsx(ys,{children:"Choose certificate validity period. 3-year lump sum payment receives 10% discount"}),r.jsx(ct,{})]})})})]}),r.jsxs("div",{className:"rounded-xl overflow-hidden shadow-lg border border-gray-200",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx("span",{className:"text-lg font-bold",children:"3"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold",children:"Registration Fee Summary"}),r.jsx("p",{className:"text-emerald-100 text-sm",children:"Final fee calculation with applicable discounts"})]})]})}),r.jsxs("div",{className:"bg-white p-6",children:[r.jsx("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-lg border border-emerald-200",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Category"}),r.jsx(ze,{variant:d(a).variant,children:d(a).label})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Location Type"}),r.jsx("span",{className:"font-medium text-sm",children:u[o]||""})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-muted-foreground",children:"Certificate Validity"}),r.jsxs("span",{className:"font-medium",children:[l," ",l==="1"?"year":"years"]})]}),r.jsx("div",{className:"border-t pt-3 mt-3",children:g&&v?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-muted-foreground",children:["New Category Fee (",d(a).label,")"]}),r.jsxs("span",{className:"font-medium",children:["",v.newCategoryFee.toFixed(0)]})]}),r.jsxs("div",{className:"flex justify-between mt-2",children:[r.jsxs("span",{className:"text-muted-foreground",children:["Fee Already Paid (",d(v.previousCategory).label,")"]}),r.jsxs("span",{className:"font-medium text-green-600",children:["",v.previousCategoryFee.toFixed(0)]})]}),r.jsx("div",{className:"border-t pt-2 mt-2",children:r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground font-medium",children:"Upgrade Amount"}),r.jsxs("span",{className:"font-medium",children:["",v.upgradeFee.toFixed(0)]})]})})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Base Fee (Annual)"}),r.jsxs("span",{className:"font-medium",children:["",c.baseFee.toFixed(0)]})]}),l==="3"&&r.jsxs("div",{className:"flex justify-between mt-2",children:[r.jsxs("span",{className:"text-muted-foreground",children:["Total (",l," years)"]}),r.jsxs("span",{className:"font-medium",children:["",(c.baseFee*3).toFixed(0)]})]})]})}),(c.validityDiscount>0||c.femaleOwnerDiscount>0||c.pangiDiscount>0)&&r.jsxs("div",{className:"border-t pt-3 mt-3",children:[r.jsx("div",{className:"text-sm font-medium mb-2 text-green-600 dark:text-green-400",children:"Discounts Applied:"}),c.validityDiscount>0&&r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"3-year lump sum (10%)"}),r.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["-",c.validityDiscount.toFixed(0)]})]}),c.femaleOwnerDiscount>0&&r.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Female owner (5%)"}),r.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["-",c.femaleOwnerDiscount.toFixed(0)]})]}),c.pangiDiscount>0&&r.jsxs("div",{className:"flex justify-between text-sm mt-1",children:[r.jsx("span",{className:"text-muted-foreground",children:"Pangi sub-division (50%)"}),r.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["-",c.pangiDiscount.toFixed(0)]})]})]}),r.jsxs("div",{className:"pt-3 border-t flex justify-between text-lg",children:[r.jsx("span",{className:"font-semibold",children:"Total Payable"}),r.jsxs("span",{className:"font-bold text-primary","data-testid":"text-total-fee",children:["",c.totalFee.toFixed(0)]})]}),c.savingsAmount>0&&r.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-3 mt-3",children:r.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200 font-medium",children:[" You save ",c.savingsAmount.toFixed(0)," (",c.savingsPercentage.toFixed(1),"%)"]})})]})}),r.jsx(yle,{className:"bg-muted/50 border-0 shadow-none mt-6",highlightCategoryBadge:!1,application:{applicationNumber:(f==null?void 0:f.applicationNumber)??m??void 0,propertyName:e.watch("propertyName")||void 0,address:e.watch("address")||void 0,district:e.watch("district")||void 0,tehsil:e.watch("tehsil")||void 0,tehsilOther:e.watch("tehsilOther")||void 0,pincode:e.watch("pincode")||void 0,ownerName:e.watch("ownerName")||void 0,ownerMobile:e.watch("ownerMobile")||void 0,totalRooms:h,category:e.watch("category")||void 0},owner:{name:e.watch("ownerName"),mobile:e.watch("ownerMobile"),email:e.watch("ownerEmail")},extraRows:[{label:"Amenities",value:`${p} selected`}]})]})]})]})}function HDe({form:e,cancellationConfirmed:t,setCancellationConfirmed:n,activeDraftApplication:s}){const i=(s==null?void 0:s.propertyName)||"your property",a=(s==null?void 0:s.parentCertificateNumber)||(s==null?void 0:s.certificateNumber)||"this certificate";return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(fn,{variant:"destructive",className:"border-rose-200 bg-rose-50 text-rose-900",children:[r.jsx(jn,{className:"h-4 w-4 text-rose-600"}),r.jsx(Po,{className:"text-rose-700 font-semibold",children:"Warning: Irreversible Action"}),r.jsxs(mn,{className:"text-rose-800",children:["You are about to submit a request to ",r.jsx("strong",{children:"cancel the registration certificate"})," for ",r.jsx("strong",{children:i})," (",a,").",r.jsx("br",{}),r.jsx("br",{}),"Once processed by the department, this action cannot be undone. You will need to apply for a fresh registration if you wish to operate this homestay again in the future."]})]}),r.jsxs("div",{className:"rounded-lg border bg-card p-6 shadow-sm space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[r.jsx(Ag,{className:"h-5 w-5 text-muted-foreground"}),"Reason for Cancellation"]}),r.jsx(ot,{control:e.control,name:"serviceNotes",render:({field:o})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Please tell us why you are canceling (Optional)"}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"E.g., shutting down business, sold the property, etc.",className:"min-h-[100px]",...o})}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"rounded-lg border border-rose-100 bg-rose-50/50 p-6 space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg text-rose-900",children:"Confirmation"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Zs,{id:"confirm-cancel",checked:t,onCheckedChange:o=>n(o===!0),className:"mt-1 border-rose-400 data-[state=checked]:bg-rose-600 data-[state=checked]:text-white"}),r.jsxs("div",{className:"grid gap-1.5 leading-none",children:[r.jsx("label",{htmlFor:"confirm-cancel",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-rose-900",children:"I understand the consequences and confirm that I want to cancel this certificate."}),r.jsx("p",{className:"text-sm text-rose-700",children:"I certify that I am the authorized owner/representative of this property."})]})]})]})]})}function WDe({form:e,submitConfirmed:t,setSubmitConfirmed:n,activeDraftApplication:s,title:i="Review & Submit",description:a="Please review your request details below before submitting.",confirmationText:o="I confirm that the details provided are accurate and I want to submit this request.",currentRooms:l}){const c=s==null?void 0:s.parentApplicationNumber,d=Number(e.watch("singleBedRooms"))||0,u=Number(e.watch("doubleBedRooms"))||0,h=Number(e.watch("familySuites"))||0,f=d+u+h;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs(fn,{className:"border-blue-200 bg-blue-50 text-blue-900",children:[r.jsx(Ag,{className:"h-4 w-4 text-blue-600"}),r.jsx(Po,{className:"text-blue-700 font-semibold",children:i}),r.jsx(mn,{className:"text-blue-800",children:a})]}),r.jsxs("div",{className:"rounded-lg border bg-card p-6 shadow-sm space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[r.jsx(Fr,{className:"h-5 w-5 text-emerald-600"}),"Request Summary"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Application Type:"}),r.jsx("p",{className:"font-medium",children:"Delete Rooms (Update Inventory)"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Parent Application:"}),r.jsx("p",{className:"font-medium",children:c||"N/A"})]}),l!==void 0&&r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Current Rooms:"}),r.jsx("p",{className:"font-medium text-lg",children:l})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"New Total Rooms:"}),r.jsx("p",{className:"font-medium text-emerald-600 text-lg",children:f})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-muted-foreground",children:"New Configuration:"}),r.jsxs("p",{className:"font-medium",children:[d," Single, ",u," Double, ",h," Suites"]})]})]})]}),r.jsxs("div",{className:"rounded-lg border border-slate-200 bg-slate-50 p-6 space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg text-slate-900",children:"Confirmation"}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(Zs,{id:"confirm-submit",checked:t,onCheckedChange:m=>n(m===!0),className:"mt-1"}),r.jsxs("div",{className:"grid gap-1.5 leading-none",children:[r.jsx("label",{htmlFor:"confirm-submit",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-slate-900",children:o}),r.jsx("p",{className:"text-sm text-slate-500",children:"I certify that I am the authorized owner/representative of this property."})]})]})]})]})}const ble="hptourism_timer_";function KDe({applicationId:e,isSubmitted:t=!1,onTimeUpdate:n}){const[s,i]=b.useState(0),[a,o]=b.useState(!0),l=b.useRef(null),c=`${ble}${e}`;b.useEffect(()=>{if(!e)return;const f=localStorage.getItem(c);if(f){const m=parseInt(f,10);!isNaN(m)&&m>=0&&i(m)}},[e,c]);const d=b.useCallback(()=>{e&&localStorage.setItem(c,s.toString())},[e,c,s]);b.useEffect(()=>{const f=()=>{document.hidden?(o(!1),d()):t||o(!0)};return document.addEventListener("visibilitychange",f),()=>{document.removeEventListener("visibilitychange",f)}},[t,d]),b.useEffect(()=>(a&&!t?l.current=setInterval(()=>{i(f=>{const m=f+1;return m%10===0&&localStorage.setItem(c,m.toString()),m})},1e3):l.current&&(clearInterval(l.current),l.current=null),()=>{l.current&&clearInterval(l.current)}),[a,t,c]),b.useEffect(()=>{t&&n&&n(s)},[t,s,n]),b.useEffect(()=>()=>{d()},[d]);const u=f=>{const m=Math.floor(f/3600),p=Math.floor(f%3600/60),g=f%60;return m>0?`${m}:${p.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`:`${p.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}`},h=f=>f<900?"text-emerald-600":f<1500?"text-amber-600":"text-rose-600";return e?r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-200 text-sm",children:[r.jsx(Vs,{className:`w-4 h-4 ${h(s)}`}),r.jsx("span",{className:"text-slate-500 font-medium",children:"Time Spent:"}),r.jsx("span",{className:`font-mono font-semibold ${h(s)}`,children:u(s)}),!a&&!t&&r.jsx("span",{className:"text-xs text-slate-400 ml-1",children:"(paused)"})]}):null}function GDe(e){localStorage.removeItem(`${ble}${e}`)}const YDe={step1:["propertyName","district","tehsil","pincode","address","locationType"],step2:["ownerFirstName","ownerLastName","ownerMobile","ownerAadhaar","ownerGender","guardianName","propertyOwnership"],step3:["category","propertyArea"],step4:["nearestHospital"],step5:["revenuePapers","affidavitSection29","undertakingFormC"],step6:[]};function XDe({formData:e,currentStep:t,totalSteps:n,mandatoryChecks:s={}}){const i=b.useMemo(()=>{let o=0,l=0;Object.values(YDe).forEach(h=>{h.forEach(f=>{l++;const m=e[f];(Array.isArray(m)&&m.length>0||typeof m=="string"&&m.trim()!==""||typeof m=="number"&&m>0||m!=null&&m!=="")&&o++})});const c=15,d=Object.values(s).filter(Boolean).length;l+=c,o+=Math.min(d,c);const u=l>0?Math.round(o/l*100):0;return Math.min(u,100)},[e,s]),a=o=>o<30?"bg-slate-300":o<60?"bg-amber-400":o<90?"bg-emerald-400":"bg-emerald-500";return r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-slate-50 rounded-lg border border-slate-200 text-sm",children:[r.jsx(Fr,{className:`w-4 h-4 ${i>=90?"text-emerald-600":"text-slate-400"}`}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-16 h-1.5 bg-slate-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-500 ${a(i)}`,style:{width:`${i}%`}})}),r.jsxs("span",{className:"text-xs text-slate-500 font-medium",children:[i,"%"]})]})]})}const gB=cw(),E4=e=>typeof e=="string"?e.trim():"",xB=(e,t)=>{if(!e)return"";const n=e.trim();if(!n)return"";const s=n.toLowerCase(),i=t.find(c=>c.toLowerCase()===s);if(i)return i;const a=s.replace(/district$/i,"").trim(),o=t.find(c=>c.toLowerCase()===a);return o||t.find(c=>s.includes(c.toLowerCase()))||n},QDe={kanal:505.857,marla:25.29285,bigha:802.34,sqft:.092903,sqm:1},ZDe=10.7639,O4=e=>e.toUpperCase().replace(/[^0-9A-Z]/g,"").slice(0,15),JDe=/^[0-9A-Z]{15}$/,ym="17",jle=6-ym.length,e6e=/^[1-9]\d{5}$/,t6e=e=>e.replace(/[^\d]/g,"").slice(0,jle),vB=e=>{const t=e??"",n=t.startsWith(ym)?t.slice(ym.length):t;return(ym+t6e(n)).slice(0,6)},r6e=dw,n6e=dw.reduce((e,t)=>({...e,[t.value]:t.label}),{}),R4=e=>{if(!e)return"";const t=typeof e=="string"?new Date(e):e;return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})},kp=e=>{const t=Bi(e);if(typeof t=="number"&&Number.isFinite(t)&&t>0)return t},I2=e=>e==="female"?"female":"male",yB={},s6e={owned:"Owned",leased:"Lease Deed"},BT=[{value:"single",label:"Type 1 (Single)"},{value:"double",label:"Type 2 (Double)"},{value:"suite",label:"Suite"}],VT=6,Hp={single:{roomsField:"singleBedRooms",bedsField:"singleBedBeds",rateField:"singleBedRoomRate",sizeField:"singleBedRoomSize",defaultBeds:1},double:{roomsField:"doubleBedRooms",bedsField:"doubleBedBeds",rateField:"doubleBedRoomRate",sizeField:"doubleBedRoomSize",defaultBeds:2},suite:{roomsField:"familySuites",bedsField:"familySuiteBeds",rateField:"familySuiteRate",sizeField:"familySuiteSize",defaultBeds:4}},UT=[{value:"lt3k",label:"Less than 3,000/night",explanation:"Eligible for SILVER category",minRate:0,maxRate:2999,minCategory:"silver"},{value:"3kto10k",label:"3,000  10,000/night",explanation:"Requires GOLD category or higher",minRate:3e3,maxRate:1e4,minCategory:"gold"},{value:"gt10k",label:"Above 10,000/night",explanation:"Requires DIAMOND category",minRate:10001,maxRate:5e4,minCategory:"diamond"}],bB={silver:1,gold:2,diamond:3},Hy=e=>({id:rS(6),roomType:e,quantity:1,tariffBucket:"lt3k",bedsPerRoom:Hp[e].defaultBeds,area:""}),i6e=e=>{const t=new Set(e.map(s=>s.roomType)),n=BT.find(s=>!t.has(s.value));return n?n.value:"single"},I6=e=>typeof e.bedsPerRoom=="number"&&e.bedsPerRoom>0?e.bedsPerRoom:Hp[e.roomType].defaultBeds,a6e=(e,t)=>e.reduce((n,s)=>{if(t&&s.id===t)return n;const i=Math.max(0,s.quantity),a=i*I6(s);return{rooms:n.rooms+i,beds:n.beds+a}},{rooms:0,beds:0}),jB=e=>e.map(t=>{const{rooms:n,beds:s}=a6e(e,t.id);let i=Math.max(0,ra-n),a=Math.max(0,Yc-s),o=Math.max(0,Math.min(t.quantity,i));o>a&&(o=a);let l=I6(t);if(o<=0||a<=0)o=o<=0?0:o,l=Math.min(l,VT);else{const c=Math.max(1,Math.min(VT,Math.floor(a/o)));l=Math.max(1,Math.min(l,c))}return{...t,quantity:o,bedsPerRoom:l}}),wB=e=>{if(!Number.isFinite(e)||e<=0)return"0 B";const t=["B","KB","MB","GB"],n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),s=e/Math.pow(1024,n);return`${s%1===0?s:s.toFixed(1)} ${t[n]}`},o6e=I.object({propertyName:I.string().optional(),locationType:I.enum(["mc","tcp","gp"]).optional(),district:I.string().optional(),tehsil:I.string().optional(),tehsilOther:I.string().optional(),gramPanchayat:I.string().optional(),gramPanchayatOther:I.string().optional(),urbanBody:I.string().optional(),urbanBodyOther:I.string().optional(),ward:I.string().optional(),address:I.string().optional(),pincode:I.string().optional(),telephone:I.string().optional(),ownerEmail:I.string().optional(),ownerMobile:I.string().optional(),ownerName:I.string().optional(),ownerFirstName:I.string().optional(),ownerLastName:I.string().optional(),ownerGender:I.enum(["male","female","other"]).optional(),ownerAadhaar:I.string().optional(),guardianName:I.string().optional(),guardianRelation:I.enum(["s_o","d_o","w_o","c_o","father","husband","guardian"]).optional(),propertyOwnership:I.enum(["owned","leased"]).optional(),category:I.enum(["diamond","gold","silver"]).optional(),proposedRoomRate:I.number().optional(),singleBedRoomRate:I.number().optional(),doubleBedRoomRate:I.number().optional(),familySuiteRate:I.number().optional(),distanceAirport:I.number().optional(),distanceRailway:I.number().optional(),distanceCityCenter:I.number().optional(),distanceShopping:I.number().optional(),distanceBusStand:I.number().optional(),projectType:I.enum(["new_property","existing_property","new_project","new_rooms"]).optional(),propertyArea:I.number().optional(),propertyAreaUnit:I.enum(["sqm","sqft","kanal","marla","bigha","biswa"]).optional(),singleBedRooms:I.number().optional(),singleBedBeds:I.number().optional(),singleBedRoomSize:I.number().optional(),doubleBedRooms:I.number().optional(),doubleBedBeds:I.number().optional(),doubleBedRoomSize:I.number().optional(),familySuites:I.number().optional(),familySuiteBeds:I.number().optional(),familySuiteSize:I.number().optional(),attachedWashrooms:I.number().optional(),lobbyArea:I.number().optional(),diningArea:I.number().optional(),parkingArea:I.string().optional(),ecoFriendlyFacilities:I.string().optional(),differentlyAbledFacilities:I.string().optional(),fireEquipmentDetails:I.string().optional(),gstin:I.string().optional(),certificateValidityYears:I.enum(["1","3"]).optional(),nearestHospital:I.string().optional()}),L2=e=>{if(!e)return{firstName:"",lastName:""};const t=e.trim().split(/\s+/).filter(Boolean);if(t.length===0)return{firstName:"",lastName:""};const[n,...s]=t;return{firstName:n,lastName:s.join(" ")}},NB=e=>e.replace(/[^A-Za-z\s'-]/g,"").replace(/\s{2,}/g," "),l6e=e=>{const t=UT.find(n=>n.value===e);return t?t.value==="gt10k"?t.minRate:t.maxRate:0},F2=e=>typeof e!="number"||Number.isNaN(e)||e<=0?null:e<=3e3?"lt3k":e<=1e4?"3kto10k":"gt10k",c6e=e=>`${e.toLocaleString("en-IN")}`,d6e=(e,t)=>e<=0||Number.isNaN(e)?"empty":e<t.min?"below":t.max!==null&&e>t.max?"above":"ok",Bi=(e,t=void 0)=>{if(e==null||e==="")return t;const n=Number(e);return Number.isNaN(n)?t:n},Is=e=>{if(e==null)return null;const t=e.trim();return t.length===0?null:t},u6e=()=>typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():rS(),Pp=[{id:"ac",label:"Air Conditioning",icon:PR},{id:"wifi",label:"WiFi",icon:NQ},{id:"parking",label:"Parking",icon:Hxe},{id:"restaurant",label:"Dining Area",icon:Vj},{id:"hotWater",label:"Hot Water 24/7",icon:Qxe},{id:"tv",label:"Television",icon:jQ},{id:"laundry",label:"Laundry Service",icon:wve},{id:"roomService",label:"Room Service",icon:Kxe},{id:"garden",label:"Garden",icon:bQ},{id:"mountainView",label:"Mountain View",icon:rh},{id:"petFriendly",label:"Pet Friendly",icon:vve},{id:"accessible",label:"Accessible",icon:Oxe},{id:"seniorFriendly",label:"Senior Citizen Friendly",icon:sve},{id:"vernacularArchitecture",label:"Vernacular Architecture",icon:cve},{id:"authenticFood",label:"Authentic Himachali Food",icon:Vxe},{id:"lobbyLounge",label:"Lobby/Lounge Area",icon:yQ},{id:"cctv",label:"CCTV Surveillance",icon:wQ},{id:"fireSafety",label:"Fire Safety Equipment",icon:mQ}],Ou=new Set(["cctv","fireSafety"]),SB=[{id:1,label:"Property Details",shortLabel:"Property",icon:Ba,requiredFields:["propertyName","projectType","address","district","tehsil","pincode","locationType"]},{id:2,label:"Owner Information",shortLabel:"Owner Info",icon:li,requiredFields:["ownerFirstName","ownerLastName","ownerName","ownerMobile","ownerEmail","ownerAadhaar","ownerGender","guardianRelation","guardianName","propertyOwnership"]},{id:3,label:"Rooms & Category",shortLabel:"Rooms",icon:Qv,requiredFields:["category","propertyArea","attachedWashrooms"]},{id:4,label:"Distances & Facilities",shortLabel:"Distances/Facilities",icon:Js,requiredFields:["distanceAirport","distanceRailway","distanceCityCenter","distanceShopping","distanceBusStand","nearestHospital"]},{id:5,label:"Documents Upload",shortLabel:"Documents",icon:ir,requiredFields:["revenuePapers","affidavitSection29","undertakingFormC","propertyPhotos"]},{id:6,label:"Amenities & Review",shortLabel:"Review",icon:Cg,requiredFields:[]}];function h6e(){var Cf,Af,jd,Au,uo,ho,wd,Rc,Nd,kf,wh,ri,yp,Bl,Vl,Pf,Tf,Ef,Of;const[,e]=Dr(),{data:t}=rt({queryKey:["/api/auth/me"]}),n=()=>e("/profile"),s=le=>r.jsxs(ys,{children:[le?`${le} `:"This information ","is managed from"," ",r.jsx(te,{type:"button",variant:"ghost",className:"h-auto px-0 text-primary",onClick:n,children:"My Profile"}),"."]}),{toast:i}=Tr(),{data:a}=rt({queryKey:["/api/settings/woman-discount-mode"],staleTime:5*60*1e3}),o=(a==null?void 0:a.mode)||BCe,{data:l}=rt({queryKey:["/api/settings/upload-policy"],staleTime:5*60*1e3}),c=l??PC,{data:d}=rt({queryKey:["/api/settings/category-enforcement"],staleTime:5*60*1e3}),{data:u}=rt({queryKey:["/api/settings/room-calc-mode"],staleTime:5*60*1e3}),{data:h}=rt({queryKey:["/api/settings/room-rate-bands"],staleTime:5*60*1e3}),{data:f}=rt({queryKey:["/api/public/settings/payment-workflow"],staleTime:5*60*1e3}),m=(f==null?void 0:f.workflow)==="upfront",{data:p}=rt({queryKey:["/api/existing-owners/active",(Cf=t==null?void 0:t.user)==null?void 0:Cf.id],staleTime:30*1e3}),g=new URLSearchParams(window.location.search),v=g.get("draft"),x=g.get("application"),[y,j]=b.useState(v),[w,N]=b.useState(x),[S]=b.useState(()=>rS()),T=(d==null?void 0:d.enforce)??a7.enforce,C=(d==null?void 0:d.lockToRecommended)??a7.lockToRecommended,A=h??M5,R=c.totalPerApplicationMB*1024*1024,[k,O]=b.useState(1),[$,D]=b.useState(1),[q,M]=b.useState({cctv:!1,fireSafety:!1}),[L,V]=b.useState({}),[P,z]=b.useState(()=>P4()),[Z,F]=b.useState({revenuePapers:[],affidavitSection29:[],undertakingFormC:[],commercialElectricityBill:[],commercialWaterBill:[]}),[W,G]=b.useState([]),[H,se]=b.useState([]),J=6,ie=b.useRef(!1);b.useEffect(()=>{if(p!=null&&p.application){if(v||x)return;e(`/applications/${p.application.id}`)}},[p,x,v,e]);const[X,he]=b.useState(!1),[fe,Q]=b.useState(!1),[Oe,ve]=b.useState(()=>jB([Hy("single")])),ee=b.useCallback(le=>ve(Fe=>jB(le(Fe))),[]),[Ee,Re]=b.useState(!0),oe=(u==null?void 0:u.mode)??$Ce.mode,[De,tt]=b.useState(oe),[Qe,xe]=b.useState({rowId:null,open:!1}),[ae,we]=b.useState({unit:"sqm",value:""}),Te=b.useMemo(()=>{const le=Number(ae.value)||0,Fe=QDe[ae.unit],_t=le*Fe;return{sqm:_t,sqft:_t*ZDe}},[ae]),qe=le=>{we({unit:"sqm",value:""}),xe({rowId:le,open:!0})},Ke=()=>xe({rowId:null,open:!1});b.useEffect(()=>{tt(oe)},[oe]),b.useEffect(()=>{ee(le=>le.map(Fe=>{if(De==="direct"){const Et=Bi(Fe.customRate,void 0);return{...Fe,customRate:Et&&Et>0?Et:""}}const _t=Bi(Fe.customRate,0);return{...Fe,tariffBucket:F2(_t)??Fe.tariffBucket}}))},[De,ee]);const[,Ge]=Dr(),He=!!w;b.useEffect(()=>{He||Q(!1)},[He]);const nt=L2(((Af=t==null?void 0:t.user)==null?void 0:Af.fullName)||""),Y=lu({defaultValues:{propertyName:"",address:"",district:"",pincode:ym,locationType:"mc",telephone:"",tehsil:"",tehsilOther:"",gramPanchayat:"",urbanBody:"",ward:"",ownerEmail:((jd=t==null?void 0:t.user)==null?void 0:jd.email)||"",ownerMobile:((Au=t==null?void 0:t.user)==null?void 0:Au.mobile)||"",ownerName:((uo=t==null?void 0:t.user)==null?void 0:uo.fullName)||"",ownerFirstName:nt.firstName,ownerLastName:nt.lastName,ownerAadhaar:((ho=t==null?void 0:t.user)==null?void 0:ho.aadhaarNumber)||"",guardianName:"",guardianRelation:void 0,ownerGender:I2((wd=t==null?void 0:t.user)==null?void 0:wd.gender),propertyOwnership:"owned",category:"silver",proposedRoomRate:0,singleBedRoomRate:0,doubleBedRoomRate:0,familySuiteRate:0,projectType:"new_project",propertyArea:0,propertyAreaUnit:"sqm",singleBedRooms:0,singleBedBeds:1,singleBedRoomSize:void 0,doubleBedRooms:0,doubleBedBeds:2,doubleBedRoomSize:void 0,familySuites:0,familySuiteBeds:4,familySuiteSize:void 0,attachedWashrooms:1,gstin:"",distanceAirport:void 0,distanceRailway:void 0,distanceCityCenter:void 0,distanceShopping:void 0,distanceBusStand:void 0,lobbyArea:void 0,diningArea:void 0,parkingArea:"",ecoFriendlyFacilities:"",differentlyAbledFacilities:"",fireEquipmentDetails:"",certificateValidityYears:"1",nearestHospital:""}}),{data:Ct}=rt({queryKey:["/api/applications",(Rc=t==null?void 0:t.user)==null?void 0:Rc.id],enabled:!!(t!=null&&t.user),staleTime:3e4}),[Vt,pt]=b.useState(!1),[Ht,wr]=b.useState(!1);b.useEffect(()=>{if(He||v||x||!(Ct!=null&&Ct.applications))return;const le=Ct.applications;if(le.length===0)return;const Fe=le.find(Et=>Et.status==="draft");if(Fe){if(!y||y!==Fe.id){const Et=new URL(window.location.href);Et.searchParams.set("draft",Fe.id),window.history.replaceState(null,"",Et.pathname+Et.search),j(Fe.id)}return}const _t=le[0];ie.current||(ie.current=!0,i({title:"Application already in progress",description:"You already have an application in process. Youll be redirected to continue it."})),e(`/applications/${_t.id}`)},[Ct,x,y,v,e,i,He]);const{data:wt}=rt({queryKey:["/api/profile",(Nd=t==null?void 0:t.user)==null?void 0:Nd.id],enabled:!!(t!=null&&t.user),retry:!1,queryFn:async({queryKey:le})=>{const Fe=await fetch(le[0],{credentials:"include"});if(Fe.status===404)return null;if(!Fe.ok){const _t=await Fe.text()||Fe.statusText;throw new Error(_t)}return Fe.json()}}),[Ut,St]=b.useState(null),[Be,lr]=b.useState(!1),Wt=y??v??null;b.useEffect(()=>{let le=!1;if(!Wt){St(null);return}return lr(!0),(async()=>{try{const Fe=await fetch(`/api/applications/${Wt}`,{credentials:"include"});if(Fe.status===401){le||St(null);return}if(!Fe.ok){const Et=await Fe.text()||Fe.statusText;throw new Error(Et)}const _t=await Fe.json();le||St((_t==null?void 0:_t.application)??null)}catch(Fe){console.error("[draft-load]",Fe),le||St(null)}finally{le||lr(!1)}})(),()=>{le=!0}},[Wt]);const{data:It}=rt({queryKey:["/api/applications",x],enabled:!!x}),yt=Ut,ut=(It==null?void 0:It.application)??null,Kt=yt??(He?ut:null);console.log("DEBUG: Component Render Source:",v?yt:He?ut:Kt||{});const Dt=(Kt==null?void 0:Kt.applicationKind)??"new_registration",gr=!!(yt&&Xx(Dt)),Fn=(yt==null?void 0:yt.serviceContext)??null,bi=(yt==null?void 0:yt.parentApplicationNumber)??null,An=(yt==null?void 0:yt.parentApplicationId)??null,ei=(yt==null?void 0:yt.parentApplicationNumber)??(yt==null?void 0:yt.certificateNumber)??null,rn=(yt==null?void 0:yt.inheritedCertificateValidUpto)??(yt==null?void 0:yt.certificateExpiryDate)??null,vn=Fn==null?void 0:Fn.requestedRooms,rs=Fn==null?void 0:Fn.requestedRoomDelta,En=yt==null?void 0:yt.serviceNotes,ka=He&&(((kf=Kt==null?void 0:Kt.applicationNumber)==null?void 0:kf.startsWith("LG-HS-"))??!1),{data:zr}=rt({queryKey:[`/api/applications/${An}`],enabled:!!An&&(Dt==="change_category"||Dt==="delete_rooms"),staleTime:5*60*1e3,select:le=>le.application});b.useEffect(()=>{if(Dt==="delete_rooms"&&zr&&!Be){const le=Number(zr.singleBedRoomRate||zr.proposedRoomRate||0),Fe=Number(zr.doubleBedRoomRate||zr.proposedRoomRate||0),_t=Number(zr.familySuiteRate||zr.proposedRoomRate||0);le>0&&Y.setValue("singleBedRoomRate",le),Fe>0&&Y.setValue("doubleBedRoomRate",Fe),_t>0&&Y.setValue("familySuiteRate",_t),ee(Er=>{let en=!1;const Vn=Er.map(Nn=>{let Nr=0;return Nn.roomType==="single"?Nr=Number(zr.singleBedRoomRate||zr.proposedRoomRate||0):Nn.roomType==="double"?Nr=Number(zr.doubleBedRoomRate||zr.proposedRoomRate||0):Nn.roomType==="suite"&&(Nr=Number(zr.familySuiteRate||zr.proposedRoomRate||0)),Nr>0&&(!Nn.customRate||Nn.customRate===""||Number(Nn.customRate)===0)?(en=!0,{...Nn,customRate:Nr,tariffBucket:F2(Nr)??"lt3k"}):Nn});return en?Vn:Er});const Et=Y.getValues("propertyArea");(!Et||Et===0)&&Number(zr.propertyArea||0)>0&&(Y.setValue("propertyArea",Number(zr.propertyArea||0)),Y.setValue("propertyAreaUnit",zr.propertyAreaUnit||"sqm"),Y.setValue("propertyAreaConversionRate",Number(zr.propertyAreaConversionRate||1))),console.log("DEBUG Backfill Applied:",{activeApplicationKind:Dt})}else console.log("DEBUG Backfill Skip:",{activeApplicationKind:Dt,hasParent:!!zr,loading:Be})},[Dt,zr,Be]);const zt=b.useRef(!1),ji=b.useRef(!1),wi=["sent_back_for_corrections","reverted_to_applicant","reverted_by_dtdo","objection_raised"];b.useEffect(()=>{if(!He||!ut||ji.current)return;ji.current=!0;const le=ut.status??"";if(!wi.includes(le)){i({title:"Cannot edit this application",description:"This application is not awaiting corrections.",variant:"destructive"}),Ge(`/applications/${ut.id}`);return}},[He,ut,Ge,i]),b.useEffect(()=>{if(He&&ut&&!zt.current){const le=ut.status??"";if(!wi.includes(le))return;zt.current=!0,O(5),D(5);return}if(yt&&!He&&k===1&&!zt.current&&Dt!=="cancel_certificate"&&Dt!=="new_registration"){const le=yt.documents;Array.isArray(le)&&le.length>0||(zt.current=!0,O(5),D(5))}},[He,ut,yt,k,Dt]),b.useEffect(()=>{if(!yt)return;const le=Y.getValues("tehsil");!Y.getValues("district")&&yt.district&&Y.setValue("district",yt.district,{shouldDirty:!1,shouldValidate:!1}),!le&&(yt.tehsil||yt.tehsilOther)&&(Y.setValue("tehsil",yt.tehsil||"__other",{shouldDirty:!1,shouldValidate:!1}),Y.setValue("tehsilOther",yt.tehsilOther||"",{shouldDirty:!1,shouldValidate:!1}))},[yt,Y]);const Rs=b.useCallback(()=>{const le=[];return BT.forEach(Fe=>{const _t=Hp[Fe.value],Et=Number(Y.getValues(_t.roomsField))||0,Er=Number(Y.getValues(_t.rateField))||0,en=Er>0?Er:"",Vn=Bi(Y.getValues(_t.bedsField),_t.defaultBeds)??_t.defaultBeds,Nn=Math.max(1,Math.min(Vn,VT)),Nr=Y.getValues(_t.sizeField),Ar=typeof Nr=="number"?Nr:typeof Nr=="string"&&Nr.trim()?Number(Nr):"";(Et>0||Er>0||typeof Ar=="number"&&Ar>0)&&le.push({id:rS(6),roomType:Fe.value,quantity:Et,tariffBucket:F2(Er)??"lt3k",bedsPerRoom:Nn,area:Ar,customRate:en})}),le.length===0&&le.push(Hy("single")),le},[Y]),st=b.useCallback(le=>{Y.setValue("singleBedRooms",0),Y.setValue("singleBedRoomRate",0),Y.setValue("singleBedRoomSize",void 0),Y.setValue("singleBedBeds",Hp.single.defaultBeds),Y.setValue("doubleBedRooms",0),Y.setValue("doubleBedRoomRate",0),Y.setValue("doubleBedRoomSize",void 0),Y.setValue("doubleBedBeds",Hp.double.defaultBeds),Y.setValue("familySuites",0),Y.setValue("familySuiteRate",0),Y.setValue("familySuiteSize",void 0),Y.setValue("familySuiteBeds",Hp.suite.defaultBeds),le.forEach(Fe=>{const _t=Hp[Fe.roomType];Y.setValue(_t.roomsField,Fe.quantity),Y.setValue(_t.bedsField,I6(Fe));const Et=Bi(Fe.customRate,void 0),Er=De==="direct"?Et&&Et>0?Et:void 0:l6e(Fe.tariffBucket);Y.setValue(_t.rateField,Er);const en=typeof Fe.area=="number"?Fe.area:typeof Fe.area=="string"&&Fe.area.trim()?Number(Fe.area):void 0;Y.setValue(_t.sizeField,en)})},[Y,De]);b.useEffect(()=>{ee(()=>Rs())},[Rs,ee]),b.useEffect(()=>{st(Oe)},[Oe,st]);const tr=b.useCallback((le,Fe)=>{ee(_t=>_t.map(Et=>Et.id===le?{...Et,...Fe,quantity:typeof Fe.quantity=="number"?Math.max(0,Math.min(Fe.quantity,ra)):Et.quantity}:Et))},[ee]),Zt=b.useCallback(()=>{ee(le=>{if(le.length>=BT.length)return le;const Fe=i6e(le);return[...le,Hy(Fe)]})},[ee]),$n=b.useCallback(le=>{ee(Fe=>Fe.filter(_t=>_t.id!==le))},[ee]),_s=()=>{!Qe.rowId||Te.sqm<=0||(tr(Qe.rowId,{area:Number(Te.sqm.toFixed(2))}),Ke())},qa=b.useCallback(()=>{ee(()=>[Hy("single")]),Re(!0),st([Hy("single")])},[st,ee]);b.useEffect(()=>{v||x||yt||Y.setValue("locationType","mc",{shouldDirty:!1,shouldValidate:!1})},[v,x,yt,Y]);const ms=Y.watch("category"),Ds=ms==="gold"||ms==="diamond",di=Ds,El=Ds,Li=Y.watch("gstin"),cl=O4(Li??""),za=cl.length>0,Zi=JDe.test(cl),pd=di&&!(!di||za&&Zi),Ha=Y.watch("locationType")||"mc",_c=Ha,Cc=Y.watch("district"),Bn=b.useRef(!1),wu=Ha==="gp"?{label:"Village / Locality (PO)",placeholder:"Type your village, locality, or Post Office",description:"Required for Gram Panchayat areas.",requiredMessage:"Village / locality is required for Gram Panchayat properties"}:null,Io=Ha==="mc"?{label:"Enter City/Town (MC/Council)",placeholder:"e.g., Shimla, Theog",description:"Required for Municipal Corporation or Council applicants."}:Ha==="tcp"?{label:"Enter Town (TCP/SADA/NP)",placeholder:"e.g., Suni, Narkanda",description:"Required for TCP/SADA/Nagar Panchayat applicants."}:{label:"Municipal Corporation / TCP / Nagar Panchayat",placeholder:"e.g., Shimla MC, Theog NP",description:"Type the name of your urban local body."};b.useEffect(()=>{if(Bn.current)return;if(!Cc){Y.setValue("tehsil","",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1});return}const le=vm(Cc),Fe=Y.getValues("tehsil");if(Fe!=="__other"){if(le.length===0){Fe!=="__other"&&Y.setValue("tehsil","__other",{shouldDirty:!1,shouldValidate:k>=1});return}if(!Fe||!le.includes(Fe)){const _t=(Fe||"").trim();_t?(Y.setValue("tehsil","__other",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther",_t,{shouldDirty:!1,shouldValidate:k>=1})):(Y.setValue("tehsil","",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1}))}}},[Cc,Y,k]);const zn=Y.watch("district"),On=Y.watch("tehsil"),ns=Y.watch("tehsilOther"),Pa=Y.watch("pincode"),ss=Y.watch("propertyName"),Ni=Y.watch("address"),Lo=Y.watch("gramPanchayat"),lo=Y.watch("ownerFirstName"),gd=Y.watch("ownerLastName"),Ji=Y.watch("guardianName"),Ol=Y.watch("ownerGender"),Wa=Y.watch("propertyOwnership"),Si=Y.watch("certificateValidityYears"),Rl=k===2&&Wa==="leased",Nu=He?"Resubmit Application":Dt==="delete_rooms"||Dt==="cancel_certificate"?"Submit Request":m?" Pay & Submit":"Submit Application",xd=b.useRef(null),vd=(ns==null?void 0:ns.trim())||"",Dl=On==="__other"?vd||"":On||"",Fo=On==="__other"?vd:On,Ka=vB(Pa??ym),Ac=Ka.slice(ym.length),$o=e6e.test(Ka),Ml=Ac.length<jle;b.useEffect(()=>{if(Bn.current)return;const le=Y.getValues("tehsil")??"",Fe=le==="__other"?Y.getValues("tehsilOther")??"":"";Nt.current={value:le,other:Fe}},[Y,On,ns]),b.useEffect(()=>{if(Bn.current)return;if(!zn){(On||ns)&&(Y.setValue("tehsil","",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1}));return}const le=vm(zn),Fe=le.length>0;if(On==="__other"){if(!Fe||ns&&ns.trim().length>0)return;Y.setValue("tehsil","",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1});return}if(!Fe){if(On!=="__other"){const _t=(On==null?void 0:On.trim())??"";Y.setValue("tehsil","__other",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther",_t,{shouldDirty:!1,shouldValidate:k>=1})}return}if(!On){ns&&Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1});return}if(!le.includes(On)){const _t=(On||"").trim();_t?(Y.setValue("tehsil","__other",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther",_t,{shouldDirty:!1,shouldValidate:k>=1})):(Y.setValue("tehsil","",{shouldDirty:!1,shouldValidate:k>=1}),Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1}));return}ns&&Y.setValue("tehsilOther","",{shouldDirty:!1,shouldValidate:k>=1})},[zn,On,ns,Y,k]),b.useEffect(()=>{const le=vB(Pa??ym);le!==Pa&&Y.setValue("pincode",le,{shouldDirty:!0,shouldValidate:k>=1})},[Pa,Y,k]),b.useEffect(()=>{if(!di){Y.clearErrors("gstin");return}if(!za){Y.setError("gstin",{type:"manual",message:"GSTIN is required for Diamond and Gold categories"});return}if(!Zi){Y.setError("gstin",{type:"manual",message:"GSTIN must be exactly 15 characters (numbers and capital letters only)"});return}Y.clearErrors("gstin")},[di,za,Zi,Y]),b.useEffect(()=>{var le;(le=xd.current)==null||le.scrollIntoView({behavior:"smooth",block:"start"})},[k]);const Nt=b.useRef({value:"",other:""}),cn=le=>{if(!le)return;const Fe=Y.getValues(),_t=le.ownerFirstName,Et=le.ownerLastName,Er=L2(le.ownerName??Fe.ownerName),en=_t??Er.firstName??Fe.ownerFirstName??"",Vn=Et??Er.lastName??Fe.ownerLastName??"",Nn=le.certificateValidityYears!==void 0&&le.certificateValidityYears!==null?String(le.certificateValidityYears):Fe.certificateValidityYears,Nr=le.district??Fe.district??"";let Ar=E4(Nr);Ar.toLowerCase()==="pangi"?Ar="Chamba":(Ar.toLowerCase().includes("kaza")||Ar.toLowerCase()==="spiti"||Ar.toLowerCase()==="lahaul")&&(Ar="Lahaul and Spiti");const Hn=xB(Ar,gB),gs=le.tehsil??Fe.tehsil??"",Oa=le.tehsilOther??Fe.tehsilOther??"",Ra=Hn?vm(Hn):[],Gn=E4(gs).replace(/^not provided$/i,""),fa=E4(Oa),fl=Ra.length>0?xB(Gn,Ra):Gn;let Ul,ql;fl&&Ra.includes(fl)?(Ul=fl,ql=""):Gn?(Ul="__other",ql=Gn):fa?(Ul="__other",ql=fa):Ra.length>0?(Ul=Ra[0],ql=""):(Ul="",ql=""),Bn.current=!0,Nt.current={value:Ul,other:ql},Y.reset({...Fe,propertyName:le.propertyName??Fe.propertyName??"",address:le.address??Fe.address??"",district:Hn,tehsil:Ul,tehsilOther:ql,gramPanchayat:le.gramPanchayat??Fe.gramPanchayat??"",urbanBody:le.urbanBody??Fe.urbanBody??"",ward:le.ward??Fe.ward??"",pincode:le.pincode??Fe.pincode??"",locationType:le.locationType??"mc",telephone:le.telephone??Fe.telephone??"",ownerEmail:le.ownerEmail??Fe.ownerEmail??"",ownerMobile:le.ownerMobile??Fe.ownerMobile??"",ownerName:le.ownerName??Fe.ownerName??"",ownerFirstName:en,ownerLastName:Vn,ownerGender:I2(le.ownerGender??Fe.ownerGender),ownerAadhaar:le.ownerAadhaar??Fe.ownerAadhaar??"",guardianName:le.guardianName??le.guardian_name??"",guardianRelation:(()=>{const zs=(le.guardianRelation||le.guardian_relation||"").toLowerCase();return["s_o","d_o","w_o","c_o"].includes(zs)||zs?zs:Fe.guardianRelation??""})(),propertyOwnership:le.propertyOwnership??Fe.propertyOwnership??"owned",category:le.category??Fe.category??"silver",proposedRoomRate:Bi(le.proposedRoomRate,Fe.proposedRoomRate??0)??0,singleBedRoomRate:Bi(le.singleBedRoomRate,Fe.singleBedRoomRate??0)??0,doubleBedRoomRate:Bi(le.doubleBedRoomRate,Fe.doubleBedRoomRate??0)??0,familySuiteRate:Bi(le.familySuiteRate,Fe.familySuiteRate??0)??0,projectType:le.projectType??Fe.projectType??"new_project",propertyArea:Bi(le.propertyArea,Fe.propertyArea??0)??0,propertyAreaUnit:le.propertyAreaUnit??Fe.propertyAreaUnit??"sqm",singleBedRooms:Bi(le.singleBedRooms,Fe.singleBedRooms??0)??0,singleBedBeds:Bi(le.singleBedBeds,Fe.singleBedBeds??1)??1,singleBedRoomSize:Bi(le.singleBedRoomSize),doubleBedRooms:Bi(le.doubleBedRooms,Fe.doubleBedRooms??0)??0,doubleBedBeds:Bi(le.doubleBedBeds,Fe.doubleBedBeds??2)??2,doubleBedRoomSize:Bi(le.doubleBedRoomSize),familySuites:Bi(le.familySuites,Fe.familySuites??0)??0,familySuiteBeds:Bi(le.familySuiteBeds,Fe.familySuiteBeds??4)??4,familySuiteSize:Bi(le.familySuiteSize),attachedWashrooms:Bi(le.attachedWashrooms,Fe.attachedWashrooms??0)??0,gstin:le.gstin??Fe.gstin??"",distanceAirport:kp(le.distanceAirport),distanceRailway:kp(le.distanceRailway),distanceCityCenter:kp(le.distanceCityCenter),distanceShopping:kp(le.distanceShopping),distanceBusStand:kp(le.distanceBusStand),lobbyArea:kp(le.lobbyArea),diningArea:kp(le.diningArea),parkingArea:le.parkingArea??Fe.parkingArea??"",ecoFriendlyFacilities:le.ecoFriendlyFacilities??Fe.ecoFriendlyFacilities??"",differentlyAbledFacilities:le.differentlyAbledFacilities??Fe.differentlyAbledFacilities??"",fireEquipmentDetails:le.fireEquipmentDetails??Fe.fireEquipmentDetails??"",certificateValidityYears:Nn==="3"?"3":"1",nearestHospital:le.nearestHospital??Fe.nearestHospital??"",keyLocationHighlight1:le.keyLocationHighlight1??Fe.keyLocationHighlight1??"",keyLocationHighlight2:le.keyLocationHighlight2??Fe.keyLocationHighlight2??""});const Rf=le.amenities;if(Rf)try{const zs=typeof Rf=="string"?JSON.parse(Rf):Rf;M(zs||{})}catch{M({})}const ku=le.nearbyAttractions;if(ku)try{const zs=typeof ku=="string"?JSON.parse(ku):ku;V(zs||{})}catch{V({})}const Pu=le.mandatoryChecklist;if(Pu)try{const zs=typeof Pu=="string"?JSON.parse(Pu):Pu;z({...P4(),...zs})}catch{z(P4())}const Sd=Array.isArray(le.documents)?le.documents:[];if(Sd.length>0){const zs={revenuePapers:[],affidavitSection29:[],undertakingFormC:[],commercialElectricityBill:[],commercialWaterBill:[]},_d=[],Df=[];Sd.forEach(Vo=>{const Dc={id:Vo.id,filePath:Vo.fileUrl||Vo.filePath,fileName:Vo.fileName||Vo.name||"document",fileSize:Vo.fileSize||0,mimeType:Vo.mimeType||Vo.type||"application/octet-stream",description:Vo.description||""};switch(Vo.documentType){case"revenue_papers":zs.revenuePapers.push(Dc);break;case"affidavit_section_29":zs.affidavitSection29.push(Dc);break;case"undertaking_form_c":zs.undertakingFormC.push(Dc);break;case"commercial_electricity_bill":zs.commercialElectricityBill.push(Dc);break;case"commercial_water_bill":zs.commercialWaterBill.push(Dc);break;case"property_photo":_d.push(Dc);break;case"additional_document":Df.push(Dc);break}}),F(zs),G(_d),se(Df)}else F({revenuePapers:[],affidavitSection29:[],undertakingFormC:[],commercialElectricityBill:[],commercialWaterBill:[]}),G([]),se([]);const bp=le.gramPanchayat??Y.getValues().gramPanchayat??"",jp=le.urbanBody??Y.getValues().urbanBody??"",wp=le.ward??Y.getValues().ward??"";setTimeout(()=>{Y.setValue("district",Hn,{shouldDirty:!1,shouldValidate:!1}),setTimeout(()=>{Y.setValue("tehsil",Ul,{shouldDirty:!1,shouldValidate:!1}),Y.setValue("tehsilOther",ql,{shouldDirty:!1,shouldValidate:!1}),Y.setValue("gramPanchayat",bp,{shouldDirty:!1,shouldValidate:!1}),Y.setValue("urbanBody",jp,{shouldDirty:!1,shouldValidate:!1}),Y.setValue("ward",wp,{shouldDirty:!1,shouldValidate:!1}),ee(()=>Rs()),Bn.current=!1},50)},50)},Ta=()=>{const le=(Fe,_t)=>Fe.map(Et=>({id:Et.id||u6e(),fileName:Et.fileName,filePath:Et.filePath,fileUrl:Et.filePath,documentType:_t,fileSize:Et.fileSize??0,mimeType:Et.mimeType||"application/octet-stream",name:Et.fileName,url:Et.filePath,description:Et.description||""}));return[...le(Z.revenuePapers,"revenue_papers"),...le(Z.affidavitSection29,"affidavit_section_29"),...le(Z.undertakingFormC,"undertaking_form_c"),...le(Z.commercialElectricityBill,"commercial_electricity_bill"),...le(Z.commercialWaterBill,"commercial_water_bill"),...le(W,"property_photo"),...le(H,"additional_document")]};b.useEffect(()=>{const le=NB(lo||"").trim(),Fe=NB(gd||"").trim(),_t=[le,Fe].filter(Boolean).join(" "),Et=Y.getValues("ownerName");_t!==Et&&Y.setValue("ownerName",_t,{shouldValidate:k>=2,shouldDirty:!!(le||Fe)})},[lo,gd,Y,k]);const Ga=Y.watch("singleBedRooms")||0,Bo=Y.watch("doubleBedRooms")||0,_i=Y.watch("familySuites")||0,ue=Y.watch("singleBedBeds")||0,bt=Y.watch("doubleBedBeds")||0,vr=Y.watch("familySuiteBeds")||0,wn=Y.watch("attachedWashrooms")||0,ui=Y.watch("proposedRoomRate")||0,ps=Y.watch("singleBedRoomRate")||0,co=Y.watch("doubleBedRoomRate")||0,Ya=Y.watch("familySuiteRate")||0,yd=Dt==="delete_rooms",Su=!yd&&Ga>0&&ps<=0,_u=!yd&&Bo>0&&co<=0,kc=!yd&&_i>0&&Ya<=0,Il=Su||_u||kc,is=Ga+Bo+_i,Ll=Ga*ue+Bo*bt+_i*vr,bd=is>ra,Pc=Ll>Yc,mp=is>0&&wn<is;b.useEffect(()=>{Ee&&Y.setValue("attachedWashrooms",is,{shouldDirty:!0})},[Ee,is,Y]);const ax=ps>0||co>0||Ya>0,Tc=Math.max(Ga>0?ps:0,Bo>0?co:0,_i>0?Ya:0,ax?0:ui),ca=is>0?Tc>0?Tc:ui:0,pp=ca>0?F2(ca):null,ox=De==="direct"?ca>0?`${c6e(ca)}/night`:"0/night":pp?((wh=UT.find(le=>le.value===pp))==null?void 0:wh.label)??"None selected":"0/night",da=ms&&is>0&&ca>0?HCe(ms,is,ca,A):null,gp=(da==null?void 0:da.warnings)??[],B=C&&gp.length>0,re=ms||"silver",Ne=A[re]??M5[re],Me=da==null?void 0:da.suggestedCategory,We=De==="direct"?Oe.some(le=>{const Fe=Bi(le.customRate,0)??0;if(Fe<=0)return!1;const _t=d6e(Fe,Ne);return _t==="below"||_t==="above"}):Oe.some(le=>{const Fe=UT.find(_t=>_t.value===le.tariffBucket);return Fe?bB[re]<bB[Fe.minCategory]:!1});T&&da&&da.isValid,!q.cctv||q.fireSafety;const gt=q.fireSafety&&(((ri=Y.watch("fireEquipmentDetails"))==null?void 0:ri.trim().length)||0)<10,At=Y.watch("propertyArea"),or=!yd&&(!At||Number(At)<=0),cr=Rl||bd||Pc||mp||or||Il||is===0,Vr=Object.values(P).filter(Boolean).length>=M2;console.log("Validation Debug:",{step:k,propertyArea:Y.watch("propertyArea"),propertyAreaMissing:or,fireEquipmentDetails:Y.watch("fireEquipmentDetails"),fireSafetyDetailsMissing:gt,selectedFireSafety:q.fireSafety,roomGuardrailsFailed:cr});const Qr=!(On!=null&&On.trim())||On==="__other"&&!(ns!=null&&ns.trim()),Rn=Ha==="gp"&&!(Lo!=null&&Lo.trim()),Cs=!(ss!=null&&ss.trim())||!(zn!=null&&zn.trim())||!gB.includes(zn)||!(Ni!=null&&Ni.trim())||!Ha||!$o||Qr||Rn,hi=Y.watch("guardianRelation"),Kn=!hi||!["s_o","d_o","w_o","c_o"].includes(hi.toLowerCase())||!(Ji!=null&&Ji.trim())||Ji.trim().length<3,Ci=k===1?Cs:k===2?Wa==="leased"||Kn&&Wa!=="leased":k===3?cr||pd||!Ee:k===4?!Vr||cr:k>4?cr:!1,Ai=k===1&&Cs?"Step 1 Missing":k===2&&Wa==="leased"?"Lease Check":k===2&&Kn?"Step 2 Missing":k===3&&Rl?"Lease Blocked":k===3&&bd?"Room Limit (>6)":k===3&&Pc?"Bed Limit (>15)":k===3&&mp?"Bathrooms < Rooms":k===3&&or?"Area Missing":k===3&&Il?"Tariff Missing":k===3&&is===0?"No Rooms":k===3&&pd?"GSTIN Block":k===3&&!Ee?"Sync Baths":k===3&&cr?"Guardrails Check":k===4&&(!Vr||cr)?"Step 4 Incomplete":"",ua=Y.watch(["distanceAirport","distanceRailway","distanceCityCenter","distanceShopping","distanceBusStand","nearestHospital","lobbyArea","diningArea","parkingArea","keyLocationHighlight1","keyLocationHighlight2","ecoFriendlyFacilities","differentlyAbledFacilities","fireEquipmentDetails"]),dl=b.useMemo(()=>{const le=Object.values(P).filter(Boolean).length,Fe=Math.min(le/M2*50,50),_t=["distanceAirport","distanceRailway","distanceCityCenter","distanceShopping","distanceBusStand","nearestHospital","lobbyArea","diningArea","parkingArea"],Er=_t.filter(Nr=>{const Ar=Y.getValues(Nr);return Ar!=null&&Ar!==""&&Ar!==0}).length/_t.length*25,en=["keyLocationHighlight1","keyLocationHighlight2","ecoFriendlyFacilities","differentlyAbledFacilities","fireEquipmentDetails"],Nn=en.filter(Nr=>{const Ar=Y.getValues(Nr);return Ar!=null&&String(Ar).trim()!==""}).length/en.length*25;return Math.round(Fe+Er+Nn)},[P,ua,Y]),ha=is>0&&ca>0?cre(is,ca,A):null;b.useEffect(()=>{ha&&ha!==ms&&Y.setValue("category",ha,{shouldDirty:!0})},[ha,Y,ms]);const lx=Object.values(q).filter(Boolean).length,Ec=(Kt==null?void 0:Kt.applicationNumber)??null,xh=async()=>{if(Ec)try{await navigator.clipboard.writeText(Ec),i({title:"Application number copied",description:Ec})}catch(le){i({title:"Copy failed",description:le instanceof Error?le.message:"Unable to copy application number",variant:"destructive"})}};b.useEffect(()=>{if(!Ut)return;const le=Ut;j(le.id),cn(le);const Fe=le.applicationKind;if(le.currentPage&&le.currentPage>=1&&le.currentPage<=J){let Et=le.currentPage;(Fe==="add_rooms"||Fe==="delete_rooms")&&Et<3?Et=3:Fe==="cancel_certificate"&&Et<6&&(Et=6),O(Et),D(Et)}else Fe==="add_rooms"||Fe==="delete_rooms"?(O(3),D(3)):Fe==="cancel_certificate"?(O(6),D(6)):(O(1),D(1));const _t=Xx(Fe);i({title:_t?`${FT(Fe)} draft ready`:"Draft loaded",description:_t?"This request is linked to your approved application. Review and submit once adjustments are complete.":"Continue editing your application from where you left off."})},[Ut]),b.useEffect(()=>{if(!Ut||!wt)return;const le=L2(wt.fullName||"");setTimeout(()=>{Y.setValue("ownerFirstName",le.firstName||"",{shouldDirty:!1}),Y.setValue("ownerLastName",le.lastName||"",{shouldDirty:!1}),Y.setValue("ownerName",wt.fullName||"",{shouldDirty:!1}),Y.setValue("ownerMobile",wt.mobile||"",{shouldDirty:!1}),Y.setValue("ownerEmail",wt.email||"",{shouldDirty:!1}),Y.setValue("ownerAadhaar",wt.aadhaarNumber||"",{shouldDirty:!1}),Y.setValue("ownerGender",I2(wt.gender),{shouldDirty:!1})},150)},[Ut,wt,Y]),b.useEffect(()=>{if(!(It!=null&&It.application))return;const le=It.application;if(!mf(le.status)){i({title:"Application not editable",description:"This application is no longer awaiting corrections.",variant:"destructive"}),e(`/applications/${le.id}`);return}N(le.id),cn(le),Q(!1),j(null),O(5),D(J);const Fe=new URL(window.location.href);Fe.searchParams.set("application",le.id),Fe.searchParams.delete("draft"),window.history.replaceState(null,"",Fe.pathname+Fe.search),i({title:"Continue with corrections",description:"Review each step, update details, and resubmit when ready."})},[It,i,e]),b.useEffect(()=>{if(!wt||v||x||Y.formState.isDirty)return;const le=L2(wt.fullName||""),Fe=wt.district||"",_t=(wt.tehsil||"").trim(),Et=Fe?vm(Fe):[];let Er="",en="";_t&&Et.includes(_t)?Er=_t:_t?(Er="__other",en=_t):Et.length>0&&(Er=Et[0]),Y.reset({propertyName:"",locationType:"mc",category:"silver",proposedRoomRate:0,singleBedRoomRate:0,doubleBedRoomRate:2e3,familySuiteRate:0,projectType:"new_project",propertyArea:0,propertyAreaUnit:"sqm",singleBedRooms:0,singleBedBeds:1,singleBedRoomSize:void 0,doubleBedRooms:0,doubleBedBeds:2,doubleBedRoomSize:void 0,familySuites:0,familySuiteBeds:4,familySuiteSize:void 0,attachedWashrooms:1,gstin:"",distanceAirport:void 0,distanceRailway:void 0,distanceCityCenter:void 0,distanceShopping:void 0,distanceBusStand:void 0,lobbyArea:void 0,diningArea:void 0,parkingArea:"",ecoFriendlyFacilities:"",differentlyAbledFacilities:"",fireEquipmentDetails:"",certificateValidityYears:"1",nearestHospital:"",ownerName:wt.fullName||"",ownerFirstName:le.firstName||"",ownerLastName:le.lastName||"",ownerGender:I2(wt.gender),ownerMobile:wt.mobile||"",ownerEmail:wt.email||"",ownerAadhaar:wt.aadhaarNumber||"",district:Fe,tehsil:Er,tehsilOther:en,gramPanchayat:wt.gramPanchayat||"",urbanBody:wt.urbanBody||"",ward:wt.ward||"",address:wt.address||"",pincode:wt.pincode||"",telephone:wt.telephone||""})},[wt,v,x,Y]),b.useEffect(()=>{if(zn&&yB[zn]){const le=yB[zn];Y.getValues("distanceAirport")===void 0&&Y.setValue("distanceAirport",le.airport),Y.getValues("distanceRailway")===void 0&&Y.setValue("distanceRailway",le.railway),Y.getValues("distanceCityCenter")===void 0&&Y.setValue("distanceCityCenter",le.cityCenter),Y.getValues("distanceShopping")===void 0&&Y.setValue("distanceShopping",le.shopping),Y.getValues("distanceBusStand")===void 0&&Y.setValue("distanceBusStand",le.busStand)}},[zn]),b.useEffect(()=>{k!==1||Bn.current||!Y.getValues("tehsil")&&Nt.current.value&&(Y.setValue("tehsil",Nt.current.value,{shouldDirty:!1,shouldValidate:!0}),Y.setValue("tehsilOther",Nt.current.other,{shouldDirty:!1,shouldValidate:!0}))},[Y,k]);const Fl=()=>{const le=zn==="Chamba"&&Fo==="Pangi";if(console.log("calculateFee - activeApplicationKind:",Dt),Dt==="delete_rooms"||Dt==="cancel_certificate")return console.log("Returning zero fee due to application kind:",Dt),{baseFee:0,totalBeforeDiscounts:0,validityDiscount:0,femaleOwnerDiscount:0,pangiDiscount:0,totalDiscount:0,totalFee:0,savingsAmount:0,savingsPercentage:0,gstAmount:0,perRoomFee:0};const Fe=zCe({category:ms,locationType:_c,validityYears:parseInt(Si),ownerGender:Ol||"male",isPangiSubDivision:le,discountMode:o});return{baseFee:Fe.baseFee,totalBeforeDiscounts:Fe.totalBeforeDiscounts,validityDiscount:Fe.validityDiscount,femaleOwnerDiscount:Fe.femaleOwnerDiscount,pangiDiscount:Fe.pangiDiscount,totalDiscount:Fe.totalDiscount,totalFee:Fe.finalFee,savingsAmount:Fe.savingsAmount,savingsPercentage:Fe.savingsPercentage,gstAmount:0,perRoomFee:0}},ul=Ot({mutationFn:async()=>{var Ar,Hn,gs,Oa,Ra;if(He)return i({title:"Drafts unavailable",description:"Use final submission instead. Draft saving is disabled while updating an existing application."}),null;const le=Y.getValues();console.log("[saveDraft] rawFormData.guardianRelation:",le.guardianRelation);const Fe=o6e.parse(le);console.log("[saveDraft] validatedData.guardianRelation:",Fe.guardianRelation);const _t=Fl(),Et=typeof Fe.tehsilOther=="string"?Fe.tehsilOther.trim():"",Er=Fe.tehsil==="__other"?Et:Fe.tehsil??"",en=Fe.tehsil==="__other"?Et:"",Vn=Ta(),Nn=Vn.reduce((Gn,fa)=>Gn+(fa.fileSize??0),0);if(Nn>R)throw new Error(`Combined document size ${wB(Nn)} exceeds ${c.totalPerApplicationMB} MB limit`);const Nr={...Fe,tehsil:Er,tehsilOther:en||"",ownerEmail:Fe.ownerEmail||void 0,amenities:q,nearbyAttractions:L,mandatoryChecklist:P,baseFee:_t.baseFee.toString(),totalBeforeDiscounts:((Ar=_t.totalBeforeDiscounts)==null?void 0:Ar.toString())||"0",validityDiscount:((Hn=_t.validityDiscount)==null?void 0:Hn.toFixed(2))||"0",femaleOwnerDiscount:((gs=_t.femaleOwnerDiscount)==null?void 0:gs.toFixed(2))||"0",pangiDiscount:((Oa=_t.pangiDiscount)==null?void 0:Oa.toFixed(2))||"0",totalDiscount:((Ra=_t.totalDiscount)==null?void 0:Ra.toFixed(2))||"0",totalFee:_t.totalFee.toFixed(2),perRoomFee:"0",gstAmount:"0",totalRooms:is,certificateValidityYears:parseInt(Si),isPangiSubDivision:zn==="Chamba"&&Er==="Pangi",currentPage:k,documents:Vn};if(y)try{return(await lt("PATCH",`/api/applications/${y}/draft`,Nr)).json()}catch(Gn){if(Gn.message&&(Gn.message.includes("404")||Gn.message.includes("not found")))console.warn(`Draft ${y} not found (404). Attempting to create new draft...`);else throw Gn}{const Gn=await fetch("/api/applications/draft",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Nr)});if(Gn.status===409){const fa=await Gn.json().catch(()=>({})),fl=new Error((fa==null?void 0:fa.message)||"An application already exists for this owner.");throw fl.status=409,fl.data=fa,fl}if(!Gn.ok){const fa=await Gn.text()||Gn.statusText;throw new Error(fa)}return Gn.json()}},onSuccess:le=>{if(le!=null&&le.application){if(!y){j(le.application.id);const Fe=new URL(window.location.href);Fe.searchParams.set("draft",le.application.id),window.history.replaceState(null,"",Fe.pathname+Fe.search)}er.invalidateQueries({queryKey:["/api/applications"]}),er.refetchQueries({queryKey:["/api/applications"]}),i({title:"Draft saved!",description:"Your progress has been saved. You can continue anytime."})}},onError:le=>{var Fe,_t;if((le==null?void 0:le.status)===409){i({title:"Existing application found",description:((Fe=le==null?void 0:le.data)==null?void 0:Fe.message)||"You already have an application on file. Please continue with the existing application."});const Et=(_t=le==null?void 0:le.data)==null?void 0:_t.existingApplicationId;Et&&Ge(`/applications/${Et}`);return}i({title:"Failed to save draft",description:le.message||"Please try again",variant:"destructive"})}}),Xa=Ot({mutationFn:async le=>{var ku,Pu,Sd,bp,jp,wp;const Fe=((ku=Kt==null?void 0:Kt.applicationNumber)==null?void 0:ku.startsWith("LG-HS-"))??!1;if(He&&Fe&&w){const _d={documents:Ta()};return(await lt("PATCH",`/api/applications/${w}`,_d)).json()}const _t=Fl(),Et=Ta(),Er=Et.reduce((zs,_d)=>zs+(_d.fileSize??0),0);if(Er>R)throw new Error(`Combined document size ${wB(Er)} exceeds ${c.totalPerApplicationMB} MB limit`);const en=typeof le.tehsilOther=="string"?le.tehsilOther.trim():"",Vn=le.tehsil==="__other"?en:le.tehsil,Nn=le.tehsil==="__other"?en:"";if(!Vn)throw new Error("Tehsil is required");const Nr=(le.singleBedRooms||0)+(le.doubleBedRooms||0)+(le.familySuites||0),Ar=(le.singleBedRooms||0)*(le.singleBedBeds||0)+(le.doubleBedRooms||0)*(le.doubleBedBeds||0)+(le.familySuites||0)*(le.familySuiteBeds||0);if(Nr>ra)throw new Error(`Total rooms cannot exceed ${ra}.`);if(Ar>Yc)throw new Error(`Total beds cannot exceed ${Yc}. Please adjust the bed counts per room type.`);if(Nr>0&&(le.attachedWashrooms||0)<Nr)throw new Error("Ensure the number of attached washrooms is at least equal to the total rooms.");if(T&&da&&!da.isValid)throw new Error(da.errors.join(" ")||"Category selection must meet the required thresholds before submission.");if(He&&w){const zs=Is(le.gramPanchayat),_d=Is(le.gramPanchayatOther),Df=Is(le.urbanBody),Vo=Is(le.urbanBodyOther),Dc=Is(le.ward),xy={propertyName:le.propertyName,locationType:le.locationType,district:le.district,tehsil:Vn,tehsilOther:Nn||"",gramPanchayat:zs??"",gramPanchayatOther:_d??"",urbanBody:Df??"",urbanBodyOther:Vo??"",ward:Dc??"",address:le.address,pincode:le.pincode,telephone:Is(le.telephone)??void 0,ownerName:le.ownerName,ownerFirstName:le.ownerFirstName,ownerLastName:le.ownerLastName,ownerGender:le.ownerGender,ownerMobile:le.ownerMobile,ownerEmail:Is(le.ownerEmail)??void 0,ownerAadhaar:le.ownerAadhaar,guardianName:Is(le.guardianName)??"",propertyOwnership:le.propertyOwnership,category:le.category,proposedRoomRate:le.proposedRoomRate,singleBedRoomRate:le.singleBedRoomRate,doubleBedRoomRate:le.doubleBedRoomRate,familySuiteRate:le.familySuiteRate,projectType:le.projectType,propertyArea:le.propertyArea,propertyAreaUnit:le.propertyAreaUnit,singleBedRooms:le.singleBedRooms,singleBedBeds:le.singleBedBeds,singleBedRoomSize:le.singleBedRoomSize,doubleBedRooms:le.doubleBedRooms,doubleBedBeds:le.doubleBedBeds,doubleBedRoomSize:le.doubleBedRoomSize,familySuites:le.familySuites,familySuiteBeds:le.familySuiteBeds,familySuiteSize:le.familySuiteSize,attachedWashrooms:le.attachedWashrooms,gstin:Is(le.gstin)??void 0,certificateValidityYears:parseInt(Si),isPangiSubDivision:zn==="Chamba"&&Vn==="Pangi",distanceAirport:le.distanceAirport,distanceRailway:le.distanceRailway,distanceCityCenter:le.distanceCityCenter,distanceShopping:le.distanceShopping,distanceBusStand:le.distanceBusStand,lobbyArea:le.lobbyArea,diningArea:le.diningArea,parkingArea:Is(le.parkingArea)??void 0,ecoFriendlyFacilities:Is(le.ecoFriendlyFacilities)??void 0,differentlyAbledFacilities:Is(le.differentlyAbledFacilities)??void 0,fireEquipmentDetails:Is(le.fireEquipmentDetails)??void 0,nearestHospital:Is(le.nearestHospital)??void 0,amenities:q,nearbyAttractions:L,baseFee:_t.baseFee,totalBeforeDiscounts:_t.totalBeforeDiscounts,validityDiscount:_t.validityDiscount,femaleOwnerDiscount:_t.femaleOwnerDiscount,pangiDiscount:_t.pangiDiscount,totalDiscount:_t.totalDiscount,totalFee:_t.totalFee,perRoomFee:0,gstAmount:0,totalRooms:is,documents:Et};return(await lt("PATCH",`/api/applications/${w}`,xy)).json()}const gs=le.category==="gold"||le.category==="diamond"?O4(le.gstin??""):void 0,Oa={...le,tehsil:Vn,tehsilOther:Nn||"",gstin:gs},Ra=Is(le.gramPanchayat),Gn=Is(le.gramPanchayatOther),fa=Is(le.urbanBody),fl=Is(le.urbanBodyOther),Ul=Is(le.ward),ql={...Oa,gstin:gs,ownerEmail:Is(le.ownerEmail)||void 0,telephone:Is(le.telephone)||void 0,gramPanchayat:Ra??void 0,gramPanchayatOther:Gn??void 0,urbanBody:fa??void 0,urbanBodyOther:fl??void 0,ward:Ul??void 0,propertyOwnership:le.propertyOwnership,parkingArea:Is(le.parkingArea)||void 0,ecoFriendlyFacilities:Is(le.ecoFriendlyFacilities)||void 0,differentlyAbledFacilities:Is(le.differentlyAbledFacilities)||void 0,fireEquipmentDetails:Is(le.fireEquipmentDetails)||void 0,nearestHospital:Is(le.nearestHospital)||void 0,amenities:q,nearbyAttractions:L,baseFee:_t.baseFee.toString(),totalBeforeDiscounts:((Pu=_t.totalBeforeDiscounts)==null?void 0:Pu.toString())||"0",validityDiscount:((Sd=_t.validityDiscount)==null?void 0:Sd.toFixed(2))||"0",femaleOwnerDiscount:((bp=_t.femaleOwnerDiscount)==null?void 0:bp.toFixed(2))||"0",pangiDiscount:((jp=_t.pangiDiscount)==null?void 0:jp.toFixed(2))||"0",totalDiscount:((wp=_t.totalDiscount)==null?void 0:wp.toFixed(2))||"0",totalFee:_t.totalFee.toFixed(2),perRoomFee:"0",gstAmount:"0",totalRooms:is,certificateValidityYears:parseInt(Si),isPangiSubDivision:zn==="Chamba"&&Vn==="Pangi",status:"submitted",submittedAt:new Date().toISOString(),documents:Et,formCompletionTimeSeconds:y?parseInt(localStorage.getItem(`hptourism_timer_${y}`)||"0",10):0};return(await lt("POST","/api/applications",ql)).json()},onSuccess:le=>{er.invalidateQueries({queryKey:["/api/applications"]}),y&&GDe(y),i({title:He?"Application resubmitted successfully!":"Application submitted successfully!",description:He?"Your corrections have been submitted for review. You will be notified of the outcome.":"Your homestay application has been submitted for review."}),e("/dashboard")},onError:le=>{i({title:He?"Failed to resubmit application":"Failed to create application",description:le.message||"Please try again",variant:"destructive"})}}),Cu=le=>{const Fe=Y.getValues("category");if(Fe!=="gold"&&Fe!=="diamond")return!0;const _t=Y.getValues("gstin"),Et=O4(_t??""),Er=()=>{le!=null&&le.redirectToStep3&&O(3),le!=null&&le.showToast&&i({title:"GSTIN required before submission",description:"Fill the GSTIN on the Rooms & Category step to continue."}),le!=null&&le.focusField&&requestAnimationFrame(()=>{var en;(en=document.querySelector('[data-testid="input-gstin"]'))==null||en.focus()})};return Et?Et.length!==15||!/^[0-9A-Z]{15}$/.test(Et)?(Y.setError("gstin",{type:"manual",message:"GSTIN must be 15 characters (numbers and capital letters only)"}),Er(),!1):(Et!==_t?Y.setValue("gstin",Et,{shouldValidate:!0,shouldDirty:!0}):Y.clearErrors("gstin"),!0):(Y.setError("gstin",{type:"manual",message:"GSTIN is required for Diamond and Gold categories"}),Er(),!1)},Ea=async le=>{var _t;if(console.log("onSubmit called - Step:",k,"Total Steps:",J),console.log("Form data:",le),console.log("Form errors:",Y.formState.errors),k!==J){console.warn("Form submission blocked - not on final step");return}if(!(!Cu({redirectToStep3:!0,focusField:!0,showToast:!0})||!await Y.trigger(void 0,{shouldFocus:!0}))){if(He&&!fe){i({title:"Confirm corrections",description:"Please confirm that you have addressed all issues before resubmitting.",variant:"destructive"});return}if(m&&!He&&Dt!=="delete_rooms"&&Dt!=="cancel_certificate"){console.log("Upfront payment mode - redirecting to payment...");try{i({title:"Saving Application",description:"Saving your application details before redirecting to payment..."});const Et=await ul.mutateAsync(le),Er=((_t=Et==null?void 0:Et.application)==null?void 0:_t.id)||y;Er?(i({title:"Redirecting...",description:"Redirecting to payment gateway..."}),e(`/applications/${Er}/payment-himkosh?upfront=true`)):(console.error("No application ID returned after save"),i({title:"Error",description:"Could not proceed to payment",variant:"destructive"}))}catch(Et){console.error("Failed to save draft for payment:",Et),i({title:"Error",description:"Failed to save application. Please try again.",variant:"destructive"})}return}console.log("Submitting application..."),Xa.mutate(le)}},vh=async()=>{var le,Fe,_t;if(console.log("Next Step Clicked:",{step:k,activeApplicationKind:Dt,isCorrectionMode:He}),k===1){if(!await Y.trigger(["propertyName","address","district","pincode","locationType"])){i({title:"Please complete all required fields",description:"Fill in all mandatory property details before proceeding",variant:"destructive"});return}if(Y.getValues("tehsil")==="__other"&&!await Y.trigger("tehsilOther")){i({title:"Enter tehsil name",description:"Provide the tehsil or sub-division name when using the manual option",variant:"destructive"});return}}if(k===2){if(!Y.getValues("guardianRelation")){Y.setError("guardianRelation",{type:"manual",message:"Relationship is required"}),i({title:"Relationship Required",description:"Please select a relationship (S/O, D/O, W/O, or C/O)",variant:"destructive"});return}if((((le=Y.getValues("guardianName"))==null?void 0:le.trim())||"").length<3){Y.setError("guardianName",{type:"manual",message:"Father's/Husband's name is required (min 3 characters)"}),i({title:"Father's/Husband's Name Required",description:"Please enter the father's or husband's name as per Aadhaar card",variant:"destructive"});return}if(!await Y.trigger(["ownerFirstName","ownerLastName","ownerName","ownerMobile","ownerEmail","ownerAadhaar","ownerGender","guardianRelation","propertyOwnership"])){i({title:"Please complete all required fields",description:"Fill in all mandatory owner information before proceeding",variant:"destructive"});return}}if(k===3){if(Dt==="delete_rooms"){if(!await Y.trigger(["singleBedRooms","doubleBedRooms","familySuites","singleBedBeds","doubleBedBeds","familySuiteBeds"])){i({title:"Invalid room configuration",description:"Please check your room and bed counts.",variant:"destructive"});return}if(!He){const fl=Y.getValues();ul.mutate({...fl,currentPage:6})}O(6),D(6),window.scrollTo(0,0);return}const Et=Y.getValues("category"),Er=["category","proposedRoomRate","projectType","propertyArea","singleBedRooms","singleBedBeds","doubleBedRooms","doubleBedBeds","familySuites","familySuiteBeds","attachedWashrooms"];if((Et==="diamond"||Et==="gold")&&(Er.push("gstin"),!Cu({focusField:!0})))return;if(!await Y.trigger(Er)){i({title:"Please complete all required fields",description:"Fill in all mandatory room details before proceeding",variant:"destructive"});return}const Vn=Y.getValues("singleBedRooms")||0,Nn=Y.getValues("doubleBedRooms")||0,Nr=Y.getValues("familySuites")||0,Ar=Vn+Nn+Nr;if(Ar>ra){i({title:"Room limit exceeded",description:`HP Homestay Rules permit a maximum of ${ra} rooms. You currently have ${Ar}.`,variant:"destructive"});return}if(Vn*(Y.getValues("singleBedBeds")||0)+Nn*(Y.getValues("doubleBedBeds")||0)+Nr*(Y.getValues("familySuiteBeds")||0)>Yc){i({title:"Maximum beds exceeded",description:`Total beds across all room types cannot exceed ${Yc}. Please adjust the bed counts.`,variant:"destructive"});return}if((!q.cctv||!q.fireSafety)&&Dt!=="delete_rooms"){i({title:"Mandatory safety items missing",description:"Install CCTV coverage and fire-safety equipment before continuing.",variant:"destructive"});return}if((((Fe=Y.getValues("fireEquipmentDetails"))==null?void 0:Fe.trim())||"").length<10&&Dt!=="delete_rooms")return;const Oa=Number(Y.getValues("singleBedRoomRate")||Y.getValues("proposedRoomRate")||0),Ra=Number(Y.getValues("doubleBedRoomRate")||Y.getValues("proposedRoomRate")||0),Gn=Number(Y.getValues("familySuiteRate")||Y.getValues("proposedRoomRate")||0);if(Vn>0&&Oa<=0&&Dt!=="delete_rooms"){i({title:"Room rate required",description:"Please enter the nightly rate for Single Bed rooms.",variant:"destructive"});return}if(Nn>0&&Ra<=0&&Dt!=="delete_rooms"){i({title:"Room rate required",description:"Please enter the nightly rate for Double Bed rooms.",variant:"destructive"});return}if(Nr>0&&Gn<=0&&Dt!=="delete_rooms"){i({title:"Room rate required",description:"Please enter the nightly rate for Family Suites.",variant:"destructive"});return}}if(k===4&&Dt!=="delete_rooms"){const Et=Object.values(P).filter(Boolean).length;if(Et<M2){i({title:"Mandatory Checklist Incomplete",description:`Please confirm all ${M2} mandatory facilities. You have confirmed ${Et} so far.`,variant:"destructive"});return}}if(k===5){const Et=((_t=Kt==null?void 0:Kt.applicationNumber)==null?void 0:_t.startsWith("LG-HS-"))??!1;if(!(Dt==="delete_rooms"||Et)){const en=[];if(Z.revenuePapers.length===0&&en.push("Revenue Papers"),Z.affidavitSection29.length===0&&en.push("Affidavit under Section 29"),Z.undertakingFormC.length===0&&en.push("Undertaking in Form-C"),El&&(Z.commercialElectricityBill.length===0&&en.push("Commercial electricity bill"),Z.commercialWaterBill.length===0&&en.push("Commercial water bill")),W.length<2&&en.push("Property Photos (minimum 2)"),en.length>0){i({title:"Required ANNEXURE-II documents missing",description:`Please upload: ${en.join(", ")}`,variant:"destructive"});return}}}if(k<J){const Et=k+1;He||ul.mutate(),O(Et),D(Math.max($,Et))}},yh=()=>{if(k===6&&Dt==="delete_rooms"){O(3);return}k>1&&O(k-1)},xp=le=>({diamond:{label:"Diamond",variant:"default"},gold:{label:"Gold",variant:"secondary"},silver:{label:"Silver",variant:"outline"}})[le];if(!(t!=null&&t.user))return null;const $l=Fl(),ti=le=>{le<=$&&O(le)},Oc={...Y.getValues(),revenuePapers:Z.revenuePapers,affidavitSection29:Z.affidavitSection29,undertakingFormC:Z.undertakingFormC,commercialElectricityBill:Z.commercialElectricityBill,commercialWaterBill:Z.commercialWaterBill,propertyPhotos:W},bh=((yp=ut==null?void 0:ut.clarificationRequested)==null?void 0:yp.trim())||null,vp=((Bl=ut==null?void 0:ut.dtdoRemarks)==null?void 0:Bl.trim())||((Vl=ut==null?void 0:ut.daRemarks)==null?void 0:Vl.trim())||null,hl=ut!=null&&ut.status?ut.status.replace(/_/g," "):"Corrections requested",jh=ut!=null&&ut.dtdoRemarks?"DTDO":ut!=null&&ut.daRemarks?"DA":"Review team";return b.useEffect(()=>{Dt==="delete_rooms"&&(k===4||k===5)&&(console.warn("Failsafe: forcing step 6 for delete_rooms"),O(6),D(6))},[k,Dt]),r.jsx("div",{className:"container mx-auto px-4 py-8 relative",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[He&&w&&r.jsx("div",{className:"mb-6 border border-amber-200 bg-amber-50/80 rounded-lg p-4 space-y-3",children:r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"w-6 h-6 text-amber-600 mt-0.5 flex-shrink-0"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"font-semibold text-amber-900",children:["Corrections required (",hl,")"]}),r.jsxs("p",{className:"text-sm text-amber-800",children:["You are updating application #",((w==null?void 0:w.slice(0,8))||"").toUpperCase()," We restored your previous answers so you can fix remarks quickly."]}),bh?r.jsxs("p",{className:"text-sm text-amber-900",children:["Action requested: ",r.jsx("span",{className:"font-semibold",children:bh})]}):null,vp?r.jsxs("p",{className:"text-sm text-amber-800",children:[jh," note: ",r.jsx("span",{className:"font-semibold",children:vp})]}):r.jsx("p",{className:"text-sm text-amber-700",children:"Review each step, upload corrected documents, and resubmit to continue the approval workflow."})]})]}),r.jsx(ze,{variant:"secondary",className:"bg-amber-100 text-amber-900 border-amber-200",children:"Action needed"})]})}),gr&&yt&&r.jsxs(fn,{className:"mb-6 border-sky-200 bg-sky-50",children:[r.jsxs(Po,{className:"flex items-center gap-2",children:[r.jsx(Poe,{kind:Dt,showDefault:!0}),FT(Dt)," draft"]}),r.jsx(mn,{children:Dt==="renewal"?"You are renewing an approved certificate. Property and ownership details are locked to prevent accidental edits.":Dt==="add_rooms"?"You are requesting to add rooms to the approved inventory. Update Step 3 to capture the additional rooms.":"You are requesting to delete rooms from the approved inventory. Verify the counts below and provide the updated documents."}),r.jsxs("div",{className:"mt-4 grid gap-3 text-sm text-slate-700 md:grid-cols-2",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Linked application:"})," ",bi||""]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Certificate #:"})," ",ei||""]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Certificate valid upto:"})," ",R4(rn)]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Current rooms:"})," ",yt.totalRooms," total"]}),vn&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Target rooms:"})," ",vn.total," total (S:",vn.single??yt.singleBedRooms,"  D:",vn.double??yt.doubleBedRooms,"  F:",vn.family??yt.familySuites,")"]}),(Fn==null?void 0:Fn.renewalWindow)&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Renewal window:"})," ",R4(Fn.renewalWindow.start),"  ",R4(Fn.renewalWindow.end)]}),typeof rs=="number"&&r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Room delta:"})," ",rs>0?`+${rs}`:rs]})]}),r.jsxs("div",{className:"mt-3 flex flex-wrap gap-3 text-xs text-slate-600",children:[An&&r.jsx(te,{variant:"outline",size:"sm",onClick:()=>e(`/applications/${An}`),children:"View approved record"}),En&&r.jsxs("span",{className:"italic",children:["Note: ",En]})]})]}),Ec&&r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between rounded-md border bg-muted/40 px-4 py-3 mb-4",children:[r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Application #:"," ",r.jsx("span",{className:"font-semibold text-foreground",children:Ec})]}),r.jsx("div",{className:"flex items-center gap-3",children:r.jsxs(te,{size:"sm",variant:"ghost",className:"gap-2",onClick:xh,type:"button",children:[r.jsx(CR,{className:"h-4 w-4"}),"Copy"]})})]}),r.jsxs("div",{className:"flex justify-end items-center gap-4 mb-6 mt-2",children:[r.jsx(XDe,{formData:Oc,currentStep:k,totalSteps:J,mandatoryChecks:P}),r.jsx(KDe,{applicationId:y||S,isSubmitted:!1})]}),r.jsx(GRe,{currentStep:k,maxStepReached:$,totalSteps:J,formData:Oc,onStepClick:ti,steps:SB,step4Completion:dl}),r.jsx(du,{...Y,children:r.jsxs("form",{onSubmit:Y.handleSubmit(Ea),className:"space-y-6",children:[r.jsx("div",{ref:xd}),k===1&&r.jsx(oDe,{form:Y,step:k,isServiceDraft:gr,watchedDistrict:Cc,locationType:Ha,pincodeSuffixValue:Ac,showPincodeHint:Ml,showRequiredWarning:Cs,gramFieldConfig:wu,urbanBodyConfig:Io}),k===2&&r.jsx(vDe,{form:Y,ownerGender:Ol,propertyOwnership:Wa,showRequiredWarning:Kn,goToProfile:n,renderProfileManagedDescription:s}),k===3&&r.jsx(wDe,{form:Y,category:ms,totalRooms:is,totalBeds:Ll,highestTariffLabel:ox,highestRoomRate:ca,categoryRateBands:A,roomCalcMode:De,type2CategoryConflict:We,categoryWarnings:gp,lockToRecommendedCategory:C,suggestedCategory:Me,originalRates:zr?{single:Number(zr.singleBedRoomRate||zr.proposedRoomRate||0),double:Number(zr.doubleBedRoomRate||zr.proposedRoomRate||0),suite:Number(zr.familySuiteRate||zr.proposedRoomRate||0)}:void 0,fixedQuantities:Dt==="delete_rooms"&&vn?{single:vn.single,double:vn.double,suite:vn.family}:void 0,type2Rows:Oe,addType2Row:Zt,removeType2Row:$n,updateType2Row:tr,resetType2Rows:qa,syncAttachedBaths:Ee,setSyncAttachedBaths:Re,selectedAmenities:q,setSelectedAmenities:M,openAreaConverter:qe,resolvedCategory:re,resolvedCategoryBand:Ne,shouldLockCategoryWarning:B,activeApplicationKind:Dt,currentCategory:zr==null?void 0:zr.category}),k===4&&r.jsx(SDe,{form:Y,selectedAttractions:L,setSelectedAttractions:V,mandatoryChecks:P,setMandatoryChecks:z}),k===5&&r.jsx(BDe,{uploadedDocuments:Z,setUploadedDocuments:F,propertyPhotos:W,setPropertyPhotos:G,additionalDocuments:H,setAdditionalDocuments:se,requiresCommercialUtilityProof:El,isCorrection:He,correctionNotes:(ut==null?void 0:ut.correctionNotes)||void 0,applicationKind:Dt??void 0,isLegacyRC:((Pf=Kt==null?void 0:Kt.applicationNumber)==null?void 0:Pf.startsWith("LG-HS-"))??!1}),k===6&&Dt==="cancel_certificate"?r.jsx(HDe,{form:Y,cancellationConfirmed:Vt,setCancellationConfirmed:pt,activeDraftApplication:yt}):k===6&&Dt==="delete_rooms"?r.jsx(WDe,{form:Y,submitConfirmed:Ht,setSubmitConfirmed:wr,activeDraftApplication:yt,title:"Confirm Room Deletion",description:"You are about to submit a request to remove rooms from your registered inventory. No payment is required for this action.",confirmationText:"I confirm that I want to remove the specified rooms from my registration.",currentRooms:(Tf=Ct==null?void 0:Ct.applications.find(le=>le.id===An))==null?void 0:Tf.totalRooms}):k===6?r.jsx(zDe,{form:Y,selectedAmenities:q,setSelectedAmenities:M,AMENITIES:Pp,MANDATORY_AMENITY_IDS:Ou,category:ms,locationType:Ha,certificateValidityYears:Si,fees:$l,getCategoryBadge:xp,LOCATION_LABEL_MAP:n6e,totalRooms:is,activeDraftApplication:yt,correctionId:w,selectedAmenitiesCount:lx,isUpgrade:Dt==="change_category"&&!!$l._isUpgrade,upgradeFeeInfo:$l._isUpgrade?{previousCategory:$l._previousCategory,previousCategoryFee:$l._previousCategoryFee,newCategoryFee:$l._newCategoryFee,upgradeFee:$l._upgradeFee}:void 0}):null,r.jsxs("div",{className:"flex flex-wrap justify-between gap-4",children:[k>1&&r.jsxs(te,{type:"button",variant:"outline",onClick:yh,"data-testid":"button-previous",children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Previous"]}),r.jsx("div",{className:"flex-1"}),!He&&r.jsxs(te,{type:"button",variant:"outline",onClick:()=>ul.mutate(),disabled:ul.isPending,"data-testid":"button-save-draft",children:[r.jsx(pu,{className:"w-4 h-4 mr-2"}),ul.isPending?"Saving...":"Save Draft"]}),k===J&&Dt!=="cancel_certificate"&&r.jsxs(te,{type:"button",variant:"outline",onClick:()=>he(!0),"data-testid":"button-preview",children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Preview Application"]}),k===J&&Dt==="cancel_certificate"&&r.jsx(te,{type:"button",variant:"destructive",disabled:!Vt||Xa.isPending,onClick:()=>Xa.mutate(Y.getValues()),"data-testid":"button-submit-cancellation",children:Xa.isPending?"Submitting...":"Submit Cancellation Request"}),ka&&k===5&&r.jsxs("div",{className:"w-full space-y-4",children:[r.jsx("div",{className:"rounded-lg border-2 border-green-300 bg-green-50 p-4 text-green-900 dark:border-green-900/40 dark:bg-green-950/20",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"w-5 h-5 text-green-600"}),r.jsx("p",{className:"text-lg font-bold",children:"Ready to Resubmit"})]}),r.jsx("p",{className:"text-sm",children:"Your Existing RC application is ready for resubmission. Any supporting documents uploaded will be reviewed by the verifying officer."}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx(Zs,{id:"legacy-rc-ack",checked:fe,onCheckedChange:le=>Q(!!le)}),r.jsx("label",{htmlFor:"legacy-rc-ack",className:"text-sm font-medium cursor-pointer",children:"I confirm the corrections are complete and ready for review"})]})]})}),r.jsxs(te,{type:"button",className:"w-full",disabled:!fe||Xa.isPending,onClick:()=>Xa.mutate(Y.getValues()),"data-testid":"button-submit-legacy-rc",children:[r.jsx(Zd,{className:"w-4 h-4 mr-2"}),Xa.isPending?"Submitting...":"Resubmit for Verification"]})]}),He&&k===J&&r.jsx("div",{className:"w-full rounded-lg border-2 border-amber-300 bg-amber-50 p-5 text-amber-900 dark:border-amber-900/40 dark:bg-amber-950/20",children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Kr,{className:"w-5 h-5 text-amber-600"}),r.jsx("p",{className:"text-2xl font-bold",children:"Final Confirmation Required"})]}),r.jsx("p",{className:"text-sm font-medium",children:"I confirm that every issue highlighted by DA/DTDO has been fully addressed. I understand that my application may be rejected if the corrections remain unsatisfactory."}),r.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[r.jsx(Zs,{id:"correction-ack",checked:fe,onCheckedChange:le=>Q(!!le)}),r.jsx("label",{htmlFor:"correction-ack",className:"text-sm font-semibold cursor-pointer",children:"I agree and want to resubmit the application"})]})]})}),k<J&&!(ka&&k===5)?r.jsxs(r.Fragment,{children:[r.jsxs(te,{type:"button",onClick:le=>{le.preventDefault(),vh()},disabled:Ci,"data-testid":"button-next",children:["Next",r.jsx(sa,{className:"w-4 h-4 ml-2"})]}),Ci&&r.jsxs("div",{className:"absolute top-full mt-2 right-0 bg-red-100 text-red-800 text-xs px-2 py-1 rounded border border-red-300 whitespace-nowrap z-50",children:["Next Disabled: ",Ai]})]}):Dt!=="cancel_certificate"&&!ka&&k===J&&r.jsxs(te,{type:"submit",disabled:Xa.isPending||He&&!fe||Dt==="delete_rooms"&&!Ht,"data-testid":"button-submit-application",onClick:async()=>{console.log("Submit button clicked");const le=await Y.trigger();if(console.log("Form is valid:",le),!le){const Fe=Y.formState.errors;console.log("Form errors:",Fe);const _t=Object.keys(Fe),Et=SB.find(Er=>Er.requiredFields.some(en=>_t.includes(en)));if(Et){O(Et.id),i({title:`Validation Error in Step ${Et.id}`,description:`Redirecting to ${Et.label}. Please check highlighted fields.`,variant:"destructive"});return}i({title:"Form validation failed",description:"Please check all fields are filled correctly.",variant:"destructive"})}},children:[r.jsx(Zd,{className:"w-4 h-4 mr-2"}),Xa.isPending?"Submitting...":Nu]})]})]})}),r.jsx(us,{open:Qe.open,onOpenChange:le=>{le||Ke()},children:r.jsxs(Jn,{className:"sm:max-w-[480px]",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Convert traditional area units"}),r.jsx(Ns,{children:"Approximate conversion for Kanal, Marla, and Bigha. Values are estimates; refer to your revenue records for precise measurements."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground mb-1",children:"Unit"}),r.jsxs(pr,{value:ae.unit,onValueChange:le=>we(Fe=>({...Fe,unit:le})),children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select unit"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"kanal",children:"Kanal"}),r.jsx(it,{value:"marla",children:"Marla"}),r.jsx(it,{value:"bigha",children:"Bigha"}),r.jsx(it,{value:"sqft",children:"Square feet"}),r.jsx(it,{value:"sqm",children:"Square metres"})]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground mb-1",children:"Value"}),r.jsx(Pe,{type:"number",min:0,step:"0.01",value:ae.value,onChange:le=>we(Fe=>({...Fe,value:le.target.value}))})]})]}),r.jsxs("div",{className:"rounded-lg border p-3 text-sm bg-muted/30",children:[r.jsx("p",{className:"font-semibold",children:"Converted area"}),Te.sqm>0?r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:Te.sqm.toFixed(2)})," sq. metres"]}),r.jsxs("p",{className:"text-muted-foreground",children:["(",Te.sqft.toFixed(0)," sq. feet)"]})]}):r.jsx("p",{className:"text-muted-foreground mt-2",children:"Enter a value above to see the conversion."})]}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"1 Kanal  505.86 sq.m., 1 Marla  25.29 sq.m., 1 Bigha  802.34 sq.m. Conversions may vary slightly by district."}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(te,{variant:"outline",onClick:Ke,children:"Cancel"}),r.jsxs(te,{onClick:_s,disabled:!Qe.rowId||Te.sqm<=0,children:["Use ",Te.sqm>0?Te.sqm.toFixed(2):"converted"," sq.m."]})]})]})]})}),r.jsx(us,{open:X,onOpenChange:he,children:r.jsxs(Jn,{className:"max-w-4xl max-h-[90vh] p-0 gap-0 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-emerald-600 via-teal-600 to-cyan-600 text-white p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-widest text-white/70 mb-1",children:"HP TOURISM ESERVICES"}),r.jsx("h2",{className:"text-xl font-bold",children:"Homestay Registration Application"}),r.jsx("p",{className:"text-sm text-white/80 mt-1",children:"Review all details before final submission"})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex gap-2 justify-end mb-2",children:[r.jsx(ze,{className:"bg-white/20 text-white border-0 hover:bg-white/30",children:((Ef=Y.watch("category"))==null?void 0:Ef.toUpperCase())||""}),r.jsx(ze,{className:"bg-white/20 text-white border-0 hover:bg-white/30",children:Y.watch("projectType")==="new_project"?"New Project":"New Rooms"})]}),r.jsxs("p",{className:"text-lg font-semibold",children:[is," Rooms"]})]})]})}),r.jsx(P6,{className:"h-[calc(90vh-200px)]",children:r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"rounded-xl border bg-gradient-to-b from-slate-50 to-white p-5",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Js,{className:"w-5 h-5 text-emerald-600"}),"Property Snapshot"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Property Name"}),r.jsx("p",{className:"font-semibold text-slate-800",children:Y.watch("propertyName")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Total Rooms"}),r.jsxs("p",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(Qv,{className:"w-4 h-4 text-slate-400"}),is," rooms"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Address"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("address")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"District"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("district")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Tehsil"}),r.jsx("p",{className:"font-medium text-slate-700",children:Dl})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Village / Locality"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("gramPanchayat")||Y.watch("urbanBody")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"PIN Code"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("pincode")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Location Type"}),r.jsx("p",{className:"font-medium text-slate-700",children:((Of=r6e.find(le=>le.value===Y.watch("locationType")))==null?void 0:Of.label)||""})]})]})]}),r.jsxs("div",{className:"rounded-xl border p-5",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(li,{className:"w-5 h-5 text-emerald-600"}),"Owner Information"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Owner Name"}),r.jsx("p",{className:"font-semibold text-slate-800",children:Y.watch("ownerName")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Mobile"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("ownerMobile")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Email"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("ownerEmail")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Aadhaar"}),r.jsx("p",{className:"font-medium text-slate-700",children:Y.watch("ownerAadhaar")||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-slate-500 mb-1",children:"Ownership Type"}),r.jsx("p",{className:"font-medium text-slate-700",children:Wa?s6e[Wa]:""})]})]})]}),r.jsxs("div",{className:"rounded-xl border p-5",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Qv,{className:"w-5 h-5 text-emerald-600"}),"Room Details & Category"]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:Y.watch("singleBedRooms")||0}),r.jsx("p",{className:"text-xs text-slate-500",children:"Single Rooms"})]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:Y.watch("doubleBedRooms")||0}),r.jsx("p",{className:"text-xs text-slate-500",children:"Double Rooms"})]}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 text-center",children:[r.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:Y.watch("familySuites")||0}),r.jsx("p",{className:"text-xs text-slate-500",children:"Family Suites"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Total Beds"}),r.jsx("span",{className:"font-medium",children:Ll})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Attached Washrooms"}),r.jsx("span",{className:"font-medium",children:Ee?is:0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Property Area"}),r.jsxs("span",{className:"font-medium",children:[Y.watch("propertyArea")||0," sq m"]})]}),Ga>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Single Room Rate"}),r.jsxs("span",{className:"font-medium",children:["",ps,"/night"]})]}),Bo>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Double Room Rate"}),r.jsxs("span",{className:"font-medium",children:["",co,"/night"]})]}),_i>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-500",children:"Family Suite Rate"}),r.jsxs("span",{className:"font-medium",children:["",Ya,"/night"]})]})]})]}),r.jsxs("div",{className:"rounded-xl border p-5 space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(Vm,{className:"w-5 h-5 text-emerald-600"}),"Amenities & Safety"]})}),r.jsxs("div",{className:"bg-emerald-50/50 rounded-lg p-4 border border-emerald-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("h4",{className:"text-sm font-medium text-emerald-800 flex items-center gap-2",children:[r.jsx(Jo,{className:"w-4 h-4"}),"Mandatory Safety Compliance"]}),r.jsxs(ze,{variant:Pp.filter(le=>Ou.has(le.id)&&q[le.id]).length===Ou.size?"default":"destructive",className:Pp.filter(le=>Ou.has(le.id)&&q[le.id]).length===Ou.size?"bg-emerald-600 hover:bg-emerald-700":"",children:[Pp.filter(le=>Ou.has(le.id)&&q[le.id]).length," / ",Ou.size," Selected"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Pp.filter(le=>Ou.has(le.id)).map(le=>{const Fe=q[le.id],_t=le.icon;return r.jsxs("div",{className:`flex items-center gap-3 p-2 rounded-md border ${Fe?"bg-white border-emerald-200":"bg-gray-50 border-gray-200 opacity-60"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${Fe?"bg-emerald-100 text-emerald-600":"bg-gray-200 text-gray-400"}`,children:r.jsx(_t,{className:"w-4 h-4"})}),r.jsx("span",{className:`text-sm font-medium ${Fe?"text-slate-700":"text-slate-500"}`,children:le.label}),Fe&&r.jsx(Fr,{className:"w-4 h-4 text-emerald-600 ml-auto"})]},le.id)})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-slate-700 mb-3 ml-1",children:"Comfort & Convenience"}),Pp.filter(le=>!Ou.has(le.id)&&q[le.id]).length>0?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:Pp.filter(le=>!Ou.has(le.id)&&q[le.id]).map(le=>{const Fe=le.icon;return r.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg border bg-slate-50/50 hover:bg-slate-50 transition-colors",children:[r.jsx(Fe,{className:"w-4 h-4 text-slate-500"}),r.jsx("span",{className:"text-sm text-slate-600",children:le.label})]},le.id)})}):r.jsx("p",{className:"text-sm text-slate-400 italic pl-1",children:"No additional amenities selected"})]})]}),r.jsxs("div",{className:"rounded-xl border p-5 space-y-4 bg-slate-50/50",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 flex items-center gap-2",children:[r.jsx(Fr,{className:"w-5 h-5 text-emerald-600"}),"Regulatory Checklist"]}),r.jsx(ze,{className:"bg-emerald-600 hover:bg-emerald-700",children:"18 / 18 Verified"})]}),r.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-3 border-b pb-2",children:"Mandatory Facilities (Annexure-III)"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 max-h-60 overflow-y-auto pr-2",children:Iu.map((le,Fe)=>r.jsxs("div",{className:"flex items-start gap-2 text-xs text-slate-600",children:[r.jsx(Fr,{className:"w-3 h-3 text-emerald-500 mt-0.5 shrink-0"}),r.jsx("span",{children:le.label})]},le.id))})]}),(()=>{const le=Y.watch("ecoFriendlyFacilities")||"",Fe=Y.watch("differentlyAbledFacilities")||"",_t=(le+","+Fe).toLowerCase(),Et=$T.filter(Er=>_t.includes(Er.label.toLowerCase()));return Et.length>0?r.jsxs("div",{className:"bg-white rounded-lg border p-4",children:[r.jsx("p",{className:"text-sm font-medium text-slate-700 mb-3 border-b pb-2",children:"Desirable Facilities"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Et.map(Er=>r.jsx(ze,{variant:"outline",className:"bg-slate-50 text-slate-600 border-slate-200",children:Er.label},Er.id))})]}):null})()]}),r.jsxs("div",{className:"rounded-xl border p-5",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(ir,{className:"w-5 h-5 text-emerald-600"}),"Uploaded Documents"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-slate-600",children:"Revenue Papers"}),r.jsxs(ze,{variant:Z.revenuePapers.length>0?"default":"secondary",children:[Z.revenuePapers.length," file(s)"]})]}),r.jsxs("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-slate-600",children:"Affidavit Section 29"}),r.jsxs(ze,{variant:Z.affidavitSection29.length>0?"default":"secondary",children:[Z.affidavitSection29.length," file(s)"]})]}),r.jsxs("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-slate-600",children:"Undertaking Form-C"}),r.jsxs(ze,{variant:Z.undertakingFormC.length>0?"default":"secondary",children:[Z.undertakingFormC.length," file(s)"]})]}),r.jsxs("div",{className:"flex items-center justify-between bg-slate-50 rounded-lg px-3 py-2",children:[r.jsx("span",{className:"text-slate-600",children:"Property Photos"}),r.jsxs(ze,{variant:W.length>=2?"default":"secondary",children:[W.length," file(s)"]})]})]})]}),r.jsxs("div",{className:"rounded-xl border border-emerald-200 bg-gradient-to-b from-emerald-50 to-white p-5",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx($m,{className:"w-5 h-5 text-emerald-600"}),"Registration Fee"]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500",children:"Total Amount Payable"}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"As per HP Tourism Policy 2025"})]}),r.jsxs("p",{className:"text-3xl font-bold text-emerald-600",children:["",Fl().totalFee.toFixed(0)]})]})]})]})}),r.jsx("div",{className:"border-t p-4 bg-slate-50 flex justify-end",children:r.jsx(te,{variant:"outline",onClick:()=>he(!1),children:"Close Preview"})})]})})]})})}function f6e(){const[e,t]=Dr(),{toast:n}=Tr(),s=b.useRef(!1),[i,a]=b.useState(null),o=Ot({mutationFn:async c=>(await lt("POST","/api/applications/draft",c)).json(),onSuccess:c=>{n({title:"Request Initiated",description:c.message}),t(`/applications/new?draft=${c.application.id}`)},onError:c=>{let d=c.status,u=c.existingApplicationId,h={};if(!d&&c.message&&c.message.startsWith("409:"))try{const f=c.message.substring(4).trim();h=JSON.parse(f),d=409,u=h.existingApplicationId}catch(f){console.error("Failed to parse 409 error json",f)}else d===409&&(h=c);if(d===409&&u){a({id:u,kind:h.kind||"Application",status:h.status||"draft"});return}n({title:"Request Failed",description:c.message||"Could not start service request",variant:"destructive"}),setTimeout(()=>t("/dashboard"),1500)}}),l=Ot({mutationFn:async c=>{await lt("DELETE",`/api/applications/${c}`)},onSuccess:()=>{n({title:"Draft Discarded",description:"Previous draft removed. Creating new request..."}),a(null);const c=new URLSearchParams(window.location.search),d=c.get("type"),u=c.get("parentId");d&&u&&o.mutate({applicationKind:d,parentApplicationId:u})},onError:c=>{n({title:"Cleanup Failed",description:"Could not discard previous draft. Please try manually.",variant:"destructive"})}});return b.useEffect(()=>{if(s.current)return;s.current=!0;const c=new URLSearchParams(window.location.search),d=c.get("type"),u=c.get("parentId");if(!d||!u){n({title:"Invalid Request",description:"Missing required parameters.",variant:"destructive"}),t("/dashboard");return}o.mutate({applicationKind:d,parentApplicationId:u})},[e,t,n,o]),r.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] bg-background",children:[r.jsx(vt,{className:"h-10 w-10 animate-spin text-primary mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Initiating Service Request..."}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Please wait while we prepare your application."}),r.jsx(zd,{open:!!i,onOpenChange:c=>!c&&a(null),children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:"Conflicting Draft Found"}),r.jsxs(ed,{children:["You already have a pending application draft. The system only allows one active draft at a time.",r.jsx("br",{}),r.jsx("br",{}),"Would you like to ",r.jsx("strong",{children:"Resume"})," your existing draft or ",r.jsx("strong",{children:"Discard"})," it to start this new one?"]})]}),r.jsxs(Zc,{children:[r.jsx(td,{onClick:()=>{i!=null&&i.id?t(`/applications/new?draft=${i.id}`):t("/dashboard")},children:"Resume Draft"}),r.jsx(Hd,{onClick:c=>{c.preventDefault(),i!=null&&i.id&&l.mutate(i.id)},className:"bg-destructive hover:bg-destructive/90",children:l.isPending?"Discarding...":"Discard & Continue"})]})]})})]})}function m6e({images:e,open:t,onClose:n,initialIndex:s=0}){const[i,a]=b.useState(s);b.useEffect(()=>{if(t&&e.length>0){const d=Math.max(0,Math.min(s,e.length-1));a(d)}},[t,s,e.length]);const o=()=>{a(d=>d===0?e.length-1:d-1)},l=()=>{a(d=>d===e.length-1?0:d+1)},c=(d,u,h)=>Kd(d,{mimeType:u??void 0,fileName:h});return e.length===0?null:r.jsx(us,{open:t,onOpenChange:n,children:r.jsx(Jn,{className:"max-w-7xl h-[90vh] p-0 bg-black/95 border-none",children:r.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[r.jsx(te,{"data-testid":"button-close-gallery",variant:"ghost",size:"icon",className:"absolute top-4 right-4 z-50 text-white hover:bg-white/20",onClick:n,children:r.jsx(sh,{className:"h-6 w-6"})}),r.jsxs("div",{className:"absolute top-4 left-4 z-50 bg-black/60 text-white px-3 py-1 rounded-md text-sm",children:[i+1," / ",e.length]}),r.jsxs("div",{className:"flex-1 flex items-center justify-center relative px-16 py-4",children:[e.length>1&&r.jsx(te,{"data-testid":"button-previous-image",variant:"ghost",size:"icon",className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 h-12 w-12",onClick:o,children:r.jsx(y1,{className:"h-8 w-8"})}),r.jsx("img",{src:c(e[i].filePath,e[i].mimeType,e[i].fileName),alt:e[i].fileName,className:"max-h-full max-w-full object-contain","data-testid":`image-current-${i}`}),e.length>1&&r.jsx(te,{"data-testid":"button-next-image",variant:"ghost",size:"icon",className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/20 h-12 w-12",onClick:l,children:r.jsx(lf,{className:"h-8 w-8"})})]}),e.length>1&&r.jsx("div",{className:"border-t border-white/20 bg-black/60 p-4",children:r.jsx("div",{className:"flex gap-2 overflow-x-auto justify-center",children:e.map((d,u)=>r.jsx("button",{"data-testid":`thumbnail-${u}`,onClick:()=>a(u),className:`flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 transition-all ${u===i?"border-primary scale-110":"border-white/20 hover:border-white/60"}`,children:r.jsx("img",{src:c(d.filePath,d.mimeType,d.fileName),alt:d.fileName,className:"w-full h-full object-cover"})},u))})})]})})})}const p6e={property_owner:"Property Owner",dealing_assistant:"Prescribed Authority",district_tourism_officer:"Prescribed Authority",district_officer:"Prescribed Authority",state_officer:"State Officer",admin:"Administrator",super_admin:"Administrator",admin_rc:"RC Admin"},LN={owner_submitted:{icon:Zd,label:"Application submitted",description:"Owner submitted the application for verification",tone:"primary"},start_scrutiny:{icon:Mi,label:"Scrutiny started",description:"Prescribed Authority picked up the application for verification",tone:"primary"},forwarded_to_dtdo:{icon:Zd,label:"Forwarded for Approval",description:"Scrutiny completed and forwarded for approval",tone:"primary"},reverted_by_da:{icon:u8,label:"Sent back by Prescribed Authority",description:"Corrections were requested during scrutiny",tone:"warning"},inspection_scheduled:{icon:_R,label:"Inspection scheduled",description:"Prescribed Authority planned the site inspection",tone:"primary"},inspection_completed:{icon:Mi,label:"Inspection report submitted",description:"Inspection findings were recorded",tone:"primary"},inspection_acknowledged:{icon:Fr,label:"Inspection acknowledged",description:"Owner confirmed the scheduled inspection visit",tone:"primary"},objection_raised:{icon:jn,label:"Objection raised",description:"Prescribed Authority flagged issues during inspection review",tone:"warning"},dtdo_revert:{icon:u8,label:"Returned by Prescribed Authority",description:"Application was reverted for further corrections",tone:"warning"},correction_resubmitted:{icon:Zd,label:"Owner resubmitted",description:"Applicant confirmed the corrections and resubmitted",tone:"primary"},dtdo_accept:{icon:Fr,label:"Inspection approved",description:"Prescribed Authority accepted the inspection outcome",tone:"primary"},verified_for_payment:{icon:$m,label:"Verified for payment",description:"Application cleared for Himkosh payment",tone:"primary"},payment_confirmed:{icon:$m,label:"Payment confirmed",description:"Payment received via Himkosh",tone:"primary"},certificate_issued:{icon:Fr,label:"Certificate issued",description:"Registration certificate generated by the department",tone:"primary"},dtdo_reject:{icon:oo,label:"Application rejected",description:"Application was rejected by Prescribed Authority",tone:"danger"},dtdo_correction:{icon:Mi,label:"RC corrected",description:"Prescribed Authority made corrections to the registration",tone:"warning"},approved:{icon:Fr,label:"Approved",description:"Application approved",tone:"primary"}},Mh=e=>e?VEe(e):null,FN=e=>{if(!e)return"System update";const t=[e.name],n=p6e[e.role]??e.role.replace(/_/g," ");return n&&t.push(` ${n}`),e.district&&t.push(`(${e.district})`),t.join(" ")},g6e={default:{dot:"border-muted bg-muted",icon:"text-muted-foreground",badge:"bg-muted text-muted-foreground"},primary:{dot:"border-primary bg-primary/10",icon:"text-primary",badge:"bg-primary/10 text-primary"},warning:{dot:"border-amber-500 bg-amber-100 dark:bg-amber-950/40",icon:"text-amber-600 dark:text-amber-300",badge:"bg-amber-100 text-amber-800 dark:bg-amber-950/40 dark:text-amber-200"},danger:{dot:"border-destructive bg-destructive/10",icon:"text-destructive",badge:"bg-destructive/10 text-destructive"}};function EC({applicationId:e,title:t="Workflow Timeline",description:n="Every significant action taken on this application.",className:s,preferDtdoEndpoint:i=!1}){const a=["/api/applications",e??"unknown","timeline"],{data:o,isLoading:l,isError:c,error:d}=rt({queryKey:a,enabled:!!e,queryFn:async()=>{const f=i?[`/api/dtdo/applications/${e}/timeline`,`/api/applications/${e}/timeline`]:[`/api/applications/${e}/timeline`,`/api/dtdo/applications/${e}/timeline`];let m;for(const p of f)try{return await aQ(p)}catch(g){m=g;const v=g instanceof Error?g.message.toLowerCase():String(g).toLowerCase();if(!v.includes("not allowed")&&!v.includes("authentication"))break}throw m instanceof Error?m:new Error(String(m))}}),u=(o==null?void 0:o.timeline)??[],h=b.useMemo(()=>{if(!e)return r.jsx("p",{className:"text-sm text-muted-foreground",children:"Timeline will appear once an application is selected."});if(l)return r.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((m,p)=>r.jsxs("div",{className:"space-y-2",children:[r.jsx(Lr,{className:"h-4 w-1/3"}),r.jsx(Lr,{className:"h-3 w-2/3"}),r.jsx(Lr,{className:"h-14 w-full"})]},p))});if(c)return r.jsx(fn,{variant:"destructive",children:r.jsx(mn,{children:(d==null?void 0:d.message)??"Unable to load timeline"})});if(u.length===0)return r.jsx("p",{className:"text-sm text-muted-foreground",children:"No workflow updates have been recorded yet."});const f=m=>{if(!m.feedback)return null;if(m.action==="dtdo_correction")try{const g=JSON.parse(m.feedback);if(g.type==="dtdo_correction"&&g.changes)return r.jsxs("div",{className:"text-xs space-y-1",children:[r.jsxs("div",{className:"font-medium text-amber-700 dark:text-amber-400",children:["Reason: ",g.reason]}),r.jsx("div",{className:"grid gap-1",children:g.changes.map((v,x)=>r.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[r.jsxs("span",{className:"font-medium",children:[v.field.replace(/([A-Z])/g," $1").trim(),":"]}),r.jsx("span",{className:"line-through text-red-500/70",children:v.oldValue||"empty"}),r.jsx("span",{children:""}),r.jsx("span",{className:"text-green-600 dark:text-green-400",children:v.newValue})]},x))})]})}catch{}const p=m.feedback.length>200?m.feedback.slice(0,200)+"...":m.feedback;return r.jsx("span",{children:p})};return r.jsxs("div",{className:"relative pl-4",children:[r.jsx("div",{className:"absolute left-1 top-2 bottom-2 w-px bg-border"}),r.jsx("div",{className:"space-y-3",children:u.map(m=>{const p=LN[m.action]??{icon:rm,label:m.action.replace(/_/g," "),tone:"default"},g=g6e[p.tone],v=m.createdAt?new Date(m.createdAt):null,x=Mh(m.previousStatus),y=Mh(m.newStatus),j=x&&y&&x!==y;return r.jsxs("div",{className:"relative pl-5",children:[r.jsx("span",{className:Xe("absolute left-0 top-1.5 h-2.5 w-2.5 rounded-full border-2",g.dot)}),r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-sm font-medium",children:[r.jsx(p.icon,{className:Xe("h-3.5 w-3.5",g.icon)}),r.jsx("span",{children:p.label}),j&&y!=="Submitted"&&r.jsxs("span",{className:"text-xs font-normal text-muted-foreground",children:["(",x,"  ",y,")"]})]}),v&&r.jsxs("div",{className:"text-[10px] text-muted-foreground text-right shrink-0 leading-tight",children:[r.jsx("div",{children:sr(v,"MMM d, h:mm a")}),r.jsx("div",{className:"opacity-70",children:ap(v,{addSuffix:!0})})]})]}),r.jsx("p",{className:"text-[11px] text-muted-foreground",children:FN(m.actor)}),m.feedback&&r.jsx("div",{className:"rounded border bg-muted/30 px-2 py-1.5 text-xs text-muted-foreground",children:f(m)})]})]},m.id)})})]})},[e,l,c,d,u]);return r.jsxs(me,{className:s,children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_R,{className:"h-5 w-5 text-primary"}),r.jsx(ke,{children:t})]}),n&&r.jsx(Ue,{children:n})]}),r.jsx(ge,{children:h})]})}const $N=[{key:"applicationForm",label:"Application form as per ANNEXURE I"},{key:"documents",label:"Documents list as per ANNEXURE II"},{key:"onlinePayment",label:"Online payment facility (UPI/Net Banking/Cards)"},{key:"wellMaintained",label:"Well-maintained furnished home with quality flooring"},{key:"cleanRooms",label:"Clean, airy, pest-free rooms with external ventilation"},{key:"comfortableBedding",label:"Comfortable bedding with quality fabrics"},{key:"roomSize",label:"Minimum room & bathroom size compliance"},{key:"cleanKitchen",label:"Smoke-free, clean, hygienic, odor-free kitchen"},{key:"cutleryCrockery",label:"Good quality cutlery and crockery"},{key:"waterFacility",label:"RO/Aquaguard/Mineral water availability"},{key:"wasteDisposal",label:"Waste disposal as per municipal laws"},{key:"energySavingLights",label:"Energy-saving lights (CFL/LED) in rooms & public areas"},{key:"visitorBook",label:"Visitor book and feedback facilities"},{key:"doctorDetails",label:"Doctor names, addresses, phone numbers displayed"},{key:"luggageAssistance",label:"Lost luggage assistance facilities"},{key:"fireEquipment",label:"Basic fire equipment available"},{key:"guestRegister",label:"Guest check-in/out register (with passport details for foreigners)"},{key:"cctvCameras",label:"CCTV cameras in common areas"}],BN=[{key:"parking",label:"Parking with adequate road width"},{key:"attachedBathroom",label:"Attached private bathroom with toiletries"},{key:"toiletAmenities",label:"Toilet with seat, lid, and toilet paper"},{key:"hotColdWater",label:"Hot & cold running water with sewage connection"},{key:"waterConservation",label:"Water conservation taps/showers"},{key:"diningArea",label:"Dining area serving fresh & hygienic food"},{key:"wardrobe",label:"Wardrobe with minimum 4 hangers in guest rooms"},{key:"storage",label:"Cabinets or drawers for storage in rooms"},{key:"furniture",label:"Quality chairs, work desk, and furniture"},{key:"laundry",label:"Washing machine/dryer or laundry services"},{key:"refrigerator",label:"Refrigerator in homestay"},{key:"lounge",label:"Lounge or sitting arrangement in lobby"},{key:"heatingCooling",label:"Heating & cooling in closed public rooms"},{key:"luggageHelp",label:"Assistance with luggage on request"},{key:"safeStorage",label:"Safe storage facilities in rooms"},{key:"securityGuard",label:"Security guard facilities"},{key:"himachaliCrafts",label:"Promotion of Himachali handicrafts & architecture"},{key:"rainwaterHarvesting",label:"Rainwater harvesting system"}],Hb=$N.length,Wb=BN.length;async function x6e(e,t=!1){const n=t?[`/api/dtdo/inspection-report/${e}`,`/api/applications/${e}/inspection-report`]:[`/api/applications/${e}/inspection-report`,`/api/dtdo/inspection-report/${e}`];for(const s of n)try{const i=await fetch(s,{credentials:"include"});if(i.status===404)continue;if(!i.ok){const a=await i.text()||"Unable to load inspection report";throw new Error(a)}return await i.json()}catch(i){const a=(i instanceof Error?i.message:String(i)).toLowerCase();if(!a.includes("not allowed")&&!a.includes("insufficient")&&!a.includes("authentication"))break}return null}const Sv=e=>{var n;if(!e)return"";const t=typeof e=="string"?new Date(e):e;return Number.isNaN((n=t==null?void 0:t.getTime)==null?void 0:n.call(t))?"":sr(t,"dd/MM/yyyy")};function wle(e){const t=new Sr({orientation:"portrait",unit:"mm",format:"a4"}),n=t.internal.pageSize.getHeight()-15;v6e(t,e),y6e(t,e),b6e(t,e),j6e(t,e),w6e(t,e),t.setFontSize(8),t.setTextColor(120),t.text("Auto-generated snapshot based on latest inspection data.",105,n,{align:"center"});const s=`Inspection_Report_${e.application.applicationNumber}.pdf`;t.save(s)}function v6e(e,t){e.setFillColor(255),e.roundedRect(18,16,174,32,3,3,"S"),e.addImage(Lne,"PNG",24,18,24,24),e.addImage(Fne,"PNG",162,18,24,24),e.setFont("helvetica","bold"),e.setFontSize(11),e.text("Government of Himachal Pradesh",105,26,{align:"center"}),e.setFontSize(17),e.text("District Inspection Memorandum",105,34,{align:"center"}),e.setFontSize(10),e.text(`Application #${t.application.applicationNumber}  Homestay Registration 2025`,105,41,{align:"center"})}function y6e(e,t){var l;e.setFont("helvetica","bold"),e.setFontSize(8),e.setTextColor(120),e.text("STATUS",24,52),e.text("INSPECTION WINDOW",84,52),e.text("REPORT SUBMITTED",150,52);const s=(t.application.siteInspectionOutcome||t.report.recommendation||"Under Review").replace(/_/g," ").trim().toLowerCase(),i=s.includes("approve")?"VERIFY FOR PAYMENT":s.toUpperCase();e.setFontSize(11),e.setTextColor(30),e.text(i,24,58),e.setFont("helvetica","normal"),e.setFontSize(9);const a=Sv((l=t.inspectionOrder)==null?void 0:l.inspectionDate),o=Sv(t.report.actualInspectionDate);e.text(`${a} - ${o}`,84,58),e.text(`${Sv(t.report.submittedDate)}`,150,58)}function b6e(e,t){const n=t.report.mandatoryChecklist,s=t.report.desirableChecklist,i=n?Object.values(n).filter(Boolean).length:0,a=s?Object.values(s).filter(Boolean).length:0;[{title:"Application",primary:t.application.applicationNumber,secondary:t.application.propertyName},{title:"Category",primary:(t.report.recommendedCategory??t.application.category).toUpperCase(),secondary:t.report.categoryMeetsStandards?"Meets standards":"Requires review"},{title:"Mandatory Compliance",primary:`${Math.round(i/Hb*100)}%`,secondary:`${i} of ${Hb} met`},{title:"Desirable Compliance",primary:`${Math.round(a/Wb*100)}%`,secondary:`${a} of ${Wb} met`}].forEach((l,c)=>{const d=20+c%2*92,u=60+Math.floor(c/2)*30;e.setDrawColor(220),e.roundedRect(d,u,86,28,3,3,"S"),e.setFont("helvetica","bold"),e.setFontSize(7.5),e.setTextColor(120),e.text(l.title.toUpperCase(),d+4,u+6),e.setFontSize(13),e.setTextColor(0),e.text(l.primary,d+4,u+15),e.setFont("helvetica","normal"),e.setFontSize(8.5),e.setTextColor(90),e.text(l.secondary||"",d+4,u+22)})}function j6e(e,t){var a,o,l,c,d;e.setDrawColor(230),e.roundedRect(20,120,86,42,3,3,"S"),e.roundedRect(112,120,86,42,3,3,"S"),e.setFont("helvetica","bold"),e.setFontSize(9),e.text("Property Owner",24,128),e.text("Inspection Details",116,128),e.setFont("helvetica","normal"),e.setFontSize(8.5),[((a=t.owner)==null?void 0:a.fullName)??"",((o=t.owner)==null?void 0:o.mobile)??"",((l=t.owner)==null?void 0:l.email)??""].filter(Boolean).forEach((u,h)=>e.text(u,24,138+h*5)),[`Inspector: ${((c=t.da)==null?void 0:c.fullName)??""}`,`Scheduled: ${Sv((d=t.inspectionOrder)==null?void 0:d.inspectionDate)}`,`Visited: ${Sv(t.report.actualInspectionDate)}`,`Report: ${Sv(t.report.submittedDate)}`].forEach((u,h)=>e.text(u,116,138+h*5))}function w6e(e,t){var a,o;let n=170;e.setDrawColor(220),e.roundedRect(20,n,170,58,3,3,"S"),e.setFont("helvetica","bold"),e.setFontSize(10),e.text("Inspection Findings",24,n+8),e.setFont("helvetica","normal"),e.setFontSize(9);const s=((a=t.report.detailedFindings)==null?void 0:a.trim())||"No remarks recorded.";let i=D4(e,s,24,n+14,162,5);t.application.siteInspectionNotes&&(i+=4,e.setFont("helvetica","bold"),e.text("DTDO Notes",24,i),i+=5,e.setFont("helvetica","normal"),i=D4(e,t.application.siteInspectionNotes,24,i,162,5)),(o=t.inspectionOrder)!=null&&o.specialInstructions&&(i+=4,e.setFont("helvetica","bold"),e.text("Special Instructions",24,i),i+=5,e.setFont("helvetica","normal"),D4(e,t.inspectionOrder.specialInstructions,24,i,162,5))}function D4(e,t,n,s,i,a){return e.splitTextToSize(t,i).forEach(l=>{e.text(l,n,s),s+=a}),s}const N6e=e=>{if(!e)return{label:"Pending",className:"bg-muted text-muted-foreground"};switch(e.toLowerCase()){case"recommended":case"approved":return{label:"Recommended",className:"bg-emerald-50 text-emerald-800"};case"objection":case"raise_objections":return{label:"Objection Raised",className:"bg-amber-50 text-amber-900"};case"rejected":return{label:"Rejected",className:"bg-rose-50 text-rose-700"};default:return{label:e.replace(/_/g," "),className:"bg-muted text-muted-foreground"}}};function L6({applicationId:e,className:t,preferDtdoEndpoint:n=!1,enabled:s=!0}){const[,i]=Dr(),{data:a,isLoading:o,error:l}=rt({queryKey:["/api/applications",e??"unknown","inspection-report"],enabled:!!e&&s,retry:!1,queryFn:()=>x6e(e,n)}),c=b.useMemo(()=>{var f;if(!((f=a==null?void 0:a.report)!=null&&f.mandatoryChecklist))return 0;const h=Object.values(a.report.mandatoryChecklist);return h.length===0?0:h.filter(Boolean).length/Hb*100},[a]),d=b.useMemo(()=>{var f;if(!((f=a==null?void 0:a.report)!=null&&f.desirableChecklist))return 0;const h=Object.values(a.report.desirableChecklist);return h.length===0?0:h.filter(Boolean).length/Wb*100},[a]);if(!e||!s)return null;const u=()=>{if(o)return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Lr,{className:"h-6 w-1/3"}),r.jsx(Lr,{className:"h-4 w-full"}),r.jsx(Lr,{className:"h-4 w-2/3"}),r.jsx(Lr,{className:"h-24 w-full"})]});if(l)return null;if(!a)return r.jsx("div",{className:"flex flex-col items-start gap-3",children:r.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[r.jsx(Ag,{className:"h-5 w-5"}),r.jsx("p",{className:"text-sm",children:"Inspection report will be available once the DA submits it from the field."})]})});const{report:h,inspectionOrder:f,da:m,dtdo:p,application:g}=a;if(!h&&f)return r.jsxs("div",{className:"space-y-4",children:[r.jsxs(fn,{className:"bg-blue-50 border-blue-200",children:[r.jsx(Mi,{className:"h-4 w-4 text-blue-600"}),r.jsxs(mn,{className:"text-blue-800",children:["Inspection is scheduled for ",r.jsx("strong",{children:sr(new Date(f.inspectionDate),"PPP")}),"."]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"The inspection order has been generated. Please record your findings in the inspection report form."}),r.jsxs(te,{className:"w-full sm:w-auto self-start bg-emerald-600 hover:bg-emerald-700",onClick:()=>i(`/da/inspections/${f.id}`),children:[r.jsx(Mi,{className:"mr-2 h-4 w-4"}),"Fill Inspection Report Now"]})]})]});if(!h)return r.jsx("div",{className:"flex flex-col items-start gap-3",children:r.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[r.jsx(Ag,{className:"h-5 w-5"}),r.jsx("p",{className:"text-sm",children:"Inspection report will be available once the DA submits it from the field."})]})});const v=N6e(g.siteInspectionOutcome||h.recommendation),x=h.actualInspectionDate?sr(new Date(h.actualInspectionDate),"PPP"):null,y=h.submittedDate?sr(new Date(h.submittedDate),"PPP"):null,j=Math.round(c/100*Hb),w=Math.round(d/100*Wb),N=f!=null&&f.inspectionDate?sr(new Date(f.inspectionDate),"PPP"):null,S=(m==null?void 0:m.fullName)??"",T=(p==null?void 0:p.fullName)??"",C=Array.isArray(h.inspectionPhotos)?h.inspectionPhotos:[],A=h!=null&&h.id?`/dtdo/inspection-review/${g.id}`:null;return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"rounded-2xl border border-emerald-100 bg-emerald-50/40 p-4 shadow-inner",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(ze,{className:Xe("flex items-center gap-2",v.className),children:[r.jsx(Mi,{className:"h-4 w-4"})," ",v.label]}),x&&r.jsxs("span",{className:"text-sm text-emerald-900/80",children:["Inspected on ",x]}),y&&r.jsxs("span",{className:"text-sm text-emerald-900/70",children:[" Report filed ",y]}),h.recommendedCategory&&r.jsxs(ze,{variant:"outline",className:"ml-auto border-emerald-200 text-emerald-900",children:["Recommended: ",h.recommendedCategory.toUpperCase()]})]})}),r.jsxs(aa,{defaultValue:"schedule",className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-3",children:[r.jsx(Pr,{value:"schedule",children:"Inspection"}),r.jsx(Pr,{value:"dtdo",children:"DTDO"}),r.jsx(Pr,{value:"rooms",children:"Room Audit"})]}),r.jsx(Rr,{value:"schedule",className:"mt-4",children:r.jsxs("div",{className:"rounded-xl border bg-white/80 p-4 shadow-sm",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Scheduled Visit"}),r.jsx("p",{className:"text-base font-semibold text-foreground",children:N??"Pending"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Inspector: ",S]})]})}),r.jsx(Rr,{value:"dtdo",className:"mt-4",children:r.jsxs("div",{className:"rounded-xl border bg-white/80 p-4 shadow-sm",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"DTDO"}),r.jsx("p",{className:"text-base font-semibold text-foreground",children:T}),(f==null?void 0:f.specialInstructions)&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Notes: ",f.specialInstructions]})]})}),r.jsx(Rr,{value:"rooms",className:"mt-4",children:r.jsxs("div",{className:"rounded-xl border bg-white/80 p-4 shadow-sm",children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Room Count"}),r.jsxs("p",{className:"text-base font-semibold text-foreground",children:[h.actualRoomCount??""," ",h.roomCountVerified?"rooms verified":"rooms (pending)"]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Category meets standards: ",h.categoryMeetsStandards?"Yes":"Needs review"]})]})})]}),r.jsxs(aa,{defaultValue:"mandatory",className:"w-full",children:[r.jsxs(Qi,{className:"mt-2 grid w-full grid-cols-2",children:[r.jsx(Pr,{value:"mandatory",children:"Mandatory"}),r.jsx(Pr,{value:"desirable",children:"Desirable"})]}),r.jsx(Rr,{value:"mandatory",className:"mt-4",children:r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50/60 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("p",{className:"font-semibold text-slate-800",children:"Mandatory compliance"}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[j,"/",Hb]})]}),r.jsx(f0,{value:c,className:"mt-2 h-2"}),h.mandatoryRemarks&&r.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Remarks: ",h.mandatoryRemarks]})]})}),r.jsx(Rr,{value:"desirable",className:"mt-4",children:r.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50/60 p-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("p",{className:"font-semibold text-slate-800",children:"Desirable facilities"}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[w,"/",Wb]})]}),r.jsx(f0,{value:d,className:"mt-2 h-2 bg-muted"}),h.desirableRemarks&&r.jsxs("p",{className:"mt-2 text-xs text-muted-foreground",children:["Remarks: ",h.desirableRemarks]})]})})]}),r.jsxs("div",{className:"rounded-2xl border bg-white/90 p-4 shadow-sm",children:[r.jsx("p",{className:"text-sm font-semibold text-foreground mb-2",children:"Inspector's summary"}),r.jsx("p",{className:"text-sm whitespace-pre-line text-muted-foreground",children:h.detailedFindings||"No remarks recorded."})]}),(A||h.reportDocumentUrl)&&r.jsxs("div",{className:"flex flex-wrap gap-2",children:[A&&r.jsx(te,{variant:"outline",size:"sm",asChild:!0,children:r.jsxs("a",{href:A,target:"_blank",rel:"noreferrer",children:[r.jsx(zu,{className:"mr-2 h-4 w-4"}),"View Full Inspection Report"]})}),h.reportDocumentUrl&&r.jsx(te,{variant:"ghost",size:"sm",asChild:!0,children:r.jsxs("a",{href:h.reportDocumentUrl,target:"_blank",rel:"noreferrer",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"}),"Download Attachment"]})})]}),C.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-foreground mb-2",children:"Inspection photos"}),r.jsx("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:C.slice(0,6).map(R=>r.jsxs("a",{href:Kd(R.fileUrl),target:"_blank",rel:"noreferrer",className:"group overflow-hidden rounded-xl border",children:[r.jsx("img",{src:Kd(R.fileUrl),alt:R.caption||R.fileName,className:"h-32 w-full object-cover transition-transform duration-200 group-hover:scale-105"}),R.caption&&r.jsx("p",{className:"px-2 py-1 text-xs text-muted-foreground",children:R.caption})]},R.fileUrl))})]}),r.jsxs("div",{className:"flex gap-3 flex-wrap",children:[h.reportDocumentUrl?r.jsx(te,{variant:"outline",asChild:!0,children:r.jsxs("a",{href:Kd(h.reportDocumentUrl),target:"_blank",rel:"noreferrer",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"})," Download PDF"]})}):r.jsxs(te,{variant:"outline",onClick:()=>wle(a),"data-testid":"button-generate-inspection-pdf",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"})," Download Snapshot"]}),r.jsxs(te,{variant:"ghost",onClick:()=>window.print(),children:[r.jsx(Bj,{className:"mr-2 h-4 w-4"})," Print view"]})]}),g.siteInspectionNotes&&r.jsxs(fn,{children:[r.jsx(Jxe,{className:"h-4 w-4"}),r.jsx(mn,{children:g.siteInspectionNotes})]})]})};return r.jsxs(me,{className:t,"data-testid":"inspection-report-card",children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Inspection Report"}),r.jsx(Ue,{children:"Snapshot of the latest field inspection submitted by the DA."})]}),r.jsx(ge,{children:u()})]})}const _B=e=>{if(!e)return null;try{return sr(new Date(e),"PPP 'at' p")}catch{return null}};function S6e({applicationId:e,status:t}){const n=!!(e&&t&&["inspection_scheduled","inspection_completed"].includes(t)),s=ci(),{toast:i}=Tr(),a=rt({queryKey:["/api/applications",e,"inspection-schedule"],enabled:n,queryFn:()=>aQ(`/api/applications/${e}/inspection-schedule`)}),o=Ot({mutationFn:async()=>(await lt("POST",`/api/applications/${e}/inspection-schedule/acknowledge`)).json(),onSuccess:()=>{i({title:"Thanks for confirming",description:"Inspection schedule acknowledged."}),s.invalidateQueries({queryKey:["/api/applications",e,"inspection-schedule"]})},onError:()=>{i({title:"Unable to acknowledge",description:"Please try again in a moment.",variant:"destructive"})}});if(!n)return null;if(a.isLoading)return r.jsxs(me,{className:"mb-6",children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Inspection Schedule"}),r.jsx(Ue,{children:"Loading schedule"})]}),r.jsxs(ge,{children:[r.jsx(Lr,{className:"h-5 w-1/2"}),r.jsx(Lr,{className:"mt-3 h-4 w-full"})]})]});if(a.isError||!a.data)return null;const{order:l,acknowledgedAt:c}=a.data,d=_B(l.inspectionDate),u=_B(c),h=!c&&l.status!=="completed";return r.jsxs(me,{className:"mb-6 border border-slate-200",children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Inspection Schedule"}),r.jsx(Ue,{children:"Review the scheduled visit and acknowledge so the inspection team knows you're ready."})]}),r.jsxs(ge,{className:"space-y-3 text-sm text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-foreground",children:"Scheduled for"}),r.jsx("p",{children:d??"Inspection date will be shared soon."})]}),l.assignedTo&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-foreground",children:"Assigned officer"}),r.jsxs("p",{children:[l.assignedTo.fullName,l.assignedTo.mobile?`  ${l.assignedTo.mobile}`:""]})]}),l.specialInstructions&&r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-foreground",children:"Instructions"}),r.jsx("p",{children:l.specialInstructions})]}),c?r.jsxs("div",{className:"flex items-center gap-2 text-emerald-700",children:[r.jsx(ze,{variant:"outline",className:"border-emerald-300 bg-emerald-50 text-emerald-700",children:"Acknowledged"}),r.jsx("span",{children:u?`Confirmed on ${u}`:"Confirmed"})]}):r.jsx("p",{className:"text-amber-600",children:"Please acknowledge so we know you're expecting the inspection team."}),r.jsx("div",{className:"flex flex-wrap gap-3",children:r.jsx(te,{disabled:!h||o.isPending,onClick:()=>o.mutate(),children:o.isPending?"Acknowledging...":"Acknowledge Schedule"})})]})]})}const CB={pending:{label:"Pending review",badgeClass:"bg-slate-100 text-slate-700",noteBgClass:"bg-slate-50 border-slate-200",noteTextClass:"text-slate-700"},verified:{label:"Verified",badgeClass:"bg-emerald-50 text-emerald-700",noteBgClass:"bg-emerald-50 border-emerald-200",noteTextClass:"text-emerald-800"},needs_correction:{label:"Needs correction",badgeClass:"bg-amber-50 text-amber-800",noteBgClass:"bg-amber-50 border-amber-200",noteTextClass:"text-amber-900"},rejected:{label:"Rejected",badgeClass:"bg-rose-50 text-rose-700",noteBgClass:"bg-rose-50 border-rose-200",noteTextClass:"text-rose-800"}},AB=e=>{if(!e)return null;const t=e.toLowerCase();return CB[t]?CB[t]:{label:e.replace(/_/g," "),badgeClass:"bg-muted text-muted-foreground",noteBgClass:"bg-muted/40 border-border",noteTextClass:"text-muted-foreground"}};function _6e(){var zr,zt,ji,wi,Rs;const[,e]=vR("/applications/:id"),[,t]=Dr(),{toast:n}=Tr(),[s,i]=b.useState(""),[a,o]=b.useState(""),[l,c]=b.useState(""),[d,u]=b.useState(""),[h,f]=b.useState(""),[m,p]=b.useState("approved"),[g,v]=b.useState(!1),[x,y]=b.useState(""),[j,w]=b.useState(!1),[N,S]=b.useState(""),[T,C]=b.useState(!1),[A,R]=b.useState(""),[k,O]=b.useState(""),[$,D]=b.useState(""),[q,M]=b.useState(""),L=[{value:"policy_heritage",label:"Official RC Format",description:"Golden bordered Form-A certificate approved for issuance"}],[V,P]=b.useState("policy_heritage"),[z,Z]=b.useState(!1),F=L.find(st=>st.value===V)??L[0],[W,G]=b.useState(!1),[H,se]=b.useState(0),J=e==null?void 0:e.id,{data:ie}=rt({queryKey:["/api/auth/me"]}),{data:X,isLoading:he}=rt({queryKey:["/api/applications",J],enabled:!!J}),{data:fe,isLoading:Q}=rt({queryKey:["/api/applications",J,"documents"],enabled:!!J}),Oe=Ot({mutationFn:async({action:st,comments:tr})=>(await lt("POST",`/api/applications/${J}/review`,{action:st,comments:tr})).json(),onSuccess:(st,tr)=>{er.invalidateQueries({queryKey:["/api/applications",J]}),er.invalidateQueries({queryKey:["/api/applications"]}),n({title:tr.action==="approve"?"Application Approved":"Application Rejected",description:`The application has been ${tr.action}d successfully.`}),i("")},onError:()=>{n({title:"Review failed",description:"Failed to process review. Please try again.",variant:"destructive"})}}),ve=Ot({mutationFn:async({feedback:st,issuesFound:tr})=>(await lt("POST",`/api/applications/${J}/send-back`,{feedback:st,issuesFound:tr})).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/applications",J]}),er.invalidateQueries({queryKey:["/api/applications"]}),n({title:"Application Sent Back",description:"The application has been sent back to the applicant for corrections."}),o(""),c("")},onError:()=>{n({title:"Action failed",description:"Failed to send back application. Please try again.",variant:"destructive"})}}),ee=Ot({mutationFn:async({scheduledDate:st,notes:tr})=>(await lt("POST",`/api/applications/${J}/move-to-inspection`,{scheduledDate:st,notes:tr})).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/applications",J]}),er.invalidateQueries({queryKey:["/api/applications"]}),n({title:"Inspection Scheduled",description:"The site inspection has been scheduled successfully."}),u(""),f("")},onError:()=>{n({title:"Action failed",description:"Failed to schedule inspection. Please try again.",variant:"destructive"})}}),Ee=Ot({mutationFn:async()=>{const st={roomCountVerified:g,roomCountActual:x?parseInt(x):void 0,amenitiesVerified:j,amenitiesIssues:N,fireSafetyVerified:T,fireSafetyIssues:A,categoryRecommendation:k,overallSatisfactory:m==="approved",issuesFound:$};return(await lt("POST",`/api/applications/${J}/complete-inspection`,{outcome:m,findings:st,notes:q})).json()},onSuccess:(st,tr)=>{er.invalidateQueries({queryKey:["/api/applications",J]}),er.invalidateQueries({queryKey:["/api/applications"]}),n({title:"Inspection Completed",description:{approved:"Application approved and moved to payment pending",corrections_needed:"Application sent back for corrections",rejected:"Application rejected"}[m]}),p("approved"),v(!1),y(""),w(!1),S(""),C(!1),R(""),O(""),D(""),M("")},onError:()=>{n({title:"Action failed",description:"Failed to complete inspection. Please try again.",variant:"destructive"})}}),Re=["sent_back_for_corrections","reverted_to_applicant","reverted_by_dtdo","objection_raised"],oe=X==null?void 0:X.application,De=(oe==null?void 0:oe.status)??"draft",Qe=((zr=ie==null?void 0:ie.user)==null?void 0:zr.role)==="property_owner"&&oe&&Re.includes(De),xe=b.useRef(!1);if(b.useEffect(()=>{if(!xe.current){if(Qe&&(oe!=null&&oe.id)){xe.current=!0,t(`/applications/new?application=${oe.id}`);return}if((oe==null?void 0:oe.status)==="legacy_rc_draft"){xe.current=!0,t("/existing-owner");return}}},[oe==null?void 0:oe.id,oe==null?void 0:oe.status,t,Qe]),he)return r.jsx("div",{className:"bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading application..."})]})});if(!(X!=null&&X.application))return r.jsx("div",{className:"bg-background flex items-center justify-center",children:r.jsxs(me,{className:"max-w-md",children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Application Not Found"}),r.jsx(Ue,{children:"The application you're looking for doesn't exist."})]}),r.jsx(ge,{children:r.jsx(te,{onClick:()=>t("/dashboard"),"data-testid":"button-back-dashboard",children:"Back to Dashboard"})})]})});const ae=async()=>{if(oe){Z(!0);try{bC(oe,V)}catch(st){n({title:"Download failed",description:st instanceof Error?st.message:"Unable to prepare certificate right now.",variant:"destructive"})}finally{Z(!1)}}},we=ie==null?void 0:ie.user,Te=(we==null?void 0:we.role)==="district_officer",qe=(we==null?void 0:we.role)==="state_officer",Ke=(we==null?void 0:we.role)==="property_owner",Ge=oe.status??"draft",He=Number(oe.totalFee??0),nt=["draft","sent_back_for_corrections","reverted_to_applicant","reverted_by_dtdo","objection_raised"],Y=Ke&&mf(Ge),Ct=oe.clarificationRequested||oe.dtdoRemarks||oe.daRemarks||null,Vt=Y&&oe.updatedAt?ap(new Date(oe.updatedAt),{addSuffix:!0}):null,pt=Ke&&nt.includes(Ge),Ht=Te&&Ge==="pending"||qe&&Ge==="state_review",wr=st=>st.replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,"$1 $2").split(" ").filter(Boolean).map(tr=>tr.charAt(0).toUpperCase()+tr.slice(1).toLowerCase()).join(" "),wt=st=>{const tr={draft:{label:"Draft",variant:"outline"},submitted:{label:"Submitted",variant:"secondary"},under_scrutiny:{label:"Under Scrutiny",variant:"secondary"},pending:{label:"District Review",variant:"secondary"},forwarded_to_dtdo:{label:"Forwarded to DTDO",variant:"secondary"},district_review:{label:"District Review",variant:"secondary"},state_review:{label:"State Review",variant:"secondary"},sent_back_for_corrections:{label:"Corrections Required",variant:"warning"},reverted_to_applicant:{label:"Corrections Required",variant:"warning"},reverted_by_dtdo:{label:"Corrections Required",variant:"warning"},objection_raised:{label:"DTDO Objection",variant:"warning"},inspection_scheduled:{label:"Inspection Scheduled",variant:"secondary"},inspection_completed:{label:"Inspection Completed",variant:"secondary"},payment_pending:{label:"Payment Pending",variant:"secondary"},verified_for_payment:{label:"Payment Verified",variant:"secondary"},approved:{label:"Approved",variant:"default"},rejected:{label:"Rejected",variant:"destructive"}};return tr[st]||tr.draft},Ut=st=>({diamond:{label:"Diamond",variant:"default"},gold:{label:"Gold",variant:"secondary"},silver:{label:"Silver",variant:"outline"}})[st],St=(st,tr="")=>{if(typeof st=="string"){const Zt=st.trim();return Zt.length>0?Zt:tr}return st==null?tr:String(st)},Be={mc:"Municipal Corporation / Municipal Council",tcp:"Town & Country Planning / SADA / NP Area",gp:"Gram Panchayat"},lr=()=>{window.print()},Wt=st=>{if(st==null)return null;const tr=Number(st);return Number.isFinite(tr)?tr:null},It=st=>{const tr=Wt(st);return tr===null?"":`${tr.toLocaleString("en-IN")}`},yt=st=>{const tr=Wt(st);return tr===null||tr<=0?"Enter distance in KM":`${tr} km`},ut=st=>{const tr=Wt(st);return tr===null||tr===0?"":`${tr} sq ft`},Kt=st=>st?wr(st):"Supporting Document",Os=wt(Ge).label,Dt=oe.category?wr(oe.category):"",gr=oe.projectType==="new_project"?"New Project":oe.projectType==="new_rooms"?"Existing + New Rooms":St(oe.projectType),Fn=oe.propertyOwnership?wr(oe.propertyOwnership):"",bi=Be[oe.locationType??""]??"",An=oe.submittedAt?new Date(oe.submittedAt):null,ei=oe.updatedAt?new Date(oe.updatedAt):null,rn={ac:"Air Conditioning",wifi:"WiFi",parking:"Parking",restaurant:"Dining Area",hotWater:"Hot Water",tv:"Television",laundry:"Laundry Service",roomService:"Room Service",garden:"Garden",mountainView:"Mountain View",petFriendly:"Pet Friendly"},vn=Object.entries(oe.amenities??{}).filter(([,st])=>!!st).map(([st])=>rn[st]??wr(st)),rs=(fe==null?void 0:fe.documents)??(Array.isArray(oe.documents)?oe.documents:[]);rs.filter(st=>((st==null?void 0:st.documentType)||(st==null?void 0:st.type))==="property_photo"),rs.filter(st=>((st==null?void 0:st.documentType)||(st==null?void 0:st.type))!=="property_photo").map((st,tr)=>({type:Kt((st==null?void 0:st.documentType)||(st==null?void 0:st.type)),name:St((st==null?void 0:st.fileName)||(st==null?void 0:st.name)||`Document ${tr+1}`)}));const ka=new Date;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{id:"application-print-sheet",className:"print-only application-print-sheet text-black text-sm leading-relaxed",children:[r.jsxs("div",{className:"flex items-center justify-between border-b pb-6 mb-6",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("p",{className:"uppercase tracking-[0.35em] text-[11px] text-gray-500",children:"Government of Himachal Pradesh"}),r.jsx("h1",{className:"text-2xl font-semibold mt-1",children:"HP Tourism eServices"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Homestay Registration Application"})]}),r.jsx("img",{src:C5,alt:"Himachal Tourism",className:"h-14 w-auto"})]}),r.jsx("section",{className:"space-y-3 break-inside-avoid",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4 border border-gray-200 rounded-2xl p-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Application Number"}),r.jsx("p",{className:"font-semibold",children:St(oe.applicationNumber)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Current Status"}),r.jsx("p",{className:"font-semibold",children:Os})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Submitted On"}),r.jsx("p",{children:An?An.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Last Updated"}),r.jsx("p",{children:ei?ei.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):""})]})]})}),r.jsxs("section",{className:"space-y-3 break-inside-avoid",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"1. Property Snapshot"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Property Name"}),r.jsx("p",{children:St(oe.propertyName)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Category"}),r.jsx("p",{children:Dt})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Address"}),r.jsx("p",{children:St(oe.address)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Location Type"}),r.jsx("p",{children:bi})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"District / Tehsil"}),r.jsxs("p",{children:[hu(oe.district),"  ",St(oe.tehsil)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Village / Urban Body"}),r.jsxs("p",{children:[St(oe.gramPanchayat),"  ",St(oe.urbanBody)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"PIN Code"}),r.jsx("p",{children:St(oe.pincode)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Total Rooms"}),r.jsx("p",{children:St(oe.totalRooms)})]})]})]}),r.jsxs("section",{className:"space-y-3 break-inside-avoid",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"2. Owner & Contact"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Full Name"}),r.jsx("p",{children:St(oe.ownerName)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Mobile Number"}),r.jsx("p",{children:St(oe.ownerMobile)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Email Address"}),r.jsx("p",{children:St(oe.ownerEmail)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Gender"}),r.jsx("p",{children:oe.ownerGender?wr(oe.ownerGender):""})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Aadhaar Number"}),r.jsx("p",{children:oe.ownerAadhaar?oe.ownerAadhaar.replace(/(\d{4})(\d{4})(\d{4})/,"$1 $2 $3"):""})]})]})]}),r.jsxs("section",{className:"space-y-3 break-inside-avoid",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"3. Accommodation & Tariffs"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Project Type"}),r.jsx("p",{children:gr})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Ownership Type"}),r.jsx("p",{children:Fn})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Single / Double / Suites"}),r.jsxs("p",{children:[St(oe.singleBedRooms)," / ",St(oe.doubleBedRooms)," / ",St(oe.familySuites)]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Attached Washrooms"}),r.jsx("p",{children:St(oe.attachedWashrooms)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Single Room Rate"}),r.jsx("p",{children:It(oe.singleBedRoomRate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Double Room Rate"}),r.jsx("p",{children:It(oe.doubleBedRoomRate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Family Suite Rate"}),r.jsx("p",{children:It(oe.familySuiteRate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Proposed Tariff"}),r.jsx("p",{children:It(oe.proposedRoomRate)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"GSTIN"}),r.jsx("p",{children:St(oe.gstin)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Certificate Validity"}),r.jsxs("p",{children:[St(oe.certificateValidityYears)," years"]})]})]})]}),r.jsxs("section",{className:"space-y-3 break-inside-avoid",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"4. Distances & Facilities"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Airport"}),r.jsx("p",{children:yt(oe.distanceAirport)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Railway Station"}),r.jsx("p",{children:yt(oe.distanceRailway)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"City Center"}),r.jsx("p",{children:yt(oe.distanceCityCenter)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Shopping Area"}),r.jsx("p",{children:yt(oe.distanceShopping)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Bus Stand"}),r.jsx("p",{children:yt(oe.distanceBusStand)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Nearest Hospital"}),r.jsx("p",{children:St(oe.nearestHospital)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Lobby Area"}),r.jsx("p",{children:ut(oe.lobbyArea)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Dining Area"}),r.jsx("p",{children:ut(oe.diningArea)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Parking"}),r.jsx("p",{children:St(oe.parkingArea)})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Eco-Friendly Facilities"}),r.jsx("p",{children:St(oe.ecoFriendlyFacilities)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Differently Abled Facilities"}),r.jsx("p",{children:St(oe.differentlyAbledFacilities)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Fire Safety Equipment"}),r.jsx("p",{children:St(oe.fireEquipmentDetails)})]})]})]}),r.jsxs("section",{className:"space-y-3 break-inside-avoid",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"5. Amenities"}),vn.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:vn.map(st=>r.jsx("span",{className:"border border-gray-300 rounded-full px-3 py-1 text-sm",children:st},st))}):r.jsx("p",{children:"No amenities declared."})]}),r.jsxs("section",{className:"space-y-3 break-inside-avoid",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"6. Fee Summary"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"border border-gray-200 rounded-2xl p-3",children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Base Fee"}),r.jsx("p",{className:"text-lg font-semibold",children:It(oe.baseFee)})]}),r.jsxs("div",{className:"border border-gray-200 rounded-2xl p-3",children:[r.jsx("p",{className:"text-xs uppercase text-gray-500",children:"Discounts"}),r.jsx("p",{className:"text-lg font-semibold",children:It(oe.totalDiscount)})]}),r.jsxs("div",{className:"border border-emerald-200 rounded-2xl p-3 bg-emerald-50/60",children:[r.jsx("p",{className:"text-xs uppercase text-emerald-700",children:"Total Payable"}),r.jsx("p",{className:"text-xl font-bold text-emerald-900",children:It(oe.totalFee)})]})]})]}),r.jsx("section",{className:"text-xs text-gray-600 border-t border-gray-200 pt-4",children:r.jsxs("p",{children:["Generated on ",ka.toLocaleString("en-IN",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})]})})]}),r.jsxs("div",{className:"print:hidden container mx-auto px-4 py-8 space-y-4",children:[Y&&r.jsxs(fn,{className:"border-amber-300 bg-amber-50 md:sticky md:top-4 z-10",children:[r.jsx(Kr,{className:"h-4 w-4 text-amber-600"}),r.jsxs("div",{children:[r.jsx(Po,{children:"Corrections required"}),r.jsxs(mn,{className:"space-y-2",children:[r.jsxs("p",{className:"text-sm",children:["Your application requires updates before we can continue processing."," ",Vt?`Last updated ${Vt}.`:null]}),Ct?r.jsx("p",{className:"text-sm text-amber-700 whitespace-pre-line",children:Ct}):null,r.jsx(te,{variant:"outline",size:"sm",onClick:()=>t(`/applications/new?application=${oe.id}`),"data-testid":"button-banner-continue-corrections",children:"Continue Corrections"})]})]})]}),r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-6 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{...wt(Ge),"data-testid":"badge-status",children:wt(Ge).label}),r.jsx(ze,{...Ut(oe.category||"silver"),"data-testid":"badge-category",children:Ut(oe.category||"silver").label})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(te,{variant:"outline",size:"sm",onClick:lr,"data-testid":"button-print-application",children:[r.jsx(Bj,{className:"w-4 h-4 mr-2"}),"Print"]})})]}),pt&&r.jsxs("div",{className:"mb-6 border border-amber-200 bg-amber-50/60 rounded-lg p-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-amber-800",children:"Action required: update and resubmit"}),r.jsx("p",{className:"text-sm text-amber-700",children:"We restored your previous answers so you can fix remarks quickly. Review each step and submit once corrections are complete."})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsxs(te,{onClick:()=>{oe.status==="draft"?t(`/applications/new?draft=${oe.id}`):t(`/applications/new?application=${oe.id}`)},"data-testid":"button-open-corrections",children:[r.jsx(Mi,{className:"w-4 h-4 mr-2"}),"Open Guided Editor"]})})]}),r.jsxs(me,{className:"mb-6 rounded-3xl border border-slate-200 shadow-xl overflow-hidden",children:[r.jsxs(Ce,{className:"space-y-4 border-b border-slate-100 bg-gradient-to-r from-emerald-50 via-blue-50 to-white",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:"HP Tourism eServices"}),r.jsx("h2",{className:"text-2xl font-semibold leading-tight",children:"Homestay Registration Application"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Application #",St(oe.applicationNumber)]})]}),r.jsx("img",{src:C5,alt:"Himachal Tourism",className:"h-12 w-auto"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[r.jsx(ze,{...wt(Ge),children:wt(Ge).label}),r.jsx(ze,{...Ut(oe.category||"silver"),children:Ut(oe.category||"silver").label}),r.jsx(ze,{variant:"outline",className:"text-slate-700 border-slate-200",children:gr}),r.jsx(ze,{variant:"outline",className:"text-slate-700 border-slate-200",children:bi})]})]}),r.jsxs(ge,{className:"space-y-8",children:[r.jsx("section",{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Application Number"}),r.jsx("p",{className:"font-semibold","data-testid":"text-application-number",children:St(oe.applicationNumber)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Current Status"}),r.jsx("p",{className:"font-semibold",children:Os})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Submitted On"}),r.jsx("p",{children:An?An.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Last Updated"}),r.jsx("p",{children:ei?ei.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):""})]})]})}),r.jsxs("section",{className:"space-y-3",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Property Snapshot"}),r.jsxs("span",{className:"text-sm text-muted-foreground",children:["Homestay category: ",Dt]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Property Name"}),r.jsx("p",{className:"text-lg font-medium","data-testid":"text-property-name",children:St(oe.propertyName)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Total Rooms"}),r.jsxs("p",{className:"flex items-center gap-2","data-testid":"text-rooms",children:[r.jsx(Qv,{className:"w-4 h-4 text-muted-foreground"}),St(oe.totalRooms)," rooms"]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Address"}),r.jsx("p",{"data-testid":"text-address",children:St(oe.address)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"District"}),r.jsxs("p",{className:"flex items-center gap-2","data-testid":"text-district",children:[r.jsx(Js,{className:"w-4 h-4 text-muted-foreground"}),hu(oe.district)]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Tehsil"}),r.jsx("p",{"data-testid":"text-tehsil",children:St(oe.tehsil)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Village / Locality"}),r.jsx("p",{"data-testid":"text-gram-panchayat",children:St(oe.gramPanchayat)})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Urban Local Body"}),r.jsx("p",{"data-testid":"text-urban-body",children:St(oe.urbanBody)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"PIN Code"}),r.jsx("p",{"data-testid":"text-pincode",children:St(oe.pincode)})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Location Type"}),r.jsx("p",{"data-testid":"text-location-type",children:bi})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Project Type"}),r.jsx("p",{"data-testid":"text-project-type",children:gr})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Owner & Contact"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Full Name"}),r.jsx("p",{"data-testid":"text-owner-name",children:St(oe.ownerName)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Mobile Number"}),r.jsxs("p",{className:"flex items-center gap-2","data-testid":"text-owner-mobile",children:[r.jsx(Kg,{className:"w-4 h-4 text-muted-foreground"}),St(oe.ownerMobile)]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Email Address"}),r.jsxs("p",{className:"flex items-center gap-2","data-testid":"text-owner-email",children:[r.jsx(Jv,{className:"w-4 h-4 text-muted-foreground"}),St(oe.ownerEmail)]})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Aadhaar Number"}),r.jsx("p",{"data-testid":"text-owner-aadhaar",children:oe.ownerAadhaar?oe.ownerAadhaar.replace(/(\d{4})(\d{4})(\d{4})/,"$1 $2 $3"):""})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Accommodation & Tariffs"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Single / Double / Suites"}),r.jsxs("p",{children:[St(oe.singleBedRooms)," / ",St(oe.doubleBedRooms)," / ",St(oe.familySuites)]})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Attached Washrooms"}),r.jsx("p",{children:St(oe.attachedWashrooms)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Single Room Rate"}),r.jsx("p",{children:It(oe.singleBedRoomRate)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Double Room Rate"}),r.jsx("p",{children:It(oe.doubleBedRoomRate)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Family Suite Rate"}),r.jsx("p",{children:It(oe.familySuiteRate)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Proposed Tariff"}),r.jsx("p",{children:It(oe.proposedRoomRate)})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Ownership Type"}),r.jsx("p",{children:Fn})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"GSTIN"}),r.jsx("p",{children:St(oe.gstin)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Certificate Validity"}),r.jsxs("p",{children:[St(oe.certificateValidityYears)," years"]})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Distances & Facilities"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Airport"}),r.jsx("p",{children:yt(oe.distanceAirport)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Railway Station"}),r.jsx("p",{children:yt(oe.distanceRailway)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"City Center"}),r.jsx("p",{children:yt(oe.distanceCityCenter)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Bus Stand"}),r.jsx("p",{children:yt(oe.distanceBusStand)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Shopping Area"}),r.jsx("p",{children:yt(oe.distanceShopping)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Lobby Area"}),r.jsx("p",{children:ut(oe.lobbyArea)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Dining Area"}),r.jsx("p",{children:ut(oe.diningArea)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Parking"}),r.jsx("p",{children:St(oe.parkingArea)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Nearest Hospital"}),r.jsx("p",{children:St(oe.nearestHospital)})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Eco-Friendly Facilities"}),r.jsx("p",{children:St(oe.ecoFriendlyFacilities)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Differently Abled Access"}),r.jsx("p",{children:St(oe.differentlyAbledFacilities)})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground",children:"Fire Safety Equipment"}),r.jsx("p",{children:St(oe.fireEquipmentDetails)})]})]})]}),r.jsxs("section",{className:"space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Amenities"}),vn.length>0?r.jsx("div",{className:"flex flex-wrap gap-2",children:vn.map(st=>r.jsx("span",{className:"rounded-full border border-slate-200 px-3 py-1 text-sm text-slate-700",children:st},st))}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No amenities declared."})]}),r.jsxs("section",{className:"space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold",children:"Fee Summary"}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs("div",{className:"rounded-xl border border-slate-100 p-4",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Base Fee"}),r.jsx("p",{className:"text-lg font-semibold",children:It(oe.baseFee)})]}),r.jsxs("div",{className:"rounded-xl border border-slate-100 p-4",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Discounts"}),r.jsx("p",{className:"text-lg font-semibold",children:It(oe.totalDiscount)})]}),r.jsxs("div",{className:"rounded-xl border border-emerald-100 bg-emerald-50/60 p-4",children:[r.jsx("p",{className:"text-xs uppercase text-emerald-700",children:"Total Payable"}),r.jsx("p",{className:"text-xl font-bold text-emerald-900",children:It(oe.totalFee)})]})]})]})]})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"md:col-span-2 space-y-6",children:[Ge==="approved"&&oe.certificateNumber&&r.jsxs(me,{className:"border-green-200 bg-green-50/50",id:"registration-certificate",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zh,{className:"w-5 h-5 text-green-600"}),r.jsx(ke,{className:"text-green-800",children:"Registration Certificate Issued"})]}),r.jsx(Ue,{children:"Your homestay is officially registered with HP Tourism"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[r.jsx(je,{className:"text-muted-foreground text-xs",children:"Certificate Number"}),r.jsx("p",{className:"text-lg font-bold text-green-700","data-testid":"text-certificate-number",children:oe.certificateNumber})]}),oe.certificateIssuedDate&&r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-green-200",children:[r.jsx(je,{className:"text-muted-foreground text-xs",children:"Issue Date"}),r.jsx("p",{className:"text-lg font-semibold text-green-700","data-testid":"text-certificate-date",children:new Date(oe.certificateIssuedDate).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]})]}),oe.certificateExpiryDate&&r.jsx("div",{className:"bg-white p-3 rounded-lg border border-green-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground text-xs",children:"Valid Until"}),r.jsx("p",{className:"font-medium text-green-700",children:new Date(oe.certificateExpiryDate).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})})]}),r.jsx(ze,{variant:"default",className:"bg-green-600",children:"Active"})]})}),r.jsxs("div",{className:"bg-white p-3 rounded-lg border border-green-200 space-y-2",children:[r.jsx(je,{className:"text-muted-foreground text-xs",children:"Certificate Format"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:L.map(st=>r.jsx(te,{type:"button",size:"sm",variant:V===st.value?"default":"outline",className:V===st.value?"bg-green-600 hover:bg-green-700 text-white":"text-green-700 border-green-200",onClick:()=>P(st.value),children:st.label},st.value))}),r.jsx("p",{className:"text-[11px] text-muted-foreground",children:F.description})]}),r.jsx("div",{className:"flex gap-2 pt-2",children:r.jsxs(te,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:ae,"data-testid":"button-download-certificate",disabled:z,children:[r.jsx(ds,{className:"w-4 h-4 mr-2"}),z?"Preparing certificate...":`Download ${F.label}`]})})]})]}),Ge==="payment_pending"&&((zt=ie==null?void 0:ie.user)==null?void 0:zt.role)==="property_owner"&&r.jsxs(me,{className:"border-primary",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{className:"text-primary",children:"Payment Required"})]}),r.jsx(Ue,{children:"Complete payment to receive your registration certificate"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"p-3 bg-primary/5 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Registration Fee"}),r.jsxs("span",{className:"text-2xl font-bold text-primary",children:["",He.toLocaleString("en-IN")]})]})}),r.jsxs(te,{className:"w-full",onClick:()=>t(`/applications/${oe.id}/payment-himkosh`),"data-testid":"button-proceed-payment",children:[r.jsx(_a,{className:"w-4 h-4 mr-2"}),"Proceed to HimKosh"]})]})})]}),Ge==="payment_pending"&&((ji=ie==null?void 0:ie.user)==null?void 0:ji.role)!=="property_owner"&&r.jsxs(me,{className:"border-primary/50",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{className:"text-primary",children:"Payment Pending"})]}),r.jsx(Ue,{children:"Awaiting payment from property owner"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"p-3 bg-primary/5 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Registration Fee"}),r.jsxs("span",{className:"text-2xl font-bold text-primary",children:["",He.toLocaleString("en-IN")]})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"The property owner needs to complete payment before certificate can be issued."})]})})]}),Ge==="paid_pending_submit"&&((wi=ie==null?void 0:ie.user)==null?void 0:wi.role)==="property_owner"&&r.jsxs(me,{className:"border-blue-500 mb-6 shadow-md",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"w-5 h-5 text-blue-600"}),r.jsx(ke,{className:"text-blue-600",children:"Action Required"})]}),r.jsx(Ue,{children:"Your payment was successful. Please perform the final submission step to process your application."})]}),r.jsx(ge,{children:r.jsxs(te,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:()=>t(`/applications/${oe.id}/payment-himkosh`),children:[r.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Finalize Submission"]})})]}),pt&&(oe.clarificationRequested||oe.dtdoRemarks)&&r.jsxs(r.Fragment,{children:[oe.clarificationRequested&&r.jsxs(fn,{children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(Po,{children:"Feedback from Dealing Assistant"}),r.jsx(mn,{children:oe.clarificationRequested})]}),oe.dtdoRemarks&&r.jsxs(fn,{children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(Po,{children:"Feedback from DTDO"}),r.jsx(mn,{children:oe.dtdoRemarks})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(l2,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Uploaded Documents"})]}),r.jsx(Ue,{className:"mt-2",children:Q?"Loading documents...":fe!=null&&fe.documents&&fe.documents.length>0?`${fe.documents.length} document(s) uploaded`:"No documents uploaded yet"})]})}),r.jsxs(ge,{children:[pt&&r.jsx("div",{className:"mb-3 rounded-md border border-amber-200 bg-amber-50 p-3 text-xs text-amber-800",children:"Use the guided editor to replace or add documents before you resubmit. The list below shows the files currently attached to your application."}),Q?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),r.jsx("p",{className:"text-sm",children:"Loading documents..."})]}):!oe.ownershipProofUrl&&!oe.aadhaarCardUrl&&!((Rs=oe.propertyPhotosUrls)!=null&&Rs.length)&&(!(fe!=null&&fe.documents)||fe.documents.length===0)?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(l2,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No documents uploaded yet"}),r.jsx("p",{className:"text-xs mt-1",children:"Documents will appear here once the applicant uploads them"})]}):r.jsxs("div",{className:"space-y-4",children:[(()=>{var tr;const st=((tr=fe==null?void 0:fe.documents)==null?void 0:tr.filter(Zt=>Zt.documentType==="property_photo"&&Zt.mimeType.startsWith("image/")))||[];return st.length>0?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(a8,{className:"w-5 h-5 text-primary"}),r.jsxs("p",{className:"text-sm font-medium",children:["Property Photos (",st.length,")"]})]}),r.jsxs(te,{"data-testid":"button-view-gallery",variant:"default",size:"sm",onClick:()=>{se(0),G(!0)},children:[r.jsx(a8,{className:"w-4 h-4 mr-2"}),"View Gallery"]})]}),r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:st.map((Zt,$n)=>{const _s=Zt,ms=(typeof _s.fileUrl=="string"&&_s.fileUrl.length>0?_s.fileUrl:typeof _s.url=="string"&&_s.url.length>0?_s.url:void 0)||(Zt.filePath?Kd(Zt.filePath,{mimeType:typeof Zt.mimeType=="string"?Zt.mimeType:void 0,fileName:typeof Zt.fileName=="string"?Zt.fileName:void 0}):void 0),Ds=AB(Zt.verificationStatus),di=typeof Zt.verificationNotes=="string"&&Zt.verificationNotes.trim().length>0?Zt.verificationNotes.trim():"";return r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"aspect-square border rounded-md overflow-hidden cursor-pointer hover-elevate active-elevate-2",onClick:()=>{se($n),G(!0)},"data-testid":`thumbnail-property-${$n}`,children:ms?r.jsx("img",{src:ms,alt:Zt.fileName||`Property photo ${$n+1}`,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-xs text-muted-foreground bg-muted",children:"Missing Image"})}),(Ds||di)&&r.jsxs("div",{className:`rounded-md border px-2 py-1.5 text-xs space-y-1 ${(Ds==null?void 0:Ds.noteBgClass)??"bg-muted/40 border-border/40"}`,children:[Ds&&r.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${Ds.badgeClass}`,children:Ds.label}),di&&r.jsx("p",{className:`text-sm leading-relaxed ${(Ds==null?void 0:Ds.noteTextClass)??"text-muted-foreground"}`,children:di})]})]},Zt.id)})})]}):null})(),(()=>{var tr;const st=((tr=fe==null?void 0:fe.documents)==null?void 0:tr.filter(Zt=>Zt.documentType!=="property_photo"))||[];return st.length>0?r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Supporting Documents"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:st.map(Zt=>{const $n=AB(Zt.verificationStatus),_s=typeof Zt.verificationNotes=="string"&&Zt.verificationNotes.trim().length>0?Zt.verificationNotes.trim():"",qa=(typeof Zt.fileUrl=="string"&&Zt.fileUrl.length>0?Zt.fileUrl:void 0)??Zt.filePath,ms=qa?Kd(qa,{mimeType:Zt.mimeType,fileName:Zt.fileName}):void 0;return r.jsxs("div",{className:"flex flex-col p-3 border rounded-md hover-elevate space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded flex-shrink-0",children:Zt.mimeType.startsWith("image/")?r.jsx(l2,{className:"w-5 h-5 text-primary"}):r.jsx(ir,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm truncate",children:Zt.fileName}),r.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:Zt.documentType.replace(/_/g," ")})]})]}),($n||_s)&&r.jsxs("div",{className:`rounded-md border px-2 py-1.5 text-xs space-y-1 ${($n==null?void 0:$n.noteBgClass)??"bg-muted/40 border-border/40"}`,children:[$n&&r.jsx("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-[11px] font-medium ${$n.badgeClass}`,children:$n.label}),_s&&r.jsx("p",{className:`text-sm leading-relaxed ${($n==null?void 0:$n.noteTextClass)??"text-muted-foreground"}`,children:_s})]}),r.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[r.jsxs("span",{className:"text-xs text-muted-foreground",children:[Zt.fileSize?(Zt.fileSize/1024).toFixed(1):"0.0"," KB"]}),r.jsxs(te,{size:"sm",variant:"outline",disabled:!ms,onClick:()=>ms&&window.open(ms,"_blank"),"data-testid":`button-view-document-${Zt.id}`,children:[r.jsx(ds,{className:"w-4 h-4 mr-1"}),"View"]})]})]},Zt.id)})})]}):null})(),oe.ownershipProofUrl&&r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded",children:r.jsx(ir,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Property Ownership Proof"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Sale deed / Mutation certificate"})]})]}),r.jsxs(te,{size:"sm",variant:"outline",onClick:()=>window.open(oe.ownershipProofUrl,"_blank"),"data-testid":"button-view-ownership",children:[r.jsx(ds,{className:"w-4 h-4 mr-1"}),"View"]})]}),oe.aadhaarCardUrl&&r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded",children:r.jsx(ir,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Aadhaar Card"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Owner identification"})]})]}),r.jsxs(te,{size:"sm",variant:"outline",onClick:()=>window.open(oe.aadhaarCardUrl,"_blank"),"data-testid":"button-view-aadhaar",children:[r.jsx(ds,{className:"w-4 h-4 mr-1"}),"View"]})]}),oe.panCardUrl&&r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded",children:r.jsx(ir,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"PAN Card"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Tax identification"})]})]}),r.jsxs(te,{size:"sm",variant:"outline",onClick:()=>window.open(oe.panCardUrl,"_blank"),"data-testid":"button-view-pan",children:[r.jsx(ds,{className:"w-4 h-4 mr-1"}),"View"]})]}),oe.gstCertificateUrl&&r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary/10 rounded",children:r.jsx(ir,{className:"w-5 h-5 text-primary"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"GST Certificate"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Business registration"})]})]}),r.jsxs(te,{size:"sm",variant:"outline",onClick:()=>window.open(oe.gstCertificateUrl,"_blank"),"data-testid":"button-view-gst",children:[r.jsx(ds,{className:"w-4 h-4 mr-1"}),"View"]})]}),oe.propertyPhotosUrls&&oe.propertyPhotosUrls.length>0&&r.jsxs("div",{className:"border rounded-md p-3",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(l2,{className:"w-5 h-5 text-primary"}),r.jsxs("p",{className:"font-medium text-sm",children:["Property Photos (",oe.propertyPhotosUrls.length,")"]})]}),r.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-2",children:oe.propertyPhotosUrls.map((st,tr)=>r.jsx("div",{className:"aspect-square border rounded overflow-hidden cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>window.open(st,"_blank"),"data-testid":`image-property-${tr}`,children:r.jsx("img",{src:st,alt:`Property photo ${tr+1}`,className:"w-full h-full object-cover"})},tr))})]})]})]})]}),Ht&&r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Review Application"}),r.jsx(Ue,{children:Te?"As a District Officer, you can approve (forwards to State review) or reject this application":"As a State Officer, you can grant final approval or reject this application"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"comments",children:"Officer Comments"}),r.jsx(Ur,{id:"comments",placeholder:"Add your review comments here...",value:s,onChange:st=>i(st.target.value),className:"mt-2",rows:4,"data-testid":"input-officer-comments"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(zd,{children:[r.jsx(R7,{asChild:!0,children:r.jsxs(te,{variant:"default",className:"flex-1",disabled:Oe.isPending,"data-testid":"button-approve-trigger",children:[r.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Approve Application"]})}),r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:"Approve Application?"}),r.jsx(ed,{children:Te?r.jsxs(r.Fragment,{children:["This will approve the homestay application for ",r.jsx("strong",{children:oe.propertyName})," and forward it to State Tourism for final review."]}):r.jsxs(r.Fragment,{children:["This will grant final approval to ",r.jsx("strong",{children:oe.propertyName}),". The property will be listed on the public portal."]})})]}),r.jsxs(Zc,{children:[r.jsx(td,{"data-testid":"button-cancel-approve",children:"Cancel"}),r.jsx(Hd,{onClick:()=>Oe.mutate({action:"approve",comments:s}),"data-testid":"button-confirm-approve",children:"Approve"})]})]})]}),r.jsxs(zd,{children:[r.jsx(R7,{asChild:!0,children:r.jsxs(te,{variant:"destructive",className:"flex-1",disabled:Oe.isPending,"data-testid":"button-reject-trigger",children:[r.jsx(oo,{className:"w-4 h-4 mr-2"}),"Reject Application"]})}),r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:"Reject Application?"}),r.jsxs(ed,{children:["This will reject the homestay application for ",r.jsx("strong",{children:oe.propertyName}),". Please ensure you've added comments explaining the rejection."]})]}),r.jsxs(Zc,{children:[r.jsx(td,{"data-testid":"button-cancel-reject",children:"Cancel"}),r.jsx(Hd,{onClick:()=>Oe.mutate({action:"reject",comments:s}),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-reject",children:"Reject"})]})]})]})]})]})]}),(Te||qe)&&r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Officer Actions"}),r.jsxs(Ue,{children:["Available actions for this application (Status: ",Ge.replace(/_/g," "),")"]})]}),r.jsxs(ge,{className:"space-y-4",children:[(Ge==="submitted"||Ge==="document_verification")&&r.jsxs(us,{children:[r.jsx(Vb,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:"w-full","data-testid":"button-send-back",children:[r.jsx(qxe,{className:"w-4 h-4 mr-2"}),"Send Back for Corrections"]})}),r.jsxs(Jn,{children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Send Application Back"}),r.jsx(Ns,{children:"Return this application to the applicant for corrections or additional information."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"feedback",children:"Feedback to Applicant"}),r.jsx(Ur,{id:"feedback",placeholder:"Explain what needs to be corrected...",value:a,onChange:st=>o(st.target.value),rows:4,"data-testid":"input-sendback-feedback"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"issues",children:"Issues Found"}),r.jsx(Ur,{id:"issues",placeholder:"List specific issues that need to be addressed...",value:l,onChange:st=>c(st.target.value),rows:3,"data-testid":"input-sendback-issues"})]})]}),r.jsx(Fa,{children:r.jsx(te,{onClick:()=>ve.mutate({feedback:a,issuesFound:l}),disabled:ve.isPending||!a||a.length<10,"data-testid":"button-confirm-sendback",children:"Send Back"})})]})]}),(Ge==="document_verification"||Ge==="submitted")&&r.jsxs(us,{children:[r.jsx(Vb,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:"w-full","data-testid":"button-schedule-inspection",children:[r.jsx(_R,{className:"w-4 h-4 mr-2"}),"Schedule Site Inspection"]})}),r.jsxs(Jn,{children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Schedule Site Inspection"}),r.jsx(Ns,{children:"Set a date for the on-site inspection of this property."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"inspectionDate",children:"Inspection Date"}),r.jsx(Pe,{id:"inspectionDate",type:"date",value:d,onChange:st=>u(st.target.value),"data-testid":"input-inspection-date"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"inspectionNotes",children:"Notes"}),r.jsx(Ur,{id:"inspectionNotes",placeholder:"Add any special instructions or notes about the inspection...",value:h,onChange:st=>f(st.target.value),rows:3,"data-testid":"input-inspection-notes"})]})]}),r.jsx(Fa,{children:r.jsx(te,{onClick:()=>ee.mutate({scheduledDate:d,notes:h}),disabled:ee.isPending||!d,"data-testid":"button-confirm-schedule-inspection",children:"Schedule Inspection"})})]})]}),Ge==="site_inspection_scheduled"&&r.jsxs(us,{children:[r.jsx(Vb,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:"w-full","data-testid":"button-complete-inspection",children:[r.jsx(Mi,{className:"w-4 h-4 mr-2"}),"Complete Inspection"]})}),r.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Complete Site Inspection"}),r.jsx(Ns,{children:"Record your findings from the site inspection and choose an outcome"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(je,{className:"text-base font-semibold",children:"Inspection Checklist"}),r.jsxs("div",{className:"space-y-2 p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Zs,{id:"roomCountVerified",checked:g,onCheckedChange:st=>v(!!st),"data-testid":"checkbox-room-count"}),r.jsxs(je,{htmlFor:"roomCountVerified",className:"font-medium cursor-pointer",children:["Room count verified (Declared: ",oe.totalRooms,")"]})]}),r.jsx(Pe,{placeholder:"Actual room count (if different)",value:x,onChange:st=>y(st.target.value),type:"number","data-testid":"input-room-count-actual"})]}),r.jsxs("div",{className:"space-y-2 p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Zs,{id:"amenitiesVerified",checked:j,onCheckedChange:st=>w(!!st),"data-testid":"checkbox-amenities"}),r.jsxs(je,{htmlFor:"amenitiesVerified",className:"font-medium cursor-pointer",children:["Amenities verified (as per ",oe.category," category)"]})]}),r.jsx(Ur,{placeholder:"Issues with amenities (if any)...",value:N,onChange:st=>S(st.target.value),rows:2,"data-testid":"input-amenities-issues"})]}),r.jsxs("div",{className:"space-y-2 p-3 border rounded-md",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Zs,{id:"fireSafetyVerified",checked:T,onCheckedChange:st=>C(!!st),"data-testid":"checkbox-fire-safety"}),r.jsx(je,{htmlFor:"fireSafetyVerified",className:"font-medium cursor-pointer",children:"Fire safety measures verified"})]}),r.jsx(Ur,{placeholder:"Fire safety issues (if any)...",value:A,onChange:st=>R(st.target.value),rows:2,"data-testid":"input-fire-safety-issues"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"categoryRec",children:"Category Recommendation (Optional)"}),r.jsx(Pe,{id:"categoryRec",placeholder:"Recommend different category if needed",value:k,onChange:st=>O(st.target.value),"data-testid":"input-category-recommendation"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(je,{className:"text-base font-semibold",children:"Inspection Outcome"}),r.jsxs(wc,{value:m,onValueChange:st=>p(st),children:[r.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-md hover-elevate cursor-pointer",children:[r.jsx(Ps,{value:"approved",id:"outcome-approved","data-testid":"radio-approved"}),r.jsxs(je,{htmlFor:"outcome-approved",className:"flex-1 cursor-pointer",children:[r.jsx("span",{className:"font-medium text-green-600",children:"Approve"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Site inspection successful, move to payment"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-md hover-elevate cursor-pointer",children:[r.jsx(Ps,{value:"corrections_needed",id:"outcome-corrections","data-testid":"radio-corrections"}),r.jsxs(je,{htmlFor:"outcome-corrections",className:"flex-1 cursor-pointer",children:[r.jsx("span",{className:"font-medium text-orange-600",children:"Send Back for Corrections"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Issues found, applicant needs to fix them"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-md hover-elevate cursor-pointer",children:[r.jsx(Ps,{value:"rejected",id:"outcome-rejected","data-testid":"radio-rejected"}),r.jsxs(je,{htmlFor:"outcome-rejected",className:"flex-1 cursor-pointer",children:[r.jsx("span",{className:"font-medium text-destructive",children:"Reject"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Property does not meet requirements"})]})]})]})]}),(m==="corrections_needed"||m==="rejected")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"issuesFound",className:"text-destructive",children:"Issues Found *"}),r.jsx(Ur,{id:"issuesFound",placeholder:"Describe the issues that need to be addressed...",value:$,onChange:st=>D(st.target.value),rows:4,"data-testid":"input-issues-found",className:"border-destructive"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"completionNotes",children:"Additional Notes"}),r.jsx(Ur,{id:"completionNotes",placeholder:"Any additional observations or recommendations...",value:q,onChange:st=>M(st.target.value),rows:3,"data-testid":"input-inspection-completion-notes"})]})]}),r.jsx(Fa,{children:r.jsx(te,{onClick:()=>Ee.mutate(),disabled:Ee.isPending||(m==="corrections_needed"||m==="rejected")&&!$,"data-testid":"button-confirm-complete-inspection",children:Ee.isPending?"Processing...":"Submit Inspection Results"})})]})]}),Ge!=="submitted"&&Ge!=="document_verification"&&Ge!=="site_inspection_scheduled"&&r.jsx("div",{className:"text-sm text-muted-foreground p-4 border rounded-md",children:"No workflow actions available for current status. Use the Review section above to approve or reject."})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($m,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Fee Summary"})]})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Annual Registration Fee"}),r.jsxs("span",{"data-testid":"text-base-fee",children:["",Number(oe.baseFee??0).toFixed(2)]})]}),r.jsxs("div",{className:"space-y-1 text-sm mt-3 border-t pt-3",children:[Number(oe.femaleOwnerDiscount)>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Female Owner Discount"}),r.jsxs("span",{className:"text-green-600",children:["-",Number(oe.femaleOwnerDiscount).toFixed(2)]})]}),Number(oe.pangiDiscount)>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Pangi Sub-division Discount"}),r.jsxs("span",{className:"text-green-600",children:["-",Number(oe.pangiDiscount).toFixed(2)]})]}),Number(oe.validityDiscount)>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Validity Discount"}),r.jsxs("span",{className:"text-green-600",children:["-",Number(oe.validityDiscount).toFixed(2)]})]}),Number(oe.totalDiscount)>0&&r.jsxs("div",{className:"flex justify-between font-medium text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Total Discount"}),r.jsxs("span",{className:"text-green-700",children:["-",Number(oe.totalDiscount).toFixed(2)]})]})]}),r.jsxs("div",{className:"pt-3 border-t flex justify-between font-semibold",children:[r.jsx("span",{children:"Total Payable"}),r.jsxs("span",{className:"text-primary","data-testid":"text-total",children:["",Number(oe.totalFee??oe.baseFee).toFixed(2)]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"HP Tourism Policy 2025 collects a single consolidated fee (no per-room add-ons or GST line items)."})]})]}),Ke&&r.jsx(S6e,{applicationId:J??null,status:oe.status}),r.jsx(L6,{applicationId:J??null}),r.jsx(EC,{applicationId:J??null,description:"Tracks DA, DTDO, and owner actions for this application."}),!Ke&&(oe.districtNotes||oe.stateNotes)&&r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Officer Comments"})]})}),r.jsxs(ge,{className:"space-y-3",children:[oe.districtNotes&&r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground text-xs",children:"District Officer"}),r.jsx("p",{className:"text-sm","data-testid":"text-district-notes",children:oe.districtNotes})]}),oe.stateNotes&&r.jsxs("div",{children:[r.jsx(je,{className:"text-muted-foreground text-xs",children:"State Officer"}),r.jsx("p",{className:"text-sm","data-testid":"text-state-notes",children:oe.stateNotes})]})]})]})]})]})]}),(()=>{var tr;const st=((tr=fe==null?void 0:fe.documents)==null?void 0:tr.filter(Zt=>Zt.documentType==="property_photo"&&Zt.mimeType.startsWith("image/")))||[];return r.jsx(m6e,{images:st.map(Zt=>({filePath:Zt.filePath,fileName:Zt.fileName,mimeType:Zt.mimeType})),open:W,onClose:()=>G(!1),initialIndex:H})})()]})]})}const C6e=new Set(["draft","payment_pending","verified_for_payment"]),kB=new Set(["success","failed","verified"]),A6e="https://himkosh.hp.nic.in/echallan/WebPages/wrfApplicationRequest.aspx",k6e=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},P6e=e=>{const t=(e==null?void 0:e.transactionStatus)??null,n=(e==null?void 0:e.status)??"Awaiting confirmation from HimKosh. Keep the payment window open until you see the success screen.";switch(t){case"success":return{label:"Payment successful",description:(e==null?void 0:e.status)??"HimKosh confirmed the payment. The certificate will unlock once reconciliation completes.",badgeVariant:"default"};case"verified":return{label:"Payment verified",description:(e==null?void 0:e.status)??"Payment double-verified with HimKosh. You may download the certificate from the application view.",badgeVariant:"default"};case"failed":return{label:"Payment failed",description:(e==null?void 0:e.status)??"The gateway reported a failure. If money was deducted, share the HimKosh reference to reconcile manually.",badgeVariant:"destructive"};case"initiated":case"redirected":return{label:"Awaiting HimKosh confirmation",description:n,badgeVariant:"secondary"};case null:return{label:"No payment recorded",description:"Click Proceed to Payment to initiate a HimKosh transaction.",badgeVariant:"outline"};default:return{label:t.replace(/_/g," "),description:n,badgeVariant:"secondary"}}};function T6e(){const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),s=b.useRef(null),[i,a]=b.useState(null),[o,l]=b.useState(null),{data:c,isLoading:d}=rt({queryKey:["/api/applications",e],enabled:!!e}),u=c==null?void 0:c.application,{data:h,isFetching:f}=rt({queryKey:["/api/himkosh/application",e,"transactions"],enabled:!!e}),p=((h==null?void 0:h.transactions)??[])[0]??null,g=((u==null?void 0:u.status)??"").toLowerCase().trim(),v=g==="paid_pending_submit",x=C6e.has(g),y=(p==null?void 0:p.transactionStatus)??null,j=!!p&&!kB.has(y??""),w=(y==="success"||y==="verified")&&g!=="draft",N=y==="failed",S=!!(i!=null&&i.isTestMode),T=Number.parseFloat((u==null?void 0:u.totalFee)??"0")||0,C=(i==null?void 0:i.actualAmount)??T,A=(i==null?void 0:i.totalAmount)??C,R=b.useMemo(()=>P6e(p),[p]),k=(p==null?void 0:p.respondedAt)??(p==null?void 0:p.verifiedAt)??(p==null?void 0:p.updatedAt)??(p==null?void 0:p.initiatedAt)??(p==null?void 0:p.createdAt),O=k6e(k),$=!!p&&!!p.appRefNo&&!kB.has(y??""),D=(p==null?void 0:p.appRefNo)??(i==null?void 0:i.appRefNo)??"",q=(p==null?void 0:p.echTxnId)??null,M=(p==null?void 0:p.bankCIN)??null,L=(p==null?void 0:p.challanPrintUrl)??null,V=Ot({mutationFn:async()=>(l(null),(await lt("POST","/api/himkosh/initiate",{applicationId:e})).json()),onSuccess:H=>{a(H),er.invalidateQueries({queryKey:["/api/himkosh/application",e,"transactions"]}),er.invalidateQueries({queryKey:["/api/applications",e]}),H.isConfigured||n({title:"Test Mode",description:"HimKosh integration is using placeholder credentials. Treasury responses will be for testing only."})},onError:H=>{const se=H.message||"";if(se&&se!=="Failed to initiate payment"){let ie=se;try{const X=se.indexOf("{");if(X>=0){const he=se.substring(X),fe=JSON.parse(he);fe.message&&(ie=fe.message)}}catch{}l(ie);return}n({title:"Error",description:H.message||"Failed to initiate payment",variant:"destructive"})}}),P=Ot({mutationFn:async H=>(await lt("POST",`/api/himkosh/verify/${H}`)).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/himkosh/application",e,"transactions"]}),er.invalidateQueries({queryKey:["/api/applications",e]}),n({title:"Verification queued",description:"Double verification requested. Status will refresh once HimKosh responds."})},onError:H=>{n({title:"Verification failed",description:H.message||"Unable to contact HimKosh verification service.",variant:"destructive"})}}),z=Ot({mutationFn:async()=>{await lt("POST",`/api/himkosh/application/${e}/reset`)},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/himkosh/application",e,"transactions"]}),er.invalidateQueries({queryKey:["/api/applications",e]}),a(null),n({title:"Payment attempt cancelled",description:"You can initiate a fresh HimKosh transaction now."})},onError:H=>{n({title:"Unable to cancel attempt",description:H.message||"Could not reset the pending payment attempt.",variant:"destructive"})}}),Z=Ot({mutationFn:async()=>(await lt("POST",`/api/applications/${e}/submit`)).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/applications",e]}),n({title:"Application Submitted",description:"Your application has been successfully submitted for processing."}),t("/dashboard")},onError:H=>{n({title:"Submission failed",description:H.message||"Failed to submit application",variant:"destructive"})}});if(b.useEffect(()=>{i&&s.current&&i.isConfigured&&s.current.submit()},[i]),b.useEffect(()=>{if(!j)return;const H=setInterval(()=>{er.invalidateQueries({queryKey:["/api/himkosh/application",e,"transactions"]}),er.invalidateQueries({queryKey:["/api/applications",e]})},15e3);return()=>clearInterval(H)},[e,j,p==null?void 0:p.id]),b.useEffect(()=>{w&&er.invalidateQueries({queryKey:["/api/applications",e]})},[w,e]),d)return r.jsx("div",{className:"container mx-auto p-6",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"text-lg text-muted-foreground",children:"Loading payment details..."})})})});if(!u)return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsxs(fn,{variant:"destructive",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(mn,{children:"This application is not available or you do not have access."})]}),r.jsxs(te,{onClick:()=>t("/dashboard"),className:"mt-4",children:[r.jsx(Es,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})]});const F=V.isPending||j||w||!x;let W="Proceed to Payment";V.isPending?W="Initiating":!x&&!w&&!j?W="Payment Disabled":j?W="Payment In Progress":w?W="Payment Completed":N&&(W="Retry Payment");const G=!x&&!w&&!j?"This application is not currently marked as payment pending. Officers must enable payment before you can retry.":null;return r.jsx("div",{className:"bg-background",children:r.jsxs("div",{className:"container mx-auto p-6 max-w-5xl space-y-6",children:[r.jsx("div",{children:r.jsxs(te,{variant:"ghost",onClick:()=>t("/dashboard"),children:[r.jsx(Es,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Complete Payment via HimKosh"}),r.jsxs("p",{className:"text-muted-foreground mt-2",children:["Application #",u.applicationNumber,"  ",u.propertyName]})]}),w&&(v?r.jsxs(fn,{className:"border-blue-200 bg-blue-50 text-blue-900",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsx(mn,{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("p",{children:["Payment confirmed by HimKosh (Ref:"," ",r.jsx("span",{className:"font-semibold",children:q??"N/A"}),")."]}),r.jsx("p",{className:"font-medium",children:"One final step: Please click below to submit your application for processing."}),r.jsx("div",{className:"mt-2",children:r.jsxs(te,{onClick:()=>Z.mutate(),disabled:Z.isPending,children:[Z.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Application Now"]})})]})})]}):r.jsxs(fn,{className:"border-green-200 bg-green-50 text-green-900",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsxs(mn,{children:["Payment recorded by HimKosh. Treasury reference"," ",q?r.jsx("span",{className:"font-semibold",children:q}):"will appear once reconciliation completes",M?r.jsxs(r.Fragment,{children:[" ","(Bank CIN ",r.jsx("span",{className:"font-semibold",children:M}),")"]}):null,". Download the certificate from the application overview once it is generated."]})]})),N&&r.jsxs(fn,{className:"border-red-200 bg-red-50 text-red-900",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(mn,{children:"The last payment attempt failed. Please retry below. If money was deducted, share the HimKosh reference with support to reconcile manually."})]}),j&&r.jsxs(fn,{className:"bg-amber-50 border-amber-200 text-amber-900",children:[r.jsx(fQ,{className:"h-4 w-4"}),r.jsxs(mn,{children:["Payment request"," ",r.jsx("span",{className:"font-semibold",children:D})," is in progress. Complete the HimKosh flow in the opened tab; this page will update once treasury responds."]})]}),G&&r.jsxs(fn,{className:"bg-blue-50 border-blue-200 text-blue-900",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(mn,{children:G})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-start",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"h-5 w-5"}),"Fee Breakdown"]}),r.jsx(Ue,{children:"Registration fee calculation"})]}),r.jsx(ge,{className:"space-y-4",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Category"}),r.jsx(ze,{variant:"outline",className:"uppercase",children:u.category})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Rooms"}),r.jsx("span",{className:"font-medium",children:u.totalRooms})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Certificate Validity"}),r.jsxs(ze,{variant:"secondary",children:[u.certificateValidityYears||1," ",(u.certificateValidityYears||1)===1?"Year":"Years"]})]}),r.jsx(oc,{}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm",children:"Base Fee (Annual)"}),r.jsxs("span",{children:["",Number.parseFloat(u.baseFee||"0").toLocaleString("en-IN")]})]}),u.certificateValidityYears&&u.certificateValidityYears>1&&r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-sm",children:["Total for ",u.certificateValidityYears," Years"]}),r.jsxs("span",{children:["",Number.parseFloat(u.totalBeforeDiscounts||"0").toLocaleString("en-IN")]})]}),Number.parseFloat(u.totalDiscount||"0")>0&&r.jsxs(r.Fragment,{children:[r.jsx(oc,{}),r.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Discounts Applied:"}),Number.parseFloat(u.validityDiscount||"0")>0&&r.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[r.jsx("span",{className:"text-sm",children:"3-Year Lump Sum (10%)"}),r.jsxs("span",{children:["-",Number.parseFloat(u.validityDiscount||"0").toLocaleString("en-IN")]})]}),Number.parseFloat(u.femaleOwnerDiscount||"0")>0&&r.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[r.jsx("span",{className:"text-sm",children:"Women Entrepreneur (5%)"}),r.jsxs("span",{children:["-",Number.parseFloat(u.femaleOwnerDiscount||"0").toLocaleString("en-IN")]})]}),Number.parseFloat(u.pangiDiscount||"0")>0&&r.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[r.jsx("span",{className:"text-sm",children:"Pangi Sub-Division (50%)"}),r.jsxs("span",{children:["-",Number.parseFloat(u.pangiDiscount||"0").toLocaleString("en-IN")]})]})]}),r.jsx(oc,{}),r.jsxs("div",{className:"flex justify-between items-center text-base font-semibold",children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["",T.toLocaleString("en-IN")]})]})]})})]}),r.jsxs(me,{className:"border-primary/40 bg-primary/5 shadow-sm",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"h-5 w-5"}),"Government Payment Gateway"]}),r.jsx(Ue,{children:"Secure payment via HimKosh Cyber Treasury"})]}),r.jsxs(ge,{className:"space-y-5",children:[r.jsx("div",{className:"rounded-lg border border-primary/30 bg-background p-4 shadow-sm",children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cl,{className:"h-4 w-4 text-primary"}),r.jsx("span",{className:"font-semibold text-sm",children:"HimKosh  HP Cyber Treasury Portal"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Official payment gateway of Himachal Pradesh Government for secure online transactions."}),r.jsxs("div",{className:"grid gap-2 text-xs text-muted-foreground sm:grid-cols-2",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-3 w-3"}),"Credit / Debit Cards"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-3 w-3"}),"UPI (GPay, PhonePe)"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-3 w-3"}),"Net Banking"]}),r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"h-3 w-3"}),"Wallets & More"]})]})]})}),r.jsxs(fn,{children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsxs(mn,{children:[r.jsx("div",{className:"font-medium text-sm mb-2",children:"Quick steps:"}),r.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm",children:[r.jsx("li",{children:"Click Proceed to Payment."}),r.jsx("li",{children:"A new HimKosh tab opens automatically."}),r.jsx("li",{children:"Complete the payment using your preferred method."}),r.jsx("li",{children:"Keep this page open; it updates once HimKosh responds."})]})]})]}),o&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-900 animate-in fade-in zoom-in-95",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(jn,{className:"h-5 w-5 text-red-600 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-sm",children:"Payment Service Unavailable"}),r.jsx("p",{className:"text-sm mt-0.5",children:o})]})]})}),i&&i.isConfigured?r.jsxs("form",{method:"POST",action:i.paymentUrl,target:"_blank",children:[r.jsx("input",{type:"hidden",name:"encdata",value:i.encdata}),r.jsx("input",{type:"hidden",name:"merchant_code",value:i.merchantCode}),r.jsx(te,{type:"submit",disabled:F,className:"w-full",size:"lg",children:r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(zu,{className:"h-4 w-4"}),"Pay Now"]})})]}):r.jsx(te,{type:"button",onClick:H=>{H.preventDefault(),V.mutate()},disabled:F,className:"w-full",size:"lg",children:V.isPending?r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),W]}):r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx(zu,{className:"h-4 w-4"}),W]})}),S&&r.jsxs(me,{className:"border-orange-200 bg-orange-50 mb-6",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2 text-orange-800",children:[r.jsx(jn,{className:"h-5 w-5"}),"Test Payment Mode Active"]}),r.jsxs(Ue,{className:"text-orange-700",children:["Gateway will receive"," ",r.jsxs("span",{className:"font-semibold",children:["",A.toLocaleString("en-IN")]})," ","(test amount)"]})]}),r.jsxs(ge,{className:"text-sm text-orange-800 space-y-1",children:[r.jsxs("p",{children:["Actual fee (for records):"," ",r.jsxs("span",{className:"font-medium",children:["",C.toLocaleString("en-IN")]})]}),r.jsx("p",{className:"text-xs",children:"This run is for interface verification only1 is sent to HimKosh while the full calculation remains for departmental review."}),r.jsx("p",{className:"text-xs",children:"Disable test mode in the deployment configuration before collecting the full amount."}),r.jsxs("p",{className:"text-xs",children:["Transaction ID: ",r.jsx("span",{className:"font-mono",children:D})]})]})]}),(i==null?void 0:i.message)&&i.isConfigured&&r.jsx(fn,{className:"border-primary/40 bg-primary/5",children:r.jsx(mn,{className:"text-sm text-primary",children:i.message})}),i&&i.isConfigured&&r.jsx("div",{className:"text-center text-sm text-muted-foreground",children:"Redirecting to HimKosh payment gateway"}),i&&r.jsxs("form",{ref:s,method:"POST",action:i.paymentUrl,className:"hidden",children:[r.jsx("input",{type:"hidden",name:"encdata",value:i.encdata}),r.jsx("input",{type:"hidden",name:"merchant_code",value:i.merchantCode})]})]})]})]}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[r.jsxs(me,{className:"border-primary/20 shadow-sm",children:[r.jsxs(Ce,{className:"flex items-center justify-between flex-wrap gap-2",children:[r.jsxs("div",{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"h-5 w-5"}),"Payment Status"]}),r.jsx(Ue,{children:"Track the latest status returned by HimKosh"})]}),f&&r.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(vt,{className:"h-3 w-3 animate-spin"}),"Syncing"]})]}),r.jsx(ge,{className:"space-y-4 text-sm",children:p?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Status"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-base font-semibold",children:R.label}),r.jsx(ze,{variant:R.badgeVariant,children:y??"pending"})]})]}),r.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[r.jsx("div",{className:"uppercase tracking-wide",children:"Last update"}),r.jsx("div",{className:"font-medium text-foreground",children:O})]})]}),r.jsx(oc,{}),r.jsxs("dl",{className:"grid gap-3 text-sm sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"App Reference"}),r.jsx("dd",{className:"font-mono",children:p.appRefNo})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Gateway Amount"}),r.jsxs("dd",{className:"font-medium",children:["",(p.totalAmount??0).toLocaleString("en-IN")]})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"HimKosh GRN"}),r.jsx("dd",{className:"font-mono",children:q??""})]}),r.jsxs("div",{children:[r.jsx("dt",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Bank CIN"}),r.jsx("dd",{className:"font-mono",children:M??""})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:R.description}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>(p==null?void 0:p.appRefNo)&&P.mutate(p.appRefNo),disabled:!$||P.isPending,children:[P.isPending?r.jsx(vt,{className:"h-3 w-3 mr-2 animate-spin"}):r.jsx(Na,{className:"h-3 w-3 mr-2"}),"Refresh Status"]}),j&&r.jsxs(te,{variant:"destructive",size:"sm",onClick:()=>{confirm("Cancel this HimKosh attempt and start again? Only do this if you did not complete payment in the treasury window.")&&z.mutate()},disabled:z.isPending,children:[z.isPending?r.jsx(vt,{className:"h-3 w-3 mr-2 animate-spin"}):null,"Cancel Attempt"]}),L&&r.jsx(te,{variant:"outline",size:"sm",asChild:!0,children:r.jsxs("a",{href:L,target:"_blank",rel:"noopener noreferrer",children:[r.jsx(zu,{className:"h-3 w-3 mr-2"}),"View Challan"]})})]})]}):r.jsx("div",{className:"text-sm text-muted-foreground",children:"No payment attempts recorded yet. Click Proceed to Payment to start a HimKosh transaction."})})]}),r.jsxs(me,{className:"shadow-sm",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"h-5 w-5"}),"Gateway Diagnostics"]}),r.jsx(Ue,{children:"Technical snapshot of the last request sent to HimKosh"})]}),r.jsxs(ge,{className:"space-y-4 text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Mode"}),r.jsx(ze,{variant:"outline",className:"uppercase",children:(i==null?void 0:i.isConfigured)===!1?"Placeholder":"Encrypted"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Gateway URL"}),r.jsxs("a",{href:(i==null?void 0:i.paymentUrl)??A6e,target:"_blank",rel:"noopener noreferrer",className:"text-primary flex items-center gap-1 text-xs",children:["HimKosh Portal ",r.jsx(zu,{className:"h-3 w-3"})]})]}),r.jsx(oc,{}),r.jsxs("dl",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("dt",{className:"text-muted-foreground",children:"Merchant Code"}),r.jsx("dd",{className:"font-mono text-xs",children:(p==null?void 0:p.merchantCode)??(i==null?void 0:i.merchantCode)??""})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("dt",{className:"text-muted-foreground",children:"Service Code"}),r.jsx("dd",{className:"font-mono text-xs",children:(p==null?void 0:p.serviceCode)??""})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("dt",{className:"text-muted-foreground",children:"DDO"}),r.jsx("dd",{className:"font-mono text-xs",children:(p==null?void 0:p.ddo)??""})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("dt",{className:"text-muted-foreground",children:"Head of Account"}),r.jsx("dd",{className:"font-mono text-xs",children:(p==null?void 0:p.head1)??""})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("dt",{className:"text-muted-foreground",children:"Period"}),r.jsx("dd",{className:"font-mono text-xs",children:p!=null&&p.periodFrom&&(p!=null&&p.periodTo)?`${p.periodFrom}  ${p.periodTo}`:""})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Keep this page open while completing the payment on HimKosh. If the session expires, reopen the payment window and retry."})]})]})]}),r.jsxs(fn,{children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsx(mn,{children:"Your payment is secured by HP Government's Cyber Treasury Portal. After successful payment, your certificate will be generated automatically and made available for download."})]})]})})}const E6e=new Set(["draft","payment_pending","verified_for_payment"]),O6e=e=>{if(!e)return"";const t=new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleString("en-IN",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})},R6e=e=>{const t=(e==null?void 0:e.orderStatus)??null;switch(t){case"Success":return{label:"Payment Successful",description:"Payment confirmed. You may proceed.",badgeVariant:"default"};case"Failure":case"Aborted":case"Invalid":return{label:`Payment ${t}`,description:(e==null?void 0:e.failureMessage)||"Transaction failed.",badgeVariant:"destructive"};case"Initiated":return{label:"Awaiting Confirmation",description:"Transaction initiated. Waiting for response.",badgeVariant:"secondary"};case null:return{label:"No payment recorded",description:"Click Proceed to Payment to initiate.",badgeVariant:"outline"};default:return{label:t||"Unknown",description:"Status unknown.",badgeVariant:"secondary"}}};function D6e(){const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),s=b.useRef(null),[i,a]=b.useState(null),{data:o,isLoading:l}=rt({queryKey:["/api/applications",e],enabled:!!e}),c=o==null?void 0:o.application,{data:d,isFetching:u}=rt({queryKey:["/api/ccavenue/application",e,"transactions"],enabled:!!e,refetchInterval:S=>{var C,A;const T=(A=(C=S.state.data)==null?void 0:C.transactions)==null?void 0:A[0];return(T==null?void 0:T.orderStatus)==="Initiated"?5e3:!1}}),f=((d==null?void 0:d.transactions)??[])[0]??null,m=((c==null?void 0:c.status)??"").toLowerCase().trim(),p=m==="paid_pending_submit";E6e.has(m);const g=(f==null?void 0:f.orderStatus)??null,v=g==="Initiated",x=g==="Success"&&m!=="draft",y=["Failure","Aborted","Invalid"].includes(g||""),j=Number.parseFloat((c==null?void 0:c.totalFee)??"0")||0;b.useMemo(()=>R6e(f),[f]),O6e((f==null?void 0:f.transDate)||(f==null?void 0:f.createdAt));const w=Ot({mutationFn:async()=>(await lt("POST","/api/ccavenue/initiate",{applicationId:e})).json(),onSuccess:S=>{a(S),er.invalidateQueries({queryKey:["/api/ccavenue/application",e,"transactions"]}),S.isTestMode&&n({title:"Test Mode Active",description:"Processing a test transaction of 1."})},onError:S=>{n({title:"Error",description:S.message||"Failed to initiate payment",variant:"destructive"})}}),N=Ot({mutationFn:async()=>(await lt("POST",`/api/applications/${e}/submit`)).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/applications",e]}),n({title:"Application Submitted",description:"Your application has been successfully submitted."}),t("/dashboard")},onError:S=>{n({title:"Submission failed",description:S.message||"Failed to submit application",variant:"destructive"})}});return b.useEffect(()=>{i&&s.current&&s.current.submit()},[i]),l?r.jsx("div",{className:"container mx-auto p-6 flex justify-center h-96 items-center",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):c?r.jsx("div",{className:"bg-background",children:r.jsxs("div",{className:"container mx-auto p-6 max-w-5xl space-y-6",children:[r.jsx("div",{children:r.jsxs(te,{variant:"ghost",onClick:()=>t("/dashboard"),children:[r.jsx(Es,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Complete Payment via Kotak Mahindra"}),r.jsxs("p",{className:"text-muted-foreground mt-2",children:["Application #",c.applicationNumber,"  ",c.propertyName]})]}),x&&(p?r.jsxs(fn,{className:"border-blue-200 bg-blue-50 text-blue-900",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsx(mn,{children:r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsxs("p",{children:["Payment Successful (Ref: ",r.jsx("span",{className:"font-semibold",children:f==null?void 0:f.trackingId}),")."]}),r.jsx("p",{className:"font-medium",children:"Please submit your application now."}),r.jsx("div",{className:"mt-2",children:r.jsxs(te,{onClick:()=>N.mutate(),disabled:N.isPending,children:[N.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit Application Now"]})})]})})]}):r.jsxs(fn,{className:"border-green-200 bg-green-50 text-green-900",children:[r.jsx(Fr,{className:"h-4 w-4"}),r.jsxs(mn,{children:["Payment Confirmed. Transaction Ref: ",r.jsx("span",{className:"font-semibold",children:f==null?void 0:f.trackingId}),"."]})]})),y&&r.jsxs(fn,{className:"border-red-200 bg-red-50 text-red-900",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsxs(mn,{children:["Payment Failed: ",(f==null?void 0:f.failureMessage)||"Transaction not completed."," Please retry."]})]}),v&&r.jsxs(fn,{className:"bg-amber-50 border-amber-200 text-amber-900",children:[r.jsx(fQ,{className:"h-4 w-4"}),r.jsx(mn,{children:"Payment initiated. Please complete the transaction in the new tab. This page will update automatically."})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 items-start",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"h-5 w-5"})," Fee Breakdown"]})}),r.jsx(ge,{className:"space-y-4",children:r.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["",j.toLocaleString("en-IN")]})]})})]}),r.jsxs(me,{className:"border-primary/40 bg-primary/5 shadow-sm",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"h-5 w-5"}),"Kotak Mahindra Gateway"]}),r.jsx(Ue,{children:"Secure payment via CCAvenue"})]}),r.jsxs(ge,{className:"space-y-5",children:[r.jsx("div",{className:"rounded-lg border border-primary/30 bg-background p-4 text-sm text-muted-foreground",children:"Cards, Net Banking, UPI accepted."}),!x&&r.jsx(te,{onClick:()=>w.mutate(),disabled:w.isPending||v,className:"w-full",size:"lg",children:w.isPending?"Initiating...":"Pay Now"}),i&&r.jsxs("form",{ref:s,method:"POST",action:i.paymentUrl,className:"hidden",children:[r.jsx("input",{type:"hidden",name:"encRequest",value:i.encRequest}),r.jsx("input",{type:"hidden",name:"access_code",value:i.accessCode})]})]})]})]})]})}):r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx(fn,{variant:"destructive",children:r.jsx(mn,{children:"Application not found."})}),r.jsx(te,{onClick:()=>t("/dashboard"),className:"mt-4",children:"Back to Dashboard"})]})}function M6e(){const{data:e,isLoading:t}=rt({queryKey:["/api/public/settings/payment-gateway"],queryFn:async()=>(await lt("GET","/api/public/settings/payment-gateway")).json(),staleTime:3e5});return t?r.jsx("div",{className:"flex h-[50vh] w-full items-center justify-center",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):(e==null?void 0:e.gateway)==="ccavenue"?r.jsx(D6e,{}):r.jsx(T6e,{})}function I6e(){const[e,t]=b.useState("clean");b.useEffect(()=>{const s=localStorage.getItem("icon-style");s&&(t(s),document.documentElement.setAttribute("data-icon-style",s))},[]);const n=()=>{const s=e==="clean"?"colorful":"clean";t(s),localStorage.setItem("icon-style",s),document.documentElement.setAttribute("data-icon-style",s)};return r.jsxs(te,{variant:"outline",size:"sm",onClick:n,"data-testid":"button-icon-style",title:e==="clean"?"Switch to Colorful Icons":"Switch to Clean Icons",children:[r.jsx(gQ,{className:"w-4 h-4 mr-2"}),e==="clean"?"Colorful":"Clean"]})}const L6e=["All Districts","Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul and Spiti","Mandi","Shimla","Sirmaur","Solan","Una"],PB=[{id:"wifi",label:"WiFi",emoji:"",icon:NQ,colorClass:"amenity-wifi"},{id:"parking",label:"Parking",emoji:"",icon:$xe,colorClass:"amenity-parking"},{id:"ac",label:"Air Conditioning",emoji:"",icon:Rxe,colorClass:"amenity-ac"},{id:"mountainView",label:"Mountain View",emoji:"",icon:Cg,colorClass:"amenity-view"},{id:"restaurant",label:"Dining Area",emoji:"",icon:Vj,colorClass:"amenity-restaurant"},{id:"hotWater",label:"Hot Water 24/7",emoji:"",icon:Xxe,colorClass:"amenity-water"},{id:"garden",label:"Garden",emoji:"",icon:bQ,colorClass:"amenity-garden"},{id:"tv",label:"Television",emoji:"",icon:jQ,colorClass:"amenity-tv"},{id:"breakfast",label:"Breakfast",emoji:"",icon:Wxe,colorClass:"amenity-breakfast"},{id:"heater",label:"Room Heater",emoji:"",icon:PR,colorClass:"amenity-heater"}];function F6e(){const[e,t]=b.useState(""),[n,s]=b.useState("All Districts"),[i,a]=b.useState("All Categories"),[o,l]=b.useState({}),[c,d]=b.useState(!1),{data:u,isLoading:h}=rt({queryKey:["/api/public/properties"],staleTime:0,refetchOnMount:!0}),m=((u==null?void 0:u.properties)||[]).filter(v=>{const x=e===""||v.propertyName.toLowerCase().includes(e.toLowerCase())||v.address.toLowerCase().includes(e.toLowerCase()),y=n==="All Districts"||v.district===n,j=i==="All Categories"||v.category===i.toLowerCase(),w=Object.keys(o).filter(S=>o[S]),N=w.length===0||w.every(S=>v.amenities&&v.amenities[S]);return x&&y&&j&&N}),p=v=>{const x={diamond:{label:"Diamond",variant:"default",icon:Vm},gold:{label:"Gold",variant:"secondary",icon:dv},silver:{label:"Silver",variant:"outline",icon:dv}};return x[v]||x.silver},g=v=>{l(x=>({...x,[v]:!x[v]}))};return r.jsxs("div",{className:"bg-background",children:[r.jsx(jf,{title:"Discover Himachal Pradesh",showBack:!1,showHome:!0,actions:r.jsx(I6e,{})}),r.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-background border-b",children:r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:r.jsx(rh,{className:"w-7 h-7 text-primary"})}),r.jsx("div",{children:r.jsx("p",{className:"text-muted-foreground",children:"Authentic homestays in the heart of the Himalayas"})})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),r.jsx(Pe,{placeholder:"Search by property name or location...",value:e,onChange:v=>t(v.target.value),className:"pl-10","data-testid":"input-search"})]}),r.jsxs(te,{variant:"outline",onClick:()=>d(!c),"data-testid":"button-toggle-filters",children:[r.jsx(eve,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),c&&r.jsxs(me,{className:"mt-4",children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Filter Properties"})}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"District"}),r.jsxs(pr,{value:n,onValueChange:s,children:[r.jsx(ur,{"data-testid":"select-district",children:r.jsx(yr,{})}),r.jsx(hr,{children:L6e.map(v=>r.jsx(it,{value:v,children:v},v))})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),r.jsxs(pr,{value:i,onValueChange:a,children:[r.jsx(ur,{"data-testid":"select-category",children:r.jsx(yr,{})}),r.jsxs(hr,{children:[r.jsx(it,{value:"All Categories",children:"All Categories"}),r.jsx(it,{value:"Diamond",children:"Diamond"}),r.jsx(it,{value:"Gold",children:"Gold"}),r.jsx(it,{value:"Silver",children:"Silver"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-3 block",children:"Amenities"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:PB.map(v=>{const x=v.icon;return r.jsxs("div",{className:"flex items-center space-x-2 p-2 rounded-md hover-elevate cursor-pointer",onClick:()=>g(v.id),children:[r.jsx(Zs,{id:v.id,checked:o[v.id]||!1,onCheckedChange:()=>g(v.id),"data-testid":`checkbox-${v.id}`}),r.jsxs("label",{htmlFor:v.id,className:"flex items-center gap-2 text-sm cursor-pointer flex-1",children:[r.jsxs("div",{className:`amenity-icon ${v.colorClass}`,children:[r.jsx("span",{className:"text-lg emoji-icon",children:v.emoji}),r.jsx(x,{className:"w-4 h-4 svg-icon"})]}),r.jsx("span",{className:"line-clamp-1",children:v.label})]})]},v.id)})})]})]})]})]})}),r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("div",{className:"flex justify-between items-center mb-6",children:r.jsxs("p",{className:"text-muted-foreground","data-testid":"text-results-count",children:[m.length," ",m.length===1?"property":"properties"," found"]})}),h?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(v=>r.jsxs(me,{className:"hover-elevate",children:[r.jsxs(Ce,{className:"space-y-2",children:[r.jsx("div",{className:"h-6 bg-muted rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-muted rounded w-2/3 animate-pulse"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})]})})]},v))}):m.length===0?r.jsxs(me,{className:"p-12 text-center",children:[r.jsx(rh,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No properties found"}),r.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filters"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(v=>{const x=p(v.category),y=x.icon,j=v.amenities?Object.entries(v.amenities).filter(([,w])=>w).map(([w])=>PB.find(N=>N.id===w)).filter(Boolean).slice(0,6):[];return r.jsx(Co,{href:`/properties/${v.id}`,children:r.jsxs(me,{className:"hover-elevate active-elevate-2 h-full cursor-pointer","data-testid":`card-property-${v.id}`,children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs(ze,{variant:x.variant,className:"flex items-center gap-1",children:[r.jsx(y,{className:"w-3 h-3"}),x.label]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-primary",children:[r.jsx(dv,{className:"w-4 h-4 fill-primary"}),r.jsx("span",{className:"font-medium",children:"Certified"})]})]}),r.jsx(ke,{className:"line-clamp-1",children:v.propertyName}),r.jsxs(Ue,{className:"flex items-center gap-1",children:[r.jsx(Js,{className:"w-3 h-3"}),v.district]})]}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:v.address}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Qv,{className:"w-4 h-4 text-muted-foreground"}),r.jsxs("span",{children:[v.totalRooms," ",v.totalRooms===1?"room":"rooms"]})]}),j.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t",children:j.map(w=>{if(!w)return null;const N=w.icon;return r.jsxs("div",{className:`property-amenity-icon ${w.colorClass}`,title:w.label,children:[r.jsx("span",{className:"emoji-icon",children:w.emoji}),r.jsx(N,{className:"w-4 h-4 svg-icon"})]},w.id)})}),r.jsx(te,{className:"w-full",variant:"outline",size:"sm",children:"View Details"})]})]})},v.id)})})]})]})}function $6e(){var l;const{id:e}=bf();Dr();const{data:t,isLoading:n}=rt({queryKey:["/api/public/properties"]}),s=(l=t==null?void 0:t.properties)==null?void 0:l.find(c=>c.id===e);if(n)return r.jsx("div",{className:"bg-background",children:r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs(me,{children:[r.jsxs(Ce,{className:"space-y-3",children:[r.jsx("div",{className:"h-8 bg-muted rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-muted rounded w-1/2 animate-pulse"})]}),r.jsx(ge,{className:"space-y-4",children:[1,2,3,4].map(c=>r.jsx("div",{className:"h-20 bg-muted rounded animate-pulse"},c))})]})})});if(!s)return r.jsx("div",{className:"bg-background flex items-center justify-center",children:r.jsx(me,{className:"max-w-md w-full",children:r.jsxs(ge,{className:"p-12 text-center",children:[r.jsx(rh,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Property Not Found"}),r.jsx("p",{className:"text-muted-foreground mb-6",children:"The property you're looking for doesn't exist or is not available."}),r.jsx(Co,{href:"/properties",children:r.jsxs(te,{children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Properties"]})})]})})});const a=(c=>{const d={diamond:{label:"Diamond",variant:"default"},gold:{label:"Gold",variant:"secondary"},silver:{label:"Silver",variant:"outline"}};return d[c]||d.silver})(s.category),o=s.amenities?Object.entries(s.amenities).filter(([,c])=>c).map(([c])=>({id:c,label:c.replace(/([A-Z])/g," $1").replace(/^./,d=>d.toUpperCase()).trim()})):[];return r.jsxs("div",{className:"bg-background",children:[r.jsx(jf,{title:s.propertyName,backTo:"/properties"}),r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx("div",{className:"flex items-start justify-between gap-4 mb-2",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ze,{variant:a.variant,className:"text-sm",children:a.label}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(dv,{className:"w-4 h-4 fill-primary text-primary"}),r.jsx("span",{className:"text-sm font-medium",children:"Government Certified"})]})]}),r.jsx(ke,{className:"text-3xl","data-testid":"text-property-name",children:s.propertyName}),r.jsxs(Ue,{className:"flex items-center gap-2 mt-2 text-base",children:[r.jsx(Js,{className:"w-4 h-4"}),s.district,", Himachal Pradesh"]})]})})}),r.jsxs(ge,{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:"About This Property"}),r.jsx("p",{className:"text-muted-foreground",children:s.address})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-muted/30 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qv,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Rooms"}),r.jsxs("p",{className:"font-semibold",children:[s.totalRooms," ",s.totalRooms===1?"Room":"Rooms"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),r.jsx("p",{className:"font-semibold",children:a.label})]})]})]}),o.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Amenities"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:o.map(c=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fr,{className:"w-4 h-4 text-primary"}),r.jsx("span",{className:"text-sm",children:c.label})]},c.id))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Certification Details"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Certificate Number:"}),r.jsx("span",{className:"font-medium",children:s.certificateNumber||s.applicationNumber})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Status:"}),r.jsx(ze,{variant:"default",children:"Approved"})]})]})]})]})]})}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs(me,{className:"sticky top-4",children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Contact Property Owner"}),r.jsx(Ue,{children:"Get in touch to book your stay"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Owner Name"}),r.jsx("p",{className:"text-base font-medium mt-1",children:s.ownerName})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(te,{className:"w-full",asChild:!0,"data-testid":"button-call",children:r.jsxs("a",{href:`tel:${s.ownerMobile}`,children:[r.jsx(Kg,{className:"w-4 h-4 mr-2"}),s.ownerMobile]})}),s.ownerEmail&&r.jsx(te,{className:"w-full",variant:"outline",asChild:!0,"data-testid":"button-email",children:r.jsxs("a",{href:`mailto:${s.ownerEmail}`,children:[r.jsx(Jv,{className:"w-4 h-4 mr-2"}),"Send Email"]})})]}),r.jsx("div",{className:"pt-4 border-t",children:r.jsx("p",{className:"text-xs text-muted-foreground",children:"This is a government-certified homestay registered under the Himachal Pradesh Homestay Rules 2025."})})]})]})})]})})]})}function B6e(){const[,e]=Dr(),[t,n]=b.useState({revenuePapers:!1,idProof:!1,affidavit:!1,undertaking:!1}),s=Object.values(t).every(Boolean),i=o=>{n(l=>({...l,[o]:!l[o]}))},a=()=>{var o;s?e("/register"):(o=document.querySelector('[value="process"]'))==null||o.dispatchEvent(new MouseEvent("click",{bubbles:!0}))};return r.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[r.jsx(jf,{title:"HP Tourism Portal",subtitle:"Registration Guide",showHome:!0,showBack:!0}),r.jsx("div",{className:"relative py-32 px-4 text-center",style:{backgroundImage:`linear-gradient(rgba(15, 23, 42, 0.25), rgba(15, 23, 42, 0.35)), url(${Ree})`,backgroundSize:"cover",backgroundPosition:"center"},children:r.jsxs("div",{className:"relative z-10",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-white mb-4 drop-shadow-lg",style:{textShadow:"0 2px 4px rgba(0,0,0,0.6)"},children:"Start Your Homestay Business"}),r.jsx("p",{className:"text-slate-100 max-w-2xl mx-auto text-lg font-semibold drop-shadow-md",style:{textShadow:"0 1px 2px rgba(0,0,0,0.8)"},children:"A complete guide to registering your property under the H.P. Tourism Development & Registration Act, 2002."})]})}),r.jsxs("div",{className:"max-w-6xl mx-auto px-4 -mt-12 pb-20 relative z-20",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[r.jsx(me,{className:"shadow-lg border-slate-200",children:r.jsxs(ge,{className:"p-6 flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg text-blue-600",children:r.jsx(Vs,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Processing Time"}),r.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"30-60 Days"}),r.jsx("p",{className:"text-xs text-slate-400",children:"After document submission"})]})]})}),r.jsx(me,{className:"shadow-lg border-slate-200",children:r.jsxs(ge,{className:"p-6 flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg text-emerald-600",children:r.jsx($m,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Registration Fee"}),r.jsx("h3",{className:"text-lg font-bold text-slate-900",children:" 3,000 -  18,000"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Depending on category & location"})]})]})}),r.jsx(me,{className:"shadow-lg border-slate-200",children:r.jsxs(ge,{className:"p-6 flex items-start gap-4",children:[r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg text-purple-600",children:r.jsx(Jo,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"Validity"}),r.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"1 or 3 Years"}),r.jsx("p",{className:"text-xs text-slate-400",children:"With renewal discounts"})]})]})})]}),r.jsxs(aa,{defaultValue:"checklist",className:"space-y-8",children:[r.jsx("div",{className:"flex justify-center",children:r.jsxs(Qi,{className:"grid w-full max-w-md grid-cols-2 bg-slate-200 p-1 rounded-full",children:[r.jsx(Pr,{value:"checklist",className:"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm",children:" Requirement Checklist"}),r.jsx(Pr,{value:"process",className:"rounded-full data-[state=active]:bg-white data-[state=active]:shadow-sm",children:" Step-by-Step Process"})]})}),r.jsxs(Rr,{value:"checklist",className:"space-y-6",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"1. Gather Documents"}),r.jsx("p",{className:"text-slate-600",children:"Ensure you have digital copies (PDF/JPG) of the following before starting."})]}),r.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-300 shadow-sm space-y-4 ${t.revenuePapers&&t.idProof?"bg-green-50 border-green-200":"bg-white border-slate-200"}`,children:[r.jsxs("h3",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(Js,{className:`w-4 h-4 ${t.revenuePapers&&t.idProof?"text-green-600":"text-slate-500"}`})," Property Proof"]}),r.jsxs("div",{className:"space-y-3 pl-6",children:[r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group select-none",children:[r.jsx("input",{type:"checkbox",checked:t.revenuePapers,onChange:()=>i("revenuePapers"),className:"mt-1 w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("div",{className:"text-sm text-slate-700 group-hover:text-slate-900",children:[r.jsx("span",{className:"font-medium",children:"Revenue Papers"})," (Tatima/Jamabandi)",r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Must be issued within last 6 months."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group select-none",children:[r.jsx("input",{type:"checkbox",checked:t.idProof,onChange:()=>i("idProof"),className:"mt-1 w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("div",{className:"text-sm text-slate-700 group-hover:text-slate-900",children:[r.jsx("span",{className:"font-medium",children:"Owner ID Proof"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Aadhaar / Voter ID / Driving License"})]})]})]})]}),r.jsxs("div",{className:`p-6 rounded-xl border transition-all duration-300 shadow-sm space-y-4 ${t.affidavit&&t.undertaking?"bg-green-50 border-green-200":"bg-white border-slate-200"}`,children:[r.jsxs("h3",{className:"font-semibold text-slate-900 flex items-center gap-2",children:[r.jsx(ir,{className:`w-4 h-4 ${t.affidavit&&t.undertaking?"text-green-600":"text-slate-500"}`})," Mandatory Legal Docs"]}),r.jsxs("div",{className:"space-y-3 pl-6",children:[r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group select-none",children:[r.jsx("input",{type:"checkbox",checked:t.affidavit,onChange:()=>i("affidavit"),className:"mt-1 w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("div",{className:"text-sm text-slate-700 group-hover:text-slate-900",children:[r.jsx("span",{className:"font-medium",children:"Notarized Affidavit"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"On non-judicial stamp paper (10 or above)."})]})]}),r.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group select-none",children:[r.jsx("input",{type:"checkbox",checked:t.undertaking,onChange:()=>i("undertaking"),className:"mt-1 w-4 h-4 rounded border-slate-300 text-blue-600 focus:ring-blue-500"}),r.jsxs("div",{className:"text-sm text-slate-700 group-hover:text-slate-900",children:[r.jsx("span",{className:"font-medium",children:"Form-C Undertaking"}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Self-declared and signed by owner."})]})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"2. Templates Required"}),r.jsx("p",{className:"text-slate-600",children:"Download, print, and sign these formats."})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-slate-100 rounded-lg",children:r.jsx(ir,{className:"w-6 h-6 text-slate-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-900",children:"Affidavit Format"}),r.jsx("p",{className:"text-xs text-slate-500",children:"PDF  Printable"})]})]}),r.jsx(te,{variant:"outline",size:"sm",className:"gap-2 text-blue-700 hover:text-blue-800 hover:bg-blue-50",asChild:!0,children:r.jsxs("a",{href:"/print/affidavit",target:"_blank",children:[r.jsx(ds,{className:"w-4 h-4"})," Download"]})})]}),r.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-lg border border-blue-100 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 bg-slate-100 rounded-lg",children:r.jsx(ir,{className:"w-6 h-6 text-slate-600"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-slate-900",children:"Undertaking (Form-C)"}),r.jsx("p",{className:"text-xs text-slate-500",children:"PDF  Printable"})]})]}),r.jsx(te,{variant:"outline",size:"sm",className:"gap-2 text-blue-700 hover:text-blue-800 hover:bg-blue-50",asChild:!0,children:r.jsxs("a",{href:"/print/undertaking",target:"_blank",children:[r.jsx(ds,{className:"w-4 h-4"})," Download"]})})]}),r.jsxs("div",{className:"text-xs text-blue-600 flex items-start gap-2 bg-blue-100/50 p-3 rounded",children:[r.jsx(zxe,{className:"w-4 h-4 flex-shrink-0"}),r.jsx("span",{children:"Tip: You can use e-Stamping for the affidavit if physical stamp papers are unavailable in your tehsil."})]})]})]})]}),r.jsxs("div",{className:"text-center pt-8",children:[r.jsx("p",{className:"text-slate-500 mb-4",children:s?"You have all the documents ready!":"Check off items above to verify your readiness"}),r.jsx(te,{onClick:a,className:`gap-2 px-8 h-12 text-base transition-all duration-300 ${s?"bg-green-600 hover:bg-green-700 shadow-lg shadow-green-600/20":"bg-slate-900 hover:bg-slate-800"}`,children:s?r.jsxs(r.Fragment,{children:["Proceed to Registration ",r.jsx(sa,{className:"w-5 h-5"})]}):r.jsxs(r.Fragment,{children:["Next: View Process ",r.jsx(sa,{className:"w-4 h-4"})]})})]})]}),r.jsxs(Rr,{value:"process",className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm p-8",children:[r.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-6",children:"Registration Steps"}),r.jsxs("div",{className:"relative border-l-2 border-slate-200 ml-3 space-y-8 pb-4",children:[r.jsxs("div",{className:"relative pl-8",children:[r.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-blue-600 border-4 border-white shadow-sm"}),r.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"1. Online Application"}),r.jsx("p",{className:"text-slate-600 mt-1 text-sm max-w-xl",children:"Create an account and fill Form-A. You will need to upload the documents gathered in the previous step."})]}),r.jsxs("div",{className:"relative pl-8",children:[r.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-slate-300 border-4 border-white shadow-sm"}),r.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"2. Fee Payment (HimKosh)"}),r.jsx("p",{className:"text-slate-600 mt-1 text-sm max-w-xl mb-4",children:"Pay the registration fee online based on your unit count."}),r.jsxs("div",{className:"bg-slate-50 rounded-lg p-6 border border-slate-200",children:[r.jsxs("h5",{className:"font-bold text-slate-900 mb-4 flex items-center gap-2",children:[r.jsx($m,{className:"w-5 h-5 text-green-600"})," Registration Fees (Annual)"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-slate-100 text-slate-700 font-semibold border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 text-left",children:"Category"}),r.jsx("th",{className:"p-3 text-right",children:"Gram Panchayat"}),r.jsx("th",{className:"p-3 text-right",children:"TCP / NP / SDA"}),r.jsx("th",{className:"p-3 text-right",children:"Municipal Corp"})]})}),r.jsxs("tbody",{className:"divide-y divide-slate-100",children:[r.jsxs("tr",{className:"hover:bg-slate-100/50",children:[r.jsxs("td",{className:"p-3 font-medium text-slate-900 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"})," Silver"]}),r.jsx("td",{className:"p-3 text-right",children:" 3,000"}),r.jsx("td",{className:"p-3 text-right",children:" 5,000"}),r.jsx("td",{className:"p-3 text-right",children:" 8,000"})]}),r.jsxs("tr",{className:"hover:bg-yellow-50/50",children:[r.jsxs("td",{className:"p-3 font-medium text-slate-900 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-400"})," Gold"]}),r.jsx("td",{className:"p-3 text-right",children:" 6,000"}),r.jsx("td",{className:"p-3 text-right",children:" 8,000"}),r.jsx("td",{className:"p-3 text-right",children:" 12,000"})]}),r.jsxs("tr",{className:"hover:bg-cyan-50/50",children:[r.jsxs("td",{className:"p-3 font-medium text-slate-900 flex items-center gap-2",children:[r.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-400"})," Diamond"]}),r.jsx("td",{className:"p-3 text-right",children:" 10,000"}),r.jsx("td",{className:"p-3 text-right",children:" 12,000"}),r.jsx("td",{className:"p-3 text-right",children:" 18,000"})]})]})]})}),r.jsxs("div",{className:"mt-4 grid md:grid-cols-2 gap-4 text-xs text-slate-600",children:[r.jsxs("div",{className:"flex items-start gap-2 bg-white p-3 rounded border border-slate-100",children:[r.jsx(Fr,{className:"w-4 h-4 text-green-600 shrink-0"}),r.jsxs("span",{children:[r.jsx("strong",{children:"10% Discount"})," if you pay for 3 years upfront."]})]}),r.jsxs("div",{className:"flex items-start gap-2 bg-white p-3 rounded border border-slate-100",children:[r.jsx(Fr,{className:"w-4 h-4 text-green-600 shrink-0"}),r.jsxs("span",{children:[r.jsx("strong",{children:"5% Discount"})," for women entrepreneurs (sole owner)."]})]})]})]})]}),r.jsxs("div",{className:"relative pl-8",children:[r.jsx("div",{className:"absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-slate-300 border-4 border-white shadow-sm"}),r.jsx("h4",{className:"text-lg font-bold text-slate-900",children:"3. Inspection & Approval"}),r.jsx("p",{className:"text-slate-600 mt-1 text-sm max-w-xl",children:"District Tourism Development Officer (DTDO) will verify your documents. An inspection may be scheduled. Once approved, you can download your certificate instantly."})]})]})]}),r.jsxs("div",{className:"flex justify-center gap-4 pt-4",children:[r.jsx(te,{variant:"outline",size:"lg",children:"Review Requirements"}),r.jsxs(te,{size:"lg",className:"bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-600/20 px-8 py-6 h-auto text-lg gap-2",children:[r.jsx(Fr,{className:"w-5 h-5"})," Start Registration Now"]})]})]})]})]})]})}function V6e(){return r.jsxs("div",{className:"container mx-auto py-8 space-y-8",children:[r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Help & Resources"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Guides and tutorials to help you manage your homestay application."})]})}),r.jsxs(me,{className:"border-l-4 border-l-primary",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(R3,{className:"h-6 w-6 text-primary"}),"Portal Walkthrough"]}),r.jsx(Ue,{children:"A step-by-step interactive guide on how to register and manage your property."})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx("div",{className:"relative w-full aspect-video rounded-lg overflow-hidden border shadow-sm bg-gray-100",children:r.jsx("iframe",{src:"https://app.supademo.com/embed/cml3z5eu42mzmzsadcv81sk5y?embed_v=2",loading:"lazy",title:"Portal Walkthrough",allow:"clipboard-write",className:"absolute top-0 left-0 w-full h-full border-none"})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(te,{variant:"outline",asChild:!0,children:r.jsxs("a",{href:"https://app.supademo.com/demo/cml3z5eu42mzmzsadcv81sk5y?utm_source=link&step=94",target:"_blank",rel:"noopener noreferrer",children:[r.jsx(zu,{className:"w-4 h-4 mr-2"}),"Open in Full Screen"]})})})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{className:"text-lg",children:"Registration Process"})}),r.jsx(ge,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Learn about the documents required and steps to register a new homestay."})})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{className:"text-lg",children:" Fees & Charges"})}),r.jsx(ge,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Understand the fee structure for silver, gold, and diamond categories."})})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{className:"text-lg",children:"Renewals"})}),r.jsx(ge,{children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"How to renew your certificate after 1 or 3 years validity."})})]})]})]})}var U6e=Array.isArray,Tl=U6e,q6e=typeof qw=="object"&&qw&&qw.Object===Object&&qw,Nle=q6e,z6e=Nle,H6e=typeof self=="object"&&self&&self.Object===Object&&self,W6e=z6e||H6e||Function("return this")(),mh=W6e,K6e=mh,G6e=K6e.Symbol,uw=G6e,TB=uw,Sle=Object.prototype,Y6e=Sle.hasOwnProperty,X6e=Sle.toString,Wy=TB?TB.toStringTag:void 0;function Q6e(e){var t=Y6e.call(e,Wy),n=e[Wy];try{e[Wy]=void 0;var s=!0}catch{}var i=X6e.call(e);return s&&(t?e[Wy]=n:delete e[Wy]),i}var Z6e=Q6e,J6e=Object.prototype,eMe=J6e.toString;function tMe(e){return eMe.call(e)}var rMe=tMe,EB=uw,nMe=Z6e,sMe=rMe,iMe="[object Null]",aMe="[object Undefined]",OB=EB?EB.toStringTag:void 0;function oMe(e){return e==null?e===void 0?aMe:iMe:OB&&OB in Object(e)?nMe(e):sMe(e)}var Nf=oMe;function lMe(e){return e!=null&&typeof e=="object"}var Sf=lMe,cMe=Nf,dMe=Sf,uMe="[object Symbol]";function hMe(e){return typeof e=="symbol"||dMe(e)&&cMe(e)==uMe}var sy=hMe,fMe=Tl,mMe=sy,pMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gMe=/^\w*$/;function xMe(e,t){if(fMe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||mMe(e)?!0:gMe.test(e)||!pMe.test(e)||t!=null&&e in Object(t)}var F6=xMe;function vMe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var cp=vMe;const iy=ts(cp);var yMe=Nf,bMe=cp,jMe="[object AsyncFunction]",wMe="[object Function]",NMe="[object GeneratorFunction]",SMe="[object Proxy]";function _Me(e){if(!bMe(e))return!1;var t=yMe(e);return t==wMe||t==NMe||t==jMe||t==SMe}var $6=_Me;const Xr=ts($6);var CMe=mh,AMe=CMe["__core-js_shared__"],kMe=AMe,M4=kMe,RB=function(){var e=/[^.]+$/.exec(M4&&M4.keys&&M4.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function PMe(e){return!!RB&&RB in e}var TMe=PMe,EMe=Function.prototype,OMe=EMe.toString;function RMe(e){if(e!=null){try{return OMe.call(e)}catch{}try{return e+""}catch{}}return""}var _le=RMe,DMe=$6,MMe=TMe,IMe=cp,LMe=_le,FMe=/[\\^$.*+?()[\]{}|]/g,$Me=/^\[object .+?Constructor\]$/,BMe=Function.prototype,VMe=Object.prototype,UMe=BMe.toString,qMe=VMe.hasOwnProperty,zMe=RegExp("^"+UMe.call(qMe).replace(FMe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function HMe(e){if(!IMe(e)||MMe(e))return!1;var t=DMe(e)?zMe:$Me;return t.test(LMe(e))}var WMe=HMe;function KMe(e,t){return e==null?void 0:e[t]}var GMe=KMe,YMe=WMe,XMe=GMe;function QMe(e,t){var n=XMe(e,t);return YMe(n)?n:void 0}var tx=QMe,ZMe=tx,JMe=ZMe(Object,"create"),OC=JMe,DB=OC;function eIe(){this.__data__=DB?DB(null):{},this.size=0}var tIe=eIe;function rIe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var nIe=rIe,sIe=OC,iIe="__lodash_hash_undefined__",aIe=Object.prototype,oIe=aIe.hasOwnProperty;function lIe(e){var t=this.__data__;if(sIe){var n=t[e];return n===iIe?void 0:n}return oIe.call(t,e)?t[e]:void 0}var cIe=lIe,dIe=OC,uIe=Object.prototype,hIe=uIe.hasOwnProperty;function fIe(e){var t=this.__data__;return dIe?t[e]!==void 0:hIe.call(t,e)}var mIe=fIe,pIe=OC,gIe="__lodash_hash_undefined__";function xIe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pIe&&t===void 0?gIe:t,this}var vIe=xIe,yIe=tIe,bIe=nIe,jIe=cIe,wIe=mIe,NIe=vIe;function ay(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}ay.prototype.clear=yIe;ay.prototype.delete=bIe;ay.prototype.get=jIe;ay.prototype.has=wIe;ay.prototype.set=NIe;var SIe=ay;function _Ie(){this.__data__=[],this.size=0}var CIe=_Ie;function AIe(e,t){return e===t||e!==e&&t!==t}var B6=AIe,kIe=B6;function PIe(e,t){for(var n=e.length;n--;)if(kIe(e[n][0],t))return n;return-1}var RC=PIe,TIe=RC,EIe=Array.prototype,OIe=EIe.splice;function RIe(e){var t=this.__data__,n=TIe(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():OIe.call(t,n,1),--this.size,!0}var DIe=RIe,MIe=RC;function IIe(e){var t=this.__data__,n=MIe(t,e);return n<0?void 0:t[n][1]}var LIe=IIe,FIe=RC;function $Ie(e){return FIe(this.__data__,e)>-1}var BIe=$Ie,VIe=RC;function UIe(e,t){var n=this.__data__,s=VIe(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var qIe=UIe,zIe=CIe,HIe=DIe,WIe=LIe,KIe=BIe,GIe=qIe;function oy(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}oy.prototype.clear=zIe;oy.prototype.delete=HIe;oy.prototype.get=WIe;oy.prototype.has=KIe;oy.prototype.set=GIe;var DC=oy,YIe=tx,XIe=mh,QIe=YIe(XIe,"Map"),V6=QIe,MB=SIe,ZIe=DC,JIe=V6;function eLe(){this.size=0,this.__data__={hash:new MB,map:new(JIe||ZIe),string:new MB}}var tLe=eLe;function rLe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var nLe=rLe,sLe=nLe;function iLe(e,t){var n=e.__data__;return sLe(t)?n[typeof t=="string"?"string":"hash"]:n.map}var MC=iLe,aLe=MC;function oLe(e){var t=aLe(this,e).delete(e);return this.size-=t?1:0,t}var lLe=oLe,cLe=MC;function dLe(e){return cLe(this,e).get(e)}var uLe=dLe,hLe=MC;function fLe(e){return hLe(this,e).has(e)}var mLe=fLe,pLe=MC;function gLe(e,t){var n=pLe(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var xLe=gLe,vLe=tLe,yLe=lLe,bLe=uLe,jLe=mLe,wLe=xLe;function ly(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}ly.prototype.clear=vLe;ly.prototype.delete=yLe;ly.prototype.get=bLe;ly.prototype.has=jLe;ly.prototype.set=wLe;var U6=ly,Cle=U6,NLe="Expected a function";function q6(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(NLe);var n=function(){var s=arguments,i=t?t.apply(this,s):s[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,s);return n.cache=a.set(i,o)||a,o};return n.cache=new(q6.Cache||Cle),n}q6.Cache=Cle;var Ale=q6;const SLe=ts(Ale);var _Le=Ale,CLe=500;function ALe(e){var t=_Le(e,function(s){return n.size===CLe&&n.clear(),s}),n=t.cache;return t}var kLe=ALe,PLe=kLe,TLe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ELe=/\\(\\)?/g,OLe=PLe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(TLe,function(n,s,i,a){t.push(i?a.replace(ELe,"$1"):s||n)}),t}),RLe=OLe;function DLe(e,t){for(var n=-1,s=e==null?0:e.length,i=Array(s);++n<s;)i[n]=t(e[n],n,e);return i}var z6=DLe,IB=uw,MLe=z6,ILe=Tl,LLe=sy,LB=IB?IB.prototype:void 0,FB=LB?LB.toString:void 0;function kle(e){if(typeof e=="string")return e;if(ILe(e))return MLe(e,kle)+"";if(LLe(e))return FB?FB.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var FLe=kle,$Le=FLe;function BLe(e){return e==null?"":$Le(e)}var Ple=BLe,VLe=Tl,ULe=F6,qLe=RLe,zLe=Ple;function HLe(e,t){return VLe(e)?e:ULe(e,t)?[e]:qLe(zLe(e))}var Tle=HLe,WLe=sy;function KLe(e){if(typeof e=="string"||WLe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var IC=KLe,GLe=Tle,YLe=IC;function XLe(e,t){t=GLe(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[YLe(t[n++])];return n&&n==s?e:void 0}var H6=XLe,QLe=H6;function ZLe(e,t,n){var s=e==null?void 0:QLe(e,t);return s===void 0?n:s}var Ele=ZLe;const xc=ts(Ele);function JLe(e){return e==null}var e8e=JLe;const sn=ts(e8e);var t8e=Nf,r8e=Tl,n8e=Sf,s8e="[object String]";function i8e(e){return typeof e=="string"||!r8e(e)&&n8e(e)&&t8e(e)==s8e}var a8e=i8e;const hw=ts(a8e);var Ole={exports:{}},fs={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W6=Symbol.for("react.element"),K6=Symbol.for("react.portal"),LC=Symbol.for("react.fragment"),FC=Symbol.for("react.strict_mode"),$C=Symbol.for("react.profiler"),BC=Symbol.for("react.provider"),VC=Symbol.for("react.context"),o8e=Symbol.for("react.server_context"),UC=Symbol.for("react.forward_ref"),qC=Symbol.for("react.suspense"),zC=Symbol.for("react.suspense_list"),HC=Symbol.for("react.memo"),WC=Symbol.for("react.lazy"),l8e=Symbol.for("react.offscreen"),Rle;Rle=Symbol.for("react.module.reference");function fd(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case W6:switch(e=e.type,e){case LC:case $C:case FC:case qC:case zC:return e;default:switch(e=e&&e.$$typeof,e){case o8e:case VC:case UC:case WC:case HC:case BC:return e;default:return t}}case K6:return t}}}fs.ContextConsumer=VC;fs.ContextProvider=BC;fs.Element=W6;fs.ForwardRef=UC;fs.Fragment=LC;fs.Lazy=WC;fs.Memo=HC;fs.Portal=K6;fs.Profiler=$C;fs.StrictMode=FC;fs.Suspense=qC;fs.SuspenseList=zC;fs.isAsyncMode=function(){return!1};fs.isConcurrentMode=function(){return!1};fs.isContextConsumer=function(e){return fd(e)===VC};fs.isContextProvider=function(e){return fd(e)===BC};fs.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===W6};fs.isForwardRef=function(e){return fd(e)===UC};fs.isFragment=function(e){return fd(e)===LC};fs.isLazy=function(e){return fd(e)===WC};fs.isMemo=function(e){return fd(e)===HC};fs.isPortal=function(e){return fd(e)===K6};fs.isProfiler=function(e){return fd(e)===$C};fs.isStrictMode=function(e){return fd(e)===FC};fs.isSuspense=function(e){return fd(e)===qC};fs.isSuspenseList=function(e){return fd(e)===zC};fs.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===LC||e===$C||e===FC||e===qC||e===zC||e===l8e||typeof e=="object"&&e!==null&&(e.$$typeof===WC||e.$$typeof===HC||e.$$typeof===BC||e.$$typeof===VC||e.$$typeof===UC||e.$$typeof===Rle||e.getModuleId!==void 0)};fs.typeOf=fd;Ole.exports=fs;var c8e=Ole.exports,d8e=Nf,u8e=Sf,h8e="[object Number]";function f8e(e){return typeof e=="number"||u8e(e)&&d8e(e)==h8e}var Dle=f8e;const m8e=ts(Dle);var p8e=Dle;function g8e(e){return p8e(e)&&e!=+e}var x8e=g8e;const fw=ts(x8e);var el=function(t){return t===0?0:t>0?1:-1},tg=function(t){return hw(t)&&t.indexOf("%")===t.length-1},qt=function(t){return m8e(t)&&!fw(t)},Sa=function(t){return qt(t)||hw(t)},v8e=0,cy=function(t){var n=++v8e;return"".concat(t||"").concat(n)},tl=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!qt(t)&&!hw(t))return s;var a;if(tg(t)){var o=t.indexOf("%");a=n*parseFloat(t.slice(0,o))/100}else a=+t;return fw(a)&&(a=s),i&&a>n&&(a=n),a},sm=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},y8e=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},i=0;i<n;i++)if(!s[t[i]])s[t[i]]=!0;else return!0;return!1},ic=function(t,n){return qt(t)&&qt(n)?function(s){return t+s*(n-t)}:function(){return n}};function dS(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):xc(s,t))===n})}function _v(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function qT(e){"@babel/helpers - typeof";return qT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qT(e)}var b8e=["viewBox","children"],j8e=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],$B=["points","pathLength"],I4={svg:b8e,polygon:$B,polyline:$B},G6=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],uS=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(b.isValidElement(t)&&(s=t.props),!iy(s))return null;var i={};return Object.keys(s).forEach(function(a){G6.includes(a)&&(i[a]=n||function(o){return s[a](s,o)})}),i},w8e=function(t,n,s){return function(i){return t(n,s,i),null}},Fg=function(t,n,s){if(!iy(t)||qT(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(a){var o=t[a];G6.includes(a)&&typeof o=="function"&&(i||(i={}),i[a]=w8e(o,n,s))}),i},N8e=["children"],S8e=["children"];function BB(e,t){if(e==null)return{};var n=_8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function zT(e){"@babel/helpers - typeof";return zT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zT(e)}var VB={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Jh=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},UB=null,L4=null,Y6=function e(t){if(t===UB&&Array.isArray(L4))return L4;var n=[];return b.Children.forEach(t,function(s){sn(s)||(c8e.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),L4=n,UB=t,n};function vc(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(i){return Jh(i)}):s=[Jh(t)],Y6(e).forEach(function(i){var a=xc(i,"type.displayName")||xc(i,"type.name");s.indexOf(a)!==-1&&n.push(i)}),n}function tc(e,t){var n=vc(e,t);return n&&n[0]}var qB=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,i=n.height;return!(!qt(s)||s<=0||!qt(i)||i<=0)},C8e=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],A8e=function(t){return t&&t.type&&hw(t.type)&&C8e.indexOf(t.type)>=0},k8e=function(t){return t&&zT(t)==="object"&&"clipDot"in t},P8e=function(t,n,s,i){var a,o=(a=I4==null?void 0:I4[i])!==null&&a!==void 0?a:[];return n.startsWith("data-")||!Xr(t)&&(i&&o.includes(n)||j8e.includes(n))||s&&G6.includes(n)},Mr=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(b.isValidElement(t)&&(i=t.props),!iy(i))return null;var a={};return Object.keys(i).forEach(function(o){var l;P8e((l=i)===null||l===void 0?void 0:l[o],o,n,s)&&(a[o]=i[o])}),a},HT=function e(t,n){if(t===n)return!0;var s=b.Children.count(t);if(s!==b.Children.count(n))return!1;if(s===0)return!0;if(s===1)return zB(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<s;i++){var a=t[i],o=n[i];if(Array.isArray(a)||Array.isArray(o)){if(!e(a,o))return!1}else if(!zB(a,o))return!1}return!0},zB=function(t,n){if(sn(t)&&sn(n))return!0;if(!sn(t)&&!sn(n)){var s=t.props||{},i=s.children,a=BB(s,N8e),o=n.props||{},l=o.children,c=BB(o,S8e);return i&&l?_v(a,c)&&HT(i,l):!i&&!l?_v(a,c):!1}return!1},HB=function(t,n){var s=[],i={};return Y6(t).forEach(function(a,o){if(A8e(a))s.push(a);else if(a){var l=Jh(a.type),c=n[l]||{},d=c.handler,u=c.once;if(d&&(!u||!i[l])){var h=d(a,l,o);s.push(h),i[l]=!0}}}),s},T8e=function(t){var n=t&&t.type;return n&&VB[n]?VB[n]:null},E8e=function(t,n){return Y6(n).indexOf(t)},O8e=["children","width","height","viewBox","className","style","title","desc"];function WT(){return WT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},WT.apply(this,arguments)}function R8e(e,t){if(e==null)return{};var n=D8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function D8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function KT(e){var t=e.children,n=e.width,s=e.height,i=e.viewBox,a=e.className,o=e.style,l=e.title,c=e.desc,d=R8e(e,O8e),u=i||{width:n,height:s,x:0,y:0},h=on("recharts-surface",a);return Ae.createElement("svg",WT({},Mr(d,!0,"svg"),{className:h,width:n,height:s,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Ae.createElement("title",null,l),Ae.createElement("desc",null,c),t)}var M8e=["children","className"];function GT(){return GT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},GT.apply(this,arguments)}function I8e(e,t){if(e==null)return{};var n=L8e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function L8e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Un=Ae.forwardRef(function(e,t){var n=e.children,s=e.className,i=I8e(e,M8e),a=on("recharts-layer",s);return Ae.createElement("g",GT({className:a},Mr(i,!0),{ref:t}),n)}),tu=function(t,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a]};function F8e(e,t,n){var s=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++s<i;)a[s]=e[s+t];return a}var $8e=F8e,B8e=$8e;function V8e(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:B8e(e,t,n)}var U8e=V8e,q8e="\\ud800-\\udfff",z8e="\\u0300-\\u036f",H8e="\\ufe20-\\ufe2f",W8e="\\u20d0-\\u20ff",K8e=z8e+H8e+W8e,G8e="\\ufe0e\\ufe0f",Y8e="\\u200d",X8e=RegExp("["+Y8e+q8e+K8e+G8e+"]");function Q8e(e){return X8e.test(e)}var Mle=Q8e;function Z8e(e){return e.split("")}var J8e=Z8e,Ile="\\ud800-\\udfff",eFe="\\u0300-\\u036f",tFe="\\ufe20-\\ufe2f",rFe="\\u20d0-\\u20ff",nFe=eFe+tFe+rFe,sFe="\\ufe0e\\ufe0f",iFe="["+Ile+"]",YT="["+nFe+"]",XT="\\ud83c[\\udffb-\\udfff]",aFe="(?:"+YT+"|"+XT+")",Lle="[^"+Ile+"]",Fle="(?:\\ud83c[\\udde6-\\uddff]){2}",$le="[\\ud800-\\udbff][\\udc00-\\udfff]",oFe="\\u200d",Ble=aFe+"?",Vle="["+sFe+"]?",lFe="(?:"+oFe+"(?:"+[Lle,Fle,$le].join("|")+")"+Vle+Ble+")*",cFe=Vle+Ble+lFe,dFe="(?:"+[Lle+YT+"?",YT,Fle,$le,iFe].join("|")+")",uFe=RegExp(XT+"(?="+XT+")|"+dFe+cFe,"g");function hFe(e){return e.match(uFe)||[]}var fFe=hFe,mFe=J8e,pFe=Mle,gFe=fFe;function xFe(e){return pFe(e)?gFe(e):mFe(e)}var vFe=xFe,yFe=U8e,bFe=Mle,jFe=vFe,wFe=Ple;function NFe(e){return function(t){t=wFe(t);var n=bFe(t)?jFe(t):void 0,s=n?n[0]:t.charAt(0),i=n?yFe(n,1).join(""):t.slice(1);return s[e]()+i}}var SFe=NFe,_Fe=SFe,CFe=_Fe("toUpperCase"),AFe=CFe;const KC=ts(AFe);function $s(e){return function(){return e}}const Ule=Math.cos,hS=Math.sin,bu=Math.sqrt,fS=Math.PI,GC=2*fS,QT=Math.PI,ZT=2*QT,Vp=1e-6,kFe=ZT-Vp;function qle(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function PFe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qle;const n=10**t;return function(s){this._+=s[0];for(let i=1,a=s.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+s[i]}}class TFe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qle:PFe(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,i){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+i}`}bezierCurveTo(t,n,s,i,a,o){this._append`C${+t},${+n},${+s},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,s,i,a){if(t=+t,n=+n,s=+s,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,l=this._y1,c=s-t,d=i-n,u=o-t,h=l-n,f=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Vp)if(!(Math.abs(h*c-d*u)>Vp)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let m=s-o,p=i-l,g=c*c+d*d,v=m*m+p*p,x=Math.sqrt(g),y=Math.sqrt(f),j=a*Math.tan((QT-Math.acos((g+f-v)/(2*x*y)))/2),w=j/y,N=j/x;Math.abs(w-1)>Vp&&this._append`L${t+w*u},${n+w*h}`,this._append`A${a},${a},0,0,${+(h*m>u*p)},${this._x1=t+N*c},${this._y1=n+N*d}`}}arc(t,n,s,i,a,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(i),c=s*Math.sin(i),d=t+l,u=n+c,h=1^o,f=o?i-a:a-i;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Vp||Math.abs(this._y1-u)>Vp)&&this._append`L${d},${u}`,s&&(f<0&&(f=f%ZT+ZT),f>kFe?this._append`A${s},${s},0,1,${h},${t-l},${n-c}A${s},${s},0,1,${h},${this._x1=d},${this._y1=u}`:f>Vp&&this._append`A${s},${s},0,${+(f>=QT)},${h},${this._x1=t+s*Math.cos(a)},${this._y1=n+s*Math.sin(a)}`)}rect(t,n,s,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+i}h${-s}Z`}toString(){return this._}}function X6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new TFe(t)}function Q6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zle(e){this._context=e}zle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function YC(e){return new zle(e)}function Hle(e){return e[0]}function Wle(e){return e[1]}function Kle(e,t){var n=$s(!0),s=null,i=YC,a=null,o=X6(l);e=typeof e=="function"?e:e===void 0?Hle:$s(e),t=typeof t=="function"?t:t===void 0?Wle:$s(t);function l(c){var d,u=(c=Q6(c)).length,h,f=!1,m;for(s==null&&(a=i(m=o())),d=0;d<=u;++d)!(d<u&&n(h=c[d],d,c))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(h,d,c),+t(h,d,c));if(m)return a=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:$s(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:$s(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:$s(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,s!=null&&(a=i(s)),l):i},l.context=function(c){return arguments.length?(c==null?s=a=null:a=i(s=c),l):s},l}function $2(e,t,n){var s=null,i=$s(!0),a=null,o=YC,l=null,c=X6(d);e=typeof e=="function"?e:e===void 0?Hle:$s(+e),t=typeof t=="function"?t:$s(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Wle:$s(+n);function d(h){var f,m,p,g=(h=Q6(h)).length,v,x=!1,y,j=new Array(g),w=new Array(g);for(a==null&&(l=o(y=c())),f=0;f<=g;++f){if(!(f<g&&i(v=h[f],f,h))===x)if(x=!x)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=m;--p)l.point(j[p],w[p]);l.lineEnd(),l.areaEnd()}x&&(j[f]=+e(v,f,h),w[f]=+t(v,f,h),l.point(s?+s(v,f,h):j[f],n?+n(v,f,h):w[f]))}if(y)return l=null,y+""||null}function u(){return Kle().defined(i).curve(o).context(a)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:$s(+h),s=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:$s(+h),d):e},d.x1=function(h){return arguments.length?(s=h==null?null:typeof h=="function"?h:$s(+h),d):s},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:$s(+h),n=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:$s(+h),d):t},d.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:$s(+h),d):n},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(n)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(h){return arguments.length?(i=typeof h=="function"?h:$s(!!h),d):i},d.curve=function(h){return arguments.length?(o=h,a!=null&&(l=o(a)),d):o},d.context=function(h){return arguments.length?(h==null?a=l=null:l=o(a=h),d):a},d}class Gle{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function EFe(e){return new Gle(e,!0)}function OFe(e){return new Gle(e,!1)}const Z6={draw(e,t){const n=bu(t/fS);e.moveTo(n,0),e.arc(0,0,n,0,GC)}},RFe={draw(e,t){const n=bu(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Yle=bu(1/3),DFe=Yle*2,MFe={draw(e,t){const n=bu(t/DFe),s=n*Yle;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},IFe={draw(e,t){const n=bu(t),s=-n/2;e.rect(s,s,n,n)}},LFe=.8908130915292852,Xle=hS(fS/10)/hS(7*fS/10),FFe=hS(GC/10)*Xle,$Fe=-Ule(GC/10)*Xle,BFe={draw(e,t){const n=bu(t*LFe),s=FFe*n,i=$Fe*n;e.moveTo(0,-n),e.lineTo(s,i);for(let a=1;a<5;++a){const o=GC*a/5,l=Ule(o),c=hS(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*i,c*s+l*i)}e.closePath()}},F4=bu(3),VFe={draw(e,t){const n=-bu(t/(F4*3));e.moveTo(0,n*2),e.lineTo(-F4*n,-n),e.lineTo(F4*n,-n),e.closePath()}},Fc=-.5,$c=bu(3)/2,JT=1/bu(12),UFe=(JT/2+1)*3,qFe={draw(e,t){const n=bu(t/UFe),s=n/2,i=n*JT,a=s,o=n*JT+n,l=-a,c=o;e.moveTo(s,i),e.lineTo(a,o),e.lineTo(l,c),e.lineTo(Fc*s-$c*i,$c*s+Fc*i),e.lineTo(Fc*a-$c*o,$c*a+Fc*o),e.lineTo(Fc*l-$c*c,$c*l+Fc*c),e.lineTo(Fc*s+$c*i,Fc*i-$c*s),e.lineTo(Fc*a+$c*o,Fc*o-$c*a),e.lineTo(Fc*l+$c*c,Fc*c-$c*l),e.closePath()}};function zFe(e,t){let n=null,s=X6(i);e=typeof e=="function"?e:$s(e||Z6),t=typeof t=="function"?t:$s(t===void 0?64:+t);function i(){let a;if(n||(n=a=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(e=typeof a=="function"?a:$s(a),i):e},i.size=function(a){return arguments.length?(t=typeof a=="function"?a:$s(+a),i):t},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function mS(){}function pS(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Qle(e){this._context=e}Qle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:pS(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:pS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HFe(e){return new Qle(e)}function Zle(e){this._context=e}Zle.prototype={areaStart:mS,areaEnd:mS,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:pS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WFe(e){return new Zle(e)}function Jle(e){this._context=e}Jle.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:pS(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function KFe(e){return new Jle(e)}function ece(e){this._context=e}ece.prototype={areaStart:mS,areaEnd:mS,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function GFe(e){return new ece(e)}function WB(e){return e<0?-1:1}function KB(e,t,n){var s=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(s||i<0&&-0),o=(n-e._y1)/(i||s<0&&-0),l=(a*i+o*s)/(s+i);return(WB(a)+WB(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(l))||0}function GB(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function $4(e,t,n){var s=e._x0,i=e._y0,a=e._x1,o=e._y1,l=(a-s)/3;e._context.bezierCurveTo(s+l,i+l*t,a-l,o-l*n,a,o)}function gS(e){this._context=e}gS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:$4(this,this._t0,GB(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,$4(this,GB(this,n=KB(this,e,t)),n);break;default:$4(this,this._t0,n=KB(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function tce(e){this._context=new rce(e)}(tce.prototype=Object.create(gS.prototype)).point=function(e,t){gS.prototype.point.call(this,t,e)};function rce(e){this._context=e}rce.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,i,a){this._context.bezierCurveTo(t,e,s,n,a,i)}};function YFe(e){return new gS(e)}function XFe(e){return new tce(e)}function nce(e){this._context=e}nce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=YB(e),i=YB(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(s[0][a],i[0][a],s[1][a],i[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function YB(e){var t,n=e.length-1,s,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=i[t]/a[t-1],a[t]-=s,o[t]-=s*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function QFe(e){return new nce(e)}function XC(e,t){this._context=e,this._t=t}XC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ZFe(e){return new XC(e,.5)}function JFe(e){return new XC(e,0)}function e7e(e){return new XC(e,1)}function m0(e,t){if((o=e.length)>1)for(var n=1,s,i,a=e[t[0]],o,l=a.length;n<o;++n)for(i=a,a=e[t[n]],s=0;s<l;++s)a[s][1]+=a[s][0]=isNaN(i[s][1])?i[s][0]:i[s][1]}function eE(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function t7e(e,t){return e[t]}function r7e(e){const t=[];return t.key=e,t}function n7e(){var e=$s([]),t=eE,n=m0,s=t7e;function i(a){var o=Array.from(e.apply(this,arguments),r7e),l,c=o.length,d=-1,u;for(const h of a)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(h,o[l].key,d,a)]).data=h;for(l=0,u=Q6(t(o));l<c;++l)o[u[l]].index=l;return n(o,u),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:$s(Array.from(a)),i):e},i.value=function(a){return arguments.length?(s=typeof a=="function"?a:$s(+a),i):s},i.order=function(a){return arguments.length?(t=a==null?eE:typeof a=="function"?a:$s(Array.from(a)),i):t},i.offset=function(a){return arguments.length?(n=a??m0,i):n},i}function s7e(e,t){if((s=e.length)>0){for(var n,s,i=0,a=e[0].length,o;i<a;++i){for(o=n=0;n<s;++n)o+=e[n][i][1]||0;if(o)for(n=0;n<s;++n)e[n][i][1]/=o}m0(e,t)}}function i7e(e,t){if((i=e.length)>0){for(var n=0,s=e[t[0]],i,a=s.length;n<a;++n){for(var o=0,l=0;o<i;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}m0(e,t)}}function a7e(e,t){if(!(!((o=e.length)>0)||!((a=(i=e[t[0]]).length)>0))){for(var n=0,s=1,i,a,o;s<a;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[s][1]||0,f=u[s-1][1]||0,m=(h-f)/2,p=0;p<l;++p){var g=e[t[p]],v=g[s][1]||0,x=g[s-1][1]||0;m+=v-x}c+=h,d+=m*h}i[s-1][1]+=i[s-1][0]=n,c&&(n-=d/c)}i[s-1][1]+=i[s-1][0]=n,m0(e,t)}}function Y1(e){"@babel/helpers - typeof";return Y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y1(e)}var o7e=["type","size","sizeType"];function tE(){return tE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tE.apply(this,arguments)}function XB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function QB(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XB(Object(n),!0).forEach(function(s){l7e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XB(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function l7e(e,t,n){return t=c7e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c7e(e){var t=d7e(e,"string");return Y1(t)=="symbol"?t:t+""}function d7e(e,t){if(Y1(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Y1(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u7e(e,t){if(e==null)return{};var n=h7e(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function h7e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var sce={symbolCircle:Z6,symbolCross:RFe,symbolDiamond:MFe,symbolSquare:IFe,symbolStar:BFe,symbolTriangle:VFe,symbolWye:qFe},f7e=Math.PI/180,m7e=function(t){var n="symbol".concat(KC(t));return sce[n]||Z6},p7e=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*f7e;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},g7e=function(t,n){sce["symbol".concat(KC(t))]=n},J6=function(t){var n=t.type,s=n===void 0?"circle":n,i=t.size,a=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=u7e(t,o7e),d=QB(QB({},c),{},{type:s,size:a,sizeType:l}),u=function(){var v=m7e(s),x=zFe().type(v).size(p7e(a,l,s));return x()},h=d.className,f=d.cx,m=d.cy,p=Mr(d,!0);return f===+f&&m===+m&&a===+a?Ae.createElement("path",tE({},p,{className:on("recharts-symbols",h),transform:"translate(".concat(f,", ").concat(m,")"),d:u()})):null};J6.registerSymbol=g7e;function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}function rE(){return rE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},rE.apply(this,arguments)}function ZB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function x7e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZB(Object(n),!0).forEach(function(s){X1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZB(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function v7e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y7e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ace(s.key),s)}}function b7e(e,t,n){return t&&y7e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function j7e(e,t,n){return t=xS(t),w7e(e,ice()?Reflect.construct(t,n||[],xS(e).constructor):t.apply(e,n))}function w7e(e,t){if(t&&(p0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return N7e(e)}function N7e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ice(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ice=function(){return!!e})()}function xS(e){return xS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xS(e)}function S7e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nE(e,t)}function nE(e,t){return nE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},nE(e,t)}function X1(e,t,n){return t=ace(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ace(e){var t=_7e(e,"string");return p0(t)=="symbol"?t:t+""}function _7e(e,t){if(p0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(p0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Bc=32,eM=function(e){function t(){return v7e(this,t),j7e(this,t,arguments)}return S7e(t,e),b7e(t,[{key:"renderIcon",value:function(s){var i=this.props.inactiveColor,a=Bc/2,o=Bc/6,l=Bc/3,c=s.inactive?i:s.color;if(s.type==="plainline")return Ae.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:a,x2:Bc,y2:a,className:"recharts-legend-icon"});if(s.type==="line")return Ae.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(a,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(a,`
            H`).concat(Bc,"M").concat(2*l,",").concat(a,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(a),className:"recharts-legend-icon"});if(s.type==="rect")return Ae.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Bc/8,"h").concat(Bc,"v").concat(Bc*3/4,"h").concat(-Bc,"z"),className:"recharts-legend-icon"});if(Ae.isValidElement(s.legendIcon)){var d=x7e({},s);return delete d.legendIcon,Ae.cloneElement(s.legendIcon,d)}return Ae.createElement(J6,{fill:c,cx:a,cy:a,size:Bc,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,i=this.props,a=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,d=i.inactiveColor,u={x:0,y:0,width:Bc,height:Bc},h={display:l==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return a.map(function(m,p){var g=m.formatter||c,v=on(X1(X1({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=Xr(m.value)?null:m.value;tu(!Xr(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?d:m.color;return Ae.createElement("li",rE({className:v,style:h,key:"legend-item-".concat(p)},Fg(s.props,m,p)),Ae.createElement(KT,{width:o,height:o,viewBox:u,style:f},s.renderIcon(m)),Ae.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(x,m,p):x))})}},{key:"render",value:function(){var s=this.props,i=s.payload,a=s.layout,o=s.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:a==="horizontal"?o:"left"};return Ae.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(b.PureComponent);X1(eM,"displayName","Legend");X1(eM,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var C7e=DC;function A7e(){this.__data__=new C7e,this.size=0}var k7e=A7e;function P7e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var T7e=P7e;function E7e(e){return this.__data__.get(e)}var O7e=E7e;function R7e(e){return this.__data__.has(e)}var D7e=R7e,M7e=DC,I7e=V6,L7e=U6,F7e=200;function $7e(e,t){var n=this.__data__;if(n instanceof M7e){var s=n.__data__;if(!I7e||s.length<F7e-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new L7e(s)}return n.set(e,t),this.size=n.size,this}var B7e=$7e,V7e=DC,U7e=k7e,q7e=T7e,z7e=O7e,H7e=D7e,W7e=B7e;function dy(e){var t=this.__data__=new V7e(e);this.size=t.size}dy.prototype.clear=U7e;dy.prototype.delete=q7e;dy.prototype.get=z7e;dy.prototype.has=H7e;dy.prototype.set=W7e;var oce=dy,K7e="__lodash_hash_undefined__";function G7e(e){return this.__data__.set(e,K7e),this}var Y7e=G7e;function X7e(e){return this.__data__.has(e)}var Q7e=X7e,Z7e=U6,J7e=Y7e,e$e=Q7e;function vS(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Z7e;++t<n;)this.add(e[t])}vS.prototype.add=vS.prototype.push=J7e;vS.prototype.has=e$e;var lce=vS;function t$e(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var cce=t$e;function r$e(e,t){return e.has(t)}var dce=r$e,n$e=lce,s$e=cce,i$e=dce,a$e=1,o$e=2;function l$e(e,t,n,s,i,a){var o=n&a$e,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=a.get(e),u=a.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,m=n&o$e?new n$e:void 0;for(a.set(e,t),a.set(t,e);++h<l;){var p=e[h],g=t[h];if(s)var v=o?s(g,p,h,t,e,a):s(p,g,h,e,t,a);if(v!==void 0){if(v)continue;f=!1;break}if(m){if(!s$e(t,function(x,y){if(!i$e(m,y)&&(p===x||i(p,x,n,s,a)))return m.push(y)})){f=!1;break}}else if(!(p===g||i(p,g,n,s,a))){f=!1;break}}return a.delete(e),a.delete(t),f}var uce=l$e,c$e=mh,d$e=c$e.Uint8Array,u$e=d$e;function h$e(e){var t=-1,n=Array(e.size);return e.forEach(function(s,i){n[++t]=[i,s]}),n}var f$e=h$e;function m$e(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var tM=m$e,JB=uw,e9=u$e,p$e=B6,g$e=uce,x$e=f$e,v$e=tM,y$e=1,b$e=2,j$e="[object Boolean]",w$e="[object Date]",N$e="[object Error]",S$e="[object Map]",_$e="[object Number]",C$e="[object RegExp]",A$e="[object Set]",k$e="[object String]",P$e="[object Symbol]",T$e="[object ArrayBuffer]",E$e="[object DataView]",t9=JB?JB.prototype:void 0,B4=t9?t9.valueOf:void 0;function O$e(e,t,n,s,i,a,o){switch(n){case E$e:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case T$e:return!(e.byteLength!=t.byteLength||!a(new e9(e),new e9(t)));case j$e:case w$e:case _$e:return p$e(+e,+t);case N$e:return e.name==t.name&&e.message==t.message;case C$e:case k$e:return e==t+"";case S$e:var l=x$e;case A$e:var c=s&y$e;if(l||(l=v$e),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=b$e,o.set(e,t);var u=g$e(l(e),l(t),s,i,a,o);return o.delete(e),u;case P$e:if(B4)return B4.call(e)==B4.call(t)}return!1}var R$e=O$e;function D$e(e,t){for(var n=-1,s=t.length,i=e.length;++n<s;)e[i+n]=t[n];return e}var hce=D$e,M$e=hce,I$e=Tl;function L$e(e,t,n){var s=t(e);return I$e(e)?s:M$e(s,n(e))}var F$e=L$e;function $$e(e,t){for(var n=-1,s=e==null?0:e.length,i=0,a=[];++n<s;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}var B$e=$$e;function V$e(){return[]}var U$e=V$e,q$e=B$e,z$e=U$e,H$e=Object.prototype,W$e=H$e.propertyIsEnumerable,r9=Object.getOwnPropertySymbols,K$e=r9?function(e){return e==null?[]:(e=Object(e),q$e(r9(e),function(t){return W$e.call(e,t)}))}:z$e,G$e=K$e;function Y$e(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var X$e=Y$e,Q$e=Nf,Z$e=Sf,J$e="[object Arguments]";function eBe(e){return Z$e(e)&&Q$e(e)==J$e}var tBe=eBe,n9=tBe,rBe=Sf,fce=Object.prototype,nBe=fce.hasOwnProperty,sBe=fce.propertyIsEnumerable,iBe=n9(function(){return arguments}())?n9:function(e){return rBe(e)&&nBe.call(e,"callee")&&!sBe.call(e,"callee")},rM=iBe,yS={exports:{}};function aBe(){return!1}var oBe=aBe;yS.exports;(function(e,t){var n=mh,s=oBe,i=t&&!t.nodeType&&t,a=i&&!0&&e&&!e.nodeType&&e,o=a&&a.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(yS,yS.exports);var mce=yS.exports,lBe=9007199254740991,cBe=/^(?:0|[1-9]\d*)$/;function dBe(e,t){var n=typeof e;return t=t??lBe,!!t&&(n=="number"||n!="symbol"&&cBe.test(e))&&e>-1&&e%1==0&&e<t}var nM=dBe,uBe=9007199254740991;function hBe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=uBe}var sM=hBe,fBe=Nf,mBe=sM,pBe=Sf,gBe="[object Arguments]",xBe="[object Array]",vBe="[object Boolean]",yBe="[object Date]",bBe="[object Error]",jBe="[object Function]",wBe="[object Map]",NBe="[object Number]",SBe="[object Object]",_Be="[object RegExp]",CBe="[object Set]",ABe="[object String]",kBe="[object WeakMap]",PBe="[object ArrayBuffer]",TBe="[object DataView]",EBe="[object Float32Array]",OBe="[object Float64Array]",RBe="[object Int8Array]",DBe="[object Int16Array]",MBe="[object Int32Array]",IBe="[object Uint8Array]",LBe="[object Uint8ClampedArray]",FBe="[object Uint16Array]",$Be="[object Uint32Array]",Gs={};Gs[EBe]=Gs[OBe]=Gs[RBe]=Gs[DBe]=Gs[MBe]=Gs[IBe]=Gs[LBe]=Gs[FBe]=Gs[$Be]=!0;Gs[gBe]=Gs[xBe]=Gs[PBe]=Gs[vBe]=Gs[TBe]=Gs[yBe]=Gs[bBe]=Gs[jBe]=Gs[wBe]=Gs[NBe]=Gs[SBe]=Gs[_Be]=Gs[CBe]=Gs[ABe]=Gs[kBe]=!1;function BBe(e){return pBe(e)&&mBe(e.length)&&!!Gs[fBe(e)]}var VBe=BBe;function UBe(e){return function(t){return e(t)}}var pce=UBe,bS={exports:{}};bS.exports;(function(e,t){var n=Nle,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===s,o=a&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(bS,bS.exports);var qBe=bS.exports,zBe=VBe,HBe=pce,s9=qBe,i9=s9&&s9.isTypedArray,WBe=i9?HBe(i9):zBe,gce=WBe,KBe=X$e,GBe=rM,YBe=Tl,XBe=mce,QBe=nM,ZBe=gce,JBe=Object.prototype,e9e=JBe.hasOwnProperty;function t9e(e,t){var n=YBe(e),s=!n&&GBe(e),i=!n&&!s&&XBe(e),a=!n&&!s&&!i&&ZBe(e),o=n||s||i||a,l=o?KBe(e.length,String):[],c=l.length;for(var d in e)(t||e9e.call(e,d))&&!(o&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||QBe(d,c)))&&l.push(d);return l}var r9e=t9e,n9e=Object.prototype;function s9e(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||n9e;return e===n}var i9e=s9e;function a9e(e,t){return function(n){return e(t(n))}}var xce=a9e,o9e=xce,l9e=o9e(Object.keys,Object),c9e=l9e,d9e=i9e,u9e=c9e,h9e=Object.prototype,f9e=h9e.hasOwnProperty;function m9e(e){if(!d9e(e))return u9e(e);var t=[];for(var n in Object(e))f9e.call(e,n)&&n!="constructor"&&t.push(n);return t}var p9e=m9e,g9e=$6,x9e=sM;function v9e(e){return e!=null&&x9e(e.length)&&!g9e(e)}var mw=v9e,y9e=r9e,b9e=p9e,j9e=mw;function w9e(e){return j9e(e)?y9e(e):b9e(e)}var QC=w9e,N9e=F$e,S9e=G$e,_9e=QC;function C9e(e){return N9e(e,_9e,S9e)}var A9e=C9e,a9=A9e,k9e=1,P9e=Object.prototype,T9e=P9e.hasOwnProperty;function E9e(e,t,n,s,i,a){var o=n&k9e,l=a9(e),c=l.length,d=a9(t),u=d.length;if(c!=u&&!o)return!1;for(var h=c;h--;){var f=l[h];if(!(o?f in t:T9e.call(t,f)))return!1}var m=a.get(e),p=a.get(t);if(m&&p)return m==t&&p==e;var g=!0;a.set(e,t),a.set(t,e);for(var v=o;++h<c;){f=l[h];var x=e[f],y=t[f];if(s)var j=o?s(y,x,f,t,e,a):s(x,y,f,e,t,a);if(!(j===void 0?x===y||i(x,y,n,s,a):j)){g=!1;break}v||(v=f=="constructor")}if(g&&!v){var w=e.constructor,N=t.constructor;w!=N&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(g=!1)}return a.delete(e),a.delete(t),g}var O9e=E9e,R9e=tx,D9e=mh,M9e=R9e(D9e,"DataView"),I9e=M9e,L9e=tx,F9e=mh,$9e=L9e(F9e,"Promise"),B9e=$9e,V9e=tx,U9e=mh,q9e=V9e(U9e,"Set"),vce=q9e,z9e=tx,H9e=mh,W9e=z9e(H9e,"WeakMap"),K9e=W9e,sE=I9e,iE=V6,aE=B9e,oE=vce,lE=K9e,yce=Nf,uy=_le,o9="[object Map]",G9e="[object Object]",l9="[object Promise]",c9="[object Set]",d9="[object WeakMap]",u9="[object DataView]",Y9e=uy(sE),X9e=uy(iE),Q9e=uy(aE),Z9e=uy(oE),J9e=uy(lE),Up=yce;(sE&&Up(new sE(new ArrayBuffer(1)))!=u9||iE&&Up(new iE)!=o9||aE&&Up(aE.resolve())!=l9||oE&&Up(new oE)!=c9||lE&&Up(new lE)!=d9)&&(Up=function(e){var t=yce(e),n=t==G9e?e.constructor:void 0,s=n?uy(n):"";if(s)switch(s){case Y9e:return u9;case X9e:return o9;case Q9e:return l9;case Z9e:return c9;case J9e:return d9}return t});var eVe=Up,V4=oce,tVe=uce,rVe=R$e,nVe=O9e,h9=eVe,f9=Tl,m9=mce,sVe=gce,iVe=1,p9="[object Arguments]",g9="[object Array]",B2="[object Object]",aVe=Object.prototype,x9=aVe.hasOwnProperty;function oVe(e,t,n,s,i,a){var o=f9(e),l=f9(t),c=o?g9:h9(e),d=l?g9:h9(t);c=c==p9?B2:c,d=d==p9?B2:d;var u=c==B2,h=d==B2,f=c==d;if(f&&m9(e)){if(!m9(t))return!1;o=!0,u=!1}if(f&&!u)return a||(a=new V4),o||sVe(e)?tVe(e,t,n,s,i,a):rVe(e,t,c,n,s,i,a);if(!(n&iVe)){var m=u&&x9.call(e,"__wrapped__"),p=h&&x9.call(t,"__wrapped__");if(m||p){var g=m?e.value():e,v=p?t.value():t;return a||(a=new V4),i(g,v,n,s,a)}}return f?(a||(a=new V4),nVe(e,t,n,s,i,a)):!1}var lVe=oVe,cVe=lVe,v9=Sf;function bce(e,t,n,s,i){return e===t?!0:e==null||t==null||!v9(e)&&!v9(t)?e!==e&&t!==t:cVe(e,t,n,s,bce,i)}var iM=bce,dVe=oce,uVe=iM,hVe=1,fVe=2;function mVe(e,t,n,s){var i=n.length,a=i,o=!s;if(e==null)return!a;for(e=Object(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=n[i];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var h=new dVe;if(s)var f=s(d,u,c,e,t,h);if(!(f===void 0?uVe(u,d,hVe|fVe,s,h):f))return!1}}return!0}var pVe=mVe,gVe=cp;function xVe(e){return e===e&&!gVe(e)}var jce=xVe,vVe=jce,yVe=QC;function bVe(e){for(var t=yVe(e),n=t.length;n--;){var s=t[n],i=e[s];t[n]=[s,i,vVe(i)]}return t}var jVe=bVe;function wVe(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var wce=wVe,NVe=pVe,SVe=jVe,_Ve=wce;function CVe(e){var t=SVe(e);return t.length==1&&t[0][2]?_Ve(t[0][0],t[0][1]):function(n){return n===e||NVe(n,e,t)}}var AVe=CVe;function kVe(e,t){return e!=null&&t in Object(e)}var PVe=kVe,TVe=Tle,EVe=rM,OVe=Tl,RVe=nM,DVe=sM,MVe=IC;function IVe(e,t,n){t=TVe(t,e);for(var s=-1,i=t.length,a=!1;++s<i;){var o=MVe(t[s]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++s!=i?a:(i=e==null?0:e.length,!!i&&DVe(i)&&RVe(o,i)&&(OVe(e)||EVe(e)))}var LVe=IVe,FVe=PVe,$Ve=LVe;function BVe(e,t){return e!=null&&$Ve(e,t,FVe)}var VVe=BVe,UVe=iM,qVe=Ele,zVe=VVe,HVe=F6,WVe=jce,KVe=wce,GVe=IC,YVe=1,XVe=2;function QVe(e,t){return HVe(e)&&WVe(t)?KVe(GVe(e),t):function(n){var s=qVe(n,e);return s===void 0&&s===t?zVe(n,e):UVe(t,s,YVe|XVe)}}var ZVe=QVe;function JVe(e){return e}var hy=JVe;function eUe(e){return function(t){return t==null?void 0:t[e]}}var tUe=eUe,rUe=H6;function nUe(e){return function(t){return rUe(t,e)}}var sUe=nUe,iUe=tUe,aUe=sUe,oUe=F6,lUe=IC;function cUe(e){return oUe(e)?iUe(lUe(e)):aUe(e)}var dUe=cUe,uUe=AVe,hUe=ZVe,fUe=hy,mUe=Tl,pUe=dUe;function gUe(e){return typeof e=="function"?e:e==null?fUe:typeof e=="object"?mUe(e)?hUe(e[0],e[1]):uUe(e):pUe(e)}var ph=gUe;function xUe(e,t,n,s){for(var i=e.length,a=n+(s?1:-1);s?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var Nce=xUe;function vUe(e){return e!==e}var yUe=vUe;function bUe(e,t,n){for(var s=n-1,i=e.length;++s<i;)if(e[s]===t)return s;return-1}var jUe=bUe,wUe=Nce,NUe=yUe,SUe=jUe;function _Ue(e,t,n){return t===t?SUe(e,t,n):wUe(e,NUe,n)}var CUe=_Ue,AUe=CUe;function kUe(e,t){var n=e==null?0:e.length;return!!n&&AUe(e,t,0)>-1}var PUe=kUe;function TUe(e,t,n){for(var s=-1,i=e==null?0:e.length;++s<i;)if(n(t,e[s]))return!0;return!1}var EUe=TUe;function OUe(){}var RUe=OUe,U4=vce,DUe=RUe,MUe=tM,IUe=1/0,LUe=U4&&1/MUe(new U4([,-0]))[1]==IUe?function(e){return new U4(e)}:DUe,FUe=LUe,$Ue=lce,BUe=PUe,VUe=EUe,UUe=dce,qUe=FUe,zUe=tM,HUe=200;function WUe(e,t,n){var s=-1,i=BUe,a=e.length,o=!0,l=[],c=l;if(n)o=!1,i=VUe;else if(a>=HUe){var d=t?null:qUe(e);if(d)return zUe(d);o=!1,i=UUe,c=new $Ue}else c=t?[]:l;e:for(;++s<a;){var u=e[s],h=t?t(u):u;if(u=n||u!==0?u:0,o&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;t&&c.push(h),l.push(u)}else i(c,h,n)||(c!==l&&c.push(h),l.push(u))}return l}var KUe=WUe,GUe=ph,YUe=KUe;function XUe(e,t){return e&&e.length?YUe(e,GUe(t)):[]}var QUe=XUe;const y9=ts(QUe);function Sce(e,t,n){return t===!0?y9(e,n):Xr(t)?y9(e,t):e}function g0(e){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g0(e)}var ZUe=["ref"];function b9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Th(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b9(Object(n),!0).forEach(function(s){ZC(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b9(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JUe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j9(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Cce(s.key),s)}}function eqe(e,t,n){return t&&j9(e.prototype,t),n&&j9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tqe(e,t,n){return t=jS(t),rqe(e,_ce()?Reflect.construct(t,n||[],jS(e).constructor):t.apply(e,n))}function rqe(e,t){if(t&&(g0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nqe(e)}function nqe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_ce=function(){return!!e})()}function jS(e){return jS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jS(e)}function sqe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cE(e,t)}function cE(e,t){return cE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},cE(e,t)}function ZC(e,t,n){return t=Cce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cce(e){var t=iqe(e,"string");return g0(t)=="symbol"?t:t+""}function iqe(e,t){if(g0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(g0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function aqe(e,t){if(e==null)return{};var n=oqe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function oqe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function lqe(e){return e.value}function cqe(e,t){if(Ae.isValidElement(e))return Ae.cloneElement(e,t);if(typeof e=="function")return Ae.createElement(e,t);t.ref;var n=aqe(t,ZUe);return Ae.createElement(eM,n)}var w9=1,Dm=function(e){function t(){var n;JUe(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=tqe(this,t,[].concat(i)),ZC(n,"lastBoundingBox",{width:-1,height:-1}),n}return sqe(t,e),eqe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>w9||Math.abs(i.height-this.lastBoundingBox.height)>w9)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,s&&s(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Th({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var i=this.props,a=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,d=i.chartWidth,u=i.chartHeight,h,f;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&a==="vertical"){var m=this.getBBoxSnapshot();h={left:((d||0)-m.width)/2}}else h=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var p=this.getBBoxSnapshot();f={top:((u||0)-p.height)/2}}else f=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Th(Th({},h),f)}},{key:"render",value:function(){var s=this,i=this.props,a=i.content,o=i.width,l=i.height,c=i.wrapperStyle,d=i.payloadUniqBy,u=i.payload,h=Th(Th({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Ae.createElement("div",{className:"recharts-legend-wrapper",style:h,ref:function(m){s.wrapperNode=m}},cqe(a,Th(Th({},this.props),{},{payload:Sce(u,d,lqe)})))}}],[{key:"getWithHeight",value:function(s,i){var a=Th(Th({},this.defaultProps),s.props),o=a.layout;return o==="vertical"&&qt(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||i}:null}}])}(b.PureComponent);ZC(Dm,"displayName","Legend");ZC(Dm,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var N9=uw,dqe=rM,uqe=Tl,S9=N9?N9.isConcatSpreadable:void 0;function hqe(e){return uqe(e)||dqe(e)||!!(S9&&e&&e[S9])}var fqe=hqe,mqe=hce,pqe=fqe;function Ace(e,t,n,s,i){var a=-1,o=e.length;for(n||(n=pqe),i||(i=[]);++a<o;){var l=e[a];t>0&&n(l)?t>1?Ace(l,t-1,n,s,i):mqe(i,l):s||(i[i.length]=l)}return i}var kce=Ace;function gqe(e){return function(t,n,s){for(var i=-1,a=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++i];if(n(a[c],c,a)===!1)break}return t}}var xqe=gqe,vqe=xqe,yqe=vqe(),bqe=yqe,jqe=bqe,wqe=QC;function Nqe(e,t){return e&&jqe(e,t,wqe)}var Pce=Nqe,Sqe=mw;function _qe(e,t){return function(n,s){if(n==null)return n;if(!Sqe(n))return e(n,s);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&s(o[a],a,o)!==!1;);return n}}var Cqe=_qe,Aqe=Pce,kqe=Cqe,Pqe=kqe(Aqe),aM=Pqe,Tqe=aM,Eqe=mw;function Oqe(e,t){var n=-1,s=Eqe(e)?Array(e.length):[];return Tqe(e,function(i,a,o){s[++n]=t(i,a,o)}),s}var Tce=Oqe;function Rqe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Dqe=Rqe,_9=sy;function Mqe(e,t){if(e!==t){var n=e!==void 0,s=e===null,i=e===e,a=_9(e),o=t!==void 0,l=t===null,c=t===t,d=_9(t);if(!l&&!d&&!a&&e>t||a&&o&&c&&!l&&!d||s&&o&&c||!n&&c||!i)return 1;if(!s&&!a&&!d&&e<t||d&&n&&i&&!s&&!a||l&&n&&i||!o&&i||!c)return-1}return 0}var Iqe=Mqe,Lqe=Iqe;function Fqe(e,t,n){for(var s=-1,i=e.criteria,a=t.criteria,o=i.length,l=n.length;++s<o;){var c=Lqe(i[s],a[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var $qe=Fqe,q4=z6,Bqe=H6,Vqe=ph,Uqe=Tce,qqe=Dqe,zqe=pce,Hqe=$qe,Wqe=hy,Kqe=Tl;function Gqe(e,t,n){t.length?t=q4(t,function(a){return Kqe(a)?function(o){return Bqe(o,a.length===1?a[0]:a)}:a}):t=[Wqe];var s=-1;t=q4(t,zqe(Vqe));var i=Uqe(e,function(a,o,l){var c=q4(t,function(d){return d(a)});return{criteria:c,index:++s,value:a}});return qqe(i,function(a,o){return Hqe(a,o,n)})}var Yqe=Gqe;function Xqe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Qqe=Xqe,Zqe=Qqe,C9=Math.max;function Jqe(e,t,n){return t=C9(t===void 0?e.length-1:t,0),function(){for(var s=arguments,i=-1,a=C9(s.length-t,0),o=Array(a);++i<a;)o[i]=s[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=s[i];return l[t]=n(o),Zqe(e,this,l)}}var eze=Jqe;function tze(e){return function(){return e}}var rze=tze,nze=tx,sze=function(){try{var e=nze(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Ece=sze,ize=rze,A9=Ece,aze=hy,oze=A9?function(e,t){return A9(e,"toString",{configurable:!0,enumerable:!1,value:ize(t),writable:!0})}:aze,lze=oze,cze=800,dze=16,uze=Date.now;function hze(e){var t=0,n=0;return function(){var s=uze(),i=dze-(s-n);if(n=s,i>0){if(++t>=cze)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var fze=hze,mze=lze,pze=fze,gze=pze(mze),xze=gze,vze=hy,yze=eze,bze=xze;function jze(e,t){return bze(yze(e,t,vze),e+"")}var wze=jze,Nze=B6,Sze=mw,_ze=nM,Cze=cp;function Aze(e,t,n){if(!Cze(n))return!1;var s=typeof t;return(s=="number"?Sze(n)&&_ze(t,n.length):s=="string"&&t in n)?Nze(n[t],e):!1}var JC=Aze,kze=kce,Pze=Yqe,Tze=wze,k9=JC,Eze=Tze(function(e,t){if(e==null)return[];var n=t.length;return n>1&&k9(e,t[0],t[1])?t=[]:n>2&&k9(t[0],t[1],t[2])&&(t=[t[0]]),Pze(e,kze(t,1),[])}),Oze=Eze;const oM=ts(Oze);function Q1(e){"@babel/helpers - typeof";return Q1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q1(e)}function dE(){return dE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dE.apply(this,arguments)}function Rze(e,t){return Lze(e)||Ize(e,t)||Mze(e,t)||Dze()}function Dze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mze(e,t){if(e){if(typeof e=="string")return P9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P9(e,t)}}function P9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Ize(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Lze(e){if(Array.isArray(e))return e}function T9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function z4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T9(Object(n),!0).forEach(function(s){Fze(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T9(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Fze(e,t,n){return t=$ze(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ze(e){var t=Bze(e,"string");return Q1(t)=="symbol"?t:t+""}function Bze(e,t){if(Q1(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Q1(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vze(e){return Array.isArray(e)&&Sa(e[0])&&Sa(e[1])?e.join(" ~ "):e}var Uze=function(t){var n=t.separator,s=n===void 0?" : ":n,i=t.contentStyle,a=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,h=t.formatter,f=t.itemSorter,m=t.wrapperClassName,p=t.labelClassName,g=t.label,v=t.labelFormatter,x=t.accessibilityLayer,y=x===void 0?!1:x,j=function(){if(u&&u.length){var O={padding:0,margin:0},$=(f?oM(u,f):u).map(function(D,q){if(D.type==="none")return null;var M=z4({display:"block",paddingTop:4,paddingBottom:4,color:D.color||"#000"},l),L=D.formatter||h||Vze,V=D.value,P=D.name,z=V,Z=P;if(L&&z!=null&&Z!=null){var F=L(V,P,D,q,u);if(Array.isArray(F)){var W=Rze(F,2);z=W[0],Z=W[1]}else z=F}return Ae.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(q),style:M},Sa(Z)?Ae.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,Sa(Z)?Ae.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,Ae.createElement("span",{className:"recharts-tooltip-item-value"},z),Ae.createElement("span",{className:"recharts-tooltip-item-unit"},D.unit||""))});return Ae.createElement("ul",{className:"recharts-tooltip-item-list",style:O},$)}return null},w=z4({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},a),N=z4({margin:0},d),S=!sn(g),T=S?g:"",C=on("recharts-default-tooltip",m),A=on("recharts-tooltip-label",p);S&&v&&u!==void 0&&u!==null&&(T=v(g,u));var R=y?{role:"status","aria-live":"assertive"}:{};return Ae.createElement("div",dE({className:C,style:w},R),Ae.createElement("p",{className:A,style:N},Ae.isValidElement(T)?T:"".concat(T)),j())};function Z1(e){"@babel/helpers - typeof";return Z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z1(e)}function V2(e,t,n){return t=qze(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qze(e){var t=zze(e,"string");return Z1(t)=="symbol"?t:t+""}function zze(e,t){if(Z1(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Z1(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ky="recharts-tooltip-wrapper",Hze={visibility:"hidden"};function Wze(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return on(Ky,V2(V2(V2(V2({},"".concat(Ky,"-right"),qt(n)&&t&&qt(t.x)&&n>=t.x),"".concat(Ky,"-left"),qt(n)&&t&&qt(t.x)&&n<t.x),"".concat(Ky,"-bottom"),qt(s)&&t&&qt(t.y)&&s>=t.y),"".concat(Ky,"-top"),qt(s)&&t&&qt(t.y)&&s<t.y))}function E9(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,i=e.offsetTopLeft,a=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(a&&qt(a[s]))return a[s];var u=n[s]-l-i,h=n[s]+i;if(t[s])return o[s]?u:h;if(o[s]){var f=u,m=c[s];return f<m?Math.max(h,c[s]):Math.max(u,c[s])}var p=h+l,g=c[s]+d;return p>g?Math.max(u,c[s]):Math.max(h,c[s])}function Kze(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Gze(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,i=e.position,a=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,h;return o.height>0&&o.width>0&&n?(u=E9({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=E9({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Kze({translateX:u,translateY:h,useTranslate3d:l})):d=Hze,{cssProperties:d,cssClasses:Wze({translateX:u,translateY:h,coordinate:n})}}function x0(e){"@babel/helpers - typeof";return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x0(e)}function O9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function R9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O9(Object(n),!0).forEach(function(s){hE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O9(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Yze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xze(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Rce(s.key),s)}}function Qze(e,t,n){return t&&Xze(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zze(e,t,n){return t=wS(t),Jze(e,Oce()?Reflect.construct(t,n||[],wS(e).constructor):t.apply(e,n))}function Jze(e,t){if(t&&(x0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eHe(e)}function eHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Oce=function(){return!!e})()}function wS(e){return wS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wS(e)}function tHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uE(e,t)}function uE(e,t){return uE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},uE(e,t)}function hE(e,t,n){return t=Rce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rce(e){var t=rHe(e,"string");return x0(t)=="symbol"?t:t+""}function rHe(e,t){if(x0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(x0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var D9=1,nHe=function(e){function t(){var n;Yze(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=Zze(this,t,[].concat(i)),hE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),hE(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=n.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),n}return tHe(t,e),Qze(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>D9||Math.abs(s.height-this.state.lastBoundingBox.height)>D9)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.children,u=i.coordinate,h=i.hasPayload,f=i.isAnimationActive,m=i.offset,p=i.position,g=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,y=i.wrapperStyle,j=Gze({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:p,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),w=j.cssClasses,N=j.cssProperties,S=R9(R9({transition:f&&a?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&a&&h?"visible":"hidden",position:"absolute",top:0,left:0},y);return Ae.createElement("div",{tabIndex:-1,className:w,style:S,ref:function(C){s.wrapperNode=C}},d)}}])}(b.PureComponent),sHe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},rx={isSsr:sHe()};function v0(e){"@babel/helpers - typeof";return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v0(e)}function M9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function I9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M9(Object(n),!0).forEach(function(s){lM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M9(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iHe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aHe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Mce(s.key),s)}}function oHe(e,t,n){return t&&aHe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lHe(e,t,n){return t=NS(t),cHe(e,Dce()?Reflect.construct(t,n||[],NS(e).constructor):t.apply(e,n))}function cHe(e,t){if(t&&(v0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dHe(e)}function dHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dce=function(){return!!e})()}function NS(e){return NS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NS(e)}function uHe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fE(e,t)}function fE(e,t){return fE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},fE(e,t)}function lM(e,t,n){return t=Mce(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mce(e){var t=hHe(e,"string");return v0(t)=="symbol"?t:t+""}function hHe(e,t){if(v0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(v0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function fHe(e){return e.dataKey}function mHe(e,t){return Ae.isValidElement(e)?Ae.cloneElement(e,t):typeof e=="function"?Ae.createElement(e,t):Ae.createElement(Uze,t)}var Zo=function(e){function t(){return iHe(this,t),lHe(this,t,arguments)}return uHe(t,e),oHe(t,[{key:"render",value:function(){var s=this,i=this.props,a=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,d=i.content,u=i.coordinate,h=i.filterNull,f=i.isAnimationActive,m=i.offset,p=i.payload,g=i.payloadUniqBy,v=i.position,x=i.reverseDirection,y=i.useTranslate3d,j=i.viewBox,w=i.wrapperStyle,N=p??[];h&&N.length&&(N=Sce(p.filter(function(T){return T.value!=null&&(T.hide!==!0||s.props.includeHidden)}),g,fHe));var S=N.length>0;return Ae.createElement(nHe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:f,active:a,coordinate:u,hasPayload:S,offset:m,position:v,reverseDirection:x,useTranslate3d:y,viewBox:j,wrapperStyle:w},mHe(d,I9(I9({},this.props),{},{payload:N})))}}])}(b.PureComponent);lM(Zo,"displayName","Tooltip");lM(Zo,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!rx.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var pHe=mh,gHe=function(){return pHe.Date.now()},xHe=gHe,vHe=/\s/;function yHe(e){for(var t=e.length;t--&&vHe.test(e.charAt(t)););return t}var bHe=yHe,jHe=bHe,wHe=/^\s+/;function NHe(e){return e&&e.slice(0,jHe(e)+1).replace(wHe,"")}var SHe=NHe,_He=SHe,L9=cp,CHe=sy,F9=NaN,AHe=/^[-+]0x[0-9a-f]+$/i,kHe=/^0b[01]+$/i,PHe=/^0o[0-7]+$/i,THe=parseInt;function EHe(e){if(typeof e=="number")return e;if(CHe(e))return F9;if(L9(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=L9(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_He(e);var n=kHe.test(e);return n||PHe.test(e)?THe(e.slice(2),n?2:8):AHe.test(e)?F9:+e}var Ice=EHe,OHe=cp,H4=xHe,$9=Ice,RHe="Expected a function",DHe=Math.max,MHe=Math.min;function IHe(e,t,n){var s,i,a,o,l,c,d=0,u=!1,h=!1,f=!0;if(typeof e!="function")throw new TypeError(RHe);t=$9(t)||0,OHe(n)&&(u=!!n.leading,h="maxWait"in n,a=h?DHe($9(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f);function m(S){var T=s,C=i;return s=i=void 0,d=S,o=e.apply(C,T),o}function p(S){return d=S,l=setTimeout(x,t),u?m(S):o}function g(S){var T=S-c,C=S-d,A=t-T;return h?MHe(A,a-C):A}function v(S){var T=S-c,C=S-d;return c===void 0||T>=t||T<0||h&&C>=a}function x(){var S=H4();if(v(S))return y(S);l=setTimeout(x,g(S))}function y(S){return l=void 0,f&&s?m(S):(s=i=void 0,o)}function j(){l!==void 0&&clearTimeout(l),d=0,s=c=i=l=void 0}function w(){return l===void 0?o:y(H4())}function N(){var S=H4(),T=v(S);if(s=arguments,i=this,c=S,T){if(l===void 0)return p(c);if(h)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return N.cancel=j,N.flush=w,N}var LHe=IHe,FHe=LHe,$He=cp,BHe="Expected a function";function VHe(e,t,n){var s=!0,i=!0;if(typeof e!="function")throw new TypeError(BHe);return $He(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),FHe(e,t,{leading:s,maxWait:t,trailing:i})}var UHe=VHe;const Lce=ts(UHe);function J1(e){"@babel/helpers - typeof";return J1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J1(e)}function B9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function U2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B9(Object(n),!0).forEach(function(s){qHe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B9(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function qHe(e,t,n){return t=zHe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zHe(e){var t=HHe(e,"string");return J1(t)=="symbol"?t:t+""}function HHe(e,t){if(J1(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(J1(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WHe(e,t){return XHe(e)||YHe(e,t)||GHe(e,t)||KHe()}function KHe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GHe(e,t){if(e){if(typeof e=="string")return V9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V9(e,t)}}function V9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function YHe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function XHe(e){if(Array.isArray(e))return e}var Cv=b.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,i=s===void 0?{width:-1,height:-1}:s,a=e.width,o=a===void 0?"100%":a,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,h=e.minHeight,f=e.maxHeight,m=e.children,p=e.debounce,g=p===void 0?0:p,v=e.id,x=e.className,y=e.onResize,j=e.style,w=j===void 0?{}:j,N=b.useRef(null),S=b.useRef();S.current=y,b.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var T=b.useState({containerWidth:i.width,containerHeight:i.height}),C=WHe(T,2),A=C[0],R=C[1],k=b.useCallback(function($,D){R(function(q){var M=Math.round($),L=Math.round(D);return q.containerWidth===M&&q.containerHeight===L?q:{containerWidth:M,containerHeight:L}})},[]);b.useEffect(function(){var $=function(P){var z,Z=P[0].contentRect,F=Z.width,W=Z.height;k(F,W),(z=S.current)===null||z===void 0||z.call(S,F,W)};g>0&&($=Lce($,g,{trailing:!0,leading:!1}));var D=new ResizeObserver($),q=N.current.getBoundingClientRect(),M=q.width,L=q.height;return k(M,L),D.observe(N.current),function(){D.disconnect()}},[k,g]);var O=b.useMemo(function(){var $=A.containerWidth,D=A.containerHeight;if($<0||D<0)return null;tu(tg(o)||tg(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),tu(!n||n>0,"The aspect(%s) must be greater than zero.",n);var q=tg(o)?$:o,M=tg(c)?D:c;n&&n>0&&(q?M=q/n:M&&(q=M*n),f&&M>f&&(M=f)),tu(q>0||M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,q,M,o,c,u,h,n);var L=!Array.isArray(m)&&Jh(m.type).endsWith("Chart");return Ae.Children.map(m,function(V){return Ae.isValidElement(V)?b.cloneElement(V,U2({width:q,height:M},L?{style:U2({height:"100%",width:"100%",maxHeight:M,maxWidth:q},V.props.style)}:{})):V})},[n,m,c,f,h,u,A,o]);return Ae.createElement("div",{id:v?"".concat(v):void 0,className:on("recharts-responsive-container",x),style:U2(U2({},w),{},{width:o,height:c,minWidth:u,minHeight:h,maxHeight:f}),ref:N},O)}),y0=function(t){return null};y0.displayName="Cell";function ej(e){"@babel/helpers - typeof";return ej=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ej(e)}function U9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function mE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U9(Object(n),!0).forEach(function(s){QHe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U9(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function QHe(e,t,n){return t=ZHe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZHe(e){var t=JHe(e,"string");return ej(t)=="symbol"?t:t+""}function JHe(e,t){if(ej(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ej(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yx={widthCache:{},cacheCount:0},eWe=2e3,tWe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},q9="recharts_measurement_span";function rWe(e){var t=mE({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var Kb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||rx.isSsr)return{width:0,height:0};var s=rWe(n),i=JSON.stringify({text:t,copyStyle:s});if(yx.widthCache[i])return yx.widthCache[i];try{var a=document.getElementById(q9);a||(a=document.createElement("span"),a.setAttribute("id",q9),a.setAttribute("aria-hidden","true"),document.body.appendChild(a));var o=mE(mE({},tWe),s);Object.assign(a.style,o),a.textContent="".concat(t);var l=a.getBoundingClientRect(),c={width:l.width,height:l.height};return yx.widthCache[i]=c,++yx.cacheCount>eWe&&(yx.cacheCount=0,yx.widthCache={}),c}catch{return{width:0,height:0}}},nWe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function tj(e){"@babel/helpers - typeof";return tj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tj(e)}function SS(e,t){return oWe(e)||aWe(e,t)||iWe(e,t)||sWe()}function sWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iWe(e,t){if(e){if(typeof e=="string")return z9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z9(e,t)}}function z9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function aWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function oWe(e){if(Array.isArray(e))return e}function lWe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H9(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,dWe(s.key),s)}}function cWe(e,t,n){return t&&H9(e.prototype,t),n&&H9(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dWe(e){var t=uWe(e,"string");return tj(t)=="symbol"?t:t+""}function uWe(e,t){if(tj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(tj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var W9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,K9=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,hWe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,fWe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Fce={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},mWe=Object.keys(Fce),Zx="NaN";function pWe(e,t){return e*Fce[t]}var q2=function(){function e(t,n){lWe(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!hWe.test(n)&&(this.num=NaN,this.unit=""),mWe.includes(n)&&(this.num=pWe(t,n),this.unit="px")}return cWe(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,i=(s=fWe.exec(n))!==null&&s!==void 0?s:[],a=SS(i,3),o=a[1],l=a[2];return new e(parseFloat(o),l??"")}}])}();function $ce(e){if(e.includes(Zx))return Zx;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=W9.exec(t))!==null&&n!==void 0?n:[],i=SS(s,4),a=i[1],o=i[2],l=i[3],c=q2.parse(a??""),d=q2.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Zx;t=t.replace(W9,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,f=(h=K9.exec(t))!==null&&h!==void 0?h:[],m=SS(f,4),p=m[1],g=m[2],v=m[3],x=q2.parse(p??""),y=q2.parse(v??""),j=g==="+"?x.add(y):x.subtract(y);if(j.isNaN())return Zx;t=t.replace(K9,j.toString())}return t}var G9=/\(([^()]*)\)/;function gWe(e){for(var t=e;t.includes("(");){var n=G9.exec(t),s=SS(n,2),i=s[1];t=t.replace(G9,$ce(i))}return t}function xWe(e){var t=e.replace(/\s+/g,"");return t=gWe(t),t=$ce(t),t}function vWe(e){try{return xWe(e)}catch{return Zx}}function W4(e){var t=vWe(e.slice(5,-1));return t===Zx?"":t}var yWe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bWe=["dx","dy","angle","className","breakAll"];function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},pE.apply(this,arguments)}function Y9(e,t){if(e==null)return{};var n=jWe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jWe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function X9(e,t){return _We(e)||SWe(e,t)||NWe(e,t)||wWe()}function wWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NWe(e,t){if(e){if(typeof e=="string")return Q9(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q9(e,t)}}function Q9(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function SWe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function _We(e){if(Array.isArray(e))return e}var Bce=/[ \f\n\r\t\v\u2028\u2029]+/,Vce=function(t){var n=t.children,s=t.breakAll,i=t.style;try{var a=[];sn(n)||(s?a=n.toString().split(""):a=n.toString().split(Bce));var o=a.map(function(c){return{word:c,width:Kb(c,i).width}}),l=s?0:Kb("",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},CWe=function(t,n,s,i,a){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=qt(o),h=l,f=function(){var q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return q.reduce(function(M,L){var V=L.word,P=L.width,z=M[M.length-1];if(z&&(i==null||a||z.width+P+s<Number(i)))z.words.push(V),z.width+=P+s;else{var Z={words:[V],width:P};M.push(Z)}return M},[])},m=f(n),p=function(q){return q.reduce(function(M,L){return M.width>L.width?M:L})};if(!u)return m;for(var g="",v=function(q){var M=h.slice(0,q),L=Vce({breakAll:d,style:c,children:M+g}).wordsWithComputedWidth,V=f(L),P=V.length>o||p(V).width>Number(i);return[P,V]},x=0,y=h.length-1,j=0,w;x<=y&&j<=h.length-1;){var N=Math.floor((x+y)/2),S=N-1,T=v(S),C=X9(T,2),A=C[0],R=C[1],k=v(N),O=X9(k,1),$=O[0];if(!A&&!$&&(x=N+1),A&&$&&(y=N-1),!A&&$){w=R;break}j++}return w||m},Z9=function(t){var n=sn(t)?[]:t.toString().split(Bce);return[{words:n}]},AWe=function(t){var n=t.width,s=t.scaleToFit,i=t.children,a=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!rx.isSsr){var c,d,u=Vce({breakAll:o,children:i,style:a});if(u){var h=u.wordsWithComputedWidth,f=u.spaceWidth;c=h,d=f}else return Z9(i);return CWe({breakAll:o,children:i,maxLines:l,style:a},c,d,n,s)}return Z9(i)},J9="#808080",$g=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,h=u===void 0?!1:u,f=t.textAnchor,m=f===void 0?"start":f,p=t.verticalAnchor,g=p===void 0?"end":p,v=t.fill,x=v===void 0?J9:v,y=Y9(t,yWe),j=b.useMemo(function(){return AWe({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),w=y.dx,N=y.dy,S=y.angle,T=y.className,C=y.breakAll,A=Y9(y,bWe);if(!Sa(s)||!Sa(a))return null;var R=s+(qt(w)?w:0),k=a+(qt(N)?N:0),O;switch(g){case"start":O=W4("calc(".concat(d,")"));break;case"middle":O=W4("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:O=W4("calc(".concat(j.length-1," * -").concat(l,")"));break}var $=[];if(h){var D=j[0].width,q=y.width;$.push("scale(".concat((qt(q)?q/D:1)/D,")"))}return S&&$.push("rotate(".concat(S,", ").concat(R,", ").concat(k,")")),$.length&&(A.transform=$.join(" ")),Ae.createElement("text",pE({},Mr(A,!0),{x:R,y:k,className:on("recharts-text",T),textAnchor:m,fill:x.includes("url")?J9:x}),j.map(function(M,L){var V=M.words.join(C?"":" ");return Ae.createElement("tspan",{x:R,dy:L===0?O:l,key:"".concat(V,"-").concat(L)},V)}))};function Mm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kWe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cM(e){let t,n,s;e.length!==2?(t=Mm,n=(l,c)=>Mm(e(l),c),s=(l,c)=>e(l)-c):(t=e===Mm||e===kWe?e:PWe,n=e,s=e);function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;n(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=i(l,c,d,u-1);return h>d&&s(l[h-1],c)>-s(l[h],c)?h-1:h}return{left:i,center:o,right:a}}function PWe(){return 0}function Uce(e){return e===null?NaN:+e}function*TWe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const EWe=cM(Mm),pw=EWe.right;cM(Uce).center;class eV extends Map{constructor(t,n=DWe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,i]of t)this.set(s,i)}get(t){return super.get(tV(this,t))}has(t){return super.has(tV(this,t))}set(t,n){return super.set(OWe(this,t),n)}delete(t){return super.delete(RWe(this,t))}}function tV({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function OWe({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function RWe({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function DWe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function MWe(e=Mm){if(e===Mm)return qce;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function qce(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const IWe=Math.sqrt(50),LWe=Math.sqrt(10),FWe=Math.sqrt(2);function _S(e,t,n){const s=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(s)),a=s/Math.pow(10,i),o=a>=IWe?10:a>=LWe?5:a>=FWe?2:1;let l,c,d;return i<0?(d=Math.pow(10,-i)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,i)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?_S(e,t,n*2):[l,c,d]}function gE(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[i,a,o]=s?_S(t,e,n):_S(e,t,n);if(!(a>=i))return[];const l=a-i+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(a-d)/-o;else for(let d=0;d<l;++d)c[d]=(a-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(i+d)/-o;else for(let d=0;d<l;++d)c[d]=(i+d)*o;return c}function xE(e,t,n){return t=+t,e=+e,n=+n,_S(e,t,n)[2]}function vE(e,t,n){t=+t,e=+e,n=+n;const s=t<e,i=s?xE(t,e,n):xE(e,t,n);return(s?-1:1)*(i<0?1/-i:i)}function rV(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function nV(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function zce(e,t,n=0,s=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(i=i===void 0?qce:MWe(i);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,u=Math.log(c),h=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),m=Math.max(n,Math.floor(t-d*h/c+f)),p=Math.min(s,Math.floor(t+(c-d)*h/c+f));zce(e,t,m,p,i)}const a=e[t];let o=n,l=s;for(Gy(e,n,t),i(e[s],a)>0&&Gy(e,n,s);o<l;){for(Gy(e,o,l),++o,--l;i(e[o],a)<0;)++o;for(;i(e[l],a)>0;)--l}i(e[n],a)===0?Gy(e,n,l):(++l,Gy(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function Gy(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function $We(e,t,n){if(e=Float64Array.from(TWe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return nV(e);if(t>=1)return rV(e);var s,i=(s-1)*t,a=Math.floor(i),o=rV(zce(e,a).subarray(0,a+1)),l=nV(e.subarray(a+1));return o+(l-o)*(i-a)}}function BWe(e,t,n=Uce){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,i=(s-1)*t,a=Math.floor(i),o=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return o+(l-o)*(i-a)}}function VWe(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var s=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++s<i;)a[s]=e+s*n;return a}function md(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _f(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const yE=Symbol("implicit");function dM(){var e=new eV,t=[],n=[],s=yE;function i(a){let o=e.get(a);if(o===void 0){if(s!==yE)return s;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new eV;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return dM(t,n).unknown(s)},md.apply(i,arguments),i}function rj(){var e=dM().unknown(void 0),t=e.domain,n=e.range,s=0,i=1,a,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var f=t().length,m=i<s,p=m?i:s,g=m?s:i;a=(g-p)/Math.max(1,f-c+d*2),l&&(a=Math.floor(a)),p+=(g-p-a*(f-c))*u,o=a*(1-c),l&&(p=Math.round(p),o=Math.round(o));var v=VWe(f).map(function(x){return p+a*x});return n(m?v.reverse():v)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([s,i]=f,s=+s,i=+i,h()):[s,i]},e.rangeRound=function(f){return[s,i]=f,s=+s,i=+i,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,d=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(d=+f,h()):d},e.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),h()):u},e.copy=function(){return rj(t(),[s,i]).round(l).paddingInner(c).paddingOuter(d).align(u)},md.apply(h(),arguments)}function Hce(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Hce(t())},e}function Gb(){return Hce(rj.apply(null,arguments).paddingInner(1))}function uM(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wce(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function gw(){}var nj=.7,CS=1/nj,Av="\\s*([+-]?\\d+)\\s*",sj="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",eh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UWe=/^#([0-9a-f]{3,8})$/,qWe=new RegExp(`^rgb\\(${Av},${Av},${Av}\\)$`),zWe=new RegExp(`^rgb\\(${eh},${eh},${eh}\\)$`),HWe=new RegExp(`^rgba\\(${Av},${Av},${Av},${sj}\\)$`),WWe=new RegExp(`^rgba\\(${eh},${eh},${eh},${sj}\\)$`),KWe=new RegExp(`^hsl\\(${sj},${eh},${eh}\\)$`),GWe=new RegExp(`^hsla\\(${sj},${eh},${eh},${sj}\\)$`),sV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uM(gw,ij,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:iV,formatHex:iV,formatHex8:YWe,formatHsl:XWe,formatRgb:aV,toString:aV});function iV(){return this.rgb().formatHex()}function YWe(){return this.rgb().formatHex8()}function XWe(){return Kce(this).formatHsl()}function aV(){return this.rgb().formatRgb()}function ij(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UWe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?oV(t):n===3?new wl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?z2(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?z2(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=qWe.exec(e))?new wl(t[1],t[2],t[3],1):(t=zWe.exec(e))?new wl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HWe.exec(e))?z2(t[1],t[2],t[3],t[4]):(t=WWe.exec(e))?z2(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=KWe.exec(e))?dV(t[1],t[2]/100,t[3]/100,1):(t=GWe.exec(e))?dV(t[1],t[2]/100,t[3]/100,t[4]):sV.hasOwnProperty(e)?oV(sV[e]):e==="transparent"?new wl(NaN,NaN,NaN,0):null}function oV(e){return new wl(e>>16&255,e>>8&255,e&255,1)}function z2(e,t,n,s){return s<=0&&(e=t=n=NaN),new wl(e,t,n,s)}function QWe(e){return e instanceof gw||(e=ij(e)),e?(e=e.rgb(),new wl(e.r,e.g,e.b,e.opacity)):new wl}function bE(e,t,n,s){return arguments.length===1?QWe(e):new wl(e,t,n,s??1)}function wl(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}uM(wl,bE,Wce(gw,{brighter(e){return e=e==null?CS:Math.pow(CS,e),new wl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nj:Math.pow(nj,e),new wl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wl(xg(this.r),xg(this.g),xg(this.b),AS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:lV,formatHex:lV,formatHex8:ZWe,formatRgb:cV,toString:cV}));function lV(){return`#${rg(this.r)}${rg(this.g)}${rg(this.b)}`}function ZWe(){return`#${rg(this.r)}${rg(this.g)}${rg(this.b)}${rg((isNaN(this.opacity)?1:this.opacity)*255)}`}function cV(){const e=AS(this.opacity);return`${e===1?"rgb(":"rgba("}${xg(this.r)}, ${xg(this.g)}, ${xg(this.b)}${e===1?")":`, ${e})`}`}function AS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xg(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rg(e){return e=xg(e),(e<16?"0":"")+e.toString(16)}function dV(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wd(e,t,n,s)}function Kce(e){if(e instanceof Wd)return new Wd(e.h,e.s,e.l,e.opacity);if(e instanceof gw||(e=ij(e)),!e)return new Wd;if(e instanceof Wd)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,i=Math.min(t,n,s),a=Math.max(t,n,s),o=NaN,l=a-i,c=(a+i)/2;return l?(t===a?o=(n-s)/l+(n<s)*6:n===a?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?a+i:2-a-i,o*=60):l=c>0&&c<1?0:o,new Wd(o,l,c,e.opacity)}function JWe(e,t,n,s){return arguments.length===1?Kce(e):new Wd(e,t,n,s??1)}function Wd(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}uM(Wd,JWe,Wce(gw,{brighter(e){return e=e==null?CS:Math.pow(CS,e),new Wd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nj:Math.pow(nj,e),new Wd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,i=2*n-s;return new wl(K4(e>=240?e-240:e+120,i,s),K4(e,i,s),K4(e<120?e+240:e-120,i,s),this.opacity)},clamp(){return new Wd(uV(this.h),H2(this.s),H2(this.l),AS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=AS(this.opacity);return`${e===1?"hsl(":"hsla("}${uV(this.h)}, ${H2(this.s)*100}%, ${H2(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uV(e){return e=(e||0)%360,e<0?e+360:e}function H2(e){return Math.max(0,Math.min(1,e||0))}function K4(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hM=e=>()=>e;function eKe(e,t){return function(n){return e+n*t}}function tKe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function rKe(e){return(e=+e)==1?Gce:function(t,n){return n-t?tKe(t,n,e):hM(isNaN(t)?n:t)}}function Gce(e,t){var n=t-e;return n?eKe(e,n):hM(isNaN(e)?t:e)}const hV=function e(t){var n=rKe(t);function s(i,a){var o=n((i=bE(i)).r,(a=bE(a)).r),l=n(i.g,a.g),c=n(i.b,a.b),d=Gce(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=l(u),i.b=c(u),i.opacity=d(u),i+""}}return s.gamma=e,s}(1);function nKe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),i;return function(a){for(i=0;i<n;++i)s[i]=e[i]*(1-a)+t[i]*a;return s}}function sKe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function iKe(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,i=new Array(s),a=new Array(n),o;for(o=0;o<s;++o)i[o]=fy(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(l){for(o=0;o<s;++o)a[o]=i[o](l);return a}}function aKe(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function kS(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oKe(e,t){var n={},s={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=fy(e[i],t[i]):s[i]=t[i];return function(a){for(i in n)s[i]=n[i](a);return s}}var jE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,G4=new RegExp(jE.source,"g");function lKe(e){return function(){return e}}function cKe(e){return function(t){return e(t)+""}}function dKe(e,t){var n=jE.lastIndex=G4.lastIndex=0,s,i,a,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=jE.exec(e))&&(i=G4.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),l[o]?l[o]+=a:l[++o]=a),(s=s[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:kS(s,i)})),n=G4.lastIndex;return n<t.length&&(a=t.slice(n),l[o]?l[o]+=a:l[++o]=a),l.length<2?c[0]?cKe(c[0].x):lKe(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function fy(e,t){var n=typeof t,s;return t==null||n==="boolean"?hM(t):(n==="number"?kS:n==="string"?(s=ij(t))?(t=s,hV):dKe:t instanceof ij?hV:t instanceof Date?aKe:sKe(t)?nKe:Array.isArray(t)?iKe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oKe:kS)(e,t)}function fM(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function uKe(e,t){t===void 0&&(t=e,e=fy);for(var n=0,s=t.length-1,i=t[0],a=new Array(s<0?0:s);n<s;)a[n]=e(i,i=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return a[l](o-l)}}function hKe(e){return function(){return e}}function PS(e){return+e}var fV=[0,1];function rl(e){return e}function wE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:hKe(isNaN(t)?NaN:.5)}function fKe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function mKe(e,t,n){var s=e[0],i=e[1],a=t[0],o=t[1];return i<s?(s=wE(i,s),a=n(o,a)):(s=wE(s,i),a=n(a,o)),function(l){return a(s(l))}}function pKe(e,t,n){var s=Math.min(e.length,t.length)-1,i=new Array(s),a=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)i[o]=wE(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(l){var c=pw(e,l,1,s)-1;return a[c](i[c](l))}}function xw(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function eA(){var e=fV,t=fV,n=fy,s,i,a,o=rl,l,c,d;function u(){var f=Math.min(e.length,t.length);return o!==rl&&(o=fKe(e[0],e[f-1])),l=f>2?pKe:mKe,c=d=null,h}function h(f){return f==null||isNaN(f=+f)?a:(c||(c=l(e.map(s),t,n)))(s(o(f)))}return h.invert=function(f){return o(i((d||(d=l(t,e.map(s),kS)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,PS),u()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),n=fM,u()},h.clamp=function(f){return arguments.length?(o=f?!0:rl,u()):o!==rl},h.interpolate=function(f){return arguments.length?(n=f,u()):n},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,m){return s=f,i=m,u()}}function mM(){return eA()(rl,rl)}function gKe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function TS(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function b0(e){return e=TS(Math.abs(e)),e?e[1]:NaN}function xKe(e,t){return function(n,s){for(var i=n.length,a=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),a.push(n.substring(i-=l,i+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return a.reverse().join(t)}}function vKe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var yKe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function aj(e){if(!(t=yKe.exec(e)))throw new Error("invalid format: "+e);var t;return new pM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}aj.prototype=pM.prototype;function pM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function bKe(e){e:for(var t=e.length,n=1,s=-1,i;n<t;++n)switch(e[n]){case".":s=i=n;break;case"0":s===0&&(s=n),i=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(i+1):e}var Yce;function jKe(e,t){var n=TS(e,t);if(!n)return e+"";var s=n[0],i=n[1],a=i-(Yce=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=s.length;return a===o?s:a>o?s+new Array(a-o+1).join("0"):a>0?s.slice(0,a)+"."+s.slice(a):"0."+new Array(1-a).join("0")+TS(e,Math.max(0,t+a-1))[0]}function mV(e,t){var n=TS(e,t);if(!n)return e+"";var s=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+s:s.length>i+1?s.slice(0,i+1)+"."+s.slice(i+1):s+new Array(i-s.length+2).join("0")}const pV={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gKe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>mV(e*100,t),r:mV,s:jKe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gV(e){return e}var xV=Array.prototype.map,vV=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wKe(e){var t=e.grouping===void 0||e.thousands===void 0?gV:xKe(xV.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?gV:vKe(xV.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=aj(h);var f=h.fill,m=h.align,p=h.sign,g=h.symbol,v=h.zero,x=h.width,y=h.comma,j=h.precision,w=h.trim,N=h.type;N==="n"?(y=!0,N="g"):pV[N]||(j===void 0&&(j=12),w=!0,N="g"),(v||f==="0"&&m==="=")&&(v=!0,f="0",m="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",T=g==="$"?s:/[%p]/.test(N)?o:"",C=pV[N],A=/[defgprs%]/.test(N);j=j===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function R(k){var O=S,$=T,D,q,M;if(N==="c")$=C(k)+$,k="";else{k=+k;var L=k<0||1/k<0;if(k=isNaN(k)?c:C(Math.abs(k),j),w&&(k=bKe(k)),L&&+k==0&&p!=="+"&&(L=!1),O=(L?p==="("?p:l:p==="-"||p==="("?"":p)+O,$=(N==="s"?vV[8+Yce/3]:"")+$+(L&&p==="("?")":""),A){for(D=-1,q=k.length;++D<q;)if(M=k.charCodeAt(D),48>M||M>57){$=(M===46?i+k.slice(D+1):k.slice(D))+$,k=k.slice(0,D);break}}}y&&!v&&(k=t(k,1/0));var V=O.length+k.length+$.length,P=V<x?new Array(x-V+1).join(f):"";switch(y&&v&&(k=t(P+k,P.length?x-$.length:1/0),P=""),m){case"<":k=O+k+$+P;break;case"=":k=O+P+k+$;break;case"^":k=P.slice(0,V=P.length>>1)+O+k+$+P.slice(V);break;default:k=P+O+k+$;break}return a(k)}return R.toString=function(){return h+""},R}function u(h,f){var m=d((h=aj(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(b0(f)/3)))*3,g=Math.pow(10,-p),v=vV[8+p/3];return function(x){return m(g*x)+v}}return{format:d,formatPrefix:u}}var W2,gM,Xce;NKe({thousands:",",grouping:[3],currency:["$",""]});function NKe(e){return W2=wKe(e),gM=W2.format,Xce=W2.formatPrefix,W2}function SKe(e){return Math.max(0,-b0(Math.abs(e)))}function _Ke(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(b0(t)/3)))*3-b0(Math.abs(e)))}function CKe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,b0(t)-b0(e))+1}function Qce(e,t,n,s){var i=vE(e,t,n),a;switch(s=aj(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(a=_Ke(i,o))&&(s.precision=a),Xce(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(a=CKe(i,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=a-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(a=SKe(i))&&(s.precision=a-(s.type==="%")*2);break}}return gM(s)}function dp(e){var t=e.domain;return e.ticks=function(n){var s=t();return gE(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var i=t();return Qce(i[0],i[i.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),i=0,a=s.length-1,o=s[i],l=s[a],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=i,i=a,a=d);u-- >0;){if(d=xE(o,l,n),d===c)return s[i]=o,s[a]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function ES(){var e=mM();return e.copy=function(){return xw(e,ES())},md.apply(e,arguments),dp(e)}function Zce(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,PS),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return Zce(e).unknown(t)},e=arguments.length?Array.from(e,PS):[0,1],dp(n)}function Jce(e,t){e=e.slice();var n=0,s=e.length-1,i=e[n],a=e[s],o;return a<i&&(o=n,n=s,s=o,o=i,i=a,a=o),e[n]=t.floor(i),e[s]=t.ceil(a),e}function yV(e){return Math.log(e)}function bV(e){return Math.exp(e)}function AKe(e){return-Math.log(-e)}function kKe(e){return-Math.exp(-e)}function PKe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function TKe(e){return e===10?PKe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function EKe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function jV(e){return(t,n)=>-e(-t,n)}function xM(e){const t=e(yV,bV),n=t.domain;let s=10,i,a;function o(){return i=EKe(s),a=TKe(s),n()[0]<0?(i=jV(i),a=jV(a),e(AKe,kKe)):e(yV,bV),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let f=i(d),m=i(u),p,g;const v=l==null?10:+l;let x=[];if(!(s%1)&&m-f<v){if(f=Math.floor(f),m=Math.ceil(m),d>0){for(;f<=m;++f)for(p=1;p<s;++p)if(g=f<0?p/a(-f):p*a(f),!(g<d)){if(g>u)break;x.push(g)}}else for(;f<=m;++f)for(p=s-1;p>=1;--p)if(g=f>0?p/a(-f):p*a(f),!(g<d)){if(g>u)break;x.push(g)}x.length*2<v&&(x=gE(d,u,v))}else x=gE(f,m,Math.min(m-f,v)).map(a);return h?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=aj(c)).precision==null&&(c.trim=!0),c=gM(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let h=u/a(Math.round(i(u)));return h*s<s-.5&&(h*=s),h<=d?c(u):""}},t.nice=()=>n(Jce(n(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),t}function ede(){const e=xM(eA()).domain([1,10]);return e.copy=()=>xw(e,ede()).base(e.base()),md.apply(e,arguments),e}function wV(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NV(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function vM(e){var t=1,n=e(wV(t),NV(t));return n.constant=function(s){return arguments.length?e(wV(t=+s),NV(t)):t},dp(n)}function tde(){var e=vM(eA());return e.copy=function(){return xw(e,tde()).constant(e.constant())},md.apply(e,arguments)}function SV(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function OKe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function RKe(e){return e<0?-e*e:e*e}function yM(e){var t=e(rl,rl),n=1;function s(){return n===1?e(rl,rl):n===.5?e(OKe,RKe):e(SV(n),SV(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,s()):n},dp(t)}function bM(){var e=yM(eA());return e.copy=function(){return xw(e,bM()).exponent(e.exponent())},md.apply(e,arguments),e}function DKe(){return bM.apply(null,arguments).exponent(.5)}function _V(e){return Math.sign(e)*e*e}function MKe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function rde(){var e=mM(),t=[0,1],n=!1,s;function i(a){var o=MKe(e(a));return isNaN(o)?s:n?Math.round(o):o}return i.invert=function(a){return e.invert(_V(a))},i.domain=function(a){return arguments.length?(e.domain(a),i):e.domain()},i.range=function(a){return arguments.length?(e.range((t=Array.from(a,PS)).map(_V)),i):t.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(e.clamp(a),i):e.clamp()},i.unknown=function(a){return arguments.length?(s=a,i):s},i.copy=function(){return rde(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},md.apply(i,arguments),dp(i)}function nde(){var e=[],t=[],n=[],s;function i(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=BWe(e,o/l);return a}function a(o){return o==null||isNaN(o=+o)?s:t[pw(n,o)]}return a.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Mm),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(s=o,a):s},a.quantiles=function(){return n.slice()},a.copy=function(){return nde().domain(e).range(t).unknown(s)},md.apply(a,arguments)}function sde(){var e=0,t=1,n=1,s=[.5],i=[0,1],a;function o(c){return c!=null&&c<=c?i[pw(s,c,0,n)]:a}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var d=i.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return sde().domain([e,t]).range(i).unknown(a)},md.apply(dp(o),arguments)}function ide(){var e=[.5],t=[0,1],n,s=1;function i(a){return a!=null&&a<=a?t[pw(e,a,0,s)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),s=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),s=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return ide().domain(e).range(t).unknown(n)},md.apply(i,arguments)}const Y4=new Date,X4=new Date;function Aa(e,t,n,s){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,l)=>{const c=[];if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return c;let d;do c.push(d=new Date(+a)),t(a,l),e(a);while(d<a&&a<o);return c},i.filter=a=>Aa(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!a(o););else for(;--l>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(Y4.setTime(+a),X4.setTime(+o),e(Y4),e(X4),Math.floor(n(Y4,X4))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(s?o=>s(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const OS=Aa(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);OS.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Aa(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):OS);OS.range;const Wh=1e3,sd=Wh*60,Kh=sd*60,pf=Kh*24,jM=pf*7,CV=pf*30,Q4=pf*365,ng=Aa(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wh)},(e,t)=>(t-e)/Wh,e=>e.getUTCSeconds());ng.range;const wM=Aa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wh)},(e,t)=>{e.setTime(+e+t*sd)},(e,t)=>(t-e)/sd,e=>e.getMinutes());wM.range;const NM=Aa(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*sd)},(e,t)=>(t-e)/sd,e=>e.getUTCMinutes());NM.range;const SM=Aa(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wh-e.getMinutes()*sd)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getHours());SM.range;const _M=Aa(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Kh)},(e,t)=>(t-e)/Kh,e=>e.getUTCHours());_M.range;const vw=Aa(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*sd)/pf,e=>e.getDate()-1);vw.range;const tA=Aa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pf,e=>e.getUTCDate()-1);tA.range;const ade=Aa(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/pf,e=>Math.floor(e/pf));ade.range;function nx(e){return Aa(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*sd)/jM)}const rA=nx(0),RS=nx(1),IKe=nx(2),LKe=nx(3),j0=nx(4),FKe=nx(5),$Ke=nx(6);rA.range;RS.range;IKe.range;LKe.range;j0.range;FKe.range;$Ke.range;function sx(e){return Aa(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jM)}const nA=sx(0),DS=sx(1),BKe=sx(2),VKe=sx(3),w0=sx(4),UKe=sx(5),qKe=sx(6);nA.range;DS.range;BKe.range;VKe.range;w0.range;UKe.range;qKe.range;const CM=Aa(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());CM.range;const AM=Aa(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());AM.range;const gf=Aa(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Aa(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});gf.range;const xf=Aa(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Aa(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});xf.range;function ode(e,t,n,s,i,a){const o=[[ng,1,Wh],[ng,5,5*Wh],[ng,15,15*Wh],[ng,30,30*Wh],[a,1,sd],[a,5,5*sd],[a,15,15*sd],[a,30,30*sd],[i,1,Kh],[i,3,3*Kh],[i,6,6*Kh],[i,12,12*Kh],[s,1,pf],[s,2,2*pf],[n,1,jM],[t,1,CV],[t,3,3*CV],[e,1,Q4]];function l(d,u,h){const f=u<d;f&&([d,u]=[u,d]);const m=h&&typeof h.range=="function"?h:c(d,u,h),p=m?m.range(d,+u+1):[];return f?p.reverse():p}function c(d,u,h){const f=Math.abs(u-d)/h,m=cM(([,,v])=>v).right(o,f);if(m===o.length)return e.every(vE(d/Q4,u/Q4,h));if(m===0)return OS.every(Math.max(vE(d,u,h),1));const[p,g]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return p.every(g)}return[l,c]}const[zKe,HKe]=ode(xf,AM,nA,ade,_M,NM),[WKe,KKe]=ode(gf,CM,rA,vw,SM,wM);function Z4(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function J4(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Yy(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function GKe(e){var t=e.dateTime,n=e.date,s=e.time,i=e.periods,a=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Xy(i),u=Qy(i),h=Xy(a),f=Qy(a),m=Xy(o),p=Qy(o),g=Xy(l),v=Qy(l),x=Xy(c),y=Qy(c),j={a:L,A:V,b:P,B:z,c:null,d:OV,e:OV,f:xGe,g:AGe,G:PGe,H:mGe,I:pGe,j:gGe,L:lde,m:vGe,M:yGe,p:Z,q:F,Q:MV,s:IV,S:bGe,u:jGe,U:wGe,V:NGe,w:SGe,W:_Ge,x:null,X:null,y:CGe,Y:kGe,Z:TGe,"%":DV},w={a:W,A:G,b:H,B:se,c:null,d:RV,e:RV,f:DGe,g:zGe,G:WGe,H:EGe,I:OGe,j:RGe,L:dde,m:MGe,M:IGe,p:J,q:ie,Q:MV,s:IV,S:LGe,u:FGe,U:$Ge,V:BGe,w:VGe,W:UGe,x:null,X:null,y:qGe,Y:HGe,Z:KGe,"%":DV},N={a:R,A:k,b:O,B:$,c:D,d:TV,e:TV,f:dGe,g:PV,G:kV,H:EV,I:EV,j:aGe,L:cGe,m:iGe,M:oGe,p:A,q:sGe,Q:hGe,s:fGe,S:lGe,u:JKe,U:eGe,V:tGe,w:ZKe,W:rGe,x:q,X:M,y:PV,Y:kV,Z:nGe,"%":uGe};j.x=S(n,j),j.X=S(s,j),j.c=S(t,j),w.x=S(n,w),w.X=S(s,w),w.c=S(t,w);function S(X,he){return function(fe){var Q=[],Oe=-1,ve=0,ee=X.length,Ee,Re,oe;for(fe instanceof Date||(fe=new Date(+fe));++Oe<ee;)X.charCodeAt(Oe)===37&&(Q.push(X.slice(ve,Oe)),(Re=AV[Ee=X.charAt(++Oe)])!=null?Ee=X.charAt(++Oe):Re=Ee==="e"?" ":"0",(oe=he[Ee])&&(Ee=oe(fe,Re)),Q.push(Ee),ve=Oe+1);return Q.push(X.slice(ve,Oe)),Q.join("")}}function T(X,he){return function(fe){var Q=Yy(1900,void 0,1),Oe=C(Q,X,fe+="",0),ve,ee;if(Oe!=fe.length)return null;if("Q"in Q)return new Date(Q.Q);if("s"in Q)return new Date(Q.s*1e3+("L"in Q?Q.L:0));if(he&&!("Z"in Q)&&(Q.Z=0),"p"in Q&&(Q.H=Q.H%12+Q.p*12),Q.m===void 0&&(Q.m="q"in Q?Q.q:0),"V"in Q){if(Q.V<1||Q.V>53)return null;"w"in Q||(Q.w=1),"Z"in Q?(ve=J4(Yy(Q.y,0,1)),ee=ve.getUTCDay(),ve=ee>4||ee===0?DS.ceil(ve):DS(ve),ve=tA.offset(ve,(Q.V-1)*7),Q.y=ve.getUTCFullYear(),Q.m=ve.getUTCMonth(),Q.d=ve.getUTCDate()+(Q.w+6)%7):(ve=Z4(Yy(Q.y,0,1)),ee=ve.getDay(),ve=ee>4||ee===0?RS.ceil(ve):RS(ve),ve=vw.offset(ve,(Q.V-1)*7),Q.y=ve.getFullYear(),Q.m=ve.getMonth(),Q.d=ve.getDate()+(Q.w+6)%7)}else("W"in Q||"U"in Q)&&("w"in Q||(Q.w="u"in Q?Q.u%7:"W"in Q?1:0),ee="Z"in Q?J4(Yy(Q.y,0,1)).getUTCDay():Z4(Yy(Q.y,0,1)).getDay(),Q.m=0,Q.d="W"in Q?(Q.w+6)%7+Q.W*7-(ee+5)%7:Q.w+Q.U*7-(ee+6)%7);return"Z"in Q?(Q.H+=Q.Z/100|0,Q.M+=Q.Z%100,J4(Q)):Z4(Q)}}function C(X,he,fe,Q){for(var Oe=0,ve=he.length,ee=fe.length,Ee,Re;Oe<ve;){if(Q>=ee)return-1;if(Ee=he.charCodeAt(Oe++),Ee===37){if(Ee=he.charAt(Oe++),Re=N[Ee in AV?he.charAt(Oe++):Ee],!Re||(Q=Re(X,fe,Q))<0)return-1}else if(Ee!=fe.charCodeAt(Q++))return-1}return Q}function A(X,he,fe){var Q=d.exec(he.slice(fe));return Q?(X.p=u.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function R(X,he,fe){var Q=m.exec(he.slice(fe));return Q?(X.w=p.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function k(X,he,fe){var Q=h.exec(he.slice(fe));return Q?(X.w=f.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function O(X,he,fe){var Q=x.exec(he.slice(fe));return Q?(X.m=y.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function $(X,he,fe){var Q=g.exec(he.slice(fe));return Q?(X.m=v.get(Q[0].toLowerCase()),fe+Q[0].length):-1}function D(X,he,fe){return C(X,t,he,fe)}function q(X,he,fe){return C(X,n,he,fe)}function M(X,he,fe){return C(X,s,he,fe)}function L(X){return o[X.getDay()]}function V(X){return a[X.getDay()]}function P(X){return c[X.getMonth()]}function z(X){return l[X.getMonth()]}function Z(X){return i[+(X.getHours()>=12)]}function F(X){return 1+~~(X.getMonth()/3)}function W(X){return o[X.getUTCDay()]}function G(X){return a[X.getUTCDay()]}function H(X){return c[X.getUTCMonth()]}function se(X){return l[X.getUTCMonth()]}function J(X){return i[+(X.getUTCHours()>=12)]}function ie(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var he=S(X+="",j);return he.toString=function(){return X},he},parse:function(X){var he=T(X+="",!1);return he.toString=function(){return X},he},utcFormat:function(X){var he=S(X+="",w);return he.toString=function(){return X},he},utcParse:function(X){var he=T(X+="",!0);return he.toString=function(){return X},he}}}var AV={"-":"",_:" ",0:"0"},Ua=/^\s*\d+/,YKe=/^%/,XKe=/[\\^$*+?|[\]().{}]/g;function qn(e,t,n){var s=e<0?"-":"",i=(s?-e:e)+"",a=i.length;return s+(a<n?new Array(n-a+1).join(t)+i:i)}function QKe(e){return e.replace(XKe,"\\$&")}function Xy(e){return new RegExp("^(?:"+e.map(QKe).join("|")+")","i")}function Qy(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function ZKe(e,t,n){var s=Ua.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function JKe(e,t,n){var s=Ua.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function eGe(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function tGe(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function rGe(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function kV(e,t,n){var s=Ua.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function PV(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function nGe(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function sGe(e,t,n){var s=Ua.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function iGe(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function TV(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function aGe(e,t,n){var s=Ua.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function EV(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function oGe(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function lGe(e,t,n){var s=Ua.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function cGe(e,t,n){var s=Ua.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function dGe(e,t,n){var s=Ua.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function uGe(e,t,n){var s=YKe.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function hGe(e,t,n){var s=Ua.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function fGe(e,t,n){var s=Ua.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function OV(e,t){return qn(e.getDate(),t,2)}function mGe(e,t){return qn(e.getHours(),t,2)}function pGe(e,t){return qn(e.getHours()%12||12,t,2)}function gGe(e,t){return qn(1+vw.count(gf(e),e),t,3)}function lde(e,t){return qn(e.getMilliseconds(),t,3)}function xGe(e,t){return lde(e,t)+"000"}function vGe(e,t){return qn(e.getMonth()+1,t,2)}function yGe(e,t){return qn(e.getMinutes(),t,2)}function bGe(e,t){return qn(e.getSeconds(),t,2)}function jGe(e){var t=e.getDay();return t===0?7:t}function wGe(e,t){return qn(rA.count(gf(e)-1,e),t,2)}function cde(e){var t=e.getDay();return t>=4||t===0?j0(e):j0.ceil(e)}function NGe(e,t){return e=cde(e),qn(j0.count(gf(e),e)+(gf(e).getDay()===4),t,2)}function SGe(e){return e.getDay()}function _Ge(e,t){return qn(RS.count(gf(e)-1,e),t,2)}function CGe(e,t){return qn(e.getFullYear()%100,t,2)}function AGe(e,t){return e=cde(e),qn(e.getFullYear()%100,t,2)}function kGe(e,t){return qn(e.getFullYear()%1e4,t,4)}function PGe(e,t){var n=e.getDay();return e=n>=4||n===0?j0(e):j0.ceil(e),qn(e.getFullYear()%1e4,t,4)}function TGe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+qn(t/60|0,"0",2)+qn(t%60,"0",2)}function RV(e,t){return qn(e.getUTCDate(),t,2)}function EGe(e,t){return qn(e.getUTCHours(),t,2)}function OGe(e,t){return qn(e.getUTCHours()%12||12,t,2)}function RGe(e,t){return qn(1+tA.count(xf(e),e),t,3)}function dde(e,t){return qn(e.getUTCMilliseconds(),t,3)}function DGe(e,t){return dde(e,t)+"000"}function MGe(e,t){return qn(e.getUTCMonth()+1,t,2)}function IGe(e,t){return qn(e.getUTCMinutes(),t,2)}function LGe(e,t){return qn(e.getUTCSeconds(),t,2)}function FGe(e){var t=e.getUTCDay();return t===0?7:t}function $Ge(e,t){return qn(nA.count(xf(e)-1,e),t,2)}function ude(e){var t=e.getUTCDay();return t>=4||t===0?w0(e):w0.ceil(e)}function BGe(e,t){return e=ude(e),qn(w0.count(xf(e),e)+(xf(e).getUTCDay()===4),t,2)}function VGe(e){return e.getUTCDay()}function UGe(e,t){return qn(DS.count(xf(e)-1,e),t,2)}function qGe(e,t){return qn(e.getUTCFullYear()%100,t,2)}function zGe(e,t){return e=ude(e),qn(e.getUTCFullYear()%100,t,2)}function HGe(e,t){return qn(e.getUTCFullYear()%1e4,t,4)}function WGe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?w0(e):w0.ceil(e),qn(e.getUTCFullYear()%1e4,t,4)}function KGe(){return"+0000"}function DV(){return"%"}function MV(e){return+e}function IV(e){return Math.floor(+e/1e3)}var bx,hde,fde;GGe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function GGe(e){return bx=GKe(e),hde=bx.format,bx.parse,fde=bx.utcFormat,bx.utcParse,bx}function YGe(e){return new Date(e)}function XGe(e){return e instanceof Date?+e:+new Date(+e)}function kM(e,t,n,s,i,a,o,l,c,d){var u=mM(),h=u.invert,f=u.domain,m=d(".%L"),p=d(":%S"),g=d("%I:%M"),v=d("%I %p"),x=d("%a %d"),y=d("%b %d"),j=d("%B"),w=d("%Y");function N(S){return(c(S)<S?m:l(S)<S?p:o(S)<S?g:a(S)<S?v:s(S)<S?i(S)<S?x:y:n(S)<S?j:w)(S)}return u.invert=function(S){return new Date(h(S))},u.domain=function(S){return arguments.length?f(Array.from(S,XGe)):f().map(YGe)},u.ticks=function(S){var T=f();return e(T[0],T[T.length-1],S??10)},u.tickFormat=function(S,T){return T==null?N:d(T)},u.nice=function(S){var T=f();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?f(Jce(T,S)):u},u.copy=function(){return xw(u,kM(e,t,n,s,i,a,o,l,c,d))},u}function QGe(){return md.apply(kM(WKe,KKe,gf,CM,rA,vw,SM,wM,ng,hde).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ZGe(){return md.apply(kM(zKe,HKe,xf,AM,nA,tA,_M,NM,ng,fde).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sA(){var e=0,t=1,n,s,i,a,o=rl,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(i===0?.5:(h=(a(h)-n)*i,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),s=a(t=+t),i=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(f){var m,p;return arguments.length?([m,p]=f,o=h(m,p),d):[o(0),o(1)]}}return d.range=u(fy),d.rangeRound=u(fM),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return a=h,n=h(e),s=h(t),i=n===s?0:1/(s-n),d}}function up(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mde(){var e=dp(sA()(rl));return e.copy=function(){return up(e,mde())},_f.apply(e,arguments)}function pde(){var e=xM(sA()).domain([1,10]);return e.copy=function(){return up(e,pde()).base(e.base())},_f.apply(e,arguments)}function gde(){var e=vM(sA());return e.copy=function(){return up(e,gde()).constant(e.constant())},_f.apply(e,arguments)}function PM(){var e=yM(sA());return e.copy=function(){return up(e,PM()).exponent(e.exponent())},_f.apply(e,arguments)}function JGe(){return PM.apply(null,arguments).exponent(.5)}function xde(){var e=[],t=rl;function n(s){if(s!=null&&!isNaN(s=+s))return t((pw(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let i of s)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Mm),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,i)=>t(i/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(i,a)=>$We(e,a/s))},n.copy=function(){return xde(t).domain(e)},_f.apply(n,arguments)}function iA(){var e=0,t=.5,n=1,s=1,i,a,o,l,c,d=rl,u,h=!1,f;function m(g){return isNaN(g=+g)?f:(g=.5+((g=+u(g))-a)*(s*g<s*a?l:c),d(h?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,n]=g,i=u(e=+e),a=u(t=+t),o=u(n=+n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,m):[e,t,n]},m.clamp=function(g){return arguments.length?(h=!!g,m):h},m.interpolator=function(g){return arguments.length?(d=g,m):d};function p(g){return function(v){var x,y,j;return arguments.length?([x,y,j]=v,d=uKe(g,[x,y,j]),m):[d(0),d(.5),d(1)]}}return m.range=p(fy),m.rangeRound=p(fM),m.unknown=function(g){return arguments.length?(f=g,m):f},function(g){return u=g,i=g(e),a=g(t),o=g(n),l=i===a?0:.5/(a-i),c=a===o?0:.5/(o-a),s=a<i?-1:1,m}}function vde(){var e=dp(iA()(rl));return e.copy=function(){return up(e,vde())},_f.apply(e,arguments)}function yde(){var e=xM(iA()).domain([.1,1,10]);return e.copy=function(){return up(e,yde()).base(e.base())},_f.apply(e,arguments)}function bde(){var e=vM(iA());return e.copy=function(){return up(e,bde()).constant(e.constant())},_f.apply(e,arguments)}function TM(){var e=yM(iA());return e.copy=function(){return up(e,TM()).exponent(e.exponent())},_f.apply(e,arguments)}function eYe(){return TM.apply(null,arguments).exponent(.5)}const LV=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:rj,scaleDiverging:vde,scaleDivergingLog:yde,scaleDivergingPow:TM,scaleDivergingSqrt:eYe,scaleDivergingSymlog:bde,scaleIdentity:Zce,scaleImplicit:yE,scaleLinear:ES,scaleLog:ede,scaleOrdinal:dM,scalePoint:Gb,scalePow:bM,scaleQuantile:nde,scaleQuantize:sde,scaleRadial:rde,scaleSequential:mde,scaleSequentialLog:pde,scaleSequentialPow:PM,scaleSequentialQuantile:xde,scaleSequentialSqrt:JGe,scaleSequentialSymlog:gde,scaleSqrt:DKe,scaleSymlog:tde,scaleThreshold:ide,scaleTime:QGe,scaleUtc:ZGe,tickFormat:Qce},Symbol.toStringTag,{value:"Module"}));var tYe=sy;function rYe(e,t,n){for(var s=-1,i=e.length;++s<i;){var a=e[s],o=t(a);if(o!=null&&(l===void 0?o===o&&!tYe(o):n(o,l)))var l=o,c=a}return c}var aA=rYe;function nYe(e,t){return e>t}var jde=nYe,sYe=aA,iYe=jde,aYe=hy;function oYe(e){return e&&e.length?sYe(e,aYe,iYe):void 0}var lYe=oYe;const oA=ts(lYe);function cYe(e,t){return e<t}var wde=cYe,dYe=aA,uYe=wde,hYe=hy;function fYe(e){return e&&e.length?dYe(e,hYe,uYe):void 0}var mYe=fYe;const lA=ts(mYe);var pYe=z6,gYe=ph,xYe=Tce,vYe=Tl;function yYe(e,t){var n=vYe(e)?pYe:xYe;return n(e,gYe(t))}var bYe=yYe,jYe=kce,wYe=bYe;function NYe(e,t){return jYe(wYe(e,t),1)}var SYe=NYe;const _Ye=ts(SYe);var CYe=iM;function AYe(e,t){return CYe(e,t)}var kYe=AYe;const yw=ts(kYe);var my=1e9,PYe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},OM,oi=!0,ud="[DecimalError] ",vg=ud+"Invalid argument: ",EM=ud+"Exponent out of range: ",py=Math.floor,qp=Math.pow,TYe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,lc,Da=1e7,Ys=7,Nde=9007199254740991,MS=py(Nde/Ys),fr={};fr.absoluteValue=fr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};fr.comparedTo=fr.cmp=function(e){var t,n,s,i,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(s=a.d.length,i=e.d.length,t=0,n=s<i?s:i;t<n;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return s===i?0:s>i^a.s<0?1:-1};fr.decimalPlaces=fr.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ys;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};fr.dividedBy=fr.div=function(e){return ef(this,new this.constructor(e))};fr.dividedToIntegerBy=fr.idiv=function(e){var t=this,n=t.constructor;return Ts(ef(t,new n(e),0,1),n.precision)};fr.equals=fr.eq=function(e){return!this.cmp(e)};fr.exponent=function(){return ia(this)};fr.greaterThan=fr.gt=function(e){return this.cmp(e)>0};fr.greaterThanOrEqualTo=fr.gte=function(e){return this.cmp(e)>=0};fr.isInteger=fr.isint=function(){return this.e>this.d.length-2};fr.isNegative=fr.isneg=function(){return this.s<0};fr.isPositive=fr.ispos=function(){return this.s>0};fr.isZero=function(){return this.s===0};fr.lessThan=fr.lt=function(e){return this.cmp(e)<0};fr.lessThanOrEqualTo=fr.lte=function(e){return this.cmp(e)<1};fr.logarithm=fr.log=function(e){var t,n=this,s=n.constructor,i=s.precision,a=i+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(lc))throw Error(ud+"NaN");if(n.s<1)throw Error(ud+(n.s?"NaN":"-Infinity"));return n.eq(lc)?new s(0):(oi=!1,t=ef(oj(n,a),oj(e,a),a),oi=!0,Ts(t,i))};fr.minus=fr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Cde(t,e):Sde(t,(e.s=-e.s,e))};fr.modulo=fr.mod=function(e){var t,n=this,s=n.constructor,i=s.precision;if(e=new s(e),!e.s)throw Error(ud+"NaN");return n.s?(oi=!1,t=ef(n,e,0,1).times(e),oi=!0,n.minus(t)):Ts(new s(n),i)};fr.naturalExponential=fr.exp=function(){return _de(this)};fr.naturalLogarithm=fr.ln=function(){return oj(this)};fr.negated=fr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};fr.plus=fr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Sde(t,e):Cde(t,(e.s=-e.s,e))};fr.precision=fr.sd=function(e){var t,n,s,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(vg+e);if(t=ia(i)+1,s=i.d.length-1,n=s*Ys+1,s=i.d[s],s){for(;s%10==0;s/=10)n--;for(s=i.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};fr.squareRoot=fr.sqrt=function(){var e,t,n,s,i,a,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ud+"NaN")}for(e=ia(l),oi=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=Ku(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=py((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(i.toString()),n=c.precision,i=o=n+3;;)if(a=s,s=a.plus(ef(l,a,o+2)).times(.5),Ku(a.d).slice(0,o)===(t=Ku(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Ts(a,n+1,0),a.times(a).eq(l)){s=a;break}}else if(t!="9999")break;o+=4}return oi=!0,Ts(s,n)};fr.times=fr.mul=function(e){var t,n,s,i,a,o,l,c,d,u=this,h=u.constructor,f=u.d,m=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,n=u.e+e.e,c=f.length,d=m.length,c<d&&(a=f,f=m,m=a,o=c,c=d,d=o),a=[],o=c+d,s=o;s--;)a.push(0);for(s=d;--s>=0;){for(t=0,i=c+s;i>s;)l=a[i]+m[s]*f[i-s-1]+t,a[i--]=l%Da|0,t=l/Da|0;a[i]=(a[i]+t)%Da|0}for(;!a[--o];)a.pop();return t?++n:a.shift(),e.d=a,e.e=n,oi?Ts(e,h.precision):e};fr.toDecimalPlaces=fr.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(ch(e,0,my),t===void 0?t=s.rounding:ch(t,0,8),Ts(n,e+ia(n)+1,t))};fr.toExponential=function(e,t){var n,s=this,i=s.constructor;return e===void 0?n=Bg(s,!0):(ch(e,0,my),t===void 0?t=i.rounding:ch(t,0,8),s=Ts(new i(s),e+1,t),n=Bg(s,!0,e+1)),n};fr.toFixed=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?Bg(i):(ch(e,0,my),t===void 0?t=a.rounding:ch(t,0,8),s=Ts(new a(i),e+ia(i)+1,t),n=Bg(s.abs(),!1,e+ia(s)+1),i.isneg()&&!i.isZero()?"-"+n:n)};fr.toInteger=fr.toint=function(){var e=this,t=e.constructor;return Ts(new t(e),ia(e)+1,t.rounding)};fr.toNumber=function(){return+this};fr.toPower=fr.pow=function(e){var t,n,s,i,a,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(lc);if(l=new c(l),!l.s){if(e.s<1)throw Error(ud+"Infinity");return l}if(l.eq(lc))return l;if(s=c.precision,e.eq(lc))return Ts(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,a=l.s,o){if((n=u<0?-u:u)<=Nde){for(i=new c(lc),t=Math.ceil(s/Ys+4),oi=!1;n%2&&(i=i.times(l),$V(i.d,t)),n=py(n/2),n!==0;)l=l.times(l),$V(l.d,t);return oi=!0,e.s<0?new c(lc).div(i):Ts(i,s)}}else if(a<0)throw Error(ud+"NaN");return a=a<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,oi=!1,i=e.times(oj(l,s+d)),oi=!0,i=_de(i),i.s=a,i};fr.toPrecision=function(e,t){var n,s,i=this,a=i.constructor;return e===void 0?(n=ia(i),s=Bg(i,n<=a.toExpNeg||n>=a.toExpPos)):(ch(e,1,my),t===void 0?t=a.rounding:ch(t,0,8),i=Ts(new a(i),e,t),n=ia(i),s=Bg(i,e<=n||n<=a.toExpNeg,e)),s};fr.toSignificantDigits=fr.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(ch(e,1,my),t===void 0?t=s.rounding:ch(t,0,8)),Ts(new s(n),e,t)};fr.toString=fr.valueOf=fr.val=fr.toJSON=fr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ia(e),n=e.constructor;return Bg(e,t<=n.toExpNeg||t>=n.toExpPos)};function Sde(e,t){var n,s,i,a,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),oi?Ts(t,h):t;if(c=e.d,d=t.d,o=e.e,i=t.e,c=c.slice(),a=o-i,a){for(a<0?(s=c,a=-a,l=d.length):(s=d,i=o,l=c.length),o=Math.ceil(h/Ys),l=o>l?o+1:l+1,a>l&&(a=l,s.length=1),s.reverse();a--;)s.push(0);s.reverse()}for(l=c.length,a=d.length,l-a<0&&(a=l,s=d,d=c,c=s),n=0;a;)n=(c[--a]=c[a]+d[a]+n)/Da|0,c[a]%=Da;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,oi?Ts(t,h):t}function ch(e,t,n){if(e!==~~e||e<t||e>n)throw Error(vg+e)}function Ku(e){var t,n,s,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)s=e[t]+"",n=Ys-s.length,n&&(a+=Jf(n)),a+=s;o=e[t],s=o+"",n=Ys-s.length,n&&(a+=Jf(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var ef=function(){function e(s,i){var a,o=0,l=s.length;for(s=s.slice();l--;)a=s[l]*i+o,s[l]=a%Da|0,o=a/Da|0;return o&&s.unshift(o),s}function t(s,i,a,o){var l,c;if(a!=o)c=a>o?1:-1;else for(l=c=0;l<a;l++)if(s[l]!=i[l]){c=s[l]>i[l]?1:-1;break}return c}function n(s,i,a){for(var o=0;a--;)s[a]-=o,o=s[a]<i[a]?1:0,s[a]=o*Da+s[a]-i[a];for(;!s[0]&&s.length>1;)s.shift()}return function(s,i,a,o){var l,c,d,u,h,f,m,p,g,v,x,y,j,w,N,S,T,C,A=s.constructor,R=s.s==i.s?1:-1,k=s.d,O=i.d;if(!s.s)return new A(s);if(!i.s)throw Error(ud+"Division by zero");for(c=s.e-i.e,T=O.length,N=k.length,m=new A(R),p=m.d=[],d=0;O[d]==(k[d]||0);)++d;if(O[d]>(k[d]||0)&&--c,a==null?y=a=A.precision:o?y=a+(ia(s)-ia(i))+1:y=a,y<0)return new A(0);if(y=y/Ys+2|0,d=0,T==1)for(u=0,O=O[0],y++;(d<N||u)&&y--;d++)j=u*Da+(k[d]||0),p[d]=j/O|0,u=j%O|0;else{for(u=Da/(O[0]+1)|0,u>1&&(O=e(O,u),k=e(k,u),T=O.length,N=k.length),w=T,g=k.slice(0,T),v=g.length;v<T;)g[v++]=0;C=O.slice(),C.unshift(0),S=O[0],O[1]>=Da/2&&++S;do u=0,l=t(O,g,T,v),l<0?(x=g[0],T!=v&&(x=x*Da+(g[1]||0)),u=x/S|0,u>1?(u>=Da&&(u=Da-1),h=e(O,u),f=h.length,v=g.length,l=t(h,g,f,v),l==1&&(u--,n(h,T<f?C:O,f))):(u==0&&(l=u=1),h=O.slice()),f=h.length,f<v&&h.unshift(0),n(g,h,v),l==-1&&(v=g.length,l=t(O,g,T,v),l<1&&(u++,n(g,T<v?C:O,v))),v=g.length):l===0&&(u++,g=[0]),p[d++]=u,l&&g[0]?g[v++]=k[w]||0:(g=[k[w]],v=1);while((w++<N||g[0]!==void 0)&&y--)}return p[0]||p.shift(),m.e=c,Ts(m,o?a+ia(m)+1:a)}}();function _de(e,t){var n,s,i,a,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(ia(e)>16)throw Error(EM+ia(e));if(!e.s)return new u(lc);for(oi=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(qp(2,d))/Math.LN10*2+5|0,l+=s,n=i=a=new u(lc),u.precision=l;;){if(i=Ts(i.times(e),l),n=n.times(++c),o=a.plus(ef(i,n,l)),Ku(o.d).slice(0,l)===Ku(a.d).slice(0,l)){for(;d--;)a=Ts(a.times(a),l);return u.precision=h,t==null?(oi=!0,Ts(a,h)):a}a=o}}function ia(e){for(var t=e.e*Ys,n=e.d[0];n>=10;n/=10)t++;return t}function eP(e,t,n){if(t>e.LN10.sd())throw oi=!0,n&&(e.precision=n),Error(ud+"LN10 precision limit exceeded");return Ts(new e(e.LN10),t)}function Jf(e){for(var t="";e--;)t+="0";return t}function oj(e,t){var n,s,i,a,o,l,c,d,u,h=1,f=10,m=e,p=m.d,g=m.constructor,v=g.precision;if(m.s<1)throw Error(ud+(m.s?"NaN":"-Infinity"));if(m.eq(lc))return new g(0);if(t==null?(oi=!1,d=v):d=t,m.eq(10))return t==null&&(oi=!0),eP(g,d);if(d+=f,g.precision=d,n=Ku(p),s=n.charAt(0),a=ia(m),Math.abs(a)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)m=m.times(e),n=Ku(m.d),s=n.charAt(0),h++;a=ia(m),s>1?(m=new g("0."+n),a++):m=new g(s+"."+n.slice(1))}else return c=eP(g,d+2,v).times(a+""),m=oj(new g(s+"."+n.slice(1)),d-f).plus(c),g.precision=v,t==null?(oi=!0,Ts(m,v)):m;for(l=o=m=ef(m.minus(lc),m.plus(lc),d),u=Ts(m.times(m),d),i=3;;){if(o=Ts(o.times(u),d),c=l.plus(ef(o,new g(i),d)),Ku(c.d).slice(0,d)===Ku(l.d).slice(0,d))return l=l.times(2),a!==0&&(l=l.plus(eP(g,d+2,v).times(a+""))),l=ef(l,new g(h),d),g.precision=v,t==null?(oi=!0,Ts(l,v)):l;l=c,i+=2}}function FV(e,t){var n,s,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(s,i),t){if(i-=s,n=n-s-1,e.e=py(n/Ys),e.d=[],s=(n+1)%Ys,n<0&&(s+=Ys),s<i){for(s&&e.d.push(+t.slice(0,s)),i-=Ys;s<i;)e.d.push(+t.slice(s,s+=Ys));t=t.slice(s),s=Ys-t.length}else s-=i;for(;s--;)t+="0";if(e.d.push(+t),oi&&(e.e>MS||e.e<-MS))throw Error(EM+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ts(e,t,n){var s,i,a,o,l,c,d,u,h=e.d;for(o=1,a=h[0];a>=10;a/=10)o++;if(s=t-o,s<0)s+=Ys,i=t,d=h[u=0];else{if(u=Math.ceil((s+1)/Ys),a=h.length,u>=a)return e;for(d=a=h[u],o=1;a>=10;a/=10)o++;s%=Ys,i=s-Ys+o}if(n!==void 0&&(a=qp(10,o-i-1),l=d/a%10|0,c=t<0||h[u+1]!==void 0||d%a,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?i>0?d/qp(10,o-i):0:h[u-1])%10&1||n==(e.s<0?8:7))),t<1||!h[0])return c?(a=ia(e),h.length=1,t=t-a-1,h[0]=qp(10,(Ys-t%Ys)%Ys),e.e=py(-t/Ys)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(s==0?(h.length=u,a=1,u--):(h.length=u+1,a=qp(10,Ys-s),h[u]=i>0?(d/qp(10,o-i)%qp(10,i)|0)*a:0),c)for(;;)if(u==0){(h[0]+=a)==Da&&(h[0]=1,++e.e);break}else{if(h[u]+=a,h[u]!=Da)break;h[u--]=0,a=1}for(s=h.length;h[--s]===0;)h.pop();if(oi&&(e.e>MS||e.e<-MS))throw Error(EM+ia(e));return e}function Cde(e,t){var n,s,i,a,o,l,c,d,u,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),oi?Ts(t,m):t;if(c=e.d,h=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(n=c,o=-o,l=h.length):(n=h,s=d,l=c.length),i=Math.max(Math.ceil(m/Ys),l)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=h.length,u=i<l,u&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){u=c[i]<h[i];break}o=0}for(u&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>o;){if(c[--i]<h[i]){for(a=i;a&&c[--a]===0;)c[a]=Da-1;--c[a],c[i]+=Da}c[i]-=h[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,oi?Ts(t,m):t):new f(0)}function Bg(e,t,n){var s,i=ia(e),a=Ku(e.d),o=a.length;return t?(n&&(s=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Jf(s):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Jf(-i-1)+a,n&&(s=n-o)>0&&(a+=Jf(s))):i>=o?(a+=Jf(i+1-o),n&&(s=n-i-1)>0&&(a=a+"."+Jf(s))):((s=i+1)<o&&(a=a.slice(0,s)+"."+a.slice(s)),n&&(s=n-o)>0&&(i+1===o&&(a+="."),a+=Jf(s))),e.s<0?"-"+a:a}function $V(e,t){if(e.length>t)return e.length=t,!0}function Ade(e){var t,n,s;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(vg+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return FV(o,a.toString())}else if(typeof a!="string")throw Error(vg+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,TYe.test(a))FV(o,a);else throw Error(vg+a)}if(i.prototype=fr,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Ade,i.config=i.set=EYe,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return i.config(e),i}function EYe(e){if(!e||typeof e!="object")throw Error(ud+"Object expected");var t,n,s,i=["precision",1,my,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((s=e[n=i[t]])!==void 0)if(py(s)===s&&s>=i[t+1]&&s<=i[t+2])this[n]=s;else throw Error(vg+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(vg+n+": "+s);return this}var OM=Ade(PYe);lc=new OM(1);const vs=OM;function OYe(e){return IYe(e)||MYe(e)||DYe(e)||RYe()}function RYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DYe(e,t){if(e){if(typeof e=="string")return NE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NE(e,t)}}function MYe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function IYe(e){if(Array.isArray(e))return NE(e)}function NE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var LYe=function(t){return t},kde={},Pde=function(t){return t===kde},BV=function(t){return function n(){return arguments.length===0||arguments.length===1&&Pde(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},FYe=function e(t,n){return t===1?n:BV(function(){for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];var o=i.filter(function(l){return l!==kde}).length;return o>=t?n.apply(void 0,i):e(t-o,BV(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=i.map(function(h){return Pde(h)?c.shift():h});return n.apply(void 0,OYe(u).concat(c))}))})},cA=function(t){return FYe(t.length,t)},SE=function(t,n){for(var s=[],i=t;i<n;++i)s[i-t]=i;return s},$Ye=cA(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),BYe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return LYe;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},a.apply(void 0,arguments))}},_E=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Tde=function(t){var n=null,s=null;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n&&a.every(function(l,c){return l===n[c]})||(n=a,s=t.apply(void 0,a)),s}};function VYe(e){var t;return e===0?t=1:t=Math.floor(new vs(e).abs().log(10).toNumber())+1,t}function UYe(e,t,n){for(var s=new vs(e),i=0,a=[];s.lt(t)&&i<1e5;)a.push(s.toNumber()),s=s.add(n),i++;return a}var qYe=cA(function(e,t,n){var s=+e,i=+t;return s+n*(i-s)}),zYe=cA(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),HYe=cA(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const dA={rangeStep:UYe,getDigitCount:VYe,interpolateNumber:qYe,uninterpolateNumber:zYe,uninterpolateTruncation:HYe};function CE(e){return GYe(e)||KYe(e)||Ede(e)||WYe()}function WYe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KYe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function GYe(e){if(Array.isArray(e))return AE(e)}function lj(e,t){return QYe(e)||XYe(e,t)||Ede(e,t)||YYe()}function YYe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ede(e,t){if(e){if(typeof e=="string")return AE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AE(e,t)}}function AE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function XYe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,i=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){i=!0,a=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(i)throw a}}return n}}function QYe(e){if(Array.isArray(e))return e}function Ode(e){var t=lj(e,2),n=t[0],s=t[1],i=n,a=s;return n>s&&(i=s,a=n),[i,a]}function Rde(e,t,n){if(e.lte(0))return new vs(0);var s=dA.getDigitCount(e.toNumber()),i=new vs(10).pow(s),a=e.div(i),o=s!==1?.05:.1,l=new vs(Math.ceil(a.div(o).toNumber())).add(n).mul(o),c=l.mul(i);return t?c:new vs(Math.ceil(c))}function ZYe(e,t,n){var s=1,i=new vs(e);if(!i.isint()&&n){var a=Math.abs(e);a<1?(s=new vs(10).pow(dA.getDigitCount(e)-1),i=new vs(Math.floor(i.div(s).toNumber())).mul(s)):a>1&&(i=new vs(Math.floor(e)))}else e===0?i=new vs(Math.floor((t-1)/2)):n||(i=new vs(Math.floor(e)));var o=Math.floor((t-1)/2),l=BYe($Ye(function(c){return i.add(new vs(c-o).mul(s)).toNumber()}),SE);return l(0,t)}function Dde(e,t,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new vs(0),tickMin:new vs(0),tickMax:new vs(0)};var a=Rde(new vs(t).sub(e).div(n-1),s,i),o;e<=0&&t>=0?o=new vs(0):(o=new vs(e).add(t).div(2),o=o.sub(new vs(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),c=Math.ceil(new vs(t).sub(o).div(a).toNumber()),d=l+c+1;return d>n?Dde(e,t,n,s,i+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:a,tickMin:o.sub(new vs(l).mul(a)),tickMax:o.add(new vs(c).mul(a))})}function JYe(e){var t=lj(e,2),n=t[0],s=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=Ode([n,s]),c=lj(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var h=u===1/0?[d].concat(CE(SE(0,i-1).map(function(){return 1/0}))):[].concat(CE(SE(0,i-1).map(function(){return-1/0})),[u]);return n>s?_E(h):h}if(d===u)return ZYe(d,i,a);var f=Dde(d,u,o,a),m=f.step,p=f.tickMin,g=f.tickMax,v=dA.rangeStep(p,g.add(new vs(.1).mul(m)),m);return n>s?_E(v):v}function eXe(e,t){var n=lj(e,2),s=n[0],i=n[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Ode([s,i]),l=lj(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,i];if(c===d)return[c];var u=Math.max(t,2),h=Rde(new vs(d).sub(c).div(u-1),a,0),f=[].concat(CE(dA.rangeStep(new vs(c),new vs(d).sub(new vs(.99).mul(h)),h)),[d]);return s>i?_E(f):f}var tXe=Tde(JYe),rXe=Tde(eXe),nXe="Invariant failed";function Vg(e,t){throw new Error(nXe)}var sXe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function N0(e){"@babel/helpers - typeof";return N0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N0(e)}function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},IS.apply(this,arguments)}function iXe(e,t){return cXe(e)||lXe(e,t)||oXe(e,t)||aXe()}function aXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oXe(e,t){if(e){if(typeof e=="string")return VV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VV(e,t)}}function VV(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function lXe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function cXe(e){if(Array.isArray(e))return e}function dXe(e,t){if(e==null)return{};var n=uXe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function uXe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function hXe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fXe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Lde(s.key),s)}}function mXe(e,t,n){return t&&fXe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function pXe(e,t,n){return t=LS(t),gXe(e,Mde()?Reflect.construct(t,n||[],LS(e).constructor):t.apply(e,n))}function gXe(e,t){if(t&&(N0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xXe(e)}function xXe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mde=function(){return!!e})()}function LS(e){return LS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},LS(e)}function vXe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kE(e,t)}function kE(e,t){return kE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},kE(e,t)}function Ide(e,t,n){return t=Lde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lde(e){var t=yXe(e,"string");return N0(t)=="symbol"?t:t+""}function yXe(e,t){if(N0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(N0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bw=function(e){function t(){return hXe(this,t),pXe(this,t,arguments)}return vXe(t,e),mXe(t,[{key:"render",value:function(){var s=this.props,i=s.offset,a=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,h=s.yAxis,f=dXe(s,sXe),m=Mr(f,!1);this.props.direction==="x"&&u.type!=="number"&&Vg();var p=c.map(function(g){var v=d(g,l),x=v.x,y=v.y,j=v.value,w=v.errorVal;if(!w)return null;var N=[],S,T;if(Array.isArray(w)){var C=iXe(w,2);S=C[0],T=C[1]}else S=T=w;if(a==="vertical"){var A=u.scale,R=y+i,k=R+o,O=R-o,$=A(j-S),D=A(j+T);N.push({x1:D,y1:k,x2:D,y2:O}),N.push({x1:$,y1:R,x2:D,y2:R}),N.push({x1:$,y1:k,x2:$,y2:O})}else if(a==="horizontal"){var q=h.scale,M=x+i,L=M-o,V=M+o,P=q(j-S),z=q(j+T);N.push({x1:L,y1:z,x2:V,y2:z}),N.push({x1:M,y1:P,x2:M,y2:z}),N.push({x1:L,y1:P,x2:V,y2:P})}return Ae.createElement(Un,IS({className:"recharts-errorBar",key:"bar-".concat(N.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),N.map(function(Z){return Ae.createElement("line",IS({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return Ae.createElement(Un,{className:"recharts-errorBars"},p)}}])}(Ae.Component);Ide(bw,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});Ide(bw,"displayName","ErrorBar");function cj(e){"@babel/helpers - typeof";return cj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cj(e)}function UV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Tp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UV(Object(n),!0).forEach(function(s){bXe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UV(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bXe(e,t,n){return t=jXe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jXe(e){var t=wXe(e,"string");return cj(t)=="symbol"?t:t+""}function wXe(e,t){if(cj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(cj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fde=function(t){var n=t.children,s=t.formattedGraphicalItems,i=t.legendWidth,a=t.legendContent,o=tc(n,Dm);if(!o)return null;var l=Dm.defaultProps,c=l!==void 0?Tp(Tp({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:a==="children"?d=(s||[]).reduce(function(u,h){var f=h.item,m=h.props,p=m.sectors||m.data||[];return u.concat(p.map(function(g){return{type:o.props.iconType||f.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(s||[]).map(function(u){var h=u.item,f=h.type.defaultProps,m=f!==void 0?Tp(Tp({},f),h.props):{},p=m.dataKey,g=m.name,v=m.legendType,x=m.hide;return{inactive:x,dataKey:p,type:c.iconType||v||"square",color:RM(h),value:g||p,payload:m}}),Tp(Tp(Tp({},c),Dm.getWithHeight(o,i)),{},{payload:d,item:o})};function dj(e){"@babel/helpers - typeof";return dj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dj(e)}function qV(e){return CXe(e)||_Xe(e)||SXe(e)||NXe()}function NXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SXe(e,t){if(e){if(typeof e=="string")return PE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PE(e,t)}}function _Xe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function CXe(e){if(Array.isArray(e))return PE(e)}function PE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function zV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zV(Object(n),!0).forEach(function(s){kv(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zV(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function kv(e,t,n){return t=AXe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AXe(e){var t=kXe(e,"string");return dj(t)=="symbol"?t:t+""}function kXe(e,t){if(dj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(dj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ja(e,t,n){return sn(e)||sn(t)?n:Sa(t)?xc(e,t,n):Xr(t)?t(e):n}function Yb(e,t,n,s){var i=_Ye(e,function(l){return ja(l,t)});if(n==="number"){var a=i.filter(function(l){return qt(l)||parseFloat(l)});return a.length?[lA(a),oA(a)]:[1/0,-1/0]}var o=s?i.filter(function(l){return!sn(l)}):i;return o.map(function(l){return Sa(l)||l instanceof Date?l:""})}var PXe=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(a&&a.axisType==="angleAxis"&&Math.abs(Math.abs(a.range[1]-a.range[0])-360)<=1e-6)for(var c=a.range,d=0;d<l;d++){var u=d>0?i[d-1].coordinate:i[l-1].coordinate,h=i[d].coordinate,f=d>=l-1?i[0].coordinate:i[d+1].coordinate,m=void 0;if(el(h-u)!==el(f-h)){var p=[];if(el(f-h)===el(c[1]-c[0])){m=f;var g=h+c[1]-c[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{m=u;var v=f+c[1]-c[0];p[0]=Math.min(h,(v+h)/2),p[1]=Math.max(h,(v+h)/2)}var x=[Math.min(h,(m+h)/2),Math.max(h,(m+h)/2)];if(t>x[0]&&t<=x[1]||t>=p[0]&&t<=p[1]){o=i[d].index;break}}else{var y=Math.min(u,f),j=Math.max(u,f);if(t>(y+h)/2&&t<=(j+h)/2){o=i[d].index;break}}}else for(var w=0;w<l;w++)if(w===0&&t<=(s[w].coordinate+s[w+1].coordinate)/2||w>0&&w<l-1&&t>(s[w].coordinate+s[w-1].coordinate)/2&&t<=(s[w].coordinate+s[w+1].coordinate)/2||w===l-1&&t>(s[w].coordinate+s[w-1].coordinate)/2){o=s[w].index;break}return o},RM=function(t){var n,s=t,i=s.type.displayName,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Di(Di({},t.type.defaultProps),t.props):t.props,o=a.stroke,l=a.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},TXe=function(t){var n=t.barSize,s=t.totalSize,i=t.stackGroups,a=i===void 0?{}:i;if(!a)return{};for(var o={},l=Object.keys(a),c=0,d=l.length;c<d;c++)for(var u=a[l[c]].stackGroups,h=Object.keys(u),f=0,m=h.length;f<m;f++){var p=u[h[f]],g=p.items,v=p.cateAxisId,x=g.filter(function(T){return Jh(T.type).indexOf("Bar")>=0});if(x&&x.length){var y=x[0].type.defaultProps,j=y!==void 0?Di(Di({},y),x[0].props):x[0].props,w=j.barSize,N=j[v];o[N]||(o[N]=[]);var S=sn(w)?n:w;o[N].push({item:x[0],stackList:x.slice(1),barSize:sn(S)?void 0:tl(S,s,0)})}}return o},EXe=function(t){var n=t.barGap,s=t.barCategoryGap,i=t.bandSize,a=t.sizeList,o=a===void 0?[]:a,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=tl(n,i,0,!0),u,h=[];if(o[0].barSize===+o[0].barSize){var f=!1,m=i/c,p=o.reduce(function(w,N){return w+N.barSize||0},0);p+=(c-1)*d,p>=i&&(p-=(c-1)*d,d=0),p>=i&&m>0&&(f=!0,m*=.9,p=c*m);var g=(i-p)/2>>0,v={offset:g-d,size:0};u=o.reduce(function(w,N){var S={item:N.item,position:{offset:v.offset+v.size+d,size:f?m:N.barSize}},T=[].concat(qV(w),[S]);return v=T[T.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(C){T.push({item:C,position:v})}),T},h)}else{var x=tl(s,i,0,!0);i-2*x-(c-1)*d<=0&&(d=0);var y=(i-2*x-(c-1)*d)/c;y>1&&(y>>=0);var j=l===+l?Math.min(y,l):y;u=o.reduce(function(w,N,S){var T=[].concat(qV(w),[{item:N.item,position:{offset:x+(y+d)*S+(y-j)/2,size:j}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(C){T.push({item:C,position:T[T.length-1].position})}),T},h)}return u},OXe=function(t,n,s,i){var a=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=Fde({children:a,legendWidth:c});if(d){var u=i||{},h=u.width,f=u.height,m=d.align,p=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&p==="middle")&&m!=="center"&&qt(t[m]))return Di(Di({},t),{},kv({},m,t[m]+(h||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&p!=="middle"&&qt(t[p]))return Di(Di({},t),{},kv({},p,t[p]+(f||0)))}return t},RXe=function(t,n,s){return sn(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},$de=function(t,n,s,i,a){var o=n.props.children,l=vc(o,bw).filter(function(d){return RXe(i,a,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var h=ja(u,s);if(sn(h))return d;var f=Array.isArray(h)?[lA(h),oA(h)]:[h,h],m=c.reduce(function(p,g){var v=ja(u,g,0),x=f[0]-Math.abs(Array.isArray(v)?v[0]:v),y=f[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,p[0]),Math.max(y,p[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},DXe=function(t,n,s,i,a){var o=n.map(function(l){return $de(t,l,s,a,i)}).filter(function(l){return!sn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},Bde=function(t,n,s,i,a){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&$de(t,c,d,i)||Yb(t,d,s,a)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,h=d.length;u<h;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},Vde=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},Ude=function(t,n,s,i){if(i)return t.map(function(c){return c.coordinate});var a,o,l=t.map(function(c){return c.coordinate===n&&(a=!0),c.coordinate===s&&(o=!0),c.coordinate});return a||l.push(n),o||l.push(s),l},Gh=function(t,n,s){if(!t)return null;var i=t.scale,a=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,d=(n||s)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?el(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(h){var f=a?a.indexOf(h):h;return{coordinate:i(f)+d,value:h,offset:d}});return u.filter(function(h){return!fw(h.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(h,f){return{coordinate:i(h)+d,value:h,index:f,offset:d}}):i.ticks&&!s?i.ticks(t.tickCount).map(function(h){return{coordinate:i(h)+d,value:h,offset:d}}):i.domain().map(function(h,f){return{coordinate:i(h)+d,value:a?a[h]:h,index:f,offset:d}})},tP=new WeakMap,K2=function(t,n){if(typeof n!="function")return t;tP.has(t)||tP.set(t,new WeakMap);var s=tP.get(t);if(s.has(n))return s.get(n);var i=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,i),i},qde=function(t,n,s){var i=t.scale,a=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:rj(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:ES(),realScaleType:"linear"}:a==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:Gb(),realScaleType:"point"}:a==="category"?{scale:rj(),realScaleType:"band"}:{scale:ES(),realScaleType:"linear"};if(hw(i)){var c="scale".concat(KC(i));return{scale:(LV[c]||Gb)(),realScaleType:LV[c]?c:"point"}}return Xr(i)?{scale:i}:{scale:Gb(),realScaleType:"point"}},HV=1e-4,zde=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,i=t.range(),a=Math.min(i[0],i[1])-HV,o=Math.max(i[0],i[1])+HV,l=t(n[0]),c=t(n[s-1]);(l<a||l>o||c<a||c>o)&&t.domain([n[0],n[s-1]])}},MXe=function(t,n){if(!t)return null;for(var s=0,i=t.length;s<i;s++)if(t[s].item===n)return t[s].position;return null},IXe=function(t,n){if(!n||n.length!==2||!qt(n[0])||!qt(n[1]))return t;var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),a=[t[0],t[1]];return(!qt(t[0])||t[0]<s)&&(a[0]=s),(!qt(t[1])||t[1]>i)&&(a[1]=i),a[0]>i&&(a[0]=i),a[1]<s&&(a[1]=s),a},LXe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0,l=0;l<n;++l){var c=fw(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=a,t[l][s][1]=a+c,a=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},FXe=function(t){var n=t.length;if(!(n<=0))for(var s=0,i=t[0].length;s<i;++s)for(var a=0,o=0;o<n;++o){var l=fw(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=a,t[o][s][1]=a+l,a=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},$Xe={sign:LXe,expand:s7e,none:m0,silhouette:i7e,wiggle:a7e,positive:FXe},BXe=function(t,n,s){var i=n.map(function(l){return l.props.dataKey}),a=$Xe[s],o=n7e().keys(i).value(function(l,c){return+ja(l,c,0)}).order(eE).offset(a);return o(t)},VXe=function(t,n,s,i,a,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(h,f){var m,p=(m=f.type)!==null&&m!==void 0&&m.defaultProps?Di(Di({},f.type.defaultProps),f.props):f.props,g=p.stackId,v=p.hide;if(v)return h;var x=p[s],y=h[x]||{hasStack:!1,stackGroups:{}};if(Sa(g)){var j=y.stackGroups[g]||{numericAxisId:s,cateAxisId:i,items:[]};j.items.push(f),y.hasStack=!0,y.stackGroups[g]=j}else y.stackGroups[cy("_stackId_")]={numericAxisId:s,cateAxisId:i,items:[f]};return Di(Di({},h),{},kv({},x,y))},c),u={};return Object.keys(d).reduce(function(h,f){var m=d[f];if(m.hasStack){var p={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,v){var x=m.stackGroups[v];return Di(Di({},g),{},kv({},v,{numericAxisId:s,cateAxisId:i,items:x.items,stackedData:BXe(t,x.items,a)}))},p)}return Di(Di({},h),{},kv({},f,m))},u)},Hde=function(t,n){var s=n.realScaleType,i=n.type,a=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(a&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=tXe(d,a,l);return t.domain([lA(u),oA(u)]),{niceTicks:u}}if(a&&i==="number"){var h=t.domain(),f=rXe(h,a,l);return{niceTicks:f}}return null};function WV(e){var t=e.axis,n=e.ticks,s=e.bandSize,i=e.entry,a=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!sn(i[t.dataKey])){var l=dS(n,"value",i[t.dataKey]);if(l)return l.coordinate+s/2}return n[a]?n[a].coordinate+s/2:null}var c=ja(i,sn(o)?t.dataKey:o);return sn(c)?null:t.scale(c)}var KV=function(t){var n=t.axis,s=t.ticks,i=t.offset,a=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+i:null;var c=ja(o,n.dataKey,n.domain[l]);return sn(c)?null:n.scale(c)-a/2+i},UXe=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var i=Math.min(s[0],s[1]),a=Math.max(s[0],s[1]);return i<=0&&a>=0?0:a<0?a:i}return s[0]},qXe=function(t,n){var s,i=(s=t.type)!==null&&s!==void 0&&s.defaultProps?Di(Di({},t.type.defaultProps),t.props):t.props,a=i.stackId;if(Sa(a)){var o=n[a];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},zXe=function(t){return t.reduce(function(n,s){return[lA(s.concat([n[0]]).filter(qt)),oA(s.concat([n[1]]).filter(qt))]},[1/0,-1/0])},Wde=function(t,n,s){return Object.keys(t).reduce(function(i,a){var o=t[a],l=o.stackedData,c=l.reduce(function(d,u){var h=zXe(u.slice(n,s+1));return[Math.min(d[0],h[0]),Math.max(d[1],h[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},GV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,YV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,TE=function(t,n,s){if(Xr(t))return t(n,s);if(!Array.isArray(t))return n;var i=[];if(qt(t[0]))i[0]=s?t[0]:Math.min(t[0],n[0]);else if(GV.test(t[0])){var a=+GV.exec(t[0])[1];i[0]=n[0]-a}else Xr(t[0])?i[0]=t[0](n[0]):i[0]=n[0];if(qt(t[1]))i[1]=s?t[1]:Math.max(t[1],n[1]);else if(YV.test(t[1])){var o=+YV.exec(t[1])[1];i[1]=n[1]+o}else Xr(t[1])?i[1]=t[1](n[1]):i[1]=n[1];return i},FS=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!s||i>0)return i}if(t&&n&&n.length>=2){for(var a=oM(n,function(h){return h.coordinate}),o=1/0,l=1,c=a.length;l<c;l++){var d=a[l],u=a[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},XV=function(t,n,s){return!t||!t.length||yw(t,xc(s,"type.defaultProps.domain"))?n:t},Kde=function(t,n){var s=t.type.defaultProps?Di(Di({},t.type.defaultProps),t.props):t.props,i=s.dataKey,a=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return Di(Di({},Mr(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:a||i,color:RM(t),value:ja(n,i),type:c,payload:n,chartType:d,hide:u})};function uj(e){"@babel/helpers - typeof";return uj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uj(e)}function QV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ih(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QV(Object(n),!0).forEach(function(s){Gde(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QV(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Gde(e,t,n){return t=HXe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HXe(e){var t=WXe(e,"string");return uj(t)=="symbol"?t:t+""}function WXe(e,t){if(uj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(uj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KXe(e,t){return QXe(e)||XXe(e,t)||YXe(e,t)||GXe()}function GXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YXe(e,t){if(e){if(typeof e=="string")return ZV(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZV(e,t)}}function ZV(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function XXe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function QXe(e){if(Array.isArray(e))return e}var $S=Math.PI/180,ZXe=function(t){return t*180/Math.PI},Us=function(t,n,s,i){return{x:t+Math.cos(-$S*i)*s,y:n+Math.sin(-$S*i)*s}},Yde=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},JXe=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=tl(t.cx,o,o/2),h=tl(t.cy,l,l/2),f=Yde(o,l,s),m=tl(t.innerRadius,f,0),p=tl(t.outerRadius,f,f*.8),g=Object.keys(n);return g.reduce(function(v,x){var y=n[x],j=y.domain,w=y.reversed,N;if(sn(y.range))i==="angleAxis"?N=[c,d]:i==="radiusAxis"&&(N=[m,p]),w&&(N=[N[1],N[0]]);else{N=y.range;var S=N,T=KXe(S,2);c=T[0],d=T[1]}var C=qde(y,a),A=C.realScaleType,R=C.scale;R.domain(j).range(N),zde(R);var k=Hde(R,Ih(Ih({},y),{},{realScaleType:A})),O=Ih(Ih(Ih({},y),k),{},{range:N,radius:p,realScaleType:A,scale:R,cx:u,cy:h,innerRadius:m,outerRadius:p,startAngle:c,endAngle:d});return Ih(Ih({},v),{},Gde({},x,O))},{})},eQe=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return Math.sqrt(Math.pow(s-a,2)+Math.pow(i-o,2))},tQe=function(t,n){var s=t.x,i=t.y,a=n.cx,o=n.cy,l=eQe({x:s,y:i},{x:a,y:o});if(l<=0)return{radius:l};var c=(s-a)/l,d=Math.acos(c);return i>o&&(d=2*Math.PI-d),{radius:l,angle:ZXe(d),angleInRadian:d}},rQe=function(t){var n=t.startAngle,s=t.endAngle,i=Math.floor(n/360),a=Math.floor(s/360),o=Math.min(i,a);return{startAngle:n-o*360,endAngle:s-o*360}},nQe=function(t,n){var s=n.startAngle,i=n.endAngle,a=Math.floor(s/360),o=Math.floor(i/360),l=Math.min(a,o);return t+l*360},JV=function(t,n){var s=t.x,i=t.y,a=tQe({x:s,y:i},n),o=a.radius,l=a.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=rQe(n),h=u.startAngle,f=u.endAngle,m=l,p;if(h<=f){for(;m>f;)m-=360;for(;m<h;)m+=360;p=m>=h&&m<=f}else{for(;m>h;)m-=360;for(;m<f;)m+=360;p=m>=f&&m<=h}return p?Ih(Ih({},n),{},{radius:o,angle:nQe(m,n)}):null},Xde=function(t){return!b.isValidElement(t)&&!Xr(t)&&typeof t!="boolean"?t.className:""};function hj(e){"@babel/helpers - typeof";return hj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hj(e)}var sQe=["offset"];function iQe(e){return cQe(e)||lQe(e)||oQe(e)||aQe()}function aQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oQe(e,t){if(e){if(typeof e=="string")return EE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EE(e,t)}}function lQe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cQe(e){if(Array.isArray(e))return EE(e)}function EE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function dQe(e,t){if(e==null)return{};var n=uQe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function uQe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function eU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function xa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eU(Object(n),!0).forEach(function(s){hQe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hQe(e,t,n){return t=fQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fQe(e){var t=mQe(e,"string");return hj(t)=="symbol"?t:t+""}function mQe(e,t){if(hj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(hj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fj.apply(this,arguments)}var pQe=function(t){var n=t.value,s=t.formatter,i=sn(t.children)?n:t.children;return Xr(s)?s(i):i},gQe=function(t,n){var s=el(n-t),i=Math.min(Math.abs(n-t),360);return s*i},xQe=function(t,n,s){var i=t.position,a=t.viewBox,o=t.offset,l=t.className,c=a,d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius,m=c.startAngle,p=c.endAngle,g=c.clockWise,v=(h+f)/2,x=gQe(m,p),y=x>=0?1:-1,j,w;i==="insideStart"?(j=m+y*o,w=g):i==="insideEnd"?(j=p-y*o,w=!g):i==="end"&&(j=p+y*o,w=g),w=x<=0?w:!w;var N=Us(d,u,v,j),S=Us(d,u,v,j+(w?1:-1)*359),T="M".concat(N.x,",").concat(N.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(w?0:1,`,
    `).concat(S.x,",").concat(S.y),C=sn(t.id)?cy("recharts-radial-line-"):t.id;return Ae.createElement("text",fj({},s,{dominantBaseline:"central",className:on("recharts-radial-bar-label",l)}),Ae.createElement("defs",null,Ae.createElement("path",{id:C,d:T})),Ae.createElement("textPath",{xlinkHref:"#".concat(C)},n))},vQe=function(t){var n=t.viewBox,s=t.offset,i=t.position,a=n,o=a.cx,l=a.cy,c=a.innerRadius,d=a.outerRadius,u=a.startAngle,h=a.endAngle,f=(u+h)/2;if(i==="outside"){var m=Us(o,l,d+s,f),p=m.x,g=m.y;return{x:p,y:g,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+d)/2,x=Us(o,l,v,f),y=x.x,j=x.y;return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},yQe=function(t){var n=t.viewBox,s=t.parentViewBox,i=t.offset,a=t.position,o=n,l=o.x,c=o.y,d=o.width,u=o.height,h=u>=0?1:-1,f=h*i,m=h>0?"end":"start",p=h>0?"start":"end",g=d>=0?1:-1,v=g*i,x=g>0?"end":"start",y=g>0?"start":"end";if(a==="top"){var j={x:l+d/2,y:c-h*i,textAnchor:"middle",verticalAnchor:m};return xa(xa({},j),s?{height:Math.max(c-s.y,0),width:d}:{})}if(a==="bottom"){var w={x:l+d/2,y:c+u+f,textAnchor:"middle",verticalAnchor:p};return xa(xa({},w),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(a==="left"){var N={x:l-v,y:c+u/2,textAnchor:x,verticalAnchor:"middle"};return xa(xa({},N),s?{width:Math.max(N.x-s.x,0),height:u}:{})}if(a==="right"){var S={x:l+d+v,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return xa(xa({},S),s?{width:Math.max(s.x+s.width-S.x,0),height:u}:{})}var T=s?{width:d,height:u}:{};return a==="insideLeft"?xa({x:l+v,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},T):a==="insideRight"?xa({x:l+d-v,y:c+u/2,textAnchor:x,verticalAnchor:"middle"},T):a==="insideTop"?xa({x:l+d/2,y:c+f,textAnchor:"middle",verticalAnchor:p},T):a==="insideBottom"?xa({x:l+d/2,y:c+u-f,textAnchor:"middle",verticalAnchor:m},T):a==="insideTopLeft"?xa({x:l+v,y:c+f,textAnchor:y,verticalAnchor:p},T):a==="insideTopRight"?xa({x:l+d-v,y:c+f,textAnchor:x,verticalAnchor:p},T):a==="insideBottomLeft"?xa({x:l+v,y:c+u-f,textAnchor:y,verticalAnchor:m},T):a==="insideBottomRight"?xa({x:l+d-v,y:c+u-f,textAnchor:x,verticalAnchor:m},T):iy(a)&&(qt(a.x)||tg(a.x))&&(qt(a.y)||tg(a.y))?xa({x:l+tl(a.x,d),y:c+tl(a.y,u),textAnchor:"end",verticalAnchor:"end"},T):xa({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},T)},bQe=function(t){return"cx"in t&&qt(t.cx)};function La(e){var t=e.offset,n=t===void 0?5:t,s=dQe(e,sQe),i=xa({offset:n},s),a=i.viewBox,o=i.position,l=i.value,c=i.children,d=i.content,u=i.className,h=u===void 0?"":u,f=i.textBreakAll;if(!a||sn(l)&&sn(c)&&!b.isValidElement(d)&&!Xr(d))return null;if(b.isValidElement(d))return b.cloneElement(d,i);var m;if(Xr(d)){if(m=b.createElement(d,i),b.isValidElement(m))return m}else m=pQe(i);var p=bQe(a),g=Mr(i,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return xQe(i,m,g);var v=p?vQe(i):yQe(i);return Ae.createElement($g,fj({className:on("recharts-label",h)},g,v,{breakAll:f}),m)}La.displayName="Label";var Qde=function(t){var n=t.cx,s=t.cy,i=t.angle,a=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,h=t.x,f=t.y,m=t.top,p=t.left,g=t.width,v=t.height,x=t.clockWise,y=t.labelViewBox;if(y)return y;if(qt(g)&&qt(v)){if(qt(h)&&qt(f))return{x:h,y:f,width:g,height:v};if(qt(m)&&qt(p))return{x:m,y:p,width:g,height:v}}return qt(h)&&qt(f)?{x:h,y:f,width:0,height:0}:qt(n)&&qt(s)?{cx:n,cy:s,startAngle:a||i||0,endAngle:o||i||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},jQe=function(t,n){return t?t===!0?Ae.createElement(La,{key:"label-implicit",viewBox:n}):Sa(t)?Ae.createElement(La,{key:"label-implicit",viewBox:n,value:t}):b.isValidElement(t)?t.type===La?b.cloneElement(t,{key:"label-implicit",viewBox:n}):Ae.createElement(La,{key:"label-implicit",content:t,viewBox:n}):Xr(t)?Ae.createElement(La,{key:"label-implicit",content:t,viewBox:n}):iy(t)?Ae.createElement(La,fj({viewBox:n},t,{key:"label-implicit"})):null:null},wQe=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var i=t.children,a=Qde(t),o=vc(i,La).map(function(c,d){return b.cloneElement(c,{viewBox:n||a,key:"label-".concat(d)})});if(!s)return o;var l=jQe(t.label,n||a);return[l].concat(iQe(o))};La.parseViewBox=Qde;La.renderCallByParent=wQe;function NQe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var SQe=NQe;const _Qe=ts(SQe);function mj(e){"@babel/helpers - typeof";return mj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mj(e)}var CQe=["valueAccessor"],AQe=["data","dataKey","clockWise","id","textBreakAll"];function kQe(e){return OQe(e)||EQe(e)||TQe(e)||PQe()}function PQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TQe(e,t){if(e){if(typeof e=="string")return OE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OE(e,t)}}function EQe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function OQe(e){if(Array.isArray(e))return OE(e)}function OE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function BS(){return BS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},BS.apply(this,arguments)}function tU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function rU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tU(Object(n),!0).forEach(function(s){RQe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function RQe(e,t,n){return t=DQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DQe(e){var t=MQe(e,"string");return mj(t)=="symbol"?t:t+""}function MQe(e,t){if(mj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(mj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nU(e,t){if(e==null)return{};var n=IQe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function IQe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var LQe=function(t){return Array.isArray(t.value)?_Qe(t.value):t.value};function tf(e){var t=e.valueAccessor,n=t===void 0?LQe:t,s=nU(e,CQe),i=s.data,a=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=nU(s,AQe);return!i||!i.length?null:Ae.createElement(Un,{className:"recharts-label-list"},i.map(function(u,h){var f=sn(a)?n(u,h):ja(u&&u.payload,a),m=sn(l)?{}:{id:"".concat(l,"-").concat(h)};return Ae.createElement(La,BS({},Mr(u,!0),d,m,{parentViewBox:u.parentViewBox,value:f,textBreakAll:c,viewBox:La.parseViewBox(sn(o)?u:rU(rU({},u),{},{clockWise:o})),key:"label-".concat(h),index:h}))}))}tf.displayName="LabelList";function FQe(e,t){return e?e===!0?Ae.createElement(tf,{key:"labelList-implicit",data:t}):Ae.isValidElement(e)||Xr(e)?Ae.createElement(tf,{key:"labelList-implicit",data:t,content:e}):iy(e)?Ae.createElement(tf,BS({data:t},e,{key:"labelList-implicit"})):null:null}function $Qe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,i=vc(s,tf).map(function(o,l){return b.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return i;var a=FQe(e.label,t);return[a].concat(kQe(i))}tf.renderCallByParent=$Qe;function pj(e){"@babel/helpers - typeof";return pj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pj(e)}function RE(){return RE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},RE.apply(this,arguments)}function sU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function iU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sU(Object(n),!0).forEach(function(s){BQe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function BQe(e,t,n){return t=VQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VQe(e){var t=UQe(e,"string");return pj(t)=="symbol"?t:t+""}function UQe(e,t){if(pj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(pj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qQe=function(t,n){var s=el(n-t),i=Math.min(Math.abs(n-t),359.999);return s*i},G2=function(t){var n=t.cx,s=t.cy,i=t.radius,a=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+i,h=Math.asin(c/u)/$S,f=d?a:a+o*h,m=Us(n,s,u,f),p=Us(n,s,i,f),g=d?a-o*h:a,v=Us(n,s,u*Math.cos(h*$S),g);return{center:m,circleTangency:p,lineTangency:v,theta:h}},Zde=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.startAngle,l=t.endAngle,c=qQe(o,l),d=o+c,u=Us(n,s,a,o),h=Us(n,s,a,d),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var m=Us(n,s,i,o),p=Us(n,s,i,d);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else f+="L ".concat(n,",").concat(s," Z");return f},zQe=function(t){var n=t.cx,s=t.cy,i=t.innerRadius,a=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,h=el(u-d),f=G2({cx:n,cy:s,radius:a,angle:d,sign:h,cornerRadius:o,cornerIsExternal:c}),m=f.circleTangency,p=f.lineTangency,g=f.theta,v=G2({cx:n,cy:s,radius:a,angle:u,sign:-h,cornerRadius:o,cornerIsExternal:c}),x=v.circleTangency,y=v.lineTangency,j=v.theta,w=c?Math.abs(d-u):Math.abs(d-u)-g-j;if(w<0)return l?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Zde({cx:n,cy:s,innerRadius:i,outerRadius:a,startAngle:d,endAngle:u});var N="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(w>180),",").concat(+(h<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(y.x,",").concat(y.y,`
  `);if(i>0){var S=G2({cx:n,cy:s,radius:i,angle:d,sign:h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=S.circleTangency,C=S.lineTangency,A=S.theta,R=G2({cx:n,cy:s,radius:i,angle:u,sign:-h,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=R.circleTangency,O=R.lineTangency,$=R.theta,D=c?Math.abs(d-u):Math.abs(d-u)-A-$;if(D<0&&o===0)return"".concat(N,"L").concat(n,",").concat(s,"Z");N+="L".concat(O.x,",").concat(O.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(D>180),",").concat(+(h>0),",").concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(h<0),",").concat(C.x,",").concat(C.y,"Z")}else N+="L".concat(n,",").concat(s,"Z");return N},HQe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Jde=function(t){var n=iU(iU({},HQe),t),s=n.cx,i=n.cy,a=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,u=n.startAngle,h=n.endAngle,f=n.className;if(o<a||u===h)return null;var m=on("recharts-sector",f),p=o-a,g=tl(l,p,0,!0),v;return g>0&&Math.abs(u-h)<360?v=zQe({cx:s,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,p/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:h}):v=Zde({cx:s,cy:i,innerRadius:a,outerRadius:o,startAngle:u,endAngle:h}),Ae.createElement("path",RE({},Mr(n,!0),{className:m,d:v,role:"img"}))};function gj(e){"@babel/helpers - typeof";return gj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gj(e)}function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},DE.apply(this,arguments)}function aU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function oU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aU(Object(n),!0).forEach(function(s){WQe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function WQe(e,t,n){return t=KQe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KQe(e){var t=GQe(e,"string");return gj(t)=="symbol"?t:t+""}function GQe(e,t){if(gj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(gj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lU={curveBasisClosed:WFe,curveBasisOpen:KFe,curveBasis:HFe,curveBumpX:EFe,curveBumpY:OFe,curveLinearClosed:GFe,curveLinear:YC,curveMonotoneX:YFe,curveMonotoneY:XFe,curveNatural:QFe,curveStep:ZFe,curveStepAfter:e7e,curveStepBefore:JFe},Y2=function(t){return t.x===+t.x&&t.y===+t.y},Zy=function(t){return t.x},Jy=function(t){return t.y},YQe=function(t,n){if(Xr(t))return t;var s="curve".concat(KC(t));return(s==="curveMonotone"||s==="curveBump")&&n?lU["".concat(s).concat(n==="vertical"?"Y":"X")]:lU[s]||YC},XQe=function(t){var n=t.type,s=n===void 0?"linear":n,i=t.points,a=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=YQe(s,l),h=d?a.filter(function(g){return Y2(g)}):a,f;if(Array.isArray(o)){var m=d?o.filter(function(g){return Y2(g)}):o,p=h.map(function(g,v){return oU(oU({},g),{},{base:m[v]})});return l==="vertical"?f=$2().y(Jy).x1(Zy).x0(function(g){return g.base.x}):f=$2().x(Zy).y1(Jy).y0(function(g){return g.base.y}),f.defined(Y2).curve(u),f(p)}return l==="vertical"&&qt(o)?f=$2().y(Jy).x1(Zy).x0(o):qt(o)?f=$2().x(Zy).y1(Jy).y0(o):f=Kle().x(Zy).y(Jy),f.defined(Y2).curve(u),f(h)},VS=function(t){var n=t.className,s=t.points,i=t.path,a=t.pathRef;if((!s||!s.length)&&!i)return null;var o=s&&s.length?XQe(t):i;return Ae.createElement("path",DE({},Mr(t,!1),uS(t),{className:on("recharts-curve",n),d:o,ref:a}))},eue={exports:{}},QQe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZQe=QQe,JQe=ZQe;function tue(){}function rue(){}rue.resetWarningCache=tue;var eZe=function(){function e(s,i,a,o,l,c){if(c!==JQe){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rue,resetWarningCache:tue};return n.PropTypes=n,n};eue.exports=eZe();var tZe=eue.exports;const Yn=ts(tZe);var rZe=Object.getOwnPropertyNames,nZe=Object.getOwnPropertySymbols,sZe=Object.prototype.hasOwnProperty;function cU(e,t){return function(s,i,a){return e(s,i,a)&&t(s,i,a)}}function X2(e){return function(n,s,i){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,i);var a=i.cache,o=a.get(n),l=a.get(s);if(o&&l)return o===s&&l===n;a.set(n,s),a.set(s,n);var c=e(n,s,i);return a.delete(n),a.delete(s),c}}function dU(e){return rZe(e).concat(nZe(e))}var iZe=Object.hasOwn||function(e,t){return sZe.call(e,t)};function ix(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var aZe="__v",oZe="__o",lZe="_owner",uU=Object.getOwnPropertyDescriptor,hU=Object.keys;function cZe(e,t,n){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function dZe(e,t){return ix(e.getTime(),t.getTime())}function uZe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function hZe(e,t){return e===t}function fU(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.entries(),o,l,c=0;(o=a.next())&&!o.done;){for(var d=t.entries(),u=!1,h=0;(l=d.next())&&!l.done;){if(i[h]){h++;continue}var f=o.value,m=l.value;if(n.equals(f[0],m[0],c,h,e,t,n)&&n.equals(f[1],m[1],f[0],m[0],e,t,n)){u=i[h]=!0;break}h++}if(!u)return!1;c++}return!0}var fZe=ix;function mZe(e,t,n){var s=hU(e),i=s.length;if(hU(t).length!==i)return!1;for(;i-- >0;)if(!nue(e,t,n,s[i]))return!1;return!0}function eb(e,t,n){var s=dU(e),i=s.length;if(dU(t).length!==i)return!1;for(var a,o,l;i-- >0;)if(a=s[i],!nue(e,t,n,a)||(o=uU(e,a),l=uU(t,a),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function pZe(e,t){return ix(e.valueOf(),t.valueOf())}function gZe(e,t){return e.source===t.source&&e.flags===t.flags}function mU(e,t,n){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var i=new Array(s),a=e.values(),o,l;(o=a.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!i[u]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=i[u]=!0;break}u++}if(!d)return!1}return!0}function xZe(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function vZe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function nue(e,t,n,s){return(s===lZe||s===oZe||s===aZe)&&(e.$$typeof||t.$$typeof)?!0:iZe(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}var yZe="[object Arguments]",bZe="[object Boolean]",jZe="[object Date]",wZe="[object Error]",NZe="[object Map]",SZe="[object Number]",_Ze="[object Object]",CZe="[object RegExp]",AZe="[object Set]",kZe="[object String]",PZe="[object URL]",TZe=Array.isArray,pU=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,gU=Object.assign,EZe=Object.prototype.toString.call.bind(Object.prototype.toString);function OZe(e){var t=e.areArraysEqual,n=e.areDatesEqual,s=e.areErrorsEqual,i=e.areFunctionsEqual,a=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,h=e.areTypedArraysEqual,f=e.areUrlsEqual;return function(p,g,v){if(p===g)return!0;if(p==null||g==null)return!1;var x=typeof p;if(x!==typeof g)return!1;if(x!=="object")return x==="number"?o(p,g,v):x==="function"?i(p,g,v):!1;var y=p.constructor;if(y!==g.constructor)return!1;if(y===Object)return l(p,g,v);if(TZe(p))return t(p,g,v);if(pU!=null&&pU(p))return h(p,g,v);if(y===Date)return n(p,g,v);if(y===RegExp)return d(p,g,v);if(y===Map)return a(p,g,v);if(y===Set)return u(p,g,v);var j=EZe(p);return j===jZe?n(p,g,v):j===CZe?d(p,g,v):j===NZe?a(p,g,v):j===AZe?u(p,g,v):j===_Ze?typeof p.then!="function"&&typeof g.then!="function"&&l(p,g,v):j===PZe?f(p,g,v):j===wZe?s(p,g,v):j===yZe?l(p,g,v):j===bZe||j===SZe||j===kZe?c(p,g,v):!1}}function RZe(e){var t=e.circular,n=e.createCustomConfig,s=e.strict,i={areArraysEqual:s?eb:cZe,areDatesEqual:dZe,areErrorsEqual:uZe,areFunctionsEqual:hZe,areMapsEqual:s?cU(fU,eb):fU,areNumbersEqual:fZe,areObjectsEqual:s?eb:mZe,arePrimitiveWrappersEqual:pZe,areRegExpsEqual:gZe,areSetsEqual:s?cU(mU,eb):mU,areTypedArraysEqual:s?eb:xZe,areUrlsEqual:vZe};if(n&&(i=gU({},i,n(i))),t){var a=X2(i.areArraysEqual),o=X2(i.areMapsEqual),l=X2(i.areObjectsEqual),c=X2(i.areSetsEqual);i=gU({},i,{areArraysEqual:a,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function DZe(e){return function(t,n,s,i,a,o,l){return e(t,n,l)}}function MZe(e){var t=e.circular,n=e.comparator,s=e.createState,i=e.equals,a=e.strict;if(s)return function(c,d){var u=s(),h=u.cache,f=h===void 0?t?new WeakMap:void 0:h,m=u.meta;return n(c,d,{cache:f,equals:i,meta:m,strict:a})};if(t)return function(c,d){return n(c,d,{cache:new WeakMap,equals:i,meta:void 0,strict:a})};var o={cache:void 0,equals:i,meta:void 0,strict:a};return function(c,d){return n(c,d,o)}}var IZe=hp();hp({strict:!0});hp({circular:!0});hp({circular:!0,strict:!0});hp({createInternalComparator:function(){return ix}});hp({strict:!0,createInternalComparator:function(){return ix}});hp({circular:!0,createInternalComparator:function(){return ix}});hp({circular:!0,createInternalComparator:function(){return ix},strict:!0});function hp(e){e===void 0&&(e={});var t=e.circular,n=t===void 0?!1:t,s=e.createInternalComparator,i=e.createState,a=e.strict,o=a===void 0?!1:a,l=RZe(e),c=OZe(l),d=s?s(c):DZe(c);return MZe({circular:n,comparator:c,createState:i,equals:d,strict:o})}function LZe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function xU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function i(a){n<0&&(n=a),a-n>t?(e(a),n=-1):LZe(i)};requestAnimationFrame(s)}function ME(e){"@babel/helpers - typeof";return ME=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ME(e)}function FZe(e){return UZe(e)||VZe(e)||BZe(e)||$Ze()}function $Ze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BZe(e,t){if(e){if(typeof e=="string")return vU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vU(e,t)}}function vU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function VZe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function UZe(e){if(Array.isArray(e))return e}function qZe(){var e={},t=function(){return null},n=!1,s=function i(a){if(!n){if(Array.isArray(a)){if(!a.length)return;var o=a,l=FZe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){xU(i.bind(null,d),c);return}i(c),xU(i.bind(null,d));return}ME(a)==="object"&&(e=a,t(e)),typeof a=="function"&&a()}};return{stop:function(){n=!0},start:function(a){n=!1,s(a)},subscribe:function(a){return t=a,function(){t=function(){return null}}}}}function xj(e){"@babel/helpers - typeof";return xj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xj(e)}function yU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function bU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yU(Object(n),!0).forEach(function(s){sue(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function sue(e,t,n){return t=zZe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zZe(e){var t=HZe(e,"string");return xj(t)==="symbol"?t:String(t)}function HZe(e,t){if(xj(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(xj(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WZe=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,i){return s.filter(function(a){return i.includes(a)})})},KZe=function(t){return t},GZe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Xb=function(t,n){return Object.keys(n).reduce(function(s,i){return bU(bU({},s),{},sue({},i,t(i,n[i])))},{})},jU=function(t,n,s){return t.map(function(i){return"".concat(GZe(i)," ").concat(n,"ms ").concat(s)}).join(",")};function YZe(e,t){return ZZe(e)||QZe(e,t)||iue(e,t)||XZe()}function XZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QZe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function ZZe(e){if(Array.isArray(e))return e}function JZe(e){return rJe(e)||tJe(e)||iue(e)||eJe()}function eJe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iue(e,t){if(e){if(typeof e=="string")return IE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IE(e,t)}}function tJe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rJe(e){if(Array.isArray(e))return IE(e)}function IE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var US=1e-4,aue=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},oue=function(t,n){return t.map(function(s,i){return s*Math.pow(n,i)}).reduce(function(s,i){return s+i})},wU=function(t,n){return function(s){var i=aue(t,n);return oue(i,s)}},nJe=function(t,n){return function(s){var i=aue(t,n),a=[].concat(JZe(i.map(function(o,l){return o*l}).slice(1)),[0]);return oue(a,s)}},NU=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0],a=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,a=0,o=1,l=1;break;case"ease":i=.25,a=.1,o=.25,l=1;break;case"ease-in":i=.42,a=0,o=1,l=1;break;case"ease-out":i=.42,a=0,o=.58,l=1;break;case"ease-in-out":i=0,a=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),u=YZe(d,4);i=u[0],a=u[1],o=u[2],l=u[3]}}}var h=wU(i,o),f=wU(a,l),m=nJe(i,o),p=function(x){return x>1?1:x<0?0:x},g=function(x){for(var y=x>1?1:x,j=y,w=0;w<8;++w){var N=h(j)-y,S=m(j);if(Math.abs(N-y)<US||S<US)return f(j);j=p(j-N/S)}return f(j)};return g.isStepper=!1,g},sJe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,i=t.damping,a=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(u,h,f){var m=-(u-h)*s,p=f*a,g=f+(m-p)*l/1e3,v=f*l/1e3+u;return Math.abs(v-h)<US&&Math.abs(g)<US?[h,0]:[v,g]};return c.isStepper=!0,c.dt=l,c},iJe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return NU(i);case"spring":return sJe();default:if(i.split("(")[0]==="cubic-bezier")return NU(i)}return typeof i=="function"?i:null};function vj(e){"@babel/helpers - typeof";return vj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vj(e)}function SU(e){return lJe(e)||oJe(e)||lue(e)||aJe()}function aJe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oJe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function lJe(e){if(Array.isArray(e))return FE(e)}function _U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ro(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_U(Object(n),!0).forEach(function(s){LE(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_U(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function LE(e,t,n){return t=cJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cJe(e){var t=dJe(e,"string");return vj(t)==="symbol"?t:String(t)}function dJe(e,t){if(vj(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(vj(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uJe(e,t){return mJe(e)||fJe(e,t)||lue(e,t)||hJe()}function hJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lue(e,t){if(e){if(typeof e=="string")return FE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FE(e,t)}}function FE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function fJe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function mJe(e){if(Array.isArray(e))return e}var qS=function(t,n,s){return t+(n-t)*s},$E=function(t){var n=t.from,s=t.to;return n!==s},pJe=function e(t,n,s){var i=Xb(function(a,o){if($E(o)){var l=t(o.from,o.to,o.velocity),c=uJe(l,2),d=c[0],u=c[1];return ro(ro({},o),{},{from:d,velocity:u})}return o},n);return s<1?Xb(function(a,o){return $E(o)?ro(ro({},o),{},{velocity:qS(o.velocity,i[a].velocity,s),from:qS(o.from,i[a].from,s)}):o},n):e(t,i,s-1)};const gJe=function(e,t,n,s,i){var a=WZe(e,t),o=a.reduce(function(v,x){return ro(ro({},v),{},LE({},x,[e[x],t[x]]))},{}),l=a.reduce(function(v,x){return ro(ro({},v),{},LE({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,d,u,h=function(){return null},f=function(){return Xb(function(x,y){return y.from},l)},m=function(){return!Object.values(l).filter($E).length},p=function(x){d||(d=x);var y=x-d,j=y/n.dt;l=pJe(n,l,j),i(ro(ro(ro({},e),t),f())),d=x,m()||(c=requestAnimationFrame(h))},g=function(x){u||(u=x);var y=(x-u)/s,j=Xb(function(N,S){return qS.apply(void 0,SU(S).concat([n(y)]))},o);if(i(ro(ro(ro({},e),t),j)),y<1)c=requestAnimationFrame(h);else{var w=Xb(function(N,S){return qS.apply(void 0,SU(S).concat([n(1)]))},o);i(ro(ro(ro({},e),t),w))}};return h=n.isStepper?p:g,function(){return requestAnimationFrame(h),function(){cancelAnimationFrame(c)}}};function S0(e){"@babel/helpers - typeof";return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S0(e)}var xJe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function vJe(e,t){if(e==null)return{};var n=yJe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function yJe(e,t){if(e==null)return{};var n={},s=Object.keys(e),i,a;for(a=0;a<s.length;a++)i=s[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function rP(e){return NJe(e)||wJe(e)||jJe(e)||bJe()}function bJe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jJe(e,t){if(e){if(typeof e=="string")return BE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BE(e,t)}}function wJe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function NJe(e){if(Array.isArray(e))return BE(e)}function BE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function CU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ed(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CU(Object(n),!0).forEach(function(s){jb(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jb(e,t,n){return t=cue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Je(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,cue(s.key),s)}}function CJe(e,t,n){return t&&_Je(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cue(e){var t=AJe(e,"string");return S0(t)==="symbol"?t:String(t)}function AJe(e,t){if(S0(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(S0(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VE(e,t)}function VE(e,t){return VE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},VE(e,t)}function PJe(e){var t=TJe();return function(){var s=zS(e),i;if(t){var a=zS(this).constructor;i=Reflect.construct(s,arguments,a)}else i=s.apply(this,arguments);return UE(this,i)}}function UE(e,t){if(t&&(S0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qE(e)}function qE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TJe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zS(e){return zS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zS(e)}var dh=function(e){kJe(n,e);var t=PJe(n);function n(s,i){var a;SJe(this,n),a=t.call(this,s,i);var o=a.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,h=o.steps,f=o.children,m=o.duration;if(a.handleStyleChange=a.handleStyleChange.bind(qE(a)),a.changeStyle=a.changeStyle.bind(qE(a)),!l||m<=0)return a.state={style:{}},typeof f=="function"&&(a.state={style:u}),UE(a);if(h&&h.length)a.state={style:h[0].style};else if(d){if(typeof f=="function")return a.state={style:d},UE(a);a.state={style:c?jb({},c,d):d}}else a.state={style:{}};return a}return CJe(n,[{key:"componentDidMount",value:function(){var i=this.props,a=i.isActive,o=i.canBegin;this.mounted=!0,!(!a||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var a=this.props,o=a.isActive,l=a.canBegin,c=a.attributeName,d=a.shouldReAnimate,u=a.to,h=a.from,f=this.state.style;if(l){if(!o){var m={style:c?jb({},c,u):u};this.state&&f&&(c&&f[c]!==u||!c&&f!==u)&&this.setState(m);return}if(!(IZe(i.to,u)&&i.canBegin&&i.isActive)){var p=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=p||d?h:i.to;if(this.state&&f){var v={style:c?jb({},c,g):g};(c&&f[c]!==g||!c&&f!==g)&&this.setState(v)}this.runAnimation(Ed(Ed({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var a=this,o=i.from,l=i.to,c=i.duration,d=i.easing,u=i.begin,h=i.onAnimationEnd,f=i.onAnimationStart,m=gJe(o,l,iJe(d),c,this.changeStyle),p=function(){a.stopJSAnimation=m()};this.manager.start([f,u,p,c,h])}},{key:"runStepAnimation",value:function(i){var a=this,o=i.steps,l=i.begin,c=i.onAnimationStart,d=o[0],u=d.style,h=d.duration,f=h===void 0?0:h,m=function(g,v,x){if(x===0)return g;var y=v.duration,j=v.easing,w=j===void 0?"ease":j,N=v.style,S=v.properties,T=v.onAnimationEnd,C=x>0?o[x-1]:v,A=S||Object.keys(N);if(typeof w=="function"||w==="spring")return[].concat(rP(g),[a.runJSAnimation.bind(a,{from:C.style,to:N,duration:y,easing:w}),y]);var R=jU(A,y,w),k=Ed(Ed(Ed({},C.style),N),{},{transition:R});return[].concat(rP(g),[k,y,T]).filter(KZe)};return this.manager.start([c].concat(rP(o.reduce(m,[u,Math.max(f,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=qZe());var a=i.begin,o=i.duration,l=i.attributeName,c=i.to,d=i.easing,u=i.onAnimationStart,h=i.onAnimationEnd,f=i.steps,m=i.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(i);return}if(f.length>1){this.runStepAnimation(i);return}var g=l?jb({},l,c):c,v=jU(Object.keys(g),o,d);p.start([u,a,Ed(Ed({},g),{},{transition:v}),o,h])}},{key:"render",value:function(){var i=this.props,a=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=vJe(i,xJe),d=b.Children.count(a),u=this.state.style;if(typeof a=="function")return a(u);if(!l||d===0||o<=0)return a;var h=function(m){var p=m.props,g=p.style,v=g===void 0?{}:g,x=p.className,y=b.cloneElement(m,Ed(Ed({},c),{},{style:Ed(Ed({},v),u),className:x}));return y};return d===1?h(b.Children.only(a)):Ae.createElement("div",null,b.Children.map(a,function(f){return h(f)}))}}]),n}(b.PureComponent);dh.displayName="Animate";dh.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};dh.propTypes={from:Yn.oneOfType([Yn.object,Yn.string]),to:Yn.oneOfType([Yn.object,Yn.string]),attributeName:Yn.string,duration:Yn.number,begin:Yn.number,easing:Yn.oneOfType([Yn.string,Yn.func]),steps:Yn.arrayOf(Yn.shape({duration:Yn.number.isRequired,style:Yn.object.isRequired,easing:Yn.oneOfType([Yn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Yn.func]),properties:Yn.arrayOf("string"),onAnimationEnd:Yn.func})),children:Yn.oneOfType([Yn.node,Yn.func]),isActive:Yn.bool,canBegin:Yn.bool,onAnimationEnd:Yn.func,shouldReAnimate:Yn.bool,onAnimationStart:Yn.func,onAnimationReStart:Yn.func};function yj(e){"@babel/helpers - typeof";return yj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yj(e)}function HS(){return HS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},HS.apply(this,arguments)}function EJe(e,t){return MJe(e)||DJe(e,t)||RJe(e,t)||OJe()}function OJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RJe(e,t){if(e){if(typeof e=="string")return AU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AU(e,t)}}function AU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function DJe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function MJe(e){if(Array.isArray(e))return e}function kU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function PU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kU(Object(n),!0).forEach(function(s){IJe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function IJe(e,t,n){return t=LJe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LJe(e){var t=FJe(e,"string");return yj(t)=="symbol"?t:t+""}function FJe(e,t){if(yj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(yj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TU=function(t,n,s,i,a){var o=Math.min(Math.abs(s)/2,Math.abs(i)/2),l=i>=0?1:-1,c=s>=0?1:-1,d=i>=0&&s>=0||i<0&&s<0?1:0,u;if(o>0&&a instanceof Array){for(var h=[0,0,0,0],f=0,m=4;f<m;f++)h[f]=a[f]>o?o:a[f];u="M".concat(t,",").concat(n+l*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(d,",").concat(t+c*h[0],",").concat(n)),u+="L ".concat(t+s-c*h[1],",").concat(n),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*h[1])),u+="L ".concat(t+s,",").concat(n+i-l*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(d,`,
        `).concat(t+s-c*h[2],",").concat(n+i)),u+="L ".concat(t+c*h[3],",").concat(n+i),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+i-l*h[3])),u+="Z"}else if(o>0&&a===+a&&a>0){var p=Math.min(o,a);u="M ".concat(t,",").concat(n+l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t+c*p,",").concat(n,`
            L `).concat(t+s-c*p,",").concat(n,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*p,`
            L `).concat(t+s,",").concat(n+i-l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t+s-c*p,",").concat(n+i,`
            L `).concat(t+c*p,",").concat(n+i,`
            A `).concat(p,",").concat(p,",0,0,").concat(d,",").concat(t,",").concat(n+i-l*p," Z")}else u="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(i," h ").concat(-s," Z");return u},$Je=function(t,n){if(!t||!n)return!1;var s=t.x,i=t.y,a=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(a,a+l),u=Math.max(a,a+l),h=Math.min(o,o+c),f=Math.max(o,o+c);return s>=d&&s<=u&&i>=h&&i<=f}return!1},BJe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},DM=function(t){var n=PU(PU({},BJe),t),s=b.useRef(),i=b.useState(-1),a=EJe(i,2),o=a[0],l=a[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var w=s.current.getTotalLength();w&&l(w)}catch{}},[]);var c=n.x,d=n.y,u=n.width,h=n.height,f=n.radius,m=n.className,p=n.animationEasing,g=n.animationDuration,v=n.animationBegin,x=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||u===0||h===0)return null;var j=on("recharts-rectangle",m);return y?Ae.createElement(dh,{canBegin:o>0,from:{width:u,height:h,x:c,y:d},to:{width:u,height:h,x:c,y:d},duration:g,animationEasing:p,isActive:y},function(w){var N=w.width,S=w.height,T=w.x,C=w.y;return Ae.createElement(dh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:x,easing:p},Ae.createElement("path",HS({},Mr(n,!0),{className:j,d:TU(T,C,N,S,f),ref:s})))}):Ae.createElement("path",HS({},Mr(n,!0),{className:j,d:TU(c,d,u,h,f)}))},VJe=["points","className","baseLinePoints","connectNulls"];function Jx(){return Jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jx.apply(this,arguments)}function UJe(e,t){if(e==null)return{};var n=qJe(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function qJe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function EU(e){return KJe(e)||WJe(e)||HJe(e)||zJe()}function zJe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HJe(e,t){if(e){if(typeof e=="string")return zE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zE(e,t)}}function WJe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KJe(e){if(Array.isArray(e))return zE(e)}function zE(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var OU=function(t){return t&&t.x===+t.x&&t.y===+t.y},GJe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){OU(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),OU(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Qb=function(t,n){var s=GJe(t);n&&(s=[s.reduce(function(a,o){return[].concat(EU(a),EU(o))},[])]);var i=s.map(function(a){return a.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(i,"Z"):i},YJe=function(t,n,s){var i=Qb(t,s);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Qb(n.reverse(),s).slice(1))},XJe=function(t){var n=t.points,s=t.className,i=t.baseLinePoints,a=t.connectNulls,o=UJe(t,VJe);if(!n||!n.length)return null;var l=on("recharts-polygon",s);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",d=YJe(n,i,a);return Ae.createElement("g",{className:l},Ae.createElement("path",Jx({},Mr(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Ae.createElement("path",Jx({},Mr(o,!0),{fill:"none",d:Qb(n,a)})):null,c?Ae.createElement("path",Jx({},Mr(o,!0),{fill:"none",d:Qb(i,a)})):null)}var u=Qb(n,a);return Ae.createElement("path",Jx({},Mr(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},HE.apply(this,arguments)}var uA=function(t){var n=t.cx,s=t.cy,i=t.r,a=t.className,o=on("recharts-dot",a);return n===+n&&s===+s&&i===+i?Ae.createElement("circle",HE({},Mr(t,!1),uS(t),{className:o,cx:n,cy:s,r:i})):null};function bj(e){"@babel/helpers - typeof";return bj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bj(e)}var QJe=["x","y","top","left","width","height","className"];function WE(){return WE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},WE.apply(this,arguments)}function RU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ZJe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RU(Object(n),!0).forEach(function(s){JJe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function JJe(e,t,n){return t=eet(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eet(e){var t=tet(e,"string");return bj(t)=="symbol"?t:t+""}function tet(e,t){if(bj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(bj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ret(e,t){if(e==null)return{};var n=net(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function net(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var set=function(t,n,s,i,a,o){return"M".concat(t,",").concat(a,"v").concat(i,"M").concat(o,",").concat(n,"h").concat(s)},iet=function(t){var n=t.x,s=n===void 0?0:n,i=t.y,a=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,h=u===void 0?0:u,f=t.height,m=f===void 0?0:f,p=t.className,g=ret(t,QJe),v=ZJe({x:s,y:a,top:l,left:d,width:h,height:m},g);return!qt(s)||!qt(a)||!qt(h)||!qt(m)||!qt(l)||!qt(d)?null:Ae.createElement("path",WE({},Mr(v,!0),{className:on("recharts-cross",p),d:set(s,a,h,m,l,d)}))},aet=aA,oet=jde,cet=ph;function det(e,t){return e&&e.length?aet(e,cet(t),oet):void 0}var uet=det;const het=ts(uet);var fet=aA,met=ph,pet=wde;function get(e,t){return e&&e.length?fet(e,met(t),pet):void 0}var xet=get;const vet=ts(xet);var yet=["cx","cy","angle","ticks","axisLine"],bet=["ticks","tick","angle","tickFormatter","stroke"];function _0(e){"@babel/helpers - typeof";return _0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_0(e)}function Zb(){return Zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Zb.apply(this,arguments)}function DU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DU(Object(n),!0).forEach(function(s){hA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function MU(e,t){if(e==null)return{};var n=jet(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jet(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function wet(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IU(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,uue(s.key),s)}}function Net(e,t,n){return t&&IU(e.prototype,t),n&&IU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _et(e,t,n){return t=WS(t),Cet(e,due()?Reflect.construct(t,n||[],WS(e).constructor):t.apply(e,n))}function Cet(e,t){if(t&&(_0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aet(e)}function Aet(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function due(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(due=function(){return!!e})()}function WS(e){return WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},WS(e)}function ket(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KE(e,t)}function KE(e,t){return KE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},KE(e,t)}function hA(e,t,n){return t=uue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uue(e){var t=Pet(e,"string");return _0(t)=="symbol"?t:t+""}function Pet(e,t){if(_0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(_0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fA=function(e){function t(){return wet(this,t),_et(this,t,arguments)}return ket(t,e),Net(t,[{key:"getTickValueCoord",value:function(s){var i=s.coordinate,a=this.props,o=a.angle,l=a.cx,c=a.cy;return Us(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,i;switch(s){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=het(l,function(u){return u.coordinate||0}),d=vet(l,function(u){return u.coordinate||0});return{cx:i,cy:a,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=MU(s,yet),u=l.reduce(function(p,g){return[Math.min(p[0],g.coordinate),Math.max(p[1],g.coordinate)]},[1/0,-1/0]),h=Us(i,a,u[0],o),f=Us(i,a,u[1],o),m=Ep(Ep(Ep({},Mr(d,!1)),{},{fill:"none"},Mr(c,!1)),{},{x1:h.x,y1:h.y,x2:f.x,y2:f.y});return Ae.createElement("line",Zb({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,d=i.stroke,u=MU(i,bet),h=this.getTickTextAnchor(),f=Mr(u,!1),m=Mr(o,!1),p=a.map(function(g,v){var x=s.getTickValueCoord(g),y=Ep(Ep(Ep(Ep({textAnchor:h,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},f),{},{stroke:"none",fill:d},m),{},{index:v},x),{},{payload:g});return Ae.createElement(Un,Zb({className:on("recharts-polar-radius-axis-tick",Xde(o)),key:"tick-".concat(g.coordinate)},Fg(s.props,g,v)),t.renderTickItem(o,y,c?c(g.value,v):g.value))});return Ae.createElement(Un,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.axisLine,o=s.tick;return!i||!i.length?null:Ae.createElement(Un,{className:on("recharts-polar-radius-axis",this.props.className)},a&&this.renderAxisLine(),o&&this.renderTicks(),La.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return Ae.isValidElement(s)?o=Ae.cloneElement(s,i):Xr(s)?o=s(i):o=Ae.createElement($g,Zb({},i,{className:"recharts-polar-radius-axis-tick-value"}),a),o}}])}(b.PureComponent);hA(fA,"displayName","PolarRadiusAxis");hA(fA,"axisType","radiusAxis");hA(fA,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function C0(e){"@babel/helpers - typeof";return C0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C0(e)}function Wp(){return Wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wp.apply(this,arguments)}function LU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LU(Object(n),!0).forEach(function(s){mA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Tet(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FU(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fue(s.key),s)}}function Eet(e,t,n){return t&&FU(e.prototype,t),n&&FU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Oet(e,t,n){return t=KS(t),Ret(e,hue()?Reflect.construct(t,n||[],KS(e).constructor):t.apply(e,n))}function Ret(e,t){if(t&&(C0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Det(e)}function Det(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hue=function(){return!!e})()}function KS(e){return KS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KS(e)}function Met(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GE(e,t)}function GE(e,t){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},GE(e,t)}function mA(e,t,n){return t=fue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fue(e){var t=Iet(e,"string");return C0(t)=="symbol"?t:t+""}function Iet(e,t){if(C0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(C0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Let=Math.PI/180,$U=1e-5,pA=function(e){function t(){return Tet(this,t),Oet(this,t,arguments)}return Met(t,e),Eet(t,[{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.cx,o=i.cy,l=i.radius,c=i.orientation,d=i.tickSize,u=d||8,h=Us(a,o,l,s.coordinate),f=Us(a,o,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:h.x,y1:h.y,x2:f.x,y2:f.y}}},{key:"getTickTextAnchor",value:function(s){var i=this.props.orientation,a=Math.cos(-s.coordinate*Let),o;return a>$U?o=i==="outer"?"start":"end":a<-$U?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.cx,a=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=Op(Op({},Mr(this.props,!1)),{},{fill:"none"},Mr(l,!1));if(c==="circle")return Ae.createElement(uA,Wp({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:a,r:o}));var u=this.props.ticks,h=u.map(function(f){return Us(i,a,o,f.coordinate)});return Ae.createElement(XJe,Wp({className:"recharts-polar-angle-axis-line"},d,{points:h}))}},{key:"renderTicks",value:function(){var s=this,i=this.props,a=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,d=i.stroke,u=Mr(this.props,!1),h=Mr(o,!1),f=Op(Op({},u),{},{fill:"none"},Mr(l,!1)),m=a.map(function(p,g){var v=s.getTickLineCoord(p),x=s.getTickTextAnchor(p),y=Op(Op(Op({textAnchor:x},u),{},{stroke:"none",fill:d},h),{},{index:g,payload:p,x:v.x2,y:v.y2});return Ae.createElement(Un,Wp({className:on("recharts-polar-angle-axis-tick",Xde(o)),key:"tick-".concat(p.coordinate)},Fg(s.props,p,g)),l&&Ae.createElement("line",Wp({className:"recharts-polar-angle-axis-tick-line"},f,v)),o&&t.renderTickItem(o,y,c?c(p.value,g):p.value))});return Ae.createElement(Un,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var s=this.props,i=s.ticks,a=s.radius,o=s.axisLine;return a<=0||!i||!i.length?null:Ae.createElement(Un,{className:on("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,i,a){var o;return Ae.isValidElement(s)?o=Ae.cloneElement(s,i):Xr(s)?o=s(i):o=Ae.createElement($g,Wp({},i,{className:"recharts-polar-angle-axis-tick-value"}),a),o}}])}(b.PureComponent);mA(pA,"displayName","PolarAngleAxis");mA(pA,"axisType","angleAxis");mA(pA,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var Fet=xce,$et=Fet(Object.getPrototypeOf,Object),Bet=$et,Vet=Nf,Uet=Bet,qet=Sf,zet="[object Object]",Het=Function.prototype,Wet=Object.prototype,mue=Het.toString,Ket=Wet.hasOwnProperty,Get=mue.call(Object);function Yet(e){if(!qet(e)||Vet(e)!=zet)return!1;var t=Uet(e);if(t===null)return!0;var n=Ket.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&mue.call(n)==Get}var Xet=Yet;const Qet=ts(Xet);var Zet=Nf,Jet=Sf,ett="[object Boolean]";function ttt(e){return e===!0||e===!1||Jet(e)&&Zet(e)==ett}var rtt=ttt;const ntt=ts(rtt);function jj(e){"@babel/helpers - typeof";return jj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jj(e)}function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},GS.apply(this,arguments)}function stt(e,t){return ltt(e)||ott(e,t)||att(e,t)||itt()}function itt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function att(e,t){if(e){if(typeof e=="string")return BU(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BU(e,t)}}function BU(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function ott(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function ltt(e){if(Array.isArray(e))return e}function VU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function UU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?VU(Object(n),!0).forEach(function(s){ctt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ctt(e,t,n){return t=dtt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dtt(e){var t=utt(e,"string");return jj(t)=="symbol"?t:t+""}function utt(e,t){if(jj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(jj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qU=function(t,n,s,i,a){var o=s-i,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+a),l+="L ".concat(t+s-o/2-i,",").concat(n+a),l+="L ".concat(t,",").concat(n," Z"),l},htt={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ftt=function(t){var n=UU(UU({},htt),t),s=b.useRef(),i=b.useState(-1),a=stt(i,2),o=a[0],l=a[1];b.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var j=s.current.getTotalLength();j&&l(j)}catch{}},[]);var c=n.x,d=n.y,u=n.upperWidth,h=n.lowerWidth,f=n.height,m=n.className,p=n.animationEasing,g=n.animationDuration,v=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||h!==+h||f!==+f||u===0&&h===0||f===0)return null;var y=on("recharts-trapezoid",m);return x?Ae.createElement(dh,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:f,x:c,y:d},to:{upperWidth:u,lowerWidth:h,height:f,x:c,y:d},duration:g,animationEasing:p,isActive:x},function(j){var w=j.upperWidth,N=j.lowerWidth,S=j.height,T=j.x,C=j.y;return Ae.createElement(dh,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:p},Ae.createElement("path",GS({},Mr(n,!0),{className:y,d:qU(T,C,w,N,S),ref:s})))}):Ae.createElement("g",null,Ae.createElement("path",GS({},Mr(n,!0),{className:y,d:qU(c,d,u,h,f)})))},mtt=["option","shapeType","propTransformer","activeClassName","isActive"];function wj(e){"@babel/helpers - typeof";return wj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wj(e)}function ptt(e,t){if(e==null)return{};var n=gtt(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function gtt(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function zU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function YS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zU(Object(n),!0).forEach(function(s){xtt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function xtt(e,t,n){return t=vtt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vtt(e){var t=ytt(e,"string");return wj(t)=="symbol"?t:t+""}function ytt(e,t){if(wj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(wj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function btt(e,t){return YS(YS({},t),e)}function jtt(e,t){return e==="symbols"}function HU(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Ae.createElement(DM,n);case"trapezoid":return Ae.createElement(ftt,n);case"sector":return Ae.createElement(Jde,n);case"symbols":if(jtt(t))return Ae.createElement(J6,n);break;default:return null}}function wtt(e){return b.isValidElement(e)?e.props:e}function pue(e){var t=e.option,n=e.shapeType,s=e.propTransformer,i=s===void 0?btt:s,a=e.activeClassName,o=a===void 0?"recharts-active-shape":a,l=e.isActive,c=ptt(e,mtt),d;if(b.isValidElement(t))d=b.cloneElement(t,YS(YS({},c),wtt(t)));else if(Xr(t))d=t(c);else if(Qet(t)&&!ntt(t)){var u=i(t,c);d=Ae.createElement(HU,{shapeType:n,elementProps:u})}else{var h=c;d=Ae.createElement(HU,{shapeType:n,elementProps:h})}return l?Ae.createElement(Un,{className:o},d):d}function gA(e,t){return t!=null&&"trapezoids"in e.props}function xA(e,t){return t!=null&&"sectors"in e.props}function Nj(e,t){return t!=null&&"points"in e.props}function Ntt(e,t){var n,s,i=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,a=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return i&&a}function Stt(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function _tt(e,t){var n=e.x===t.x,s=e.y===t.y,i=e.z===t.z;return n&&s&&i}function Ctt(e,t){var n;return gA(e,t)?n=Ntt:xA(e,t)?n=Stt:Nj(e,t)&&(n=_tt),n}function Att(e,t){var n;return gA(e,t)?n="trapezoids":xA(e,t)?n="sectors":Nj(e,t)&&(n="points"),n}function ktt(e,t){if(gA(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(xA(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Nj(e,t)?t.payload:{}}function Ptt(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,i=Att(n,t),a=ktt(n,t),o=s.filter(function(c,d){var u=yw(a,c),h=n.props[i].filter(function(p){var g=Ctt(n,t);return g(p,t)}),f=n.props[i].indexOf(h[h.length-1]),m=d===f;return u&&m}),l=s.indexOf(o[o.length-1]);return l}var VN;function A0(e){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A0(e)}function ev(){return ev=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ev.apply(this,arguments)}function WU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Fs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WU(Object(n),!0).forEach(function(s){rd(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ttt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KU(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,xue(s.key),s)}}function Ett(e,t,n){return t&&KU(e.prototype,t),n&&KU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ott(e,t,n){return t=XS(t),Rtt(e,gue()?Reflect.construct(t,n||[],XS(e).constructor):t.apply(e,n))}function Rtt(e,t){if(t&&(A0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dtt(e)}function Dtt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gue=function(){return!!e})()}function XS(e){return XS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},XS(e)}function Mtt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&YE(e,t)}function YE(e,t){return YE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},YE(e,t)}function rd(e,t,n){return t=xue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xue(e){var t=Itt(e,"string");return A0(t)=="symbol"?t:t+""}function Itt(e,t){if(A0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(A0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gh=function(e){function t(n){var s;return Ttt(this,t),s=Ott(this,t,[n]),rd(s,"pieRef",null),rd(s,"sectorRefs",[]),rd(s,"id",cy("recharts-pie-")),rd(s,"handleAnimationEnd",function(){var i=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Xr(i)&&i()}),rd(s,"handleAnimationStart",function(){var i=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Xr(i)&&i()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return Mtt(t,e),Ett(t,[{key:"isActiveIndex",value:function(s){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(s)!==-1:s===i}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.label,l=a.labelLine,c=a.dataKey,d=a.valueKey,u=Mr(this.props,!1),h=Mr(o,!1),f=Mr(l,!1),m=o&&o.offsetRadius||20,p=s.map(function(g,v){var x=(g.startAngle+g.endAngle)/2,y=Us(g.cx,g.cy,g.outerRadius+m,x),j=Fs(Fs(Fs(Fs({},u),g),{},{stroke:"none"},h),{},{index:v,textAnchor:t.getTextAnchor(y.x,g.cx)},y),w=Fs(Fs(Fs(Fs({},u),g),{},{fill:"none",stroke:g.fill},f),{},{index:v,points:[Us(g.cx,g.cy,g.outerRadius,x),y]}),N=c;return sn(c)&&sn(d)?N="value":sn(c)&&(N=d),Ae.createElement(Un,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,w,"line"),t.renderLabelItem(o,j,ja(g,N)))});return Ae.createElement(Un,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(s){var i=this,a=this.props,o=a.activeShape,l=a.blendStroke,c=a.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var h=i.isActiveIndex(u),f=c&&i.hasActiveIndex()?c:null,m=h?o:f,p=Fs(Fs({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Ae.createElement(Un,ev({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Fg(i.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),Ae.createElement(pue,ev({option:m,isActive:h,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,i=this.props,a=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,d=i.animationEasing,u=i.animationId,h=this.state,f=h.prevSectors,m=h.prevIsAnimationActive;return Ae.createElement(dh,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var g=p.t,v=[],x=a&&a[0],y=x.startAngle;return a.forEach(function(j,w){var N=f&&f[w],S=w>0?xc(j,"paddingAngle",0):0;if(N){var T=ic(N.endAngle-N.startAngle,j.endAngle-j.startAngle),C=Fs(Fs({},j),{},{startAngle:y+S,endAngle:y+T(g)+S});v.push(C),y=C.endAngle}else{var A=j.endAngle,R=j.startAngle,k=ic(0,A-R),O=k(g),$=Fs(Fs({},j),{},{startAngle:y+S,endAngle:y+O+S});v.push($),y=$.endAngle}}),Ae.createElement(Un,null,s.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(s){var i=this;s.onkeydown=function(a){if(!a.altKey)switch(a.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,i=s.sectors,a=s.isAnimationActive,o=this.state.prevSectors;return a&&i&&i.length&&(!o||!yw(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,i=this.props,a=i.hide,o=i.sectors,l=i.className,c=i.label,d=i.cx,u=i.cy,h=i.innerRadius,f=i.outerRadius,m=i.isAnimationActive,p=this.state.isAnimationFinished;if(a||!o||!o.length||!qt(d)||!qt(u)||!qt(h)||!qt(f))return null;var g=on("recharts-pie",l);return Ae.createElement(Un,{tabIndex:this.props.rootTabIndex,className:g,ref:function(x){s.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),La.renderCallByParent(this.props,null,!1),(!m||p)&&tf.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return i.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:s.sectors!==i.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,i){return s>i?"start":s<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,i,a){if(Ae.isValidElement(s))return Ae.cloneElement(s,i);if(Xr(s))return s(i);var o=on("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return Ae.createElement(VS,ev({},i,{key:a,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,i,a){if(Ae.isValidElement(s))return Ae.cloneElement(s,i);var o=a;if(Xr(s)&&(o=s(i),Ae.isValidElement(o)))return o;var l=on("recharts-pie-label-text",typeof s!="boolean"&&!Xr(s)?s.className:"");return Ae.createElement($g,ev({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(b.PureComponent);VN=gh;rd(gh,"displayName","Pie");rd(gh,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!rx.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});rd(gh,"parseDeltaAngle",function(e,t){var n=el(t-e),s=Math.min(Math.abs(t-e),360);return n*s});rd(gh,"getRealPieData",function(e){var t=e.data,n=e.children,s=Mr(e,!1),i=vc(n,y0);return t&&t.length?t.map(function(a,o){return Fs(Fs(Fs({payload:a},s),a),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(a){return Fs(Fs({},s),a.props)}):[]});rd(gh,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,i=t.width,a=t.height,o=Yde(i,a),l=s+tl(e.cx,i,i/2),c=n+tl(e.cy,a,a/2),d=tl(e.innerRadius,o,0),u=tl(e.outerRadius,o,o*.8),h=e.maxRadius||Math.sqrt(i*i+a*a)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:h}});rd(gh,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?Fs(Fs({},t.type.defaultProps),t.props):t.props,i=VN.getRealPieData(s);if(!i||!i.length)return null;var a=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,h=s.valueKey,f=s.tooltipType,m=Math.abs(s.minAngle),p=VN.parseCoordinateOfPie(s,n),g=VN.parseDeltaAngle(o,l),v=Math.abs(g),x=d;sn(d)&&sn(h)?(tu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):sn(d)&&(tu(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=h);var y=i.filter(function(C){return ja(C,x,0)!==0}).length,j=(v>=360?y:y-1)*c,w=v-y*m-j,N=i.reduce(function(C,A){var R=ja(A,x,0);return C+(qt(R)?R:0)},0),S;if(N>0){var T;S=i.map(function(C,A){var R=ja(C,x,0),k=ja(C,u,A),O=(qt(R)?R:0)/N,$;A?$=T.endAngle+el(g)*c*(R!==0?1:0):$=o;var D=$+el(g)*((R!==0?m:0)+O*w),q=($+D)/2,M=(p.innerRadius+p.outerRadius)/2,L=[{name:k,value:R,payload:C,dataKey:x,type:f}],V=Us(p.cx,p.cy,M,q);return T=Fs(Fs(Fs({percent:O,cornerRadius:a,name:k,tooltipPayload:L,midAngle:q,middleRadius:M,tooltipPosition:V},C),p),{},{value:ja(C,x),startAngle:$,endAngle:D,payload:C,paddingAngle:el(g)*c}),T})}return Fs(Fs({},p),{},{sectors:S,data:i})});var Ltt=Math.ceil,Ftt=Math.max;function $tt(e,t,n,s){for(var i=-1,a=Ftt(Ltt((t-e)/(n||1)),0),o=Array(a);a--;)o[s?a:++i]=e,e+=n;return o}var Btt=$tt,Vtt=Ice,GU=1/0,Utt=17976931348623157e292;function qtt(e){if(!e)return e===0?e:0;if(e=Vtt(e),e===GU||e===-GU){var t=e<0?-1:1;return t*Utt}return e===e?e:0}var vue=qtt,ztt=Btt,Htt=JC,nP=vue;function Wtt(e){return function(t,n,s){return s&&typeof s!="number"&&Htt(t,n,s)&&(n=s=void 0),t=nP(t),n===void 0?(n=t,t=0):n=nP(n),s=s===void 0?t<n?1:-1:nP(s),ztt(t,n,s,e)}}var Ktt=Wtt,Gtt=Ktt,Ytt=Gtt(),Xtt=Ytt;const QS=ts(Xtt);function Sj(e){"@babel/helpers - typeof";return Sj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sj(e)}function YU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function XU(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YU(Object(n),!0).forEach(function(s){yue(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yue(e,t,n){return t=Qtt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qtt(e){var t=Ztt(e,"string");return Sj(t)=="symbol"?t:t+""}function Ztt(e,t){if(Sj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Sj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jtt=["Webkit","Moz","O","ms"],ert=function(t,n){var s=t.replace(/(\w)/,function(a){return a.toUpperCase()}),i=Jtt.reduce(function(a,o){return XU(XU({},a),{},yue({},o+s,n))},{});return i[t]=n,i};function k0(e){"@babel/helpers - typeof";return k0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k0(e)}function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ZS.apply(this,arguments)}function QU(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function sP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QU(Object(n),!0).forEach(function(s){Zl(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QU(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function trt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZU(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,jue(s.key),s)}}function rrt(e,t,n){return t&&ZU(e.prototype,t),n&&ZU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nrt(e,t,n){return t=JS(t),srt(e,bue()?Reflect.construct(t,n||[],JS(e).constructor):t.apply(e,n))}function srt(e,t){if(t&&(k0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return irt(e)}function irt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bue=function(){return!!e})()}function JS(e){return JS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},JS(e)}function art(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&XE(e,t)}function XE(e,t){return XE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},XE(e,t)}function Zl(e,t,n){return t=jue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jue(e){var t=ort(e,"string");return k0(t)=="symbol"?t:t+""}function ort(e,t){if(k0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(k0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var lrt=function(t){var n=t.data,s=t.startIndex,i=t.endIndex,a=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=Gb().domain(QS(0,c)).range([a,a+o-l]),u=d.domain().map(function(h){return d(h)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(i),scale:d,scaleValues:u}},JU=function(t){return t.changedTouches&&!!t.changedTouches.length},P0=function(e){function t(n){var s;return trt(this,t),s=nrt(this,t,[n]),Zl(s,"handleDrag",function(i){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(i):s.state.isSlideMoving&&s.handleSlideDrag(i)}),Zl(s,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&s.handleDrag(i.changedTouches[0])}),Zl(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=s.props,a=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:a,startIndex:l})}),s.detachDragEndListener()}),Zl(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Zl(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Zl(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Zl(s,"handleSlideDragStart",function(i){var a=JU(i)?i.changedTouches[0]:i;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:a.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return art(t,e),rrt(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var i=s.startX,a=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,h=Math.min(i,a),f=Math.max(i,a),m=t.getIndexInRange(o,h),p=t.getIndexInRange(o,f);return{startIndex:m-m%c,endIndex:p===u?u:p-p%c}}},{key:"getTextOfTick",value:function(s){var i=this.props,a=i.data,o=i.tickFormatter,l=i.dataKey,c=ja(a[s],l,s);return Xr(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var i=this.state,a=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,d=c.x,u=c.width,h=c.travellerWidth,f=c.startIndex,m=c.endIndex,p=c.onChange,g=s.pageX-a;g>0?g=Math.min(g,d+u-h-l,d+u-h-o):g<0&&(g=Math.max(g,d-o,d-l));var v=this.getIndex({startX:o+g,endX:l+g});(v.startIndex!==f||v.endIndex!==m)&&p&&p(v),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,i){var a=JU(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:a.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var i=this.state,a=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,d=this.state[o],u=this.props,h=u.x,f=u.width,m=u.travellerWidth,p=u.onChange,g=u.gap,v=u.data,x={startX:this.state.startX,endX:this.state.endX},y=s.pageX-a;y>0?y=Math.min(y,h+f-m-d):y<0&&(y=Math.max(y,h-d)),x[o]=d+y;var j=this.getIndex(x),w=j.startIndex,N=j.endIndex,S=function(){var C=v.length-1;return o==="startX"&&(l>c?w%g===0:N%g===0)||l<c&&N===C||o==="endX"&&(l>c?N%g===0:w%g===0)||l>c&&N===C};this.setState(Zl(Zl({},o,d+y),"brushMoveStartX",s.pageX),function(){p&&S()&&p(j)})}},{key:"handleTravellerMoveKeyboard",value:function(s,i){var a=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[i],h=l.indexOf(u);if(h!==-1){var f=h+s;if(!(f===-1||f>=l.length)){var m=l[f];i==="startX"&&m>=d||i==="endX"&&m<=c||this.setState(Zl({},i,m),function(){a.props.onChange(a.getIndex({startX:a.state.startX,endX:a.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return Ae.createElement("rect",{stroke:d,fill:c,x:i,y:a,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,h=b.Children.only(d);return h?Ae.cloneElement(h,{x:i,y:a,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,i){var a,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,h=c.height,f=c.traveller,m=c.ariaLabel,p=c.data,g=c.startIndex,v=c.endIndex,x=Math.max(s,this.props.x),y=sP(sP({},Mr(this.props,!1)),{},{x,y:d,width:u,height:h}),j=m||"Min value: ".concat((a=p[g])===null||a===void 0?void 0:a.name,", Max value: ").concat((o=p[v])===null||o===void 0?void 0:o.name);return Ae.createElement(Un,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(f,y))}},{key:"renderSlide",value:function(s,i){var a=this.props,o=a.y,l=a.height,c=a.stroke,d=a.travellerWidth,u=Math.min(s,i)+d,h=Math.max(Math.abs(i-s)-d,0);return Ae.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:h,height:l})}},{key:"renderText",value:function(){var s=this.props,i=s.startIndex,a=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,h=u.startX,f=u.endX,m=5,p={pointerEvents:"none",fill:d};return Ae.createElement(Un,{className:"recharts-brush-texts"},Ae.createElement($g,ZS({textAnchor:"end",verticalAnchor:"middle",x:Math.min(h,f)-m,y:o+l/2},p),this.getTextOfTick(i)),Ae.createElement($g,ZS({textAnchor:"start",verticalAnchor:"middle",x:Math.max(h,f)+c+m,y:o+l/2},p),this.getTextOfTick(a)))}},{key:"render",value:function(){var s=this.props,i=s.data,a=s.className,o=s.children,l=s.x,c=s.y,d=s.width,u=s.height,h=s.alwaysShowText,f=this.state,m=f.startX,p=f.endX,g=f.isTextActive,v=f.isSlideMoving,x=f.isTravellerMoving,y=f.isTravellerFocused;if(!i||!i.length||!qt(l)||!qt(c)||!qt(d)||!qt(u)||d<=0||u<=0)return null;var j=on("recharts-brush",a),w=Ae.Children.count(o)===1,N=ert("userSelect","none");return Ae.createElement(Un,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(m,p),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(p,"endX"),(g||v||x||y||h)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var i=s.x,a=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(a+l/2)-1;return Ae.createElement(Ae.Fragment,null,Ae.createElement("rect",{x:i,y:a,width:o,height:l,fill:c,stroke:"none"}),Ae.createElement("line",{x1:i+1,y1:d,x2:i+o-1,y2:d,fill:"none",stroke:"#fff"}),Ae.createElement("line",{x1:i+1,y1:d+2,x2:i+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,i){var a;return Ae.isValidElement(s)?a=Ae.cloneElement(s,i):Xr(s)?a=s(i):a=t.renderDefaultTraveller(i),a}},{key:"getDerivedStateFromProps",value:function(s,i){var a=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,h=s.endIndex;if(a!==i.prevData||d!==i.prevUpdateId)return sP({prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},a&&a.length?lrt({data:a,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:h}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var f=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:a,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:i.scale(s.startIndex),endX:i.scale(s.endIndex),scaleValues:f}}return null}},{key:"getIndexInRange",value:function(s,i){for(var a=s.length,o=0,l=a-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>i?l=c:o=c}return i>=s[l]?l:o}}])}(b.PureComponent);Zl(P0,"displayName","Brush");Zl(P0,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var crt=aM;function drt(e,t){var n;return crt(e,function(s,i,a){return n=t(s,i,a),!n}),!!n}var urt=drt,hrt=cce,frt=ph,mrt=urt,prt=Tl,grt=JC;function xrt(e,t,n){var s=prt(e)?hrt:mrt;return n&&grt(e,t,n)&&(t=void 0),s(e,frt(t))}var vrt=xrt;const yrt=ts(vrt);var th=function(t,n){var s=t.alwaysShow,i=t.ifOverflow;return s&&(i="extendDomain"),i===n},eq=Ece;function brt(e,t,n){t=="__proto__"&&eq?eq(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var jrt=brt,wrt=jrt,Nrt=Pce,Srt=ph;function _rt(e,t){var n={};return t=Srt(t),Nrt(e,function(s,i,a){wrt(n,i,t(s,i,a))}),n}var Crt=_rt;const Art=ts(Crt);function krt(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var Prt=krt,Trt=aM;function Ert(e,t){var n=!0;return Trt(e,function(s,i,a){return n=!!t(s,i,a),n}),n}var Ort=Ert,Rrt=Prt,Drt=Ort,Mrt=ph,Irt=Tl,Lrt=JC;function Frt(e,t,n){var s=Irt(e)?Rrt:Drt;return n&&Lrt(e,t,n)&&(t=void 0),s(e,Mrt(t))}var $rt=Frt;const wue=ts($rt);var Brt=["x","y"];function _j(e){"@babel/helpers - typeof";return _j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_j(e)}function QE(){return QE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},QE.apply(this,arguments)}function tq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function tb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tq(Object(n),!0).forEach(function(s){Vrt(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Vrt(e,t,n){return t=Urt(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Urt(e){var t=qrt(e,"string");return _j(t)=="symbol"?t:t+""}function qrt(e,t){if(_j(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(_j(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zrt(e,t){if(e==null)return{};var n=Hrt(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Hrt(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Wrt(e,t){var n=e.x,s=e.y,i=zrt(e,Brt),a="".concat(n),o=parseInt(a,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||i.height),u=parseInt(d,10),h="".concat(t.width||i.width),f=parseInt(h,10);return tb(tb(tb(tb(tb({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:f,name:t.name,radius:t.radius})}function rq(e){return Ae.createElement(pue,QE({shapeType:"rectangle",propTransformer:Wrt,activeClassName:"recharts-active-bar"},e))}var Krt=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,i){if(typeof t=="number")return t;var a=typeof s=="number";return a?t(s,i):(a||Vg(),n)}},Grt=["value","background"],Nue;function T0(e){"@babel/helpers - typeof";return T0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T0(e)}function Yrt(e,t){if(e==null)return{};var n=Xrt(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Xrt(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function e_(){return e_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},e_.apply(this,arguments)}function nq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nq(Object(n),!0).forEach(function(s){bm(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Qrt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sq(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_ue(s.key),s)}}function Zrt(e,t,n){return t&&sq(e.prototype,t),n&&sq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jrt(e,t,n){return t=t_(t),ent(e,Sue()?Reflect.construct(t,n||[],t_(e).constructor):t.apply(e,n))}function ent(e,t){if(t&&(T0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tnt(e)}function tnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sue=function(){return!!e})()}function t_(e){return t_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},t_(e)}function rnt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZE(e,t)}function ZE(e,t){return ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},ZE(e,t)}function bm(e,t,n){return t=_ue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _ue(e){var t=nnt(e,"string");return T0(t)=="symbol"?t:t+""}function nnt(e,t){if(T0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(T0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ru=function(e){function t(){var n;Qrt(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=Jrt(this,t,[].concat(i)),bm(n,"state",{isAnimationFinished:!1}),bm(n,"id",cy("recharts-bar-")),bm(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),bm(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return rnt(t,e),Zrt(t,[{key:"renderRectanglesStatically",value:function(s){var i=this,a=this.props,o=a.shape,l=a.dataKey,c=a.activeIndex,d=a.activeBar,u=Mr(this.props,!1);return s&&s.map(function(h,f){var m=f===c,p=m?d:o,g=ea(ea(ea({},u),h),{},{isActive:m,option:p,index:f,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return Ae.createElement(Un,e_({className:"recharts-bar-rectangle"},Fg(i.props,h,f),{key:"rectangle-".concat(h==null?void 0:h.x,"-").concat(h==null?void 0:h.y,"-").concat(h==null?void 0:h.value,"-").concat(f)}),Ae.createElement(rq,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,i=this.props,a=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,u=i.animationEasing,h=i.animationId,f=this.state.prevData;return Ae.createElement(dh,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var p=m.t,g=a.map(function(v,x){var y=f&&f[x];if(y){var j=ic(y.x,v.x),w=ic(y.y,v.y),N=ic(y.width,v.width),S=ic(y.height,v.height);return ea(ea({},v),{},{x:j(p),y:w(p),width:N(p),height:S(p)})}if(o==="horizontal"){var T=ic(0,v.height),C=T(p);return ea(ea({},v),{},{y:v.y+v.height-C,height:C})}var A=ic(0,v.width),R=A(p);return ea(ea({},v),{},{width:R})});return Ae.createElement(Un,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,i=s.data,a=s.isAnimationActive,o=this.state.prevData;return a&&i&&i.length&&(!o||!yw(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var s=this,i=this.props,a=i.data,o=i.dataKey,l=i.activeIndex,c=Mr(this.props.background,!1);return a.map(function(d,u){d.value;var h=d.background,f=Yrt(d,Grt);if(!h)return null;var m=ea(ea(ea(ea(ea({},f),{},{fill:"#eee"},h),c),Fg(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return Ae.createElement(rq,e_({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.data,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,h=vc(u,bw);if(!h)return null;var f=d==="vertical"?o[0].height/2:o[0].width/2,m=function(v,x){var y=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:y,errorVal:ja(v,x)}},p={clipPath:s?"url(#clipPath-".concat(i,")"):null};return Ae.createElement(Un,p,h.map(function(g){return Ae.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:f,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,i=s.hide,a=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,h=s.width,f=s.height,m=s.isAnimationActive,p=s.background,g=s.id;if(i||!a||!a.length)return null;var v=this.state.isAnimationFinished,x=on("recharts-bar",o),y=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,w=y||j,N=sn(g)?this.id:g;return Ae.createElement(Un,{className:x},y||j?Ae.createElement("defs",null,Ae.createElement("clipPath",{id:"clipPath-".concat(N)},Ae.createElement("rect",{x:y?d:d-h/2,y:j?u:u-f/2,width:y?h:h*2,height:j?f:f*2}))):null,Ae.createElement(Un,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(N,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,N),(!m||v)&&tf.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:i.curData}:s.data!==i.curData?{curData:s.data}:null}}])}(b.PureComponent);Nue=ru;bm(ru,"displayName","Bar");bm(ru,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!rx.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});bm(ru,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,i=e.bandSize,a=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,h=e.displayedData,f=e.offset,m=MXe(s,n);if(!m)return null;var p=t.layout,g=n.type.defaultProps,v=g!==void 0?ea(ea({},g),n.props):n.props,x=v.dataKey,y=v.children,j=v.minPointSize,w=p==="horizontal"?o:a,N=d?w.scale.domain():null,S=UXe({numericAxis:w}),T=vc(y,y0),C=h.map(function(A,R){var k,O,$,D,q,M;d?k=IXe(d[u+R],N):(k=ja(A,x),Array.isArray(k)||(k=[S,k]));var L=Krt(j,Nue.defaultProps.minPointSize)(k[1],R);if(p==="horizontal"){var V,P=[o.scale(k[0]),o.scale(k[1])],z=P[0],Z=P[1];O=KV({axis:a,ticks:l,bandSize:i,offset:m.offset,entry:A,index:R}),$=(V=Z??z)!==null&&V!==void 0?V:void 0,D=m.size;var F=z-Z;if(q=Number.isNaN(F)?0:F,M={x:O,y:o.y,width:D,height:o.height},Math.abs(L)>0&&Math.abs(q)<Math.abs(L)){var W=el(q||L)*(Math.abs(L)-Math.abs(q));$-=W,q+=W}}else{var G=[a.scale(k[0]),a.scale(k[1])],H=G[0],se=G[1];if(O=H,$=KV({axis:o,ticks:c,bandSize:i,offset:m.offset,entry:A,index:R}),D=se-H,q=m.size,M={x:a.x,y:$,width:a.width,height:q},Math.abs(L)>0&&Math.abs(D)<Math.abs(L)){var J=el(D||L)*(Math.abs(L)-Math.abs(D));D+=J}}return ea(ea(ea({},A),{},{x:O,y:$,width:D,height:q,value:d?k:k[1],payload:A,background:M},T&&T[R]&&T[R].props),{},{tooltipPayload:[Kde(n,A)],tooltipPosition:{x:O+D/2,y:$+q/2}})});return ea({data:C,layout:p},f)});function Cj(e){"@babel/helpers - typeof";return Cj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cj(e)}function snt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iq(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Cue(s.key),s)}}function int(e,t,n){return t&&iq(e.prototype,t),n&&iq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function aq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aq(Object(n),!0).forEach(function(s){vA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function vA(e,t,n){return t=Cue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cue(e){var t=ant(e,"string");return Cj(t)=="symbol"?t:t+""}function ant(e,t){if(Cj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Cj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aue=function(t,n,s,i,a){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(n),h={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},f=!!tc(d,ru);return u.reduce(function(m,p){var g=n[p],v=g.orientation,x=g.domain,y=g.padding,j=y===void 0?{}:y,w=g.mirror,N=g.reversed,S="".concat(v).concat(w?"Mirror":""),T,C,A,R,k;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var O=x[1]-x[0],$=1/0,D=g.categoricalDomain.sort();if(D.forEach(function(G,H){H>0&&($=Math.min((G||0)-(D[H-1]||0),$))}),Number.isFinite($)){var q=$/O,M=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(T=q*M/2),g.padding==="no-gap"){var L=tl(t.barCategoryGap,q*M),V=q*M/2;T=V-L-(V-L)/M*L}}}i==="xAxis"?C=[s.left+(j.left||0)+(T||0),s.left+s.width-(j.right||0)-(T||0)]:i==="yAxis"?C=c==="horizontal"?[s.top+s.height-(j.bottom||0),s.top+(j.top||0)]:[s.top+(j.top||0)+(T||0),s.top+s.height-(j.bottom||0)-(T||0)]:C=g.range,N&&(C=[C[1],C[0]]);var P=qde(g,a,f),z=P.scale,Z=P.realScaleType;z.domain(x).range(C),zde(z);var F=Hde(z,Fd(Fd({},g),{},{realScaleType:Z}));i==="xAxis"?(k=v==="top"&&!w||v==="bottom"&&w,A=s.left,R=h[S]-k*g.height):i==="yAxis"&&(k=v==="left"&&!w||v==="right"&&w,A=h[S]-k*g.width,R=s.top);var W=Fd(Fd(Fd({},g),F),{},{realScaleType:Z,x:A,y:R,scale:z,width:i==="xAxis"?s.width:g.width,height:i==="yAxis"?s.height:g.height});return W.bandSize=FS(W,F),!g.hide&&i==="xAxis"?h[S]+=(k?-1:1)*W.height:g.hide||(h[S]+=(k?-1:1)*W.width),Fd(Fd({},m),{},vA({},p,W))},{})},kue=function(t,n){var s=t.x,i=t.y,a=n.x,o=n.y;return{x:Math.min(s,a),y:Math.min(i,o),width:Math.abs(a-s),height:Math.abs(o-i)}},ont=function(t){var n=t.x1,s=t.y1,i=t.x2,a=t.y2;return kue({x:n,y:s},{x:i,y:a})},Pue=function(){function e(t){snt(this,e),this.scale=t}return int(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=s.bandAware,a=s.position;if(n!==void 0){if(a)switch(a){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),i=s[0],a=s[s.length-1];return i<=a?n>=i&&n<=a:n>=a&&n<=i}}],[{key:"create",value:function(n){return new e(n)}}])}();vA(Pue,"EPS",1e-4);var MM=function(t){var n=Object.keys(t).reduce(function(s,i){return Fd(Fd({},s),{},vA({},i,Pue.create(t[i])))},{});return Fd(Fd({},n),{},{apply:function(i){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=a.bandAware,l=a.position;return Art(i,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return wue(i,function(a,o){return n[o].isInRange(a)})}})};function lnt(e){return(e%180+180)%180}var cnt=function(t){var n=t.width,s=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=lnt(i),o=a*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},dnt=ph,unt=mw,hnt=QC;function fnt(e){return function(t,n,s){var i=Object(t);if(!unt(t)){var a=dnt(n);t=hnt(t),n=function(l){return a(i[l],l,i)}}var o=e(t,n,s);return o>-1?i[a?t[o]:o]:void 0}}var mnt=fnt,pnt=vue;function gnt(e){var t=pnt(e),n=t%1;return t===t?n?t-n:t:0}var xnt=gnt,vnt=Nce,ynt=ph,bnt=xnt,jnt=Math.max;function wnt(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var i=n==null?0:bnt(n);return i<0&&(i=jnt(s+i,0)),vnt(e,ynt(t),i)}var Nnt=wnt,Snt=mnt,_nt=Nnt,Cnt=Snt(_nt),Ant=Cnt;const knt=ts(Ant);var Pnt=SLe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),IM=b.createContext(void 0),LM=b.createContext(void 0),Tue=b.createContext(void 0),Eue=b.createContext({}),Oue=b.createContext(void 0),Rue=b.createContext(0),Due=b.createContext(0),oq=function(t){var n=t.state,s=n.xAxisMap,i=n.yAxisMap,a=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Pnt(a);return Ae.createElement(IM.Provider,{value:s},Ae.createElement(LM.Provider,{value:i},Ae.createElement(Eue.Provider,{value:a},Ae.createElement(Tue.Provider,{value:u},Ae.createElement(Oue.Provider,{value:o},Ae.createElement(Rue.Provider,{value:d},Ae.createElement(Due.Provider,{value:c},l)))))))},Tnt=function(){return b.useContext(Oue)},Mue=function(t){var n=b.useContext(IM);n==null&&Vg();var s=n[t];return s==null&&Vg(),s},Ent=function(){var t=b.useContext(IM);return sm(t)},Ont=function(){var t=b.useContext(LM),n=knt(t,function(s){return wue(s.domain,Number.isFinite)});return n||sm(t)},Iue=function(t){var n=b.useContext(LM);n==null&&Vg();var s=n[t];return s==null&&Vg(),s},Rnt=function(){var t=b.useContext(Tue);return t},Dnt=function(){return b.useContext(Eue)},FM=function(){return b.useContext(Due)},$M=function(){return b.useContext(Rue)};function E0(e){"@babel/helpers - typeof";return E0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E0(e)}function Mnt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Int(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Fue(s.key),s)}}function Lnt(e,t,n){return t&&Int(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fnt(e,t,n){return t=r_(t),$nt(e,Lue()?Reflect.construct(t,n||[],r_(e).constructor):t.apply(e,n))}function $nt(e,t){if(t&&(E0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bnt(e)}function Bnt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lue=function(){return!!e})()}function r_(e){return r_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},r_(e)}function Vnt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JE(e,t)}function JE(e,t){return JE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},JE(e,t)}function lq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function cq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lq(Object(n),!0).forEach(function(s){BM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function BM(e,t,n){return t=Fue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fue(e){var t=Unt(e,"string");return E0(t)=="symbol"?t:t+""}function Unt(e,t){if(E0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(E0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qnt(e,t){return Knt(e)||Wnt(e,t)||Hnt(e,t)||znt()}function znt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hnt(e,t){if(e){if(typeof e=="string")return dq(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dq(e,t)}}function dq(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Wnt(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Knt(e){if(Array.isArray(e))return e}function eO(){return eO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eO.apply(this,arguments)}var Gnt=function(t,n){var s;return Ae.isValidElement(t)?s=Ae.cloneElement(t,n):Xr(t)?s=t(n):s=Ae.createElement("line",eO({},n,{className:"recharts-reference-line-line"})),s},Ynt=function(t,n,s,i,a,o,l,c,d){var u=a.x,h=a.y,f=a.width,m=a.height;if(s){var p=d.y,g=t.y.apply(p,{position:o});if(th(d,"discard")&&!t.y.isInRange(g))return null;var v=[{x:u+f,y:g},{x:u,y:g}];return c==="left"?v.reverse():v}if(n){var x=d.x,y=t.x.apply(x,{position:o});if(th(d,"discard")&&!t.x.isInRange(y))return null;var j=[{x:y,y:h+m},{x:y,y:h}];return l==="top"?j.reverse():j}if(i){var w=d.segment,N=w.map(function(S){return t.apply(S,{position:o})});return th(d,"discard")&&yrt(N,function(S){return!t.isInRange(S)})?null:N}return null};function Xnt(e){var t=e.x,n=e.y,s=e.segment,i=e.xAxisId,a=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Tnt(),u=Mue(i),h=Iue(a),f=Rnt();if(!d||!f)return null;tu(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=MM({x:u.scale,y:h.scale}),p=Sa(t),g=Sa(n),v=s&&s.length===2,x=Ynt(m,p,g,v,f,e.position,u.orientation,h.orientation,e);if(!x)return null;var y=qnt(x,2),j=y[0],w=j.x,N=j.y,S=y[1],T=S.x,C=S.y,A=th(e,"hidden")?"url(#".concat(d,")"):void 0,R=cq(cq({clipPath:A},Mr(e,!0)),{},{x1:w,y1:N,x2:T,y2:C});return Ae.createElement(Un,{className:on("recharts-reference-line",l)},Gnt(o,R),La.renderCallByParent(e,ont({x1:w,y1:N,x2:T,y2:C})))}var VM=function(e){function t(){return Mnt(this,t),Fnt(this,t,arguments)}return Vnt(t,e),Lnt(t,[{key:"render",value:function(){return Ae.createElement(Xnt,this.props)}}])}(Ae.Component);BM(VM,"displayName","ReferenceLine");BM(VM,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tO(){return tO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tO.apply(this,arguments)}function O0(e){"@babel/helpers - typeof";return O0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O0(e)}function uq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function hq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uq(Object(n),!0).forEach(function(s){yA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Qnt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Znt(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Bue(s.key),s)}}function Jnt(e,t,n){return t&&Znt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function est(e,t,n){return t=n_(t),tst(e,$ue()?Reflect.construct(t,n||[],n_(e).constructor):t.apply(e,n))}function tst(e,t){if(t&&(O0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rst(e)}function rst(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($ue=function(){return!!e})()}function n_(e){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},n_(e)}function nst(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rO(e,t)}function rO(e,t){return rO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},rO(e,t)}function yA(e,t,n){return t=Bue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bue(e){var t=sst(e,"string");return O0(t)=="symbol"?t:t+""}function sst(e,t){if(O0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(O0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ist=function(t){var n=t.x,s=t.y,i=t.xAxis,a=t.yAxis,o=MM({x:i.scale,y:a.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return th(t,"discard")&&!o.isInRange(l)?null:l},bA=function(e){function t(){return Qnt(this,t),est(this,t,arguments)}return nst(t,e),Jnt(t,[{key:"render",value:function(){var s=this.props,i=s.x,a=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Sa(i),u=Sa(a);if(tu(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var h=ist(this.props);if(!h)return null;var f=h.x,m=h.y,p=this.props,g=p.shape,v=p.className,x=th(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=hq(hq({clipPath:x},Mr(this.props,!0)),{},{cx:f,cy:m});return Ae.createElement(Un,{className:on("recharts-reference-dot",v)},t.renderDot(g,y),La.renderCallByParent(this.props,{x:f-o,y:m-o,width:2*o,height:2*o}))}}])}(Ae.Component);yA(bA,"displayName","ReferenceDot");yA(bA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});yA(bA,"renderDot",function(e,t){var n;return Ae.isValidElement(e)?n=Ae.cloneElement(e,t):Xr(e)?n=e(t):n=Ae.createElement(uA,tO({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function nO(){return nO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},nO.apply(this,arguments)}function R0(e){"@babel/helpers - typeof";return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R0(e)}function fq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function mq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fq(Object(n),!0).forEach(function(s){jA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ast(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ost(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Uue(s.key),s)}}function lst(e,t,n){return t&&ost(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cst(e,t,n){return t=s_(t),dst(e,Vue()?Reflect.construct(t,n||[],s_(e).constructor):t.apply(e,n))}function dst(e,t){if(t&&(R0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ust(e)}function ust(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Vue=function(){return!!e})()}function s_(e){return s_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},s_(e)}function hst(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sO(e,t)}function sO(e,t){return sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},sO(e,t)}function jA(e,t,n){return t=Uue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uue(e){var t=fst(e,"string");return R0(t)=="symbol"?t:t+""}function fst(e,t){if(R0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(R0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mst=function(t,n,s,i,a){var o=a.x1,l=a.x2,c=a.y1,d=a.y2,u=a.xAxis,h=a.yAxis;if(!u||!h)return null;var f=MM({x:u.scale,y:h.scale}),m={x:t?f.x.apply(o,{position:"start"}):f.x.rangeMin,y:s?f.y.apply(c,{position:"start"}):f.y.rangeMin},p={x:n?f.x.apply(l,{position:"end"}):f.x.rangeMax,y:i?f.y.apply(d,{position:"end"}):f.y.rangeMax};return th(a,"discard")&&(!f.isInRange(m)||!f.isInRange(p))?null:kue(m,p)},wA=function(e){function t(){return ast(this,t),cst(this,t,arguments)}return hst(t,e),lst(t,[{key:"render",value:function(){var s=this.props,i=s.x1,a=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;tu(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=Sa(i),f=Sa(a),m=Sa(o),p=Sa(l),g=this.props.shape;if(!h&&!f&&!m&&!p&&!g)return null;var v=mst(h,f,m,p,this.props);if(!v&&!g)return null;var x=th(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Ae.createElement(Un,{className:on("recharts-reference-area",c)},t.renderRect(g,mq(mq({clipPath:x},Mr(this.props,!0)),v)),La.renderCallByParent(this.props,v))}}])}(Ae.Component);jA(wA,"displayName","ReferenceArea");jA(wA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});jA(wA,"renderRect",function(e,t){var n;return Ae.isValidElement(e)?n=Ae.cloneElement(e,t):Xr(e)?n=e(t):n=Ae.createElement(DM,nO({},t,{className:"recharts-reference-area-rect"})),n});function que(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],i=0;i<e.length;i+=t)s.push(e[i]);return s}function pst(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return cnt(s,n)}function gst(e,t,n){var s=n==="width",i=e.x,a=e.y,o=e.width,l=e.height;return t===1?{start:s?i:a,end:s?i+o:a+l}:{start:s?i+o:a+l,end:s?i:a}}function i_(e,t,n,s,i){if(e*t<e*s||e*t>e*i)return!1;var a=n();return e*(t-e*a/2-s)>=0&&e*(t+e*a/2-i)<=0}function xst(e,t){return que(e,t+1)}function vst(e,t,n,s,i){for(var a=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,h=function(){var p=s==null?void 0:s[c];if(p===void 0)return{v:que(s,d)};var g=c,v,x=function(){return v===void 0&&(v=n(p,g)),v},y=p.coordinate,j=c===0||i_(e,y,x,u,l);j||(c=0,u=o,d+=1),j&&(u=y+e*(x()/2+i),c+=d)},f;d<=a.length;)if(f=h(),f)return f.v;return[]}function Aj(e){"@babel/helpers - typeof";return Aj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aj(e)}function pq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function No(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pq(Object(n),!0).forEach(function(s){yst(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function yst(e,t,n){return t=bst(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bst(e){var t=jst(e,"string");return Aj(t)=="symbol"?t:t+""}function jst(e,t){if(Aj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Aj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wst(e,t,n,s,i){for(var a=(s||[]).slice(),o=a.length,l=t.start,c=t.end,d=function(f){var m=a[f],p,g=function(){return p===void 0&&(p=n(m,f)),p};if(f===o-1){var v=e*(m.coordinate+e*g()/2-c);a[f]=m=No(No({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else a[f]=m=No(No({},m),{},{tickCoord:m.coordinate});var x=i_(e,m.tickCoord,g,l,c);x&&(c=m.tickCoord-e*(g()/2+i),a[f]=No(No({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return a}function Nst(e,t,n,s,i,a){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(a){var u=s[l-1],h=n(u,l-1),f=e*(u.coordinate+e*h/2-d);o[l-1]=u=No(No({},u),{},{tickCoord:f>0?u.coordinate-f*e:u.coordinate});var m=i_(e,u.tickCoord,function(){return h},c,d);m&&(d=u.tickCoord-e*(h/2+i),o[l-1]=No(No({},u),{},{isShow:!0}))}for(var p=a?l-1:l,g=function(y){var j=o[y],w,N=function(){return w===void 0&&(w=n(j,y)),w};if(y===0){var S=e*(j.coordinate-e*N()/2-c);o[y]=j=No(No({},j),{},{tickCoord:S<0?j.coordinate-S*e:j.coordinate})}else o[y]=j=No(No({},j),{},{tickCoord:j.coordinate});var T=i_(e,j.tickCoord,N,c,d);T&&(c=j.tickCoord+e*(N()/2+i),o[y]=No(No({},j),{},{isShow:!0}))},v=0;v<p;v++)g(v);return o}function UM(e,t,n){var s=e.tick,i=e.ticks,a=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,h=e.angle;if(!i||!i.length||!s)return[];if(qt(c)||rx.isSsr)return xst(i,typeof c=="number"&&qt(c)?c:0);var f=[],m=l==="top"||l==="bottom"?"width":"height",p=u&&m==="width"?Kb(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(j,w){var N=Xr(d)?d(j.value,w):j.value;return m==="width"?pst(Kb(N,{fontSize:t,letterSpacing:n}),p,h):Kb(N,{fontSize:t,letterSpacing:n})[m]},v=i.length>=2?el(i[1].coordinate-i[0].coordinate):1,x=gst(a,v,m);return c==="equidistantPreserveStart"?vst(v,x,g,i,o):(c==="preserveStart"||c==="preserveStartEnd"?f=Nst(v,x,g,i,o,c==="preserveStartEnd"):f=wst(v,x,g,i,o),f.filter(function(y){return y.isShow}))}var Sst=["viewBox"],_st=["viewBox"],Cst=["ticks"];function D0(e){"@babel/helpers - typeof";return D0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D0(e)}function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tv.apply(this,arguments)}function gq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gq(Object(n),!0).forEach(function(s){qM(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function iP(e,t){if(e==null)return{};var n=Ast(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ast(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function kst(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xq(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Hue(s.key),s)}}function Pst(e,t,n){return t&&xq(e.prototype,t),n&&xq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tst(e,t,n){return t=a_(t),Est(e,zue()?Reflect.construct(t,n||[],a_(e).constructor):t.apply(e,n))}function Est(e,t){if(t&&(D0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ost(e)}function Ost(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zue=function(){return!!e})()}function a_(e){return a_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a_(e)}function Rst(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iO(e,t)}function iO(e,t){return iO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},iO(e,t)}function qM(e,t,n){return t=Hue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hue(e){var t=Dst(e,"string");return D0(t)=="symbol"?t:t+""}function Dst(e,t){if(D0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(D0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gy=function(e){function t(n){var s;return kst(this,t),s=Tst(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return Rst(t,e),Pst(t,[{key:"shouldComponentUpdate",value:function(s,i){var a=s.viewBox,o=iP(s,Sst),l=this.props,c=l.viewBox,d=iP(l,_st);return!_v(a,c)||!_v(o,d)||!_v(i,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var i=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var i=this.props,a=i.x,o=i.y,l=i.width,c=i.height,d=i.orientation,u=i.tickSize,h=i.mirror,f=i.tickMargin,m,p,g,v,x,y,j=h?-1:1,w=s.tickSize||u,N=qt(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":m=p=s.coordinate,v=o+ +!h*c,g=v-j*w,y=g-j*f,x=N;break;case"left":g=v=s.coordinate,p=a+ +!h*l,m=p-j*w,x=m-j*f,y=N;break;case"right":g=v=s.coordinate,p=a+ +h*l,m=p+j*w,x=m+j*f,y=N;break;default:m=p=s.coordinate,v=o+ +h*c,g=v+j*w,y=g+j*f,x=N;break}return{line:{x1:m,y1:g,x2:p,y2:v},tick:{x,y}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o;switch(i){case"left":o=a?"start":"end";break;case"right":o=a?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,i=s.orientation,a=s.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=a?"start":"end";break;default:o=a?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,i=s.x,a=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,h=Ho(Ho(Ho({},Mr(this.props,!1)),Mr(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var f=+(c==="top"&&!d||c==="bottom"&&d);h=Ho(Ho({},h),{},{x1:i,y1:a+f*l,x2:i+o,y2:a+f*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);h=Ho(Ho({},h),{},{x1:i+m*o,y1:a,x2:i+m*o,y2:a+l})}return Ae.createElement("line",tv({},h,{className:on("recharts-cartesian-axis-line",xc(u,"className"))}))}},{key:"renderTicks",value:function(s,i,a){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,h=l.tickFormatter,f=l.unit,m=UM(Ho(Ho({},this.props),{},{ticks:s}),i,a),p=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=Mr(this.props,!1),x=Mr(u,!1),y=Ho(Ho({},v),{},{fill:"none"},Mr(c,!1)),j=m.map(function(w,N){var S=o.getTickLineCoord(w),T=S.line,C=S.tick,A=Ho(Ho(Ho(Ho({textAnchor:p,verticalAnchor:g},v),{},{stroke:"none",fill:d},x),C),{},{index:N,payload:w,visibleTicksCount:m.length,tickFormatter:h});return Ae.createElement(Un,tv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Fg(o.props,w,N)),c&&Ae.createElement("line",tv({},y,T,{className:on("recharts-cartesian-axis-tick-line",xc(c,"className"))})),u&&t.renderTickItem(u,A,"".concat(Xr(h)?h(w.value,N):w.value).concat(f||"")))});return Ae.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var s=this,i=this.props,a=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,d=i.className,u=i.hide;if(u)return null;var h=this.props,f=h.ticks,m=iP(h,Cst),p=f;return Xr(c)&&(p=f&&f.length>0?c(this.props):c(m)),o<=0||l<=0||!p||!p.length?null:Ae.createElement(Un,{className:on("recharts-cartesian-axis",d),ref:function(v){s.layerReference=v}},a&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),La.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,i,a){var o;return Ae.isValidElement(s)?o=Ae.cloneElement(s,i):Xr(s)?o=s(i):o=Ae.createElement($g,tv({},i,{className:"recharts-cartesian-axis-tick-value"}),a),o}}])}(b.Component);qM(gy,"displayName","CartesianAxis");qM(gy,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Mst=["x1","y1","x2","y2","key"],Ist=["offset"];function Ug(e){"@babel/helpers - typeof";return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function vq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function _o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vq(Object(n),!0).forEach(function(s){Lst(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Lst(e,t,n){return t=Fst(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fst(e){var t=$st(e,"string");return Ug(t)=="symbol"?t:t+""}function $st(e,t){if(Ug(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ug(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sg(){return sg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sg.apply(this,arguments)}function yq(e,t){if(e==null)return{};var n=Bst(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Bst(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Vst=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,i=t.x,a=t.y,o=t.width,l=t.height,c=t.ry;return Ae.createElement("rect",{x:i,y:a,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function Wue(e,t){var n;if(Ae.isValidElement(e))n=Ae.cloneElement(e,t);else if(Xr(e))n=e(t);else{var s=t.x1,i=t.y1,a=t.x2,o=t.y2,l=t.key,c=yq(t,Mst),d=Mr(c,!1);d.offset;var u=yq(d,Ist);n=Ae.createElement("line",sg({},u,{x1:s,y1:i,x2:a,y2:o,fill:"none",key:l}))}return n}function Ust(e){var t=e.x,n=e.width,s=e.horizontal,i=s===void 0?!0:s,a=e.horizontalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=_o(_o({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return Wue(i,d)});return Ae.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function qst(e){var t=e.y,n=e.height,s=e.vertical,i=s===void 0?!0:s,a=e.verticalPoints;if(!i||!a||!a.length)return null;var o=a.map(function(l,c){var d=_o(_o({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return Wue(i,d)});return Ae.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function zst(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,i=e.y,a=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(f){return Math.round(f+i-i)}).sort(function(f,m){return f-m});i!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var p=!u[m+1],g=p?i+o-f:u[m+1]-f;if(g<=0)return null;var v=m%t.length;return Ae.createElement("rect",{key:"react-".concat(m),y:f,x:s,height:g,width:a,stroke:"none",fill:t[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Ae.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Hst(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,i=e.fillOpacity,a=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var u=d.map(function(f){return Math.round(f+a-a)}).sort(function(f,m){return f-m});a!==u[0]&&u.unshift(0);var h=u.map(function(f,m){var p=!u[m+1],g=p?a+l-f:u[m+1]-f;if(g<=0)return null;var v=m%s.length;return Ae.createElement("rect",{key:"react-".concat(m),x:f,y:o,width:g,height:c,stroke:"none",fill:s[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return Ae.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},h)}var Wst=function(t,n){var s=t.xAxis,i=t.width,a=t.height,o=t.offset;return Ude(UM(_o(_o(_o({},gy.defaultProps),s),{},{ticks:Gh(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.left,o.left+o.width,n)},Kst=function(t,n){var s=t.yAxis,i=t.width,a=t.height,o=t.offset;return Ude(UM(_o(_o(_o({},gy.defaultProps),s),{},{ticks:Gh(s,!0),viewBox:{x:0,y:0,width:i,height:a}})),o.top,o.top+o.height,n)},jx={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function kj(e){var t,n,s,i,a,o,l=FM(),c=$M(),d=Dnt(),u=_o(_o({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:jx.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:jx.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:jx.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:jx.horizontalFill,vertical:(a=e.vertical)!==null&&a!==void 0?a:jx.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:jx.verticalFill,x:qt(e.x)?e.x:d.left,y:qt(e.y)?e.y:d.top,width:qt(e.width)?e.width:d.width,height:qt(e.height)?e.height:d.height}),h=u.x,f=u.y,m=u.width,p=u.height,g=u.syncWithTicks,v=u.horizontalValues,x=u.verticalValues,y=Ent(),j=Ont();if(!qt(m)||m<=0||!qt(p)||p<=0||!qt(h)||h!==+h||!qt(f)||f!==+f)return null;var w=u.verticalCoordinatesGenerator||Wst,N=u.horizontalCoordinatesGenerator||Kst,S=u.horizontalPoints,T=u.verticalPoints;if((!S||!S.length)&&Xr(N)){var C=v&&v.length,A=N({yAxis:j?_o(_o({},j),{},{ticks:C?v:j.ticks}):void 0,width:l,height:c,offset:d},C?!0:g);tu(Array.isArray(A),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ug(A),"]")),Array.isArray(A)&&(S=A)}if((!T||!T.length)&&Xr(w)){var R=x&&x.length,k=w({xAxis:y?_o(_o({},y),{},{ticks:R?x:y.ticks}):void 0,width:l,height:c,offset:d},R?!0:g);tu(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ug(k),"]")),Array.isArray(k)&&(T=k)}return Ae.createElement("g",{className:"recharts-cartesian-grid"},Ae.createElement(Vst,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Ae.createElement(Ust,sg({},u,{offset:d,horizontalPoints:S,xAxis:y,yAxis:j})),Ae.createElement(qst,sg({},u,{offset:d,verticalPoints:T,xAxis:y,yAxis:j})),Ae.createElement(zst,sg({},u,{horizontalPoints:S})),Ae.createElement(Hst,sg({},u,{verticalPoints:T})))}kj.displayName="CartesianGrid";var Gst=["type","layout","connectNulls","ref"],Yst=["key"];function M0(e){"@babel/helpers - typeof";return M0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M0(e)}function bq(e,t){if(e==null)return{};var n=Xst(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Xst(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Jb(){return Jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Jb.apply(this,arguments)}function jq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Ql(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jq(Object(n),!0).forEach(function(s){$d(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wx(e){return eit(e)||Jst(e)||Zst(e)||Qst()}function Qst(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zst(e,t){if(e){if(typeof e=="string")return aO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aO(e,t)}}function Jst(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eit(e){if(Array.isArray(e))return aO(e)}function aO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function tit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wq(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Gue(s.key),s)}}function rit(e,t,n){return t&&wq(e.prototype,t),n&&wq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nit(e,t,n){return t=o_(t),sit(e,Kue()?Reflect.construct(t,n||[],o_(e).constructor):t.apply(e,n))}function sit(e,t){if(t&&(M0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iit(e)}function iit(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kue=function(){return!!e})()}function o_(e){return o_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},o_(e)}function ait(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oO(e,t)}function oO(e,t){return oO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},oO(e,t)}function $d(e,t,n){return t=Gue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gue(e){var t=oit(e,"string");return M0(t)=="symbol"?t:t+""}function oit(e,t){if(M0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(M0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jw=function(e){function t(){var n;tit(this,t);for(var s=arguments.length,i=new Array(s),a=0;a<s;a++)i[a]=arguments[a];return n=nit(this,t,[].concat(i)),$d(n,"state",{isAnimationFinished:!0,totalLength:0}),$d(n,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),$d(n,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(x,y){return x+y});if(!d)return n.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),h=o%d,f=l-o,m=[],p=0,g=0;p<c.length;g+=c[p],++p)if(g+c[p]>h){m=[].concat(wx(c.slice(0,p)),[h-g]);break}var v=m.length%2===0?[0,f]:[f];return[].concat(wx(t.repeat(c,u)),wx(m),v).map(function(x){return"".concat(x,"px")}).join(", ")}),$d(n,"id",cy("recharts-line-")),$d(n,"pathRef",function(o){n.mainCurve=o}),$d(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),$d(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return ait(t,e),rit(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.points,l=a.xAxis,c=a.yAxis,d=a.layout,u=a.children,h=vc(u,bw);if(!h)return null;var f=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:ja(g.payload,v)}},m={clipPath:s?"url(#clipPath-".concat(i,")"):null};return Ae.createElement(Un,m,h.map(function(p){return Ae.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:f})}))}},{key:"renderDots",value:function(s,i,a){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,h=Mr(this.props,!1),f=Mr(c,!0),m=d.map(function(g,v){var x=Ql(Ql(Ql({key:"dot-".concat(v),r:3},h),f),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:u,payload:g.payload,points:d});return t.renderDotItem(c,x)}),p={clipPath:s?"url(#clipPath-".concat(i?"":"dots-").concat(a,")"):null};return Ae.createElement(Un,Jb({className:"recharts-line-dots",key:"dots"},p),m)}},{key:"renderCurveStatically",value:function(s,i,a,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var h=bq(l,Gst),f=Ql(Ql(Ql({},Mr(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(a,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:u});return Ae.createElement(VS,Jb({},f,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,i){var a=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,h=o.animationDuration,f=o.animationEasing,m=o.animationId,p=o.animateNewValues,g=o.width,v=o.height,x=this.state,y=x.prevPoints,j=x.totalLength;return Ae.createElement(dh,{begin:u,duration:h,isActive:d,easing:f,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var N=w.t;if(y){var S=y.length/l.length,T=l.map(function(O,$){var D=Math.floor($*S);if(y[D]){var q=y[D],M=ic(q.x,O.x),L=ic(q.y,O.y);return Ql(Ql({},O),{},{x:M(N),y:L(N)})}if(p){var V=ic(g*2,O.x),P=ic(v/2,O.y);return Ql(Ql({},O),{},{x:V(N),y:P(N)})}return Ql(Ql({},O),{},{x:O.x,y:O.y})});return a.renderCurveStatically(T,s,i)}var C=ic(0,j),A=C(N),R;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(O){return parseFloat(O)});R=a.getStrokeDasharray(A,j,k)}else R=a.generateSimpleStrokeDasharray(j,A);return a.renderCurveStatically(l,s,i,{strokeDasharray:R})})}},{key:"renderCurve",value:function(s,i){var a=this.props,o=a.points,l=a.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!yw(d,o))?this.renderCurveWithAnimation(s,i):this.renderCurveStatically(o,s,i)}},{key:"render",value:function(){var s,i=this.props,a=i.hide,o=i.dot,l=i.points,c=i.className,d=i.xAxis,u=i.yAxis,h=i.top,f=i.left,m=i.width,p=i.height,g=i.isAnimationActive,v=i.id;if(a||!l||!l.length)return null;var x=this.state.isAnimationFinished,y=l.length===1,j=on("recharts-line",c),w=d&&d.allowDataOverflow,N=u&&u.allowDataOverflow,S=w||N,T=sn(v)?this.id:v,C=(s=Mr(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},A=C.r,R=A===void 0?3:A,k=C.strokeWidth,O=k===void 0?2:k,$=k8e(o)?o:{},D=$.clipDot,q=D===void 0?!0:D,M=R*2+O;return Ae.createElement(Un,{className:j},w||N?Ae.createElement("defs",null,Ae.createElement("clipPath",{id:"clipPath-".concat(T)},Ae.createElement("rect",{x:w?f:f-m/2,y:N?h:h-p/2,width:w?m:m*2,height:N?p:p*2})),!q&&Ae.createElement("clipPath",{id:"clipPath-dots-".concat(T)},Ae.createElement("rect",{x:f-M/2,y:h-M/2,width:m+M,height:p+M}))):null,!y&&this.renderCurve(S,T),this.renderErrorBar(S,T),(y||o)&&this.renderDots(S,q,T),(!g||x)&&tf.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,i){return s.animationId!==i.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:i.curPoints}:s.points!==i.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,i){for(var a=s.length%2!==0?[].concat(wx(s),[0]):s,o=[],l=0;l<i;++l)o=[].concat(wx(o),wx(a));return o}},{key:"renderDotItem",value:function(s,i){var a;if(Ae.isValidElement(s))a=Ae.cloneElement(s,i);else if(Xr(s))a=s(i);else{var o=i.key,l=bq(i,Yst),c=on("recharts-line-dot",typeof s!="boolean"?s.className:"");a=Ae.createElement(uA,Jb({key:o},l,{className:c}))}return a}}])}(b.PureComponent);$d(jw,"displayName","Line");$d(jw,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!rx.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});$d(jw,"getComposedData",function(e){var t=e.props,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,a=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,h=c.map(function(f,m){var p=ja(f,o);return u==="horizontal"?{x:WV({axis:n,ticks:i,bandSize:l,entry:f,index:m}),y:sn(p)?null:s.scale(p),value:p,payload:f}:{x:sn(p)?null:n.scale(p),y:WV({axis:s,ticks:a,bandSize:l,entry:f,index:m}),value:p,payload:f}});return Ql({points:h,layout:u},d)});function I0(e){"@babel/helpers - typeof";return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I0(e)}function lit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cit(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Que(s.key),s)}}function dit(e,t,n){return t&&cit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uit(e,t,n){return t=l_(t),hit(e,Yue()?Reflect.construct(t,n||[],l_(e).constructor):t.apply(e,n))}function hit(e,t){if(t&&(I0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fit(e)}function fit(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yue=function(){return!!e})()}function l_(e){return l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},l_(e)}function mit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lO(e,t)}function lO(e,t){return lO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},lO(e,t)}function Xue(e,t,n){return t=Que(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Que(e){var t=pit(e,"string");return I0(t)=="symbol"?t:t+""}function pit(e,t){if(I0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(I0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function cO(){return cO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},cO.apply(this,arguments)}function git(e){var t=e.xAxisId,n=FM(),s=$M(),i=Mue(t);return i==null?null:Ae.createElement(gy,cO({},i,{className:on("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return Gh(o,!0)}}))}var Jm=function(e){function t(){return lit(this,t),uit(this,t,arguments)}return mit(t,e),dit(t,[{key:"render",value:function(){return Ae.createElement(git,this.props)}}])}(Ae.Component);Xue(Jm,"displayName","XAxis");Xue(Jm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function L0(e){"@babel/helpers - typeof";return L0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L0(e)}function xit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vit(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ehe(s.key),s)}}function yit(e,t,n){return t&&vit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bit(e,t,n){return t=c_(t),jit(e,Zue()?Reflect.construct(t,n||[],c_(e).constructor):t.apply(e,n))}function jit(e,t){if(t&&(L0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wit(e)}function wit(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zue=function(){return!!e})()}function c_(e){return c_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c_(e)}function Nit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dO(e,t)}function dO(e,t){return dO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},dO(e,t)}function Jue(e,t,n){return t=ehe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ehe(e){var t=Sit(e,"string");return L0(t)=="symbol"?t:t+""}function Sit(e,t){if(L0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(L0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},uO.apply(this,arguments)}var _it=function(t){var n=t.yAxisId,s=FM(),i=$M(),a=Iue(n);return a==null?null:Ae.createElement(gy,uO({},a,{className:on("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:s,height:i},ticksGenerator:function(l){return Gh(l,!0)}}))},ep=function(e){function t(){return xit(this,t),bit(this,t,arguments)}return Nit(t,e),yit(t,[{key:"render",value:function(){return Ae.createElement(_it,this.props)}}])}(Ae.Component);Jue(ep,"displayName","YAxis");Jue(ep,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Nq(e){return Pit(e)||kit(e)||Ait(e)||Cit()}function Cit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ait(e,t){if(e){if(typeof e=="string")return hO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hO(e,t)}}function kit(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Pit(e){if(Array.isArray(e))return hO(e)}function hO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var fO=function(t,n,s,i,a){var o=vc(t,VM),l=vc(t,bA),c=[].concat(Nq(o),Nq(l)),d=vc(t,wA),u="".concat(i,"Id"),h=i[0],f=n;if(c.length&&(f=c.reduce(function(g,v){if(v.props[u]===s&&th(v.props,"extendDomain")&&qt(v.props[h])){var x=v.props[h];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},f)),d.length){var m="".concat(h,"1"),p="".concat(h,"2");f=d.reduce(function(g,v){if(v.props[u]===s&&th(v.props,"extendDomain")&&qt(v.props[m])&&qt(v.props[p])){var x=v.props[m],y=v.props[p];return[Math.min(g[0],x,y),Math.max(g[1],x,y)]}return g},f)}return a&&a.length&&(f=a.reduce(function(g,v){return qt(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},f)),f},the={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function i(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function a(c,d,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new i(u,h||c,f),p=n?n+d:d;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],m]:c._events[p].push(m):(c._events[p]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=n?n+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,p=new Array(m);f<m;f++)p[f]=h[f].fn;return p},l.prototype.listenerCount=function(d){var u=n?n+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,f,m,p){var g=n?n+d:d;if(!this._events[g])return!1;var v=this._events[g],x=arguments.length,y,j;if(v.fn){switch(v.once&&this.removeListener(d,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,h),!0;case 4:return v.fn.call(v.context,u,h,f),!0;case 5:return v.fn.call(v.context,u,h,f,m),!0;case 6:return v.fn.call(v.context,u,h,f,m,p),!0}for(j=1,y=new Array(x-1);j<x;j++)y[j-1]=arguments[j];v.fn.apply(v.context,y)}else{var w=v.length,N;for(j=0;j<w;j++)switch(v[j].once&&this.removeListener(d,v[j].fn,void 0,!0),x){case 1:v[j].fn.call(v[j].context);break;case 2:v[j].fn.call(v[j].context,u);break;case 3:v[j].fn.call(v[j].context,u,h);break;case 4:v[j].fn.call(v[j].context,u,h,f);break;default:if(!y)for(N=1,y=new Array(x-1);N<x;N++)y[N-1]=arguments[N];v[j].fn.apply(v[j].context,y)}}return!0},l.prototype.on=function(d,u,h){return a(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return a(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,f){var m=n?n+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var p=this._events[m];if(p.fn)p.fn===u&&(!f||p.once)&&(!h||p.context===h)&&o(this,m);else{for(var g=0,v=[],x=p.length;g<x;g++)(p[g].fn!==u||f&&!p[g].once||h&&p[g].context!==h)&&v.push(p[g]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=n?n+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(the);var Tit=the.exports;const Eit=ts(Tit);var aP=new Eit,oP="recharts.syncMouseEvents";function Pj(e){"@babel/helpers - typeof";return Pj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pj(e)}function Oit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rit(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,rhe(s.key),s)}}function Dit(e,t,n){return t&&Rit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lP(e,t,n){return t=rhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rhe(e){var t=Mit(e,"string");return Pj(t)=="symbol"?t:t+""}function Mit(e,t){if(Pj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Pj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Iit=function(){function e(){Oit(this,e),lP(this,"activeIndex",0),lP(this,"coordinateList",[]),lP(this,"layout","horizontal")}return Dit(e,[{key:"setDetails",value:function(n){var s,i=n.coordinateList,a=i===void 0?null:i,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,u=n.offset,h=u===void 0?null:u,f=n.mouseHandlerCallback,m=f===void 0?null:f;this.coordinateList=(s=a??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=h??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),a=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,h=a+c+d,f=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:h,pageY:f})}}}])}();function Lit(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],i=e==null?void 0:e[1];if(s&&i&&qt(s)&&qt(i))return!0}return!1}function Fit(e,t,n,s){var i=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-i,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function nhe(e){var t=e.cx,n=e.cy,s=e.radius,i=e.startAngle,a=e.endAngle,o=Us(t,n,s,i),l=Us(t,n,s,a);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:i,endAngle:a}}function $it(e,t,n){var s,i,a,o;if(e==="horizontal")s=t.x,a=s,i=n.top,o=n.top+n.height;else if(e==="vertical")i=t.y,o=i,s=n.left,a=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,h=t.angle,f=Us(l,c,d,h),m=Us(l,c,u,h);s=f.x,i=f.y,a=m.x,o=m.y}else return nhe(t);return[{x:s,y:i},{x:a,y:o}]}function Tj(e){"@babel/helpers - typeof";return Tj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tj(e)}function Sq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function Q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Sq(Object(n),!0).forEach(function(s){Bit(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Bit(e,t,n){return t=Vit(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vit(e){var t=Uit(e,"string");return Tj(t)=="symbol"?t:t+""}function Uit(e,t){if(Tj(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Tj(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qit(e){var t,n,s=e.element,i=e.tooltipEventType,a=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!m||!a||!o||f!=="ScatterChart"&&i!=="axis")return null;var p,g=VS;if(f==="ScatterChart")p=o,g=iet;else if(f==="BarChart")p=Fit(h,o,c,u),g=DM;else if(h==="radial"){var v=nhe(o),x=v.cx,y=v.cy,j=v.radius,w=v.startAngle,N=v.endAngle;p={cx:x,cy:y,startAngle:w,endAngle:N,innerRadius:j,outerRadius:j},g=Jde}else p={points:$it(h,o,c)},g=VS;var S=Q2(Q2(Q2(Q2({stroke:"#ccc",pointerEvents:"none"},c),p),Mr(m,!1)),{},{payload:l,payloadIndex:d,className:on("recharts-tooltip-cursor",m.className)});return b.isValidElement(m)?b.cloneElement(m,S):b.createElement(g,S)}var zit=["item"],Hit=["children","className","width","height","style","compact","title","desc"];function F0(e){"@babel/helpers - typeof";return F0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F0(e)}function rv(){return rv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},rv.apply(this,arguments)}function _q(e,t){return Git(e)||Kit(e,t)||ihe(e,t)||Wit()}function Wit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kit(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,i,a,o,l=[],c=!0,d=!1;try{if(a=(n=n.call(e)).next,t!==0)for(;!(c=(s=a.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,i=u}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw i}}return l}}function Git(e){if(Array.isArray(e))return e}function Cq(e,t){if(e==null)return{};var n=Yit(e,t),s,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Yit(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Xit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qit(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ahe(s.key),s)}}function Zit(e,t,n){return t&&Qit(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jit(e,t,n){return t=d_(t),eat(e,she()?Reflect.construct(t,n||[],d_(e).constructor):t.apply(e,n))}function eat(e,t){if(t&&(F0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tat(e)}function tat(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function she(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(she=function(){return!!e})()}function d_(e){return d_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},d_(e)}function rat(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mO(e,t)}function mO(e,t){return mO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,i){return s.__proto__=i,s},mO(e,t)}function $0(e){return iat(e)||sat(e)||ihe(e)||nat()}function nat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ihe(e,t){if(e){if(typeof e=="string")return pO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pO(e,t)}}function sat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iat(e){if(Array.isArray(e))return pO(e)}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Aq(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,s)}return n}function mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Aq(Object(n),!0).forEach(function(s){$r(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aq(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function $r(e,t,n){return t=ahe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ahe(e){var t=aat(e,"string");return F0(t)=="symbol"?t:t+""}function aat(e,t){if(F0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(F0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oat={xAxis:["bottom","top"],yAxis:["left","right"]},lat={width:"100%",height:"100%"},ohe={x:0,y:0};function Z2(e){return e}var cat=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},dat=function(t,n,s,i){var a=n.find(function(u){return u&&u.index===s});if(a){if(t==="horizontal")return{x:a.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:a.coordinate};if(t==="centric"){var o=a.coordinate,l=i.radius;return mt(mt(mt({},i),Us(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=a.coordinate,d=i.angle;return mt(mt(mt({},i),Us(i.cx,i.cy,c,d)),{},{angle:d,radius:c})}return ohe},NA=function(t,n){var s=n.graphicalItems,i=n.dataStartIndex,a=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat($0(l),$0(d)):l},[]);return o.length>0?o:t&&t.length&&qt(i)&&qt(a)?t.slice(i,a+1):[]};function lhe(e){return e==="number"?[0,"auto"]:void 0}var gO=function(t,n,s,i){var a=t.graphicalItems,o=t.tooltipAxis,l=NA(n,t);return s<0||!a||!a.length||s>=l.length?null:a.reduce(function(c,d){var u,h=(u=d.props.data)!==null&&u!==void 0?u:n;h&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(h=h.slice(t.dataStartIndex,t.dataEndIndex+1));var f;if(o.dataKey&&!o.allowDuplicatedCategory){var m=h===void 0?l:h;f=dS(m,o.dataKey,i)}else f=h&&h[s]||l[s];return f?[].concat($0(c),[Kde(d,f)]):c},[])},kq=function(t,n,s,i){var a=i||{x:t.chartX,y:t.chartY},o=cat(a,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=PXe(o,l,d,c);if(u>=0&&d){var h=d[u]&&d[u].value,f=gO(t,n,u,h),m=dat(s,l,u,a);return{activeTooltipIndex:u,activeLabel:h,activePayload:f,activeCoordinate:m}}return null},uat=function(t,n){var s=n.axes,i=n.graphicalItems,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=t.stackOffset,m=Vde(u,a);return s.reduce(function(p,g){var v,x=g.type.defaultProps!==void 0?mt(mt({},g.type.defaultProps),g.props):g.props,y=x.type,j=x.dataKey,w=x.allowDataOverflow,N=x.allowDuplicatedCategory,S=x.scale,T=x.ticks,C=x.includeHidden,A=x[o];if(p[A])return p;var R=NA(t.data,{graphicalItems:i.filter(function(F){var W,G=o in F.props?F.props[o]:(W=F.type.defaultProps)===null||W===void 0?void 0:W[o];return G===A}),dataStartIndex:c,dataEndIndex:d}),k=R.length,O,$,D;Lit(x.domain,w,y)&&(O=TE(x.domain,null,w),m&&(y==="number"||S!=="auto")&&(D=Yb(R,j,"category")));var q=lhe(y);if(!O||O.length===0){var M,L=(M=x.domain)!==null&&M!==void 0?M:q;if(j){if(O=Yb(R,j,y),y==="category"&&m){var V=y8e(O);N&&V?($=O,O=QS(0,k)):N||(O=XV(L,O,g).reduce(function(F,W){return F.indexOf(W)>=0?F:[].concat($0(F),[W])},[]))}else if(y==="category")N?O=O.filter(function(F){return F!==""&&!sn(F)}):O=XV(L,O,g).reduce(function(F,W){return F.indexOf(W)>=0||W===""||sn(W)?F:[].concat($0(F),[W])},[]);else if(y==="number"){var P=DXe(R,i.filter(function(F){var W,G,H=o in F.props?F.props[o]:(W=F.type.defaultProps)===null||W===void 0?void 0:W[o],se="hide"in F.props?F.props.hide:(G=F.type.defaultProps)===null||G===void 0?void 0:G.hide;return H===A&&(C||!se)}),j,a,u);P&&(O=P)}m&&(y==="number"||S!=="auto")&&(D=Yb(R,j,"category"))}else m?O=QS(0,k):l&&l[A]&&l[A].hasStack&&y==="number"?O=f==="expand"?[0,1]:Wde(l[A].stackGroups,c,d):O=Bde(R,i.filter(function(F){var W=o in F.props?F.props[o]:F.type.defaultProps[o],G="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return W===A&&(C||!G)}),y,u,!0);if(y==="number")O=fO(h,O,A,a,T),L&&(O=TE(L,O,w));else if(y==="category"&&L){var z=L,Z=O.every(function(F){return z.indexOf(F)>=0});Z&&(O=z)}}return mt(mt({},p),{},$r({},A,mt(mt({},x),{},{axisType:a,domain:O,categoricalDomain:D,duplicateDomain:$,originalDomain:(v=x.domain)!==null&&v!==void 0?v:q,isCategorical:m,layout:u})))},{})},hat=function(t,n){var s=n.graphicalItems,i=n.Axis,a=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.layout,h=t.children,f=NA(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),m=f.length,p=Vde(u,a),g=-1;return s.reduce(function(v,x){var y=x.type.defaultProps!==void 0?mt(mt({},x.type.defaultProps),x.props):x.props,j=y[o],w=lhe("number");if(!v[j]){g++;var N;return p?N=QS(0,m):l&&l[j]&&l[j].hasStack?(N=Wde(l[j].stackGroups,c,d),N=fO(h,N,j,a)):(N=TE(w,Bde(f,s.filter(function(S){var T,C,A=o in S.props?S.props[o]:(T=S.type.defaultProps)===null||T===void 0?void 0:T[o],R="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return A===j&&!R}),"number",u),i.defaultProps.allowDataOverflow),N=fO(h,N,j,a)),mt(mt({},v),{},$r({},j,mt(mt({axisType:a},i.defaultProps),{},{hide:!0,orientation:xc(oat,"".concat(a,".").concat(g%2),null),domain:N,originalDomain:w,isCategorical:p,layout:u})))}return v},{})},fat=function(t,n){var s=n.axisType,i=s===void 0?"xAxis":s,a=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,u=t.children,h="".concat(i,"Id"),f=vc(u,a),m={};return f&&f.length?m=uat(t,{axes:f,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=hat(t,{Axis:a,graphicalItems:o,axisType:i,axisIdKey:h,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},mat=function(t){var n=sm(t),s=Gh(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:oM(s,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:FS(n,s)}},Pq=function(t){var n=t.children,s=t.defaultShowTooltip,i=tc(n,P0),a=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(a=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},pat=function(t){return!t||!t.length?!1:t.some(function(n){var s=Jh(n&&n.type);return s&&s.indexOf("Bar")>=0})},Tq=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},gat=function(t,n){var s=t.props,i=t.graphicalItems,a=t.xAxisMap,o=a===void 0?{}:a,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,h=s.children,f=s.margin||{},m=tc(h,P0),p=tc(h,Dm),g=Object.keys(c).reduce(function(N,S){var T=c[S],C=T.orientation;return!T.mirror&&!T.hide?mt(mt({},N),{},$r({},C,N[C]+T.width)):N},{left:f.left||0,right:f.right||0}),v=Object.keys(o).reduce(function(N,S){var T=o[S],C=T.orientation;return!T.mirror&&!T.hide?mt(mt({},N),{},$r({},C,xc(N,"".concat(C))+T.height)):N},{top:f.top||0,bottom:f.bottom||0}),x=mt(mt({},v),g),y=x.bottom;m&&(x.bottom+=m.props.height||P0.defaultProps.height),p&&n&&(x=OXe(x,i,s,n));var j=d-x.left-x.right,w=u-x.top-x.bottom;return mt(mt({brushBottom:y},x),{},{width:Math.max(j,0),height:Math.max(w,0)})},xat=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},zM=function(t){var n=t.chartName,s=t.GraphicalChild,i=t.defaultTooltipEventType,a=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,h=t.defaultProps,f=function(x,y){var j=y.graphicalItems,w=y.stackGroups,N=y.offset,S=y.updateId,T=y.dataStartIndex,C=y.dataEndIndex,A=x.barSize,R=x.layout,k=x.barGap,O=x.barCategoryGap,$=x.maxBarSize,D=Tq(R),q=D.numericAxisName,M=D.cateAxisName,L=pat(j),V=[];return j.forEach(function(P,z){var Z=NA(x.data,{graphicalItems:[P],dataStartIndex:T,dataEndIndex:C}),F=P.type.defaultProps!==void 0?mt(mt({},P.type.defaultProps),P.props):P.props,W=F.dataKey,G=F.maxBarSize,H=F["".concat(q,"Id")],se=F["".concat(M,"Id")],J={},ie=c.reduce(function(Qe,xe){var ae=y["".concat(xe.axisType,"Map")],we=F["".concat(xe.axisType,"Id")];ae&&ae[we]||xe.axisType==="zAxis"||Vg();var Te=ae[we];return mt(mt({},Qe),{},$r($r({},xe.axisType,Te),"".concat(xe.axisType,"Ticks"),Gh(Te)))},J),X=ie[M],he=ie["".concat(M,"Ticks")],fe=w&&w[H]&&w[H].hasStack&&qXe(P,w[H].stackGroups),Q=Jh(P.type).indexOf("Bar")>=0,Oe=FS(X,he),ve=[],ee=L&&TXe({barSize:A,stackGroups:w,totalSize:xat(ie,M)});if(Q){var Ee,Re,oe=sn(G)?$:G,De=(Ee=(Re=FS(X,he,!0))!==null&&Re!==void 0?Re:oe)!==null&&Ee!==void 0?Ee:0;ve=EXe({barGap:k,barCategoryGap:O,bandSize:De!==Oe?De:Oe,sizeList:ee[se],maxBarSize:oe}),De!==Oe&&(ve=ve.map(function(Qe){return mt(mt({},Qe),{},{position:mt(mt({},Qe.position),{},{offset:Qe.position.offset-De/2})})}))}var tt=P&&P.type&&P.type.getComposedData;tt&&V.push({props:mt(mt({},tt(mt(mt({},ie),{},{displayedData:Z,props:x,dataKey:W,item:P,bandSize:Oe,barPosition:ve,offset:N,stackedData:fe,layout:R,dataStartIndex:T,dataEndIndex:C}))),{},$r($r($r({key:P.key||"item-".concat(z)},q,ie[q]),M,ie[M]),"animationId",S)),childIndex:E8e(P,x.children),item:P})}),V},m=function(x,y){var j=x.props,w=x.dataStartIndex,N=x.dataEndIndex,S=x.updateId;if(!qB({props:j}))return null;var T=j.children,C=j.layout,A=j.stackOffset,R=j.data,k=j.reverseStackOrder,O=Tq(C),$=O.numericAxisName,D=O.cateAxisName,q=vc(T,s),M=VXe(R,q,"".concat($,"Id"),"".concat(D,"Id"),A,k),L=c.reduce(function(F,W){var G="".concat(W.axisType,"Map");return mt(mt({},F),{},$r({},G,fat(j,mt(mt({},W),{},{graphicalItems:q,stackGroups:W.axisType===$&&M,dataStartIndex:w,dataEndIndex:N}))))},{}),V=gat(mt(mt({},L),{},{props:j,graphicalItems:q}),y==null?void 0:y.legendBBox);Object.keys(L).forEach(function(F){L[F]=u(j,L[F],V,F.replace("Map",""),n)});var P=L["".concat(D,"Map")],z=mat(P),Z=f(j,mt(mt({},L),{},{dataStartIndex:w,dataEndIndex:N,updateId:S,graphicalItems:q,stackGroups:M,offset:V}));return mt(mt({formattedGraphicalItems:Z,graphicalItems:q,offset:V,stackGroups:M},z),L)},p=function(v){function x(y){var j,w,N;return Xit(this,x),N=Jit(this,x,[y]),$r(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),$r(N,"accessibilityManager",new Iit),$r(N,"handleLegendBBoxUpdate",function(S){if(S){var T=N.state,C=T.dataStartIndex,A=T.dataEndIndex,R=T.updateId;N.setState(mt({legendBBox:S},m({props:N.props,dataStartIndex:C,dataEndIndex:A,updateId:R},mt(mt({},N.state),{},{legendBBox:S}))))}}),$r(N,"handleReceiveSyncEvent",function(S,T,C){if(N.props.syncId===S){if(C===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(T)}}),$r(N,"handleBrushChange",function(S){var T=S.startIndex,C=S.endIndex;if(T!==N.state.dataStartIndex||C!==N.state.dataEndIndex){var A=N.state.updateId;N.setState(function(){return mt({dataStartIndex:T,dataEndIndex:C},m({props:N.props,dataStartIndex:T,dataEndIndex:C,updateId:A},N.state))}),N.triggerSyncEvent({dataStartIndex:T,dataEndIndex:C})}}),$r(N,"handleMouseEnter",function(S){var T=N.getMouseInfo(S);if(T){var C=mt(mt({},T),{},{isTooltipActive:!0});N.setState(C),N.triggerSyncEvent(C);var A=N.props.onMouseEnter;Xr(A)&&A(C,S)}}),$r(N,"triggeredAfterMouseMove",function(S){var T=N.getMouseInfo(S),C=T?mt(mt({},T),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(C),N.triggerSyncEvent(C);var A=N.props.onMouseMove;Xr(A)&&A(C,S)}),$r(N,"handleItemMouseEnter",function(S){N.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),$r(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),$r(N,"handleMouseMove",function(S){S.persist(),N.throttleTriggeredAfterMouseMove(S)}),$r(N,"handleMouseLeave",function(S){N.throttleTriggeredAfterMouseMove.cancel();var T={isTooltipActive:!1};N.setState(T),N.triggerSyncEvent(T);var C=N.props.onMouseLeave;Xr(C)&&C(T,S)}),$r(N,"handleOuterEvent",function(S){var T=T8e(S),C=xc(N.props,"".concat(T));if(T&&Xr(C)){var A,R;/.*touch.*/i.test(T)?R=N.getMouseInfo(S.changedTouches[0]):R=N.getMouseInfo(S),C((A=R)!==null&&A!==void 0?A:{},S)}}),$r(N,"handleClick",function(S){var T=N.getMouseInfo(S);if(T){var C=mt(mt({},T),{},{isTooltipActive:!0});N.setState(C),N.triggerSyncEvent(C);var A=N.props.onClick;Xr(A)&&A(C,S)}}),$r(N,"handleMouseDown",function(S){var T=N.props.onMouseDown;if(Xr(T)){var C=N.getMouseInfo(S);T(C,S)}}),$r(N,"handleMouseUp",function(S){var T=N.props.onMouseUp;if(Xr(T)){var C=N.getMouseInfo(S);T(C,S)}}),$r(N,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),$r(N,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseDown(S.changedTouches[0])}),$r(N,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseUp(S.changedTouches[0])}),$r(N,"handleDoubleClick",function(S){var T=N.props.onDoubleClick;if(Xr(T)){var C=N.getMouseInfo(S);T(C,S)}}),$r(N,"handleContextMenu",function(S){var T=N.props.onContextMenu;if(Xr(T)){var C=N.getMouseInfo(S);T(C,S)}}),$r(N,"triggerSyncEvent",function(S){N.props.syncId!==void 0&&aP.emit(oP,N.props.syncId,S,N.eventEmitterSymbol)}),$r(N,"applySyncEvent",function(S){var T=N.props,C=T.layout,A=T.syncMethod,R=N.state.updateId,k=S.dataStartIndex,O=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)N.setState(mt({dataStartIndex:k,dataEndIndex:O},m({props:N.props,dataStartIndex:k,dataEndIndex:O,updateId:R},N.state)));else if(S.activeTooltipIndex!==void 0){var $=S.chartX,D=S.chartY,q=S.activeTooltipIndex,M=N.state,L=M.offset,V=M.tooltipTicks;if(!L)return;if(typeof A=="function")q=A(V,S);else if(A==="value"){q=-1;for(var P=0;P<V.length;P++)if(V[P].value===S.activeLabel){q=P;break}}var z=mt(mt({},L),{},{x:L.left,y:L.top}),Z=Math.min($,z.x+z.width),F=Math.min(D,z.y+z.height),W=V[q]&&V[q].value,G=gO(N.state,N.props.data,q),H=V[q]?{x:C==="horizontal"?V[q].coordinate:Z,y:C==="horizontal"?F:V[q].coordinate}:ohe;N.setState(mt(mt({},S),{},{activeLabel:W,activeCoordinate:H,activePayload:G,activeTooltipIndex:q}))}else N.setState(S)}),$r(N,"renderCursor",function(S){var T,C=N.state,A=C.isTooltipActive,R=C.activeCoordinate,k=C.activePayload,O=C.offset,$=C.activeTooltipIndex,D=C.tooltipAxisBandSize,q=N.getTooltipEventType(),M=(T=S.props.active)!==null&&T!==void 0?T:A,L=N.props.layout,V=S.key||"_recharts-cursor";return Ae.createElement(qit,{key:V,activeCoordinate:R,activePayload:k,activeTooltipIndex:$,chartName:n,element:S,isActive:M,layout:L,offset:O,tooltipAxisBandSize:D,tooltipEventType:q})}),$r(N,"renderPolarAxis",function(S,T,C){var A=xc(S,"type.axisType"),R=xc(N.state,"".concat(A,"Map")),k=S.type.defaultProps,O=k!==void 0?mt(mt({},k),S.props):S.props,$=R&&R[O["".concat(A,"Id")]];return b.cloneElement(S,mt(mt({},$),{},{className:on(A,$.className),key:S.key||"".concat(T,"-").concat(C),ticks:Gh($,!0)}))}),$r(N,"renderPolarGrid",function(S){var T=S.props,C=T.radialLines,A=T.polarAngles,R=T.polarRadius,k=N.state,O=k.radiusAxisMap,$=k.angleAxisMap,D=sm(O),q=sm($),M=q.cx,L=q.cy,V=q.innerRadius,P=q.outerRadius;return b.cloneElement(S,{polarAngles:Array.isArray(A)?A:Gh(q,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(R)?R:Gh(D,!0).map(function(z){return z.coordinate}),cx:M,cy:L,innerRadius:V,outerRadius:P,key:S.key||"polar-grid",radialLines:C})}),$r(N,"renderLegend",function(){var S=N.state.formattedGraphicalItems,T=N.props,C=T.children,A=T.width,R=T.height,k=N.props.margin||{},O=A-(k.left||0)-(k.right||0),$=Fde({children:C,formattedGraphicalItems:S,legendWidth:O,legendContent:d});if(!$)return null;var D=$.item,q=Cq($,zit);return b.cloneElement(D,mt(mt({},q),{},{chartWidth:A,chartHeight:R,margin:k,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),$r(N,"renderTooltip",function(){var S,T=N.props,C=T.children,A=T.accessibilityLayer,R=tc(C,Zo);if(!R)return null;var k=N.state,O=k.isTooltipActive,$=k.activeCoordinate,D=k.activePayload,q=k.activeLabel,M=k.offset,L=(S=R.props.active)!==null&&S!==void 0?S:O;return b.cloneElement(R,{viewBox:mt(mt({},M),{},{x:M.left,y:M.top}),active:L,label:q,payload:L?D:[],coordinate:$,accessibilityLayer:A})}),$r(N,"renderBrush",function(S){var T=N.props,C=T.margin,A=T.data,R=N.state,k=R.offset,O=R.dataStartIndex,$=R.dataEndIndex,D=R.updateId;return b.cloneElement(S,{key:S.key||"_recharts-brush",onChange:K2(N.handleBrushChange,S.props.onChange),data:A,x:qt(S.props.x)?S.props.x:k.left,y:qt(S.props.y)?S.props.y:k.top+k.height+k.brushBottom-(C.bottom||0),width:qt(S.props.width)?S.props.width:k.width,startIndex:O,endIndex:$,updateId:"brush-".concat(D)})}),$r(N,"renderReferenceElement",function(S,T,C){if(!S)return null;var A=N,R=A.clipPathId,k=N.state,O=k.xAxisMap,$=k.yAxisMap,D=k.offset,q=S.type.defaultProps||{},M=S.props,L=M.xAxisId,V=L===void 0?q.xAxisId:L,P=M.yAxisId,z=P===void 0?q.yAxisId:P;return b.cloneElement(S,{key:S.key||"".concat(T,"-").concat(C),xAxis:O[V],yAxis:$[z],viewBox:{x:D.left,y:D.top,width:D.width,height:D.height},clipPathId:R})}),$r(N,"renderActivePoints",function(S){var T=S.item,C=S.activePoint,A=S.basePoint,R=S.childIndex,k=S.isRange,O=[],$=T.props.key,D=T.item.type.defaultProps!==void 0?mt(mt({},T.item.type.defaultProps),T.item.props):T.item.props,q=D.activeDot,M=D.dataKey,L=mt(mt({index:R,dataKey:M,cx:C.x,cy:C.y,r:4,fill:RM(T.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},Mr(q,!1)),uS(q));return O.push(x.renderActiveDot(q,L,"".concat($,"-activePoint-").concat(R))),A?O.push(x.renderActiveDot(q,mt(mt({},L),{},{cx:A.x,cy:A.y}),"".concat($,"-basePoint-").concat(R))):k&&O.push(null),O}),$r(N,"renderGraphicChild",function(S,T,C){var A=N.filterFormatItem(S,T,C);if(!A)return null;var R=N.getTooltipEventType(),k=N.state,O=k.isTooltipActive,$=k.tooltipAxis,D=k.activeTooltipIndex,q=k.activeLabel,M=N.props.children,L=tc(M,Zo),V=A.props,P=V.points,z=V.isRange,Z=V.baseLine,F=A.item.type.defaultProps!==void 0?mt(mt({},A.item.type.defaultProps),A.item.props):A.item.props,W=F.activeDot,G=F.hide,H=F.activeBar,se=F.activeShape,J=!!(!G&&O&&L&&(W||H||se)),ie={};R!=="axis"&&L&&L.props.trigger==="click"?ie={onClick:K2(N.handleItemMouseEnter,S.props.onClick)}:R!=="axis"&&(ie={onMouseLeave:K2(N.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:K2(N.handleItemMouseEnter,S.props.onMouseEnter)});var X=b.cloneElement(S,mt(mt({},A.props),ie));function he(xe){return typeof $.dataKey=="function"?$.dataKey(xe.payload):null}if(J)if(D>=0){var fe,Q;if($.dataKey&&!$.allowDuplicatedCategory){var Oe=typeof $.dataKey=="function"?he:"payload.".concat($.dataKey.toString());fe=dS(P,Oe,q),Q=z&&Z&&dS(Z,Oe,q)}else fe=P==null?void 0:P[D],Q=z&&Z&&Z[D];if(se||H){var ve=S.props.activeIndex!==void 0?S.props.activeIndex:D;return[b.cloneElement(S,mt(mt(mt({},A.props),ie),{},{activeIndex:ve})),null,null]}if(!sn(fe))return[X].concat($0(N.renderActivePoints({item:A,activePoint:fe,basePoint:Q,childIndex:D,isRange:z})))}else{var ee,Ee=(ee=N.getItemByXY(N.state.activeCoordinate))!==null&&ee!==void 0?ee:{graphicalItem:X},Re=Ee.graphicalItem,oe=Re.item,De=oe===void 0?S:oe,tt=Re.childIndex,Qe=mt(mt(mt({},A.props),ie),{},{activeIndex:tt});return[b.cloneElement(De,Qe),null,null]}return z?[X,null,null]:[X,null]}),$r(N,"renderCustomized",function(S,T,C){return b.cloneElement(S,mt(mt({key:"recharts-customized-".concat(C)},N.props),N.state))}),$r(N,"renderMap",{CartesianGrid:{handler:Z2,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:Z2},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:Z2},YAxis:{handler:Z2},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((j=y.id)!==null&&j!==void 0?j:cy("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=Lce(N.triggeredAfterMouseMove,(w=y.throttleDelay)!==null&&w!==void 0?w:1e3/60),N.state={},N}return rat(x,v),Zit(x,[{key:"componentDidMount",value:function(){var j,w;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,w=j.children,N=j.data,S=j.height,T=j.layout,C=tc(w,Zo);if(C){var A=C.props.defaultIndex;if(!(typeof A!="number"||A<0||A>this.state.tooltipTicks.length-1)){var R=this.state.tooltipTicks[A]&&this.state.tooltipTicks[A].value,k=gO(this.state,N,A,R),O=this.state.tooltipTicks[A].coordinate,$=(this.state.offset.top+S)/2,D=T==="horizontal",q=D?{x:O,y:$}:{y:O,x:$},M=this.state.formattedGraphicalItems.find(function(V){var P=V.item;return P.type.name==="Scatter"});M&&(q=mt(mt({},q),M.props.points[A].tooltipPosition),k=M.props.points[A].tooltipPayload);var L={activeTooltipIndex:A,isTooltipActive:!0,activeLabel:R,activePayload:k,activeCoordinate:q};this.setState(L),this.renderCursor(C),this.accessibilityManager.setIndex(A)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,w){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==w.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var N,S;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(j){HT([tc(j.children,Zo)],[tc(this.props.children,Zo)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=tc(this.props.children,Zo);if(j&&typeof j.props.shared=="boolean"){var w=j.props.shared?"axis":"item";return l.indexOf(w)>=0?w:a}return a}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var w=this.container,N=w.getBoundingClientRect(),S=nWe(N),T={chartX:Math.round(j.pageX-S.left),chartY:Math.round(j.pageY-S.top)},C=N.width/w.offsetWidth||1,A=this.inRange(T.chartX,T.chartY,C);if(!A)return null;var R=this.state,k=R.xAxisMap,O=R.yAxisMap,$=this.getTooltipEventType(),D=kq(this.state,this.props.data,this.props.layout,A);if($!=="axis"&&k&&O){var q=sm(k).scale,M=sm(O).scale,L=q&&q.invert?q.invert(T.chartX):null,V=M&&M.invert?M.invert(T.chartY):null;return mt(mt({},T),{},{xValue:L,yValue:V},D)}return D?mt(mt({},T),D):null}},{key:"inRange",value:function(j,w){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,T=j/N,C=w/N;if(S==="horizontal"||S==="vertical"){var A=this.state.offset,R=T>=A.left&&T<=A.left+A.width&&C>=A.top&&C<=A.top+A.height;return R?{x:T,y:C}:null}var k=this.state,O=k.angleAxisMap,$=k.radiusAxisMap;if(O&&$){var D=sm(O);return JV({x:T,y:C},D)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,w=this.getTooltipEventType(),N=tc(j,Zo),S={};N&&w==="axis"&&(N.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var T=uS(this.props,this.handleOuterEvent);return mt(mt({},T),S)}},{key:"addListener",value:function(){aP.on(oP,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){aP.removeListener(oP,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,w,N){for(var S=this.state.formattedGraphicalItems,T=0,C=S.length;T<C;T++){var A=S[T];if(A.item===j||A.props.key===j.key||w===Jh(A.item.type)&&N===A.childIndex)return A}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,w=this.state.offset,N=w.left,S=w.top,T=w.height,C=w.width;return Ae.createElement("defs",null,Ae.createElement("clipPath",{id:j},Ae.createElement("rect",{x:N,y:S,height:T,width:C})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(w,N){var S=_q(N,2),T=S[0],C=S[1];return mt(mt({},w),{},$r({},T,C.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(w,N){var S=_q(N,2),T=S[0],C=S[1];return mt(mt({},w),{},$r({},T,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var w;return(w=this.state.xAxisMap)===null||w===void 0||(w=w[j])===null||w===void 0?void 0:w.scale}},{key:"getYScaleByAxisId",value:function(j){var w;return(w=this.state.yAxisMap)===null||w===void 0||(w=w[j])===null||w===void 0?void 0:w.scale}},{key:"getItemByXY",value:function(j){var w=this.state,N=w.formattedGraphicalItems,S=w.activeItem;if(N&&N.length)for(var T=0,C=N.length;T<C;T++){var A=N[T],R=A.props,k=A.item,O=k.type.defaultProps!==void 0?mt(mt({},k.type.defaultProps),k.props):k.props,$=Jh(k.type);if($==="Bar"){var D=(R.data||[]).find(function(V){return $Je(j,V)});if(D)return{graphicalItem:A,payload:D}}else if($==="RadialBar"){var q=(R.data||[]).find(function(V){return JV(j,V)});if(q)return{graphicalItem:A,payload:q}}else if(gA(A,S)||xA(A,S)||Nj(A,S)){var M=Ptt({graphicalItem:A,activeTooltipItem:S,itemData:O.data}),L=O.activeIndex===void 0?M:O.activeIndex;return{graphicalItem:mt(mt({},A),{},{childIndex:L}),payload:Nj(A,S)?O.data[M]:A.props.data[M]}}}return null}},{key:"render",value:function(){var j=this;if(!qB(this))return null;var w=this.props,N=w.children,S=w.className,T=w.width,C=w.height,A=w.style,R=w.compact,k=w.title,O=w.desc,$=Cq(w,Hit),D=Mr($,!1);if(R)return Ae.createElement(oq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ae.createElement(KT,rv({},D,{width:T,height:C,title:k,desc:O}),this.renderClipPath(),HB(N,this.renderMap)));if(this.props.accessibilityLayer){var q,M;D.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,D.role=(M=this.props.role)!==null&&M!==void 0?M:"application",D.onKeyDown=function(V){j.accessibilityManager.keyboardEvent(V)},D.onFocus=function(){j.accessibilityManager.focus()}}var L=this.parseEventsOfWrapper();return Ae.createElement(oq,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Ae.createElement("div",rv({className:on("recharts-wrapper",S),style:mt({position:"relative",cursor:"default",width:T,height:C},A)},L,{ref:function(P){j.container=P}}),Ae.createElement(KT,rv({},D,{width:T,height:C,title:k,desc:O,style:lat}),this.renderClipPath(),HB(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(b.Component);$r(p,"displayName",n),$r(p,"defaultProps",mt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},h)),$r(p,"getDerivedStateFromProps",function(v,x){var y=v.dataKey,j=v.data,w=v.children,N=v.width,S=v.height,T=v.layout,C=v.stackOffset,A=v.margin,R=x.dataStartIndex,k=x.dataEndIndex;if(x.updateId===void 0){var O=Pq(v);return mt(mt(mt({},O),{},{updateId:0},m(mt(mt({props:v},O),{},{updateId:0}),x)),{},{prevDataKey:y,prevData:j,prevWidth:N,prevHeight:S,prevLayout:T,prevStackOffset:C,prevMargin:A,prevChildren:w})}if(y!==x.prevDataKey||j!==x.prevData||N!==x.prevWidth||S!==x.prevHeight||T!==x.prevLayout||C!==x.prevStackOffset||!_v(A,x.prevMargin)){var $=Pq(v),D={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},q=mt(mt({},kq(x,j,T)),{},{updateId:x.updateId+1}),M=mt(mt(mt({},$),D),q);return mt(mt(mt({},M),m(mt({props:v},M),x)),{},{prevDataKey:y,prevData:j,prevWidth:N,prevHeight:S,prevLayout:T,prevStackOffset:C,prevMargin:A,prevChildren:w})}if(!HT(w,x.prevChildren)){var L,V,P,z,Z=tc(w,P0),F=Z&&(L=(V=Z.props)===null||V===void 0?void 0:V.startIndex)!==null&&L!==void 0?L:R,W=Z&&(P=(z=Z.props)===null||z===void 0?void 0:z.endIndex)!==null&&P!==void 0?P:k,G=F!==R||W!==k,H=!sn(j),se=H&&!G?x.updateId:x.updateId+1;return mt(mt({updateId:se},m(mt(mt({props:v},x),{},{updateId:se,dataStartIndex:F,dataEndIndex:W}),x)),{},{prevChildren:w,dataStartIndex:F,dataEndIndex:W})}return null}),$r(p,"renderActiveDot",function(v,x,y){var j;return b.isValidElement(v)?j=b.cloneElement(v,x):Xr(v)?j=v(x):j=Ae.createElement(uA,x),Ae.createElement(Un,{className:"recharts-active-dot",key:y},j)});var g=b.forwardRef(function(x,y){return Ae.createElement(p,rv({},x,{ref:y}))});return g.displayName=p.displayName,g},vat=zM({chartName:"LineChart",GraphicalChild:jw,axisComponents:[{axisType:"xAxis",AxisComp:Jm},{axisType:"yAxis",AxisComp:ep}],formatAxisMap:Aue}),u_=zM({chartName:"BarChart",GraphicalChild:ru,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Jm},{axisType:"yAxis",AxisComp:ep}],formatAxisMap:Aue}),che=zM({chartName:"PieChart",GraphicalChild:gh,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:pA},{axisType:"radiusAxis",AxisComp:fA}],formatAxisMap:JXe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const cP=[{key:"submitted",label:"New Applications",color:"#3b82f6"},{key:"under_scrutiny",label:"Under Scrutiny",color:"#f97316"},{key:"forwarded_to_dtdo",label:"Forwarded to DTDO",color:"#0ea5e9"},{key:"dtdo_review",label:"DTDO Review",color:"#6366f1"},{key:"inspection_scheduled",label:"Inspection Scheduled",color:"#8b5cf6"},{key:"inspection_under_review",label:"Inspection Review",color:"#a855f7"},{key:"reverted_to_applicant",label:"Sent Back",color:"#facc15"},{key:"approved",label:"Approved",color:"#10b981"},{key:"rejected",label:"Rejected",color:"#ef4444"},{key:"draft",label:"Draft",color:"#94a3b8"}],dP={diamond:"hsl(var(--primary))",gold:"hsl(var(--secondary))",silver:"#94a3b8"},yat={totalApplications:19705,approvedApplications:16301,rejectedApplications:1142,pendingApplications:2262,scrapedAt:new Date};function bat(){const[,e]=Dr(),{data:t,isLoading:n,error:s}=rt({queryKey:["/api/analytics/dashboard"],retry:!1}),{data:i}=rt({queryKey:["/api/analytics/production-stats"]}),a=(i==null?void 0:i.stats)||yat;if(n)return r.jsx("div",{className:"bg-background p-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"h-8 bg-muted rounded w-64 animate-pulse mb-2"}),r.jsx("div",{className:"h-4 bg-muted rounded w-96 animate-pulse"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(A=>r.jsx(me,{children:r.jsxs(Ce,{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-muted rounded w-20 animate-pulse"}),r.jsx("div",{className:"h-8 bg-muted rounded w-16 animate-pulse"})]})},A))})]})});if(s)return r.jsx("div",{className:"bg-background flex items-center justify-center px-4 py-16",children:r.jsxs(me,{className:"max-w-lg w-full shadow-lg border-dashed",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(Kr,{className:"w-5 h-5"}),"Unable to load analytics"]}),r.jsx(Ue,{children:s instanceof Error?s.message.replace(/^\d+:\s*/,""):"Please refresh the page or log in again."})]}),r.jsxs(ge,{className:"flex gap-3",children:[r.jsx(te,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh"}),r.jsx(te,{variant:"default",onClick:()=>window.location.href="/dashboard",children:"Go to dashboard"})]})]})});if(!t)return null;const{overview:o,districts:l,recentApplications:c}=t,d=o.byStatus||{},u=(A,R=[])=>{const k=d[A];if(typeof k=="number")return k;for(const O of R){const $=d[O];if(typeof $=="number")return $}return 0},h={submitted:u("submitted",["pending"]),under_scrutiny:u("under_scrutiny",["district_review"]),forwarded_to_dtdo:u("forwarded_to_dtdo"),dtdo_review:u("dtdo_review",["state_review"]),inspection_scheduled:u("inspection_scheduled"),inspection_under_review:u("inspection_under_review"),reverted_to_applicant:u("reverted_to_applicant"),approved:u("approved",["approved"]),rejected:u("rejected",["rejected"]),draft:u("draft",["draft"])},f=h.submitted,m=h.under_scrutiny,p=h.forwarded_to_dtdo,g=h.dtdo_review,v=h.inspection_scheduled+h.inspection_under_review,x=h.approved,j=cP.map(({key:A,label:R,color:k})=>({key:A,name:R,value:h[A],color:k})).filter(A=>A.value>0),w=[{name:"Diamond",value:o.byCategory.diamond,color:dP.diamond},{name:"Gold",value:o.byCategory.gold,color:dP.gold},{name:"Silver",value:o.byCategory.silver,color:dP.silver}],N=Object.entries(l).filter(([A])=>A&&A!=="0"&&A!=="null"&&A!=="undefined"&&A.trim()!=="").map(([A,R])=>({name:A,count:R})).sort((A,R)=>R.count-A.count).slice(0,10),S=A=>{const R=C(A);return{submitted:"secondary",under_scrutiny:"default",forwarded_to_dtdo:"default",dtdo_review:"default",inspection_scheduled:"default",inspection_under_review:"default",reverted_to_applicant:"outline",approved:"default",rejected:"destructive",draft:"outline"}[R]||"secondary"},T=A=>{const R=C(A),k=cP.find(O=>O.key===R);return k?k.label:(A??"Unknown").replace(/_/g," ").replace(/\b\w/g,O=>O.toUpperCase())},C=A=>{const R=(A??"").trim().toLowerCase(),k={pending:"submitted",district_review:"under_scrutiny",state_review:"dtdo_review"};return k[R]?k[R]:new Set(cP.map($=>$.key)).has(R)?R:"draft"};return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[a&&r.jsxs(me,{className:"mb-8 border-primary/20",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(nve,{className:"w-5 h-5 text-primary"}),"Live Production Portal Statistics"]}),r.jsxs(Ue,{children:["Combined Statistics (Legacy System + New Portal)",a.scrapedAt&&r.jsxs("span",{className:"ml-2 text-xs",children:[" Last updated: ",new Date(a.scrapedAt).toLocaleString("en-IN")]})]})]}),r.jsx(ge,{children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Applications"}),r.jsx("p",{className:"text-3xl font-bold","data-testid":"prod-stat-total",children:a.totalApplications.toLocaleString("en-IN")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Approved"}),r.jsx("p",{className:"text-3xl font-bold text-green-600","data-testid":"prod-stat-approved",children:a.approvedApplications.toLocaleString("en-IN")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Rejected"}),r.jsx("p",{className:"text-3xl font-bold text-red-600","data-testid":"prod-stat-rejected",children:a.rejectedApplications.toLocaleString("en-IN")})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Pending"}),r.jsx("p",{className:"text-3xl font-bold text-orange-600","data-testid":"prod-stat-pending",children:a.pendingApplications.toLocaleString("en-IN")})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=submitted&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"New Applications"}),r.jsx(ir,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-new",children:f}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting initial scrutiny"})]})]}),r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=under_scrutiny&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Under Scrutiny"}),r.jsx(Vs,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-scrutiny",children:m}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"With dealing assistants"})]})]}),r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=forwarded_to_dtdo&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Forwarded to DTDO"}),r.jsx(bve,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-forwarded",children:p}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting district tourism action"})]})]}),r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=site_inspection_scheduled&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Inspection / DTDO Review"}),r.jsx(kr,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-dtdo",children:g+v}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Under inspection or officer review"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=rc_issued&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Approved Applications"}),r.jsx(kr,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-approved",children:x}),r.jsx("p",{className:"text-xs text-muted-foreground",children:o.total>0?`${Math.round(x/o.total*100)}% approval rate`:"No approvals yet"})]})]}),r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=rc_issued&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Avg Processing Time"}),r.jsx(Vs,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsxs("div",{className:"text-2xl font-bold","data-testid":"stat-processing-time",children:[o.avgProcessingTime," days"]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:o.avgProcessingTime<=15?"Within 15-day SLA":"Above SLA target"})]})]}),r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Total Applications"}),r.jsx(ir,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total",children:o.total}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"All submissions in the system"})]})]}),r.jsxs(me,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>e("/workflow-monitoring?status=rc_issued&tab=pipeline"),children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Registered Owners"}),r.jsx(Do,{className:"w-4 h-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-owners",children:o.totalOwners}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Active property-owner accounts"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(cd,{className:"w-5 h-5"}),"Application Status Distribution"]}),r.jsx(Ue,{children:"Current workflow stage breakdown"})]}),r.jsx(ge,{children:j.length===0?r.jsx("div",{className:"text-center text-sm text-muted-foreground py-12",children:"No applications in the workflow yet."}):r.jsx(Cv,{width:"100%",height:300,children:r.jsxs(che,{children:[r.jsx(gh,{data:j,cx:"50%",cy:"50%",labelLine:!1,label:({name:A,percent:R})=>R>0?`${A}: ${(R*100).toFixed(0)}%`:null,outerRadius:80,fill:"#8884d8",dataKey:"value",children:j.map((A,R)=>r.jsx(y0,{fill:A.color},`cell-${R}`))}),r.jsx(Zo,{})]})})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Zv,{className:"w-5 h-5"}),"Category Distribution"]}),r.jsx(Ue,{children:"Diamond, Gold, Silver breakdown"})]}),r.jsx(ge,{children:r.jsx(Cv,{width:"100%",height:300,children:r.jsxs(u_,{data:w,children:[r.jsx(kj,{strokeDasharray:"3 3"}),r.jsx(Jm,{dataKey:"name"}),r.jsx(ep,{}),r.jsx(Zo,{}),r.jsx(ru,{dataKey:"value",fill:"hsl(var(--primary))",children:w.map((A,R)=>r.jsx(y0,{fill:A.color},`cell-${R}`))})]})})})]})]}),r.jsxs(me,{className:"mb-8",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"w-5 h-5"}),"Top Districts by Applications"]}),r.jsx(Ue,{children:"Geographic distribution across Himachal Pradesh"})]}),r.jsx(ge,{children:N.length===0?r.jsx("div",{className:"h-[300px] flex items-center justify-center text-muted-foreground",children:r.jsx("p",{children:"No district data available"})}):r.jsx(Cv,{width:"100%",height:300,children:r.jsxs(u_,{data:N,children:[r.jsx(kj,{strokeDasharray:"3 3"}),r.jsx(Jm,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),r.jsx(ep,{}),r.jsx(Zo,{formatter:A=>[`${A} applications`,"Count"]}),r.jsx(ru,{dataKey:"count",fill:"hsl(var(--primary))",radius:[4,4,0,0]})]})})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Recent Applications"}),r.jsx(Ue,{children:"Latest 10 submissions to the system"})]}),r.jsx(ge,{children:r.jsx("div",{className:"space-y-3",children:c.length===0?r.jsx("p",{className:"text-center text-muted-foreground py-8",children:"No applications yet"}):c.map(A=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border","data-testid":`recent-app-${A.id}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium",children:A.propertyName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[A.district,"  ",A.ownerName]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ze,{variant:S(A.status),children:T(A.status)}),A.submittedAt&&r.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(A.submittedAt).toLocaleDateString()})]})]},A.id))})})]})]})})}function jat(){const e=[{name:"Registration Portal",status:"operational",icon:D_,description:"Homestay & B&B Registration Services"},{name:"HimKosh Payment Gateway",status:"operational",icon:_a,description:"Online fee payment processing"},{name:"SMS Notification Service",status:"operational",icon:dc,description:"OTP and status alerts"},{name:"Helpline Support (1077)",status:"operational",icon:Kg,description:"24/7 Citizen Support"}];return r.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans",children:[r.jsx(jf,{title:"HP Tourism Portal",subtitle:"System Status",showHome:!0,showBack:!0}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-12",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-4",children:"System Operational Status"}),r.jsx("p",{className:"text-slate-600",children:"Real-time status of portal services and dependencies."})]}),r.jsxs("div",{className:"grid gap-6",children:[r.jsx(me,{className:"border-green-200 bg-green-50",children:r.jsxs(ge,{className:"flex items-center gap-4 p-6",children:[r.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:r.jsx(Fr,{className:"w-8 h-8 text-green-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-green-900",children:"All Systems Operational"}),r.jsx("p",{className:"text-green-700 text-sm",children:"Last updated: Just now"})]})]})}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6 mt-6",children:e.map(t=>r.jsxs(me,{className:"border-slate-200 shadow-sm hover:shadow-md transition-shadow",children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:r.jsx(t.icon,{className:"w-5 h-5 text-slate-600"})}),r.jsx(ke,{className:"text-base font-semibold text-slate-800",children:t.name})]}),r.jsxs(ze,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 flex gap-1 items-center",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),"Operational"]})]}),r.jsx(ge,{children:r.jsx("p",{className:"text-sm text-slate-500",children:t.description})})]},t.name))}),r.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-100 rounded-lg flex gap-3 text-sm text-blue-800",children:[r.jsx(Na,{className:"w-5 h-5 flex-shrink-0"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Scheduled Maintenance:"})," No maintenance is currently scheduled for the next 7 days."]})]})]})]})]})}var HM="Popover",[dhe]=oa(HM,[sp]),ww=sp(),[wat,fp]=dhe(HM),uhe=e=>{const{__scopePopover:t,children:n,open:s,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,l=ww(t),c=b.useRef(null),[d,u]=b.useState(!1),[h=!1,f]=bc({prop:s,defaultProp:i,onChange:a});return r.jsx(z_,{...l,children:r.jsx(wat,{scope:t,contentId:mc(),triggerRef:c,open:h,onOpenChange:f,onOpenToggle:b.useCallback(()=>f(m=>!m),[f]),hasCustomAnchor:d,onCustomAnchorAdd:b.useCallback(()=>u(!0),[]),onCustomAnchorRemove:b.useCallback(()=>u(!1),[]),modal:o,children:n})})};uhe.displayName=HM;var hhe="PopoverAnchor",Nat=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,i=fp(hhe,n),a=ww(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return b.useEffect(()=>(o(),()=>l()),[o,l]),r.jsx(zj,{...a,...s,ref:t})});Nat.displayName=hhe;var fhe="PopoverTrigger",mhe=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,i=fp(fhe,n),a=ww(n),o=Jr(t,i.triggerRef),l=r.jsx(ar.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":yhe(i.open),...s,ref:o,onClick:$t(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:r.jsx(zj,{asChild:!0,...a,children:l})});mhe.displayName=fhe;var WM="PopoverPortal",[Sat,_at]=dhe(WM,{forceMount:void 0}),phe=e=>{const{__scopePopover:t,forceMount:n,children:s,container:i}=e,a=fp(WM,t);return r.jsx(Sat,{scope:t,forceMount:n,children:r.jsx(la,{present:n||a.open,children:r.jsx(W0,{asChild:!0,container:i,children:s})})})};phe.displayName=WM;var B0="PopoverContent",ghe=b.forwardRef((e,t)=>{const n=_at(B0,e.__scopePopover),{forceMount:s=n.forceMount,...i}=e,a=fp(B0,e.__scopePopover);return r.jsx(la,{present:s||a.open,children:a.modal?r.jsx(Aat,{...i,ref:t}):r.jsx(kat,{...i,ref:t})})});ghe.displayName=B0;var Cat=Um("PopoverContent.RemoveScroll"),Aat=b.forwardRef((e,t)=>{const n=fp(B0,e.__scopePopover),s=b.useRef(null),i=Jr(t,s),a=b.useRef(!1);return b.useEffect(()=>{const o=s.current;if(o)return J_(o)},[]),r.jsx(Wj,{as:Cat,allowPinchZoom:!0,children:r.jsx(xhe,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$t(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),a.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:$t(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:$t(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),kat=b.forwardRef((e,t)=>{const n=fp(B0,e.__scopePopover),s=b.useRef(!1),i=b.useRef(!1);return r.jsx(xhe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,a),a.defaultPrevented||(s.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:a=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(s.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),xhe=b.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...h}=e,f=fp(B0,n),m=ww(n);return Q_(),r.jsx(Hj,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:a,children:r.jsx(Gg,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>f.onOpenChange(!1),children:r.jsx(H_,{"data-state":yhe(f.open),role:"dialog",id:f.contentId,...m,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),vhe="PopoverClose",Pat=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,i=fp(vhe,n);return r.jsx(ar.button,{type:"button",...s,ref:t,onClick:$t(e.onClick,()=>i.onOpenChange(!1))})});Pat.displayName=vhe;var Tat="PopoverArrow",Eat=b.forwardRef((e,t)=>{const{__scopePopover:n,...s}=e,i=ww(n);return r.jsx(W_,{...i,...s,ref:t})});Eat.displayName=Tat;function yhe(e){return e?"open":"closed"}var Oat=uhe,Rat=mhe,Dat=phe,bhe=ghe;const KM=Oat,GM=Rat,SA=b.forwardRef(({className:e,align:t="center",sideOffset:n=4,...s},i)=>r.jsx(Dat,{children:r.jsx(bhe,{ref:i,align:t,sideOffset:n,className:Xe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...s})}));SA.displayName=bhe.displayName;function Mat(){const[e,t]=b.useState(!1),[n,s]=b.useState([]),{data:i=[]}=rt({queryKey:["/api/applications/all"],refetchInterval:3e4});b.useEffect(()=>{if(!i||i.length===0)return;const c=[];i.forEach(p=>{if(!p.submittedAt||p.status==="approved"||p.status==="rejected")return;const g=Math.floor((new Date().getTime()-new Date(p.submittedAt).getTime())/(1e3*60*60*24));g>15?c.push({id:`sla-critical-${p.id}`,type:"sla_breach",title:"Critical SLA Breach",message:`Application ${p.applicationNumber} (${p.propertyName}) has been pending for ${g} days - exceeds 15-day target!`,severity:"critical",timestamp:new Date(p.submittedAt),applicationId:p.id,read:!1}):g>10&&c.push({id:`sla-warning-${p.id}`,type:"sla_breach",title:"SLA Warning",message:`Application ${p.applicationNumber} approaching deadline (${g}/15 days)`,severity:"warning",timestamp:new Date(p.submittedAt),applicationId:p.id,read:!1})});const d=i.reduce((p,g)=>{const v=g.status||"unknown";return p[v]||(p[v]=[]),p[v].push(g),p},{});Object.entries(d).forEach(([p,g])=>{p==="approved"||p==="rejected"||(g.length>10?c.push({id:`bottleneck-${p}`,type:"bottleneck",title:"Bottleneck Detected",message:`${g.length} applications stuck in "${p.replace(/_/g," ")}" stage - needs immediate attention!`,severity:"critical",timestamp:new Date,read:!1}):g.length>=5&&c.push({id:`bottleneck-warning-${p}`,type:"bottleneck",title:"Potential Bottleneck",message:`${g.length} applications in "${p.replace(/_/g," ")}" stage`,severity:"warning",timestamp:new Date,read:!1}))});const u=new Date;u.setHours(0,0,0,0);const h=i.filter(p=>p.submittedAt&&new Date(p.submittedAt)>=u);h.length>0&&c.push({id:"new-today",type:"new_application",title:"New Applications",message:`${h.length} new application${h.length>1?"s":""} submitted today`,severity:"info",timestamp:new Date,read:!1});const f=i.filter(p=>p.status==="document_verification"||p.status==="site_inspection_scheduled");f.length>0&&c.push({id:"pending-review",type:"pending_review",title:"Pending Reviews",message:`${f.length} application${f.length>1?"s require":" requires"} your review`,severity:"info",timestamp:new Date,read:!1});const m={critical:0,warning:1,info:2,success:3};c.sort((p,g)=>{const v=m[p.severity]-m[g.severity];return v!==0?v:g.timestamp.getTime()-p.timestamp.getTime()}),s(c)},[i]);const a=n.filter(c=>!c.read).length,o=c=>{switch(c){case"sla_breach":return jn;case"bottleneck":return Kr;case"approval":return kr;case"new_application":return ir;case"pending_review":return Vs;default:return Fm}},l=c=>{switch(c){case"critical":return"text-red-600 bg-red-50 border-red-200";case"warning":return"text-orange-600 bg-orange-50 border-orange-200";case"success":return"text-green-600 bg-green-50 border-green-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}};return r.jsxs(KM,{open:e,onOpenChange:t,children:[r.jsx(GM,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:"relative","data-testid":"button-notifications",children:[r.jsx(Fm,{className:"h-4 w-4 mr-2"}),"Alerts",a>0&&r.jsx(ze,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs","data-testid":"badge-unread-count",children:a})]})}),r.jsx(SA,{className:"w-96 p-0",align:"end",children:r.jsxs(me,{className:"border-0 shadow-none",children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(ke,{className:"text-lg",children:"Notifications"}),r.jsxs(ze,{variant:"secondary","data-testid":"badge-total-notifications",children:[n.length," total"]})]}),r.jsx(Ue,{children:"Real-time alerts and workflow updates"})]}),r.jsx(oc,{}),r.jsx(ge,{className:"p-0",children:r.jsx(P6,{className:"h-96",children:n.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[r.jsx(kr,{className:"h-12 w-12 mb-3 text-green-600"}),r.jsx("p",{className:"text-sm",children:"All caught up!"}),r.jsx("p",{className:"text-xs",children:"No new notifications"})]}):r.jsx("div",{className:"divide-y",children:n.map(c=>{const d=o(c.type);return r.jsx("div",{className:`p-4 hover:bg-muted/50 transition-colors cursor-pointer border-l-4 ${l(c.severity)}`,"data-testid":`notification-${c.id}`,children:r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-1",children:r.jsx(d,{className:"h-5 w-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm mb-1",children:c.title}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:c.message}),r.jsx("p",{className:"text-xs text-muted-foreground",children:ap(c.timestamp,{addSuffix:!0})})]})]})},c.id)})})})})]})})]})}const jhe={total:15};function Iat(){var N;const[e,t]=Dr(),n=b.useMemo(()=>{const S=e.includes("?")?e.split("?")[1]:"";return new URLSearchParams(S)},[e]),s=n.get("status"),i=n.get("tab")||"pipeline",[a,o]=b.useState(i),[l,c]=b.useState(s),[d,u]=b.useState("all"),[h,f]=b.useState("");b.useEffect(()=>{const S=n.get("status"),T=n.get("tab");S&&c(S),T&&o(T)},[n]);const{data:m=[],isLoading:p,error:g}=rt({queryKey:["/api/applications/all"],refetchInterval:3e4,retry:1}),v=b.useMemo(()=>{const S=new Set(m.map(T=>T.district).filter(Boolean));return Array.from(S).sort()},[m]),x=b.useMemo(()=>d!=="all"?m.filter(S=>S.district===d):m,[m,d]),y=b.useMemo(()=>{let S=x;return l&&(l==="submission"?S=S.filter(T=>T.status==="submitted"):l==="under_scrutiny"||l==="da_scrutiny"?S=S.filter(T=>["document_verification","under_scrutiny"].includes(T.status||"")):l==="forwarded_to_dtdo"||l==="dtdo_verification"?S=S.filter(T=>["forwarded_to_dtdo","dtdo_review"].includes(T.status||"")):l==="site_inspection_scheduled"||l==="inspection_phase"?S=S.filter(T=>["site_inspection_scheduled","site_inspection_complete"].includes(T.status||"")):l==="payment_pending"?S=S.filter(T=>T.status==="payment_pending"):l==="rc_issued"?S=S.filter(T=>T.status==="approved"):S=S.filter(T=>T.status===l)),S},[x,l]),j=zat(x),w=Hat(x);if(Wat(x),p)return r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Pm,{className:"h-12 w-12 animate-spin mx-auto mb-4 text-primary"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading workflow monitoring dashboard..."})]})})});if(g){const S=g;return(N=S==null?void 0:S.message)!=null&&N.startsWith("403")?r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs(me,{className:"max-w-2xl mx-auto",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(Kr,{className:"h-6 w-6"}),"Access Denied"]}),r.jsx(Ue,{children:"You do not have permission to access the Workflow Monitoring Dashboard."})]}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"This dashboard is restricted to government officers (Dealing Assistants, DTDOs, District Officers, State Officers, and Administrators). Property owners can track their individual applications through the main dashboard."}),r.jsx(te,{onClick:()=>t("/dashboard"),"data-testid":"button-back-to-dashboard",children:"Go to Dashboard"})]})]})}):r.jsx("div",{className:"container mx-auto px-4 py-8",children:r.jsxs(me,{className:"max-w-2xl mx-auto",children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(Kr,{className:"h-6 w-6"}),"Error Loading Dashboard"]})}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-muted-foreground mb-4",children:"Unable to load the workflow monitoring dashboard. Please try refreshing the page."}),r.jsx(te,{onClick:()=>t("/workflow-monitoring"),"data-testid":"button-retry",children:"Retry"})]})]})})}return r.jsxs("div",{className:"container mx-auto px-4 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2","data-testid":"text-page-title",children:"Workflow Monitoring Dashboard"}),r.jsx("p",{className:"text-muted-foreground","data-testid":"text-page-subtitle",children:"Oversight console for spotting bottlenecks across the homestay pipeline"})]}),r.jsxs("div",{className:"flex gap-3 items-center",children:[r.jsx("div",{className:"w-[200px]",children:r.jsxs(pr,{value:d,onValueChange:u,children:[r.jsx(ur,{"data-testid":"select-district-filter",children:r.jsx(yr,{placeholder:"All Districts"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"all",children:"All Districts"}),v.map(S=>r.jsx(it,{value:S,children:S},S))]})]})}),r.jsx("div",{className:"w-[200px]",children:r.jsxs(pr,{value:l||"all_statuses",onValueChange:S=>c(S==="all_statuses"?null:S),children:[r.jsx(ur,{"data-testid":"select-status-filter",children:r.jsx(yr,{placeholder:"All Statuses"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"all_statuses",children:"All Statuses"}),r.jsx(it,{value:"submitted",children:"Submission"}),r.jsx(it,{value:"under_scrutiny",children:"DA Scrutiny"}),r.jsx(it,{value:"forwarded_to_dtdo",children:"DTDO Verification"}),r.jsx(it,{value:"site_inspection_scheduled",children:"Inspection"}),r.jsx(it,{value:"payment_pending",children:"Payment Pending"}),r.jsx(it,{value:"approved",children:"Approved"}),r.jsx(it,{value:"rejected",children:"Rejected"}),r.jsx(it,{value:"sent_back_for_corrections",children:"Sent Back (Corrections)"})]})]})}),r.jsx(Mat,{}),r.jsxs(te,{onClick:()=>t("/workflow-monitoring"),"data-testid":"button-refresh",children:[r.jsx(Pm,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx(J2,{title:"Active Pipeline",value:j.activePipeline,icon:ir,trend:`+${j.newToday} received today`,variant:"default",onClick:()=>{c(null),o("pipeline")}}),r.jsx(J2,{title:"Critical Bottlenecks",value:j.criticalBottlenecks,icon:jn,trend:j.mostDelayedStage?`Most delays: ${j.mostDelayedStage}`:"Running smooth",variant:j.criticalBottlenecks>0?"destructive":"default",onClick:()=>o("bottlenecks")}),r.jsx(J2,{title:"Avg. Processing Time",value:j.avgProcessingTime,valueSuffix:" days",icon:Vs,trend:`Target: ${jhe.total} days`,variant:"default",onClick:()=>{c("rc_issued"),o("pipeline")}}),r.jsx(J2,{title:"Registered Homestays",value:j.totalCertificates,icon:kr,trend:`+${j.completedThisWeek} this week`,variant:"success",onClick:()=>{c("rc_issued"),o("pipeline")}})]}),r.jsxs(aa,{value:a,onValueChange:o,className:"space-y-6",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-4",children:[r.jsxs(Pr,{value:"pipeline","data-testid":"tab-pipeline",children:[r.jsx(Pm,{className:"h-4 w-4 mr-2"}),"Pipeline View"]}),r.jsxs(Pr,{value:"bottlenecks","data-testid":"tab-bottlenecks",children:[r.jsx(jn,{className:"h-4 w-4 mr-2"}),"Bottlenecks (",w.length,")"]}),r.jsxs(Pr,{value:"districts","data-testid":"tab-districts",children:[r.jsx(Js,{className:"h-4 w-4 mr-2"}),"District Performance"]}),r.jsxs(Pr,{value:"officers","data-testid":"tab-officers",children:[r.jsx(Do,{className:"h-4 w-4 mr-2"}),"Officer Workload"]})]}),r.jsxs(Rr,{value:"pipeline",className:"space-y-6",children:[r.jsx(Lat,{applications:x,onStageClick:c,activeFilter:l}),r.jsx(Fat,{applications:y,statusFilter:l,searchQuery:h,onClearFilter:()=>c(null),onSearchChange:f})]}),r.jsx(Rr,{value:"bottlenecks",className:"space-y-6",children:r.jsx(Vat,{bottlenecks:w,applications:x})}),r.jsx(Rr,{value:"districts",className:"space-y-6",children:r.jsx(Uat,{applications:x})}),r.jsx(Rr,{value:"officers",className:"space-y-6",children:r.jsx(qat,{applications:x})})]})]})}function J2({title:e,value:t,valueSuffix:n,icon:s,trend:i,variant:a="default",onClick:o,className:l}){const c={default:"text-primary bg-primary/10",success:"text-green-600 bg-green-50",warning:"text-orange-600 bg-orange-50",destructive:"text-red-600 bg-red-50"};return r.jsxs(me,{className:`${o?"cursor-pointer hover:shadow-md transition-shadow":""} ${l}`,onClick:o,children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:e}),r.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center ${c[a]}`,children:r.jsx(s,{className:"h-5 w-5"})})]}),r.jsxs(ge,{children:[r.jsxs("div",{className:"text-2xl font-bold",children:[t,n?r.jsxs("span",{className:"text-base font-medium text-muted-foreground",children:[" ",n]}):null]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i})]})]})}function Lat({applications:e,onStageClick:t,activeFilter:n}){const i=[{id:"submission",label:"Submission",color:"bg-sky-600",statuses:["submitted"]},{id:"da_scrutiny",label:"DA Scrutiny",color:"bg-purple-600",statuses:["document_verification","under_scrutiny"],returnedStatus:"da_send_back"},{id:"dtdo_verification",label:"DTDO Verification",color:"bg-indigo-600",statuses:["forwarded_to_dtdo","dtdo_review"],returnedStatus:"dtdo_revert"},{id:"inspection_phase",label:"Inspection Phase",color:"bg-orange-500",statuses:["site_inspection_scheduled","site_inspection_complete"]},{id:"payment_pending",label:"Payment Pending",color:"bg-yellow-500",statuses:["payment_pending"]},{id:"rc_issued",label:"RC Issued",color:"bg-green-500",statuses:["approved"]},{id:"rejected",label:"Rejected",color:"bg-red-500",statuses:["rejected"]}].map(a=>{const o=e.filter(c=>a.statuses.includes(c.status??"")).length,l=a.returnedStatus?e.filter(c=>c.status===a.returnedStatus).length:0;return{...a,count:o,returned:l}});return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(cd,{className:"h-5 w-5"}),"Application Pipeline Flow"]}),r.jsx(Ue,{children:"Click any stage to filter applications - Visual representation of workflow stages"})]}),r.jsx(ge,{className:"pt-4 pb-8",children:r.jsx("div",{className:"flex flex-row items-start gap-2",children:i.map((a,o)=>r.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[r.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[r.jsxs("button",{onClick:()=>t(n===a.id?null:a.id),className:`
                    w-full ${a.color} text-white rounded-xl p-3 text-center 
                    shadow-lg hover:shadow-2xl hover:scale-105 
                    transition-all duration-200 cursor-pointer
                    h-[110px] flex flex-col items-center justify-center
                    ${n===a.id?"ring-4 ring-white ring-offset-2 ring-offset-background scale-105":""}
                  `,"data-testid":`filter-stage-${a.id}`,children:[r.jsx("div",{className:"text-2xl font-bold",children:a.count}),r.jsx("div",{className:"text-[11px] font-semibold opacity-90 mt-1 leading-tight text-center px-1",children:a.label}),r.jsx("div",{className:"text-[10px] mt-1.5 px-2 py-0.5 bg-white/20 rounded-full",children:a.count>0?`${Math.round(a.count/e.length*100)}%`:""})]}),a.returned?r.jsxs("div",{className:"text-[10px] text-muted-foreground flex items-center justify-center gap-1 mt-2 h-4",children:[" ",a.returned]}):r.jsx("div",{className:"h-4 mt-2"})]}),o<i.length-1&&r.jsx(sa,{className:"h-4 w-4 text-muted-foreground/50 flex-shrink-0"})]},a.id))})})]})}function Fat({applications:e,statusFilter:t,searchQuery:n,onClearFilter:s,onSearchChange:i}){var h;const[,a]=Dr(),[o,l]=b.useState("all");b.useEffect(()=>{l(t==="rc_issued"||t==="rejected"?"30d":"all")},[t]);const c=(f,m)=>{if(m==="all")return!0;const p=f.approvedAt||f.updatedAt||f.submittedAt;if(!p)return!1;const g=new Date(p),v=new Date,x=Math.abs(v.getTime()-g.getTime()),y=Math.ceil(x/(1e3*60*60*24));switch(m){case"7d":return y<=7;case"30d":return y<=30;case"this_month":return g.getMonth()===v.getMonth()&&g.getFullYear()===v.getFullYear();case"6m":return y<=180;default:return!0}},d=b.useMemo(()=>e.map(f=>({app:f,daysInStage:Bat(f)})).filter(({app:f,daysInStage:m})=>{var g,v,x,y;return!(!n||((g=f.propertyName)==null?void 0:g.toLowerCase().includes(n.toLowerCase()))||((v=f.applicationNumber)==null?void 0:v.toLowerCase().includes(n.toLowerCase()))||((x=f.ownerName)==null?void 0:x.toLowerCase().includes(n.toLowerCase()))||((y=f.district)==null?void 0:y.toLowerCase().includes(n.toLowerCase())))||!c(f,o)?!1:t?!0:!(f.status==="approved"||f.status==="rejected"||m<7)}).sort((f,m)=>m.daysInStage-f.daysInStage),[e,t,n,o]),u=f=>({submitted:"Submission",document_verification:"DA Scrutiny",under_scrutiny:"DA Scrutiny",forwarded_to_dtdo:"DTDO Verification",dtdo_review:"DTDO Verification",site_inspection_scheduled:"Inspection Phase",site_inspection_complete:"Inspection Phase",payment_pending:"Payment Pending",approved:"RC Issued",rejected:"Rejected"})[f]||f.replace(/_/g," ");return r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[t?t==="rejected"?"Rejected Applications":u(((h=e.find(f=>f.status===t))==null?void 0:h.status)||"")+" List":"Slow Moving / At-Risk Applications",r.jsx(ze,{variant:"secondary",children:d.length})]}),r.jsx(Ue,{children:t?"Applications in the selected stage.":"Files stuck more than 7 days in their current stage."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-[160px]",children:r.jsxs(pr,{value:o,onValueChange:l,children:[r.jsx(ur,{className:"h-9",children:r.jsx(yr,{placeholder:"Time Period"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"all",children:"All Time"}),r.jsx(it,{value:"7d",children:"Last 7 Days"}),r.jsx(it,{value:"30d",children:"Last 30 Days"}),r.jsx(it,{value:"this_month",children:"This Month"}),r.jsx(it,{value:"6m",children:"Last 6 Months"})]})]})}),r.jsxs("div",{className:"relative w-64",children:[r.jsx(gu,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground pointer-events-none"}),r.jsx(Pe,{type:"text",placeholder:"Search applications...",value:n,onChange:f=>i(f.target.value),className:"pl-9 pr-9","data-testid":"input-search-applications"}),n&&r.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2 hover:bg-muted rounded-full p-0.5 transition-colors","data-testid":"button-clear-search",children:r.jsx(sh,{className:"h-3 w-3"})})]}),t&&r.jsxs(te,{variant:"outline",size:"sm",onClick:s,"data-testid":"button-clear-filter",children:[r.jsx(sh,{className:"h-4 w-4 mr-2"}),"Clear Filter"]})]})]})}),r.jsxs(ge,{children:[r.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground uppercase font-medium tracking-wide px-2",children:[r.jsx("div",{className:"w-[25%]",children:"Application"}),r.jsx("div",{className:"w-[18%]",children:"Current Stage"}),r.jsx("div",{className:"w-[18%]",children:"Assigned To"}),r.jsx("div",{className:"w-[14%] text-right",children:"Days in Stage"}),r.jsx("div",{className:"w-[15%] text-right",children:"Status"}),r.jsx("div",{className:"w-[10%] text-right",children:"Action"})]}),d.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-lg mt-4",children:[r.jsx(ir,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:"Nothing appears stuck right now."})]}):r.jsx("div",{className:"space-y-3 mt-4",children:d.slice(0,20).map(({app:f,daysInStage:m})=>r.jsxs("div",{onClick:()=>a(`/applications/${f.id}`),className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 hover:border-primary/50 transition-colors cursor-pointer","data-testid":`application-row-${f.id}`,children:[r.jsxs("div",{className:"w-[25%]",children:[r.jsx("div",{className:"font-medium",children:f.propertyName||"Unnamed Homestay"}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[f.applicationNumber||`#${f.id}`,"  ",f.district||"Unknown district"]})]}),r.jsx("div",{className:"w-[18%]",children:r.jsx(ze,{variant:"secondary",children:u(f.status||"draft")})}),r.jsxs("div",{className:"w-[18%]",children:[r.jsx("p",{className:"text-sm",children:f.assignedToName||f.assignedTo||`DA ${f.district??""}`}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Owner: ",f.ownerName||"Unknown"]})]}),r.jsx("div",{className:"w-[14%] text-right",children:r.jsxs("span",{className:m>14?"text-destructive font-semibold":"font-medium",children:[m," days"]})}),r.jsx("div",{className:"w-[15%] text-right",children:r.jsx(ze,{variant:Eq(f.status)?"outline":"warning",children:Eq(f.status)?"Waiting on applicant":"Pending officer"})}),r.jsx("div",{className:"w-[10%] text-right",children:r.jsx(ze,{variant:"outline",children:f.status||"Draft"})})]},f.id))})]})]})}const $at=new Set(["da_send_back","dtdo_revert"]),Bat=e=>{const t=e.updatedAt||e.statusUpdatedAt||e.submittedAt;return t?Math.floor((Date.now()-new Date(t).getTime())/(1e3*60*60*24)):0},Eq=e=>e?$at.has(e):!1;function Vat({bottlenecks:e,applications:t}){return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"h-5 w-5 text-orange-600"}),"Identified Bottlenecks"]}),r.jsx(Ue,{children:"Stages where applications are getting delayed"})]}),r.jsx(ge,{children:e.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(kr,{className:"h-12 w-12 mx-auto mb-3 text-green-600"}),r.jsx("p",{children:"No bottlenecks detected! All workflows running smoothly."})]}):r.jsx("div",{className:"space-y-4",children:e.map((n,s)=>r.jsxs("div",{className:"border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-medium capitalize",children:n.stage.replace(/_/g," ")}),r.jsxs(ze,{variant:"destructive",children:[n.count," applications stuck"]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:["Average time: ",n.avgDays," days"]})]},s))})})]})}function Uat({applications:e}){const t=e.reduce((i,a)=>{const o=a.district||"Unknown";return i[o]||(i[o]={total:0,approved:0,pending:0,rejected:0}),i[o].total++,a.status==="approved"?i[o].approved++:a.status==="rejected"?i[o].rejected++:i[o].pending++,i},{}),n=Object.entries(t).map(([i,a])=>({district:i.length>15?i.substring(0,15)+"...":i,fullDistrict:i,total:a.total,approved:a.approved,pending:a.pending,rejected:a.rejected,approvalRate:Math.round(a.approved/a.total*100)})).sort((i,a)=>a.total-i.total).slice(0,12),s={approved:"#10b981",pending:"#f59e0b",rejected:"#ef4444"};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsx(Ue,{children:"Top Performing District"}),r.jsx(ke,{className:"text-2xl",children:n.length>0?n[0].fullDistrict:"N/A"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(cd,{className:"h-4 w-4 mr-2 text-green-600"}),n.length>0?`${n[0].approvalRate}% approval rate`:"No data"]})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsx(Ue,{children:"Total Districts"}),r.jsx(ke,{className:"text-2xl",children:Object.keys(t).length})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(Js,{className:"h-4 w-4 mr-2"}),"Across Himachal Pradesh"]})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"pb-3",children:[r.jsx(Ue,{children:"Avg Approval Rate"}),r.jsxs(ke,{className:"text-2xl",children:[n.length>0?Math.round(n.reduce((i,a)=>i+a.approvalRate,0)/n.length):0,"%"]})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(kr,{className:"h-4 w-4 mr-2 text-green-600"}),"State-wide average"]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(u_,{className:"h-5 w-5"}),"Application Volume by District"]}),r.jsx(Ue,{children:"Total applications received from each district"})]}),r.jsx(ge,{children:r.jsx(Cv,{width:"100%",height:350,children:r.jsxs(u_,{data:n,children:[r.jsx(kj,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(Jm,{dataKey:"district",angle:-45,textAnchor:"end",height:100,tick:{fontSize:12}}),r.jsx(ep,{tick:{fontSize:12}}),r.jsx(Zo,{content:({active:i,payload:a})=>{if(i&&a&&a.length){const o=a[0].payload;return r.jsxs("div",{className:"bg-background border rounded-lg p-3 shadow-lg",children:[r.jsx("p",{className:"font-semibold mb-2",children:o.fullDistrict}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{className:"font-medium",children:o.total})]}),r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsx("span",{className:"text-green-600",children:"Approved:"}),r.jsx("span",{className:"font-medium text-green-600",children:o.approved})]}),r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsx("span",{className:"text-orange-600",children:"Pending:"}),r.jsx("span",{className:"font-medium text-orange-600",children:o.pending})]}),r.jsxs("div",{className:"flex justify-between gap-4",children:[r.jsx("span",{className:"text-red-600",children:"Rejected:"}),r.jsx("span",{className:"font-medium text-red-600",children:o.rejected})]})]})]})}return null}}),r.jsx(Dm,{}),r.jsx(ru,{dataKey:"approved",stackId:"a",fill:s.approved,name:"Approved"}),r.jsx(ru,{dataKey:"pending",stackId:"a",fill:s.pending,name:"Pending"}),r.jsx(ru,{dataKey:"rejected",stackId:"a",fill:s.rejected,name:"Rejected"})]})})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(cd,{className:"h-5 w-5"}),"District Approval Rate Comparison"]}),r.jsx(Ue,{children:"Percentage of applications approved by district"})]}),r.jsx(ge,{children:r.jsx(Cv,{width:"100%",height:300,children:r.jsxs(vat,{data:n,children:[r.jsx(kj,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),r.jsx(Jm,{dataKey:"district",angle:-45,textAnchor:"end",height:100,tick:{fontSize:12}}),r.jsx(ep,{domain:[0,100],tick:{fontSize:12},label:{value:"Approval Rate (%)",angle:-90,position:"insideLeft"}}),r.jsx(Zo,{formatter:i=>[`${i}%`,"Approval Rate"],labelFormatter:i=>{const a=n.find(o=>o.district===i);return(a==null?void 0:a.fullDistrict)||i}}),r.jsx(Dm,{}),r.jsx(jw,{type:"monotone",dataKey:"approvalRate",stroke:"#10b981",strokeWidth:2,name:"Approval Rate",dot:{fill:"#10b981",r:4},activeDot:{r:6}})]})})})]})]})}function qat({applications:e}){return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5"}),"Officer Workload Distribution"]}),r.jsx(Ue,{children:"Current workload and performance metrics for reviewing officers"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Cl,{className:"h-12 w-12 mx-auto mb-3"}),r.jsx("p",{children:"Officer performance tracking coming soon"})]})})]})}function zat(e){const t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=new Date(t.getTime()-7*24*60*60*1e3),i=e.filter(p=>p.status!=="approved"&&p.status!=="rejected"),a=e.filter(p=>p.submittedAt&&new Date(p.submittedAt)>=n),o=e.filter(p=>p.approvedAt&&new Date(p.approvedAt)>=s),l=i.reduce((p,g)=>{if(!g.submittedAt)return p;if(Math.floor((t.getTime()-new Date(g.submittedAt).getTime())/(1e3*60*60*24))>7){const x=g.status??"unknown";p[x]=(p[x]??0)+1}return p},{}),c=Object.values(l).reduce((p,g)=>p+g,0),d=Object.entries(l).sort((p,g)=>g[1]-p[1])[0],u={submitted:"Submission",document_verification:"DA Scrutiny",under_scrutiny:"DA Scrutiny",forwarded_to_dtdo:"DTDO Verification",dtdo_review:"DTDO Verification",site_inspection_scheduled:"Inspection Phase",site_inspection_complete:"Inspection Phase",payment_pending:"Payment Pending",approved:"RC Issued"},h=e.filter(p=>p.status==="approved"),f=e.filter(p=>p.submittedAt&&p.approvedAt),m=f.reduce((p,g)=>{const v=Math.floor((new Date(g.approvedAt).getTime()-new Date(g.submittedAt).getTime())/864e5);return p+v},0)/Math.max(f.length,1);return{activePipeline:i.length,newToday:a.length,criticalBottlenecks:c,mostDelayedStage:d?u[d[0]]??"Unknown stage":"",avgProcessingTime:Math.max(Math.round(isFinite(m)?m:0),0),totalCertificates:h.length,completedThisWeek:o.length}}function Hat(e){const t=e.reduce((s,i)=>{const a=i.status||"draft";return s[a]||(s[a]=[]),s[a].push(i),s},{}),n=[];return Object.entries(t).forEach(([s,i])=>{if(s==="approved"||s==="rejected")return;const a=Math.round(i.reduce((o,l)=>{if(!l.submittedAt)return o;const c=Math.floor((new Date().getTime()-new Date(l.submittedAt).getTime())/(1e3*60*60*24));return o+c},0)/Math.max(i.length,1));(i.length>5||a>7)&&n.push({stage:s,count:i.length,avgDays:a})}),n.sort((s,i)=>i.count-s.count)}function Wat(e){return e.filter(t=>!t.submittedAt||t.status==="approved"||t.status==="rejected"?!1:Math.floor((new Date().getTime()-new Date(t.submittedAt).getTime())/(1e3*60*60*24))>jhe.total)}const To=b.forwardRef(({className:e,...t},n)=>r.jsx("div",{className:"relative w-full overflow-auto",children:r.jsx("table",{ref:n,className:Xe("w-full caption-bottom text-sm",e),...t})}));To.displayName="Table";const Eo=b.forwardRef(({className:e,...t},n)=>r.jsx("thead",{ref:n,className:Xe("[&_tr]:border-b",e),...t}));Eo.displayName="TableHeader";const Oo=b.forwardRef(({className:e,...t},n)=>r.jsx("tbody",{ref:n,className:Xe("[&_tr:last-child]:border-0",e),...t}));Oo.displayName="TableBody";const Kat=b.forwardRef(({className:e,...t},n)=>r.jsx("tfoot",{ref:n,className:Xe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Kat.displayName="TableFooter";const In=b.forwardRef(({className:e,...t},n)=>r.jsx("tr",{ref:n,className:Xe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));In.displayName="TableRow";const Mt=b.forwardRef(({className:e,...t},n)=>r.jsx("th",{ref:n,className:Xe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Mt.displayName="TableHead";const Rt=b.forwardRef(({className:e,...t},n)=>r.jsx("td",{ref:n,className:Xe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Rt.displayName="TableCell";const Gat=b.forwardRef(({className:e,...t},n)=>r.jsx("caption",{ref:n,className:Xe("mt-4 text-sm text-muted-foreground",e),...t}));Gat.displayName="TableCaption";function Yat(){const[,e]=Dr(),{toast:t}=Tr(),[n,s]=b.useState(null),{data:i,isLoading:a}=rt({queryKey:["/api/payments/pending"]}),o=Ot({mutationFn:async d=>await(await lt("POST",`/api/payments/${d}/confirm`,{})).json(),onSuccess:d=>{er.invalidateQueries({queryKey:["/api/payments/pending"]}),er.invalidateQueries({queryKey:["/api/applications/all"]}),er.invalidateQueries({queryKey:["/api/applications"]}),d.applicationId&&er.invalidateQueries({queryKey:["/api/applications",d.applicationId]}),t({title:"Payment Confirmed",description:`Certificate ${d.certificateNumber} has been issued successfully.`})},onError:()=>{t({title:"Error",description:"Failed to confirm payment",variant:"destructive"})}}),l=d=>{navigator.clipboard.writeText(d),s(d),setTimeout(()=>s(null),2e3)},c=(i==null?void 0:i.pendingPayments)||[];return r.jsxs("div",{className:"container mx-auto p-6",children:[r.jsx("div",{className:"mb-6",children:r.jsx(te,{variant:"ghost",onClick:()=>e("/workflow-monitoring"),"data-testid":"button-back",children:" Back to Workflow Monitoring"})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Payment Verification"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Verify UPI payments and issue certificates to approved applications"})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"h-5 w-5"}),"Pending Payment Verifications"]}),r.jsxs(Ue,{children:[c.length," application",c.length!==1?"s":""," awaiting payment confirmation"]})]}),r.jsx(ze,{variant:"secondary",className:"text-lg",children:c.length})]})}),r.jsx(ge,{children:a?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading pending payments..."})}):c.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Fr,{className:"w-12 h-12 mx-auto text-green-600 mb-4"}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:"All Payments Verified"}),r.jsx("p",{className:"text-muted-foreground",children:"There are no pending payment verifications at this time."})]}):r.jsx("div",{className:"border rounded-lg",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Application"}),r.jsx(Mt,{children:"Property Details"}),r.jsx(Mt,{children:"Amount"}),r.jsx(Mt,{children:"UPI Transaction ID"}),r.jsx(Mt,{children:"Payment Status"}),r.jsx(Mt,{children:"Actions"})]})}),r.jsx(Oo,{children:c.map(({application:d,payment:u})=>{if(!u)return null;const h=Number(d.totalFee??0),f=u.gatewayTransactionId&&u.gatewayTransactionId.length>0;return r.jsxs(In,{"data-testid":`row-payment-${d.id}`,children:[r.jsx(Rt,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:d.applicationNumber}),r.jsx("div",{className:"text-sm text-muted-foreground",children:d.district})]})}),r.jsx(Rt,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:d.propertyName}),r.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.jsx(ze,{variant:"outline",className:"capitalize mr-2",children:d.category}),d.totalRooms," rooms"]})]})}),r.jsx(Rt,{children:r.jsxs("div",{className:"font-semibold",children:["",h.toLocaleString("en-IN")]})}),r.jsx(Rt,{children:f?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("code",{className:"bg-muted px-2 py-1 rounded text-sm",children:u.gatewayTransactionId}),r.jsx(te,{size:"icon",variant:"ghost",onClick:()=>l(u.gatewayTransactionId??""),className:"h-6 w-6","data-testid":`button-copy-txn-${d.id}`,children:n===u.gatewayTransactionId?r.jsx(Qd,{className:"h-3 w-3 text-green-600"}):r.jsx(CR,{className:"h-3 w-3"})})]}):r.jsx("span",{className:"text-muted-foreground text-sm",children:"No transaction ID"})}),r.jsx(Rt,{children:r.jsx(ze,{variant:u.paymentStatus==="pending_verification"?"secondary":"outline",children:u.paymentStatus==="pending_verification"?"Pending Verification":u.paymentStatus})}),r.jsx(Rt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>e(`/applications/${d.id}`),"data-testid":`button-view-app-${d.id}`,children:[r.jsx(zu,{className:"h-4 w-4 mr-1"}),"View"]}),f&&r.jsxs(te,{size:"sm",onClick:()=>o.mutate(u.id),disabled:o.isPending,"data-testid":`button-confirm-${d.id}`,children:[r.jsx(Fr,{className:"h-4 w-4 mr-1"}),o.isPending?"Confirming...":"Confirm Payment"]})]})})]},d.id)})})]})})})]}),r.jsxs(fn,{children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsxs(mn,{children:[r.jsx("strong",{children:"Instructions:"}),' Verify that the UPI transaction ID matches the payment received in your bank account (subhash.thakur.india@oksbi). Once verified, click "Confirm Payment" to issue the registration certificate.']})]})]})]})}function Oq(){return r.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 print:p-0 print:bg-white",children:[r.jsx("style",{children:`
                @media print {
                    @page {
                        size: A4;
                        margin: 10mm;
                    }
                    body {
                        margin: 0;
                        padding: 0;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"max-w-[210mm] mx-auto mb-4 flex justify-between items-center print:hidden",children:[r.jsx("div",{className:"text-sm text-slate-500",children:"Preview - Print or Save as PDF for official use"}),r.jsxs(te,{onClick:()=>window.print(),className:"bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(Bj,{className:"w-4 h-4 mr-2"}),"Print / Save PDF"]})]}),r.jsx("div",{className:"max-w-[210mm] mx-auto bg-white shadow-xl print:shadow-none print:w-full print:max-w-none print:mx-0",children:r.jsx("div",{className:"border-[3px] border-slate-800 m-2 print:m-0 print:border-2 print:min-h-[275mm] flex flex-col",children:r.jsx("div",{className:"border border-slate-400 m-1 flex-grow flex flex-col",children:r.jsxs("div",{className:"p-8 print:p-6 font-serif text-slate-900 text-[12.5px] leading-relaxed flex-grow flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-center mb-5",children:[r.jsx("div",{className:"flex justify-center mb-2",children:r.jsx("div",{className:"w-12 h-12 border-2 border-slate-300 rounded-full flex items-center justify-center bg-slate-50",children:r.jsx("span",{className:"text-lg",children:""})})}),r.jsx("p",{className:"text-sm font-bold text-slate-700 tracking-wide uppercase mb-1",children:"Government of Himachal Pradesh"}),r.jsx("p",{className:"text-xs text-slate-500 tracking-wider uppercase mb-2",children:"Department of Tourism & Civil Aviation"}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[r.jsx("div",{className:"w-14 h-px bg-slate-400"}),r.jsx("div",{className:"w-2 h-2 rotate-45 border border-slate-400"}),r.jsx("div",{className:"w-14 h-px bg-slate-400"})]}),r.jsx("h1",{className:"text-lg font-bold tracking-wide mb-1",children:r.jsx("span",{className:"border-b-2 border-slate-800 pb-1",children:"FORMAT OF AFFIDAVIT"})}),r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"Under Section 29"}),r.jsx("p",{className:"text-[11px] text-slate-600",children:"Himachal Pradesh Tourism Development & Registration Act, 2002"})]}),r.jsxs("div",{className:"leading-relaxed text-justify",children:[r.jsx("div",{className:"mb-4 bg-slate-50 p-3 border border-slate-200 rounded text-[12.5px]",children:r.jsxs("p",{className:"leading-7",children:["I, ",r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[150px] mx-1 bg-white px-2",children:""}),",",r.jsx("span",{className:"font-medium text-slate-700 mx-1",children:"S/o / D/o / W/o"}),r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[150px] mx-1 bg-white px-2",children:""}),", Age ",r.jsx("span",{className:"inline-block border-b border-slate-400 w-10 mx-1 bg-white text-center",children:""})," years, R/o ",r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[260px] mx-1 bg-white px-2",children:""})]})}),r.jsx("p",{className:"mb-3 font-medium text-[13px]",children:"do hereby solemnly affirm and declare as under:"}),r.jsxs("ol",{className:"list-none space-y-3 mb-5 text-[12.5px]",children:[r.jsxs("li",{className:"flex gap-3",children:[r.jsx("span",{className:"font-bold text-slate-700 shrink-0",children:"1."}),r.jsx("span",{children:"That I have not been convicted of any offence under Chapters XIV and XVI of the Indian Penal Code, 1860, or under any of the provisions of this Act, or of any offence punishable under any law providing for the prevention of hoarding, smuggling, or profiteering, or adulteration of food or drugs, or corruption."})]}),r.jsxs("li",{className:"flex gap-3",children:[r.jsx("span",{className:"font-bold text-slate-700 shrink-0",children:"2."}),r.jsx("span",{children:"That I have not been declared an insolvent by a court of competent jurisdiction."})]}),r.jsxs("li",{className:"flex gap-3",children:[r.jsx("span",{className:"font-bold text-slate-700 shrink-0",children:"3."}),r.jsxs("span",{children:["That my name has not been removed from the register on the grounds mentioned in Section 29 of the ",r.jsx("strong",{children:"Himachal Pradesh Tourism Development and Registration Act, 2002"}),"."]})]})]}),r.jsx("div",{className:"flex justify-end mb-4",children:r.jsxs("div",{className:"text-center w-44",children:[r.jsx("div",{className:"border-b-2 border-slate-800 mb-1 h-8"}),r.jsx("p",{className:"font-bold text-[11px]",children:"DEPONENT"})]})}),r.jsxs("div",{className:"border-t border-slate-300 pt-4 mt-3",children:[r.jsx("h2",{className:"font-bold text-sm mb-2",children:r.jsx("span",{className:"border-b border-slate-600 pb-1",children:"VERIFICATION"})}),r.jsx("p",{className:"mb-2 leading-relaxed text-[12.5px]",children:"Verified that the contents of the above affidavit of mine are true and correct to the best of my knowledge and belief. Nothing has been concealed therein."}),r.jsxs("p",{className:"leading-relaxed text-[12.5px]",children:["Signed and verified at ",r.jsx("span",{className:"inline-block border-b border-slate-400 w-28 mx-1",children:""}),"on dated ",r.jsx("span",{className:"inline-block border-b border-slate-400 w-28 mx-1",children:""}),"."]})]}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsxs("div",{className:"text-center w-44",children:[r.jsx("div",{className:"border-b-2 border-slate-800 mb-1 h-8"}),r.jsx("p",{className:"font-bold text-[11px]",children:"DEPONENT"})]})})]})]}),r.jsxs("div",{className:"mt-5 pt-3 border-t border-dashed border-slate-300",children:[r.jsx("p",{className:"text-[11px] text-slate-500 font-semibold mb-1",children:"IMPORTANT NOTES:"}),r.jsxs("ul",{className:"text-[11px] text-slate-500 space-y-1 list-disc pl-5",children:[r.jsx("li",{children:"This affidavit should be executed on non-judicial stamp paper of appropriate value as applicable in Himachal Pradesh."}),r.jsx("li",{children:"The affidavit should be attested by a Notary Public or First Class Magistrate."}),r.jsx("li",{children:"Reference: Section 29 of HP Tourism Development & Registration Act, 2002"})]})]})]})})})})]})}function Rq(){return r.jsxs("div",{className:"min-h-screen bg-slate-100 p-4 print:p-0 print:bg-white",children:[r.jsx("style",{children:`
                @media print {
                    @page {
                        size: A4;
                        margin: 10mm;
                    }
                    body {
                        margin: 0;
                        padding: 0;
                        -webkit-print-color-adjust: exact;
                        print-color-adjust: exact;
                    }
                }
            `}),r.jsxs("div",{className:"max-w-[210mm] mx-auto mb-4 flex justify-between items-center print:hidden",children:[r.jsx("div",{className:"text-sm text-slate-500",children:"Preview - Print or Save as PDF for official use"}),r.jsxs(te,{onClick:()=>window.print(),className:"bg-emerald-600 hover:bg-emerald-700",children:[r.jsx(Bj,{className:"w-4 h-4 mr-2"}),"Print / Save PDF"]})]}),r.jsx("div",{className:"max-w-[210mm] mx-auto bg-white shadow-xl print:shadow-none print:w-full print:max-w-none print:mx-0",children:r.jsx("div",{className:"border-[3px] border-slate-800 m-2 print:m-0 print:border-2 print:min-h-[275mm] flex flex-col",children:r.jsx("div",{className:"border border-slate-400 m-1 flex-grow flex flex-col",children:r.jsxs("div",{className:"p-7 print:p-6 font-serif text-slate-900 text-[12.5px] leading-relaxed flex-grow flex flex-col justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("div",{className:"flex justify-center mb-1.5",children:r.jsx("div",{className:"w-12 h-12 border-2 border-slate-300 rounded-full flex items-center justify-center bg-slate-50",children:r.jsx("span",{className:"text-lg",children:""})})}),r.jsx("p",{className:"text-sm font-bold text-slate-700 tracking-wide uppercase mb-1",children:"Government of Himachal Pradesh"}),r.jsx("p",{className:"text-xs text-slate-500 tracking-wider uppercase mb-2",children:"Department of Tourism & Civil Aviation"}),r.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[r.jsx("div",{className:"w-14 h-px bg-slate-400"}),r.jsx("div",{className:"w-2 h-2 rotate-45 border border-slate-400"}),r.jsx("div",{className:"w-14 h-px bg-slate-400"})]}),r.jsx("h1",{className:"text-lg font-bold tracking-wide mb-1",children:r.jsx("span",{className:"border-b-2 border-slate-800 pb-1",children:"FORM-C"})}),r.jsx("p",{className:"text-[11px] text-slate-600 mb-0.5",children:"[See ANNEXURE-I (13) and ANNEXURE-II (4)]"}),r.jsx("p",{className:"text-sm font-semibold text-slate-700",children:"FORMAT FOR UNDERTAKING"})]}),r.jsxs("div",{className:"leading-relaxed text-justify",children:[r.jsxs("div",{className:"mb-3 text-[12.5px]",children:[r.jsx("p",{className:"font-medium mb-1",children:"To,"}),r.jsxs("div",{className:"pl-5 leading-snug",children:[r.jsx("p",{children:"The Prescribed Authority,"}),r.jsx("p",{children:"Office of the District Tourism Development Authority,"}),r.jsxs("p",{children:["District ",r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[100px] mx-1",children:""}),", Himachal Pradesh."]})]})]}),r.jsx("div",{className:"text-center mb-3",children:r.jsx("h2",{className:"text-base font-bold",children:r.jsx("span",{className:"border-b border-slate-800 pb-0.5",children:"UNDERTAKING"})})}),r.jsx("div",{className:"mb-3 bg-slate-50 p-2.5 border border-slate-200 rounded text-[12.5px]",children:r.jsxs("p",{className:"leading-7",children:["I, ",r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[150px] mx-1 bg-white px-2",children:""}),",",r.jsx("span",{className:"font-medium text-slate-700 mx-1",children:"S/o / D/o / W/o"}),r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[150px] mx-1 bg-white px-2",children:""}),", Age ",r.jsx("span",{className:"inline-block border-b border-slate-400 w-10 mx-1 bg-white text-center",children:""})," years, R/o ",r.jsx("span",{className:"inline-block border-b border-slate-400 min-w-[280px] mx-1 bg-white px-2",children:""}),"."]})}),r.jsxs("div",{className:"space-y-3 mb-5 text-[12.5px] leading-relaxed",children:[r.jsxs("p",{children:["I have read and understood all the terms and conditions mentioned in the",r.jsx("strong",{children:" Himachal Pradesh Home Stay Rules, 2025"})," with respect to the approval and registration of the Home Stay Unit/Establishment and hereby agree to abide by them."]}),r.jsx("p",{children:"The information and documents provided are correct and authentic to the best of my knowledge."}),r.jsxs("p",{children:["I further declare that if there is any false statement or suppression of any material fact with the intention to mislead the prescribed authority at my end, I shall be liable for penal action as warranted by the",r.jsx("strong",{children:" Himachal Pradesh Tourism Development and Registration Act, 2002"}),"and the rules made thereunder."]})]}),r.jsx("div",{className:"flex justify-end mt-6 mb-5",children:r.jsxs("div",{className:"text-center w-56",children:[r.jsx("div",{className:"border-b-2 border-slate-800 mb-2 h-10"}),r.jsxs("p",{className:"font-bold text-[11px] leading-tight",children:["(Signature and Name of the Owner",r.jsx("br",{}),"in Block Letters)"]})]})}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-6 text-[12.5px]",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Place:"})," ",r.jsx("span",{className:"inline-block border-b border-slate-400 w-36 ml-2",children:""})]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-medium",children:"Date:"})," ",r.jsx("span",{className:"inline-block border-b border-slate-400 w-36 ml-2",children:""})]})]})]})]}),r.jsxs("div",{className:"mt-4 pt-3 border-t border-dashed border-slate-300",children:[r.jsx("p",{className:"text-[11px] text-slate-500 font-semibold mb-1",children:"IMPORTANT NOTES:"}),r.jsxs("ul",{className:"text-[11px] text-slate-500 space-y-1 list-disc pl-5",children:[r.jsx("li",{children:"This undertaking must be signed by the applicant/owner."}),r.jsx("li",{children:"Submit along with the Home Stay registration application (Form-A)."}),r.jsx("li",{children:"Reference: HP Home Stay Rules, 2025 - ANNEXURE-I & ANNEXURE-II"})]})]})]})})})})]})}function Xat(){var D,q,M,L,V;const{toast:e}=Tr(),[t,n]=b.useState(""),[s,i]=b.useState(!1),[a,o]=b.useState(!1),[l,c]=b.useState(null),[d,u]=b.useState({mobile:"",fullName:"",firstName:"",lastName:"",username:"",email:"",alternatePhone:"",designation:"",department:"",employeeId:"",officeAddress:"",officePhone:"",role:"property_owner",district:"",password:"",confirmPassword:""}),[h,f]=b.useState({firstName:"",lastName:"",username:"",email:"",alternatePhone:"",designation:"",department:"",employeeId:"",district:"",officeAddress:"",officePhone:"",password:"",confirmPassword:""}),{data:m,isLoading:p}=rt({queryKey:["/api/admin/users"]}),g=Ot({mutationFn:async P=>(await lt("PATCH",`/api/admin/users/${P.userId}`,{role:P.role})).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/admin/users"]}),e({title:"Role Updated",description:"User role has been updated successfully."})},onError:P=>{e({title:"Update Failed",description:P.message||"Failed to update role. Please try again.",variant:"destructive"})}}),v=Ot({mutationFn:async P=>(await lt("PATCH",`/api/admin/users/${P.userId}/status`,{isActive:P.isActive})).json(),onSuccess:(P,z)=>{er.invalidateQueries({queryKey:["/api/admin/users"]}),e({title:z.isActive?"User Activated":"User Deactivated",description:`User has been ${z.isActive?"activated":"deactivated"} successfully.`})},onError:P=>{e({title:"Action Failed",description:P.message||"Failed to update user status. Please try again.",variant:"destructive"})}}),x=Ot({mutationFn:async P=>await lt("POST","/api/admin/users",P),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/admin/users"]}),i(!1),u({mobile:"",fullName:"",firstName:"",lastName:"",username:"",email:"",alternatePhone:"",designation:"",department:"",employeeId:"",officeAddress:"",officePhone:"",role:"property_owner",district:"",password:"",confirmPassword:""}),e({title:"User Created",description:"New user has been created successfully."})},onError:P=>{e({title:"Creation Failed",description:P.message||"Failed to create user. Please try again.",variant:"destructive"})}}),y=Ot({mutationFn:async P=>await lt("PATCH",`/api/admin/users/${P.userId}`,P.updates),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/admin/users"]}),o(!1),c(null),f({firstName:"",lastName:"",username:"",email:"",alternatePhone:"",designation:"",department:"",employeeId:"",district:"",officeAddress:"",officePhone:"",password:"",confirmPassword:""}),e({title:"User Updated",description:"User details have been updated successfully."})},onError:P=>{e({title:"Update Failed",description:P.message||"Failed to update user. Please try again.",variant:"destructive"})}}),j=()=>{if(d.role!=="property_owner"){if(!d.firstName||!d.lastName||!d.mobile||!d.password||!d.confirmPassword){e({title:"Validation Error",description:"Please fill in first name, last name, mobile, and password (with confirmation)",variant:"destructive"});return}}else if(!d.mobile||!d.fullName||!d.password||!d.confirmPassword){e({title:"Validation Error",description:"Please fill in all required fields (including confirm password)",variant:"destructive"});return}if(d.password!==d.confirmPassword){e({title:"Password mismatch",description:"New password and confirm password must match.",variant:"destructive"});return}const P={...d};d.role!=="property_owner"&&d.firstName&&d.lastName&&(P.fullName=`${d.firstName} ${d.lastName}`);const{confirmPassword:z,...Z}=P;x.mutate(Z)},w=P=>{c(P),f({firstName:P.firstName||"",lastName:P.lastName||"",username:P.username||"",email:P.email||"",alternatePhone:P.alternatePhone||"",designation:P.designation||"",department:P.department||"",employeeId:P.employeeId||"",district:P.district||"",officeAddress:P.officeAddress||"",officePhone:P.officePhone||"",password:"",confirmPassword:""}),o(!0)},N=()=>{var F,W;if(!l)return;if(l.role!=="property_owner"&&(!h.firstName||!h.lastName)){e({title:"Validation Error",description:"First name and last name are required for staff users",variant:"destructive"});return}if(h.password){if(!h.confirmPassword){e({title:"Validation Error",description:"Please confirm the new password.",variant:"destructive"});return}if(h.password!==h.confirmPassword){e({title:"Password mismatch",description:"New password and confirm password must match.",variant:"destructive"});return}}const P={...h,email:h.email||null,district:h.district||null,alternatePhone:h.alternatePhone||null,designation:h.designation||null,department:h.department||null,employeeId:h.employeeId||null,officeAddress:h.officeAddress||null,officePhone:h.officePhone||null},{confirmPassword:z,...Z}=P;l.role!=="property_owner"&&((F=h.firstName)!=null&&F.trim())&&((W=h.lastName)!=null&&W.trim())&&(Z.fullName=`${h.firstName.trim()} ${h.lastName.trim()}`),h.password||delete Z.password,y.mutate({userId:l.id,updates:Z})},S=((D=m==null?void 0:m.users)==null?void 0:D.filter(P=>P.fullName.toLowerCase().includes(t.toLowerCase())||P.mobile.includes(t)||P.email&&P.email.toLowerCase().includes(t.toLowerCase())||P.role.toLowerCase().includes(t.toLowerCase())))||[],T=S.filter(P=>P.role!=="property_owner"),C=S.filter(P=>P.role==="property_owner"),A=P=>{switch(P){case"admin":return"destructive";case"state_officer":return"default";case"district_officer":return"secondary";default:return"outline"}},R=P=>{switch(P){case"admin":return"Admin";case"state_officer":return"State Officer";case"district_officer":return"District Officer";case"property_owner":return"Property Owner";default:return P}},k=P=>P.role!=="property_owner"&&P.firstName&&P.lastName?`${P.firstName} ${P.lastName}`:P.fullName,O=(P,z)=>{g.mutate({userId:P,role:z})},$={total:((q=m==null?void 0:m.users)==null?void 0:q.length)||0,active:((M=m==null?void 0:m.users)==null?void 0:M.filter(P=>P.isActive).length)||0,propertyOwners:((L=m==null?void 0:m.users)==null?void 0:L.filter(P=>P.role==="property_owner").length)||0,staff:((V=m==null?void 0:m.users)==null?void 0:V.filter(P=>P.role!=="property_owner").length)||0};return p?r.jsx("div",{className:"bg-background flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),r.jsx("p",{className:"text-muted-foreground",children:"Loading users..."})]})}):r.jsxs("div",{className:"bg-background p-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-foreground flex items-center gap-2",children:[r.jsx(Gi,{className:"w-8 h-8 text-primary"}),"User Management"]}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"View and manage all system users"})]}),r.jsxs(us,{open:s,onOpenChange:i,children:[r.jsx(Vb,{asChild:!0,children:r.jsxs(te,{"data-testid":"button-create-user",children:[r.jsx(gm,{className:"w-4 h-4 mr-2"}),"Create User"]})}),r.jsxs(Jn,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Create New User"}),r.jsx(Ns,{children:"Add a new user to the system. Choose the appropriate role and enter the required information."})]}),r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"role",children:"Role *"}),r.jsxs(pr,{value:d.role,onValueChange:P=>u({...d,role:P}),children:[r.jsx(ur,{"data-testid":"select-role",children:r.jsx(yr,{})}),r.jsxs(hr,{children:[r.jsx(it,{value:"property_owner",children:"Property Owner"}),r.jsx(it,{value:"dealing_assistant",children:"Dealing Assistant (DA)"}),r.jsx(it,{value:"district_tourism_officer",children:"District Tourism Officer (DTDO)"}),r.jsx(it,{value:"district_officer",children:"District Officer"}),r.jsx(it,{value:"state_officer",children:"State Officer"}),r.jsx(it,{value:"admin",children:"Admin"}),r.jsx(it,{value:"admin_rc",children:"Admin RC"}),r.jsx(it,{value:"system_admin",children:"System Admin"}),r.jsx(it,{value:"super_admin",children:"Super Admin"})]})]})]}),d.role!=="property_owner"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-firstName",children:"First Name *"}),r.jsx(Pe,{id:"create-firstName",placeholder:"First name",value:d.firstName,onChange:P=>u({...d,firstName:P.target.value}),"data-testid":"input-create-firstname",characterRestriction:"alpha-space",maxLength:60})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-lastName",children:"Last Name *"}),r.jsx(Pe,{id:"create-lastName",placeholder:"Last name",value:d.lastName,onChange:P=>u({...d,lastName:P.target.value}),"data-testid":"input-create-lastname",characterRestriction:"alpha-space",maxLength:60})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-username",children:"Username *"}),r.jsx(Pe,{id:"create-username",placeholder:"e.g., rajesh.kumar",value:d.username,onChange:P=>u({...d,username:P.target.value}),"data-testid":"input-create-username"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Contact Information"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-mobile",children:"Mobile Number *"}),r.jsx(Pe,{id:"create-mobile",placeholder:"10-digit mobile number",value:d.mobile,onChange:P=>u({...d,mobile:P.target.value}),"data-testid":"input-create-mobile",characterRestriction:"numeric",maxLength:10})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-email",children:"Email"}),r.jsx(Pe,{id:"create-email",type:"email",placeholder:"email@hp.gov.in",value:d.email,onChange:P=>u({...d,email:P.target.value}),"data-testid":"input-create-email"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-alternatePhone",children:"Alternate Phone"}),r.jsx(Pe,{id:"create-alternatePhone",placeholder:"Alternate contact number",value:d.alternatePhone,onChange:P=>u({...d,alternatePhone:P.target.value}),"data-testid":"input-create-alternate-phone",characterRestriction:"numeric",maxLength:10})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Official Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-designation",children:"Designation"}),r.jsx(Pe,{id:"create-designation",placeholder:"e.g., District Tourism Officer",value:d.designation,onChange:P=>u({...d,designation:P.target.value}),"data-testid":"input-create-designation"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-department",children:"Department"}),r.jsx(Pe,{id:"create-department",placeholder:"e.g., Tourism Department",value:d.department,onChange:P=>u({...d,department:P.target.value}),"data-testid":"input-create-department"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-employeeId",children:"Employee ID"}),r.jsx(Pe,{id:"create-employeeId",placeholder:"e.g., HP-DTO-001",value:d.employeeId,onChange:P=>u({...d,employeeId:P.target.value}),"data-testid":"input-create-employee-id"})]}),(d.role==="dealing_assistant"||d.role==="district_tourism_officer"||d.role==="district_officer")&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-district",children:"District Assignment"}),r.jsx(Pe,{id:"create-district",placeholder:"e.g., Shimla, Kullu, Mandi",value:d.district,onChange:P=>u({...d,district:P.target.value}),"data-testid":"input-create-district"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-officeAddress",children:"Office Address"}),r.jsx(Pe,{id:"create-officeAddress",placeholder:"Full office address",value:d.officeAddress,onChange:P=>u({...d,officeAddress:P.target.value}),"data-testid":"input-create-office-address"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-officePhone",children:"Office Phone"}),r.jsx(Pe,{id:"create-officePhone",placeholder:"Office contact number",value:d.officePhone,onChange:P=>u({...d,officePhone:P.target.value}),"data-testid":"input-create-office-phone",characterRestriction:"numeric",maxLength:10})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-mobile",children:"Mobile Number *"}),r.jsx(Pe,{id:"create-mobile",placeholder:"10-digit mobile number",value:d.mobile,onChange:P=>u({...d,mobile:P.target.value}),"data-testid":"input-create-mobile",characterRestriction:"numeric",maxLength:10})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-fullName",children:"Full Name *"}),r.jsx(Pe,{id:"create-fullName",placeholder:"Enter full name",value:d.fullName,onChange:P=>u({...d,fullName:P.target.value}),"data-testid":"input-create-fullname",characterRestriction:"alpha-space",maxLength:120})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground",children:"Security"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-password",children:"Password *"}),r.jsx(Pe,{id:"create-password",type:"password",placeholder:"Enter password",value:d.password,onChange:P=>u({...d,password:P.target.value}),"data-testid":"input-create-password"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"create-confirm-password",children:"Confirm Password *"}),r.jsx(Pe,{id:"create-confirm-password",type:"password",placeholder:"Re-enter password",value:d.confirmPassword,onChange:P=>u({...d,confirmPassword:P.target.value}),"data-testid":"input-create-confirm-password"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(te,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel",children:"Cancel"}),r.jsx(te,{onClick:j,disabled:x.isPending,"data-testid":"button-submit-create",children:x.isPending?"Creating...":"Create User"})]})]})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4 flex-shrink-0",children:[r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Total Users"}),r.jsx(Do,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ge,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-users",children:$.total})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Active Users"}),r.jsx(Ove,{className:"h-4 w-4 text-green-600"})]}),r.jsx(ge,{children:r.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"stat-active-users",children:$.active})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Property Owners"}),r.jsx(Cl,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ge,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-property-owners",children:$.propertyOwners})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Staff Users"}),r.jsx(Gi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsx(ge,{children:r.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-staff",children:$.staff})})]})]}),r.jsxs(aa,{defaultValue:"staff",className:"space-y-4",children:[r.jsxs(Qi,{className:"flex-shrink-0",children:[r.jsxs(Pr,{value:"staff","data-testid":"tab-staff",children:[r.jsx(Gi,{className:"w-4 h-4 mr-2"}),"Staff Users (",T.length,")"]}),r.jsxs(Pr,{value:"owners","data-testid":"tab-owners",children:[r.jsx(Cl,{className:"w-4 h-4 mr-2"}),"Property Owners (",C.length,")"]})]}),r.jsxs(me,{className:"border",children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"User Management"}),r.jsx(Ue,{children:"Search and manage user accounts by category"})]}),r.jsxs(ge,{className:"p-6 pt-0",children:[r.jsx("div",{className:"mb-4",children:r.jsxs("div",{className:"relative",children:[r.jsx(gu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),r.jsx(Pe,{placeholder:"Search by name, mobile, email, or role...",value:t,onChange:P=>n(P.target.value),className:"pl-10","data-testid":"input-search-users"})]})}),r.jsx(Rr,{value:"staff",className:"m-0",children:r.jsx("div",{className:"rounded-md border overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Name"}),r.jsx(Mt,{children:"Mobile"}),r.jsx(Mt,{children:"Email"}),r.jsx(Mt,{children:"District"}),r.jsx(Mt,{children:"Role"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{children:"Actions"})]})}),r.jsx(Oo,{children:T.length===0?r.jsx(In,{children:r.jsx(Rt,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No staff users found"})}):T.map(P=>r.jsxs(In,{"data-testid":`row-user-${P.id}`,children:[r.jsx(Rt,{className:"font-medium",children:k(P)}),r.jsx(Rt,{children:P.mobile}),r.jsx(Rt,{children:P.email||"-"}),r.jsx(Rt,{children:P.district||"-"}),r.jsx(Rt,{children:r.jsxs(pr,{value:P.role,onValueChange:z=>O(P.id,z),disabled:g.isPending,children:[r.jsx(ur,{className:"w-[140px]","data-testid":`select-role-${P.id}`,children:r.jsx(yr,{})}),r.jsxs(hr,{children:[r.jsx(it,{value:"property_owner",children:"Property Owner"}),r.jsx(it,{value:"dealing_assistant",children:"Dealing Assistant (DA)"}),r.jsx(it,{value:"district_tourism_officer",children:"District Tourism Officer (DTDO)"}),r.jsx(it,{value:"district_officer",children:"District Officer"}),r.jsx(it,{value:"state_officer",children:"State Officer"}),r.jsx(it,{value:"admin",children:"Admin"})]})]})}),r.jsx(Rt,{children:r.jsx(ze,{variant:P.isActive?"default":"outline",children:P.isActive?"Active":"Inactive"})}),r.jsx(Rt,{children:r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{size:"sm",variant:"outline",onClick:()=>w(P),"data-testid":`button-edit-${P.id}`,children:[r.jsx(c8,{className:"w-3 h-3 mr-1"}),"Edit"]}),r.jsx(te,{size:"sm",variant:P.isActive?"destructive":"default",onClick:()=>v.mutate({userId:P.id,isActive:!P.isActive}),disabled:v.isPending,"data-testid":`button-toggle-status-${P.id}`,children:P.isActive?"Deactivate":"Activate"})]})})]},P.id))})]})})}),r.jsx(Rr,{value:"owners",className:"m-0",children:r.jsx("div",{className:"rounded-md border overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Name"}),r.jsx(Mt,{children:"Mobile"}),r.jsx(Mt,{children:"Email"}),r.jsx(Mt,{children:"District"}),r.jsx(Mt,{children:"Role"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{children:"Actions"})]})}),r.jsx(Oo,{children:C.length===0?r.jsx(In,{children:r.jsx(Rt,{colSpan:7,className:"text-center text-muted-foreground py-8",children:"No property owners found"})}):C.map(P=>r.jsxs(In,{"data-testid":`row-user-${P.id}`,children:[r.jsx(Rt,{className:"font-medium",children:k(P)}),r.jsx(Rt,{children:P.mobile}),r.jsx(Rt,{children:P.email||"-"}),r.jsx(Rt,{children:P.district||"-"}),r.jsx(Rt,{children:r.jsx(ze,{variant:A(P.role),children:R(P.role)})}),r.jsx(Rt,{children:r.jsx(ze,{variant:P.isActive?"default":"destructive",className:P.isActive?"bg-green-600":"",children:P.isActive?"Active":"Inactive"})}),r.jsx(Rt,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>w(P),"data-testid":`button-edit-${P.id}`,children:r.jsx(c8,{className:"h-4 w-4"})}),r.jsx(te,{size:"sm",variant:P.isActive?"destructive":"default",onClick:()=>v.mutate({userId:P.id,isActive:!P.isActive}),disabled:v.isPending,"data-testid":`button-toggle-status-${P.id}`,children:P.isActive?"Deactivate":"Activate"})]})})]},P.id))})]})})})]})]})]})]}),r.jsx(us,{open:a,onOpenChange:o,children:r.jsxs(Jn,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Edit Staff Profile"}),r.jsx(Ns,{children:"Update comprehensive staff profile information. Leave password empty to keep current password."})]}),l&&l.role!=="property_owner"?r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground border-b pb-2",children:"Personal Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-firstName",children:"First Name *"}),r.jsx(Pe,{id:"edit-firstName",placeholder:"Enter first name",value:h.firstName,onChange:P=>f({...h,firstName:P.target.value}),"data-testid":"input-edit-firstname",characterRestriction:"alpha-space",maxLength:60})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-lastName",children:"Last Name *"}),r.jsx(Pe,{id:"edit-lastName",placeholder:"Enter last name",value:h.lastName,onChange:P=>f({...h,lastName:P.target.value}),"data-testid":"input-edit-lastname",characterRestriction:"alpha-space",maxLength:60})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-username",children:"Username (staff only)"}),r.jsx(Pe,{id:"edit-username",placeholder:"Enter username",value:h.username,onChange:P=>f({...h,username:P.target.value}),"data-testid":"input-edit-username"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Mobile Number"}),r.jsx(Pe,{value:l.mobile,disabled:!0,className:"bg-muted","data-testid":"input-edit-mobile"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground border-b pb-2",children:"Contact Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-email",children:"Email"}),r.jsx(Pe,{id:"edit-email",type:"email",placeholder:"user@example.com",value:h.email,onChange:P=>f({...h,email:P.target.value}),"data-testid":"input-edit-email"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-alternatePhone",children:"Alternate Phone"}),r.jsx(Pe,{id:"edit-alternatePhone",placeholder:"10-digit phone number",value:h.alternatePhone,onChange:P=>f({...h,alternatePhone:P.target.value}),"data-testid":"input-edit-alternatephone",characterRestriction:"numeric",maxLength:10})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground border-b pb-2",children:"Official Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-designation",children:"Designation"}),r.jsx(Pe,{id:"edit-designation",placeholder:"Job title/position",value:h.designation,onChange:P=>f({...h,designation:P.target.value}),"data-testid":"input-edit-designation"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-department",children:"Department"}),r.jsx(Pe,{id:"edit-department",placeholder:"Department name",value:h.department,onChange:P=>f({...h,department:P.target.value}),"data-testid":"input-edit-department"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-employeeId",children:"Employee ID"}),r.jsx(Pe,{id:"edit-employeeId",placeholder:"Official employee ID",value:h.employeeId,onChange:P=>f({...h,employeeId:P.target.value}),"data-testid":"input-edit-employeeid"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-district",children:"District"}),r.jsx(Pe,{id:"edit-district",placeholder:"e.g., Shimla, Kullu, Mandi",value:h.district,onChange:P=>f({...h,district:P.target.value}),"data-testid":"input-edit-district"})]}),r.jsxs("div",{className:"space-y-2 col-span-2",children:[r.jsx(je,{htmlFor:"edit-officeAddress",children:"Office Address"}),r.jsx(Pe,{id:"edit-officeAddress",placeholder:"Complete office address",value:h.officeAddress,onChange:P=>f({...h,officeAddress:P.target.value}),"data-testid":"input-edit-officeaddress"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-officePhone",children:"Office Phone"}),r.jsx(Pe,{id:"edit-officePhone",placeholder:"10-digit phone number",value:h.officePhone,onChange:P=>f({...h,officePhone:P.target.value}),"data-testid":"input-edit-officephone",characterRestriction:"numeric",maxLength:10})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-foreground border-b pb-2",children:"Security"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-password",children:"New Password (optional)"}),r.jsx(Pe,{id:"edit-password",type:"password",placeholder:"Leave empty to keep current password",value:h.password,onChange:P=>f({...h,password:P.target.value}),"data-testid":"input-edit-password"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"edit-confirm-password",children:"Confirm New Password"}),r.jsx(Pe,{id:"edit-confirm-password",type:"password",placeholder:"Re-enter new password",value:h.confirmPassword,onChange:P=>f({...h,confirmPassword:P.target.value}),"data-testid":"input-edit-confirm-password"})]})]})]}):r.jsx("div",{className:"space-y-4 py-4",children:r.jsx("p",{className:"text-sm text-muted-foreground",children:"Property owner profile editing coming soon..."})}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[r.jsx(te,{variant:"outline",onClick:()=>o(!1),"data-testid":"button-cancel-edit",children:"Cancel"}),r.jsx(te,{onClick:N,disabled:y.isPending||(l==null?void 0:l.role)==="property_owner","data-testid":"button-save-edit",children:y.isPending?"Saving...":"Save Changes"})]})]})})]})}const Qat=[{title:"RC Applications",description:"Filter, export, or drill into any owner application",href:"/admin/rc-applications",icon:H0},{title:"User Management",description:"Create or disable DA, DTDO, and Admin logins",href:"/admin/users",icon:Do},{title:"Workflow Settings",description:"DA Send Back, OTP login, category enforcement, upload policies",href:"/admin/super-console#portal-config",icon:iu},{title:"Policy Settings",description:"Woman owner discount calculation (Additive vs Sequential)",href:"/admin/policy-settings",icon:iu},{title:"System Controls",description:"Payment pause, maintenance mode, critical operations",href:"/admin/system-controls",icon:Gi},{title:"Audit Timeline",description:"Investigate escalations or trace approvals",href:"/admin/audit-log",icon:ir},{title:"RC Certificate Generator",description:"Generate or re-issue RC PDFs",href:"/admin/rc-application-certificate",icon:ds},{title:"Existing RC Support",description:"Guide legacy license holders through onboarding",href:"/admin/legacy-owner-support",icon:Mi},{title:"LGD Import",description:"Sync LGD districts and blocks",href:"/admin/lgd-import",icon:Js}];function Zat(){return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:r.jsxs("div",{className:"container mx-auto max-w-6xl p-6 space-y-8",children:[r.jsx("div",{className:"flex flex-wrap items-start justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"flex items-center gap-3 mb-2",children:r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(iu,{className:"h-6 w-6 text-primary"})})}),r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Console"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Manage applications, users, and certificates"})]})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:Qat.map(e=>r.jsx(Co,{href:e.href,children:r.jsxs(me,{className:"h-full hover:shadow-md hover:border-primary/50 transition-all cursor-pointer group",children:[r.jsxs(Ce,{className:"pb-2",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/5 group-hover:bg-primary/10 transition-colors w-fit",children:r.jsx(e.icon,{className:"h-5 w-5 text-primary"})}),r.jsx(ke,{className:"text-base mt-3",children:e.title}),r.jsx(Ue,{className:"text-sm",children:e.description})]}),r.jsx(ge,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center text-sm text-primary opacity-0 group-hover:opacity-100 transition-opacity",children:["Open ",r.jsx(sa,{className:"ml-1 h-4 w-4"})]})})]})},e.title))})]}),r.jsxs(me,{className:"bg-muted/30",children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"text-base flex items-center gap-2",children:[r.jsx(Fm,{className:"h-4 w-4"}),"Need Help?"]})}),r.jsx(ge,{className:"text-sm text-muted-foreground",children:r.jsx("p",{children:"For advanced configuration including SMS/Email gateways, payment settings, or database tools, contact your Super Admin or visit the Super Admin Console."})})]})]})})}const Dq={diamond:"#a855f7",gold:"#f59e0b",silver:"#94a3b8",uncategorized:"#6b7280"},Jat={Approved:"text-emerald-400",Rejected:"text-red-400",Submitted:"text-blue-400","Draft Created":"text-slate-400","Inspection Scheduled":"text-purple-400","Under Review":"text-amber-400",Updated:"text-slate-300"},eot=e=>e>=1e7?`${(e/1e7).toFixed(1)}Cr`:e>=1e5?`${(e/1e5).toFixed(1)}L`:e>=1e3?`${(e/1e3).toFixed(1)}K`:`${e}`,whe=e=>new Intl.NumberFormat("en-IN").format(e),tot=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return"Unknown time";const s=new Date().getTime()-t.getTime();if(s<0)return"Just now";const i=Math.floor(s/6e4),a=Math.floor(s/36e5),o=Math.floor(s/864e5);return i<1?"Just now":i<60?`${i}m ago`:a<24?`${a}h ago`:o<7?`${o}d ago`:t.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}catch{return""}};function eN({title:e,value:t,icon:n,gradient:s,onClick:i,trendValue:a,trendDirection:o,valuePrefix:l=""}){return r.jsxs("button",{onClick:i,className:Xe("relative overflow-hidden rounded-2xl p-6 text-left transition-all duration-300","hover:scale-[1.02] hover:shadow-2xl cursor-pointer","border border-white/10 backdrop-blur-sm",s),children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-white/70",children:e}),r.jsxs("h3",{className:"text-4xl font-bold text-white mt-1",children:[l,whe(t)]}),a!==void 0&&r.jsxs("p",{className:Xe("text-xs mt-2 flex items-center gap-1",o==="up"?"text-emerald-300":"text-rose-300"),children:[o==="up"?r.jsx(cd,{className:"h-3 w-3"}):r.jsx(Eve,{className:"h-3 w-3"}),o==="up"?"+":"",a,"% vs last 30 days"]})]}),r.jsx("div",{className:"p-3 rounded-xl bg-white/10",children:r.jsx(n,{className:"h-6 w-6 text-white"})})]}),r.jsx("div",{className:"absolute -bottom-4 -right-4 opacity-10",children:r.jsx(n,{className:"h-24 w-24 text-white"})})]})}function rot({district:e,count:t,maxCount:n,rank:s}){const i=n>0?t/n*100:0;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs font-bold text-white/40 w-4",children:s}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-white/90 truncate max-w-[150px]",children:e}),r.jsx("span",{className:"text-sm font-bold text-white",children:t})]}),r.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-500 to-emerald-400 rounded-full transition-all duration-700",style:{width:`${i}%`}})})]})]})}function not({entry:e,rank:t}){const n=["","",""];return r.jsxs("div",{className:Xe("flex items-center gap-3 p-3 rounded-lg transition-all",t<=3?"bg-white/5":"bg-transparent"),children:[r.jsx("span",{className:"text-xl w-8 text-center",children:t<=3?n[t-1]:r.jsx("span",{className:"text-white/40 text-sm",children:t})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-white truncate",children:e.district}),r.jsxs("div",{className:"text-xs text-white/50",children:[e.processed," processed"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-lg font-bold text-emerald-400",children:e.avgDays}),r.jsx("div",{className:"text-[10px] text-white/50",children:"avg days"})]})]})}function sot({item:e}){return r.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-white/5 last:border-0",children:[r.jsx("div",{className:Xe("w-2 h-2 rounded-full flex-shrink-0",e.action==="Approved"?"bg-emerald-400":e.action==="Rejected"?"bg-red-400":e.action==="Submitted"?"bg-blue-400":"bg-slate-400")}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:Xe("text-xs font-semibold",Jat[e.action]||"text-white"),children:e.action}),r.jsx("span",{className:"text-xs text-white/40",children:""}),r.jsx("span",{className:"text-xs text-white/60 truncate",children:e.propertyName||e.applicationNumber})]}),r.jsxs("div",{className:"text-[10px] text-white/40 mt-0.5",children:[e.district,"  ",e.ownerName]})]}),r.jsx("div",{className:"text-[10px] text-white/40 flex-shrink-0",children:tot(e.timestamp)})]})}function iot(){var l,c,d,u,h;const[,e]=Dr(),{data:t,isLoading:n,error:s}=rt({queryKey:["/api/stats/state"],refetchInterval:6e4}),{data:i}=rt({queryKey:["/api/stats/trends"],refetchInterval:12e4}),{data:a}=rt({queryKey:["/api/stats/activity"],refetchInterval:3e4});if(n)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-4 gap-4",children:[...Array(4)].map((f,m)=>r.jsx(Lr,{className:"h-32 rounded-2xl bg-white/5"},m))}),r.jsx(Lr,{className:"h-40 rounded-2xl bg-white/5"})]})});if(s||!t)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6 flex items-center justify-center",children:r.jsxs(me,{className:"bg-white/5 border-white/10 p-8 text-center",children:[r.jsx(oo,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),r.jsx("p",{className:"text-white/70",children:"Failed to load dashboard data"})]})});t.funnel.reduce((f,m)=>f+m.value,0);const o=Math.max(...t.heatmap.map(f=>f.applications),1);return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-amber-500 to-orange-600",children:r.jsx(Vm,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Him-Darshan Command Center"}),r.jsx("p",{className:"text-sm text-white/50",children:"Real-time state-wide tourism intelligence"})]})]}),r.jsxs(ze,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30 px-3 py-1",children:[r.jsx(Pm,{className:"h-3 w-3 mr-1 animate-pulse"})," LIVE"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[r.jsx(eN,{title:"Total Applications",value:t.hero.totalApplications,icon:ir,gradient:"bg-gradient-to-br from-blue-600 to-blue-800",onClick:()=>e("/workflow-monitoring"),trendValue:i==null?void 0:i.applications.change,trendDirection:i==null?void 0:i.applications.trend}),r.jsx(eN,{title:"Revenue Collected",value:t.hero.totalRevenue,icon:r8,gradient:"bg-gradient-to-br from-emerald-600 to-emerald-800",trendValue:i==null?void 0:i.revenue.change,trendDirection:i==null?void 0:i.revenue.trend,valuePrefix:""}),r.jsx(eN,{title:"Pending Scrutiny",value:t.hero.pendingScrutiny,icon:Vs,gradient:"bg-gradient-to-br from-amber-600 to-orange-700",onClick:()=>e("/workflow-monitoring?status=under_scrutiny")}),r.jsx(eN,{title:"Avg Clearance Days",value:parseFloat(t.hero.avgClearanceDays)||0,icon:Pve,gradient:"bg-gradient-to-br from-purple-600 to-purple-800"})]}),r.jsxs(me,{className:"bg-white/5 border-white/10 backdrop-blur mb-6",children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-white flex items-center gap-2",children:[r.jsx(cd,{className:"h-5 w-5 text-emerald-400"}),"Application Pipeline"]})}),r.jsx(ge,{children:r.jsx("div",{className:"flex items-center gap-1 my-4 px-2",children:[{id:"da_review",label:"Scrutiny",count:((l=t==null?void 0:t.pipeline_counts)==null?void 0:l.scrutiny)||0,color:"text-orange-400",border:"border-orange-500/50",bg:"bg-orange-500/10"},{id:"forwarded_dtdo",label:"District",count:((c=t==null?void 0:t.pipeline_counts)==null?void 0:c.district)||0,color:"text-blue-400",border:"border-blue-500/50",bg:"bg-blue-500/10"},{id:"inspection_scheduled",label:"Inspection",count:((d=t==null?void 0:t.pipeline_counts)==null?void 0:d.inspection)||0,color:"text-purple-400",border:"border-purple-500/50",bg:"bg-purple-500/10"},{id:"payment_pending",label:"Payment",count:((u=t==null?void 0:t.pipeline_counts)==null?void 0:u.payment)||0,color:"text-indigo-400",border:"border-indigo-500/50",bg:"bg-indigo-500/10"},{id:"certificate",label:"Approved",count:((h=t==null?void 0:t.pipeline_counts)==null?void 0:h.approved)||0,color:"text-emerald-400",border:"border-emerald-500/50",bg:"bg-emerald-500/10"}].map((f,m,p)=>{const g=m===p.length-1;return r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsxs("div",{className:"flex flex-col items-center z-10",children:[r.jsx("div",{className:Xe("flex h-12 w-12 items-center justify-center rounded-full border-2 text-lg font-bold shadow-[0_0_15px_rgba(0,0,0,0.5)] transition-all shrink-0 backdrop-blur-md",f.bg,f.border,f.color),children:f.count}),r.jsx("span",{className:Xe("text-[10px] uppercase tracking-wider font-semibold mt-2",f.color),children:f.label})]}),!g&&r.jsx("div",{className:"h-[2px] flex-1 bg-white/10 mx-2 -mt-6 relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent w-full"})})]},f.id)})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.jsxs(me,{className:"bg-white/5 border-white/10 backdrop-blur",children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-white flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5 text-blue-400"}),"Top Districts"]})}),r.jsx(ge,{children:r.jsx("div",{className:"space-y-3",children:t.heatmap.slice(0,6).map((f,m)=>r.jsx(rot,{district:f.district,count:f.applications,maxCount:o,rank:m+1},f.district))})})]}),r.jsxs(me,{className:"bg-white/5 border-white/10 backdrop-blur",children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-white flex items-center gap-2",children:[r.jsx(zh,{className:"h-5 w-5 text-amber-400"}),"Performance Leaderboard"]})}),r.jsx(ge,{children:r.jsxs("div",{className:"space-y-2",children:[t.leaderboard.slice(0,5).map((f,m)=>r.jsx(not,{entry:f,rank:m+1},f.district)),t.leaderboard.length===0&&r.jsx("p",{className:"text-center text-white/50 py-8",children:"No data available"})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx(me,{className:"bg-gradient-to-br from-blue-900/50 to-blue-800/30 border-blue-500/20 backdrop-blur",children:r.jsxs(ge,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:r.jsx(lQ,{className:"h-5 w-5 text-blue-400"})}),r.jsx("span",{className:"text-sm font-medium text-white/70",children:"Tourism Capacity"})]}),r.jsx("div",{className:"text-4xl font-bold text-white",children:whe(t.economic.totalBeds)}),r.jsx("div",{className:"text-sm text-white/50 mt-1",children:"Total approved beds"})]})}),r.jsx(me,{className:"bg-gradient-to-br from-emerald-900/50 to-emerald-800/30 border-emerald-500/20 backdrop-blur",children:r.jsxs(ge,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:r.jsx(r8,{className:"h-5 w-5 text-emerald-400"})}),r.jsx("span",{className:"text-sm font-medium text-white/70",children:"Est. Annual Revenue"})]}),r.jsx("div",{className:"text-4xl font-bold text-white",children:eot(t.economic.projectedRevenue)}),r.jsx("div",{className:"text-sm text-white/50 mt-1",children:"Based on 40% occupancy"})]})}),r.jsx(me,{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/30 border-purple-500/20 backdrop-blur",children:r.jsxs(ge,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:r.jsx(Cl,{className:"h-5 w-5 text-purple-400"})}),r.jsx("span",{className:"text-sm font-medium text-white/70",children:"Inventory Quality"})]}),r.jsx("div",{className:"h-24",children:r.jsx(Cv,{width:"100%",height:"100%",children:r.jsxs(che,{children:[r.jsx(gh,{data:t.economic.categorySplit,cx:"50%",cy:"50%",innerRadius:25,outerRadius:40,paddingAngle:3,dataKey:"value",children:t.economic.categorySplit.map((f,m)=>r.jsx(y0,{fill:Dq[f.name.toLowerCase()]||"#6b7280"},`cell-${m}`))}),r.jsx(Zo,{contentStyle:{background:"#1e293b",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"}})]})})}),r.jsx("div",{className:"flex justify-center gap-4 mt-2",children:t.economic.categorySplit.slice(0,3).map(f=>r.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/60",children:[r.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:Dq[f.name.toLowerCase()]||"#6b7280"}}),f.name,": ",f.value]},f.name))})]})})]}),r.jsxs(me,{className:"bg-white/5 border-white/10 backdrop-blur mt-6",children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{className:"text-white flex items-center gap-2",children:[r.jsx(Ux,{className:"h-5 w-5 text-amber-400"}),"Recent Activity"]}),r.jsx(ze,{variant:"outline",className:"text-white/50 border-white/20 text-xs",children:"Auto-refresh 30s"})]})}),r.jsx(ge,{children:r.jsx("div",{className:"divide-y divide-white/5",children:a&&a.length>0?a.slice(0,10).map(f=>r.jsx(sot,{item:f},f.id)):r.jsx("p",{className:"text-center text-white/50 py-8",children:"No recent activity"})})})]})]})}function aot(){const[e,t]=b.useState(""),[n,s]=b.useState(""),[i,a]=b.useState(!1),[o,l]=b.useState(null),{toast:c}=Tr(),d=async()=>{if(!e.trim()){c({title:"Error",description:"Please paste the villages CSV data",variant:"destructive"});return}a(!0),l(null);try{const m=await(await lt("POST","/api/admin/lgd/import",{csvData:e,dataType:"villages"})).json();l(m),c({title:"Import Successful",description:`Imported ${m.inserted.districts} districts, ${m.inserted.tehsils} tehsils, ${m.inserted.gramPanchayats} gram panchayats`})}catch(f){c({title:"Import Failed",description:f.message||"Failed to import LGD data",variant:"destructive"})}finally{a(!1)}},u=async()=>{if(!n.trim()){c({title:"Error",description:"Please paste the urban bodies CSV data",variant:"destructive"});return}a(!0),l(null);try{const m=await(await lt("POST","/api/admin/lgd/import",{csvData:n,dataType:"urbanBodies"})).json();l(m),c({title:"Import Successful",description:`Imported ${m.inserted.urbanBodies} urban bodies`})}catch(f){c({title:"Import Failed",description:f.message||"Failed to import LGD data",variant:"destructive"})}finally{a(!1)}},h=async(f,m)=>{var v;const p=(v=f.target.files)==null?void 0:v[0];if(!p)return;const g=new FileReader;g.onload=x=>{var j;const y=(j=x.target)==null?void 0:j.result;m==="villages"?t(y):s(y)},g.readAsText(p)};return r.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(ac,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"LGD Master Data Import"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Import Local Government Directory data for Himachal Pradesh administrative hierarchy"})]}),r.jsxs(fn,{className:"mb-6",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsxs(mn,{children:[r.jsx("strong",{children:"Import Order:"})," Import Villages/Hierarchy data FIRST (creates districts and tehsils), then import Urban Bodies data. CSV files must be in the correct format."]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5 text-primary"}),r.jsx(ke,{children:"Villages & Hierarchy"})]}),r.jsx(Ue,{children:"Import districts, tehsils, and gram panchayats (rural areas)"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"villages-csv",children:"CSV Data (Districts  Tehsils  Villages)"}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Format: stateCode, districtCode, districtName, subdistrictCode, subdistrictName, villageCode, villageName, pincode"}),r.jsx(Ur,{id:"villages-csv",placeholder:"Paste CSV data here...",value:e,onChange:f=>t(f.target.value),rows:10,className:"font-mono text-xs","data-testid":"textarea-villages-csv"}),r.jsx("div",{className:"mt-2",children:r.jsxs(je,{htmlFor:"villages-file",className:"cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[r.jsx(e0,{className:"h-4 w-4"}),"Or upload CSV file"]}),r.jsx("input",{id:"villages-file",type:"file",accept:".csv",className:"hidden",onChange:f=>h(f,"villages"),"data-testid":"input-villages-file"})]})})]}),r.jsxs(te,{onClick:d,disabled:i||!e.trim(),className:"w-full","data-testid":"button-import-villages",children:[r.jsx(ir,{className:"h-4 w-4 mr-2"}),i?"Importing...":"Import Villages Data"]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cl,{className:"h-5 w-5 text-primary"}),r.jsx(ke,{children:"Urban Bodies"})]}),r.jsx(Ue,{children:"Import municipalities and town panchayats (urban areas)"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"urban-csv",children:"CSV Data (Municipalities & Town Panchayats)"}),r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Format: stateCode, localBodyCode, localBodyName, localBodyType, pincode"}),r.jsx(Ur,{id:"urban-csv",placeholder:"Paste CSV data here...",value:n,onChange:f=>s(f.target.value),rows:10,className:"font-mono text-xs","data-testid":"textarea-urban-csv"}),r.jsx("div",{className:"mt-2",children:r.jsxs(je,{htmlFor:"urban-file",className:"cursor-pointer",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[r.jsx(e0,{className:"h-4 w-4"}),"Or upload CSV file"]}),r.jsx("input",{id:"urban-file",type:"file",accept:".csv",className:"hidden",onChange:f=>h(f,"urbanBodies"),"data-testid":"input-urban-file"})]})})]}),r.jsxs(te,{onClick:u,disabled:i||!n.trim(),className:"w-full","data-testid":"button-import-urban",children:[r.jsx(Cl,{className:"h-4 w-4 mr-2"}),i?"Importing...":"Import Urban Bodies Data"]})]})]})]}),o&&r.jsxs(me,{className:"mt-6 border-green-500/50 bg-green-500/5",children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"h-5 w-5 text-green-600"}),r.jsx(ke,{className:"text-green-700 dark:text-green-400",children:"Import Successful"})]})}),r.jsx(ge,{children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsxs("div",{className:"text-center p-3 bg-background rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:o.inserted.districts}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Districts"})]}),r.jsxs("div",{className:"text-center p-3 bg-background rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:o.inserted.tehsils}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Tehsils"})]}),r.jsxs("div",{className:"text-center p-3 bg-background rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:o.inserted.blocks}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Blocks"})]}),r.jsxs("div",{className:"text-center p-3 bg-background rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:o.inserted.gramPanchayats}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Villages"})]}),r.jsxs("div",{className:"text-center p-3 bg-background rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-primary",children:o.inserted.urbanBodies}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Urban Bodies"})]})]})})]}),r.jsxs(me,{className:"mt-6",children:[r.jsx(Ce,{children:r.jsx(ke,{className:"text-lg",children:"Import Instructions"})}),r.jsxs(ge,{className:"space-y-3 text-sm text-muted-foreground",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"Step 1:"}),r.jsxs("span",{children:["Import ",r.jsx("strong",{children:"Villages & Hierarchy"})," data first. This creates the district and tehsil structure."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"Step 2:"}),r.jsxs("span",{children:["Import ",r.jsx("strong",{children:"Urban Bodies"})," data. This adds municipalities and town panchayats."]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"Note:"}),r.jsx("span",{children:"Only Himachal Pradesh data (stateCode = 2) will be imported. Other states will be automatically skipped."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:"font-semibold text-foreground",children:"CSV Source:"}),r.jsx("span",{children:"Use official LGD data from lgdirectory.gov.in or data.gov.in"})]})]})]})]})}function Nhe(e,t,n,s,i){s=s||{};var a=1.15,o=i.internal.scaleFactor,l=i.internal.getFontSize()/o,c=i.getLineHeightFactor?i.getLineHeightFactor():a,d=l*c,u=/\r\n|\r|\n/g,h="",f=1;if((s.valign==="middle"||s.valign==="bottom"||s.halign==="center"||s.halign==="right")&&(h=typeof e=="string"?e.split(u):e,f=h.length||1),n+=l*(2-a),s.valign==="middle"?n-=f/2*d:s.valign==="bottom"&&(n-=f*d),s.halign==="center"||s.halign==="right"){var m=l;if(s.halign==="center"&&(m*=.5),h&&f>=1){for(var p=0;p<h.length;p++)i.text(h[p],t-i.getStringUnitWidth(h[p])*m,n),n+=d;return i}t-=i.getStringUnitWidth(e)*m}return s.halign==="justify"?i.text(e,t,n,{maxWidth:s.maxWidth||100,align:"justify"}):i.text(e,t,n),i}var Mq={},Pv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=t:Mq=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,n){var s,i,a;n===void 0&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,c=o.fontName;if(t.font&&(c=t.font),t.fontStyle){l=t.fontStyle;var d=this.getFontList()[c];d&&d.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),l=d[0])}if(this.jsPDFDocument.setFont(c,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var u=e.unifyColor(t.fillColor);u&&(s=this.jsPDFDocument).setFillColor.apply(s,u),u=e.unifyColor(t.textColor),u&&(i=this.jsPDFDocument).setTextColor.apply(i,u),u=e.unifyColor(t.lineColor),u&&(a=this.jsPDFDocument).setDrawColor.apply(a,u),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,n,s){return this.jsPDFDocument.splitTextToSize(t,n,s)},e.prototype.rect=function(t,n,s,i,a){return this.jsPDFDocument.rect(t,n,s,i,a)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return Mq||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),xO=function(e,t){return xO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},xO(e,t)};function She(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");xO(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var _he=function(e){She(t,e);function t(n){var s=e.call(this)||this;return s._element=n,s}return t}(Array);function oot(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function lot(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function h_(e,t,n){n.applyStyles(t,!0);var s=Array.isArray(e)?e:[e],i=s.map(function(a){return n.getTextWidth(a)}).reduce(function(a,o){return Math.max(a,o)},0);return i}function Che(e,t,n,s){var i=t.settings.tableLineWidth,a=t.settings.tableLineColor;e.applyStyles({lineWidth:i,lineColor:a});var o=Ahe(i,!1);o&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),s.y-n.y,o)}function Ahe(e,t){var n=e>0,s=t||t===0;return n&&s?"DF":n?"S":s?"F":null}function _A(e,t){var n,s,i,a;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(n=e.left)!==null&&n!==void 0?n:t,top:(s=e.top)!==null&&s!==void 0?s:t,right:(i=e.right)!==null&&i!==void 0?i:t,bottom:(a=e.bottom)!==null&&a!==void 0?a:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function khe(e,t){var n=_A(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function cot(e,t,n,s,i){var a={},o=1.3333333333333333,l=uP(t,function(j){return i.getComputedStyle(j).backgroundColor});l!=null&&(a.fillColor=l);var c=uP(t,function(j){return i.getComputedStyle(j).color});c!=null&&(a.textColor=c);var d=uot(s,n);d&&(a.cellPadding=d);var u="borderTopColor",h=o*n,f=s.borderTopWidth;if(s.borderBottomWidth===f&&s.borderRightWidth===f&&s.borderLeftWidth===f){var m=(parseFloat(f)||0)/h;m&&(a.lineWidth=m)}else a.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/h,right:(parseFloat(s.borderRightWidth)||0)/h,bottom:(parseFloat(s.borderBottomWidth)||0)/h,left:(parseFloat(s.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?u="borderRightColor":a.lineWidth.bottom?u="borderBottomColor":a.lineWidth.left&&(u="borderLeftColor"));var p=uP(t,function(j){return i.getComputedStyle(j)[u]});p!=null&&(a.lineColor=p);var g=["left","right","center","justify"];g.indexOf(s.textAlign)!==-1&&(a.halign=s.textAlign),g=["middle","bottom","top"],g.indexOf(s.verticalAlign)!==-1&&(a.valign=s.verticalAlign);var v=parseInt(s.fontSize||"");isNaN(v)||(a.fontSize=v/o);var x=dot(s);x&&(a.fontStyle=x);var y=(s.fontFamily||"").toLowerCase();return e.indexOf(y)!==-1&&(a.font=y),a}function dot(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function uP(e,t){var n=Phe(e,t);if(!n)return null;var s=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var i=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])],a=parseInt(s[4]);return a===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function Phe(e,t){var n=t(e);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?e.parentElement==null?null:Phe(e.parentElement,t):n}function uot(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],s=96/(72/t),i=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,a=n.map(function(l){return parseInt(l||"0")/s}),o=_A(a,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function The(e,t,n,s,i){var a,o;s===void 0&&(s=!1),i===void 0&&(i=!1);var l;typeof t=="string"?l=n.document.querySelector(t):l=t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],f=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:f};for(var m=0;m<l.rows.length;m++){var p=l.rows[m],g=(o=(a=p==null?void 0:p.parentElement)===null||a===void 0?void 0:a.tagName)===null||o===void 0?void 0:o.toLowerCase(),v=hot(c,d,n,p,s,i);v&&(g==="thead"?u.push(v):g==="tfoot"?f.push(v):h.push(v))}return{head:u,body:h,foot:f}}function hot(e,t,n,s,i,a){for(var o=new _he(s),l=0;l<s.cells.length;l++){var c=s.cells[l],d=n.getComputedStyle(c);if(i||d.display!=="none"){var u=void 0;a&&(u=cot(e,c,t,d,n)),o.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:u,_element:c,content:fot(c)})}}var h=n.getComputedStyle(s);if(o.length>0&&(i||h.display!=="none"))return o}function fot(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),t.innerText||t.textContent||""}function mot(e,t,n){for(var s=0,i=[e,t,n];s<i.length;s++){var a=i[s];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function Yh(e,t,n,s,i){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(e),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(a[c]=l[c])}return a}function Ehe(e,t){var n=new Pv(e),s=n.getDocumentOptions(),i=n.getGlobalOptions();mot(i,s,t);var a=Yh({},i,s,t),o;typeof window<"u"&&(o=window);var l=pot(i,s,t),c=got(i,s,t),d=xot(n,a),u=yot(n,a,o);return{id:t.tableId,content:u,hooks:c,styles:l,settings:d}}function pot(e,t,n){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var d=e[c],u=t[c],h=n[c];s.columnStyles=Yh({},d,u,h)}else{var f=[e,t,n],m=f.map(function(p){return p[c]||{}});s[c]=Yh({},m[0],m[1],m[2])}},a=0,o=Object.keys(s);a<o.length;a++){var l=o[a];i(l)}return s}function got(e,t,n){for(var s=[e,t,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,o=s;a<o.length;a++){var l=o[a];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}function xot(e,t){var n,s,i,a,o,l,c,d,u,h,f,m,p=_A(t.margin,40/e.scaleFactor()),g=(n=vot(e,t.startY))!==null&&n!==void 0?n:p.top,v;t.showFoot===!0?v="everyPage":t.showFoot===!1?v="never":v=(s=t.showFoot)!==null&&s!==void 0?s:"everyPage";var x;t.showHead===!0?x="everyPage":t.showHead===!1?x="never":x=(i=t.showHead)!==null&&i!==void 0?i:"everyPage";var y=(a=t.useCss)!==null&&a!==void 0?a:!1,j=t.theme||(y?"plain":"striped"),w=!!t.horizontalPageBreak,N=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:y,theme:j,startY:g,margin:p,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(d=t.rowPageBreak)!==null&&d!==void 0?d:"auto",tableWidth:(u=t.tableWidth)!==null&&u!==void 0?u:"auto",showHead:x,showFoot:v,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=t.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:w,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:(m=t.horizontalPageBreakBehaviour)!==null&&m!==void 0?m:"afterAllRows"}}function vot(e,t){var n=e.getLastAutoTable(),s=e.scaleFactor(),i=e.pageNumber(),a=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;a=o===i}return typeof t=="number"?t:(t==null||t===!1)&&a&&(n==null?void 0:n.finalY)!=null?n.finalY+20/s:null}function yot(e,t,n){var s=t.head||[],i=t.body||[],a=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var l=The(e,t.html,n,o,t.useCss)||{};s=l.head||s,i=l.body||s,a=l.foot||s}else console.error("Cannot parse html in non browser environment")}var c=t.columns||bot(s,i,a);return{columns:c,head:s,body:i,foot:a}}function bot(e,t,n){var s=e[0]||t[0]||n[0]||[],i=[];return Object.keys(s).filter(function(a){return a!=="_element"}).forEach(function(a){var o=1,l;Array.isArray(s)?l=s[parseInt(a)]:l=s[a],typeof l=="object"&&!Array.isArray(l)&&(o=(l==null?void 0:l.colSpan)||1);for(var c=0;c<o;c++){var d=void 0;Array.isArray(s)?d=i.length:d=a+(c>0?"_".concat(c):"");var u={dataKey:d};i.push(u)}}),i}var vO=function(){function e(t,n,s){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=s,this.doc=t.getDocument()}return e}(),jot=function(e){She(t,e);function t(n,s,i,a,o,l){var c=e.call(this,n,s,l)||this;return c.cell=i,c.row=a,c.column=o,c.section=a.section,c}return t}(vO),wot=function(){function e(t,n){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(n,s){return n+s.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(n,s){return n+s.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,n,s,i,a,o){for(var l=0,c=n;l<c.length;l++){var d=c[l],u=new jot(t,this,s,i,a,o),h=d(u)===!1;if(s.text=Array.isArray(s.text)?s.text:[s.text],h)return!1}return!0},e.prototype.callEndPageHooks=function(t,n){t.applyStyles(t.userStyles);for(var s=0,i=this.hooks.didDrawPage;s<i.length;s++){var a=i[s];a(new vO(t,this,n))}},e.prototype.callWillDrawPageHooks=function(t,n){for(var s=0,i=this.hooks.willDrawPage;s<i.length;s++){var a=i[s];a(new vO(t,this,n))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,a){return i+a.wrappedWidth},0);return n}else{var s=this.settings.margin;return t-s.left-s.right}},e}(),Ohe=function(){function e(t,n,s,i,a){a===void 0&&(a=!1),this.height=0,this.raw=t,t instanceof _he&&(this.raw=t._element,this.element=t._element),this.index=n,this.section=s,this.cells=i,this.spansMultiplePages=a}return e.prototype.getMaxCellHeight=function(t){var n=this;return t.reduce(function(s,i){var a;return Math.max(s,((a=n.cells[i.index])===null||a===void 0?void 0:a.height)||0)},0)},e.prototype.hasRowSpan=function(t){var n=this;return t.filter(function(s){var i=n.cells[s.index];return i?i.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,n){return this.getMaxCellHeight(n)<=t},e.prototype.getMinimumRowHeight=function(t,n){var s=this;return t.reduce(function(i,a){var o=s.cells[a.index];if(!o)return 0;var l=n.getLineHeight(o.styles.fontSize),c=o.padding("vertical"),d=c+l;return d>i?d:i},0)},e}(),Rhe=function(){function e(t,n,s){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=s,this.raw=t;var a=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,a=(i=t.content)!==null&&i!==void 0?i:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=a!=null?""+a:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");t=this.y+n/2+this.padding("top")}var s;if(this.styles.halign==="right")s=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");s=this.x+i/2+this.padding("left")}else s=this.x+this.padding("left");return{x:s,y:t}},e.prototype.getContentHeight=function(t,n){n===void 0&&(n=1.15);var s=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/t*n,a=s*i+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(t){var n=_A(this.styles.cellPadding,0);return t==="vertical"?n.top+n.bottom:t==="horizontal"?n.left+n.right:n[t]},e}(),Not=function(){function e(t,n,s){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=n,this.index=s}return e.prototype.getMaxCustomCellWidth=function(t){for(var n=0,s=0,i=t.allRows();s<i.length;s++){var a=i[s],o=a.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},e}();function Sot(e,t){_ot(e,t);var n=[],s=0;t.columns.forEach(function(a){var o=a.getMaxCustomCellWidth(t);o?a.width=o:(a.width=a.wrappedWidth,n.push(a)),s+=a.width});var i=t.getWidth(e.pageSize().width)-s;i&&(i=yO(n,i,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),i&&(i=yO(n,i,function(a){return a.minWidth})),i=Math.abs(i),!t.settings.horizontalPageBreak&&i>.1/e.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Aot(t),kot(t,e),Cot(t)}function _ot(e,t){var n=e.scaleFactor(),s=t.settings.horizontalPageBreak,i=khe(e,t);t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,a,c,null);var h=d.padding("horizontal");d.contentWidth=h_(d.text,d.styles,e)+h;var f=h_(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=f+d.padding("horizontal"),typeof d.styles.cellWidth=="number")d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if(d.styles.cellWidth==="wrap"||s===!0)d.contentWidth>i?(d.minWidth=i,d.wrappedWidth=i):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var m=10/n;d.minWidth=d.styles.minCellWidth||m,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),t.allRows().forEach(function(a){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d&&d.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,d.wrappedWidth),c.minWidth=Math.max(c.minWidth,d.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,d.minReadableWidth);else{var u=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},h=u.cellWidth||u.minCellWidth;h&&typeof h=="number"&&(c.minWidth=h,c.wrappedWidth=h)}d&&(d.colSpan>1&&!c.minWidth&&(c.minWidth=d.minWidth),d.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=d.minWidth))}})}function yO(e,t,n){for(var s=t,i=e.reduce(function(m,p){return m+p.wrappedWidth},0),a=0;a<e.length;a++){var o=e[a],l=o.wrappedWidth/i,c=s*l,d=o.width+c,u=n(o),h=d<u?u:d;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var f=e.filter(function(m){return t<0?m.width>n(m):!0});f.length&&(t=yO(f,t,n))}return t}function Cot(e){for(var t={},n=1,s=e.allRows(),i=0;i<s.length;i++)for(var a=s[i],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=t[c.index];if(n>1)n--,delete a.cells[c.index];else if(d)d.cell.height+=a.height,n=d.cell.colSpan,delete a.cells[c.index],d.left--,d.left<=1&&delete t[c.index];else{var u=a.cells[c.index];if(!u)continue;if(u.height=a.height,u.rowSpan>1){var h=s.length-i,f=u.rowSpan>h?h:u.rowSpan;t[c.index]={cell:u,left:f,row:a}}}}}function Aot(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var s=t[n],i=null,a=0,o=0,l=0;l<e.columns.length;l++){var c=e.columns[l];if(o-=1,o>1&&e.columns[l+1])a+=c.width,delete s.cells[c.index];else if(i){var d=i;delete s.cells[c.index],i=null,d.width=c.width+a}else{var d=s.cells[c.index];if(!d)continue;if(o=d.colSpan,a=0,d.colSpan>1){i=d,a+=c.width;continue}d.width=c.width+a}}}function kot(e,t){for(var n={count:0,height:0},s=0,i=e.allRows();s<i.length;s++){for(var a=i[s],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=a.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if(d.styles.overflow==="linebreak")d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if(d.styles.overflow==="ellipsize")d.text=Iq(d.text,u,d.styles,t,"...");else if(d.styles.overflow==="hidden")d.text=Iq(d.text,u,d.styles,t,"");else if(typeof d.styles.overflow=="function"){var h=d.styles.overflow(d.text,u);typeof h=="string"?d.text=[h]:d.text=h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var f=d.contentHeight/d.rowSpan;d.rowSpan>1&&n.count*n.height<f*d.rowSpan?n={height:f,count:d.rowSpan}:n&&n.count>0&&n.height>f&&(f=n.height),f>a.height&&(a.height=f)}}n.count--}}function Iq(e,t,n,s,i){return e.map(function(a){return Pot(a,t,n,s,i)})}function Pot(e,t,n,s,i){var a=1e4*s.scaleFactor();if(t=Math.ceil(t*a)/a,t>=h_(e,n,s))return e;for(;t<h_(e+i,n,s)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+i}function Dhe(e,t){var n=new Pv(e),s=Tot(t,n.scaleFactor()),i=new wot(t,s);return Sot(n,i),n.applyStyles(n.userStyles),i}function Tot(e,t){var n=e.content,s=Oot(n.columns);if(n.head.length===0){var i=Lq(s,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=Lq(s,"foot");i&&n.foot.push(i)}var a=e.settings.theme,o=e.styles;return{columns:s,head:hP("head",n.head,s,o,a,t),body:hP("body",n.body,s,o,a,t),foot:hP("foot",n.foot,s,o,a,t)}}function hP(e,t,n,s,i,a){var o={},l=t.map(function(c,d){for(var u=0,h={},f=0,m=0,p=0,g=n;p<g.length;p++){var v=g[p];if(o[v.index]==null||o[v.index].left===0)if(m===0){var x=void 0;Array.isArray(c)?x=c[v.index-f-u]:x=c[v.dataKey];var y={};typeof x=="object"&&!Array.isArray(x)&&(y=(x==null?void 0:x.styles)||{});var j=Rot(e,v,d,i,s,a,y),w=new Rhe(x,j,e);h[v.dataKey]=w,h[v.index]=w,m=w.colSpan-1,o[v.index]={left:w.rowSpan-1,times:m}}else m--,f++;else o[v.index].left--,m=o[v.index].times,u++}return new Ohe(c,d,e,h)});return l}function Lq(e,t){var n={};return e.forEach(function(s){if(s.raw!=null){var i=Eot(t,s.raw);i!=null&&(n[s.dataKey]=i)}}),Object.keys(n).length>0?n:null}function Eot(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function Oot(e){return e.map(function(t,n){var s,i;return typeof t=="object"?i=(s=t.dataKey)!==null&&s!==void 0?s:n:i=n,new Not(i,t,n)})}function Rot(e,t,n,s,i,a,o){var l=lot(s),c;e==="head"?c=i.headStyles:e==="body"?c=i.bodyStyles:e==="foot"&&(c=i.footStyles);var d=Yh({},l.table,l[e],i.styles,c),u=i.columnStyles[t.dataKey]||i.columnStyles[t.index]||{},h=e==="body"?u:{},f=e==="body"&&n%2===0?Yh({},l.alternateRow,i.alternateRowStyles):{},m=oot(a),p=Yh({},m,d,f,h);return Yh(p,o)}function Dot(e,t,n){var s;n===void 0&&(n={});var i=khe(e,t),a=new Map,o=[],l=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(f){var m=t.columns.find(function(p){return p.dataKey===f||p.index===f});m&&!a.has(m.index)&&(a.set(m.index,!0),o.push(m.index),l.push(t.columns[m.index]),i-=m.wrappedWidth)});for(var d=!0,u=(s=n==null?void 0:n.start)!==null&&s!==void 0?s:0;u<t.columns.length;){if(a.has(u)){u++;continue}var h=t.columns[u].wrappedWidth;if(d||i>=h)d=!1,o.push(u),l.push(t.columns[u]),i-=h;else break;u++}return{colIndexes:o,columns:l,lastIndex:u-1}}function Mot(e,t){for(var n=[],s=0;s<t.columns.length;s++){var i=Dot(e,t,{start:s});i.columns.length&&(n.push(i),s=i.lastIndex)}return n}function Mhe(e,t){var n=t.settings,s=n.startY,i=n.margin,a={x:i.left,y:s},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=s+i.bottom+o;if(n.pageBreak==="avoid"){var c=t.body,d=c.reduce(function(f,m){return f+m.height},0);l+=d}var u=new Pv(e);(n.pageBreak==="always"||n.startY!=null&&l>u.pageSize().height)&&(Lhe(u),a.y=i.top),t.callWillDrawPageHooks(u,a);var h=Yh({},a);t.startPageNumber=u.pageNumber(),n.horizontalPageBreak?Iot(u,t,h,a):(u.applyStyles(u.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(f){return vf(u,t,f,a,t.columns)}),u.applyStyles(u.userStyles),t.body.forEach(function(f,m){var p=m===t.body.length-1;f_(u,t,f,p,h,a,t.columns)}),u.applyStyles(u.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(f){return vf(u,t,f,a,t.columns)})),Che(u,t,h,a),t.callEndPageHooks(u,a),t.finalY=a.y,e.lastAutoTable=t,u.applyStyles(u.userStyles)}function Iot(e,t,n,s){var i=Mot(e,t),a=t.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(d,u){e.applyStyles(e.userStyles),u>0?e1(e,t,n,s,d.columns,!0):Fq(e,t,s,d.columns),Lot(e,t,n,s,d.columns),fP(e,t,s,d.columns)});else for(var o=-1,l=i[0],c=function(){var d=o;if(l){e.applyStyles(e.userStyles);var u=l.columns;o>=0?e1(e,t,n,s,u,!0):Fq(e,t,s,u),d=$q(e,t,o+1,s,u),fP(e,t,s,u)}var h=d-o;i.slice(1).forEach(function(f){e.applyStyles(e.userStyles),e1(e,t,n,s,f.columns,!0),$q(e,t,o+1,s,f.columns,h),fP(e,t,s,f.columns)}),o=d};o<t.body.length-1;)c()}function Fq(e,t,n,s){var i=t.settings;e.applyStyles(e.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&t.head.forEach(function(a){return vf(e,t,a,n,s)})}function Lot(e,t,n,s,i){e.applyStyles(e.userStyles),t.body.forEach(function(a,o){var l=o===t.body.length-1;f_(e,t,a,l,n,s,i)})}function $q(e,t,n,s,i,a){e.applyStyles(e.userStyles),a=a??t.body.length;var o=Math.min(n+a,t.body.length),l=-1;return t.body.slice(n,o).forEach(function(c,d){var u=n+d===t.body.length-1,h=Ihe(e,t,u,s);c.canEntireRowFit(h,i)&&(vf(e,t,c,s,i),l=n+d)}),l}function fP(e,t,n,s){var i=t.settings;e.applyStyles(e.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&t.foot.forEach(function(a){return vf(e,t,a,n,s)})}function Fot(e,t,n){var s=n.getLineHeight(e.styles.fontSize),i=e.padding("vertical"),a=Math.floor((t-i)/s);return Math.max(0,a)}function $ot(e,t,n,s){var i={};e.spansMultiplePages=!0,e.height=0;for(var a=0,o=0,l=n.columns;o<l.length;o++){var c=l[o],d=e.cells[c.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var u=new Rhe(d.raw,d.styles,d.section);u=Yh(u,d),u.text=[];var h=Fot(d,t,s);d.text.length>h&&(u.text=d.text.splice(h,d.text.length));var f=s.scaleFactor(),m=s.getLineHeightFactor();d.contentHeight=d.getContentHeight(f,m),d.contentHeight>=t&&(d.contentHeight=t,u.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),u.contentHeight=u.getContentHeight(f,m),u.contentHeight>a&&(a=u.contentHeight),i[c.index]=u}}var p=new Ohe(e.raw,-1,e.section,i,!0);p.height=a;for(var g=0,v=n.columns;g<v.length;g++){var c=v[g],u=p.cells[c.index];u&&(u.height=p.height);var d=e.cells[c.index];d&&(d.height=e.height)}return p}function Bot(e,t,n,s){var i=e.pageSize().height,a=s.settings.margin,o=a.top+a.bottom,l=i-o;t.section==="body"&&(l-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var c=t.getMinimumRowHeight(s.columns,e),d=c<n;if(c>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!d)return!1;var u=t.hasRowSpan(s.columns),h=t.getMaxCellHeight(s.columns)>l;return h?(u&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(u||s.settings.rowPageBreak==="avoid")}function f_(e,t,n,s,i,a,o){var l=Ihe(e,t,s,a);if(n.canEntireRowFit(l,o))vf(e,t,n,a,o);else if(Bot(e,n,l,t)){var c=$ot(n,l,t,e);vf(e,t,n,a,o),e1(e,t,i,a,o),f_(e,t,c,s,i,a,o)}else e1(e,t,i,a,o),f_(e,t,n,s,i,a,o)}function vf(e,t,n,s,i){s.x=t.settings.margin.left;for(var a=0,o=i;a<o.length;a++){var l=o[a],c=n.cells[l.index];if(!c){s.x+=l.width;continue}e.applyStyles(c.styles),c.x=s.x,c.y=s.y;var d=t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,s);if(d===!1){s.x+=l.width;continue}Vot(e,c,s);var u=c.getTextPos();Nhe(c.text,u.x,u.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,s),s.x+=l.width}s.y+=n.height}function Vot(e,t,n){var s=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof s.lineWidth=="number"){var i=Ahe(s.lineWidth,s.fillColor);i&&e.rect(t.x,n.y,t.width,t.height,i)}else typeof s.lineWidth=="object"&&(s.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),Uot(e,t,n,s.lineWidth))}function Uot(e,t,n,s){var i,a,o,l;s.top&&(i=n.x,a=n.y,o=n.x+t.width,l=n.y,s.right&&(o+=.5*s.right),s.left&&(i-=.5*s.left),c(s.top,i,a,o,l)),s.bottom&&(i=n.x,a=n.y+t.height,o=n.x+t.width,l=n.y+t.height,s.right&&(o+=.5*s.right),s.left&&(i-=.5*s.left),c(s.bottom,i,a,o,l)),s.left&&(i=n.x,a=n.y,o=n.x,l=n.y+t.height,s.top&&(a-=.5*s.top),s.bottom&&(l+=.5*s.bottom),c(s.left,i,a,o,l)),s.right&&(i=n.x+t.width,a=n.y,o=n.x+t.width,l=n.y+t.height,s.top&&(a-=.5*s.top),s.bottom&&(l+=.5*s.bottom),c(s.right,i,a,o,l));function c(d,u,h,f,m){e.getDocument().setLineWidth(d),e.getDocument().line(u,h,f,m,"S")}}function Ihe(e,t,n,s){var i=t.settings.margin.bottom,a=t.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(i+=t.getFootHeight(t.columns)),e.pageSize().height-s.y-i}function e1(e,t,n,s,i,a){i===void 0&&(i=[]),a===void 0&&(a=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!a&&t.foot.forEach(function(l){return vf(e,t,l,s,i)}),t.callEndPageHooks(e,s);var o=t.settings.margin;Che(e,t,n,s),Lhe(e),t.pageNumber++,s.x=o.left,s.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,s),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return vf(e,t,l,s,i)}),e.applyStyles(e.userStyles))}function Lhe(e){var t=e.pageNumber();e.setPage(t+1);var n=e.pageNumber();return n===t?(e.addPage(),!0):!1}function qot(e){e.API.autoTable=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var s=t[0],i=Ehe(this,s),a=Dhe(this,i);return Mhe(this,a),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,n,s,i){Nhe(t,n,s,i,this)},e.API.autoTableSetDefaults=function(t){return Pv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,n){Pv.setDefaults(t,n)},e.API.autoTableHtmlToJson=function(t,n){var s;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Pv(this),a=The(i,t,window,n,!1),o=a.head,l=a.body,c=((s=o[0])===null||s===void 0?void 0:s.map(function(d){return d.content}))||[];return{columns:c,rows:l,data:l}}}var mP;function zot(e,t){var n=Ehe(e,t),s=Dhe(e,n);Mhe(e,s)}try{if(typeof window<"u"&&window){var Bq=window,Vq=Bq.jsPDF||((mP=Bq.jspdf)===null||mP===void 0?void 0:mP.jsPDF);Vq&&qot(Vq)}}catch(e){console.error("Could not apply autoTable plugin",e)}const Hot=e=>`"${e.replace(/"/g,'""')}"`;function Wot(){const{toast:e}=Tr(),[t,n]=b.useState(""),[s,i]=b.useState(""),[a,o]=b.useState(!1),[l,c]=b.useState([]),[d,u]=b.useState(null),[h,f]=b.useState([]),[m,p]=b.useState(!1),g=async w=>{if(w.preventDefault(),!t.trim()&&!s.trim()){e({title:"Add a search filter",description:"Enter an application number or owner mobile number.",variant:"destructive"});return}try{o(!0),c([]),u(null),f([]);const S=await(await lt("POST","/api/applications/search",{applicationNumber:t.trim()||void 0,ownerMobile:s.trim()||void 0})).json();if(!S.results||S.results.length===0){e({title:"No matches found",description:"Verify the application number and try again.",variant:"destructive"});return}c(S.results),v(S.results[0])}catch(N){e({title:"Search failed",description:N instanceof Error?N.message:"Unable to search applications",variant:"destructive"})}finally{o(!1)}},v=async w=>{u(w),f([]);try{p(!0);const S=await(await lt("GET",`/api/applications/${w.id}/timeline`)).json();f(S.timeline??[])}catch(N){e({title:"Timeline unavailable",description:N instanceof Error?N.message:"Unable to load audit history",variant:"destructive"})}finally{p(!1)}},x=()=>{if(!h.length||!d)return;const w=["Timestamp","Action","Actor","Previous Status","New Status","Remarks"],N=h.map(R=>{var L;const k=R.createdAt?sr(new Date(R.createdAt),"yyyy-MM-dd HH:mm:ss"):"",O=((L=LN[R.action])==null?void 0:L.label)??R.action,$=FN(R.actor),D=Mh(R.previousStatus)??"",q=Mh(R.newStatus)??"",M=R.feedback??"";return[k,O,$,D,q,M]}),S=[w,...N].map(R=>R.map(k=>Hot(k)).join(",")).join(`
`),T=new Blob([S],{type:"text/csv;charset=utf-8;"}),C=window.URL.createObjectURL(T),A=document.createElement("a");A.href=C,A.download=`${d.applicationNumber??d.id}-audit-trail.csv`,A.click(),window.URL.revokeObjectURL(C)},y=()=>{if(!h.length||!d)return;const w=new Sr({orientation:"landscape"});w.setFontSize(12),w.text(`Audit Trail - ${d.applicationNumber??d.propertyName}`,14,16);const N=h.map(S=>{var T;return[S.createdAt?sr(new Date(S.createdAt),"PPpp"):"",((T=LN[S.action])==null?void 0:T.label)??S.action,FN(S.actor),Mh(S.previousStatus)??"",Mh(S.newStatus)??"",S.feedback??""]});zot(w,{head:[["Timestamp","Action","Actor","Previous","New","Remarks"]],body:N,startY:24,styles:{fontSize:8,cellWidth:"wrap"},headStyles:{fillColor:[22,101,153]}}),w.save(`${d.applicationNumber??d.id}-audit-trail.pdf`)},j=b.useMemo(()=>m?r.jsxs("div",{className:"space-y-2",children:[r.jsx(Lr,{className:"h-6 w-full"}),r.jsx(Lr,{className:"h-6 w-full"}),r.jsx(Lr,{className:"h-6 w-full"})]}):h.length?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Timestamp"}),r.jsx(Mt,{children:"Action"}),r.jsx(Mt,{children:"Actor"}),r.jsx(Mt,{children:"Previous Status"}),r.jsx(Mt,{children:"New Status"}),r.jsx(Mt,{children:"Remarks"})]})}),r.jsx(Oo,{children:h.map(w=>{const N=LN[w.action],S=w.createdAt?sr(new Date(w.createdAt),"PPp"):"",T=Mh(w.previousStatus),C=Mh(w.newStatus);return r.jsxs(In,{children:[r.jsx(Rt,{className:"whitespace-nowrap",children:S}),r.jsxs(Rt,{className:"space-y-1",children:[r.jsx("div",{className:"font-medium",children:(N==null?void 0:N.label)??w.action}),r.jsx("p",{className:"text-xs text-muted-foreground",children:(N==null?void 0:N.description)??"Workflow update"})]}),r.jsx(Rt,{children:FN(w.actor)}),r.jsx(Rt,{children:T?r.jsx(ze,{variant:"outline",className:"rounded-full",children:T}):""}),r.jsx(Rt,{children:C?r.jsx(ze,{className:"rounded-full bg-primary/10 text-primary dark:text-primary-foreground",children:C}):""}),r.jsx(Rt,{className:"max-w-md whitespace-pre-line text-sm text-muted-foreground",children:w.feedback??""})]},w.id)})})]})}):r.jsx("p",{className:"text-sm text-muted-foreground",children:d?"No audit entries recorded yet for this application.":"Search for an application to view its audit trail."}),[h,m,d]);return r.jsxs("div",{className:"container mx-auto max-w-6xl py-6 space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Audit Trail Explorer"}),r.jsx("p",{className:"text-muted-foreground",children:"Search any application and review every action recorded in the workflow."})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(te,{variant:"outline",onClick:x,disabled:!h.length,className:"gap-2",children:[r.jsx(ds,{className:"h-4 w-4"}),"Export CSV"]}),r.jsxs(te,{variant:"outline",onClick:y,disabled:!h.length,className:"gap-2",children:[r.jsx(ir,{className:"h-4 w-4"}),"Export PDF"]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Lookup Application"}),r.jsx(Ue,{children:"Enter an application number to retrieve its audit history."})]}),r.jsxs(ge,{children:[r.jsxs("form",{onSubmit:g,className:"grid gap-3 md:grid-cols-[2fr,2fr,auto] md:items-center",children:[r.jsx(Pe,{value:t,onChange:w=>n(w.target.value),placeholder:"Application #"}),r.jsx(Pe,{value:s,onChange:w=>i(w.target.value),placeholder:"Owner mobile"}),r.jsxs(te,{type:"submit",disabled:a,className:"gap-2",children:[r.jsx(gu,{className:"h-4 w-4"}),a?"Searching...":"Search"]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Provide an application number or mobile to locate audit records quickly. Use the officer search page for additional filters such as Aadhaar or date range."})]})]}),l.length>0&&r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Search Results"}),r.jsx(Ue,{children:"Select an application to view detailed audit records."})]}),r.jsx(ge,{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Application #"}),r.jsx(Mt,{children:"Owner"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{children:"Submitted"}),r.jsx(Mt,{})]})}),r.jsx(Oo,{children:l.map(w=>r.jsxs(In,{className:"align-middle",children:[r.jsxs(Rt,{children:[r.jsx("div",{className:"font-semibold",children:w.applicationNumber||""}),r.jsx("p",{className:"text-xs text-muted-foreground",children:w.propertyName})]}),r.jsxs(Rt,{children:[r.jsx("div",{children:w.ownerName}),r.jsx("p",{className:"text-xs text-muted-foreground",children:w.ownerMobile})]}),r.jsx(Rt,{children:r.jsx(ze,{variant:"outline",className:"rounded-full",children:Mh(w.status)??w.status})}),r.jsx(Rt,{children:w.submittedAt?sr(new Date(w.submittedAt),"PP"):""}),r.jsx(Rt,{className:"text-right",children:r.jsx(te,{variant:(d==null?void 0:d.id)===w.id?"default":"outline",size:"sm",onClick:()=>v(w),children:(d==null?void 0:d.id)===w.id?"Viewing":"Open"})})]},w.id))})]})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Detailed Audit Trail"}),r.jsx(Ue,{children:d?`Every recorded action for ${d.applicationNumber||d.propertyName}`:"Search and select an application to view its complete audit history."})]}),r.jsxs(ge,{className:"space-y-6",children:[j,d&&r.jsx(EC,{applicationId:d.id,title:"Visual Timeline",description:"Chronological view of the same audit data."})]})]})]})}const Uq=e=>{if(!e)return"";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString(void 0,{day:"2-digit",month:"short",year:"numeric"})};function Kot(){const{data:e,isLoading:t,error:n,refetch:s,isRefetching:i}=rt({queryKey:["/api/admin-rc/applications"]}),a=(e==null?void 0:e.applications)??[],o=a.length,l=b.useMemo(()=>a.reduce((c,d)=>{const u=d.application.status??"unknown";return c[u]=(c[u]||0)+1,c},{}),[a]);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Legacy RC Applications"}),r.jsx("p",{className:"text-muted-foreground",children:"Dedicated queue for historical certificate holders seeded with dummy login numbers. These entries bypass DA/DTDO workflow and are editable only from this console."})]}),r.jsxs(te,{variant:"outline",onClick:()=>s(),disabled:t||i,children:[r.jsx(Na,{className:"mr-2 h-4 w-4"}),"Refresh"]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"space-y-1",children:[r.jsx(ke,{children:"Queue Overview"}),r.jsx(Ue,{children:o?`${o} application${o===1?"":"s"} awaiting Admin RC action`:"No pending legacy applications"}),o>0&&r.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:Object.entries(l).map(([c,d])=>r.jsxs(ze,{variant:"secondary",className:"capitalize",children:[c.replaceAll("_"," "),"  ",d]},c))})]}),r.jsx(ge,{children:t?r.jsxs("div",{className:"space-y-3",children:[r.jsx(Lr,{className:"h-12 w-full"}),r.jsx(Lr,{className:"h-12 w-full"}),r.jsx(Lr,{className:"h-12 w-full"})]}):n?r.jsx("div",{className:"rounded-md border border-destructive/50 bg-destructive/5 p-4 text-sm text-destructive",children:"Failed to load legacy applications. Please try again."}):a.length===0?r.jsx("div",{className:"rounded-md border border-dashed p-8 text-center text-muted-foreground",children:"No legacy RC applications are in the queue right now."}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto hidden md:block",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{className:"min-w-[140px]",children:"Application"}),r.jsx(Mt,{className:"min-w-[160px]",children:"Owner"}),r.jsx(Mt,{className:"min-w-[200px]",children:"Property"}),r.jsx(Mt,{className:"min-w-[120px]",children:"Category"}),r.jsx(Mt,{className:"min-w-[130px]",children:"Submitted"}),r.jsx(Mt,{className:"min-w-[120px] text-right",children:"Status"}),r.jsx(Mt,{className:"min-w-[110px] text-right",children:"Actions"})]})}),r.jsx(Oo,{children:a.map(({application:c,owner:d})=>r.jsxs(In,{children:[r.jsxs(Rt,{children:[r.jsx("div",{className:"font-medium",children:c.applicationNumber??"Draft"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:c.district??"District TBD"})]}),r.jsxs(Rt,{children:[r.jsx("div",{className:"font-medium",children:d.fullName??"Unnamed Owner"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:d.mobile??""})]}),r.jsxs(Rt,{children:[r.jsx("div",{className:"font-medium",children:c.propertyName}),r.jsx("div",{className:"text-xs text-muted-foreground",children:c.tehsil||c.block||c.address})]}),r.jsx(Rt,{className:"capitalize",children:r.jsx(ze,{variant:"outline",children:c.category??""})}),r.jsx(Rt,{children:Uq(c.submittedAt)}),r.jsx(Rt,{className:"text-right",children:r.jsx(ze,{className:"capitalize",variant:"secondary",children:(c.status??"unknown").replaceAll("_"," ")})}),r.jsx(Rt,{className:"text-right",children:r.jsx(te,{size:"sm",variant:"outline",asChild:!0,children:r.jsx(Co,{href:`/admin/rc-applications/${c.id}`,children:"Edit"})})})]},c.id))})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:a.map(({application:c,owner:d})=>r.jsxs("div",{className:"rounded-lg border p-4 shadow-sm space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:c.applicationNumber??"Draft"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:c.district??"District TBD"})]}),r.jsx(ze,{variant:"outline",children:c.category??""})]}),r.jsxs("div",{className:"text-sm",children:[r.jsx("p",{className:"font-medium",children:c.propertyName}),r.jsxs("p",{className:"text-muted-foreground",children:[d.fullName??"Unnamed Owner","  ",d.mobile??""]})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Submitted ",Uq(c.submittedAt)]}),r.jsx(te,{size:"sm",variant:"outline",className:"w-full",asChild:!0,children:r.jsx(Co,{href:`/admin/rc-applications/${c.id}`,children:"Edit Application"})})]},c.id))})]})})]})]})}const Got=[{value:"diamond",label:"Diamond"},{value:"gold",label:"Gold"},{value:"silver",label:"Silver"}],Yot=[{value:"mc",label:"Municipal Corporation / Municipal Council"},{value:"tcp",label:"Town & Country Planning / SADA / NP Area"},{value:"gp",label:"Gram Panchayat"}],Xot=[{value:"male",label:"Male"},{value:"female",label:"Female"},{value:"other",label:"Other"}],Qot=["draft","legacy_rc_review","submitted","under_scrutiny","forwarded_to_dtdo","dtdo_review","inspection_scheduled","inspection_under_review","verified_for_payment","payment_pending","approved","rejected"],Zot=()=>({propertyName:"",category:"",locationType:"",status:"draft",projectType:"",propertyOwnership:"",address:"",district:"",tehsil:"",block:"",gramPanchayat:"",pincode:"",ownerName:"",ownerMobile:"",ownerEmail:"",ownerAadhaar:"",ownerGender:"",propertyArea:"",singleBedRooms:"",singleBedRoomRate:"",doubleBedRooms:"",doubleBedRoomRate:"",familySuites:"",familySuiteRate:"",attachedWashrooms:"",distanceAirport:"",distanceRailway:"",distanceCityCenter:"",distanceShopping:"",distanceBusStand:"",certificateNumber:"",certificateIssuedDate:"",certificateExpiryDate:"",serviceNotes:"",guardianName:""}),qq=e=>{if(!e)return"";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"":t.toISOString().slice(0,10)},Jot=e=>{var t;return{propertyName:e.propertyName??"",category:e.category??"",locationType:e.locationType??"",status:e.status??"draft",projectType:e.projectType??"",propertyOwnership:e.propertyOwnership??"",address:e.address??"",district:e.district??"",tehsil:e.tehsil??"",block:e.block??"",gramPanchayat:e.gramPanchayat??"",pincode:e.pincode??"",ownerName:e.ownerName??"",ownerMobile:e.ownerMobile??"",ownerEmail:e.ownerEmail??"",ownerAadhaar:e.ownerAadhaar??"",ownerGender:e.ownerGender??"",propertyArea:e.propertyArea?String(e.propertyArea):"",singleBedRooms:e.singleBedRooms?String(e.singleBedRooms):"",singleBedRoomRate:e.singleBedRoomRate?String(e.singleBedRoomRate):"",doubleBedRooms:e.doubleBedRooms?String(e.doubleBedRooms):"",doubleBedRoomRate:e.doubleBedRoomRate?String(e.doubleBedRoomRate):"",familySuites:e.familySuites?String(e.familySuites):"",familySuiteRate:e.familySuiteRate?String(e.familySuiteRate):"",attachedWashrooms:e.attachedWashrooms?String(e.attachedWashrooms):"",distanceAirport:e.distanceAirport?String(e.distanceAirport):"",distanceRailway:e.distanceRailway?String(e.distanceRailway):"",distanceCityCenter:e.distanceCityCenter?String(e.distanceCityCenter):"",distanceShopping:e.distanceShopping?String(e.distanceShopping):"",distanceBusStand:e.distanceBusStand?String(e.distanceBusStand):"",certificateNumber:e.certificateNumber??"",certificateIssuedDate:qq(e.certificateIssuedDate),certificateExpiryDate:qq(e.certificateExpiryDate),serviceNotes:e.serviceNotes??"",guardianName:e.guardianName??((t=e.serviceContext)==null?void 0:t.legacyGuardianName)??""}},elt=e=>{const t=i=>i&&i.trim().length>0?i.trim():null,n=i=>i&&i.trim().length>0?Number(i):null,s=i=>i&&i.trim().length>0?new Date(i).toISOString():null;return{propertyName:e.propertyName.trim(),category:e.category||null,locationType:e.locationType||null,status:e.status,projectType:e.projectType||null,propertyOwnership:e.propertyOwnership||null,address:t(e.address),district:t(e.district),tehsil:t(e.tehsil),block:t(e.block),gramPanchayat:t(e.gramPanchayat),pincode:t(e.pincode),ownerName:t(e.ownerName),ownerMobile:t(e.ownerMobile),ownerEmail:t(e.ownerEmail),ownerAadhaar:t(e.ownerAadhaar),ownerGender:e.ownerGender||null,propertyArea:n(e.propertyArea),singleBedRooms:n(e.singleBedRooms),singleBedRoomRate:n(e.singleBedRoomRate),doubleBedRooms:n(e.doubleBedRooms),doubleBedRoomRate:n(e.doubleBedRoomRate),familySuites:n(e.familySuites),familySuiteRate:n(e.familySuiteRate),attachedWashrooms:n(e.attachedWashrooms),distanceAirport:n(e.distanceAirport),distanceRailway:n(e.distanceRailway),distanceCityCenter:n(e.distanceCityCenter),distanceShopping:n(e.distanceShopping),distanceBusStand:n(e.distanceBusStand),certificateNumber:t(e.certificateNumber),certificateIssuedDate:s(e.certificateIssuedDate),certificateExpiryDate:s(e.certificateExpiryDate),serviceNotes:t(e.serviceNotes),guardianName:t(e.guardianName)}};function tlt(){const[,e]=vR("/admin/rc-applications/:id"),[,t]=Dr(),{toast:n}=Tr(),s=e==null?void 0:e.id,i=lu({defaultValues:b.useMemo(()=>Zot(),[])}),{data:a,isLoading:o,error:l}=rt({queryKey:["/api/admin-rc/applications",s],enabled:!!s});b.useEffect(()=>{a!=null&&a.application&&i.reset(Jot(a.application))},[a,i]);const c=Ot({mutationFn:async u=>{const h=elt(u);return(await lt("PATCH",`/api/admin-rc/applications/${s}`,h)).json()},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/admin-rc/applications",s]}),er.invalidateQueries({queryKey:["/api/admin-rc/applications"]}),n({title:"Application updated",description:"All changes have been saved."})},onError:u=>{n({title:"Save failed",description:(u==null?void 0:u.message)||"Unable to save changes. Please try again.",variant:"destructive"})}});if(!s)return r.jsx("div",{className:"p-6",children:r.jsx(me,{children:r.jsxs(Ce,{children:[r.jsx(ke,{children:"Invalid request"}),r.jsx(Ue,{children:"Application identifier is missing."})]})})});const d=a==null?void 0:a.application;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-2 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Legacy Application Editor"}),r.jsx("p",{className:"text-muted-foreground",children:"Update certificate-ready information for historical RC owners. Changes apply immediately after saving."})]}),r.jsxs("div",{className:"flex gap-3 flex-wrap",children:[r.jsx(te,{variant:"outline",onClick:()=>t("/admin/rc-applications"),disabled:c.isPending,children:"Back to queue"}),r.jsx(te,{type:"button",variant:"secondary",onClick:()=>t(`/admin/rc-applications/${s}/certificate`),children:"Preview certificate"}),r.jsx(te,{onClick:i.handleSubmit(u=>c.mutate(u)),disabled:c.isPending,children:c.isPending?"Saving":"Save changes"})]})]}),o?r.jsx(Lr,{className:"h-[320px] w-full"}):l?r.jsx("div",{className:"rounded-md border border-destructive/50 bg-destructive/5 p-4 text-sm text-destructive",children:"Failed to load application. Please try again."}):d?r.jsx(du,{...i,children:r.jsxs("form",{className:"space-y-6",onSubmit:i.handleSubmit(u=>c.mutate(u)),children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:d.propertyName}),r.jsxs(Ue,{children:["Application #",d.applicationNumber,"  Owner mobile ",d.ownerMobile||"N/A"]})]}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:i.control,name:"propertyName",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Property Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Enter property name",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"status",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Status"}),r.jsxs(pr,{value:u.value,onValueChange:u.onChange,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select status"})}),r.jsx(hr,{children:Qot.map(h=>r.jsx(it,{value:h,children:h.replaceAll("_"," ")},h))})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"category",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Category"}),r.jsxs(pr,{value:u.value,onValueChange:u.onChange,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select category"})}),r.jsx(hr,{children:Got.map(h=>r.jsx(it,{value:h.value,children:h.label},h.value))})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"locationType",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Location Type"}),r.jsxs(pr,{value:u.value,onValueChange:u.onChange,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select location type"})}),r.jsx(hr,{children:Yot.map(h=>r.jsx(it,{value:h.value,children:h.label},h.value))})]}),r.jsx(ct,{})]})})]}),r.jsx(oc,{}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:i.control,name:"projectType",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Project Type"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"new_project / new_rooms",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"propertyOwnership",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Ownership"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"owned / leased",...u})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Owner information"}),r.jsx(Ue,{children:"Update personal details for the certificate printout."})]}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:i.control,name:"ownerName",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Owner Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Full name",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"ownerGender",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Gender"}),r.jsxs(pr,{value:u.value,onValueChange:u.onChange,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select gender"})}),r.jsx(hr,{children:Xot.map(h=>r.jsx(it,{value:h.value,children:h.label},h.value))})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"guardianName",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Father / Guardian Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"e.g., Late Shri Krishan Chand Sharma",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"ownerMobile",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Primary Mobile"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"10-digit mobile",maxLength:10,...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"ownerEmail",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Email"}),r.jsx(dt,{children:r.jsx(Pe,{type:"email",placeholder:"owner@example.com",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"ownerAadhaar",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Aadhaar"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"12-digit Aadhaar",maxLength:12,...u})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Location & Address"}),r.jsx(Ue,{children:"Ensure LGD hierarchy is accurate for district reports."})]}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:i.control,name:"address",render:({field:u})=>r.jsxs(at,{className:"md:col-span-2",children:[r.jsx(ht,{children:"Full Address"}),r.jsx(dt,{children:r.jsx(Ur,{rows:3,placeholder:"Property address",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"district",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"District"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"District",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"tehsil",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Tehsil"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Tehsil",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"block",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Block"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Block",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"gramPanchayat",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Village / Locality (PO)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Village or Gram Panchayat",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"pincode",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Pincode"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Pincode",maxLength:6,...u})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Room & Distance Details"}),r.jsx(Ue,{children:"Update counts and measurements for the certificate."})]}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-3",children:[r.jsx(ot,{control:i.control,name:"propertyArea",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Built-up Area (sq.ft)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"singleBedRooms",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Single Rooms"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"doubleBedRooms",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Double Rooms"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"familySuites",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Family Suites"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"attachedWashrooms",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Attached Washrooms"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,...u})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"md:col-span-3 grid gap-4 md:grid-cols-3",children:[r.jsx(ot,{control:i.control,name:"singleBedRoomRate",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Single Room Rate (/night)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"50",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"doubleBedRoomRate",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Double Room Rate (/night)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"50",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"familySuiteRate",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Family Suite Rate (/night)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"50",...u})}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"md:col-span-3 grid gap-4 md:grid-cols-3",children:[r.jsx(ot,{control:i.control,name:"distanceAirport",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Distance to Airport (km)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"0.1",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"distanceRailway",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Distance to Railway (km)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"0.1",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"distanceCityCenter",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Distance to City Centre (km)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"0.1",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"distanceShopping",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Distance to Market (km)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"0.1",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"distanceBusStand",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Distance to Bus Stand (km)"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:0,step:"0.1",...u})}),r.jsx(ct,{})]})})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Certificate metadata"}),r.jsx(Ue,{children:"Fill in RC number and validity dates when finalizing."})]}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-3",children:[r.jsx(ot,{control:i.control,name:"certificateNumber",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"RC Number"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"e.g., HP-HH-22-001",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"certificateIssuedDate",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Issue Date"}),r.jsx(dt,{children:r.jsx(Pe,{type:"date",...u})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"certificateExpiryDate",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Valid Till"}),r.jsx(dt,{children:r.jsx(Pe,{type:"date",...u})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Internal notes"}),r.jsx(Ue,{children:"Visible to Admin RC users only."})]}),r.jsx(ge,{children:r.jsx(ot,{control:i.control,name:"serviceNotes",render:({field:u})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Remarks"}),r.jsx(dt,{children:r.jsx(Ur,{rows:4,placeholder:"Remarks for certificate printing",...u})}),r.jsx(ct,{})]})})})]})]})}):r.jsx("div",{className:"rounded-md border border-dashed p-8 text-center text-muted-foreground",children:"Application not found or not part of the legacy queue."})]})}const zq=[{value:"policy_heritage",label:"Official RC Format",description:"Golden bordered Form-A certificate cleared for issue across HP"}],Nx=e=>{if(!e)return"";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"":t.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})},eo=(e,t)=>r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:e}),r.jsx("p",{className:"text-base font-medium",children:t??""})]});function Hq(){var y,j,w;const[,e]=vR("/admin/rc-applications/:id/certificate"),[,t]=Dr(),{toast:n}=Tr(),[s,i]=b.useState("policy_heritage"),[a,o]=b.useState(!1),l=e==null?void 0:e.id,[c,d]=b.useState(""),{data:u,isLoading:h,error:f}=rt({queryKey:["/api/admin-rc/applications",l],enabled:!!l}),m=u==null?void 0:u.application,p=u==null?void 0:u.owner,g=!!(m!=null&&m.certificateNumber),v=()=>{const N=c.trim();N&&t(`/admin/rc-applications/${N}/certificate`)},x=async()=>{if(m){o(!0);try{bC(m,s),m.certificateNumber||n({title:"Blank certificate downloaded",description:"RC number, dates, and other blanks can be filled manually on the printout."})}catch(N){n({title:"Download failed",description:N instanceof Error?N.message:"Unable to prepare certificate right now.",variant:"destructive"})}finally{o(!1)}}};return l?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold tracking-tight",children:"Certificate Preview"}),r.jsx("p",{className:"text-muted-foreground",children:"Review issuance details, pick a format, and download the RC for stamping/signing."})]}),r.jsxs("div",{className:"flex gap-3 flex-wrap",children:[r.jsxs(te,{variant:"outline",onClick:()=>t(`/admin/rc-applications/${l}`),children:[r.jsx(Es,{className:"mr-2 h-4 w-4"}),"Back to Editor"]}),r.jsxs(te,{onClick:x,disabled:!m||a,children:[r.jsx(ds,{className:"mr-2 h-4 w-4"}),a?"Preparing...":`Download ${((y=zq.find(N=>N.value===s))==null?void 0:y.label)??""}`]})]})]}),h?r.jsx(Lr,{className:"h-[320px] w-full"}):f?r.jsx("div",{className:"rounded-md border border-destructive/50 bg-destructive/5 p-4 text-sm text-destructive",children:"Failed to load application. Please refresh."}):m?r.jsxs("div",{className:"space-y-6",children:[!m.certificateNumber&&r.jsxs(fn,{variant:"destructive",children:[r.jsx(Po,{children:"Certificate number missing"}),r.jsx(mn,{children:"Enter certificate number, issue date, and validity in the editor before you print the RC. Blank templates can still be downloaded but officers must write the details manually."})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Registration Certificate"}),r.jsxs(Ue,{children:[m.propertyName||"Homestay","  ",m.district||"District TBD"]})]}),r.jsxs(ge,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[eo("Certificate Number",m.certificateNumber||""),eo("Issue Date",Nx(m.certificateIssuedDate)),eo("Valid Till",Nx(m.certificateExpiryDate))]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[eo("Status",m.status?m.status.replaceAll("_"," "):"Draft"),eo("Category",m.category?m.category.toUpperCase():""),eo("Total Rooms",m.totalRooms||0)]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"text-sm font-medium",children:"Certificate Format"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:zq.map(N=>r.jsx(te,{variant:s===N.value?"default":"outline",onClick:()=>i(N.value),type:"button",children:N.label},N.value))}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Both options follow the HP Tourism Policy 2025 Form-A master. Choose an orientation, then download the ready-to-print PDF."})]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(li,{className:"h-4 w-4"}),"Owner Information"]})}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-2",children:[eo("Full Name",m.ownerName||(p==null?void 0:p.fullName)||""),eo("Mobile Number",m.ownerMobile||(p==null?void 0:p.mobile)||""),eo("Email Address",m.ownerEmail||(p==null?void 0:p.email)||""),eo("Aadhaar Number",m.ownerAadhaar||"")]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"h-4 w-4"}),"Property Information"]})}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-2",children:[eo("Property Name",m.propertyName||""),eo("Category",m.category?m.category.toUpperCase():""),eo("Location Type",((j=m.locationType)==null?void 0:j.toUpperCase())||""),eo("Project Type",m.projectType||""),r.jsxs("div",{className:"md:col-span-2 space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Address"}),r.jsxs("p",{className:"text-base font-medium flex gap-2 items-start",children:[r.jsx(Js,{className:"mt-0.5 h-4 w-4 text-muted-foreground"}),r.jsxs("span",{children:[m.address?`${m.address}, `:"",m.tehsil?`${m.tehsil}, `:"",m.district||"",m.pincode?`  ${m.pincode}`:""]})]})]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Al,{className:"h-4 w-4"}),"Important Dates"]})}),r.jsxs(ge,{className:"grid gap-4 md:grid-cols-3",children:[eo("Submitted On",Nx(m.submittedAt)),eo("Updated On",Nx(m.updatedAt)),eo("Renewal Window",(w=m.serviceContext)!=null&&w.renewalWindow?`${Nx(m.serviceContext.renewalWindow.start)}  ${Nx(m.serviceContext.renewalWindow.end)}`:"")]})]}),!g&&r.jsxs(fn,{children:[r.jsx(Po,{children:"Template download available"}),r.jsx(mn,{children:"Even without certificate metadata this will export a blank RC template so you can fill in the remaining fields manually."})]})]}):r.jsx("div",{className:"rounded-md border border-dashed p-8 text-center text-muted-foreground",children:"Application not found or not part of the legacy RC queue."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-muted-foreground",children:"RC Desk"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Certificate Generator"}),r.jsx("p",{className:"text-muted-foreground",children:"Enter an approved application ID to jump into the certificate preview. You can find IDs in the RC Applications workspace."})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Lookup Application"}),r.jsx(Ue,{children:"Paste the numeric application ID or RC number."})]}),r.jsxs(ge,{className:"flex flex-col gap-4 md:flex-row",children:[r.jsx(Pe,{placeholder:"eg. 1025",value:c,onChange:N=>d(N.target.value),onKeyDown:N=>{N.key==="Enter"&&v()}}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{onClick:v,children:"Open Certificate"}),r.jsx(te,{variant:"outline",onClick:()=>t("/admin/rc-applications"),children:"RC Workspace"})]})]})]})]})}const Wq="/existing-owner",rlt=[{title:"Verified RC Copy",description:"Ensure the owner has a scanned copy of their valid Registration Certificate."},{title:"Ownership Proof",description:"Collect the latest property tax/revenue record proving ownership."},{title:"Utility Bill",description:"A recent (last 3 months) commercial electricity or water bill is required."},{title:"Consent Letter",description:"If the operator is different from the owner, obtain a signed consent letter."}];function nlt(){return r.jsxs("div",{className:"container mx-auto max-w-5xl p-6 space-y-8",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-muted-foreground",children:"Admin Toolkit"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Legacy Owner Support"}),r.jsx("p",{className:"text-muted-foreground",children:"Use this playbook while onboarding existing RC holders into the digital workflow. Share the owner link, verify artefacts, and track migrations."})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(xQ,{className:"h-4 w-4"}),"Share Owner Link"]}),r.jsx(Ue,{children:"Open the public facing legacy form in a separate window and share with the applicant."})]}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx(te,{asChild:!0,variant:"outline",children:r.jsx("a",{href:Wq,target:"_blank",rel:"noreferrer",children:"Preview Owner Flow"})}),r.jsx(te,{variant:"secondary",onClick:()=>{navigator.clipboard.writeText(new URL(Wq,window.location.origin).toString()).catch(()=>null)},children:"Copy Link"})]})]}),r.jsx(ge,{className:"grid gap-4 md:grid-cols-2",children:rlt.map(e=>r.jsxs("div",{className:"rounded-lg border p-4",children:[r.jsx("p",{className:"text-sm font-semibold",children:e.title}),r.jsx("p",{className:"text-sm text-muted-foreground",children:e.description})]},e.title))})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(H0,{className:"h-4 w-4"}),"Migration Checklist"]}),r.jsx(Ue,{children:"Quick steps for the admin desk to validate and migrate legacy owners."})]}),r.jsxs(ge,{className:"space-y-3 text-sm text-muted-foreground",children:[r.jsx("p",{children:"1. Verify RC copy and match details with district records."}),r.jsx("p",{children:"2. Confirm supporting documents and scan quality."}),r.jsx("p",{children:"3. Create/assign a DA for the district if not already mapped."}),r.jsx("p",{children:"4. Log the migration case in the district tracker sheet."})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"h-4 w-4"}),"Reference Material"]}),r.jsx(Ue,{children:"Handy references while helping owners on calls."})]}),r.jsxs(ge,{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"Owner FAQ Deck"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Talking points for typical onboarding queries."})]}),r.jsx(ze,{variant:"outline",children:"Coming soon"})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:"District Escalation Sheet"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep DA/DTDO contact list updated weekly."})]}),r.jsx(te,{asChild:!0,variant:"outline",size:"sm",children:r.jsx("a",{href:"/admin/super-console#communications",children:"Update"})})]})]})]})]})]})}const Fhe=["Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul and Spiti","Mandi","Shimla","Sirmaur","Solan","Una"];function slt(){Tr();const[e,t]=b.useState("owner");return r.jsxs("div",{className:"container mx-auto p-6 space-y-8",children:[r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Test Runner Dashboard"}),r.jsxs("p",{className:"text-muted-foreground",children:["Safe Environment for Pipeline Testing, Routing Verification, and Payment Checks.",r.jsx("span",{className:"block text-amber-600 font-medium mt-1",children:" Strictly for Development/Staging use only."})]})]}),r.jsxs(aa,{value:e,onValueChange:t,className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-3 mb-8",children:[r.jsx(Pr,{value:"owner",children:"1. Owner Workflow (Pipelines)"}),r.jsx(Pr,{value:"staff",children:"2. Staff Workflow (Routing)"}),r.jsx(Pr,{value:"system",children:"3. System & Payments"})]}),r.jsx(Rr,{value:"owner",children:r.jsx(ilt,{})}),r.jsx(Rr,{value:"staff",children:r.jsx(alt,{})}),r.jsx(Rr,{value:"system",children:r.jsx(olt,{})}),r.jsx(Rr,{value:"reports",children:r.jsx(clt,{})})]}),r.jsxs("div",{className:"bg-slate-100 p-4 rounded text-xs text-slate-500 border border-slate-200",children:[r.jsx("strong",{children:"Safety Protocol:"})," All generated applications are tagged with `TEST-` prefix. Do not use this tool on production data."]})]})}function ilt(){const{toast:e}=Tr(),[t,n]=b.useState("Shimla"),[s,i]=b.useState(""),[a,o]=b.useState(3),[l,c]=b.useState(!0),[d,u]=b.useState([]),h=Ot({mutationFn:async()=>(await lt("POST","/api/test/seed-applications",{district:t,tehsil:s||void 0,count:a,status:"submitted",bypassPayment:l})).json(),onSuccess:f=>{e({title:"Success",description:`Created ${f.applications.length} applications`}),u(m=>[`[${new Date().toLocaleTimeString()}]  Created ${f.applications.length} apps for ${t}${s?` (${s})`:""}`,...m])},onError:f=>{e({title:"Error",variant:"destructive",description:f.message}),u(m=>[`[${new Date().toLocaleTimeString()}]  Error: ${f.message}`,...m])}});return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Pipeline Generator"}),r.jsx(Ue,{children:"Batch create applications to test District Pipelines"})]}),r.jsxs(ge,{className:"space-y-6",children:[r.jsxs("div",{className:"flex gap-2 p-3 bg-slate-50 border rounded-md",children:[r.jsx("span",{className:"text-xs font-semibold text-slate-500 flex items-center mr-2",children:"QUICK PRESETS:"}),r.jsx(te,{variant:"outline",size:"sm",className:"h-7 text-xs border-indigo-200 text-indigo-700 hover:bg-indigo-50",onClick:()=>{n("Chamba"),i("Pangi")},children:" Pangi Tribal Pipeline"}),r.jsx(te,{variant:"outline",size:"sm",className:"h-7 text-xs border-indigo-200 text-indigo-700 hover:bg-indigo-50",onClick:()=>{n("Lahaul and Spiti"),i("Spiti")},children:" Spiti Tribal Pipeline"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Select District Pipeline"}),r.jsxs(pr,{value:t,onValueChange:f=>{n(f),i("")},children:[r.jsx(ur,{children:r.jsx(yr,{})}),r.jsx(hr,{children:Fhe.map(f=>r.jsx(it,{value:f,children:f},f))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Tehsil Name (Optional)"}),r.jsx(Pe,{placeholder:"Auto-assigned if empty (e.g. 'Test Tehsil')",value:s,onChange:f=>i(f.target.value)}),r.jsx("p",{className:"text-[10px] text-muted-foreground",children:'* Use "Pangi" or "Spiti" to trigger tribal logic.'})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Batch Size"}),r.jsx("div",{className:"flex gap-2",children:[1,3,5,10].map(f=>r.jsxs(te,{variant:a===f?"default":"outline",onClick:()=>o(f),type:"button",children:[f," Apps"]},f))})]}),r.jsxs("div",{className:"flex items-center space-x-2 border p-4 rounded bg-amber-50 border-amber-200",children:[r.jsx(Zs,{id:"bypass",checked:l,onCheckedChange:f=>c(!!f)}),r.jsxs(je,{htmlFor:"bypass",className:"cursor-pointer",children:[r.jsx("strong",{children:"Bypass Payment?"})," (Mark as PAID instanty)"]})]}),r.jsx(te,{className:"w-full",size:"lg",disabled:h.isPending,onClick:()=>h.mutate(),children:h.isPending?"Generating...":"Run Pipeline Generation"})]}),r.jsxs("div",{className:"bg-black text-green-400 font-mono text-xs p-4 rounded h-64 overflow-y-auto",children:[r.jsx("div",{className:"font-bold border-b border-gray-700 pb-2 mb-2",children:"Build Log:"}),d.length===0&&r.jsx("span",{className:"text-gray-500 italic",children:"Waiting for commands..."}),d.map((f,m)=>r.jsx("div",{className:"mb-1",children:f},m))]})]})]})]})}function alt(){const{data:e,isLoading:t}=rt({queryKey:["/api/test/routing-stats"],queryFn:async()=>{const n=await fetch("/api/test/routing-stats");if(!n.ok)throw new Error("Failed");return n.json()}});return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Routing Verification Matrix"}),r.jsx(Ue,{children:"Real-time view of application distribution across queues"})]}),r.jsx(ge,{children:t?r.jsx("div",{children:"Loading stats..."}):r.jsx("div",{className:"border rounded-md overflow-hidden",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-gray-100 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3",children:"District"}),r.jsx("th",{className:"p-3",children:"Drafts"}),r.jsx("th",{className:"p-3",children:"Pending Review"}),r.jsx("th",{className:"p-3",children:"Approved"}),r.jsx("th",{className:"p-3",children:"Routing Health"})]})}),r.jsxs("tbody",{children:[Object.entries(e||{}).map(([n,s])=>r.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[r.jsx("td",{className:"p-3 font-medium",children:n}),r.jsx("td",{className:"p-3",children:s.draft||0}),r.jsx("td",{className:"p-3 font-semibold text-blue-600",children:s.submitted||s.document_verification||0}),r.jsx("td",{className:"p-3 text-green-600",children:s.approved||0}),r.jsx("td",{className:"p-3",children:r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-green-100 text-green-700 text-xs font-bold",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"})," Verified"]})})]},n)),(!e||Object.keys(e).length===0)&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-400",children:"No data found in system yet."})})]})]})})})]})}function olt(){const[e,t]=b.useState("Shimla"),[n,s]=b.useState(null),[i,a]=b.useState(!1),{toast:o}=Tr();b.useEffect(()=>{(async()=>{try{const u=await(await lt("GET",`/api/test/preview-integration?district=${e}`)).json();s(u)}catch(d){console.error("Preview failed",d)}})()},[e]);const l=async()=>{a(!0);try{const d=await(await lt("POST","/api/test/setup-integration-payment",{district:e})).json();if(!d.success)throw new Error("Failed to setup test application");const h=await(await lt("POST","/api/himkosh/initiate",{applicationId:d.applicationId})).json();if(h.encdata){const f=document.createElement("form");f.method="POST",f.action=h.paymentUrl,f.target="_blank";const m=document.createElement("input");m.type="hidden",m.name="encdata",m.value=h.encdata,f.appendChild(m);const p=document.createElement("input");p.type="hidden",p.name="merchant_code",p.value=h.merchantCode,f.appendChild(p),document.body.appendChild(f),f.submit(),document.body.removeChild(f),o({title:"Redirecting to HimKosh",description:`Testing District: ${e}`})}else throw new Error("No encryption data received from gateway")}catch(c){o({title:"Test Failed",description:c.message,variant:"destructive"})}finally{a(!1)}};return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"HimKosh Integration Test (1)"}),r.jsx(Ue,{children:"Verifies Full Pipeline: DB  Routing  Keys  Gateway"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"rounded bg-blue-50 p-4 border border-blue-100 text-sm text-blue-800",children:["This test creates a ",r.jsx("strong",{children:"real temporary application"})," record and processes it through the ",r.jsx("strong",{children:"exact same pipeline"})," as a user application. It verifies District Routing (Tehsil mapping), DDO Selection, Encryption Keys, and Gateway Handshake."]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Select District (Head of Account)"}),r.jsxs(pr,{value:e,onValueChange:c=>t(c),children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select District"})}),r.jsx(hr,{children:["Pangi","Lahaul-Spiti (Kaza)","Lahaul",...Fhe.filter(c=>c!=="Lahaul and Spiti")].map(c=>r.jsx(it,{value:c,children:c},c))})]})]}),n&&r.jsxs("div",{className:"p-3 bg-slate-100 rounded text-xs font-mono space-y-1 border",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Routing Label:"}),r.jsx("span",{className:"font-bold text-slate-800",children:n.routingLabel})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"DDO Code:"}),r.jsx("span",{className:"font-bold text-green-600",children:n.ddoCode})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-500",children:"Head:"}),r.jsx("span",{children:n.head1})]})]}),r.jsxs(te,{variant:"default",className:"w-full bg-green-600 hover:bg-green-700",onClick:l,disabled:i,children:[r.jsx(zu,{className:"w-4 h-4 mr-2"}),i?"Setting up...":"Proceed to Pay 1 (Real Pipeline)"]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"System Health"}),r.jsx(Ue,{children:"Active Service Status"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Database (Primary)"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Connected"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),"Object Storage (Local)"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Writable"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[r.jsxs("span",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500"}),"SMS Gateway"]}),r.jsx("span",{className:"text-xs text-muted-foreground",children:"Mock Mode"})]})]})]}),r.jsx(llt,{selectedDistrict:e})]})}function llt({selectedDistrict:e}){var u,h;const[t,n]=b.useState("all"),[s,i]=b.useState(null),{data:a}=rt({queryKey:["/api/admin/reports/ddo-codes"],queryFn:async()=>(await lt("GET","/api/admin/reports/ddo-codes")).json()}),{data:o,isLoading:l,refetch:c}=rt({queryKey:["test-payments",t],queryFn:async()=>{const f=new URLSearchParams;return f.set("transactionType","test"),f.set("status","all"),f.set("limit","50"),t&&t!=="all"&&f.set("ddo",t),(await lt("GET",`/api/admin/reports/payments?${f.toString()}`)).json()},refetchInterval:1e4}),d=f=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(f);return r.jsxs(r.Fragment,{children:[r.jsxs(me,{className:"md:col-span-2",children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx($m,{className:"w-5 h-5 text-green-600"}),"Test Payment Log"]}),r.jsx(Ue,{children:"Transactions from Test Runner (TEST- prefixed applications)"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(pr,{value:t,onValueChange:n,children:[r.jsx(ur,{className:"w-[200px]",children:r.jsx(yr,{placeholder:"Filter by DDO"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"all",children:"All DDO Codes"}),(u=a==null?void 0:a.ddoCodes)==null?void 0:u.map(f=>r.jsxs(it,{value:f.ddoCode,children:[f.district," (",f.ddoCode,")"]},f.ddoCode))]})]}),r.jsx(te,{variant:"outline",size:"sm",onClick:()=>c(),children:r.jsx(Na,{className:"w-4 h-4"})})]})]}),r.jsx(ge,{children:l?r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):(h=o==null?void 0:o.payments)!=null&&h.length?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Date"}),r.jsx(Mt,{children:"District"}),r.jsx(Mt,{children:"DDO Code"}),r.jsx(Mt,{children:"Head"}),r.jsx(Mt,{children:"GRN"}),r.jsx(Mt,{className:"text-right",children:"Amount"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{className:"text-right",children:"Actions"})]})}),r.jsx(Oo,{children:o.payments.map(f=>r.jsxs(In,{children:[r.jsx(Rt,{className:"whitespace-nowrap text-xs",children:f.createdAt?sr(new Date(f.createdAt),"dd MMM HH:mm"):""}),r.jsx(Rt,{className:"font-medium",children:f.applicationDistrict||""}),r.jsx(Rt,{className:"font-mono text-xs",children:f.ddo}),r.jsx(Rt,{className:"font-mono text-xs max-w-[100px] truncate",children:f.head1}),r.jsx(Rt,{className:"font-mono text-xs",children:f.echTxnId||""}),r.jsx(Rt,{className:"text-right font-semibold",children:d(f.totalAmount)}),r.jsx(Rt,{children:r.jsx(ze,{variant:f.transactionStatus==="success"?"default":f.transactionStatus==="failed"?"destructive":"secondary",children:f.transactionStatus||"pending"})}),r.jsx(Rt,{className:"text-right",children:r.jsx(te,{variant:"outline",size:"sm",onClick:()=>i(f),children:"Details"})})]},f.id))})]})}):r.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No test payments yet. Run a district test above to see transactions here."})})]}),r.jsx(us,{open:!!s,onOpenChange:()=>i(null),children:r.jsxs(Jn,{className:"max-w-lg",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Transaction Details"}),r.jsx(Ns,{children:"HimKosh payment transaction details for test application"})]}),s&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Application Ref"}),r.jsx("p",{className:"font-mono",children:s.deptRefNo})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"HimKosh Ref"}),r.jsx("p",{className:"font-mono",children:s.appRefNo})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"District"}),r.jsx("p",{children:s.applicationDistrict})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"DDO Code"}),r.jsx("p",{className:"font-mono",children:s.ddo})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Head"}),r.jsx("p",{className:"font-mono text-xs",children:s.head1})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Amount"}),r.jsx("p",{className:"font-semibold",children:d(s.totalAmount)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Status"}),r.jsx(ze,{variant:s.transactionStatus==="success"?"default":s.transactionStatus==="failed"?"destructive":"secondary",children:s.transactionStatus})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"GRN / ECH TxnID"}),r.jsx("p",{className:"font-mono",children:s.echTxnId||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Bank CIN"}),r.jsx("p",{className:"font-mono",children:s.bankCIN||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Bank Name"}),r.jsx("p",{children:s.bankName||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Tender By"}),r.jsx("p",{children:s.tenderBy||""})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Date"}),r.jsx("p",{children:s.createdAt?sr(new Date(s.createdAt),"dd MMM yyyy, hh:mm a"):""})]})]})})]})})]})}function clt(){var s,i,a,o,l,c;const{data:e,isLoading:t,refetch:n}=rt({queryKey:["/api/test/reports"],queryFn:async()=>{const d=await fetch("/api/test/reports");if(!d.ok)throw new Error("Failed to fetch reports");return d.json()}});return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end gap-2",children:r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>n(),children:[r.jsx(Na,{className:"w-4 h-4 mr-2"})," Refresh Results"]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs(me,{className:e!=null&&e.playwright?"":"opacity-50",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Sve,{className:"w-5 h-5 text-blue-500"}),"E2E Tests (Playwright)"]}),r.jsx(Ue,{children:"End-to-End User Flow Verification"})]}),r.jsx(ge,{children:e!=null&&e.playwright?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded",children:[r.jsx("span",{className:"font-semibold text-sm",children:"Total Tests"}),r.jsx("span",{className:"font-bold",children:((s=e.playwright.stats)==null?void 0:s.expected)??0})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[r.jsxs("div",{className:"bg-green-100 text-green-700 p-2 rounded",children:[r.jsx("div",{className:"font-bold text-lg",children:((i=e.playwright.stats)==null?void 0:i.expected)-((a=e.playwright.stats)==null?void 0:a.unexpected)}),"Passed"]}),r.jsxs("div",{className:"bg-red-100 text-red-700 p-2 rounded",children:[r.jsx("div",{className:"font-bold text-lg",children:((o=e.playwright.stats)==null?void 0:o.unexpected)??0}),"Failed"]}),r.jsxs("div",{className:"bg-yellow-100 text-yellow-700 p-2 rounded",children:[r.jsx("div",{className:"font-bold text-lg",children:((l=e.playwright.stats)==null?void 0:l.skipped)??0}),"Skipped"]})]}),((c=e.playwright.stats)==null?void 0:c.unexpected)>0&&r.jsxs("div",{className:"text-xs text-red-600 border border-red-200 bg-red-50 p-2 rounded mt-2",children:[r.jsx("strong",{children:"Failures Detected:"})," Check terminal for details."]})]}):r.jsx("div",{className:"text-sm text-gray-500 italic",children:"No report found. Run `npm run test:e2e` in terminal."})})]}),r.jsxs(me,{className:e!=null&&e.vitest?"":"opacity-50",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(kr,{className:"w-5 h-5 text-purple-500"}),"Unit Tests (Vitest)"]}),r.jsx(Ue,{children:"Component & Logic Verification"})]}),r.jsx(ge,{children:e!=null&&e.vitest?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded",children:[r.jsx("span",{className:"font-semibold text-sm",children:"Total Tests"}),r.jsx("span",{className:"font-bold",children:e.vitest.numTotalTests??0})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-sm",children:[r.jsxs("div",{className:"bg-green-100 text-green-700 p-2 rounded",children:[r.jsx("div",{className:"font-bold text-lg",children:e.vitest.numPassedTests??0}),"Passed"]}),r.jsxs("div",{className:"bg-red-100 text-red-700 p-2 rounded",children:[r.jsx("div",{className:"font-bold text-lg",children:e.vitest.numFailedTests??0}),"Failed"]}),r.jsxs("div",{className:"bg-yellow-100 text-yellow-700 p-2 rounded",children:[r.jsx("div",{className:"font-bold text-lg",children:e.vitest.numPendingTests??0}),"Skipped"]})]})]}):r.jsx("div",{className:"text-sm text-gray-500 italic",children:"No report found. Run `npm run test:unit` in terminal."})})]})]})]})}var YM="Switch",[dlt]=oa(YM),[ult,hlt]=dlt(YM),$he=b.forwardRef((e,t)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...h}=e,[f,m]=b.useState(null),p=Jr(t,j=>m(j)),g=b.useRef(!1),v=f?u||!!f.closest("form"):!0,[x=!1,y]=bc({prop:i,defaultProp:a,onChange:d});return r.jsxs(ult,{scope:n,checked:x,disabled:l,children:[r.jsx(ar.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":Uhe(x),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:p,onClick:$t(e.onClick,j=>{y(w=>!w),v&&(g.current=j.isPropagationStopped(),g.current||j.stopPropagation())})}),v&&r.jsx(flt,{control:f,bubbles:!g.current,name:s,value:c,checked:x,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});$he.displayName=YM;var Bhe="SwitchThumb",Vhe=b.forwardRef((e,t)=>{const{__scopeSwitch:n,...s}=e,i=hlt(Bhe,n);return r.jsx(ar.span,{"data-state":Uhe(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});Vhe.displayName=Bhe;var flt=e=>{const{control:t,checked:n,bubbles:s=!0,...i}=e,a=b.useRef(null),o=NC(n),l=q_(t);return b.useEffect(()=>{const c=a.current,d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==n&&h){const f=new Event("click",{bubbles:s});h.call(c,n),c.dispatchEvent(f)}},[o,n,s]),r.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:a,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Uhe(e){return e?"checked":"unchecked"}var qhe=$he,mlt=Vhe;const Zn=b.forwardRef(({className:e,...t},n)=>r.jsx(qhe,{className:Xe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:r.jsx(mlt,{className:Xe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Zn.displayName=qhe.displayName;const Kf="1007739248479536901",pP="{#var#} is your OTP for Himachal Tourism e-services portal login. - HP Tourism E-services",gP={OTP:"123456",OWNER_NAME:"Test Owner",APPLICATION_ID:"HS-2025-0001",INSPECTION_DATE:"25 Nov 2025",REMARKS:"Sample remarks for preview"},plt=e=>{let t=e.trim();return t=t.replace(/\{#var#\}/gi,gP.OTP),t=t.replace(/{{\s*([^}]+)\s*}}/g,(n,s)=>{const i=s.trim().toUpperCase();return gP[i]??gP.OTP}),t},glt=()=>{var L,V;const{toast:e}=Tr(),t={host:"",port:"25",username:"",fromEmail:"",password:""},[n,s]=b.useState({provider:"custom",custom:{...t},nic:{...t},sendgrid:{...t}}),[i,a]=b.useState(""),[o,l]=b.useState([]),[c,d]=b.useState({customPasswordSet:!1,nicPasswordSet:!1,sendgridPasswordSet:!1}),[u,h]=b.useState({provider:"nic",nic:{username:"",password:"",senderId:"",departmentKey:"",templateId:Kf,postUrl:"https://msdgweb.mgov.gov.in/esms/sendsmsrequestDLT"},nicV2:{username:"",password:"",senderId:"",templateId:Kf,key:"",postUrl:"https://msdgweb.mgov.gov.in/esms/sendsmsrequestDLT"},twilio:{accountSid:"",authToken:"",fromNumber:"",messagingServiceSid:""},testMobile:"8091441005",testMessage:pP}),[f,m]=b.useState({nicPasswordSet:!1,nicV2PasswordSet:!1,twilioAuthTokenSet:!1}),[p,g]=b.useState(""),v=P=>({host:(P==null?void 0:P.host)??"",port:P!=null&&P.port?String(P.port):"25",username:(P==null?void 0:P.username)??"",fromEmail:(P==null?void 0:P.fromEmail)??"",password:""}),{data:x,isLoading:y,refetch:j}=rt({queryKey:["/api/admin/communications"],queryFn:async()=>await(await lt("GET","/api/admin/communications")).json()});b.useEffect(()=>{var Z,F,W,G,H,se;const P=x==null?void 0:x.email;if(P){const J=P.provider??"custom";s({provider:J,custom:v(P.custom),nic:v(P.nic),sendgrid:v(P.sendgrid)}),d({customPasswordSet:!!((Z=P.custom)!=null&&Z.passwordSet),nicPasswordSet:!!((F=P.nic)!=null&&F.passwordSet),sendgridPasswordSet:!!((W=P.sendgrid)!=null&&W.passwordSet)});const ie=P[J]??void 0;!i&&(ie!=null&&ie.fromEmail)&&a(ie.fromEmail)}const z=x==null?void 0:x.sms;if(z){const J=z.provider??"nic";h(ie=>{var X,he,fe,Q,Oe,ve,ee,Ee,Re,oe,De,tt,Qe;return{...ie,provider:J,nic:{username:((X=z.nic)==null?void 0:X.username)??"",password:"",senderId:((he=z.nic)==null?void 0:he.senderId)??"",departmentKey:((fe=z.nic)==null?void 0:fe.departmentKey)??"",templateId:((Q=z.nic)==null?void 0:Q.templateId)??Kf,postUrl:((Oe=z.nic)==null?void 0:Oe.postUrl)??ie.nic.postUrl},nicV2:{username:((ve=z.nicV2)==null?void 0:ve.username)??"",password:"",senderId:((ee=z.nicV2)==null?void 0:ee.senderId)??"",templateId:((Ee=z.nicV2)==null?void 0:Ee.templateId)??Kf,key:((Re=z.nicV2)==null?void 0:Re.key)??"",postUrl:((oe=z.nicV2)==null?void 0:oe.postUrl)??ie.nicV2.postUrl},twilio:{accountSid:((De=z.twilio)==null?void 0:De.accountSid)??"",authToken:"",fromNumber:((tt=z.twilio)==null?void 0:tt.fromNumber)??"",messagingServiceSid:((Qe=z.twilio)==null?void 0:Qe.messagingServiceSid)??""},testMessage:ie.testMessage||pP}}),m({nicPasswordSet:!!((G=z.nic)!=null&&G.passwordSet),nicV2PasswordSet:!!((H=z.nicV2)!=null&&H.passwordSet),twilioAuthTokenSet:!!((se=z.twilio)!=null&&se.authTokenSet)})}},[x,i]);const w=Ot({mutationFn:async P=>lt("PUT","/api/admin/communications/email",P),onSuccess:(P,z)=>{e({title:"SMTP settings saved"}),s(Z=>({...Z,custom:{...Z.custom,password:""},nic:{...Z.nic,password:""},sendgrid:{...Z.sendgrid,password:""}})),d(Z=>({customPasswordSet:Z.customPasswordSet||!!z.custom.password,nicPasswordSet:Z.nicPasswordSet||!!z.nic.password,sendgridPasswordSet:Z.sendgridPasswordSet||!!z.sendgrid.password})),j()},onError:P=>{e({title:"Failed to save SMTP settings",description:(P==null?void 0:P.message)||"Unknown error",variant:"destructive"})}}),N=Ot({mutationFn:async P=>lt("PUT","/api/admin/communications/sms",P),onSuccess:(P,z)=>{e({title:"SMS settings saved"}),h(Z=>({...Z,nic:{...Z.nic,password:""},nicV2:{...Z.nicV2,password:""},twilio:{...Z.twilio,authToken:""}})),m(Z=>{var F,W,G;return{nicPasswordSet:Z.nicPasswordSet||!!((F=z==null?void 0:z.nic)!=null&&F.password),nicV2PasswordSet:Z.nicV2PasswordSet||!!((W=z==null?void 0:z.nicV2)!=null&&W.password),twilioAuthTokenSet:Z.twilioAuthTokenSet||!!((G=z==null?void 0:z.twilio)!=null&&G.authToken)}}),j()},onError:P=>{e({title:"Failed to save SMS settings",description:(P==null?void 0:P.message)||"Unknown error",variant:"destructive"})}}),S=Ot({mutationFn:async()=>await(await lt("POST","/api/admin/communications/email/test",{to:i||D.fromEmail})).json(),onSuccess:P=>{l((P==null?void 0:P.log)??[]),e({title:"Test email sent (check logs below)"})},onError:P=>{e({title:"Failed to send test email",description:(P==null?void 0:P.message)||"Unknown error",variant:"destructive"})}}),T=Ot({mutationFn:async()=>{const P=u.testMessage||pP,z=plt(P);return await(await lt("POST","/api/admin/communications/sms/test",{mobile:u.testMobile,message:z})).json()},onSuccess:P=>{var Z;const z=[`Status: ${(P==null?void 0:P.status)??""}`,`Gateway accepted: ${P!=null&&P.success?"yes":"no"}`,"",((Z=P==null?void 0:P.response)==null?void 0:Z.trim())||"No response body returned."].join(`
`);g(z),e({title:P!=null&&P.success?"Test SMS accepted":"Gateway returned an error",description:"See detailed response below.",variant:P!=null&&P.success?"default":"destructive"})},onError:P=>{g((P==null?void 0:P.message)||"Unknown error"),e({title:"Failed to send test SMS",description:(P==null?void 0:P.message)||"Unknown error",variant:"destructive"})}}),C=()=>{const P=u.nic.postUrl.trim(),z=u.nicV2.postUrl.trim(),Z=u.twilio.fromNumber.trim(),F=u.twilio.messagingServiceSid.trim();return{provider:u.provider,nic:{username:u.nic.username.trim(),senderId:u.nic.senderId.trim(),departmentKey:u.nic.departmentKey.trim(),templateId:u.nic.templateId.trim()||Kf,postUrl:P||"https://msdgweb.mgov.gov.in/esms/sendsmsrequestDLT",password:u.nic.password||void 0},nicV2:{username:u.nicV2.username.trim(),senderId:u.nicV2.senderId.trim(),templateId:u.nicV2.templateId.trim()||Kf,key:u.nicV2.key.trim(),postUrl:z||"https://msdgweb.mgov.gov.in/esms/sendsmsrequestDLT",password:u.nicV2.password||void 0},twilio:{accountSid:u.twilio.accountSid.trim(),fromNumber:Z||void 0,messagingServiceSid:F||void 0,authToken:u.twilio.authToken||void 0}}},A=b.useMemo(()=>{var z;if(!((z=x==null?void 0:x.email)!=null&&z.updatedAt))return null;const P=new Date(x.email.updatedAt);return Number.isNaN(P.getTime())?null:P.toLocaleString()},[(L=x==null?void 0:x.email)==null?void 0:L.updatedAt]),R=b.useMemo(()=>{var z;if(!((z=x==null?void 0:x.sms)!=null&&z.updatedAt))return null;const P=new Date(x.sms.updatedAt);return Number.isNaN(P.getTime())?null:P.toLocaleString()},[(V=x==null?void 0:x.sms)==null?void 0:V.updatedAt]),k=y,O={custom:c.customPasswordSet,nic:c.nicPasswordSet,sendgrid:c.sendgridPasswordSet},$=n.provider,D=n[$],q=O[$],M=(P,z,Z)=>{s(F=>({...F,[P]:{...F[P],[z]:Z}}))};return r.jsxs(me,{className:"lg:col-span-2",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zd,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Communications Gateway"})]}),r.jsx(Ue,{children:"Configure SMTP and SMS gateways used for OTP/login flows"})]}),r.jsx(ge,{className:"space-y-8",children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-4 border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold",children:"SMS Gateway"}),R&&r.jsxs(ze,{variant:"outline",className:"text-xs",children:["Updated ",R]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Gateway Provider"}),r.jsxs(pr,{value:u.provider,onValueChange:P=>h(z=>({...z,provider:P})),disabled:k||N.isPending,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select provider"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"nic",children:"NIC MSDG (Production)"}),r.jsx(it,{value:"nic_v2",children:"NIC MSDG (Hash Gateway)"}),r.jsx(it,{value:"twilio",children:"Twilio (Cloud fallback)"})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Use Twilio for E2E testing outside the state network. Switch back to NIC before going live."})]}),u.provider==="nic"&&r.jsxs("div",{className:"space-y-3 rounded-lg border p-3 bg-muted/20",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Username"}),r.jsx(Pe,{value:u.nic.username,onChange:P=>h(z=>({...z,nic:{...z.nic,username:P.target.value}})),placeholder:"hpgovt-TACA",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsxs(je,{children:["Password ",f.nicPasswordSet&&"(leave blank to keep current)"]}),r.jsx(Pe,{type:"password",value:u.nic.password,onChange:P=>h(z=>({...z,nic:{...z.nic,password:P.target.value}})),placeholder:"",disabled:k||N.isPending})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Sender ID"}),r.jsx(Pe,{value:u.nic.senderId,onChange:P=>h(z=>({...z,nic:{...z.nic,senderId:P.target.value}})),placeholder:"hpgovt",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Department Key"}),r.jsx(Pe,{value:u.nic.departmentKey,onChange:P=>h(z=>({...z,nic:{...z.nic,departmentKey:P.target.value}})),placeholder:"Secure key",disabled:k||N.isPending})]})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Template ID"}),r.jsx(Pe,{value:u.nic.templateId,onChange:P=>h(z=>({...z,nic:{...z.nic,templateId:P.target.value}})),placeholder:Kf,disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Gateway URL"}),r.jsx(Pe,{value:u.nic.postUrl,onChange:P=>h(z=>({...z,nic:{...z.nic,postUrl:P.target.value}})),placeholder:"https://msdgweb.mgov.gov.in/esms/sendsmsrequestDLT",disabled:k||N.isPending})]})]}),u.provider==="nic_v2"&&r.jsxs("div",{className:"space-y-3 rounded-lg border p-3 bg-muted/20",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Username"}),r.jsx(Pe,{value:u.nicV2.username,onChange:P=>h(z=>({...z,nicV2:{...z.nicV2,username:P.target.value}})),placeholder:"hpgovt-TACA",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsxs(je,{children:["Password ",f.nicV2PasswordSet&&"(leave blank to keep current)"]}),r.jsx(Pe,{type:"password",value:u.nicV2.password,onChange:P=>h(z=>({...z,nicV2:{...z.nicV2,password:P.target.value}})),placeholder:"Encrypted password",disabled:k||N.isPending})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Sender ID"}),r.jsx(Pe,{value:u.nicV2.senderId,onChange:P=>h(z=>({...z,nicV2:{...z.nicV2,senderId:P.target.value}})),placeholder:"hpgovt",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Template ID"}),r.jsx(Pe,{value:u.nicV2.templateId,onChange:P=>h(z=>({...z,nicV2:{...z.nicV2,templateId:P.target.value}})),placeholder:Kf,disabled:k||N.isPending})]})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Generated Hash Key"}),r.jsx(Pe,{value:u.nicV2.key,onChange:P=>h(z=>({...z,nicV2:{...z.nicV2,key:P.target.value}})),placeholder:"Hash key from NIC portal",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Gateway URL"}),r.jsx(Pe,{value:u.nicV2.postUrl,onChange:P=>h(z=>({...z,nicV2:{...z.nicV2,postUrl:P.target.value}})),placeholder:"https://msdgweb.mgov.gov.in/esms/sendsmsrequestDLT",disabled:k||N.isPending})]})]}),u.provider==="twilio"&&r.jsxs("div",{className:"space-y-3 rounded-lg border p-3 bg-muted/20",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Account SID"}),r.jsx(Pe,{value:u.twilio.accountSid,onChange:P=>h(z=>({...z,twilio:{...z.twilio,accountSid:P.target.value}})),placeholder:"ACxxxxxxxxxxxx",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsxs(je,{children:["Auth Token ",f.twilioAuthTokenSet&&"(leave blank to keep current)"]}),r.jsx(Pe,{type:"password",value:u.twilio.authToken,onChange:P=>h(z=>({...z,twilio:{...z.twilio,authToken:P.target.value}})),placeholder:"",disabled:k||N.isPending})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"From Number"}),r.jsx(Pe,{value:u.twilio.fromNumber,onChange:P=>h(z=>({...z,twilio:{...z.twilio,fromNumber:P.target.value}})),placeholder:"+15551234567",disabled:k||N.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Messaging Service SID (optional)"}),r.jsx(Pe,{value:u.twilio.messagingServiceSid,onChange:P=>h(z=>({...z,twilio:{...z.twilio,messagingServiceSid:P.target.value}})),placeholder:"MGxxxxxxxxxxxx",disabled:k||N.isPending}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Provide a Messaging Service SID or a From Number."})]})]})]}),r.jsx(te,{className:"w-full",onClick:()=>N.mutate(C()),disabled:N.isPending,children:N.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Saving..."]}):"Save SMS Settings"})]}),r.jsxs("div",{className:"pt-4 border-t space-y-3",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Test mobile number"}),r.jsx(Pe,{value:u.testMobile,onChange:P=>h({...u,testMobile:P.target.value}),placeholder:"9876543210",disabled:T.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Template message"}),r.jsx(Ur,{value:u.testMessage,onChange:P=>h({...u,testMessage:P.target.value}),className:"min-h-[90px]",disabled:T.isPending})]})]}),r.jsx(te,{variant:"outline",onClick:()=>T.mutate(),disabled:T.isPending||!u.testMobile,className:"w-full",children:T.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Sending..."]}):"Send Test SMS"}),p&&r.jsxs("div",{children:[r.jsx(je,{children:"Gateway response"}),r.jsx(Ur,{readOnly:!0,className:"font-mono text-xs min-h-[120px] mt-1",value:p})]})]})]}),r.jsxs("div",{className:"space-y-4 border rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-semibold",children:"Email Gateway (SMTP)"}),A&&r.jsxs(ze,{variant:"outline",className:"text-xs",children:["Updated ",A]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"Gateway Provider"}),r.jsxs(pr,{value:n.provider,onValueChange:P=>s(z=>({...z,provider:P})),disabled:k||w.isPending,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select provider"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"custom",children:"Custom SMTP (LAN / Cloud)"}),r.jsx(it,{value:"nic",children:"NIC SMTP (Data Centre)"}),r.jsx(it,{value:"sendgrid",children:"Twilio SendGrid"})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Keep NIC + SendGrid credentials on standby and switch instantly during cutovers."})]}),r.jsxs("div",{className:"space-y-3 rounded-lg border p-3 bg-muted/20",children:[r.jsxs("div",{children:[r.jsx(je,{children:"From Email / Sender"}),r.jsx(Pe,{value:D.fromEmail,onChange:P=>M($,"fromEmail",P.target.value),placeholder:"tourism-eservices@hp.gov.in",disabled:k||w.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"SMTP Username (optional)"}),r.jsx(Pe,{value:D.username,onChange:P=>M($,"username",P.target.value),placeholder:$==="sendgrid"?"apikey":"tourism-eservices@hp.gov.in",disabled:k||w.isPending})]}),r.jsxs("div",{children:[r.jsxs(je,{children:["SMTP Password ",q&&"(leave blank to keep current)"]}),r.jsx(Pe,{type:"password",value:D.password,onChange:P=>M($,"password",P.target.value),placeholder:"",disabled:k||w.isPending})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx(je,{children:"SMTP Host"}),r.jsx(Pe,{value:D.host,onChange:P=>M($,"host",P.target.value),placeholder:$==="sendgrid"?"smtp.sendgrid.net":$==="nic"?"10.241.8.51":"smtp.yourdomain.in",disabled:k||w.isPending})]}),r.jsxs("div",{children:[r.jsx(je,{children:"Port"}),r.jsx(Pe,{value:D.port,onChange:P=>M($,"port",P.target.value),placeholder:$==="sendgrid"?"587":"25",disabled:k||w.isPending})]})]})]}),r.jsx(te,{className:"w-full",onClick:()=>w.mutate(n),disabled:w.isPending,children:w.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Saving..."]}):"Save Email Settings"})]}),r.jsxs("div",{className:"pt-4 border-t space-y-3",children:[r.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:r.jsxs("div",{children:[r.jsx(je,{children:"Test recipient"}),r.jsx(Pe,{value:i,onChange:P=>a(P.target.value),placeholder:"test@example.com",disabled:S.isPending})]})}),r.jsx(te,{variant:"outline",onClick:()=>S.mutate(),disabled:S.isPending||!i,className:"w-full",children:S.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Sending..."]}):"Send Test Email"}),o.length>0&&r.jsxs("div",{children:[r.jsx(je,{children:"SMTP Conversation"}),r.jsx(Ur,{readOnly:!0,className:"font-mono text-xs min-h-[140px] mt-1",value:o.join(`
`)})]})]})]})]})})]})};var XM="Collapsible",[xlt]=oa(XM),[vlt,QM]=xlt(XM),zhe=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:s,defaultOpen:i,disabled:a,onOpenChange:o,...l}=e,[c=!1,d]=bc({prop:s,defaultProp:i,onChange:o});return r.jsx(vlt,{scope:n,disabled:a,contentId:mc(),open:c,onOpenToggle:b.useCallback(()=>d(u=>!u),[d]),children:r.jsx(ar.div,{"data-state":JM(c),"data-disabled":a?"":void 0,...l,ref:t})})});zhe.displayName=XM;var Hhe="CollapsibleTrigger",Whe=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,...s}=e,i=QM(Hhe,n);return r.jsx(ar.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":JM(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...s,ref:t,onClick:$t(e.onClick,i.onOpenToggle)})});Whe.displayName=Hhe;var ZM="CollapsibleContent",Khe=b.forwardRef((e,t)=>{const{forceMount:n,...s}=e,i=QM(ZM,e.__scopeCollapsible);return r.jsx(la,{present:n||i.open,children:({present:a})=>r.jsx(ylt,{...s,ref:t,present:a})})});Khe.displayName=ZM;var ylt=b.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:s,children:i,...a}=e,o=QM(ZM,n),[l,c]=b.useState(s),d=b.useRef(null),u=Jr(t,d),h=b.useRef(0),f=h.current,m=b.useRef(0),p=m.current,g=o.open||l,v=b.useRef(g),x=b.useRef(void 0);return b.useEffect(()=>{const y=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(y)},[]),Xi(()=>{const y=d.current;if(y){x.current=x.current||{transitionDuration:y.style.transitionDuration,animationName:y.style.animationName},y.style.transitionDuration="0s",y.style.animationName="none";const j=y.getBoundingClientRect();h.current=j.height,m.current=j.width,v.current||(y.style.transitionDuration=x.current.transitionDuration,y.style.animationName=x.current.animationName),c(s)}},[o.open,s]),r.jsx(ar.div,{"data-state":JM(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...a,ref:u,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":p?`${p}px`:void 0,...e.style},children:g&&i})});function JM(e){return e?"open":"closed"}var blt=zhe;const Ghe=blt,jlt=Whe,wlt=Khe,Nlt=e=>{if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()},Slt=({rule:e,onUpdate:t,disabled:n})=>{const[s,i]=b.useState(!1);return r.jsxs(Ghe,{open:s,onOpenChange:i,className:"border rounded-lg bg-card transition-all duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between p-4",children:[r.jsxs("div",{className:"flex flex-col gap-1.5 flex-1 mr-4",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h4",{className:"font-semibold text-sm",children:e.label}),r.jsx(ze,{variant:"secondary",className:"text-[10px] font-mono uppercase h-5",children:e.id})]}),r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:e.description}),r.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[r.jsxs("div",{className:Xe("flex items-center gap-1.5 text-xs",e.smsEnabled?"text-green-600 dark:text-green-400":"text-muted-foreground/60"),children:[r.jsx(dc,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"font-medium",children:e.smsEnabled?"SMS On":"SMS Off"})]}),r.jsxs("div",{className:Xe("flex items-center gap-1.5 text-xs",e.emailEnabled?"text-blue-600 dark:text-blue-400":"text-muted-foreground/60"),children:[r.jsx(Jv,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"font-medium",children:e.emailEnabled?"Email On":"Email Off"})]})]})]}),r.jsx(jlt,{asChild:!0,children:r.jsxs(te,{variant:"ghost",size:"sm",className:"w-9 h-9 p-0 rounded-full hover:bg-muted",children:[r.jsx(Tm,{className:Xe("w-4 h-4 transition-transform duration-200",s&&"rotate-180")}),r.jsx("span",{className:"sr-only",children:"Toggle"})]})})]}),r.jsx(wlt,{children:r.jsxs("div",{className:"px-4 pb-4 pt-0 space-y-4 border-t bg-muted/5 mt-2 pt-4",children:[r.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[r.jsx("span",{className:"text-xs font-medium text-muted-foreground mr-2",children:"Variables:"}),e.placeholders.map(a=>r.jsx(ze,{variant:"outline",className:"text-[10px] font-mono bg-background",children:`{{${a}}}`},a))]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dc,{className:"w-4 h-4 text-muted-foreground"}),r.jsx(je,{className:"font-medium",children:"SMS Template"})]}),r.jsx(Zn,{checked:e.smsEnabled,onCheckedChange:a=>t(o=>({...o,smsEnabled:a})),disabled:n,className:"scale-90"})]}),r.jsx(Ur,{value:e.smsTemplate,onChange:a=>t(o=>({...o,smsTemplate:a.target.value})),placeholder:"Enter SMS template",disabled:!e.smsEnabled||n,className:"min-h-[120px] text-xs font-mono"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jv,{className:"w-4 h-4 text-muted-foreground"}),r.jsx(je,{className:"font-medium",children:"Email Content"})]}),r.jsx(Zn,{checked:e.emailEnabled,onCheckedChange:a=>t(o=>({...o,emailEnabled:a})),disabled:n,className:"scale-90"})]}),r.jsx(Pe,{value:e.emailSubject,onChange:a=>t(o=>({...o,emailSubject:a.target.value})),placeholder:"Email Subject",disabled:!e.emailEnabled||n,className:"h-8 text-sm"}),r.jsx(Ur,{value:e.emailBody,onChange:a=>t(o=>({...o,emailBody:a.target.value})),placeholder:"Email Body (HTML supported)",disabled:!e.emailEnabled||n,className:"min-h-[140px] text-xs font-mono"})]})]})]})})]})},_lt=()=>{const{toast:e}=Tr(),{data:t,isLoading:n,refetch:s}=rt({queryKey:["/api/admin/notifications"],queryFn:async()=>await(await lt("GET","/api/admin/notifications")).json()}),[i,a]=b.useState([]);b.useEffect(()=>{t!=null&&t.events&&a(t.events)},[t==null?void 0:t.events]);const o=Ot({mutationFn:async u=>lt("PUT","/api/admin/notifications",u),onSuccess:()=>{e({title:"Notification settings saved"}),s()},onError:u=>{e({title:"Failed to update notification settings",description:(u==null?void 0:u.message)||"Unknown error",variant:"destructive"})}}),l=b.useMemo(()=>t!=null&&t.updatedAt?Nlt(t.updatedAt):null,[t==null?void 0:t.updatedAt]),c=(u,h)=>{a(f=>f.map(m=>m.id===u?h(m):m))},d=i.length>0&&!n;return r.jsxs(me,{className:"lg:col-span-2",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fm,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Workflow Notifications"})]}),r.jsx(Ue,{children:"SMS/email templates for OTP, scrutiny, inspection, and payment milestones"}),l&&r.jsxs(ze,{variant:"outline",className:"w-fit text-xs",children:["Updated ",l]})]}),r.jsxs(ge,{className:"space-y-4",children:[i.map(u=>r.jsx(Slt,{rule:u,onUpdate:h=>c(u.id,h),disabled:n||o.isPending},u.id)),r.jsx(te,{onClick:()=>o.mutate({events:i}),disabled:!d||o.isPending,className:"w-full md:w-auto",children:o.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Saving..."]}):"Save notification rules"})]})]})},Clt={homestay:"Homestays",hotels:"Hotels",guest_houses:"Guest Houses",travel_agencies:"Travel Agencies",adventure_tourism:"Adventure Tourism",transport:"Transport Operators",restaurants:"Restaurants & Cafes",winter_sports:"Skiing & Winter Sports"},Alt=[{id:"new_registration",label:"New Registration",defaultOptional:!1},{id:"existing_rc_onboarding",label:"Existing RC Onboarding",defaultOptional:!1},{id:"add_rooms",label:"Add Additional Rooms",defaultOptional:!1},{id:"delete_rooms",label:"Delete Rooms",defaultOptional:!0},{id:"change_category",label:"Change Category",defaultOptional:!1},{id:"cancel_certificate",label:"Surrender Certificate",defaultOptional:!0}];function klt(){const{toast:e}=Tr(),{data:t,isLoading:n}=rt({queryKey:["/api/admin/settings/portal/services"],queryFn:async()=>(await lt("GET","/api/admin/settings/portal/services")).json()}),{data:s,isLoading:i}=rt({queryKey:["/api/admin/settings/da_send_back_enabled"],queryFn:async()=>{const h=await(await lt("GET","/api/admin/settings/da_send_back_enabled")).json(),f=h==null?void 0:h.settingValue;return f&&typeof f=="object"&&"enabled"in f?f.enabled:f===!0||f==="true"}}),a=Ot({mutationFn:async({serviceId:u,enabled:h})=>(await lt("POST","/api/admin/settings/portal/services/toggle",{serviceId:u,enabled:h})).json(),onSuccess:(u,h)=>{er.setQueryData(["/api/admin/settings/portal/services"],f=>f&&{...f,visibility:{...f.visibility,[h.serviceId]:h.enabled}}),e({title:"Service visibility updated"})},onError:()=>e({title:"Failed to update setting",variant:"destructive"})}),o=Ot({mutationFn:async({applicationKind:u,optional:h})=>(await lt("POST","/api/admin/settings/inspection/toggle",{applicationKind:u,optional:h})).json(),onSuccess:(u,h)=>{er.invalidateQueries({queryKey:["/api/admin/settings/portal/services"]}),e({title:"Inspection workflow updated"})},onError:()=>e({title:"Failed to update setting",variant:"destructive"})}),l=Ot({mutationFn:async u=>(await lt("PUT","/api/admin/settings/da_send_back_enabled",{value:{enabled:u}})).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/admin/settings/da_send_back_enabled"]}),e({title:"DA workflow updated"})},onError:()=>e({title:"Failed to update setting",variant:"destructive"})});if(n)return r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Portal Configuration"})}),r.jsx(ge,{children:r.jsx("div",{className:"flex justify-center p-6",children:r.jsx(vt,{className:"animate-spin"})})})]});const c=(t==null?void 0:t.visibility)||{},d=new Set((t==null?void 0:t.inspection.optionalKinds)||[]);return r.jsxs(me,{id:"portal-config",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(dve,{className:"h-5 w-5"}),"Portal Configuration"]}),r.jsx(Ue,{children:"Manage service visibility and workflow requirements"})]}),r.jsxs(ge,{className:"space-y-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:["Service Visibility",r.jsx(ze,{variant:"outline",children:"Portal"})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(Clt).map(([u,h])=>r.jsxs("div",{className:"flex items-center justify-between space-x-2 border p-3 rounded-lg bg-card/50",children:[r.jsxs(je,{htmlFor:`service-${u}`,className:"flex flex-col space-y-1",children:[r.jsx("span",{className:"font-medium",children:h}),r.jsx("span",{className:"text-xs text-muted-foreground font-normal",children:u==="homestay"?"Core service (Required)":"Additional service"})]}),r.jsx(Zn,{id:`service-${u}`,checked:u==="homestay"?!0:!!c[u],disabled:u==="homestay"||a.isPending,onCheckedChange:f=>a.mutate({serviceId:u,enabled:f})})]},u))})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[r.jsx(Mi,{className:"h-4 w-4"}),"Inspection Requirements"]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'Workflows marked as "Optional" allow DTDOs to approve applications without scheduling a physical inspection.'}),r.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Alt.map(u=>{const h=d.has(u.id);return r.jsxs("div",{className:"flex items-center justify-between space-x-2 border p-3 rounded-lg bg-card/50",children:[r.jsx(je,{htmlFor:`inspection-${u.id}`,className:"flex flex-col space-y-1",children:r.jsx("span",{className:"font-medium",children:u.label})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`text-xs ${h?"text-amber-600 font-medium":"text-muted-foreground"}`,children:h?"Optional":"Mandatory"}),r.jsx(Zn,{id:`inspection-${u.id}`,checked:h,disabled:o.isPending,onCheckedChange:f=>o.mutate({applicationKind:u.id,optional:f})})]})]},u.id)})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-lg flex items-center gap-2",children:"Workflow Controls"}),r.jsx("div",{className:"border p-4 rounded-lg bg-card/50 space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(je,{htmlFor:"da-revert",className:"text-base font-medium",children:"Allow DA to Send Back Applications"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["If enabled, dealing assistants can return applications for corrections.",r.jsx("br",{}),r.jsx("span",{className:"text-amber-600 font-medium text-xs",children:" Requires DTDO Authorization (OTP) for every action."})]})]}),r.jsx(Zn,{id:"da-revert",checked:!!s,disabled:i||l.isPending,onCheckedChange:u=>l.mutate(u)})]})})]})]})]})}const Plt=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),Kq=e=>typeof e!="number"||Number.isNaN(e)?"":Plt.format(e),Gq=25,xP="CLEAR HIMKOSH LOG",Tlt={created:"Created",updated:"Updated",skipped:"Skipped",would_create:"Would create",would_update:"Would update"},Elt={created:"bg-emerald-100 text-emerald-800 border-emerald-200",updated:"bg-sky-100 text-sky-800 border-sky-200",skipped:"bg-red-100 text-red-800 border-red-200",would_create:"bg-slate-100 text-slate-700 border-slate-300",would_update:"bg-amber-100 text-amber-800 border-amber-200"};function Olt(){var Dl,Fo,Ka,Ac,$o,Ml,Nt,cn,Ta,Ga,Bo,_i;const{toast:e}=Tr(),[t,n]=b.useState({open:!1,operation:null,confirmationText:"",reason:"",password:""}),[s,i]=b.useState({open:!1,transaction:null}),[a,o]=b.useState("all"),[l,c]=b.useState(10),[d,u]=b.useState(""),[h,f]=b.useState(""),[m,p]=b.useState(!0),[g,v]=b.useState(null),[x,y]=b.useState(!1),[j,w]=b.useState({open:!1,selections:{deleteApplications:!0,deleteDocuments:!0,deletePayments:!0,deleteInspections:!0,deleteCertificates:!0,deleteNotifications:!0,deletePropertyOwners:!1},confirmationText:"",reason:""}),N=ue=>{$({open:!0,targetEnabled:ue,confirmationText:"",reason:""})},S=()=>{$({open:!1,targetEnabled:!1,confirmationText:"",reason:""})},T=ue=>bt=>{const vr=bt.target.value;Ht(wn=>({...wn,[ue]:vr}))},C=ue=>ue?new Date(ue).toLocaleString():null,A=ue=>bt=>{const vr=bt.target.value;lr(wn=>({...wn,[ue]:vr}))},R=ue=>{i({open:!0,transaction:ue})},k=()=>{i({open:!1,transaction:null})},[O,$]=b.useState({open:!1,targetEnabled:!1,confirmationText:"",reason:""}),{data:D,isLoading:q,refetch:M}=rt({queryKey:["/api/admin/stats"]}),{data:L,isLoading:V,refetch:P}=rt({queryKey:["/api/admin/settings/payment/test-mode"],queryFn:async()=>(await lt("GET","/api/admin/settings/payment/test-mode")).json()}),{data:z}=rt({queryKey:["/api/auth/me"]}),[Z,F]=b.useState("operations"),[W,G]=b.useState(!1),[H,se]=b.useState({open:!1,password:"",error:""}),J=Ot({mutationFn:async ue=>{var wn;const bt=(wn=z==null?void 0:z.user)==null?void 0:wn.username,vr=await lt("POST","/api/verify-critical-password",{password:ue,username:bt});if(!vr.ok){const ui=await vr.json();throw new Error(ui.message||"Invalid password")}return vr.json()},onSuccess:()=>{G(!0),F("critical"),se({open:!1,password:"",error:""})},onError:ue=>{se(bt=>({...bt,error:ue.message}))}}),ie=ue=>{if(ue==="critical"&&!W){se({open:!0,password:"",error:""});return}F(ue)};b.useEffect(()=>{const ue=window.location.hash;if(!ue)return;const bt=["#reset-zone","#reset-seeds","#payment-settings","#security","#smoke-tests","#database","#test-data"],vr=["#system-overview","#communications","#staff-tools","#portal-config"],wn=bt.some(ps=>ue.startsWith(ps)),ui=vr.some(ps=>ue.startsWith(ps));wn?W?(F("critical"),setTimeout(()=>{const ps=document.querySelector(ue);ps&&ps.scrollIntoView({behavior:"smooth",block:"start"})},100)):se({open:!0,password:"",error:""}):ui&&(F("operations"),setTimeout(()=>{const ps=document.querySelector(ue);ps&&ps.scrollIntoView({behavior:"smooth",block:"start"})},100))},[W]);const{data:X,isLoading:he}=rt({queryKey:["/api/admin/settings/payment/workflow"],queryFn:async()=>(await lt("GET","/api/admin/settings/payment/workflow")).json()}),{data:fe,isLoading:Q}=rt({queryKey:["/api/settings/woman-discount-mode"]}),Oe=Ot({mutationFn:async ue=>{await lt("POST","/api/settings/woman-discount-mode",{mode:ue})},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/settings/woman-discount-mode"]}),e({title:"Policy Updated",description:"Woman owner discount calculation updated."})},onError:()=>{e({title:"Update Failed",description:"Could not update discount policy.",variant:"destructive"})}}),ve=Ot({mutationFn:async ue=>{const bt=await lt("POST","/api/admin/settings/payment/workflow/toggle",{workflow:ue});if(!bt.ok)throw new Error("Failed to update payment workflow");return bt.json()},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/admin/settings/payment/workflow"]}),e({title:"Payment workflow updated",description:`Payment is now required ${(X==null?void 0:X.workflow)==="upfront"?"after approval":"before submission"}.`})},onError:()=>{e({title:"Update failed",description:"Could not update payment workflow setting.",variant:"destructive"})}}),ee=Ot({mutationFn:async ue=>{const bt=await lt("POST","/api/admin/settings/payment/workflow/submit-mode",{upfrontSubmitMode:ue});if(!bt.ok)throw new Error("Failed to update submit mode");return bt.json()},onSuccess:(ue,bt)=>{er.invalidateQueries({queryKey:["/api/admin/settings/payment/workflow"]}),e({title:"Submit mode updated",description:bt==="auto"?"Applications will auto-submit after successful payment.":"Users will need to manually submit after completing payment."})},onError:()=>{e({title:"Update failed",description:"Could not update submit mode setting.",variant:"destructive"})}}),{data:Ee,isLoading:Re,refetch:oe}=rt({queryKey:["/api/admin/settings/auth/captcha"],queryFn:async()=>(await lt("GET","/api/admin/settings/auth/captcha")).json()}),{data:De,isLoading:tt,refetch:Qe}=rt({queryKey:["/api/admin/settings/portal/multi-service"],queryFn:async()=>(await lt("GET","/api/admin/settings/portal/multi-service")).json()}),{data:xe,isLoading:ae,isError:we,refetch:Te}=rt({queryKey:["/api/himkosh/transactions",Gq,a],queryFn:async()=>{const ue=new URLSearchParams;return ue.set("limit",String(Gq)),ue.set("excludeTest","true"),a&&a!=="all"&&ue.set("ddo",a),(await lt("GET",`/api/himkosh/transactions?${ue.toString()}`)).json()}}),{data:qe}=rt({queryKey:["/api/admin/reports/ddo-codes"],queryFn:async()=>(await lt("GET","/api/admin/reports/ddo-codes")).json()}),{data:Ke,isLoading:Ge,refetch:He}=rt({queryKey:["/api/admin/payments/himkosh"],queryFn:async()=>(await lt("GET","/api/admin/payments/himkosh")).json()}),{data:nt,isLoading:Y}=rt({queryKey:["/api/admin/db/config"]}),{data:Ct,isLoading:Vt}=rt({queryKey:["/api/admin/payments/himkosh/ddo-codes"]}),[pt,Ht]=b.useState({host:"",port:"5432",database:"",user:"",password:""}),[wr,wt]=b.useState(!0),[Ut,St]=b.useState(!1),[Be,lr]=b.useState({merchantCode:"",deptId:"",serviceCode:"",ddo:"",head1:"",head2:"",head2Amount:"",returnUrl:"",allowFallback:!0}),[Wt,It]=b.useState({open:!1,confirmationText:""}),[yt,ut]=b.useState({district:"",tehsil:"",manualDdo:"",amount:"1",tenderBy:"Test Applicant"}),[Kt,Os]=b.useState(null);b.useEffect(()=>{nt!=null&&nt.settings&&(Ht({host:nt.settings.host,port:String(nt.settings.port),database:nt.settings.database,user:nt.settings.user,password:""}),St(nt.hasPassword))},[nt]),b.useEffect(()=>{var wn;if(!Ke)return;const ue=Ke.effective,bt=Ke.overrides||ue;if(!bt)return;const vr=bt.heads??(ue==null?void 0:ue.heads);lr({merchantCode:bt.merchantCode??"",deptId:bt.deptId??"",serviceCode:bt.serviceCode??"",ddo:bt.ddo??"",head1:bt.head1??(vr==null?void 0:vr.registrationFee)??(ue==null?void 0:ue.head1)??"",head2:bt.head2??(vr==null?void 0:vr.secondaryHead)??(ue==null?void 0:ue.head2)??"",head2Amount:((wn=bt.head2Amount??(vr==null?void 0:vr.secondaryHeadAmount)??(ue==null?void 0:ue.head2Amount)??"")==null?void 0:wn.toString())??"",returnUrl:bt.returnUrl??(ue==null?void 0:ue.returnUrl)??"",allowFallback:bt.allowFallback===void 0?!0:!!bt.allowFallback})},[Ke]);const{data:Dt,refetch:gr,isLoading:Fn}=rt({queryKey:["/api/admin/system/status"]}),bi=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/system/scale",{instances:ue})).json(),onSuccess:ue=>{e({title:"Scaling Initiated",description:ue.message}),gr(),setTimeout(()=>window.location.reload(),2e3)},onError:ue=>{e({title:"Scaling Failed",description:ue.message||"Failed to scale instances",variant:"destructive"})}}),An=(xe==null?void 0:xe.transactions)??[],ei=(xe==null?void 0:xe.total)??0,rn=s.transaction,vn=!!(Ke!=null&&Ke.overrides),rs=!Be.merchantCode.trim()||!Be.deptId.trim()||!Be.serviceCode.trim()||!Be.ddo.trim()||!Be.head1.trim(),{data:En,isLoading:ka,refetch:zr}=rt({queryKey:["/api/admin/settings/security/clamav"]}),{data:zt,isLoading:ji,refetch:wi}=rt({queryKey:["/api/admin/smoke-test/status"],refetchInterval:ue=>{var bt;return(bt=ue.state.data)!=null&&bt.running?4e3:!1}}),Rs=Ot({mutationFn:async({operation:ue,confirmationText:bt,reason:vr})=>(await lt("POST",`/api/admin/reset/${ue}`,{confirmationText:bt,reason:vr})).json(),onSuccess:ue=>{e({title:"Reset completed successfully",description:ue.message||"Operation completed"}),n({open:!1,operation:null,confirmationText:"",reason:""}),M()},onError:ue=>{e({title:"Reset failed",description:ue.message||"An error occurred during reset",variant:"destructive"})}}),st=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/reset/granular",ue)).json(),onSuccess:ue=>{e({title:"Granular reset completed",description:ue.message||"Selected data has been cleared"}),w({open:!1,selections:{deleteApplications:!0,deleteDocuments:!0,deletePayments:!0,deleteInspections:!0,deleteCertificates:!0,deleteNotifications:!0,deletePropertyOwners:!1},confirmationText:"",reason:""}),M()},onError:ue=>{e({title:"Granular reset failed",description:ue.message||"An error occurred during reset",variant:"destructive"})}}),tr=Ot({mutationFn:async({type:ue,count:bt})=>(await lt("POST",`/api/admin/seed/${ue}`,{count:bt})).json(),onSuccess:ue=>{e({title:"Test data generated",description:ue.message||"Data created successfully"}),M()},onError:ue=>{e({title:"Seed failed",description:ue.message||"Failed to generate test data",variant:"destructive"})}}),Zt=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/settings/payment/test-mode/toggle",{enabled:ue}),ue),onSuccess:(ue,bt)=>{e({title:bt?"Test payment mode enabled":"Test payment mode disabled",description:bt?" Payment requests will send 1 to gateway (for testing)":"Payment requests will send actual calculated amounts"}),P(),$({open:!1,targetEnabled:!1,confirmationText:"",reason:""})},onError:ue=>{e({title:"Failed to update test mode",description:ue.message||"An error occurred",variant:"destructive"})}}),$n=O.targetEnabled?"ENABLE":"PRODUCTION",_s=O.confirmationText.trim().toUpperCase()===$n&&O.reason.trim().length>=15,qa=()=>{!_s||Zt.isPending||Zt.mutate(O.targetEnabled)},ms=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/settings/auth/captcha/toggle",{enabled:ue}),ue),onSuccess:(ue,bt)=>{e({title:bt?"Captcha enabled":"Captcha disabled",description:bt?"Users must solve a math captcha before logging in.":"Captcha has been disabled for this environment (useful during demos)."}),oe()},onError:ue=>{e({title:"Failed to update captcha setting",description:ue.message||"An error occurred",variant:"destructive"})}}),Ds=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/settings/portal/multi-service/toggle",{enabled:ue}),ue),onSuccess:(ue,bt)=>{e({title:bt?"Multi-Service Hub enabled":"Multi-Service Hub disabled",description:bt?"Users will see service selection page after login.":"Users go directly to Homestay dashboard after login."}),Qe()},onError:ue=>{e({title:"Failed to update multi-service setting",description:ue.message||"An error occurred",variant:"destructive"})}}),di=Ot({mutationFn:async ue=>(await lt("POST","/api/himkosh/transactions/clear",{hardDelete:ue})).json(),onSuccess:ue=>{e({title:"Logs Cleared",description:ue.message}),It({open:!1,confirmationText:""}),Te()},onError:ue=>{e({title:"Failed to clear logs",description:ue.message||"An error occurred",variant:"destructive"})}}),El=Ot({mutationFn:async()=>(await lt("POST","/api/admin/db/config/test",{settings:{host:pt.host,port:Number(pt.port||5432),database:pt.database,user:pt.user,password:pt.password||void 0}})).json(),onSuccess:ue=>{e({title:"Connection successful",description:ue!=null&&ue.version?`Server version: ${ue.version}`:"Connection test succeeded."}),er.invalidateQueries({queryKey:["/api/admin/db/config"]})},onError:ue=>{e({title:"Connection failed",description:(ue==null?void 0:ue.message)||"Unable to connect with the provided settings.",variant:"destructive"})}}),Li=Ot({mutationFn:async()=>(await lt("PUT","/api/admin/db/config",{host:pt.host,port:Number(pt.port||5432),database:pt.database,user:pt.user,password:pt.password,applyEnv:wr})).json(),onSuccess:ue=>{e({title:"Database settings saved",description:(ue==null?void 0:ue.message)||"Configuration saved successfully."}),er.invalidateQueries({queryKey:["/api/admin/db/config"]}),Ht(bt=>({...bt,password:""}))},onError:ue=>{e({title:"Failed to save settings",description:(ue==null?void 0:ue.message)||"An error occurred while saving these values.",variant:"destructive"})}}),cl=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/settings/security/clamav/toggle",{enabled:ue}),ue),onSuccess:(ue,bt)=>{e({title:bt?"Antivirus scanning enabled":"Antivirus scanning disabled",description:bt?"All uploaded documents (including S3/MinIO storage) will be scanned by ClamAV.":"Uploads will skip antivirus scanning until you re-enable it."}),zr()},onError:ue=>{e({title:"Failed to update antivirus setting",description:ue.message||"An error occurred",variant:"destructive"})}}),za=Ot({mutationFn:async()=>{const ue=await lt("POST","/api/admin/smoke-test/run"),bt=await ue.json().catch(()=>({}));if(!ue.ok)throw new Error((bt==null?void 0:bt.message)||"Failed to start smoke test");return bt},onSuccess:ue=>{e({title:"Smoke test started",description:`Run ${ue.runId} is running in the background.`}),wi()},onError:ue=>{e({title:"Smoke test did not start",description:(ue==null?void 0:ue.message)||"Please review the server logs.",variant:"destructive"}),wi()}}),Zi=Ot({mutationFn:async({csvText:ue,dryRun:bt})=>{const vr=await lt("POST","/api/admin/district-staff/import",{csv:ue,dryRun:bt}),wn=await vr.json().catch(()=>({}));if(!vr.ok)throw new Error((wn==null?void 0:wn.message)||"Failed to process district staff manifest");return wn},onSuccess:ue=>{v(ue),e({title:ue.dryRun?"Dry-run completed":"District staff updated",description:ue.message}),M()},onError:ue=>{e({title:"District staff import failed",description:(ue==null?void 0:ue.message)||"Unable to process the CSV manifest",variant:"destructive"})}}),ju=ue=>{n({open:!0,operation:ue,confirmationText:"",reason:""})},pd=()=>{if(!t.operation)return;const ue=t.operation==="full"?"RESET":"DELETE";if(t.confirmationText!==ue){e({title:"Confirmation failed",description:`Please type "${ue}" exactly to confirm`,variant:"destructive"});return}if(!t.reason||t.reason.length<10){e({title:"Reason required",description:"Please provide a reason (at least 10 characters)",variant:"destructive"});return}if(!t.password||t.password.length<1){e({title:"Password required",description:"Please enter your password to confirm this action",variant:"destructive"});return}Rs.mutate({operation:t.operation,confirmationText:t.confirmationText,reason:t.reason,password:t.password})},Ha=ue=>{var ui;const bt=ue.target,vr=(ui=bt.files)==null?void 0:ui[0];if(!vr)return;const wn=new FileReader;wn.onload=ps=>{var Ya;const co=typeof((Ya=ps.target)==null?void 0:Ya.result)=="string"?ps.target.result:"";f(co),u(vr.name),v(null),bt.value=""},wn.onerror=()=>{e({title:"Failed to read file",description:"Please try again with a valid CSV file.",variant:"destructive"})},wn.readAsText(vr)},_c=()=>{if(!h.trim()){e({title:"CSV required",description:"Upload the district staff CSV manifest before running the seeder.",variant:"destructive"});return}Zi.mutate({csvText:h,dryRun:m})},Cc=ue=>r.jsx(ze,{className:`text-[11px] font-semibold ${Elt[ue]}`,variant:"outline",children:Tlt[ue]}),Bn=ue=>ue?r.jsxs("div",{className:"space-y-1",children:[Cc(ue.status),r.jsxs("p",{className:"font-mono text-xs break-all",children:[ue.username||"","  ",ue.mobile||""]}),ue.reason?r.jsx("p",{className:"text-xs text-destructive",children:ue.reason}):ue.defaultPassword?r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default PW: ",r.jsx("code",{children:ue.defaultPassword})]}):null]}):r.jsx("span",{className:"text-xs text-muted-foreground",children:""}),wu=[{id:"full",title:"Reset Entire Environment",description:"Delete everything except the three superadmin accounts.",icon:jn},{id:"applications",title:"Reset Applications",description:"Delete owners, applications, payments, inspections, and all uploaded documents.",icon:ir}],Io=Ot({mutationFn:async ue=>(await lt("POST","/api/admin/settings/super-console/toggle",{enabled:ue}),ue),onSuccess:ue=>{e({title:ue?"Super console enabled":"Super console disabled",description:ue?"The Super Admin Console has been enabled for this environment.":"The Super Admin Console override has been removed."}),M()},onError:ue=>{e({title:"Failed to toggle super console",description:(ue==null?void 0:ue.message)||"An error occurred",variant:"destructive"})}}),zn=Ot({mutationFn:async()=>{await lt("PUT","/api/admin/payments/himkosh",{merchantCode:Be.merchantCode,deptId:Be.deptId,serviceCode:Be.serviceCode,ddo:Be.ddo,head1:Be.head1,head2:Be.head2||void 0,head2Amount:Be.head2Amount?Number(Be.head2Amount):void 0,returnUrl:Be.returnUrl||void 0,allowFallback:Be.allowFallback})},onSuccess:()=>{e({title:"HimKosh configuration saved"}),He()},onError:ue=>{e({title:"Failed to save HimKosh settings",description:(ue==null?void 0:ue.message)||"An error occurred while saving settings",variant:"destructive"})}}),On=Ot({mutationFn:async()=>{await lt("DELETE","/api/admin/payments/himkosh")},onSuccess:()=>{e({title:"HimKosh overrides removed"}),He()},onError:ue=>{e({title:"Failed to clear HimKosh overrides",description:(ue==null?void 0:ue.message)||"An error occurred while clearing overrides",variant:"destructive"})}}),ns=!rs&&!zn.isPending,Pa=Ot({mutationFn:async()=>await(await lt("POST","/api/admin/payments/himkosh/ddo-test",{district:yt.district||void 0,tehsil:yt.tehsil||void 0,manualDdo:yt.manualDdo||void 0,amount:yt.amount?Number(yt.amount):void 0,tenderBy:yt.tenderBy||void 0})).json(),onSuccess:ue=>{Os(ue),e({title:"HimKosh payload prepared",description:`DDO ${ue.ddoUsed} (${ue.ddoSource.replace(/_/g," ")})`})},onError:ue=>{e({title:"Failed to run test",description:(ue==null?void 0:ue.message)||"Unable to simulate HimKosh payload",variant:"destructive"})}});if(q)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})});if(!(D!=null&&D.resetEnabled))return r.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:r.jsxs(me,{className:"border-orange-200 dark:border-orange-800",children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rm,{className:"w-6 h-6 text-orange-600"}),r.jsx(ke,{className:"text-orange-900 dark:text-orange-100",children:"Super Admin Console Disabled"})]})}),r.jsxs(ge,{children:[r.jsxs("p",{className:"text-orange-800 dark:text-orange-200",children:["The Super Admin Console is only available in ",r.jsx("strong",{children:"development"})," and ",r.jsx("strong",{children:"test"})," environments. It is currently disabled because this appears to be a production environment."]}),r.jsxs("p",{className:"mt-4 text-sm text-orange-700 dark:text-orange-300",children:["Current environment: ",r.jsx(ze,{children:(D==null?void 0:D.environment)||"unknown"})]}),r.jsx("div",{className:"mt-6",children:r.jsx(te,{onClick:()=>Io.mutate(!0),disabled:Io.isPending,children:Io.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Enabling..."]}):"Enable Super Admin Console"})})]})]})});const ss=D!=null&&D.superConsoleOverride?`${(D.environment||"").toUpperCase()} (OVERRIDE)`:(Dl=D==null?void 0:D.environment)==null?void 0:Dl.toUpperCase(),Ni=ue=>{if(!ue)return"";const bt=new Date(ue);return Number.isNaN(bt.getTime())?ue:bt.toLocaleString()},Lo=zt!=null&&zt.running?"default":(zt==null?void 0:zt.lastExitCode)===0||!(zt!=null&&zt.lastRunId)?"outline":"destructive",lo=zt!=null&&zt.running?"Running":(zt==null?void 0:zt.lastExitCode)===0?"Idle  Last run passed":zt!=null&&zt.lastRunId?"Idle  Last run failed":"Idle",gd=ji?"Loading smoke-test log...":(Ka=(Fo=zt==null?void 0:zt.log)==null?void 0:Fo.content)!=null&&Ka.length?zt.log.content:"No smoke-test output yet. Trigger the harness to capture a run.",Ji=zt!=null&&zt.lastRunId?`${zt.lastExitCode===0?"Passed":`Failed (exit ${zt.lastExitCode??"?"})`}  ${Ni(zt.lastFinishedAt)}`:"No completed run yet",Ol=!!(zt!=null&&zt.running||za.isPending||ji),Wa=h?Math.max(h.split(/\r?\n/).filter(ue=>ue.trim().length>0).length-1,0):0,Si=!!h.trim()&&!Zi.isPending,Rl=ue=>C(ue)??"",Nu=ue=>{const bt=ue.statusCd==="1"||ue.transactionStatus==="success",vr=ue.statusCd==="0"||ue.transactionStatus==="failed",wn=bt?"default":vr?"destructive":"outline",ui=bt?"Success":vr?ue.status?ue.status:"Failed":ue.transactionStatus??"Pending";return r.jsx(ze,{variant:wn,children:ui})},xd=(Ct==null?void 0:Ct.codes)??[],vd=Wt.confirmationText.trim().toUpperCase()===xP;return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Ux,{className:"w-8 h-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Super Admin Console"}),r.jsx(ze,{variant:"destructive",className:"ml-2",children:ss}),(D==null?void 0:D.superConsoleOverride)&&r.jsx(te,{variant:"outline",size:"sm",className:"ml-4",onClick:()=>Io.mutate(!1),disabled:Io.isPending,children:Io.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Disabling..."]}):"Disable Override"})]}),r.jsx("p",{className:"text-muted-foreground",children:"System maintenance, reset operations, and test data generation"})]}),r.jsx("div",{className:"flex flex-col gap-6 lg:flex-row",children:r.jsx("div",{className:"flex-1 space-y-8",children:r.jsxs(aa,{value:Z,onValueChange:ie,className:"w-full",children:[r.jsxs("div",{className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm pt-2 pb-4 mb-4 border-b",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-2 p-1 bg-muted/50 border h-12 shadow-sm",children:[r.jsxs(Pr,{value:"operations",className:"px-6 py-2 flex items-center gap-2",children:[r.jsx(Ux,{className:"w-4 h-4 text-primary"}),"Daily Operations"]}),r.jsxs(Pr,{value:"critical",className:"px-6 py-2 flex items-center gap-2 font-semibold text-red-600 data-[state=active]:bg-red-50 data-[state=active]:text-red-700",children:[r.jsx(rm,{className:"w-4 h-4"}),"System Criticals"]})]}),W&&Z==="critical"&&r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx(ze,{variant:"outline",className:"text-green-600 border-green-300 bg-green-50",children:" Critical Access Unlocked"}),r.jsx(te,{variant:"ghost",size:"sm",className:"text-xs h-6",onClick:()=>{G(!1),F("operations")},children:"Lock"})]})]}),r.jsx(Rr,{value:"operations",className:"space-y-8 mt-0 outline-none p-0 border-none",children:r.jsxs("section",{id:"system-overview",className:"space-y-4",children:[r.jsx(me,{className:"border-orange-200 dark:border-orange-800 bg-orange-50 dark:bg-orange-950/20",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 flex-shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-orange-900 dark:text-orange-100",children:" Development/Test Environment Only"}),r.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 mt-1",children:["All reset operations are ",r.jsx("strong",{children:"destructive"})," and ",r.jsx("strong",{children:"cannot be undone"}),". Use with extreme caution. All actions are logged for audit purposes."]})]})]})})}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ux,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Process Scaling (PM2)"})]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>gr(),disabled:Fn,children:[r.jsx(Na,{className:`w-4 h-4 mr-2 ${Fn?"animate-spin":""}`}),"Refresh"]})]}),r.jsx(Ue,{children:"Manage application instances for load balancing."})]}),r.jsx(ge,{children:Fn?r.jsx("div",{className:"flex justify-center p-4",children:r.jsx(vt,{className:"w-6 h-6 animate-spin"})}):(Dt==null?void 0:Dt.instances)===void 0||(Dt==null?void 0:Dt.instances)===0?r.jsxs("div",{className:"text-center p-6 bg-slate-50 dark:bg-slate-900 rounded-lg border border-dashed",children:[r.jsx("p",{className:"text-muted-foreground text-sm",children:"PM2 is not managing this process."}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["This is expected on development servers running with ",r.jsx("code",{className:"bg-slate-200 dark:bg-slate-800 px-1 rounded",children:"tsx"}),"."]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg border",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-sm font-medium",children:"Active Instances"}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:"text-3xl font-bold text-primary",children:(Dt==null?void 0:Dt.instances)??""}),r.jsx("span",{className:"text-sm text-muted-foreground",children:"running processes"})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total Memory"}),r.jsx("p",{className:"font-mono font-medium",children:(Ac=Dt==null?void 0:Dt.processes)!=null&&Ac.reduce((ue,bt)=>ue+(bt.memory||0),0)?Math.round(Dt.processes.reduce((ue,bt)=>ue+(bt.memory||0),0)/1024/1024)+" MB":""})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(je,{children:"Scale Instances"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(pr,{disabled:bi.isPending,onValueChange:ue=>bi.mutate(parseInt(ue)),defaultValue:($o=Dt==null?void 0:Dt.instances)==null?void 0:$o.toString(),children:[r.jsx(ur,{className:"w-[180px]",children:r.jsx(yr,{placeholder:"Select count"})}),r.jsx(hr,{children:Array.from({length:8},(ue,bt)=>bt+1).map(ue=>r.jsxs(it,{value:ue.toString(),children:[ue," ",ue===1?"Instance":"Instances"]},ue))})]}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Recommended: ",r.jsx("strong",{children:"2-4"})," for production. Max 8."]})]}),bi.isPending&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600 mt-2",children:[r.jsx(vt,{className:"w-4 h-4 animate-spin"}),"Scaling in progress... (this may trigger a reload)"]})]})]})})]}),r.jsxs(me,{className:"lg:col-span-2",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ac,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"System Statistics"})]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>M(),"data-testid":"button-refresh-stats",children:[r.jsx(Na,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),r.jsx(Ue,{children:"Current state of the system"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ir,{className:"w-4 h-4 text-primary"}),r.jsx("p",{className:"text-sm font-medium",children:"Applications"})]}),r.jsx("p",{className:"text-2xl font-bold",children:(D==null?void 0:D.applications.total)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Total homestay apps"})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Do,{className:"w-4 h-4 text-primary"}),r.jsx("p",{className:"text-sm font-medium",children:"Users"})]}),r.jsx("p",{className:"text-2xl font-bold",children:(D==null?void 0:D.users.total)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Registered users"})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(g5,{className:"w-4 h-4 text-primary"}),r.jsx("p",{className:"text-sm font-medium",children:"Files"})]}),r.jsx("p",{className:"text-2xl font-bold",children:(D==null?void 0:D.files.total)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(D==null?void 0:D.files.totalSize)||"0 MB"})]}),r.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ac,{className:"w-4 h-4 text-primary"}),r.jsx("p",{className:"text-sm font-medium",children:"Database"})]}),r.jsx("p",{className:"text-2xl font-bold",children:(D==null?void 0:D.database.tables)||0}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(D==null?void 0:D.database.size)||"0 MB"})]})]})})]})]})}),r.jsxs(Rr,{value:"critical",className:"space-y-8 mt-0 outline-none p-0 border-none",children:[r.jsx("section",{id:"system-controls",className:"space-y-4",children:r.jsxs(me,{className:"hover:border-red-400 transition-all bg-red-50/20 border-red-200",children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rm,{className:"w-5 h-5 text-red-600"}),r.jsxs("div",{children:[r.jsx(ke,{className:"text-red-900",children:"System Controls & Maintenance"}),r.jsx(Ue,{className:"text-red-700/80",children:"Manage Maintenance Mode (Lockdown) and suspend Payment Gateway pipelines."})]})]})}),r.jsx(ge,{children:r.jsx(te,{variant:"outline",className:"w-full sm:w-auto border-red-200 text-red-700 hover:bg-red-50",onClick:()=>window.location.href="/admin/system-controls",children:"Open System Controls"})})]})}),r.jsxs("section",{id:"database",className:"space-y-4",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ac,{className:"w-5 h-5 text-primary"}),r.jsxs("div",{children:[r.jsx(ke,{children:"Database Connectivity"}),r.jsx(Ue,{children:"Point the portal to a different Postgres server and verify connectivity."})]})]})}),r.jsx(ge,{children:Y?r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx(vt,{className:"w-4 h-4 animate-spin"})," Loading current configuration"]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"db-host",children:"Host / IP"}),r.jsx(Pe,{id:"db-host",value:pt.host,onChange:T("host"),placeholder:"127.0.0.1"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"db-port",children:"Port"}),r.jsx(Pe,{id:"db-port",value:pt.port,onChange:T("port"),placeholder:"5432"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"db-name",children:"Database name"}),r.jsx(Pe,{id:"db-name",value:pt.database,onChange:T("database"),placeholder:"homestay_r1"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"db-user",children:"Username"}),r.jsx(Pe,{id:"db-user",value:pt.user,onChange:T("user"),placeholder:"postgres"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx(je,{htmlFor:"db-password",children:"Password"}),r.jsx(Pe,{id:"db-password",type:"password",value:pt.password,onChange:T("password"),placeholder:Ut?" (unchanged)":"Enter password"}),Ut&&!pt.password&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave blank to keep the existing password."})]})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Update runtime configuration"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Rewrites ",r.jsx("code",{children:".env"})," and ",r.jsx("code",{children:"Database/db-config.env"}),". Restart the PM2/systemd service after saving."]})]}),r.jsx(Zn,{checked:wr,onCheckedChange:wt})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(te,{type:"button",variant:"secondary",onClick:()=>El.mutate(),disabled:El.isPending,children:[El.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Test connection"]}),r.jsxs(te,{type:"button",onClick:()=>Li.mutate(),disabled:Li.isPending,children:[Li.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Save settings"]}),((Ml=nt==null?void 0:nt.metadata)==null?void 0:Ml.lastVerificationResult)&&r.jsxs(ze,{variant:nt.metadata.lastVerificationResult==="success"?"default":"destructive",children:["Last test: ",nt.metadata.lastVerificationResult]})]}),r.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[((Nt=nt==null?void 0:nt.metadata)==null?void 0:Nt.lastVerifiedAt)&&r.jsxs("p",{children:["Last test run: ",C(nt.metadata.lastVerifiedAt),nt.metadata.lastVerificationMessage&&nt.metadata.lastVerificationResult==="failure"?` (${nt.metadata.lastVerificationMessage})`:""]}),((cn=nt==null?void 0:nt.metadata)==null?void 0:cn.lastAppliedAt)&&r.jsxs("p",{children:["Environment updated: ",C(nt.metadata.lastAppliedAt)]}),r.jsxs("p",{children:["Source: ",(nt==null?void 0:nt.source)==="env"?"Environment":(nt==null?void 0:nt.source)==="stored"?"Saved":"Not configured"]})]})]})})]}),r.jsx(zd,{open:Wt.open,onOpenChange:ue=>It(bt=>({open:ue,confirmationText:ue?bt.confirmationText:""})),children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:"Clear HimKosh transaction log?"}),r.jsxs(ed,{children:["This deletes the stored payment attempts from this environment. It does not affect HimKosh servers. Type ",r.jsx("span",{className:"font-semibold",children:xP})," to confirm."]})]}),r.jsx("div",{className:"py-2 space-y-2",children:r.jsx(Pe,{value:Wt.confirmationText,onChange:ue=>It(bt=>({...bt,confirmationText:ue.target.value})),placeholder:xP})}),r.jsxs(Zc,{children:[r.jsx(td,{onClick:()=>It({open:!1,confirmationText:""}),disabled:di.isPending,children:"Cancel"}),r.jsx(Hd,{onClick:()=>di.mutate({confirmationText:Wt.confirmationText}),disabled:!vd||di.isPending,children:di.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Clearing"]}):"Yes, delete log"})]})]})})]}),r.jsxs("section",{id:"reset-zone",className:"space-y-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nh,{className:"w-5 h-5 text-destructive"}),r.jsx(ke,{children:"Reset Operations"})]}),r.jsx(Ue,{children:"Danger zone  irreversible actions"})]}),r.jsx(ge,{children:r.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:wu.map(ue=>{const bt=ue.icon;return r.jsxs(te,{variant:"destructive",className:"h-auto py-4 flex-col items-start text-left",onClick:()=>ju(ue.id),children:[r.jsx(bt,{className:"w-5 h-5 mb-2"}),r.jsx("div",{className:"font-semibold",children:ue.title}),r.jsx("p",{className:"text-xs opacity-80 mt-1",children:ue.description})]},ue.id)})})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Na,{className:"w-5 h-5 text-amber-600"}),r.jsx(ke,{children:"Granular Reset"})]}),r.jsx(Ue,{children:"Select which data categories to reset. Staff, LGD, and DDO data are always preserved."})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{key:"deleteApplications",label:"Applications",icon:ir},{key:"deleteDocuments",label:"Documents",icon:g5},{key:"deletePayments",label:"Payments",icon:_a},{key:"deleteInspections",label:"Inspections",icon:ac},{key:"deleteCertificates",label:"Certificates",icon:Jo},{key:"deleteNotifications",label:"Notifications",icon:Vs},{key:"deletePropertyOwners",label:"Property Owners",icon:Do}].map(({key:ue,label:bt,icon:vr})=>r.jsxs("label",{className:`flex items-center gap-2 p-3 rounded-lg border cursor-pointer transition-colors ${j.selections[ue]?"bg-red-50 border-red-200":"bg-muted/30 border-muted"}`,children:[r.jsx("input",{type:"checkbox",checked:j.selections[ue],onChange:wn=>w(ui=>({...ui,selections:{...ui.selections,[ue]:wn.target.checked}})),className:"w-4 h-4 rounded border-gray-300 text-red-600 focus:ring-red-500"}),r.jsx(vr,{className:"w-4 h-4 text-muted-foreground"}),r.jsx("span",{className:"text-sm font-medium",children:bt})]},ue))}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-emerald-50 border border-emerald-200 rounded-lg",children:[r.jsx(Jo,{className:"w-5 h-5 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-emerald-800",children:"Always Preserved: "}),r.jsx("span",{className:"text-sm text-emerald-700",children:"Staff Users, LGD Locations, DDO Codes"})]})]}),r.jsxs(te,{variant:"destructive",onClick:()=>w(ue=>({...ue,open:!0})),disabled:!Object.values(j.selections).some(Boolean),children:[r.jsx(nh,{className:"w-4 h-4 mr-2"}),"Reset Selected Data"]})]})]})]}),r.jsxs("section",{id:"payment-settings",className:"space-y-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ux,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Payment Settings"})]}),r.jsx(Ue,{children:"Configure payment gateway test mode"})]}),r.jsx(ge,{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:"Test Payment Mode"}),(L==null?void 0:L.enabled)&&r.jsx(ze,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-300",children:" Active"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:L!=null&&L.enabled?"Payment requests send 1 to gateway (actual fee is calculated but not charged)":"Payment requests send actual calculated amounts to gateway"}),(L==null?void 0:L.enabled)&&r.jsx("p",{className:"text-xs text-yellow-600 mt-1",children:" Applications will calculate real fees, but only 1 will be sent to payment gateway for testing"})]}),r.jsx(te,{variant:L!=null&&L.enabled?"destructive":"default",onClick:()=>N(!(L!=null&&L.enabled)),disabled:V||Zt.isPending,"data-testid":"button-toggle-test-payment-mode",children:Zt.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):r.jsx(r.Fragment,{children:L!=null&&L.enabled?"Disable":"Enable"})})]})})]}),r.jsx(me,{children:r.jsxs(ge,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:"Payment Workflow"}),r.jsx(ze,{variant:"outline",className:(X==null?void 0:X.workflow)==="upfront"?"bg-emerald-50 text-emerald-700 border-emerald-300":"bg-blue-50 text-blue-700 border-blue-300",children:(X==null?void 0:X.workflow)==="upfront"?" Pay First":" Pay on Approval"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:(X==null?void 0:X.workflow)==="upfront"?"Owners must pay before submitting their application. Refund if rejected.":"Owners submit first, pay only after DA approves (legacy flow)."}),r.jsx("p",{className:"text-xs text-muted-foreground",children:(X==null?void 0:X.workflow)==="upfront"?"New Flow: Fill  Pay  Submit  Review  Certificate":"Legacy Flow: Fill  Submit  Review  Approve  Pay  Certificate"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{variant:(X==null?void 0:X.workflow)==="on_approval"?"default":"outline",size:"sm",onClick:()=>ve.mutate("on_approval"),disabled:he||ve.isPending||(X==null?void 0:X.workflow)==="on_approval",children:"Pay on Approval"}),r.jsx(te,{variant:(X==null?void 0:X.workflow)==="upfront"?"default":"outline",size:"sm",onClick:()=>ve.mutate("upfront"),disabled:he||ve.isPending||(X==null?void 0:X.workflow)==="upfront",children:"Pay First"})]})]}),(X==null?void 0:X.workflow)==="upfront"&&r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg mt-4 bg-emerald-50/50",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h4",{className:"font-medium text-sm",children:"After Payment: Submit Mode"}),r.jsx(ze,{variant:"outline",className:(X==null?void 0:X.upfrontSubmitMode)==="auto"?"bg-sky-50 text-sky-700 border-sky-300":"bg-amber-50 text-amber-700 border-amber-300",children:(X==null?void 0:X.upfrontSubmitMode)==="auto"?" Auto Submit":" Manual Submit"})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:(X==null?void 0:X.upfrontSubmitMode)==="auto"?"Application is automatically submitted after successful payment (seamless experience).":'User sees a confirmation page after payment and must click "Submit" to finalize.'})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{variant:(X==null?void 0:X.upfrontSubmitMode)==="auto"?"default":"outline",size:"sm",onClick:()=>ee.mutate("auto"),disabled:he||ee.isPending||(X==null?void 0:X.upfrontSubmitMode)==="auto",children:"Auto"}),r.jsx(te,{variant:(X==null?void 0:X.upfrontSubmitMode)==="manual"?"default":"outline",size:"sm",onClick:()=>ee.mutate("manual"),disabled:he||ee.isPending||(X==null?void 0:X.upfrontSubmitMode)==="manual",children:"Manual"})]})]})]})}),r.jsx(me,{children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:"Woman Owner Discount Logic"}),r.jsx(ze,{variant:"outline",className:"bg-purple-50 text-purple-700 border-purple-300",children:(fe==null?void 0:fe.mode)==="ADDITIVE"?"Additive (15% Total)":"Sequential (~14.5% Total)"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Define how the 5% Woman Owner discount combines with the 10% Validity discount."}),r.jsx("p",{className:"text-xs text-muted-foreground",children:(fe==null?void 0:fe.mode)==="ADDITIVE"?"Both discounts are applied on the base amount (5% + 10% = 15%).":"Woman discount (5%) is applied AFTER the 10% validity discount is deducted."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{variant:(fe==null?void 0:fe.mode)==="SEQUENTIAL"||!(fe!=null&&fe.mode)?"default":"outline",size:"sm",onClick:()=>Oe.mutate("SEQUENTIAL"),disabled:Oe.isPending||(fe==null?void 0:fe.mode)==="SEQUENTIAL"||!(fe!=null&&fe.mode),children:"Sequential (Default)"}),r.jsx(te,{variant:(fe==null?void 0:fe.mode)==="ADDITIVE"?"default":"outline",size:"sm",onClick:()=>Oe.mutate("ADDITIVE"),disabled:Oe.isPending||(fe==null?void 0:fe.mode)==="ADDITIVE",children:"Additive"})]})]})})}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Gateway Configuration"}),vn&&r.jsx(ze,{variant:"outline",className:"text-emerald-700 border-emerald-200 bg-emerald-50",children:"Overrides active"})]}),r.jsx(Ue,{children:"Update HimKosh credentials without rebuilding the package."})]}),r.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[r.jsxs("p",{children:["Source: ",(Ke==null?void 0:Ke.source)==="database"?"Database override":"Environment"]}),(Ke==null?void 0:Ke.updatedAt)&&r.jsxs("p",{children:["Updated: ",C(Ke.updatedAt)]}),(Ke==null?void 0:Ke.updatedBy)&&r.jsxs("p",{children:["By: ",Ke.updatedBy]})]})]})}),r.jsx(ge,{className:"space-y-4",children:Ge?r.jsxs("div",{className:"flex items-center justify-center py-6 text-muted-foreground",children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"})," Loading gateway settings"]}):Ke?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-merchant",children:"Merchant code"}),r.jsx(Pe,{id:"gateway-merchant",value:Be.merchantCode,onChange:A("merchantCode"),placeholder:"HIMKOSH228"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-dept",children:"Department ID"}),r.jsx(Pe,{id:"gateway-dept",value:Be.deptId,onChange:A("deptId"),placeholder:"228"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-service",children:"Service code"}),r.jsx(Pe,{id:"gateway-service",value:Be.serviceCode,onChange:A("serviceCode"),placeholder:"TSM"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-ddo",children:"Default DDO"}),r.jsx(Pe,{id:"gateway-ddo",value:Be.ddo,onChange:A("ddo"),placeholder:"SML00-532"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-head1",children:"Primary head of account"}),r.jsx(Pe,{id:"gateway-head1",value:Be.head1,onChange:A("head1"),placeholder:"0230-00-104-01"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-head2",children:"Secondary head (optional)"}),r.jsx(Pe,{id:"gateway-head2",value:Be.head2,onChange:A("head2"),placeholder:"Secondary head code"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-head2-amount",children:"Secondary head amount ()"}),r.jsx(Pe,{id:"gateway-head2-amount",type:"number",min:"0",value:Be.head2Amount,onChange:A("head2Amount")})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"gateway-return-url",children:"Return URL"}),r.jsx(Pe,{id:"gateway-return-url",value:Be.returnUrl,onChange:A("returnUrl"),placeholder:"https://portal.example.gov/api/himkosh/callback"})]})]}),r.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"Allow fallback to environment values"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"When enabled, missing override fields continue using .env defaults."})]}),r.jsx(Zn,{checked:Be.allowFallback,onCheckedChange:ue=>lr(bt=>({...bt,allowFallback:ue}))})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs(te,{onClick:()=>zn.mutate(),disabled:!ns,children:[zn.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Save overrides"]}),r.jsxs(te,{type:"button",variant:"outline",onClick:()=>On.mutate(),disabled:!vn||On.isPending,children:[On.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Reset to defaults"]}),r.jsx(te,{type:"button",variant:"ghost",size:"sm",onClick:()=>He(),disabled:Ge,children:"Refresh"})]})]}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"Gateway metadata not available yet."})})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(v5,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"DDO Routing Diagnostics"})]}),r.jsx(Ue,{children:"Verify which DDO will be used and preview the encrypted payload."})]}),r.jsx(ze,{variant:"outline",children:Kt?`Using ${Kt.ddoUsed}`:"No test run yet"})]})}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{children:"District / Office"}),r.jsxs(pr,{value:yt.district||void 0,onValueChange:ue=>ut(bt=>({...bt,district:ue})),disabled:Vt,children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:Vt?"Loading DDO codes...":"Select district"})}),r.jsx(hr,{className:"max-h-64",children:xd.map(ue=>r.jsxs(it,{value:ue.district,children:[ue.district,"  ",ue.ddoCode]},ue.id))})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Selecting a district helps test routing from the DDO manifest."})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"ddo-tehsil",children:"Tehsil (optional)"}),r.jsx(Pe,{id:"ddo-tehsil",value:yt.tehsil,onChange:ue=>ut(bt=>({...bt,tehsil:ue.target.value})),placeholder:"Used for Chamba / Lahaul routing"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"ddo-manual",children:"Manual DDO override (optional)"}),r.jsx(Pe,{id:"ddo-manual",value:yt.manualDdo,onChange:ue=>ut(bt=>({...bt,manualDdo:ue.target.value})),placeholder:"Override resolved DDO"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"ddo-amount",children:"Test amount ()"}),r.jsx(Pe,{id:"ddo-amount",type:"number",min:"1",value:yt.amount,onChange:ue=>ut(bt=>({...bt,amount:ue.target.value}))})]}),r.jsxs("div",{className:"space-y-1 md:col-span-2",children:[r.jsx(je,{htmlFor:"ddo-tender",children:"Tendered by"}),r.jsx(Pe,{id:"ddo-tender",value:yt.tenderBy,onChange:ue=>ut(bt=>({...bt,tenderBy:ue.target.value})),placeholder:"Applicant name used in payload"})]})]}),r.jsxs("div",{className:"flex gap-3 flex-wrap",children:[r.jsxs(te,{onClick:()=>Pa.mutate(),disabled:Pa.isPending,children:[Pa.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Generate payload"]}),Kt&&r.jsx(te,{type:"button",variant:"outline",onClick:()=>{var ue;(ue=Kt.payload)!=null&&ue.paymentUrl&&typeof navigator<"u"&&navigator.clipboard?navigator.clipboard.writeText(Kt.payload.paymentUrl).then(()=>e({title:"Payment URL copied",description:"Paste into a new tab for manual gateway testing."})).catch(()=>e({title:"Copy failed",description:"Please copy the URL manually.",variant:"destructive"})):e({title:"Clipboard unavailable",description:"Please copy the URL from the preview below."})},children:"Copy payment URL"})]}),Kt&&r.jsxs("div",{className:"space-y-3 rounded-lg border p-4 bg-muted/40",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[r.jsxs(ze,{variant:"outline",children:["DDO  ",Kt.ddoUsed," (",Kt.ddoSource.replace(/_/g," "),")"]}),Kt.routedDistrict&&r.jsxs("span",{children:["Routed District: ",Kt.routedDistrict]}),((Ta=Kt.mapping)==null?void 0:Ta.district)&&r.jsxs("span",{children:["Mapping matched: ",Kt.mapping.district]})]}),r.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[r.jsxs("p",{children:["Core string checksum: ",Kt.payload.checksum]}),r.jsxs("p",{className:"break-all",children:["Payment URL: ",r.jsx("code",{children:Kt.payload.paymentUrl})]})]}),r.jsxs("details",{className:"text-sm",children:[r.jsx("summary",{className:"cursor-pointer text-primary",children:"Show payload preview"}),r.jsx("pre",{className:"mt-2 whitespace-pre-wrap break-all bg-background rounded-md p-3 text-xs",children:JSON.stringify(Kt.payload,null,2)})]})]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_a,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Recent HimKosh Transactions"})]}),r.jsx(Ue,{children:"Newest payment attempts captured from the portal."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(pr,{value:a,onValueChange:o,children:[r.jsx(ur,{className:"w-[200px]",children:r.jsx(yr,{placeholder:"Filter by DDO"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"all",children:"All DDO Codes"}),(Ga=qe==null?void 0:qe.ddoCodes)==null?void 0:Ga.map(ue=>r.jsxs(it,{value:ue.ddoCode,children:[ue.district," (",ue.ddoCode,")"]},ue.ddoCode))]})]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>Te(),disabled:ae,children:[r.jsx(Na,{className:"mr-2 h-4 w-4"}),"Refresh"]}),r.jsx(te,{variant:"destructive",size:"sm",onClick:()=>It({open:!0,confirmationText:""}),children:"Clear log"})]})]})}),r.jsxs(ge,{className:"space-y-4",children:[ae&&r.jsx("p",{className:"text-muted-foreground",children:"Loading..."}),we&&r.jsx("p",{className:"text-red-600",children:"Error loading transactions."}),!ae&&!we&&An.length===0&&r.jsx("p",{className:"text-muted-foreground",children:"No transactions yet."}),An.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Date"}),r.jsx(Mt,{children:"District"}),r.jsx(Mt,{children:"DDO Code"}),r.jsx(Mt,{children:"Head"}),r.jsx(Mt,{children:"GRN"}),r.jsx(Mt,{className:"text-right",children:"Amount"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{className:"text-right",children:"Actions"})]})}),r.jsx(Oo,{children:An.map(ue=>r.jsxs(In,{children:[r.jsx(Rt,{className:"whitespace-nowrap text-xs",children:Rl(ue.createdAt)}),r.jsx(Rt,{className:"font-medium",children:ue.applicationDistrict||""}),r.jsx(Rt,{className:"font-mono text-xs",children:ue.ddo||""}),r.jsx(Rt,{className:"font-mono text-xs max-w-[100px] truncate",children:ue.head1||""}),r.jsx(Rt,{className:"font-mono text-xs",children:ue.echTxnId||""}),r.jsx(Rt,{className:"text-right font-semibold",children:Kq(ue.totalAmount)}),r.jsx(Rt,{children:Nu(ue)}),r.jsx(Rt,{className:"text-right",children:r.jsx(te,{variant:"outline",size:"sm",onClick:()=>R(ue),children:"Details"})})]},ue.id))})]})}),An.length>0&&ei>An.length&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Showing latest ",An.length," of ",ei," transactions."]})]})]})]})]}),r.jsx(Rr,{value:"operations",className:"space-y-8 mt-0 outline-none p-0 border-none",children:r.jsxs("section",{id:"communications",className:"space-y-4",children:[r.jsx(glt,{}),r.jsx(_lt,{})]})}),r.jsx(Rr,{value:"critical",className:"space-y-8 mt-0 outline-none p-0 border-none",children:r.jsxs("section",{id:"security",className:"space-y-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rm,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Login Captcha"})]}),r.jsx(Ue,{children:"Toggle the math captcha challenge on the public login page"})]}),r.jsx(ge,{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:"Captcha Requirement"}),!(Ee!=null&&Ee.enabled)&&r.jsx(ze,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"Testing"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:Ee!=null&&Ee.enabled?"All logins must solve a quick math challenge before OTP.":"Captcha is disabled for this environmentre-enable before production."})]}),r.jsx(te,{variant:Ee!=null&&Ee.enabled?"destructive":"default",onClick:()=>ms.mutate(!(Ee!=null&&Ee.enabled)),disabled:Re||ms.isPending,"data-testid":"button-toggle-captcha",children:ms.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):r.jsx(r.Fragment,{children:Ee!=null&&Ee.enabled?"Disable":"Enable"})})]})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ac,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Multi-Service Portal Mode"})]}),r.jsx(Ue,{children:"Enable the service selection hub after login"})]}),r.jsx(ge,{className:"space-y-4",children:r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:"Service Selection Hub"}),De!=null&&De.enabled?r.jsx(ze,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200",children:"Enabled"}):r.jsx(ze,{variant:"outline",className:"bg-slate-100 text-slate-700 border-slate-300",children:"Disabled"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:De!=null&&De.enabled?"Users see the 8-service selection page after login (Homestay, Adventure Sports, etc.).":"Users go directly to Homestay dashboard after login (default behavior)."})]}),r.jsx(te,{variant:De!=null&&De.enabled?"destructive":"default",onClick:()=>Ds.mutate(!(De!=null&&De.enabled)),disabled:tt||Ds.isPending,"data-testid":"button-toggle-multi-service",children:Ds.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):r.jsx(r.Fragment,{children:De!=null&&De.enabled?"Disable":"Enable"})})]})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"ClamAV Upload Scanning"})]}),r.jsx(Ue,{children:"Enable antivirus scanning for uploaded documents"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"font-semibold",children:"Current Status"}),En!=null&&En.enabled?r.jsx(ze,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-300",children:"Active"}):r.jsx(ze,{variant:"outline",className:"bg-slate-100 text-slate-700 border-slate-300",children:"Disabled"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:En!=null&&En.enabled?"Uploads are scanned before they enter the workflow.":"Uploads bypass antivirus scanning."}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Source: ",(En==null?void 0:En.source)==="db"?"Admin console override":"Environment default"]})]}),r.jsx(te,{variant:En!=null&&En.enabled?"destructive":"default",onClick:()=>cl.mutate(!(En!=null&&En.enabled)),disabled:ka||cl.isPending||!En,"data-testid":"button-toggle-clamav",children:cl.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):r.jsx(r.Fragment,{children:En!=null&&En.enabled?"Disable":"Enable"})})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"ClamAV adds a small scan step (hundreds of ms for PDFs) and does not impact payment flow."})]})]})]})}),r.jsxs(Rr,{value:"operations",className:"space-y-8 mt-0 outline-none p-0 border-none",children:[r.jsx("section",{id:"staff-tools",className:"space-y-4",children:r.jsxs(me,{className:"lg:col-span-2",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(n8,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"District Staff Accounts"})]}),r.jsx(Ue,{children:"Upload the CSV manifest to create or refresh the 15 DA/DTDO account pairs per district."})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid gap-4 lg:grid-cols-[minmax(0,1fr)_280px]",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"district-staff-csv",children:"Select CSV manifest"}),r.jsx(Pe,{id:"district-staff-csv",type:"file",accept:".csv,text/csv",onChange:Ha,disabled:Zi.isPending,className:"mt-1","data-testid":"input-district-staff-csv"}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Template lives on this VM under ",r.jsx("code",{children:"seed_data/district-staff-accounts.csv"}),"."]}),d&&r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Loaded ",r.jsx("strong",{children:d}),Wa>0?`  ${Wa} district rows`:""]})]}),r.jsxs("div",{className:"p-3 border rounded-lg space-y-2",children:[r.jsx(je,{htmlFor:"district-staff-dry-run",className:"text-xs text-muted-foreground",children:"Import mode"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Zn,{id:"district-staff-dry-run",checked:m,onCheckedChange:ue=>p(ue),disabled:Zi.isPending}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:m?"Dry-run (no DB writes)":"Apply to database"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:m?"Validates the CSV and shows what would change.":"Creates/updates DA & DTDO users immediately."})]})]})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx(te,{onClick:_c,disabled:!Si,"data-testid":"button-import-district-staff",children:Zi.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(n8,{className:"w-4 h-4 mr-2"}),m?"Preview Manifest":"Import Accounts"]})}),r.jsx(te,{variant:"outline",onClick:()=>v(null),disabled:!g||Zi.isPending,children:"Clear result"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Password format: ",r.jsx("code",{children:"da"}),"/",r.jsx("code",{children:"dtdo"})," + first 3 letters of the district + ",r.jsx("code",{children:"@2025"}),". Share the CSV with IT so they can rotate passwords after onboarding."]}),g&&r.jsxs("div",{className:"space-y-4 border rounded-lg p-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"font-semibold text-sm",children:g.message}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Mode: ",g.dryRun?"Dry-run":"Applied","  Password schema:"," ",r.jsx("code",{children:g.passwordFormat})]})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-3 lg:grid-cols-6 text-sm",children:[r.jsxs("div",{className:"p-3 bg-muted rounded",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"District rows"}),r.jsx("p",{className:"text-lg font-semibold",children:g.summary.districts})]}),r.jsxs("div",{className:"p-3 bg-muted rounded",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Accounts touched"}),r.jsx("p",{className:"text-lg font-semibold",children:g.summary.accountsAttempted})]}),r.jsxs("div",{className:"p-3 bg-muted rounded",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:g.dryRun?"Would create":"Created"}),r.jsx("p",{className:"text-lg font-semibold",children:g.dryRun?g.summary.wouldCreate:g.summary.created})]}),r.jsxs("div",{className:"p-3 bg-muted rounded",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:g.dryRun?"Would update":"Updated"}),r.jsx("p",{className:"text-lg font-semibold",children:g.dryRun?g.summary.wouldUpdate:g.summary.updated})]}),r.jsxs("div",{className:"p-3 bg-muted rounded",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Skipped"}),r.jsx("p",{className:"text-lg font-semibold",children:g.summary.skipped})]})]}),((Bo=g.errors)==null?void 0:Bo.length)>0&&r.jsxs("div",{className:"bg-destructive/10 text-destructive text-xs p-3 rounded space-y-1",children:[r.jsx("p",{className:"font-semibold",children:"Parse warnings"}),r.jsx("ul",{className:"list-disc ml-4 space-y-0.5",children:g.errors.map(ue=>r.jsx("li",{children:ue},ue))})]}),r.jsx("div",{className:"overflow-auto border rounded",children:r.jsxs("table",{className:"min-w-[640px] w-full text-sm",children:[r.jsx("thead",{className:"bg-muted/50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left text-xs font-semibold uppercase tracking-wide p-2",children:"District / DDO"}),r.jsx("th",{className:"text-left text-xs font-semibold uppercase tracking-wide p-2",children:"Dealing Assistant"}),r.jsx("th",{className:"text-left text-xs font-semibold uppercase tracking-wide p-2",children:"DTDO"})]})}),r.jsx("tbody",{children:g.details.map(ue=>r.jsxs("tr",{className:"border-t",children:[r.jsxs("td",{className:"p-2 align-top",children:[r.jsx("p",{className:"font-medium",children:ue.district}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["DDO: ",ue.ddoCode]})]}),r.jsx("td",{className:"p-2 align-top",children:Bn(ue.da)}),r.jsx("td",{className:"p-2 align-top",children:Bn(ue.dtdo)})]},`${ue.rowNumber}-${ue.ddoCode}`))})]})})]})]})]})}),r.jsx("section",{id:"portal-config",className:"space-y-4",children:r.jsx(klt,{})})]}),r.jsxs(Rr,{value:"critical",className:"space-y-8 mt-0 outline-none p-0 border-none",children:[r.jsx("section",{id:"smoke-tests",className:"space-y-4",children:r.jsxs(me,{className:"lg:col-span-2",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(R3,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Smoke Test Harness"})]}),r.jsx(Ue,{children:"Trigger the CLI smoke script on this VM and watch the live log from the console."})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Current status"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx(ze,{variant:Lo,children:lo}),r.jsx("span",{className:"text-sm text-muted-foreground",children:zt!=null&&zt.running?`Started ${Ni(zt==null?void 0:zt.startedAt)}`:zt!=null&&zt.lastFinishedAt?`Last run finished ${Ni(zt==null?void 0:zt.lastFinishedAt)}`:"No runs triggered yet"})]})]}),r.jsx(te,{onClick:()=>za.mutate(),disabled:Ol,"data-testid":"button-run-smoke-test",children:zt!=null&&zt.running?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):za.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Starting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(R3,{className:"w-4 h-4 mr-2"}),"Run Smoke Test"]})})]}),r.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Active run ID"}),r.jsx("p",{className:"font-mono text-sm break-all",children:(zt==null?void 0:zt.runId)||""}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Log file:"," ",(_i=zt==null?void 0:zt.log)!=null&&_i.path?r.jsx("code",{children:zt.log.path}):""]})]}),r.jsxs("div",{className:"p-3 border rounded-lg",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Last run"}),r.jsx("p",{className:"text-sm font-semibold",children:Ji}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:zt!=null&&zt.lastRunId?`Run ID ${zt.lastRunId}`:"No historical data"})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Cve,{className:"w-4 h-4 text-muted-foreground"}),r.jsx(je,{className:"text-sm font-medium",children:"Live log"})]}),r.jsx(Ur,{readOnly:!0,spellCheck:!1,className:"font-mono text-xs min-h-[220px]",value:gd}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Output mirrors ",r.jsx("code",{children:"docs/smoke-reports/<runId>.log"}),". Full reports live under"," ",r.jsx("code",{children:"docs/smoke-reports/<runId>/report.json"})," on this VM."]}),(zt==null?void 0:zt.reportPath)&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Latest report: ",r.jsx("code",{children:zt.reportPath})]})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["The harness reuses ",r.jsx("code",{children:"scripts/run-smoke.sh"})," with the configured ",r.jsx("code",{children:"SMOKE_* credentials"}),", and each run now wipes the previous smoke applications/files for that owner so you always start from a clean slate."]})]})]})}),r.jsx("section",{id:"test-data",className:"space-y-4",children:r.jsxs(me,{className:"lg:col-span-2",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(v5,{className:"w-5 h-5 text-primary"}),r.jsx(ke,{children:"Generate Test Data"})]}),r.jsx(Ue,{children:"Create sample applications and users"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"seed-count",children:"Number of Applications"}),r.jsx(Pe,{id:"seed-count",type:"number",value:l,onChange:ue=>c(parseInt(ue.target.value)||10),min:1,max:100,className:"mt-1","data-testid":"input-seed-count"})]}),r.jsx(te,{onClick:()=>tr.mutate({type:"applications",count:l}),disabled:tr.isPending,className:"w-full","data-testid":"button-seed-applications",children:tr.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ds,{className:"w-4 h-4 mr-2"}),"Generate ",l," Applications"]})}),r.jsx("div",{className:"pt-2 border-t",children:r.jsx(te,{variant:"outline",onClick:()=>tr.mutate({type:"users"}),disabled:tr.isPending,className:"w-full","data-testid":"button-seed-users",children:"Generate Test Users (All Roles)"})})]})]})})]})]})})}),r.jsx(zd,{open:O.open,onOpenChange:ue=>{ue||S()},children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:O.targetEnabled?"Enable 1 test payments?":"Disable test payments and charge actual amounts?"}),r.jsx(ed,{className:"space-y-2",children:O.targetEnabled?r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"All HimKosh payment requests will send 1 (demo) to the gateway. Application fees will still be calculated but not collected."}),r.jsx("p",{className:"font-semibold text-yellow-700",children:"Use only in staging/demo. Owners must reattempt payment after switching back to production."})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{children:"HimKosh will start receiving the full calculated amount for every payment. Ensure test accounts are cleared before going live."}),r.jsx("p",{className:"font-semibold text-emerald-700",children:"This change affects all districts immediately."})]})})]}),r.jsxs("div",{className:"space-y-4 py-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"test-mode-reason",children:"Reason for this change"}),r.jsx(Ur,{id:"test-mode-reason",value:O.reason,onChange:ue=>$(bt=>({...bt,reason:ue.target.value})),placeholder:"Explain why you are switching payment mode (min 15 characters)"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs(je,{htmlFor:"test-mode-confirm",children:["Type ",r.jsx("span",{className:"font-semibold",children:$n})," to confirm"]}),r.jsx(Pe,{id:"test-mode-confirm",value:O.confirmationText,onChange:ue=>$(bt=>({...bt,confirmationText:ue.target.value.toUpperCase()})),placeholder:$n})]})]}),r.jsxs(Zc,{children:[r.jsx(td,{onClick:S,disabled:Zt.isPending,children:"Cancel"}),r.jsx(Hd,{onClick:qa,disabled:!_s||Zt.isPending,children:Zt.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Updating..."]}):r.jsx(r.Fragment,{children:O.targetEnabled?"Enable test mode":"Disable test mode"})})]})]})}),r.jsx(us,{open:H.open,onOpenChange:ue=>{ue||se({open:!1,password:"",error:""})},children:r.jsxs(Jn,{className:"sm:max-w-[400px]",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2 text-red-600",children:[r.jsx(rm,{className:"w-5 h-5"}),"System Criticals Access"]}),r.jsx(Ns,{children:"Re-enter your password to access critical system controls. These actions can affect the entire system."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"critical-password",children:"Your Password"}),r.jsx(Pe,{id:"critical-password",type:"password",value:H.password,onChange:ue=>se(bt=>({...bt,password:ue.target.value,error:""})),placeholder:"Enter your password",onKeyDown:ue=>{ue.key==="Enter"&&H.password.length>=1&&J.mutate(H.password)}}),H.error&&r.jsx("p",{className:"text-sm text-red-600",children:H.error})]}),r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsxs("p",{className:"text-xs text-red-700",children:[r.jsx("strong",{children:"Warning:"})," You are about to access controls that can reset data, modify payment settings, and change security configurations. Only proceed if you are authorized."]})})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>se({open:!1,password:"",error:""}),disabled:J.isPending,children:"Cancel"}),r.jsx(te,{variant:"destructive",onClick:()=>J.mutate(H.password),disabled:J.isPending||H.password.length<1,children:J.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Unlock Critical Access"})]})]})}),r.jsx(zd,{open:t.open,onOpenChange:ue=>{ue||n({open:!1,operation:null,confirmationText:"",reason:""})},children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsxs(Jc,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(jn,{className:"w-5 h-5"}),"Confirm ",t.operation==="full"?"Full System Reset":"Delete Operation"]}),r.jsx(ed,{asChild:!0,children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"font-semibold",children:"This will permanently delete data. This action cannot be undone!"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsxs(je,{htmlFor:"confirmation-text",children:["Type"," ",r.jsx("code",{className:"bg-muted px-1 rounded font-mono",children:t.operation==="full"?"RESET":"DELETE"})," ","to confirm"]}),r.jsx(Pe,{id:"confirmation-text",value:t.confirmationText,onChange:ue=>n({...t,confirmationText:ue.target.value}),placeholder:t.operation==="full"?"RESET":"DELETE",className:"mt-1 font-mono","data-testid":"input-confirmation-text"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"reason",children:"Reason (required, min 10 characters)"}),r.jsx(Ur,{id:"reason",value:t.reason,onChange:ue=>n({...t,reason:ue.target.value}),placeholder:"e.g., Starting new test cycle",className:"mt-1","data-testid":"input-reason"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"password",children:"Your Password (required for verification)"}),r.jsx(Pe,{id:"password",type:"password",value:t.password,onChange:ue=>n({...t,password:ue.target.value}),placeholder:"Enter your password to confirm",className:"mt-1","data-testid":"input-password"})]})]})]})})]}),r.jsxs(Zc,{children:[r.jsx(td,{disabled:Rs.isPending,children:"Cancel"}),r.jsx(Hd,{onClick:pd,disabled:Rs.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90","data-testid":"button-confirm-reset",children:Rs.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Executing..."]}):"Confirm & Execute"})]})]})}),r.jsx(zd,{open:j.open,onOpenChange:ue=>w(bt=>({...bt,open:ue})),children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsxs(Jc,{className:"flex items-center gap-2 text-destructive",children:[r.jsx(jn,{className:"w-5 h-5"}),"Granular Reset - Confirm Deletion"]}),r.jsx(ed,{asChild:!0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("p",{children:"The following data categories will be deleted:"}),r.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[j.selections.deleteApplications&&r.jsx("li",{children:"All applications and related data"}),j.selections.deleteDocuments&&r.jsx("li",{children:"All uploaded documents"}),j.selections.deletePayments&&r.jsx("li",{children:"All payment records"}),j.selections.deleteInspections&&r.jsx("li",{children:"All inspection orders and reports"}),j.selections.deleteCertificates&&r.jsx("li",{children:"All issued certificates"}),j.selections.deleteNotifications&&r.jsx("li",{children:"All notifications"}),j.selections.deletePropertyOwners&&r.jsx("li",{className:"text-destructive font-medium",children:"All property owner accounts"})]}),r.jsx("div",{className:"p-2 bg-emerald-50 border border-emerald-200 rounded text-sm text-emerald-700",children:" Staff users, LGD data, and DDO codes will be preserved."}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:'Type "RESET" to confirm'}),r.jsx(Pe,{value:j.confirmationText,onChange:ue=>w(bt=>({...bt,confirmationText:ue.target.value})),placeholder:"RESET",className:"mt-1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium",children:"Reason (min 10 characters)"}),r.jsx(Pe,{value:j.reason,onChange:ue=>w(bt=>({...bt,reason:ue.target.value})),placeholder:"Why are you performing this reset?",className:"mt-1"})]})]})]})})]}),r.jsxs(Zc,{children:[r.jsx(td,{disabled:st.isPending,children:"Cancel"}),r.jsx(Hd,{onClick:()=>{if(j.confirmationText!=="RESET"){e({title:"Confirmation failed",description:'Please type "RESET" exactly to confirm',variant:"destructive"});return}if(!j.reason||j.reason.length<10){e({title:"Reason required",description:"Please provide a reason (at least 10 characters)",variant:"destructive"});return}st.mutate({...j.selections,confirmationText:j.confirmationText,reason:j.reason})},disabled:st.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:st.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Executing..."]}):"Confirm & Execute"})]})]})}),r.jsx(zd,{open:Wt.open,onOpenChange:ue=>{ue||It({open:!1,confirmationText:""})},children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsx(Jc,{children:"Clear HimKosh Logs"}),r.jsx(ed,{children:"This will remove recent transactions from the admin view."})]}),r.jsxs("div",{className:"py-4 space-y-4",children:[r.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-md bg-muted/50",children:[r.jsx(Zn,{id:"hard-delete-switch",checked:x,onCheckedChange:y}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs(je,{htmlFor:"hard-delete-switch",className:"flex items-center gap-2 font-medium",children:["Permanently delete from database",x&&r.jsx(ze,{variant:"destructive",className:"text-[10px] h-5",children:"Destructive"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["If unchecked, logs are only ",r.jsx("strong",{children:"archived"})," (soft delete) and can be restored by DB admin. If checked, they are ",r.jsx("strong",{children:"wiped forever"}),"."]})]})]}),x&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:'Type "CLEAR" to confirm permanent deletion'}),r.jsx(Pe,{value:Wt.confirmationText,onChange:ue=>It(bt=>({...bt,confirmationText:ue.target.value.toUpperCase()})),placeholder:"CLEAR"})]})]}),r.jsxs(Zc,{children:[r.jsx(td,{children:"Cancel"}),r.jsx(Hd,{className:x?"bg-destructive hover:bg-destructive/90":"",disabled:x&&Wt.confirmationText!=="CLEAR",onClick:()=>di.mutate(x),children:x?"Permanently Delete":"Archive Logs"})]})]})}),r.jsx(us,{open:s.open&&!!rn,onOpenChange:ue=>{ue||k()},children:r.jsx(Jn,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:rn&&r.jsxs(r.Fragment,{children:[r.jsxs(js,{children:[r.jsxs(ws,{children:["Transaction ",rn.appRefNo]}),r.jsxs(Ns,{children:["Application ",rn.deptRefNo," "," ",Rl(rn.createdAt)]})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 mt-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Amount"}),r.jsx("p",{className:"font-semibold text-lg",children:Kq(rn.totalAmount)})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Status"}),Nu(rn)]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Service Code"}),r.jsx("p",{className:"font-mono text-sm",children:rn.serviceCode||""})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"DDO"}),r.jsx("p",{className:"font-mono text-sm",children:rn.ddo||""})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Merchant"}),r.jsx("p",{className:"text-sm",children:rn.merchantCode||""})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Portal Base URL"}),r.jsx("p",{className:"text-sm break-all",children:rn.portalBaseUrl||""})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Challan / GRN"}),r.jsx("p",{className:"text-sm",children:rn.echTxnId||""})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground",children:"Bank Reference"}),r.jsx("p",{className:"text-sm",children:rn.bankCIN||""})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("p",{className:"text-xs uppercase text-muted-foreground mb-2",children:"Raw payload"}),r.jsx("pre",{className:"bg-muted p-3 rounded-lg text-xs overflow-x-auto",children:JSON.stringify(rn,null,2)})]})]})})})]})}const Rlt=[{title:"User Management",description:"Create, edit, or disable staff and admin accounts",href:"/admin/users",icon:Do},{title:"Workflow & Portal Config",description:"DA Send Back, OTP login, category enforcement, upload policies",href:"/admin/super-console#portal-config",icon:iu},{title:"Communications",description:"SMS/Email gateways and notification templates",href:"/admin/super-console#communications",icon:Fm},{title:"Audit Log",description:"Track all system actions and exports",href:"/admin/audit-log",icon:ir},{title:"Staff Import",description:"Bulk import DA/DTDO accounts from CSV",href:"/admin/super-console#staff-tools",icon:e0},{title:"Backup Manager",description:"Scheduled backups and restore utilities",href:"/admin/backup",icon:g5},{title:"Export / Import",description:"System migration - export and import full system data",href:"/admin/export-import",icon:D_}],Dlt=[{title:"System Controls",description:"Maintenance Mode, Payment Pausing, & Critical Switches",href:"/admin/system-controls",icon:Gi,badge:"Mission Critical",badgeVariant:"destructive"},{title:"Payment Gateway",description:"HimKosh credentials, DDO routing, and test modes",href:"/admin/super-console#payment-settings",icon:_a,badge:"Sensitive",badgeVariant:"secondary"},{title:"Security Settings",description:"Captcha, OTP policy, and antivirus scanning",href:"/admin/super-console#security",icon:Gi},{title:"Database Tools",description:"Configuration, reset utilities, and seed data",href:"/admin/super-console#database",icon:ac,badge:"Danger Zone",badgeVariant:"destructive"}];function Yq(){var m,p,g,v,x,y,j,w,N,S,T,C,A;const[e,t]=b.useState(!1),[n,s]=b.useState({open:!1,password:"",error:""}),{data:i,isLoading:a}=rt({queryKey:["/api/admin/stats"]}),{data:o}=rt({queryKey:["/api/auth/me"]}),l=Ot({mutationFn:async R=>{var $;const k=($=o==null?void 0:o.user)==null?void 0:$.username,O=await lt("POST","/api/verify-critical-password",{password:R,username:k});if(!O.ok){const D=await O.json();throw new Error(D.message||"Invalid password")}return O.json()},onSuccess:()=>{t(!0),s({open:!1,password:"",error:""})},onError:R=>{s(k=>({...k,error:R.message}))}}),c=()=>{e?t(!1):s({open:!0,password:"",error:""})},d=((p=(m=i==null?void 0:i.applications)==null?void 0:m.byStatus)==null?void 0:p.submitted)||0,u=((v=(g=i==null?void 0:i.applications)==null?void 0:g.byStatus)==null?void 0:v.approved)||0,h=((x=i==null?void 0:i.users)==null?void 0:x.total)||0,f=(i==null?void 0:i.environment)||"unknown";return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:r.jsxs("div",{className:"container mx-auto max-w-7xl p-6 space-y-8",children:[r.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(iu,{className:"h-6 w-6 text-primary"})}),r.jsx(ze,{variant:f==="production"?"default":"secondary",children:f})]}),r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Super Admin Console"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Platform configuration and monitoring"})]}),r.jsx(te,{asChild:!0,variant:"outline",children:r.jsxs(Co,{href:"/admin/super-console",children:[r.jsx(D_,{className:"mr-2 h-4 w-4"}),"Legacy Console"]})})]}),r.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Total Applications"}),r.jsx(Zv,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-3xl font-bold",children:((y=i==null?void 0:i.applications)==null?void 0:y.total)??""}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u," approved"]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Pending Review"}),r.jsx(Vs,{className:"h-4 w-4 text-amber-500"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-3xl font-bold text-amber-600",children:d}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting processing"})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"System Users"}),r.jsx(Do,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-3xl font-bold",children:h}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((w=(j=i==null?void 0:i.users)==null?void 0:j.byRole)==null?void 0:w.property_owner)??0," owners"]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between pb-2",children:[r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Database"}),r.jsx(ac,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-3xl font-bold",children:((N=i==null?void 0:i.database)==null?void 0:N.size)??""}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[((S=i==null?void 0:i.database)==null?void 0:S.tables)??0," tables"]})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Operations Console"}),r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:Rlt.map(R=>r.jsx(Co,{href:R.href,children:r.jsxs(me,{className:"h-full hover:shadow-md hover:border-primary/50 transition-all cursor-pointer group",children:[r.jsxs(Ce,{className:"pb-2",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/5 group-hover:bg-primary/10 transition-colors",children:r.jsx(R.icon,{className:"h-5 w-5 text-primary"})}),R.badge&&r.jsx(ze,{variant:R.badgeVariant||"outline",className:"text-xs",children:R.badge})]}),r.jsx(ke,{className:"text-base mt-3",children:R.title}),r.jsx(Ue,{className:"text-sm line-clamp-2",children:R.description})]}),r.jsx(ge,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center text-sm text-primary opacity-0 group-hover:opacity-100 transition-opacity",children:["Open ",r.jsx(sa,{className:"ml-1 h-4 w-4"})]})})]})},R.title))})]}),r.jsxs("div",{className:"border-t pt-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-5 h-5 text-red-600"}),r.jsx("h2",{className:"text-xl font-semibold text-red-900 dark:text-red-400",children:"System Internals & Critical Controls"})]}),r.jsx(te,{variant:e?"outline":"destructive",size:"sm",onClick:c,children:e?r.jsxs(r.Fragment,{children:[r.jsx(su,{className:"w-4 h-4 mr-2"}),"Lock Controls"]}):r.jsxs(r.Fragment,{children:[r.jsx(o8,{className:"w-4 h-4 mr-2"}),"Unlock Critical Controls"]})})]}),e?r.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4 animate-in fade-in slide-in-from-top-4 duration-300",children:Dlt.map(R=>r.jsx(Co,{href:R.href,children:r.jsxs(me,{className:"h-full border-red-200 bg-red-50/50 hover:bg-red-50 hover:shadow-md hover:border-red-400 transition-all cursor-pointer group dark:border-red-900 dark:bg-red-950/10",children:[r.jsxs(Ce,{className:"pb-2",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:"p-2 rounded-lg bg-red-100 text-red-700 group-hover:bg-red-200 transition-colors",children:r.jsx(R.icon,{className:"h-5 w-5"})}),R.badge&&r.jsx(ze,{variant:R.badgeVariant||"outline",className:"text-xs",children:R.badge})]}),r.jsx(ke,{className:"text-base mt-3 text-red-900 dark:text-red-100",children:R.title}),r.jsx(Ue,{className:"text-sm line-clamp-2 text-red-800/80 dark:text-red-200/70",children:R.description})]}),r.jsx(ge,{className:"pt-0",children:r.jsxs("div",{className:"flex items-center text-sm text-red-600 opacity-0 group-hover:opacity-100 transition-opacity font-medium",children:["Access ",r.jsx(sa,{className:"ml-1 h-4 w-4"})]})})]})},R.title))}):r.jsxs("div",{className:"rounded-lg border border-dashed border-red-200 bg-red-50/30 p-12 text-center dark:border-red-900/50",children:[r.jsx(su,{className:"w-12 h-12 text-red-200 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-red-900 dark:text-red-200",children:"Critical Controls Locked"}),r.jsx("p",{className:"text-sm text-red-600/80 dark:text-red-400 mt-1 max-w-md mx-auto",children:"These settings affect core system functionality, payments, and data integrity. Please unlock to proceed with caution."}),r.jsxs(te,{variant:"outline",className:"mt-6 border-red-200 text-red-700 hover:bg-red-50 hover:text-red-800",onClick:c,children:[r.jsx(o8,{className:"w-4 h-4 mr-2"}),"Reveal Controls"]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Pm,{className:"h-5 w-5"}),"System Health"]}),r.jsx(Ue,{children:"Current platform status"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-emerald-50 dark:bg-emerald-950/30",children:[r.jsx(kr,{className:"h-5 w-5 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"Database"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Connected, ",(T=i==null?void 0:i.database)==null?void 0:T.size]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-emerald-50 dark:bg-emerald-950/30",children:[r.jsx(kr,{className:"h-5 w-5 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"File Storage"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:[((C=i==null?void 0:i.files)==null?void 0:C.total)??0," files, ",(A=i==null?void 0:i.files)==null?void 0:A.totalSize]})]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-emerald-50 dark:bg-emerald-950/30",children:[r.jsx(kr,{className:"h-5 w-5 text-emerald-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"API Server"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Healthy"})]})]})]})})]}),r.jsx("div",{className:"text-center text-sm text-muted-foreground pt-4",children:r.jsxs("p",{children:["For advanced configuration, use the"," ",r.jsx(Co,{href:"/admin/super-console",className:"text-primary hover:underline",children:"Legacy Console"}),r.jsx("span",{className:"mx-2 text-muted-foreground",children:""}),r.jsxs("span",{className:"text-muted-foreground",children:["v","1.0.6"]})]})})]})}),r.jsx(us,{open:n.open,onOpenChange:R=>{R||s({open:!1,password:"",error:""})},children:r.jsxs(Jn,{className:"sm:max-w-[400px]",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2 text-red-600",children:[r.jsx(rm,{className:"w-5 h-5"}),"Unlock Critical Controls"]}),r.jsx(Ns,{children:"Enter your password to access critical system controls."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"dashboard-critical-password",children:"Your Password"}),r.jsx(Pe,{id:"dashboard-critical-password",type:"password",value:n.password,onChange:R=>s(k=>({...k,password:R.target.value,error:""})),placeholder:"Enter your password",onKeyDown:R=>{R.key==="Enter"&&n.password.length>=1&&l.mutate(n.password)}}),n.error&&r.jsx("p",{className:"text-sm text-red-600",children:n.error})]}),r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsxs("p",{className:"text-xs text-red-700",children:[r.jsx("strong",{children:"Warning:"})," These controls can modify payment settings, reset data, and change security configurations."]})})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>s({open:!1,password:"",error:""}),disabled:l.isPending,children:"Cancel"}),r.jsx(te,{variant:"destructive",onClick:()=>l.mutate(n.password),disabled:l.isPending||n.password.length<1,children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):"Unlock"})]})]})})]})}function Mlt(e){if(e==null||isNaN(e))return"-";if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+n[s]}function Ilt(e){if(!e)return"Unknown";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid date":ap(t,{addSuffix:!0})}catch{return"Invalid date"}}function Xq(e,t){if(!e)return"-";try{const n=new Date(e);return isNaN(n.getTime())?"-":sr(n,t)}catch{return"-"}}function Llt(){var j;const{toast:e}=Tr(),t=ci(),[n,s]=b.useState(!1),[i,a]=b.useState({}),{data:o,isLoading:l}=rt({queryKey:["/api/admin/backup/settings"]}),{data:c,isLoading:d}=rt({queryKey:["/api/admin/backup/list"]}),u=Ot({mutationFn:async w=>(await lt("POST","/api/admin/backup/settings",w)).json(),onSuccess:()=>{e({title:"Settings updated",description:"Backup configuration saved successfully."}),t.invalidateQueries({queryKey:["/api/admin/backup/settings"]}),s(!1)},onError:w=>{e({title:"Error",description:w.message||"Failed to save settings",variant:"destructive"})}}),h=Ot({mutationFn:async()=>(await lt("POST","/api/admin/backup/run")).json(),onSuccess:w=>{var N,S;e({title:((N=w.backup)==null?void 0:N.status)==="success"?"Backup complete":"Backup completed with errors",description:w.message,variant:((S=w.backup)==null?void 0:S.status)==="success"?"default":"destructive"}),t.invalidateQueries({queryKey:["/api/admin/backup/list"]}),t.invalidateQueries({queryKey:["/api/admin/backup/settings"]})},onError:w=>{e({title:"Backup failed",description:w.message,variant:"destructive"})}}),f=Ot({mutationFn:async w=>(await lt("DELETE",`/api/admin/backup/${w}`)).json(),onSuccess:()=>{e({title:"Backup deleted"}),t.invalidateQueries({queryKey:["/api/admin/backup/list"]})},onError:w=>{e({title:"Error",description:w.message,variant:"destructive"})}}),m=()=>{u.mutate(i)},p=(w,N)=>{window.open(`/api/admin/backup/${w}/download/${N}`,"_blank")},g=o==null?void 0:o.settings,v=o==null?void 0:o.scheduler,x=(o==null?void 0:o.scheduleOptions)||[],y=(c==null?void 0:c.backups)||[];return l?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-5xl",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Backup Management"}),r.jsx("p",{className:"text-muted-foreground",children:"Configure automated backups and manage backup files"})]}),r.jsx(te,{onClick:()=>h.mutate(),disabled:h.isPending,children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Running..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kR,{className:"mr-2 h-4 w-4"})," Backup Now"]})})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Vs,{className:"h-4 w-4"}),"Scheduler Status"]})}),r.jsx(ge,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[v!=null&&v.running?r.jsx(ze,{variant:"default",className:"bg-emerald-500",children:"Running"}):r.jsx(ze,{variant:"secondary",children:"Stopped"}),r.jsx("span",{className:"text-sm text-muted-foreground",children:(v==null?void 0:v.description)||"Not scheduled"})]})})]}),r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(g5,{className:"h-4 w-4"}),"Last Backup"]})}),r.jsx(ge,{children:g!=null&&g.lastBackupAt?r.jsxs("div",{className:"flex items-center gap-2",children:[g.lastBackupStatus==="success"?r.jsx(kr,{className:"h-4 w-4 text-emerald-500"}):r.jsx(oo,{className:"h-4 w-4 text-red-500"}),r.jsx("span",{className:"text-sm",children:Ilt(g.lastBackupAt)})]}):r.jsx("span",{className:"text-sm text-muted-foreground",children:"No backups yet"})})]}),r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs(ke,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(Eb,{className:"h-4 w-4"}),"Total Backups"]})}),r.jsx(ge,{children:r.jsx("span",{className:"text-2xl font-bold",children:y.length})})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(iu,{className:"h-5 w-5"}),"Backup Configuration"]}),r.jsx(Ue,{children:"Configure automatic backup schedule and options"})]}),!n&&r.jsx(te,{variant:"outline",onClick:()=>{a(g||{}),s(!0)},children:"Edit"})]})}),r.jsx(ge,{className:"space-y-6",children:n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(je,{children:"Enable Scheduled Backups"}),r.jsx(Zn,{checked:i.enabled??(g==null?void 0:g.enabled)??!0,onCheckedChange:w=>a({...i,enabled:w})})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Schedule"}),r.jsxs(pr,{value:i.schedule??(g==null?void 0:g.schedule)??"0 2 * * *",onValueChange:w=>a({...i,schedule:w}),children:[r.jsx(ur,{children:r.jsx(yr,{})}),r.jsx(hr,{children:x.map(w=>r.jsx(it,{value:w.value,children:w.label},w.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Backup Directory"}),r.jsx(Pe,{value:i.backupDirectory??(g==null?void 0:g.backupDirectory)??"",onChange:w=>a({...i,backupDirectory:w.target.value})}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Default location after installation: ",r.jsx("code",{className:"bg-muted px-1 py-0.5 rounded",children:"/var/hptourism/backups"})]})]}),r.jsxs("div",{className:"space-y-4 border-t pt-4 mt-2",children:[r.jsx("h3",{className:"text-sm font-medium",children:"Backup Redundancy"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(je,{children:"Enable Failover / Fallback"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Use a secondary location if the primary fails (e.g., NAS outage)"})]}),r.jsx(Zn,{checked:i.enableFailover??(g==null?void 0:g.enableFailover)??!1,onCheckedChange:w=>a({...i,enableFailover:w})})]}),(i.enableFailover??(g==null?void 0:g.enableFailover))&&r.jsxs("div",{className:"space-y-2 pl-2 border-l-2 border-muted ml-1",children:[r.jsx(je,{children:"Fallback Directory (Local)"}),r.jsx(Pe,{value:i.fallbackDirectory??(g==null?void 0:g.fallbackDirectory)??"",onChange:w=>a({...i,fallbackDirectory:w.target.value}),placeholder:"/opt/hptourism/homestay/backups_fallback"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: Use a local folder on the server disk."})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Retention (days)"}),r.jsx(Pe,{type:"number",min:1,max:365,value:i.retentionDays??(g==null?void 0:g.retentionDays)??30,onChange:w=>a({...i,retentionDays:parseInt(w.target.value)||30})})]}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(je,{children:"Include Database"}),r.jsx(Zn,{checked:i.includeDatabase??(g==null?void 0:g.includeDatabase)??!0,onCheckedChange:w=>a({...i,includeDatabase:w})})]})}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(je,{children:"Include Files"}),r.jsx(Zn,{checked:i.includeFiles??(g==null?void 0:g.includeFiles)??!0,onCheckedChange:w=>a({...i,includeFiles:w})})]})}),r.jsx("div",{className:"space-y-2",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(je,{children:"Include Configuration (.env)"}),r.jsx(Zn,{checked:i.includeEnv??(g==null?void 0:g.includeEnv)??!0,onCheckedChange:w=>a({...i,includeEnv:w})})]})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{onClick:m,disabled:u.isPending,children:[u.isPending?r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}):null,"Save Settings"]}),r.jsx(te,{variant:"outline",onClick:()=>s(!1),children:"Cancel"})]})]}):r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Enabled:"}),r.jsx("span",{children:g!=null&&g.enabled?"Yes":"No"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Schedule:"}),r.jsx("span",{children:(v==null?void 0:v.description)||(g==null?void 0:g.schedule)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Directory:"}),r.jsx("span",{className:"font-mono text-xs",children:g==null?void 0:g.backupDirectory})]}),(g==null?void 0:g.enableFailover)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Fallback:"}),r.jsx("span",{className:"font-mono text-xs",title:g.fallbackDirectory,children:((j=g.fallbackDirectory)==null?void 0:j.split("/").pop())||"configured"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Retention:"}),r.jsxs("span",{children:[g==null?void 0:g.retentionDays," days"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Include Database:"}),r.jsx("span",{children:g!=null&&g.includeDatabase?"Yes":"No"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Include Files:"}),r.jsx("span",{children:g!=null&&g.includeFiles?"Yes":"No"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-muted-foreground",children:"Include Configuration:"}),r.jsx("span",{children:g!=null&&g.includeEnv?"Yes":"No"})]})]})})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(ac,{className:"h-5 w-5"}),"Backup History"]}),r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t.invalidateQueries({queryKey:["/api/admin/backup/list"]}),children:r.jsx(Na,{className:"h-4 w-4"})})]})}),r.jsx(ge,{children:d?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(vt,{className:"h-6 w-6 animate-spin"})}):y.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Eb,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No backups found"}),r.jsx("p",{className:"text-sm",children:'Click "Backup Now" to create your first backup'})]}):r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Date"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{children:"Size"}),r.jsx(Mt,{children:"Duration"}),r.jsx(Mt,{className:"text-right",children:"Actions"})]})}),r.jsx(Oo,{children:y.map(w=>r.jsxs(In,{children:[r.jsx(Rt,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:Xq(w.createdAt,"MMM d, yyyy")}),r.jsx("div",{className:"text-xs text-muted-foreground",children:Xq(w.createdAt,"h:mm a")})]})}),r.jsx(Rt,{children:w.status==="success"?r.jsx(ze,{variant:"default",className:"bg-emerald-500",children:"Success"}):r.jsx(ze,{variant:"destructive",children:"Failed"})}),r.jsx(Rt,{children:Mlt(w.sizeBytes)}),r.jsx(Rt,{children:w.duration?`${(w.duration/1e3).toFixed(1)}s`:"-"}),r.jsx(Rt,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-1",children:[w.databaseFile&&r.jsx(te,{variant:"ghost",size:"icon",title:"Download Database",onClick:()=>p(w.id,"database"),children:r.jsx(ac,{className:"h-4 w-4"})}),w.filesArchive&&r.jsx(te,{variant:"ghost",size:"icon",title:"Download Files",onClick:()=>p(w.id,"files"),children:r.jsx(Eb,{className:"h-4 w-4"})}),r.jsx(te,{variant:"ghost",size:"icon",title:"Delete",onClick:()=>f.mutate(w.id),children:r.jsx(nh,{className:"h-4 w-4 text-red-500"})})]})})]},w.id))})]})})]})]})}function Flt(e){if(e===0)return"0 B";const t=1024,n=["B","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,s)).toFixed(2))+" "+n[s]}function $lt(){const{toast:e}=Tr(),t=ci(),n=b.useRef(null),[s,i]=b.useState("full"),[a,o]=b.useState(!0),[l,c]=b.useState(!0),[d,u]=b.useState([]),[h,f]=b.useState(!1),[m,p]=b.useState(""),[g,v]=b.useState(null),[x,y]=b.useState(null),{data:j,isLoading:w}=rt({queryKey:["/api/admin/migration/exports"]}),{data:N,isLoading:S}=rt({queryKey:["/api/admin/migration/schema/validate"]}),{data:T}=rt({queryKey:["/api/admin/migration/categories"]}),{data:C}=rt({queryKey:["/api/admin/migration/schema/summary"]}),A=(T==null?void 0:T.categories)||[],R=Ot({mutationFn:async()=>(await lt("POST","/api/admin/migration/export",{includeDatabase:a,includeFiles:l})).json(),onSuccess:V=>{var P;e({title:"Export created",description:`Package created in ${((((P=V.package)==null?void 0:P.duration)||0)/1e3).toFixed(1)}s`}),t.invalidateQueries({queryKey:["/api/admin/migration/exports"]})},onError:V=>{e({title:"Export failed",description:V.message||"Failed to create export package",variant:"destructive"})}}),k=Ot({mutationFn:async V=>(await lt("DELETE",`/api/admin/migration/export/${V}`)).json(),onSuccess:()=>{e({title:"Export deleted"}),t.invalidateQueries({queryKey:["/api/admin/migration/exports"]})},onError:V=>{e({title:"Delete failed",description:V.message,variant:"destructive"})}}),O=Ot({mutationFn:async()=>{if(!g)throw new Error("No file selected");const V=new FormData;V.append("package",g),V.append("password",m);const P=await fetch("/api/admin/migration/import",{method:"POST",body:V,credentials:"include"});if(!P.ok){const z=await P.json();throw new Error(z.message||"Import failed")}return P.json()},onSuccess:V=>{var P,z,Z,F;e({title:(P=V.result)!=null&&P.success?"Import successful":"Import completed with errors",description:`Database: ${(z=V.result)!=null&&z.databaseRestored?"":""}, Files: ${(Z=V.result)!=null&&Z.filesRestored?` (${V.result.filesCount})`:""}`,variant:(F=V.result)!=null&&F.success?"default":"destructive"}),f(!1),v(null),p(""),y(null),t.invalidateQueries({queryKey:["/api/admin/migration/schema/summary"]}),t.invalidateQueries({queryKey:["/api/admin/migration/schema/validate"]})},onError:V=>{e({title:"Import failed",description:V.message,variant:"destructive"})}}),$=async V=>{var z;const P=(z=V.target.files)==null?void 0:z[0];if(P){v(P),y(null);try{const Z=new FormData;Z.append("package",P);const W=await(await fetch("/api/admin/migration/import/validate",{method:"POST",body:Z,credentials:"include"})).json();y(W)}catch{y({valid:!1,metadata:null,errors:["Failed to validate package"],warnings:[]})}}},D=()=>{x!=null&&x.valid&&f(!0)},q=V=>{window.open(`/api/admin/migration/export/${V}/download`,"_blank")},M=V=>{u(P=>P.includes(V)?P.filter(z=>z!==V):[...P,V])},L=(j==null?void 0:j.packages)||[];return r.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-5xl",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold",children:"Export / Import"}),r.jsx("p",{className:"text-muted-foreground",children:"System migration - export and import complete database and files"})]}),!S&&N&&r.jsx(me,{className:N.isComplete?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50",children:r.jsxs(ge,{className:"py-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[N.isComplete?r.jsx(Jo,{className:"h-6 w-6 text-emerald-600"}):r.jsx(rm,{className:"h-6 w-6 text-amber-600"}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${N.isComplete?"text-emerald-700":"text-amber-700"}`,children:N.isComplete?"Schema Coverage Complete":`Schema Coverage Incomplete (${N.uncoveredTables.length} tables not covered)`}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[N.coveredTables.length," of ",N.totalDbTables," tables covered by backup"]})]})]}),C&&r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-lg font-semibold",children:C.totalRows.toLocaleString()}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"total records"})]})]}),N.warnings.length>0&&r.jsx("div",{className:"mt-3 p-2 bg-white/50 rounded text-sm text-amber-700",children:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[N.warnings.slice(0,3).map((V,P)=>r.jsx("li",{children:V},P)),N.warnings.length>3&&r.jsxs("li",{children:["...and ",N.warnings.length-3," more"]})]})})]})}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(pve,{className:"h-5 w-5"}),"Create Export Package"]}),r.jsx(Ue,{children:"Export the complete database and files for migration or backup"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs(aa,{value:s,onValueChange:V=>i(V),children:[r.jsxs(Qi,{children:[r.jsx(Pr,{value:"full",children:"Full Export"}),r.jsx(Pr,{value:"granular",children:"Granular Export"})]}),r.jsx(Rr,{value:"full",className:"space-y-4",children:r.jsxs("div",{className:"flex flex-wrap gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zn,{id:"include-database",checked:a,onCheckedChange:o}),r.jsxs(je,{htmlFor:"include-database",className:"flex items-center gap-2",children:[r.jsx(ac,{className:"h-4 w-4"}),"Include Database"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Zn,{id:"include-files",checked:l,onCheckedChange:c}),r.jsxs(je,{htmlFor:"include-files",className:"flex items-center gap-2",children:[r.jsx(Eb,{className:"h-4 w-4"}),"Include Files"]})]})]})}),r.jsxs(Rr,{value:"granular",className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Select specific data categories to export:"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:A.map(V=>{const P=C==null?void 0:C.categories.find(z=>z.id===V.id);return r.jsxs("label",{className:`flex items-start gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${d.includes(V.id)?"border-primary bg-primary/5":"border-border hover:bg-accent"}`,children:[r.jsx(Zs,{checked:d.includes(V.id),onCheckedChange:()=>M(V.id)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm",children:V.name}),r.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[V.tables.length," tables",P!=null&&P.rows?`  ${P.rows.toLocaleString()} rows`:""]})]})]},V.id)})}),d.length>0&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.length," categories selected"]})]})]}),r.jsx(te,{onClick:()=>R.mutate(),disabled:R.isPending||s==="full"&&!a&&!l||s==="granular"&&d.length===0,children:R.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Export..."]}):r.jsxs(r.Fragment,{children:[r.jsx(kR,{className:"mr-2 h-4 w-4"}),"Create Export Package"]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(mve,{className:"h-5 w-5"}),"Import Package"]}),r.jsx(Ue,{children:"Restore system from an export package (database and files will be replaced)"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center gap-4",children:r.jsx(Pe,{ref:n,type:"file",accept:".zip",onChange:$,className:"max-w-md"})}),x&&r.jsxs("div",{className:"space-y-3",children:[x.valid?r.jsxs("div",{className:"p-4 rounded-lg bg-emerald-50 border border-emerald-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 font-medium",children:[r.jsx(kr,{className:"h-5 w-5"}),"Package validated successfully"]}),x.metadata&&r.jsxs("div",{className:"mt-3 text-sm text-emerald-600 space-y-1",children:[r.jsxs("p",{children:["Source: ",x.metadata.sourceSystem]}),r.jsxs("p",{children:["Created: ",sr(new Date(x.metadata.createdAt),"PPp")]}),r.jsxs("p",{children:["Contains: ",x.metadata.includesDatabase?"Database":"",x.metadata.includesDatabase&&x.metadata.includesFiles?" + ":"",x.metadata.includesFiles?`${x.metadata.filesCount} files`:""]})]})]}):r.jsxs("div",{className:"p-4 rounded-lg bg-red-50 border border-red-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium",children:[r.jsx(oo,{className:"h-5 w-5"}),"Package validation failed"]}),r.jsx("ul",{className:"mt-2 text-sm text-red-600 list-disc list-inside",children:x.errors.map((V,P)=>r.jsx("li",{children:V},P))})]}),x.warnings.length>0&&r.jsxs("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-700 font-medium",children:[r.jsx(jn,{className:"h-5 w-5"}),"Warnings"]}),r.jsx("ul",{className:"mt-2 text-sm text-amber-600 list-disc list-inside",children:x.warnings.map((V,P)=>r.jsx("li",{children:V},P))})]})]}),r.jsxs(te,{onClick:D,disabled:!(x!=null&&x.valid)||O.isPending,variant:"destructive",children:[r.jsx(e0,{className:"mr-2 h-4 w-4"}),"Import Package"]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(s8,{className:"h-5 w-5"}),"Export History"]}),r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t.invalidateQueries({queryKey:["/api/admin/migration/exports"]}),children:r.jsx(Na,{className:"h-4 w-4"})})]})}),r.jsx(ge,{children:w?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(vt,{className:"h-6 w-6 animate-spin"})}):L.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(s8,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No export packages found"}),r.jsx("p",{className:"text-sm",children:"Create an export package to get started"})]}):r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Date"}),r.jsx(Mt,{children:"Contents"}),r.jsx(Mt,{children:"Size"}),r.jsx(Mt,{className:"text-right",children:"Actions"})]})}),r.jsx(Oo,{children:L.map(V=>{var P,z;return r.jsxs(In,{children:[r.jsx(Rt,{children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:sr(new Date(V.createdAt),"MMM d, yyyy")}),r.jsx("div",{className:"text-xs text-muted-foreground",children:sr(new Date(V.createdAt),"h:mm a")})]})}),r.jsx(Rt,{children:r.jsxs("div",{className:"flex gap-2",children:[((P=V.metadata)==null?void 0:P.includesDatabase)&&r.jsxs(ze,{variant:"secondary",children:[r.jsx(ac,{className:"h-3 w-3 mr-1"}),"DB"]}),((z=V.metadata)==null?void 0:z.includesFiles)&&r.jsxs(ze,{variant:"secondary",children:[r.jsx(Eb,{className:"h-3 w-3 mr-1"}),V.metadata.filesCount," files"]})]})}),r.jsx(Rt,{children:Flt(V.sizeBytes)}),r.jsx(Rt,{className:"text-right",children:r.jsxs("div",{className:"flex justify-end gap-1",children:[r.jsx(te,{variant:"ghost",size:"icon",title:"Download",onClick:()=>q(V.id),children:r.jsx(ds,{className:"h-4 w-4"})}),r.jsx(te,{variant:"ghost",size:"icon",title:"Delete",onClick:()=>k.mutate(V.id),children:r.jsx(nh,{className:"h-4 w-4 text-red-500"})})]})})]},V.id)})})]})})]}),r.jsx(zd,{open:h,onOpenChange:f,children:r.jsxs(Xc,{children:[r.jsxs(Qc,{children:[r.jsxs(Jc,{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"h-5 w-5 text-red-500"}),"Confirm Import"]}),r.jsx(ed,{asChild:!0,children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{children:["This will ",r.jsx("strong",{children:"replace the entire database and files"})," with the contents of the import package. This action cannot be undone."]}),r.jsx("div",{className:"p-3 rounded-md bg-red-50 border border-red-200 text-red-700",children:r.jsx("p",{className:"font-medium",children:"Warning: All current data will be lost!"})}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{htmlFor:"import-password",className:"flex items-center gap-2",children:[r.jsx(su,{className:"h-4 w-4"}),"Enter your password to confirm"]}),r.jsx(Pe,{id:"import-password",type:"password",value:m,onChange:V=>p(V.target.value),placeholder:"Your password"})]})]})})]}),r.jsxs(Zc,{children:[r.jsx(td,{disabled:O.isPending,children:"Cancel"}),r.jsx(te,{variant:"destructive",onClick:()=>O.mutate(),disabled:O.isPending||!m,children:O.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(e0,{className:"mr-2 h-4 w-4"}),"Import and Replace All Data"]})})]})]})})]})}function Blt(){const{toast:e}=Tr(),t=ci(),{data:n,isLoading:s}=rt({queryKey:["/api/settings/woman-discount-mode"]}),{data:i,isLoading:a}=rt({queryKey:["/api/settings/enforce-single-session"]}),{data:o,isLoading:l}=rt({queryKey:["/api/settings/enable-legacy-registrations"]}),c=Ot({mutationFn:async p=>{await lt("POST","/api/settings/woman-discount-mode",{mode:p})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/settings/woman-discount-mode"]}),e({title:"Settings Updated",description:"Woman owner discount policy has been updated."})},onError:p=>{e({title:"Update Failed",description:"Could not update settings. Please try again.",variant:"destructive"})}}),d=Ot({mutationFn:async p=>{await lt("POST","/api/settings/enforce-single-session",{enabled:p})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/settings/enforce-single-session"]}),e({title:"Settings Updated",description:"Single session policy has been updated."})},onError:p=>{e({title:"Update Failed",description:"Could not update settings. Please try again.",variant:"destructive"})}}),u=Ot({mutationFn:async p=>{await lt("POST","/api/settings/enable-legacy-registrations",{enabled:p})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/settings/enable-legacy-registrations"]}),e({title:"Settings Updated",description:"Existing RC registration flow has been updated."})},onError:p=>{e({title:"Update Failed",description:"Could not update settings. Please try again.",variant:"destructive"})}}),h=(n==null?void 0:n.mode)||"SEQUENTIAL",f=(i==null?void 0:i.enabled)||!1,m=(o==null?void 0:o.enabled)!==!1;return r.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:r.jsxs("div",{className:"container mx-auto max-w-3xl space-y-8",children:[r.jsxs("div",{children:[r.jsx(Co,{href:"/admin/console",children:r.jsxs(te,{variant:"ghost",className:"mb-4 pl-0 hover:pl-2 transition-all",children:[r.jsx(Es,{className:"mr-2 h-4 w-4"})," Back to Console"]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(iu,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Policy Settings"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Configure global application policies and calculation rules"})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"h-5 w-5 text-orange-500"}),r.jsx(ke,{children:"Security Settings"})]}),r.jsx(Ue,{children:"Configure login and session security policies"})]}),r.jsxs(ge,{children:[a?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading settings..."]}):r.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"single-session",className:"font-semibold",children:"Enforce Single Session Login"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"When enabled, new logins will log out all other devices for that user"})]}),r.jsx(Zn,{id:"single-session",checked:f,onCheckedChange:p=>d.mutate(p),disabled:d.isPending})]}),d.isPending&&r.jsxs("div",{className:"mt-4 flex items-center text-sm text-muted-foreground",children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving changes..."]}),l?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-4",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading..."]}):r.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4 mt-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs(je,{htmlFor:"legacy-registration",className:"font-semibold flex items-center gap-2",children:["Allow Existing RC Registration",!m&&r.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"Disabled"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'When disabled, the "Existing Owner" intake form will show a maintenance message.'})]}),r.jsx(Zn,{id:"legacy-registration",checked:m,onCheckedChange:p=>u.mutate(p),disabled:u.isPending})]}),u.isPending&&r.jsxs("div",{className:"mt-4 flex items-center text-sm text-muted-foreground",children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Woman Owner Discount"}),r.jsx(Ue,{children:"Determine how the 5% Woman Owner discount is applied when combined with the 3-Year Validity discount (10%)."})]}),r.jsxs(ge,{children:[s?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading settings..."]}):r.jsxs(wc,{defaultValue:h,onValueChange:p=>c.mutate(p),className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3 space-y-0 rounded-md border p-4 hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors",children:[r.jsx(Ps,{value:"SEQUENTIAL",id:"seq",className:"mt-1"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"seq",className:"font-semibold cursor-pointer",children:"Sequential (Default)"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Apply 3-Year discount (10%) first, then apply 5% Woman Owner discount on the ",r.jsx("strong",{children:"reduced amount"}),"."]}),r.jsx("div",{className:"text-xs bg-slate-100 dark:bg-slate-800 p-2 rounded mt-2 font-mono",children:"Total Discount  14.5%"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3 space-y-0 rounded-md border p-4 hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors",children:[r.jsx(Ps,{value:"ADDITIVE",id:"add",className:"mt-1"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"add",className:"font-semibold cursor-pointer",children:"Additive (Flat 15%)"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Apply both discounts on the ",r.jsx("strong",{children:"base amount"}),'. Warning: This contradicts the official PRD but aligns with "in addition to" text.']}),r.jsx("div",{className:"text-xs bg-slate-100 dark:bg-slate-800 p-2 rounded mt-2 font-mono",children:"Total Discount = 15.0%"})]})]})]}),c.isPending&&r.jsxs("div",{className:"mt-4 flex items-center text-sm text-muted-foreground",children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving changes..."]})]})]}),r.jsx(Vlt,{}),r.jsx(zlt,{}),r.jsx(qlt,{}),r.jsx(Ult,{})]})})}function Vlt(){const{toast:e}=Tr(),t=ci(),[n,s]=b.useState(null),{data:i,isLoading:a}=rt({queryKey:["/api/admin/settings/payment/gateway"]}),o=(i==null?void 0:i.gateway)||"himkosh",l=n??o,c=Ot({mutationFn:async u=>{await lt("POST","/api/admin/settings/payment/gateway",{gateway:u})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/admin/settings/payment/gateway"]}),t.invalidateQueries({queryKey:["/api/public/settings/payment-gateway"]}),e({title:"Payment Gateway Updated",description:"Default payment gateway has been changed."}),s(null)},onError:()=>{e({title:"Update Failed",description:"Could not update payment gateway. Please try again.",variant:"destructive"})}}),d=()=>{l&&c.mutate(l)};return r.jsxs(me,{className:"border-blue-200 dark:border-blue-900",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(iu,{className:"h-5 w-5 text-blue-600"}),r.jsx(ke,{children:"Payment Gateway"})]}),r.jsx(Ue,{children:"Select the default payment gateway for processing application fees."})]}),r.jsxs(ge,{children:[a?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading settings..."]}):r.jsxs(wc,{value:l,onValueChange:s,className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3 space-y-0 rounded-md border p-4 hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors",children:[r.jsx(Ps,{value:"himkosh",id:"gw-himkosh",className:"mt-1"}),r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"gw-himkosh",className:"font-semibold cursor-pointer",children:"HimKosh (Government Treasury)"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Official Himachal Pradesh government treasury e-challan system."})]})]}),r.jsxs("div",{className:"flex items-start space-x-3 space-y-0 rounded-md border p-4 hover:bg-slate-50 dark:hover:bg-slate-900 transition-colors",children:[r.jsx(Ps,{value:"ccavenue",id:"gw-ccavenue",className:"mt-1"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs(je,{htmlFor:"gw-ccavenue",className:"font-semibold cursor-pointer flex items-center gap-2",children:["Kotak Mahindra (CCAvenue)",r.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full",children:"New"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"CCAvenue payment gateway via Kotak Mahindra Bank. Supports cards, UPI, net banking."})]})]})]}),r.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[r.jsx(te,{onClick:d,disabled:c.isPending||l===o,className:"w-full sm:w-auto",children:c.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"mr-2 h-4 w-4"})," Update Settings"]})}),r.jsx(Co,{href:"/admin/payment-test-kotak",children:r.jsx(te,{variant:"outline",className:"w-full sm:w-auto",children:"Test Kotak/CCAvenue Payment "})})]})]})]})}function Ult(){const{toast:e}=Tr(),t=ci(),[n,s]=b.useState(""),{data:i,isLoading:a}=rt({queryKey:["/api/settings/maintenance-mode"]});b.useEffect(()=>{i!=null&&i.accessKey&&s(i.accessKey)},[i]);const o=Ot({mutationFn:async c=>{await lt("POST","/api/settings/maintenance-mode",c)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/settings/maintenance-mode"]}),e({title:"Maintenance Mode Updated",description:"Settings have been saved successfully."})},onError:()=>{e({title:"Update Failed",description:"Could not update maintenance settings.",variant:"destructive"})}}),l=(i==null?void 0:i.enabled)||!1;return r.jsxs(me,{className:"border-orange-200 dark:border-orange-900 overflow-hidden",children:[r.jsx("div",{className:"bg-orange-50 dark:bg-orange-950/30 p-1"}),r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"h-5 w-5 text-orange-600"}),r.jsx(ke,{children:"Maintenance Mode (Lockdown)"})]}),r.jsx(Ue,{children:"Restrict public access to the application. Only users with the bypass key can access the site."})]}),r.jsx(ge,{className:"space-y-6",children:a?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading settings..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4 bg-white dark:bg-slate-950",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs(je,{htmlFor:"maintenance-mode",className:"font-semibold flex items-center gap-2",children:["Enable Maintenance Mode",l&&r.jsx("span",{className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded-full",children:"Active"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:'When enabled, all public routes will redirect to the "Coming Soon" page.'})]}),r.jsx(Zn,{id:"maintenance-mode",checked:l,onCheckedChange:c=>o.mutate({enabled:c,accessKey:n}),disabled:o.isPending})]}),r.jsxs("div",{className:"grid gap-3 p-4 rounded-md border bg-slate-50 dark:bg-slate-900/50",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"access-key",className:"font-medium",children:"Bypass Key (Secret)"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Users can bypass maintenance mode by visiting: ",r.jsx("code",{className:"bg-slate-200 dark:bg-slate-800 px-1 py-0.5 rounded",children:"?access_key=YOUR_KEY"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{id:"access-key",value:n,onChange:c=>s(c.target.value),placeholder:"Enter secret bypass key...",className:"max-w-md font-mono"}),r.jsxs(te,{onClick:()=>o.mutate({enabled:l,accessKey:n}),disabled:o.isPending||n===(i==null?void 0:i.accessKey),size:"sm",children:[o.isPending&&r.jsx(vt,{className:"mr-2 h-3 w-3 animate-spin"}),"Update Key"]})]})]})]})})]})}function qlt(){const{toast:e}=Tr(),t=ci(),[n,s]=b.useState({enabled:!0,global:{maxRequests:1e3,windowMinutes:15},auth:{maxRequests:20,windowMinutes:10},upload:{maxRequests:100,windowMinutes:10}}),{data:i,isLoading:a}=rt({queryKey:["/api/admin/settings/security/rate-limits"]});b.useEffect(()=>{i&&s({enabled:i.enabled??!0,global:i.global??{maxRequests:1e3,windowMinutes:15},auth:i.auth??{maxRequests:20,windowMinutes:10},upload:i.upload??{maxRequests:100,windowMinutes:10}})},[i]);const o=Ot({mutationFn:async c=>{await lt("POST","/api/admin/settings/security/rate-limits",c)},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/admin/settings/security/rate-limits"]}),e({title:"Rate Limits Updated",description:"Rate limit settings have been saved. Changes will take effect within 60 seconds."})},onError:()=>{e({title:"Update Failed",description:"Could not update rate limit settings.",variant:"destructive"})}}),l=()=>{o.mutate(n)};return r.jsxs(me,{className:"border-purple-200 dark:border-purple-900",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"h-5 w-5 text-purple-600"}),r.jsx(ke,{children:"Rate Limiting"})]}),r.jsx(Ue,{children:"Configure request rate limits to protect against abuse. Changes take effect within 60 seconds."})]}),r.jsx(ge,{className:"space-y-6",children:a?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading settings..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between rounded-md border p-4",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(je,{htmlFor:"rate-limit-enabled",className:"font-semibold",children:"Enable Rate Limiting"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"When disabled, all rate limits are bypassed (not recommended)"})]}),r.jsx(Zn,{id:"rate-limit-enabled",checked:n.enabled,onCheckedChange:c=>s({...n,enabled:c})})]}),r.jsxs("div",{className:"grid gap-4 p-4 rounded-md border bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("div",{className:"font-medium text-sm",children:"Global Rate Limit"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-muted-foreground",children:"Max Requests"}),r.jsx(Pe,{type:"number",value:n.global.maxRequests,onChange:c=>s({...n,global:{...n.global,maxRequests:parseInt(c.target.value)||1e3}}),min:1,max:1e4})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-muted-foreground",children:"Window (minutes)"}),r.jsx(Pe,{type:"number",value:n.global.windowMinutes,onChange:c=>s({...n,global:{...n.global,windowMinutes:parseInt(c.target.value)||15}}),min:1,max:60})]})]})]}),r.jsxs("div",{className:"grid gap-4 p-4 rounded-md border bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("div",{className:"font-medium text-sm",children:"Authentication Rate Limit"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-muted-foreground",children:"Max Login Attempts"}),r.jsx(Pe,{type:"number",value:n.auth.maxRequests,onChange:c=>s({...n,auth:{...n.auth,maxRequests:parseInt(c.target.value)||20}}),min:1,max:100})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-muted-foreground",children:"Window (minutes)"}),r.jsx(Pe,{type:"number",value:n.auth.windowMinutes,onChange:c=>s({...n,auth:{...n.auth,windowMinutes:parseInt(c.target.value)||10}}),min:1,max:60})]})]})]}),r.jsxs("div",{className:"grid gap-4 p-4 rounded-md border bg-slate-50 dark:bg-slate-900/50",children:[r.jsx("div",{className:"font-medium text-sm",children:"Upload Rate Limit"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-muted-foreground",children:"Max Uploads"}),r.jsx(Pe,{type:"number",value:n.upload.maxRequests,onChange:c=>s({...n,upload:{...n.upload,maxRequests:parseInt(c.target.value)||100}}),min:1,max:500})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-muted-foreground",children:"Window (minutes)"}),r.jsx(Pe,{type:"number",value:n.upload.windowMinutes,onChange:c=>s({...n,upload:{...n.upload,windowMinutes:parseInt(c.target.value)||10}}),min:1,max:60})]})]})]}),r.jsx(te,{onClick:l,disabled:o.isPending,className:"w-full",children:o.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"mr-2 h-4 w-4"})," Save Rate Limit Settings"]})})]})})]})}function zlt(){const{toast:e}=Tr(),t=ci(),[n,s]=b.useState({total:"0",approved:"0",rejected:"0",pending:"0"}),{data:i,isLoading:a}=rt({queryKey:["/api/admin/settings/admin_legacy_stats"]});b.useEffect(()=>{if(i!=null&&i.settingValue){const d=i.settingValue;s({total:String(d.total||0),approved:String(d.approved||0),rejected:String(d.rejected||0),pending:String(d.pending||0)})}},[i]);const o=Ot({mutationFn:async d=>{await lt("PUT","/api/admin/settings/admin_legacy_stats",{value:{total:parseInt(d.total)||0,approved:parseInt(d.approved)||0,rejected:parseInt(d.rejected)||0,pending:parseInt(d.pending)||0}})},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/admin/settings/admin_legacy_stats"]}),t.invalidateQueries({queryKey:["/api/public/stats"]}),e({title:"Statistics Updated",description:"Legacy statistics have been saved and will reflect on the home page."})},onError:()=>{e({title:"Update Failed",description:"Could not update statistics. Please try again.",variant:"destructive"})}}),l=()=>{o.mutate(n)},c=(d,u)=>{s(h=>({...h,[d]:u}))};return r.jsxs(me,{className:"border-green-200 dark:border-green-900",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"p-2 rounded bg-green-100 dark:bg-green-900/30",children:r.jsx(cd,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),r.jsx(ke,{children:"Portal Statistics"})]}),r.jsx(Ue,{children:"Configure legacy statistics to be added to live system counts on the landing page. Formula: Displayed Count = Legacy Count + Real-time System Count."})]}),r.jsx(ge,{className:"space-y-6",children:a?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"}),"Loading settings..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"stat-total",children:"Total Applications (Base)"}),r.jsx(Pe,{id:"stat-total",type:"number",value:n.total,onChange:d=>c("total",d.target.value)}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Historical applications from previous system"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"stat-approved",children:"Approved (Base)"}),r.jsx(Pe,{id:"stat-approved",type:"number",value:n.approved,onChange:d=>c("approved",d.target.value),className:"border-green-200 focus-visible:ring-green-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"stat-rejected",children:"Rejected (Base)"}),r.jsx(Pe,{id:"stat-rejected",type:"number",value:n.rejected,onChange:d=>c("rejected",d.target.value),className:"border-red-200 focus-visible:ring-red-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"stat-pending",children:"Pending (Base)"}),r.jsx(Pe,{id:"stat-pending",type:"number",value:n.pending,onChange:d=>c("pending",d.target.value),className:"border-orange-200 focus-visible:ring-orange-500"})]})]}),r.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 p-4 rounded-md border border-slate-100 dark:border-slate-800",children:[r.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Preview (Home Page Example)"}),r.jsx("div",{className:"flex gap-8 text-sm",children:r.jsxs("div",{children:[r.jsx("span",{className:"text-muted-foreground",children:"Total:"}),r.jsx("span",{className:"ml-2 font-mono font-bold",children:(parseInt(n.total)||0)+124}),r.jsx("span",{className:"text-xs text-muted-foreground ml-1",children:"(Legacy + 124 live)"})]})})]}),r.jsx(te,{onClick:l,disabled:o.isPending,className:"w-full sm:w-auto",children:o.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"mr-2 h-4 w-4"})," Save Statistics"]})})]})})]})}function Hlt(){Tr(),ci();const[e,t]=b.useState({open:!1,action:"",confirmText:"",onConfirm:()=>{}}),[n,s]=b.useState("");return r.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:r.jsxs("div",{className:"container mx-auto max-w-4xl space-y-8",children:[r.jsxs("div",{children:[r.jsx(Co,{href:"/admin/console",children:r.jsxs(te,{variant:"ghost",className:"mb-4 pl-0 hover:pl-2 transition-all",children:[r.jsx(Es,{className:"mr-2 h-4 w-4"})," Back to Console"]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-red-500/10",children:r.jsx(Gi,{className:"h-6 w-6 text-red-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"System Controls"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Critical system operations requiring confirmation"})]})]}),r.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-900 rounded-lg",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(jn,{className:"h-5 w-5 text-red-500 mt-0.5"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-red-700 dark:text-red-400",children:"Critical Operations Area"}),r.jsx("p",{className:"text-sm text-red-600 dark:text-red-300",children:"Changes here affect all users immediately. Each action requires typing a confirmation phrase."})]})]})})]}),r.jsx(Wlt,{onConfirmRequired:(i,a,o)=>{t({open:!0,action:i,confirmText:a,onConfirm:o}),s("")}}),r.jsx(Klt,{onConfirmRequired:(i,a,o)=>{t({open:!0,action:i,confirmText:a,onConfirm:o}),s("")}}),r.jsx(us,{open:e.open,onOpenChange:i=>t(a=>({...a,open:i})),children:r.jsxs(Jn,{className:"sm:max-w-md",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2",children:[r.jsx(su,{className:"h-5 w-5 text-orange-500"}),"Confirm Critical Action"]}),r.jsxs(Ns,{children:["You are about to: ",r.jsx("strong",{children:e.action})]})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("p",{className:"text-sm text-muted-foreground",children:["To confirm, type ",r.jsx("code",{className:"bg-slate-100 dark:bg-slate-800 px-2 py-1 rounded font-mono text-red-600",children:e.confirmText})," below:"]}),r.jsx(Pe,{value:n,onChange:i=>s(i.target.value),placeholder:"Type confirmation text...",className:"font-mono",autoFocus:!0})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>t(i=>({...i,open:!1})),children:"Cancel"}),r.jsx(te,{variant:"destructive",disabled:n!==e.confirmText,onClick:()=>{e.onConfirm(),t(i=>({...i,open:!1}))},children:"Confirm"})]})]})})]})})}function Wlt({onConfirmRequired:e}){const{toast:t}=Tr(),n=ci(),[s,i]=b.useState("Payment process is being updated"),[a,o]=b.useState(""),{data:l,isLoading:c}=rt({queryKey:["/api/settings/payment-pipeline-pause"]});b.useEffect(()=>{l&&(i(l.messageType),o(l.customMessage||""))},[l]);const d=Ot({mutationFn:async m=>{await lt("POST","/api/settings/payment-pipeline-pause",m)},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/settings/payment-pipeline-pause"]}),n.invalidateQueries({queryKey:["/api/settings/public"]}),t({title:"Payment Pipeline Updated",description:l!=null&&l.enabled?"Payments are now ENABLED.":"Payments are now PAUSED."})},onError:()=>{t({title:"Update Failed",description:"Could not update payment pipeline settings.",variant:"destructive"})}}),u=m=>{e(m?"PAUSE PAYMENT PIPELINE":"ENABLE PAYMENT PIPELINE",m?"PAUSE PAYMENTS":"ENABLE PAYMENTS",()=>{d.mutate({enabled:m,messageType:s,customMessage:a})})},h=()=>{l!=null&&l.enabled&&d.mutate({enabled:!0,messageType:s,customMessage:a})},f=(l==null?void 0:l.enabled)||!1;return r.jsxs(me,{className:`border-2 ${f?"border-red-500 bg-red-50/50 dark:bg-red-950/20":"border-green-500"}`,children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_a,{className:`h-5 w-5 ${f?"text-red-500":"text-green-500"}`}),r.jsx(ke,{children:"Payment Pipeline"})]}),r.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium ${f?"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300":"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"}`,children:f?r.jsxs(r.Fragment,{children:[r.jsx(oo,{className:"h-4 w-4"})," PAUSED"]}):r.jsxs(r.Fragment,{children:[r.jsx(kr,{className:"h-4 w-4"})," ACTIVE"]})})]}),r.jsx(Ue,{children:"Control whether users can make payments. When paused, users can still fill applications but cannot submit payment."})]}),r.jsx(ge,{className:"space-y-6",children:c?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"})," Loading..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-white dark:bg-slate-950",children:[r.jsxs("div",{children:[r.jsx(je,{className:"font-semibold",children:f?"Payment Pipeline is PAUSED":"Payment Pipeline is ACTIVE"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:f?"Users cannot make payments. Click to resume.":"Users can make payments normally. Click to pause."})]}),r.jsx(Zn,{checked:f,onCheckedChange:u,disabled:d.isPending,className:f?"data-[state=checked]:bg-red-500":""})]}),f&&(l==null?void 0:l.pausedAt)&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground p-3 bg-slate-100 dark:bg-slate-800 rounded",children:[r.jsx(Vs,{className:"h-4 w-4"}),"Paused at: ",new Date(l.pausedAt).toLocaleString()]}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg border bg-slate-50 dark:bg-slate-900/50",children:[r.jsx(je,{className:"font-semibold",children:"Pause Message (shown to users)"}),r.jsxs(wc,{value:s,onValueChange:m=>i(m),className:"space-y-2",children:[l7.map(m=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:m,id:`payment-${m}`}),r.jsx(je,{htmlFor:`payment-${m}`,className:"cursor-pointer font-normal",children:m})]},m)),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"custom",id:"payment-custom"}),r.jsx(je,{htmlFor:"payment-custom",className:"cursor-pointer font-normal",children:"Custom message"})]})]}),s==="custom"&&r.jsx(Ur,{value:a,onChange:m=>o(m.target.value),placeholder:"Enter custom pause message...",className:"mt-2"}),f&&r.jsxs(te,{onClick:h,disabled:d.isPending,variant:"outline",size:"sm",children:[d.isPending&&r.jsx(vt,{className:"mr-2 h-3 w-3 animate-spin"}),"Update Message"]})]}),r.jsxs("div",{className:"p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-700",children:[r.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Preview (what users will see):"}),r.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-950/30 border border-orange-200 dark:border-orange-800 rounded text-center",children:[r.jsx(jn,{className:"h-8 w-8 text-orange-500 mx-auto mb-2"}),r.jsx("p",{className:"font-medium text-orange-700 dark:text-orange-300",children:s==="custom"&&a.trim()?a:s!=="custom"?s:l7[0]}),r.jsx("p",{className:"text-sm text-orange-600 dark:text-orange-400 mt-1",children:"Please save your application and try again later."})]})]})]})})]})}function Klt({onConfirmRequired:e}){const{toast:t}=Tr(),n=ci(),[s,i]=b.useState(""),[a,o]=b.useState("System Upgrade in Progress"),[l,c]=b.useState(""),{data:d,isLoading:u}=rt({queryKey:["/api/settings/maintenance-mode"]});b.useEffect(()=>{d&&(i(d.accessKey||"launch2026"),o(d.messageType||"System Upgrade in Progress"),c(d.customMessage||""))},[d]);const h=Ot({mutationFn:async g=>{await lt("POST","/api/settings/maintenance-mode",g)},onSuccess:()=>{n.invalidateQueries({queryKey:["/api/settings/maintenance-mode"]}),n.invalidateQueries({queryKey:["/api/settings/public"]}),t({title:"Maintenance Mode Updated",description:"Settings have been saved."})},onError:()=>{t({title:"Update Failed",description:"Could not update maintenance mode.",variant:"destructive"})}}),f=g=>{e(g?"ENABLE MAINTENANCE MODE (Block All Users)":"DISABLE MAINTENANCE MODE",g?"LOCKDOWN":"UNLOCK",()=>{h.mutate({enabled:g,accessKey:s,messageType:a,customMessage:l})})},m=()=>{h.mutate({enabled:(d==null?void 0:d.enabled)||!1,accessKey:s,messageType:a,customMessage:l})},p=(d==null?void 0:d.enabled)||!1;return r.jsxs(me,{className:`border-2 ${p?"border-orange-500 bg-orange-50/50 dark:bg-orange-950/20":"border-slate-200"}`,children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jn,{className:`h-5 w-5 ${p?"text-orange-500":"text-slate-400"}`}),r.jsx(ke,{children:"Maintenance Mode (Full Lockdown)"})]}),p&&r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-700 dark:bg-orange-900/50 dark:text-orange-300",children:[r.jsx(su,{className:"h-4 w-4"})," LOCKED"]})]}),r.jsx(Ue,{children:"When enabled, ALL users are blocked from accessing the site. Only those with the bypass key can enter."})]}),r.jsx(ge,{className:"space-y-6",children:u?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"})," Loading..."]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-white dark:bg-slate-950",children:[r.jsxs("div",{children:[r.jsx(je,{className:"font-semibold",children:p?"Site is LOCKED":"Site is OPEN"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:p?"All public access is blocked.":"Site is accessible to everyone."})]}),r.jsx(Zn,{checked:p,onCheckedChange:f,disabled:h.isPending,className:p?"data-[state=checked]:bg-orange-500":""})]}),r.jsxs("div",{className:"space-y-3 p-4 rounded-lg border bg-slate-50 dark:bg-slate-900/50",children:[r.jsx(je,{className:"font-semibold",children:"Bypass Key (Secret)"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Users can bypass maintenance mode by visiting:"," ",r.jsx("code",{className:"bg-slate-200 dark:bg-slate-800 px-1 py-0.5 rounded",children:"?access_key=YOUR_KEY"})]}),r.jsx(Pe,{value:s,onChange:g=>i(g.target.value),placeholder:"Enter secret bypass key...",className:"max-w-md font-mono"})]}),r.jsxs("div",{className:"space-y-4 p-4 rounded-lg border bg-slate-50 dark:bg-slate-900/50",children:[r.jsx(je,{className:"font-semibold",children:"Maintenance Message"}),r.jsxs(wc,{value:a,onValueChange:g=>o(g),className:"space-y-2",children:[lre.map(g=>r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:g,id:`maint-${g}`}),r.jsx(je,{htmlFor:`maint-${g}`,className:"cursor-pointer font-normal",children:g})]},g)),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"custom",id:"maint-custom"}),r.jsx(je,{htmlFor:"maint-custom",className:"cursor-pointer font-normal",children:"Custom message"})]})]}),a==="custom"&&r.jsx(Ur,{value:l,onChange:g=>c(g.target.value),placeholder:"Enter custom maintenance message...",className:"mt-2"})]}),r.jsxs(te,{onClick:m,disabled:h.isPending,variant:"outline",size:"sm",children:[h.isPending&&r.jsx(vt,{className:"mr-2 h-3 w-3 animate-spin"}),"Update Settings"]})]})})]})}function Glt(){const{toast:e}=Tr();Dr();const[t,n]=b.useState("1"),[s,i]=b.useState(""),[a,o]=b.useState(null),[l,c]=b.useState(!1);b.useEffect(()=>{const f=new URLSearchParams(window.location.search).get("response");if(f)try{const m=atob(f),p={};m.split("&").forEach(g=>{const[v,x]=g.split("=");v&&(p[v]=decodeURIComponent(x||""))}),o(p),window.history.replaceState({},"",window.location.pathname)}catch(m){console.error("Failed to parse callback response",m)}},[]),b.useEffect(()=>{const h=Date.now(),f=Math.random().toString(36).substring(2,8).toUpperCase();i(`TEST-${h}-${f}`)},[]);const d=async()=>{c(!0),o(null);try{const f=await(await fetch("/api/ccavenue/test/config")).json();if(!f.merchantId||!f.accessCode||!f.workingKey)throw new Error("CCAvenue credentials not configured. Please check .env file.");const m={merchant_id:f.merchantId,order_id:s,currency:"INR",amount:t,redirect_url:`${window.location.origin}/api/ccavenue/test/callback?workingKey=${encodeURIComponent(f.workingKey)}&frontendUrl=${encodeURIComponent("/admin/payment-test-kotak")}`,cancel_url:`${window.location.origin}/api/ccavenue/test/callback?workingKey=${encodeURIComponent(f.workingKey)}&frontendUrl=${encodeURIComponent("/admin/payment-test-kotak")}`,language:"EN",billing_name:"Test User",billing_email:"test@hptourism.gov.in",billing_tel:"9876543210",billing_address:"Test Address",billing_city:"Shimla",billing_state:"Himachal Pradesh",billing_zip:"171001",billing_country:"India"},g=await(await lt("POST","/api/ccavenue/test/encrypt",{workingKey:f.workingKey,data:m})).json();if(!g.encRequest)throw new Error("Failed to encrypt payment request");const v=document.createElement("form");v.method="POST",v.action=f.gatewayUrl||"https://test.ccavenue.com/transaction/transaction.do?command=initiateTransaction",v.target="_self";const x=(y,j)=>{const w=document.createElement("input");w.type="hidden",w.name=y,w.value=j,v.appendChild(w)};x("encRequest",g.encRequest),x("access_code",f.accessCode),document.body.appendChild(v),v.submit()}catch(h){c(!1),e({title:"Payment Error",description:h.message||"Failed to initiate payment",variant:"destructive"})}},u=(a==null?void 0:a.order_status)==="Success";return a&&a.order_status,r.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:r.jsxs("div",{className:"container mx-auto max-w-2xl space-y-6",children:[r.jsxs("div",{children:[r.jsx(Co,{href:"/admin/console",children:r.jsxs(te,{variant:"ghost",className:"mb-4 pl-0 hover:pl-2 transition-all",children:[r.jsx(Es,{className:"mr-2 h-4 w-4"})," Back to Console"]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-red-500 to-orange-500",children:r.jsx(_a,{className:"h-6 w-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Kotak Mahindra Test Payment"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"CCAvenue Gateway Integration Test"})]})]})]}),a&&r.jsxs(me,{className:u?"border-green-500 bg-green-50 dark:bg-green-950/20":"border-red-500 bg-red-50 dark:bg-red-950/20",children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[u?r.jsx(kr,{className:"h-6 w-6 text-green-600"}):r.jsx(oo,{className:"h-6 w-6 text-red-600"}),r.jsx(ke,{className:u?"text-green-700":"text-red-700",children:u?"Payment Successful!":"Payment Failed"})]})}),r.jsxs(ge,{children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[r.jsx("div",{className:"font-medium",children:"Order ID:"}),r.jsx("div",{children:a.order_id}),r.jsx("div",{className:"font-medium",children:"Amount:"}),r.jsxs("div",{children:["",a.amount||a.mer_amount]}),r.jsx("div",{className:"font-medium",children:"Status:"}),r.jsx("div",{children:a.order_status}),a.tracking_id&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-medium",children:"Tracking ID:"}),r.jsx("div",{children:a.tracking_id})]}),a.bank_ref_no&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-medium",children:"Bank Ref:"}),r.jsx("div",{children:a.bank_ref_no})]}),a.payment_mode&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-medium",children:"Payment Mode:"}),r.jsx("div",{children:a.payment_mode})]}),a.status_message&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"font-medium",children:"Message:"}),r.jsx("div",{className:"col-span-1",children:a.status_message})]})]}),r.jsx(te,{variant:"outline",className:"mt-4",onClick:()=>{o(null),i(`TEST-${Date.now()}-${Math.random().toString(36).substring(2,8).toUpperCase()}`)},children:"Start New Test"})]})]}),!a&&r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Test Payment"}),r.jsx(Ue,{children:"Initiate a test payment through the CCAvenue (Kotak Mahindra) gateway. Use the test card credentials provided by CCAvenue."})]}),r.jsxs(ge,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{children:"Order ID"}),r.jsx(Pe,{value:s,readOnly:!0,className:"font-mono bg-slate-100"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(je,{children:"Test Amount"}),r.jsxs(wc,{value:t,onValueChange:n,className:"flex gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"1",id:"amt-1"}),r.jsx(je,{htmlFor:"amt-1",className:"cursor-pointer",children:"1"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"10",id:"amt-10"}),r.jsx(je,{htmlFor:"amt-10",className:"cursor-pointer",children:"10"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"100",id:"amt-100"}),r.jsx(je,{htmlFor:"amt-100",className:"cursor-pointer",children:"100"})]})]})]}),r.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-amber-800 dark:text-amber-200 mb-2",children:"CCAvenue Test Card Details"}),r.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300 space-y-1 font-mono",children:[r.jsx("div",{children:"Card Number: 4111 1111 1111 1111"}),r.jsx("div",{children:"Expiry: Any future date"}),r.jsx("div",{children:"CVV: 123"})]})]}),r.jsx(te,{onClick:d,disabled:l,className:"w-full bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700",size:"lg",children:l?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-5 w-5 animate-spin"}),"Redirecting to CCAvenue..."]}):r.jsxs(r.Fragment,{children:[r.jsx(_a,{className:"mr-2 h-5 w-5"}),"Pay ",t," via Kotak Mahindra"]})})]})]}),r.jsx(me,{className:"bg-slate-100 dark:bg-slate-900",children:r.jsxs(ge,{className:"pt-6",children:[r.jsx("h4",{className:"font-medium mb-2",children:"How it works"}),r.jsxs("ol",{className:"text-sm text-muted-foreground space-y-1 list-decimal list-inside",children:[r.jsx("li",{children:"Select the test amount"}),r.jsx("li",{children:'Click "Pay" to redirect to CCAvenue payment page'}),r.jsx("li",{children:"Enter test card details on CCAvenue"}),r.jsx("li",{children:"Complete payment and return to see the result"})]})]})})]})})}function Ylt(){var d,u,h,f,m;const{toast:e}=Tr(),t=ci(),[n,s]=b.useState(null),{data:i,isLoading:a}=rt({queryKey:["/api/admin/seed/status"]}),o=Ot({mutationFn:async()=>(await lt("POST","/api/admin/seed/da-accounts")).json(),onSuccess:p=>{s({type:"DA",data:p}),t.invalidateQueries({queryKey:["/api/admin/seed/status"]}),e({title:"DA Accounts Seeded",description:`Created: ${p.created}, Existing: ${p.exists}, Errors: ${p.errors}`})},onError:()=>{e({title:"Failed to seed DA accounts",variant:"destructive"})}}),l=Ot({mutationFn:async()=>(await lt("POST","/api/admin/seed/dtdo-accounts")).json(),onSuccess:p=>{s({type:"DTDO",data:p}),t.invalidateQueries({queryKey:["/api/admin/seed/status"]}),e({title:"DTDO Accounts Seeded",description:`Created: ${p.created}, Existing: ${p.exists}, Errors: ${p.errors}`})},onError:()=>{e({title:"Failed to seed DTDO accounts",variant:"destructive"})}}),c=Ot({mutationFn:async()=>(await lt("POST","/api/admin/seed/system-accounts")).json(),onSuccess:p=>{s({type:"System",data:p}),t.invalidateQueries({queryKey:["/api/admin/seed/status"]}),e({title:"System Accounts Seeded",description:`Created: ${p.created}, Existing: ${p.exists}, Errors: ${p.errors}`})},onError:()=>{e({title:"Failed to seed system accounts",variant:"destructive"})}});return r.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 p-6",children:r.jsxs("div",{className:"container mx-auto max-w-4xl space-y-8",children:[r.jsxs("div",{children:[r.jsx(Co,{href:"/admin/console",children:r.jsxs(te,{variant:"ghost",className:"mb-4 pl-0 hover:pl-2 transition-all",children:[r.jsx(Es,{className:"mr-2 h-4 w-4"})," Back to Console"]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:r.jsx(gm,{className:"h-6 w-6 text-primary"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Seed Tools"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Deploy staff accounts and system configuration"})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Current Seed Status"}),r.jsx(Ue,{children:"Overview of seeded accounts"})]}),r.jsx(ge,{children:a?r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[r.jsx(vt,{className:"h-4 w-4 animate-spin"})," Loading status..."]}):r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-lg bg-blue-50 dark:bg-blue-950/30 text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[((d=i==null?void 0:i.da)==null?void 0:d.seeded)??0,"/",((u=i==null?void 0:i.da)==null?void 0:u.total)??12]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"DA Accounts"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-green-50 dark:bg-green-950/30 text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[((h=i==null?void 0:i.dtdo)==null?void 0:h.seeded)??0,"/",((f=i==null?void 0:i.dtdo)==null?void 0:f.total)??12]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"DTDO Accounts"})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-purple-50 dark:bg-purple-950/30 text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[((m=i==null?void 0:i.systemAccounts)==null?void 0:m.length)??0,"/3"]}),r.jsx("div",{className:"text-sm text-muted-foreground",children:"System Accounts"})]})]})})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[r.jsxs(me,{className:"border-blue-200 dark:border-blue-900",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5 text-blue-600"}),r.jsx(ke,{className:"text-lg",children:"Dealing Assistants"})]}),r.jsx(Ue,{children:"Creates 12 DA accounts (one per district)"})]}),r.jsx(ge,{children:r.jsx(te,{onClick:()=>o.mutate(),disabled:o.isPending,className:"w-full",variant:"outline",children:o.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Seeding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gm,{className:"mr-2 h-4 w-4"})," Seed DA Accounts"]})})})]}),r.jsxs(me,{className:"border-green-200 dark:border-green-900",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Do,{className:"h-5 w-5 text-green-600"}),r.jsx(ke,{className:"text-lg",children:"District Tourism Officers"})]}),r.jsx(Ue,{children:"Creates 12 DTDO accounts (one per district)"})]}),r.jsx(ge,{children:r.jsx(te,{onClick:()=>l.mutate(),disabled:l.isPending,className:"w-full",variant:"outline",children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Seeding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gm,{className:"mr-2 h-4 w-4"})," Seed DTDO Accounts"]})})})]}),r.jsxs(me,{className:"border-purple-200 dark:border-purple-900",children:[r.jsxs(Ce,{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"h-5 w-5 text-purple-600"}),r.jsx(ke,{className:"text-lg",children:"System Accounts"})]}),r.jsx(Ue,{children:"Creates superadmin, sysadmin, supervisor_hq"})]}),r.jsx(ge,{children:r.jsx(te,{onClick:()=>c.mutate(),disabled:c.isPending,className:"w-full",variant:"outline",children:c.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"})," Seeding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(gm,{className:"mr-2 h-4 w-4"})," Seed System Accounts"]})})})]})]}),n&&r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{children:["Last Seed Results: ",n.type]}),r.jsxs(Ue,{children:["Default password for created accounts: ",r.jsx("code",{className:"bg-slate-200 dark:bg-slate-800 px-2 py-1 rounded",children:n.data.defaultPassword})]})]}),r.jsx(ge,{children:r.jsx("div",{className:"space-y-2",children:n.data.results.map(p=>r.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[r.jsx("span",{className:"font-mono text-sm",children:p.username}),p.status==="created"&&r.jsxs(ze,{className:"bg-green-100 text-green-700",children:[r.jsx(Qd,{className:"mr-1 h-3 w-3"})," Created"]}),p.status==="exists"&&r.jsxs(ze,{variant:"secondary",children:[r.jsx(Kr,{className:"mr-1 h-3 w-3"})," Already Exists"]}),p.status==="error"&&r.jsxs(ze,{variant:"destructive",children:[r.jsx(sh,{className:"mr-1 h-3 w-3"})," Error"]})]},p.username))})})]})]})})}const Sx=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),vP=e=>`"${String(e??"").replace(/"/g,'""')}"`;function Xlt(){const{toast:e}=Tr(),[t,n]=b.useState("collections"),[s,i]=b.useState(""),[a,o]=b.useState(""),[l,c]=b.useState("all"),d=cw(),[u,h]=b.useState(new Set),{data:f}=rt({queryKey:["/api/auth/me"],queryFn:async()=>(await lt("GET","/api/auth/me")).json()}),m=f==null?void 0:f.user,p=(m==null?void 0:m.role)==="district_tourism_officer"||(m==null?void 0:m.role)==="district_officer",g=m==null?void 0:m.district,v=!p,x=p&&g?[g]:d;b.useEffect(()=>{p&&g&&l==="all"&&c(g)},[p,g,l]);const{data:y,isLoading:j}=rt({queryKey:["reports-summary",l],queryFn:async()=>{const M=new URLSearchParams;return l&&l!=="all"&&M.set("district",l),(await lt("GET",`/api/admin/reports/summary?${M.toString()}`)).json()}}),{data:w,isLoading:N}=rt({queryKey:["reports-collections",s,a,l],queryFn:async()=>{const M=new URLSearchParams;return s&&M.set("from",s),a&&M.set("to",a),l&&l!=="all"&&M.set("district",l),(await lt("GET",`/api/admin/reports/collections?${M.toString()}`)).json()}}),{data:S,isLoading:T}=rt({queryKey:["reports-payments",s,a,l],queryFn:async()=>{const M=new URLSearchParams;return s&&M.set("from",s),a&&M.set("to",a),l&&l!=="all"&&M.set("district",l),M.set("limit","50"),(await lt("GET",`/api/admin/reports/payments?${M.toString()}`)).json()}}),{data:C,isLoading:A}=rt({queryKey:["reports-refundable",l],queryFn:async()=>{const M=new URLSearchParams;return l&&l!=="all"&&M.set("district",l),(await lt("GET",`/api/admin/reports/refundable?${M.toString()}`)).json()}}),R=()=>{if(!(w!=null&&w.collections.length))return;const M=["DDO Code","District","Description","Treasury","Total Txns","Successful","Total Amount"],L=w.collections.map(F=>[F.ddo,F.district,F.ddoDescription,F.treasuryCode,F.totalTransactions,F.successfulTransactions,F.totalAmount]),V=[M,...L].map(F=>F.map(W=>vP(W)).join(",")).join(`
`),P=new Blob([V],{type:"text/csv;charset=utf-8;"}),z=window.URL.createObjectURL(P),Z=document.createElement("a");Z.href=z,Z.download=`collections-report-${sr(new Date,"yyyy-MM-dd")}.csv`,Z.click(),window.URL.revokeObjectURL(z),e({title:"Exported",description:"Collections report downloaded."})},k=()=>{if(!(S!=null&&S.payments.length))return;const M=["App Ref","Dept Ref","DDO","Amount","GRN","Bank CIN","Bank","Payee","Date"],L=S.payments.map(F=>[F.appRefNo,F.deptRefNo,F.ddo,F.totalAmount,F.echTxnId,F.bankCIN,F.bankName,F.tenderBy,F.createdAt?sr(new Date(F.createdAt),"yyyy-MM-dd HH:mm"):""]),V=[M,...L].map(F=>F.map(W=>vP(W)).join(",")).join(`
`),P=new Blob([V],{type:"text/csv;charset=utf-8;"}),z=window.URL.createObjectURL(P),Z=document.createElement("a");Z.href=z,Z.download=`payments-report-${sr(new Date,"yyyy-MM-dd")}.csv`,Z.click(),window.URL.revokeObjectURL(z),e({title:"Exported",description:"Payments report downloaded."})},O=M=>{const L=new Set(u);L.has(M)?L.delete(M):L.add(M),h(L)},$=()=>{C!=null&&C.refundable&&(u.size===C.refundable.length?h(new Set):h(new Set(C.refundable.map(M=>M.transactionId))))},D=()=>{if(!(C!=null&&C.refundable.length)||u.size===0){e({title:"No Selection",description:"Please select at least one record to export.",variant:"destructive"});return}const M=C.refundable.filter(W=>u.has(W.transactionId)),L=["App Ref","Dept Ref","DDO","Amount","GRN","Bank CIN","Payee","Payment Date","District","Status"],V=M.map(W=>[W.appRefNo,W.deptRefNo,W.ddo,W.totalAmount,W.echTxnId,W.bankCIN,W.tenderBy,W.paymentDate?sr(new Date(W.paymentDate),"yyyy-MM-dd HH:mm"):"",W.district,"Refund Pending"]),P=[L,...V].map(W=>W.map(G=>vP(G)).join(",")).join(`
`),z=new Blob([P],{type:"text/csv;charset=utf-8;"}),Z=window.URL.createObjectURL(z),F=document.createElement("a");F.href=Z,F.download=`refund-mis-report-${sr(new Date,"yyyy-MM-dd")}.csv`,F.click(),window.URL.revokeObjectURL(Z),e({title:"Exported",description:`Exported ${M.length} records for MIS.`})},q=M=>{const L=new Date;let V;M==="thisMonth"?V=sl(L):M==="last7"?V=gv(L,7):V=gv(L,30),i(sr(V,"yyyy-MM-dd")),o(sr(L,"yyyy-MM-dd"))};return r.jsxs("div",{className:"container mx-auto max-w-7xl py-6 space-y-6",children:[r.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(i8,{className:"h-8 w-8 text-primary"}),"Payment Reports"]}),r.jsx("p",{className:"text-muted-foreground",children:y!=null&&y.district?`Showing data for ${y.district} district`:"State-wide collection and payment analytics"})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsx(me,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-80",children:"Total Collected"}),r.jsx("p",{className:"text-2xl font-bold",children:j?r.jsx(Lr,{className:"h-8 w-24 bg-white/20"}):Sx((y==null?void 0:y.totalCollected)||0)})]}),r.jsx($m,{className:"h-10 w-10 opacity-50"})]})})}),r.jsx(me,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-80",children:"Successful"}),r.jsx("p",{className:"text-2xl font-bold",children:j?r.jsx(Lr,{className:"h-8 w-16 bg-white/20"}):(y==null?void 0:y.successfulTransactions)||0})]}),r.jsx(cd,{className:"h-10 w-10 opacity-50"})]})})}),r.jsx(me,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-80",children:"Failed"}),r.jsx("p",{className:"text-2xl font-bold",children:j?r.jsx(Lr,{className:"h-8 w-16 bg-white/20"}):(y==null?void 0:y.failedTransactions)||0})]}),r.jsx(jn,{className:"h-10 w-10 opacity-50"})]})})}),r.jsx(me,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm opacity-80",children:"Total Transactions"}),r.jsx("p",{className:"text-2xl font-bold",children:j?r.jsx(Lr,{className:"h-8 w-16 bg-white/20"}):(y==null?void 0:y.totalTransactions)||0})]}),r.jsx(Cl,{className:"h-10 w-10 opacity-50"})]})})})]}),r.jsx(me,{children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[r.jsxs("div",{className:"flex-1 min-w-[200px]",children:[r.jsxs("label",{className:"text-sm font-medium mb-1 block",children:["District ",p&&r.jsx("span",{className:"text-muted-foreground text-xs",children:"(Your district)"})]}),r.jsxs(pr,{value:l,onValueChange:c,disabled:p,children:[r.jsx(ur,{className:p?"bg-muted":"",children:r.jsx(yr,{placeholder:"Select District"})}),r.jsxs(hr,{children:[v&&r.jsx(it,{value:"all",children:"All Districts"}),x.map(M=>r.jsx(it,{value:M,children:M},M))]})]})]}),r.jsxs("div",{className:"flex-1 min-w-[150px]",children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"From Date"}),r.jsx(Pe,{type:"date",value:s,onChange:M=>i(M.target.value)})]}),r.jsxs("div",{className:"flex-1 min-w-[150px]",children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"To Date"}),r.jsx(Pe,{type:"date",value:a,onChange:M=>o(M.target.value)})]}),r.jsxs("div",{className:"flex gap-2 pb-0.5",children:[r.jsx(te,{variant:"outline",size:"sm",onClick:()=>q("thisMonth"),children:"This Month"}),r.jsx(te,{variant:"outline",size:"sm",onClick:()=>q("last7"),children:"Last 7 Days"}),r.jsx(te,{variant:"outline",size:"sm",onClick:()=>q("last30"),children:"Last 30 Days"})]}),r.jsx(te,{variant:"outline",onClick:()=>{i(""),o(""),v&&c("all")},children:"Clear Filters"})]})})}),r.jsxs(aa,{value:t,onValueChange:n,children:[r.jsxs(Qi,{className:"grid w-full grid-cols-3",children:[r.jsx(Pr,{value:"collections",children:"Collection by DDO"}),r.jsx(Pr,{value:"payments",children:"Approved Payments"}),r.jsx(Pr,{value:"refundable",children:"Refundable"})]}),r.jsx(Rr,{value:"collections",children:r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:"Collection by District/DDO"}),r.jsx(Ue,{children:"Revenue collected per treasury DDO code"})]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:R,disabled:!(w!=null&&w.collections.length),className:"gap-2",children:[r.jsx(ds,{className:"h-4 w-4"}),"Export CSV"]})]}),r.jsx(ge,{children:N?r.jsxs("div",{className:"space-y-2",children:[r.jsx(Lr,{className:"h-10 w-full"}),r.jsx(Lr,{className:"h-10 w-full"}),r.jsx(Lr,{className:"h-10 w-full"})]}):w!=null&&w.collections.length?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"DDO Code"}),r.jsx(Mt,{children:"District"}),r.jsx(Mt,{children:"Description"}),r.jsx(Mt,{className:"text-right",children:"Transactions"}),r.jsx(Mt,{className:"text-right",children:"Successful"}),r.jsx(Mt,{className:"text-right",children:"Amount"})]})}),r.jsx(Oo,{children:w.collections.map((M,L)=>r.jsxs(In,{children:[r.jsx(Rt,{className:"font-mono",children:M.ddo||""}),r.jsx(Rt,{children:M.district||""}),r.jsx(Rt,{className:"max-w-xs truncate",children:M.ddoDescription||""}),r.jsx(Rt,{className:"text-right",children:M.totalTransactions}),r.jsx(Rt,{className:"text-right",children:r.jsx(ze,{variant:"outline",className:"bg-green-50 text-green-700",children:M.successfulTransactions})}),r.jsx(Rt,{className:"text-right font-semibold",children:Sx(M.totalAmount)})]},L))})]})}),r.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg flex justify-between items-center",children:[r.jsx("span",{className:"font-medium",children:"Grand Total"}),r.jsx("span",{className:"text-xl font-bold text-primary",children:Sx(w.totals.totalAmount)})]})]}):r.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No collection data available"})})]})}),r.jsx(Rr,{value:"payments",children:r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:"Approved Payments"}),r.jsx(Ue,{children:"All successful HimKosh transactions"})]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:k,disabled:!(S!=null&&S.payments.length),className:"gap-2",children:[r.jsx(ds,{className:"h-4 w-4"}),"Export CSV"]})]}),r.jsx(ge,{children:T?r.jsxs("div",{className:"space-y-2",children:[r.jsx(Lr,{className:"h-10 w-full"}),r.jsx(Lr,{className:"h-10 w-full"}),r.jsx(Lr,{className:"h-10 w-full"})]}):S!=null&&S.payments.length?r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Date"}),r.jsx(Mt,{children:"Application"}),r.jsx(Mt,{children:"DDO"}),r.jsx(Mt,{children:"Payee"}),r.jsx(Mt,{children:"GRN"}),r.jsx(Mt,{children:"Bank"}),r.jsx(Mt,{className:"text-right",children:"Amount"})]})}),r.jsx(Oo,{children:S.payments.map(M=>r.jsxs(In,{children:[r.jsx(Rt,{className:"whitespace-nowrap",children:M.createdAt?sr(new Date(M.createdAt),"dd MMM yyyy"):""}),r.jsx(Rt,{className:"font-mono text-xs",children:M.deptRefNo}),r.jsx(Rt,{className:"font-mono",children:M.ddo}),r.jsx(Rt,{children:M.tenderBy}),r.jsx(Rt,{className:"font-mono",children:M.echTxnId}),r.jsx(Rt,{children:M.bankName}),r.jsx(Rt,{className:"text-right font-semibold",children:Sx(M.totalAmount)})]},M.id))})]})}):r.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No payment data available"})})]})}),r.jsx(Rr,{value:"refundable",children:r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(jn,{className:"h-5 w-5 text-orange-500"}),"Refundable Payments"]}),r.jsx(Ue,{children:"Payments for rejected applications that may require refund"})]}),r.jsx("div",{className:"flex gap-2",children:u.size>0&&r.jsxs(te,{variant:"default",size:"sm",onClick:D,className:"gap-2 bg-green-600 hover:bg-green-700",children:[r.jsx(i8,{className:"h-4 w-4"}),"Export MIS Report (",u.size,")"]})})]}),r.jsx(ge,{children:A?r.jsxs("div",{className:"space-y-2",children:[r.jsx(Lr,{className:"h-10 w-full"}),r.jsx(Lr,{className:"h-10 w-full"})]}):C!=null&&C.refundable.length?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border border-orange-200 rounded-lg flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"font-medium text-orange-800",children:[C.summary.count," payments pending refund"]}),r.jsx("p",{className:"text-sm text-orange-600",children:"Select records to generate MIS report for DTDO"})]}),r.jsx("span",{className:"text-xl font-bold text-orange-700",children:Sx(C.summary.totalAmount)})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{className:"w-[50px]",children:r.jsx(Zs,{checked:C.refundable.length>0&&u.size===C.refundable.length,onCheckedChange:$})}),r.jsx(Mt,{children:"Application"}),r.jsx(Mt,{children:"Owner"}),r.jsx(Mt,{children:"District"}),r.jsx(Mt,{children:"GRN"}),r.jsx(Mt,{children:"Payment Date"}),r.jsx(Mt,{className:"text-right",children:"Amount"})]})}),r.jsx(Oo,{children:C.refundable.map(M=>r.jsxs(In,{children:[r.jsx(Rt,{children:r.jsx(Zs,{checked:u.has(M.transactionId),onCheckedChange:()=>O(M.transactionId)})}),r.jsxs(Rt,{children:[r.jsx("div",{className:"font-semibold",children:M.applicationNumber}),r.jsx("p",{className:"text-xs text-muted-foreground",children:M.propertyName})]}),r.jsx(Rt,{children:M.ownerName}),r.jsx(Rt,{children:M.district}),r.jsx(Rt,{className:"font-mono",children:M.echTxnId}),r.jsx(Rt,{children:M.paymentDate?sr(new Date(M.paymentDate),"dd MMM yyyy"):""}),r.jsx(Rt,{className:"text-right font-semibold text-orange-600",children:Sx(M.totalAmount)})]},M.transactionId))})]})})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(D3,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-muted-foreground",children:"No refundable payments found"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This is good! No applications were rejected after payment."})]})})]})})]})]})}const Qq=new Set(["legacy_rc_review"]),Qlt=e=>e?typeof e.legacyOnboarding=="boolean"?e.legacyOnboarding:typeof e.legacyGuardianName=="string"&&e.legacyGuardianName.trim().length>0:!1,Nw=e=>{if(!e)return!1;if(Qq.has(e.status??"")||Qq.has(e.currentStage??""))return!0;const t=e.serviceContext;return!!(Qlt(t)||e.applicationKind==="renewal"&&e.projectType==="existing_property")},Zq={diamond:{color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-50 dark:bg-blue-950/20"},gold:{color:"text-yellow-600 dark:text-yellow-400",bg:"bg-yellow-50 dark:bg-yellow-950/20"},silver:{color:"text-gray-600 dark:text-gray-400",bg:"bg-gray-50 dark:bg-gray-950/20"}},Zlt={submitted:{label:"Submitted",bg:"bg-blue-50 dark:bg-blue-950/20"},under_scrutiny:{label:"Under Scrutiny",bg:"bg-orange-50 dark:bg-orange-950/20"},forwarded_to_dtdo:{label:"Forwarded to DTDO",bg:"bg-green-50 dark:bg-green-950/20"},reverted_to_applicant:{label:"Sent Back",bg:"bg-red-50 dark:bg-red-950/20"},reverted_by_dtdo:{label:"DTDO Reverted",bg:"bg-rose-50 dark:bg-rose-950/20"},objection_raised:{label:"DTDO Objection",bg:"bg-rose-50 dark:bg-rose-950/20"},dtdo_review:{label:"DTDO Review",bg:"bg-purple-50 dark:bg-purple-950/20"},inspection_scheduled:{label:"Inspection Scheduled",bg:"bg-indigo-50 dark:bg-indigo-950/20"},inspection_under_review:{label:"Inspection Review",bg:"bg-yellow-50 dark:bg-yellow-950/20"},approved:{label:"Approved",bg:"bg-emerald-50 dark:bg-emerald-950/20"},rejected:{label:"Rejected",bg:"bg-rose-50 dark:bg-rose-950/20"},draft:{label:"Draft",bg:"bg-slate-50 dark:bg-slate-900/40"}},Jlt=e=>{const t=(e||"silver").toLowerCase(),n=Zq[t]||Zq.silver;return r.jsx(ze,{variant:"outline",className:`${n.bg} capitalize`,children:e||"silver"})},ect=e=>{if(!e)return r.jsx(ze,{variant:"outline",children:"Pending"});const t=Zlt[e]||{label:e.replace(/_/g," "),bg:"bg-muted/40"};return r.jsx(ze,{variant:"outline",className:t.bg,children:t.label})},tct=e=>{var s,i;if(!mf(e.status))return null;const t=!!((s=e.latestCorrection)!=null&&s.createdAt),n=t&&((i=e.latestCorrection)!=null&&i.createdAt)?ap(new Date(e.latestCorrection.createdAt),{addSuffix:!0}):null;return{label:t?"Owner resubmitted":"Waiting on owner",className:t?"bg-emerald-50 text-emerald-700 dark:bg-emerald-950/30":"bg-amber-50 text-amber-700 dark:bg-amber-950/30",relative:n}};function eI({application:e,actionLabel:t,applicationIds:n,hideAction:s,baseUrl:i="/da/applications"}){var m;const a=e.applicationKind;!!((m=e==null?void 0:e.serviceContext)!=null&&m.legacyOnboarding)||FT(a);const[,l]=Dr(),c=b.useMemo(()=>encodeURIComponent(n.join(",")),[n]),d=`${i}/${e.id}?queue=${c}`,u=tct(e),h=()=>{l(d)},f=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),h())};return r.jsx("div",{className:"px-4 py-3 border-b border-border hover:bg-muted/30 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-inset cursor-pointer transition-colors",tabIndex:0,role:"button",onClick:h,onKeyDown:f,children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:r.jsx(Ba,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-semibold",children:e.propertyName||"Untitled Homestay"}),Jlt(e.category),ect(e.status),u&&r.jsx(ze,{className:`${u.className} border text-[10px] px-1.5 py-0`,children:u.label})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(li,{className:"w-3 h-3"}),e.ownerName]}),r.jsxs("span",{className:"hidden sm:flex items-center gap-1",children:[r.jsx(Kg,{className:"w-3 h-3"}),e.ownerMobile]}),r.jsxs("span",{className:"hidden md:flex items-center gap-1",children:[r.jsx(Js,{className:"w-3 h-3"}),e.district]}),r.jsxs("span",{className:"hidden lg:flex items-center gap-1",children:[r.jsx(Al,{className:"w-3 h-3"}),e.submittedAt?sr(new Date(e.submittedAt),"MMM dd, yyyy"):""]})]})]})]}),!s&&r.jsxs(te,{size:"sm","data-testid":`button-review-${e.id}`,className:"flex-shrink-0",onClick:p=>{p.stopPropagation(),h()},children:[t||"Start scrutiny",r.jsx(sa,{className:"w-4 h-4 ml-1"})]})]})})}const rct=e=>{if(!e)return!1;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?!1:a6(t)};function nct(){var xe;const[e,t]=b.useState("new-queue"),[n,s]=b.useState("new-queue-new"),[i,a]=b.useState("newest"),[o,l]=b.useState("month"),[c,d]=b.useState("all"),u=ci(),[,h]=Dr(),f=()=>{u.invalidateQueries({queryKey:["/api/da/applications"]}),u.invalidateQueries({queryKey:["/api/auth/me"]}),u.invalidateQueries({queryKey:["/api/da/inspections"]})},m=b.useCallback(()=>{h("/da/inspections")},[h]),{data:p,isLoading:g}=rt({queryKey:["/api/da/applications"]}),v=(p??[]).filter(ae=>!Nw(ae)),x=new Set(["sent_back_for_corrections","reverted_to_applicant","reverted_by_dtdo","objection_raised"]),y=ae=>{var we;return(mf(ae.status)||ae.status==="dtdo_review"||ae.status==="forwarded_to_dtdo")&&!!((we=ae.latestCorrection)!=null&&we.createdAt||(ae.correctionSubmissionCount??0)>0)},j=ae=>x.has(ae.status||"")||y(ae),w=b.useCallback(ae=>{const we=ae.updatedAt??ae.submittedAt??ae.createdAt;return we?new Date(we).getTime():0},[]),N=b.useCallback(ae=>[...ae].sort((we,Te)=>{const qe=w(we)-w(Te);return i==="newest"?-qe:qe}),[w,i]),{data:S}=rt({queryKey:["/api/auth/me"]}),{data:T}=rt({queryKey:["/api/da/inspections"]}),C=b.useMemo(()=>v.filter(ae=>ae.status==="submitted"),[v]),A=b.useMemo(()=>v.filter(ae=>ae.status==="under_scrutiny"&&!j(ae)),[v]),R=b.useMemo(()=>v.filter(ae=>ae.status==="forwarded_to_dtdo"),[v]),k=b.useMemo(()=>v.filter(ae=>j(ae)),[v]),O=b.useMemo(()=>k.filter(ae=>!y(ae)),[k]),$=b.useMemo(()=>k.filter(ae=>y(ae)),[k]),D=b.useMemo(()=>N(A),[A,N]),q=b.useMemo(()=>N(R),[R,N]),M=b.useMemo(()=>N(O),[O,N]),L=b.useMemo(()=>N($),[$,N]),V=b.useMemo(()=>{const ae=new Set;return(T??[]).filter(we=>{const Te=we.applicationId||we.id;return ae.has(Te)?!1:(ae.add(Te),!we.reportSubmitted)})},[T]),P=b.useMemo(()=>{const ae=new Set,we=["approved","rejected","superseded","certificate_cancelled","certificate_issued"];return(T??[]).filter(Te=>{var Ge,He;const qe=Te.applicationId||Te.id;if(ae.has(qe))return!1;ae.add(qe);const Ke=((He=(Ge=Te.application)==null?void 0:Ge.status)==null?void 0:He.toLowerCase())||"";return Te.reportSubmitted&&!we.includes(Ke)})},[T]),z=b.useMemo(()=>P.filter(ae=>rct(ae.updatedAt||ae.inspectionDate||null)),[P]),Z=b.useCallback(ae=>{const we=ae.applicationKind||ae.application_kind,Te=(we==null?void 0:we.toLowerCase())||"";return Te==="cancel_certificate"||Te.includes("modification")},[]),F=b.useCallback(ae=>{const we=ae.applicationKind||ae.application_kind,Te=(we==null?void 0:we.toLowerCase())||"";return Te==="add_rooms"||Te==="delete_rooms"||Te==="change_category"?!0:Te.includes("amend")||Te.includes("add_room")||Te.includes("delete_room")},[]),W=b.useCallback(ae=>{const we=ae.applicationKind||ae.application_kind,Te=(we==null?void 0:we.toLowerCase())||"";return Te==="add_rooms"||Te.includes("add_room")},[]),G=b.useCallback(ae=>{const we=ae.applicationKind||ae.application_kind,Te=(we==null?void 0:we.toLowerCase())||"";return Te==="delete_rooms"||Te.includes("delete_room")},[]),H=b.useCallback(ae=>{const we=ae.applicationKind||ae.application_kind,Te=(we==null?void 0:we.toLowerCase())||"";return Te==="change_category"||Te.includes("upgrade")},[]),se=b.useMemo(()=>N(C.filter(ae=>!Z(ae)&&!F(ae))),[C,N,Z,F]),J=b.useMemo(()=>N(C.filter(ae=>F(ae))),[C,N,F]),ie=b.useMemo(()=>N(C.filter(ae=>W(ae))),[C,N,W]),X=b.useMemo(()=>N(C.filter(ae=>G(ae))),[C,N,G]),he=b.useMemo(()=>N(C.filter(ae=>H(ae))),[C,N,H]),fe=b.useMemo(()=>N(C.filter(ae=>Z(ae))),[C,N,Z]),Q=b.useCallback((ae,we)=>ae.length?r.jsx("div",{className:"border rounded-lg overflow-hidden",children:ae.map(Te=>{var qe,Ke,Ge,He;return r.jsx("div",{className:"px-4 py-3 border-b border-border hover:bg-muted/30 cursor-pointer transition-colors last:border-b-0",onClick:()=>h(`/da/inspections/${Te.id}`),"data-testid":`card-inspection-${Te.id}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${Te.reportSubmitted?"bg-green-100":"bg-amber-100"}`,children:r.jsx(Mi,{className:`w-5 h-5 ${Te.reportSubmitted?"text-green-600":"text-amber-600"}`})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-semibold",children:((qe=Te.application)==null?void 0:qe.propertyName)||"Property Name Unavailable"}),((Ke=Te.application)==null?void 0:Ke.category)&&r.jsx(ze,{variant:"outline",className:{diamond:"bg-purple-50 text-purple-700",gold:"bg-yellow-50 text-yellow-700",silver:"bg-gray-50 text-gray-700"}[Te.application.category.toLowerCase()]||"",children:Te.application.category.toUpperCase()}),r.jsx(ze,{variant:"outline",className:Te.reportSubmitted?"bg-green-50 text-green-700":"bg-blue-50 text-blue-700",children:Te.reportSubmitted?"Report Submitted":"Scheduled"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[r.jsx("span",{className:"font-mono",children:((Ge=Te.application)==null?void 0:Ge.applicationNumber)||""}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Al,{className:"w-3 h-3"}),Te.inspectionDate?new Date(Te.inspectionDate).toLocaleDateString():"Not set"]}),r.jsxs("span",{className:"hidden sm:flex items-center gap-1",children:[r.jsx(li,{className:"w-3 h-3"}),((He=Te.owner)==null?void 0:He.fullName)||"N/A"]})]})]})]}),r.jsx(te,{size:"sm",variant:Te.reportSubmitted?"outline":"default",className:"flex-shrink-0",onClick:nt=>{nt.stopPropagation(),h(`/da/inspections/${Te.id}`)},children:Te.reportSubmitted?"View Report":"Submit Report"})]})},Te.id)})}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-lg",children:[r.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"font-medium",children:we==="scheduled"?"All inspections cleared":"No reports in this window"}),r.jsx("p",{className:"text-sm mt-1",children:we==="scheduled"?"You don't have any pending field visits.":"Completed inspections will appear here."})]}),[h]),Oe=b.useCallback(ae=>{if(!ae)return!1;const we=ae instanceof Date?ae:new Date(ae);return Number.isNaN(we.getTime())?!1:o==="month"?a6(we):uc(new Date,we)<=30},[o]),ve=b.useMemo(()=>N(v.filter(ae=>{var we;return ae.status==="approved"&&!((we=ae.applicationNumber)!=null&&we.startsWith("LG-HS-"))&&Oe(ae.approvedAt??ae.updatedAt)})),[v,N,Oe]),ee=b.useMemo(()=>N(v.filter(ae=>{var we;return ae.status==="approved"&&((we=ae.applicationNumber)==null?void 0:we.startsWith("LG-HS-"))&&Oe(ae.approvedAt??ae.updatedAt)})),[v,N,Oe]),Ee=b.useMemo(()=>N(v.filter(ae=>ae.status==="rejected"&&Oe(ae.updatedAt))),[v,N,Oe]),Re=b.useMemo(()=>({new:`New Reg ${se.length}  Renewals 0  Amend ${J.length}  Cancel ${fe.length}`,process:`Screening ${D.length}  Forwarded ${q.length}`,corrections:`Sent back ${M.length}  Resubmitted ${L.length}`,inspections:`Scheduled ${V.length}  Reports ${P.length}`,completed:`Approved ${ve.length}  Rejected ${Ee.length}`}),[se.length,J.length,fe.length,D.length,q.length,M.length,L.length,V.length,z.length,ve.length,Ee.length,o,Q]),oe=b.useMemo(()=>[{key:"new-queue",title:"Incoming Queue",description:"New submissions ready for scrutiny.",icon:ir,summary:Re.new,pills:[{value:"new-queue-new",label:"New Registration",count:se.length,description:"Brand-new properties seeking recognition.",applications:se,actionLabel:"Start scrutiny",emptyTitle:"No new registrations",emptyDescription:"Every new application has been triaged."},{value:"new-queue-renewal",label:"Renewals",count:0,description:"RC renewals from existing registrations.",applications:[],actionLabel:"Start scrutiny",emptyTitle:"No renewals pending",emptyDescription:"Renewals will appear here 90 days before expiry."},{value:"new-queue-amend",label:"Amendments",count:J.length,description:"Add/remove room and category upgrade requests.",applications:J,actionLabel:"Start scrutiny",emptyTitle:"No amendments",emptyDescription:"No amendment requests pending."},{value:"new-queue-mod",label:"Cancellation",count:fe.length,description:"Cancellation requests to validate.",applications:fe,actionLabel:"Start scrutiny",emptyTitle:"No cancellations",emptyDescription:"No cancellation requests pending."}]},{key:"process",title:"Under Process",description:"Files currently in your scrutiny flow.",icon:gu,summary:Re.process,pills:[{value:"process-screening",label:"Screening",count:D.length,description:"Applications you're actively reviewing.",applications:D,actionLabel:"Resume review",emptyTitle:"No files in scrutiny",emptyDescription:"Pick any pending application to keep the queue moving."},{value:"process-forwarded",label:"Forwarded to DTDO",count:q.length,description:"Cases awaiting DTDO action.",applications:q,actionLabel:"View summary",emptyTitle:"Nothing forwarded yet",emptyDescription:"Forward files once all DA checks are complete."}]},{key:"corrections",title:"Corrections Desk",description:"Manage returned files and owner responses.",icon:Kr,summary:Re.corrections,pills:[{value:"corrections-waiting",label:"Sent back to applicant",count:M.length,description:"Corrections requested and awaiting owner response.",applications:M,actionLabel:"Review notes",emptyTitle:"No pending owners",emptyDescription:"All requested corrections have been acknowledged."},{value:"corrections-resubmitted",label:"Resubmitted",count:L.length,description:"Owners have shared updates and await your confirmation.",applications:L,actionLabel:"Review update",emptyTitle:"No new resubmissions",emptyDescription:"You'll be notified when an owner sends corrections."}]},{key:"inspections",title:"Inspections",description:"Status of field inspections assigned to you.",icon:p5,summary:Re.inspections,pills:[{value:"inspections-scheduled",label:"Scheduled",count:V.length,description:"Visits assigned but awaiting field report uploads.",applications:[],emptyTitle:"All inspections cleared",emptyDescription:"You don't have any pending field visits.",render:()=>Q(V,"scheduled")},{value:"inspections-completed",label:"Report submitted",count:P.length,description:"Field reports submitted.",applications:[],emptyTitle:"No recent inspections",emptyDescription:"Completed inspections will appear here.",render:()=>Q(P,"completed")}]},{key:"completed",title:"Completed",description:o==="month"?"Decisions recorded this month.":"Decisions in the last 30 days.",icon:kr,summary:Re.completed,pills:[{value:"completed-approved",label:"Approved",count:ve.length,description:"Applications that cleared all checks.",applications:ve,emptyTitle:"No approvals yet",emptyDescription:"Complete scrutiny + inspection to unlock approvals."},{value:"completed-rejected",label:"Rejected",count:Ee.length,description:"Applications declined in this window.",applications:Ee,actionLabel:"Review decision",emptyTitle:"No rejections",emptyDescription:"Declined files in this window will appear here."}]}],[se,J,fe,D,q,M,L,V,z,m,ve,ee,Ee,o,Re]),De=b.useMemo(()=>new Set(["new-queue-new","new-queue-amend","new-queue-mod","process-screening","inspections-scheduled"]),[]);b.useEffect(()=>{var we;if(!oe.length)return;const ae=oe.find(Te=>Te.key===e)??oe[0];if(ae.key!==e){t(ae.key),s(((we=ae.pills[0])==null?void 0:we.value)??"");return}},[oe,e,n]);const tt=oe.find(ae=>ae.key===e)??oe[0],Qe=(tt==null?void 0:tt.pills.find(ae=>ae.value===n))??(tt==null?void 0:tt.pills[0]);return g?r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})}):r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsxs("div",{className:"mb-8 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dealing Assistant Dashboard"}),r.jsxs("p",{className:"text-muted-foreground",children:[((xe=S==null?void 0:S.user)==null?void 0:xe.district)||"District","  Scrutiny + inspection workflow"]})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[r.jsxs(te,{variant:"outline",onClick:f,"data-testid":"button-da-refresh",className:"w-full sm:w-fit",children:[r.jsx(Na,{className:"w-4 h-4 mr-2"}),"Refresh"]}),r.jsxs(te,{variant:"outline",onClick:()=>h("/da/incomplete-applications"),className:"w-full sm:w-fit",children:[r.jsx(Kr,{className:"w-4 h-4 mr-2"}),"Incomplete Applications"]})]})]}),r.jsx("div",{className:"grid gap-3 md:grid-cols-2 xl:grid-cols-5 mb-6",children:oe.map(ae=>{const we=ae.icon,Te=ae.totalCount??ae.pills.reduce((He,nt)=>He+nt.count,0),qe=ae.key===(tt==null?void 0:tt.key),Ke=ae.pills.some(He=>De.has(He.value)&&He.count>0),Ge=ae.key==="inspections"&&Te>0;return r.jsxs(me,{role:"button",tabIndex:0,onClick:()=>{var He;ae.key!==e&&(t(ae.key),s(((He=ae.pills[0])==null?void 0:He.value)??""))},onKeyDown:He=>{var nt;(He.key==="Enter"||He.key===" ")&&(He.preventDefault(),ae.key!==e&&(t(ae.key),s(((nt=ae.pills[0])==null?void 0:nt.value)??"")))},className:Xe("p-3 sm:p-4 flex flex-col gap-1 cursor-pointer transition-all border border-border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-xl relative overflow-hidden dashboard-card-hover",qe?"ring-2 ring-primary":"",Ke?"dashboard-card-shimmer":"",Ge?"dashboard-card-shimmer-amber":""),children:[r.jsxs("div",{className:"flex items-start justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] uppercase tracking-wide text-muted-foreground dashboard-card-title",children:ae.title}),r.jsx("p",{className:Xe("text-2xl font-semibold mt-0.5 dashboard-card-count",Te>0?"dashboard-count-pulse":""),children:Te})]}),r.jsx("div",{className:"p-1.5 rounded-full bg-muted/40",children:r.jsx(we,{className:"w-4 h-4 text-primary dashboard-card-icon"})})]}),ae.key==="completed"?r.jsx("div",{onClick:He=>He.stopPropagation(),children:r.jsxs(pr,{value:o,onValueChange:He=>l(He),children:[r.jsx(ur,{className:"h-5 text-[10px] w-fit gap-1 bg-transparent border-0 p-0 text-muted-foreground hover:text-foreground focus:ring-0",children:r.jsx("span",{className:"truncate",children:o==="month"?"Decisions this month":"Decisions last 30 days"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"month",children:"This month"}),r.jsx(it,{value:"30d",children:"Last 30 days"})]})]})}):r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:ae.description}),r.jsx("div",{className:"mt-2 flex flex-col gap-0.5 text-[11px]",children:ae.pills.map(He=>{const nt=De.has(He.value)&&He.count>0,Y=He.value===n&&ae.key===e,Ct=ae.key==="completed";return r.jsxs("button",{type:"button",onClick:Vt=>{Vt.stopPropagation(),t(ae.key),s(He.value)},className:Xe("flex items-center justify-between w-full px-2 py-1 rounded transition-all text-left",nt||Ct&&He.count>0?ae.key==="corrections"||ae.key==="inspections"?"bg-amber-50 hover:bg-amber-100 text-amber-900":"bg-primary/10 hover:bg-primary/15 text-primary-900":"bg-muted/30 hover:bg-muted/50 text-muted-foreground",Y?"ring-1 ring-primary shadow-sm":"",nt&&!Y?"animate-pulse-subtle":""),children:[r.jsx("span",{className:"font-medium truncate mr-2",children:He.label}),r.jsx("span",{className:Xe("min-w-[1.5rem] text-center rounded-full px-1.5 py-0.5 text-[10px] font-semibold",nt||Ct&&He.count>0?ae.key==="corrections"||ae.key==="inspections"?"bg-amber-500 text-white dashboard-count-pulse":"bg-primary text-primary-foreground dashboard-count-pulse":"bg-muted text-muted-foreground"),children:He.count})]},He.value)})})]},ae.key)})}),tt&&r.jsx("div",{className:"flex flex-wrap gap-2 bg-muted/30 p-3 rounded-3xl mb-6 items-center",children:tt.pills.map(ae=>{const we=ae.value===(Qe==null?void 0:Qe.value),Te=ae.count>0;return r.jsxs("button",{type:"button",className:Xe("px-4 py-1.5 rounded-full border text-sm font-semibold flex items-center gap-2 transition-colors",we?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-white text-foreground border-border hover:bg-muted"),onClick:()=>{t(tt.key),s(ae.value)},children:[r.jsx("span",{children:ae.label}),r.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs font-semibold",children:ae.count}),Te&&!we&&r.jsx("span",{className:"h-2 w-2 rounded-full bg-amber-500"})]},ae.value)})}),n==="new-queue-amend"&&r.jsxs("div",{className:"flex flex-wrap gap-2 bg-muted/20 p-2 rounded-xl mb-4 items-center ml-4 mr-4 border border-dashed border-border",children:[r.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:"Filter by:"}),r.jsxs("button",{type:"button",className:Xe("px-3 py-1 rounded-full border text-xs font-medium transition-colors",c==="all"?"bg-primary text-primary-foreground border-primary":"bg-white text-foreground border-border hover:bg-muted"),onClick:()=>d("all"),children:["All (",J.length,")"]}),r.jsxs("button",{type:"button",className:Xe("px-3 py-1 rounded-full border text-xs font-medium transition-colors",c==="add_room"?"bg-primary text-primary-foreground border-primary":"bg-white text-foreground border-border hover:bg-muted"),onClick:()=>d("add_room"),children:["Add Room (",ie.length,")"]}),r.jsxs("button",{type:"button",className:Xe("px-3 py-1 rounded-full border text-xs font-medium transition-colors",c==="delete_room"?"bg-primary text-primary-foreground border-primary":"bg-white text-foreground border-border hover:bg-muted"),onClick:()=>d("delete_room"),children:["Delete Room (",X.length,")"]}),r.jsxs("button",{type:"button",className:Xe("px-3 py-1 rounded-full border text-xs font-medium transition-colors",c==="upgrade_category"?"bg-primary text-primary-foreground border-primary":"bg-white text-foreground border-border hover:bg-muted"),onClick:()=>d("upgrade_category"),children:["Upgrade Category (",he.length,")"]})]}),V.length>0&&r.jsxs("div",{className:"mb-8 rounded-xl border border-amber-200 bg-amber-50 p-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-amber-800",children:"Inspections need attention"}),r.jsxs("p",{className:"text-sm text-amber-900/80",children:[V.length," inspection",V.length===1?"":"s"," are awaiting field reports."]})]}),r.jsxs(te,{variant:"outline",className:"border-amber-300 text-amber-900 hover:bg-amber-100",onClick:m,children:[r.jsx(p5,{className:"w-4 h-4 mr-2"}),"View inspection queue"]})]}),tt&&Qe&&r.jsxs(me,{"data-testid":`stage-${tt.key}-${Qe.value}`,children:[r.jsxs(Ce,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx(ke,{children:Qe.label}),r.jsx(Ue,{children:Qe.description})]}),r.jsx("div",{className:"flex items-center gap-3 flex-wrap justify-end",children:!Qe.render&&r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("span",{children:"Sort"}),r.jsxs(pr,{value:i,onValueChange:ae=>a(ae),children:[r.jsx(ur,{className:"w-[140px]",children:r.jsx(yr,{placeholder:"Sort order"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"newest",children:"Newest first"}),r.jsx(it,{value:"oldest",children:"Oldest first"})]})]})]})})]}),r.jsx(ge,{children:Qe.render?Qe.render(Qe.applications):Qe.applications.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-lg",children:[r.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"font-medium",children:Qe.emptyTitle}),r.jsx("p",{className:"text-sm mt-1",children:Qe.emptyDescription})]}):r.jsx("div",{className:"border rounded-lg overflow-hidden",children:Qe.applications.map(ae=>r.jsx(eI,{application:ae,actionLabel:Qe.actionLabel??"Open application",applicationIds:Qe.applications.map(we=>we.id),hideAction:tt.key==="completed"},ae.id))})})]})]})}const sct=new Set(["legacy_rc_review","under_scrutiny","submitted"]),ict=()=>{const{data:e}=rt({queryKey:["/api/legacy/settings"]});return{forwardEnabled:(e==null?void 0:e.forwardEnabled)??!0}},Jq=e=>{if(!e)return!1;const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))return!1;const n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},ez=e=>{const t=e.updatedAt??e.submittedAt??e.createdAt;return t?new Date(t).getTime():0},act=(e,t)=>[...e].sort((n,s)=>{const i=ez(n)-ez(s);return t==="newest"?-i:i}),tz=e=>{var s,i;if(!mf(e.status))return null;const t=!!((s=e.latestCorrection)!=null&&s.createdAt),n=t&&((i=e.latestCorrection)!=null&&i.createdAt)?ap(new Date(e.latestCorrection.createdAt),{addSuffix:!0}):null;return{resubmitted:t,relative:n}};function oct(){var R;const[e,t]=b.useState("legacy-queue"),[n,s]=b.useState("legacy-new"),[i,a]=b.useState("newest"),o=ci(),{forwardEnabled:l}=ict(),c=b.useCallback(()=>{o.invalidateQueries({queryKey:["/api/da/applications"]})},[o]),{data:d,isLoading:u}=rt({queryKey:["/api/da/applications"]}),{data:h}=rt({queryKey:["/api/auth/me"]}),f=b.useMemo(()=>(d??[]).filter(k=>Nw(k)),[d]),m=b.useMemo(()=>act(f,i),[f,i]),p=b.useMemo(()=>m.filter(k=>sct.has(k.status??"")),[m]),g=b.useMemo(()=>m.filter(k=>(k.status??"")==="reverted_by_dtdo"),[m]),v=b.useMemo(()=>m.filter(k=>mf(k.status)),[m]),x=b.useMemo(()=>v.filter(k=>{var O;return!((O=tz(k))!=null&&O.resubmitted)}),[v]),y=b.useMemo(()=>v.filter(k=>{var O;return!!((O=tz(k))!=null&&O.resubmitted)}),[v]),j=b.useMemo(()=>m.filter(k=>(k.status??"")==="forwarded_to_dtdo"),[m]),w=b.useMemo(()=>m.filter(k=>(k.status??"")==="dtdo_review"),[m]),N=b.useMemo(()=>m.filter(k=>k.status==="approved"&&Jq(k.approvedAt??k.updatedAt??k.createdAt)),[m]),S=b.useMemo(()=>m.filter(k=>k.status==="rejected"&&Jq(k.updatedAt??k.createdAt)),[m]),T=b.useMemo(()=>{const k=[{key:"legacy-queue",title:"Verification Queue",description:"Owner, property, and RC details awaiting validation.",icon:ir,pills:[{value:"legacy-new",label:"New submissions",count:p.length,description:"Fresh onboarding requests captured from owners.",applications:p,actionLabel:"Start verification",emptyTitle:"No pending submissions",emptyDescription:"Every captured request has already been reviewed."},{value:"legacy-returned",label:"Returned by Prescribed Authority",count:g.length,description:"Cases DTDO sent back for DA review.",applications:g,actionLabel:"Resume review",emptyTitle:"Nothing returned",emptyDescription:"DTDO hasn't sent any existing RC case back recently."}]},{key:"legacy-corrections",title:"Corrections",description:"Owner clarifications and resubmissions.",icon:Kr,pills:[{value:"legacy-waiting",label:"Waiting on owner",count:x.length,description:"Cases sent back that still need owner action.",applications:x,actionLabel:"Review remarks",emptyTitle:"No pending corrections",emptyDescription:"All requested corrections have been addressed."},{value:"legacy-resubmitted",label:"Resubmitted",count:y.length,description:"Owners have uploaded the requested documents.",applications:y,actionLabel:"Validate resubmission",emptyTitle:"No resubmissions yet",emptyDescription:"You'll be notified when an owner resubmits."}]}];return(l||j.length>0||w.length>0)&&k.push({key:"legacy-escalated",title:"Escalated to DTDO",description:"Existing RC cases monitored at the DTDO desk.",icon:xQ,pills:[{value:"legacy-forwarded",label:"Forwarded",count:j.length,description:"Awaiting DTDO acknowledgement.",applications:j,actionLabel:"View summary",emptyTitle:"Nothing with DTDO",emptyDescription:"Forward cases only when DA checks are complete."},{value:"legacy-dtdo-review",label:"DTDO review",count:w.length,description:"DTDO accepted files undergoing final checks.",applications:w,actionLabel:"Track progress",emptyTitle:"No active reviews",emptyDescription:"You'll see DTDO activity once they accept a case."}]}),k.push({key:"legacy-closures",title:"Closed this month",description:"Existing RC registrations verified in the current month.",icon:kr,pills:[{value:"legacy-approved",label:"Verified",count:N.length,description:"Existing RC registration verified and migrated.",applications:N,actionLabel:"View certificate",emptyTitle:"No verifications yet",emptyDescription:"Progress existing RC cases to add them here."},{value:"legacy-rejected",label:"Rejected",count:S.length,description:"Existing RC requests declined this month.",applications:S,actionLabel:"Review decision",emptyTitle:"No rejections",emptyDescription:"Declined files will appear for follow-up."}]}),k},[p,g,x,y,j,w,N,S,l]);b.useEffect(()=>{var $;if(!T.length)return;const k=T.find(D=>D.key===e)??T[0];if(k.key!==e){t(k.key),s((($=k.pills[0])==null?void 0:$.value)??"");return}const O=k.pills.find(D=>D.value===n)??k.pills[0];O.value!==n&&s(O.value)},[T,e,n]);const C=T.find(k=>k.key===e)??T[0],A=(C==null?void 0:C.pills.find(k=>k.value===n))??(C==null?void 0:C.pills[0]);return u?r.jsx("div",{className:"container mx-auto p-6 max-w-6xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})}):r.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Existing RC Registration Desk"}),r.jsxs("p",{className:"text-muted-foreground",children:[((R=h==null?void 0:h.user)==null?void 0:R.district)||"District","  Current license validation"]})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[r.jsxs("div",{className:"inline-flex items-center rounded-full border bg-muted/40 text-xs font-semibold",children:[r.jsx(Co,{href:"/da/dashboard",className:"px-3 py-1.5 rounded-full text-muted-foreground hover:text-primary transition-colors",children:"Next-gen view"}),r.jsx("span",{className:"px-3 py-1.5 rounded-full bg-background shadow-sm text-foreground",children:"Classic view"})]}),r.jsxs(te,{variant:"outline",onClick:c,className:"w-full sm:w-fit",children:[r.jsx(Na,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),l===!1&&r.jsx("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-sm text-amber-900",children:"DTDO escalation is disabled. All existing RC onboarding cases must be verified and closed within the DA desk."}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:T.map(k=>{const O=k.icon,$=k.totalCount??k.pills.reduce((q,M)=>q+M.count,0),D=k.key===(C==null?void 0:C.key);return r.jsxs(me,{role:"button",tabIndex:0,onClick:()=>{var q;k.key!==e&&(t(k.key),s(((q=k.pills[0])==null?void 0:q.value)??""))},className:`p-5 flex flex-col gap-3 cursor-pointer transition-all border border-border rounded-2xl ${D?"ring-2 ring-primary":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:k.title}),r.jsx("p",{className:"text-3xl font-semibold mt-1",children:$})]}),r.jsx("div",{className:"p-2 rounded-full bg-muted/40",children:r.jsx(O,{className:"w-5 h-5 text-primary"})})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:k.description})]},k.key)})}),C&&A&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-wrap gap-2 bg-muted/30 p-3 rounded-3xl",children:C.pills.map(k=>{const O=k.value===A.value;return r.jsxs("button",{className:`flex items-center gap-2 rounded-full px-4 py-1 text-sm font-medium ${O?"bg-background shadow":"text-muted-foreground"}`,onClick:()=>s(k.value),children:[r.jsx("span",{children:k.label}),r.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs font-semibold",children:k.count})]},k.value)})}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:A.label}),r.jsx(Ue,{children:A.description})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("span",{children:"Sort"}),r.jsxs(pr,{value:i,onValueChange:k=>a(k),children:[r.jsx(ur,{className:"w-[140px]",children:r.jsx(yr,{placeholder:"Sort order"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"newest",children:"Newest first"}),r.jsx(it,{value:"oldest",children:"Oldest first"})]})]})]})]}),r.jsx(ge,{children:A.applications.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-lg",children:[r.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"font-medium",children:A.emptyTitle}),r.jsx("p",{className:"text-sm mt-1",children:A.emptyDescription})]}):r.jsx("div",{className:"space-y-3",children:A.applications.map(k=>r.jsx(eI,{application:k,actionLabel:A.actionLabel??"Open application",applicationIds:A.applications.map(O=>O.id)},k.id))})})]})]})]})}const rz=e=>{if(!e)return"No resubmission yet";const t=new Date(e);return Number.isNaN(t.getTime())?"No resubmission yet":sr(t,"PPP p")},nz={"revenue-papers":1,"affidavit-section29":2,"undertaking-form-c":3,"commercial-electricity-bill":4,"commercial-water-bill":5,"property-photo":6,"additional-document":7},lct=e=>[...e].sort((t,n)=>{const s=t.documentType.replace(/_/g,"-").toLowerCase(),i=n.documentType.replace(/_/g,"-").toLowerCase(),a=nz[s]??99,o=nz[i]??99;if(a!==o)return a-o;const l=t.uploadDate?new Date(t.uploadDate).getTime():0,c=n.uploadDate?new Date(n.uploadDate).getTime():0;return l!==c?l-c:t.id.localeCompare(n.id)});function cct(){var xd,vd,Dl,Fo,Ka,Ac,$o,Ml;const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),i=new URLSearchParams(window.location.search).get("queue"),a=i?i.split(","):[],o=a.indexOf(e||""),l=o>0,c=o>=0&&o<a.length-1,[d,u]=b.useState(!1),[h,f]=b.useState(!1),[m,p]=b.useState(!1),[g,v]=b.useState(!1),[x,y]=b.useState(""),[j,w]=b.useState(""),[N,S]=b.useState(""),[T,C]=b.useState(null),A=b.useRef(null),R=b.useRef({}),k=Nt=>{C(Nt),requestAnimationFrame(()=>{if(A.current){A.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"});return}const cn=R.current[Nt.id];cn&&cn.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})})},[O,$]=b.useState({}),[D,q]=b.useState({}),M=b.useRef({});b.useEffect(()=>{M.current=O},[O]);const[L,V]=b.useState(!1),[P,z]=b.useState(null),Z=b.useRef(null);b.useEffect(()=>{T&&A.current&&A.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},[T]);const F=Nt=>{const cn=a.join(",");t(`/da/applications/${Nt}?queue=${encodeURIComponent(cn)}`)},W=()=>{l&&F(a[o-1])},G=()=>{c&&F(a[o+1])};b.useEffect(()=>{const Nt=cn=>{cn.target instanceof HTMLInputElement||cn.target instanceof HTMLTextAreaElement||(cn.key==="ArrowLeft"&&l?W():cn.key==="ArrowRight"&&c&&G())};return window.addEventListener("keydown",Nt),()=>window.removeEventListener("keydown",Nt)},[l,c,o]);const{data:H,isLoading:se}=rt({queryKey:["/api/da/applications",e],enabled:!!e}),J=(xd=H==null?void 0:H.application)==null?void 0:xd.status,ie=(H==null?void 0:H.sendBackEnabled)??!1,X=new Set(["under_scrutiny","legacy_rc_review"]),he=!X.has(J||""),fe=(H==null?void 0:H.correctionHistory)??[],Q=Ot({mutationFn:async()=>await lt("POST",`/api/da/applications/${e}/start-scrutiny`),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/da/applications",e]}),er.invalidateQueries({queryKey:["/api/da/applications"]}),er.invalidateQueries({queryKey:["/api/applications",e,"timeline"]}),n({title:"Scrutiny Started",description:"Application is now under your review"})},onError:()=>{n({title:"Error",description:"Failed to start scrutiny",variant:"destructive"})}}),Oe=Ot({mutationFn:async()=>await lt("POST",`/api/applications/${e}/legacy-verify`,{remarks:N.trim()||void 0}),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/da/applications",e]}),er.invalidateQueries({queryKey:["/api/da/applications"]}),n({title:"Legacy RC verified",description:"Application marked complete without forwarding to DTDO."}),v(!1),S(""),t("/da/dashboard")},onError:Nt=>{n({title:"Failed to verify",description:Nt.message||"Unable to verify this legacy request.",variant:"destructive"})}}),ve=b.useCallback(async()=>await lt("POST",`/api/da/applications/${e}/save-scrutiny`,{verifications:Object.values(M.current)}),[e]),ee=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null)},Ee=Ot({mutationFn:async()=>{if(he){n({title:"Read-only",description:"This application has already been forwarded to DTDO."});return}return await ve()},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/da/applications",e]}),er.invalidateQueries({queryKey:["/api/da/applications"]}),V(!1),z(new Date),n({title:"Progress Saved",description:"Your verification progress has been saved"})},onError:()=>{n({title:"Error",description:"Failed to save progress",variant:"destructive"})}}),Re=Ot({mutationFn:async()=>{he||await ve()},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/da/applications",e]}),V(!1),z(new Date)},onError:()=>{n({title:"Auto-save failed",description:"Could not save the latest verification updates. Click Save Progress to retry.",variant:"destructive"})}}),oe=b.useMemo(()=>Ee.isPending||Re.isPending?"Saving...":L?"Unsaved changes":P?`Saved at ${P.toLocaleTimeString()}`:"",[Ee.isPending,Re.isPending,L,P]),De=b.useCallback(()=>{he||(V(!0),Z.current&&clearTimeout(Z.current),Z.current=setTimeout(()=>{Re.mutate(),Z.current=null},1200))},[Re,he]);b.useEffect(()=>()=>{ee()},[]);const tt=Ot({mutationFn:async()=>await lt("POST",`/api/da/applications/${e}/forward-to-dtdo`,{remarks:x}),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/da/applications"]}),er.invalidateQueries({queryKey:["/api/applications",e,"timeline"]}),u(!1),y(""),n({title:"Application Forwarded",description:"Application has been sent to DTDO successfully"}),t("/da/dashboard")},onError:Nt=>{n({title:"Error",description:Nt.message||"Failed to forward application",variant:"destructive"})}}),[Qe,xe]=b.useState(""),[ae,we]=b.useState(!1),[Te,qe]=b.useState(!1),[Ke,Ge]=b.useState(!1),[He,nt]=b.useState(""),Ct=(((vd=H==null?void 0:H.application)==null?void 0:vd.revertCount)??0)>=1,Vt=Ot({mutationFn:async()=>await(await lt("POST","/api/sendback-otp/request",{applicationId:e,reason:j})).json(),onSuccess:Nt=>{qe(!0),we(!0);const cn=Nt.maskedMobile||"";nt(cn),n({title:"OTP Sent",description:`OTP has been sent to DTDO's registered mobile number (xxxxxx${Nt.dtdoPhoneLast4||cn.slice(-4)})`})},onError:Nt=>{n({title:"Failed to send OTP",description:Nt.message,variant:"destructive"})}}),pt=Ot({mutationFn:async()=>await lt("POST","/api/sendback-otp/verify",{applicationId:e,otp:Qe}),onSuccess:()=>{Ge(!0),n({title:"OTP Verified",description:"DTDO authorization confirmed"})},onError:Nt=>{n({title:"Invalid OTP",description:Nt.message,variant:"destructive"})}}),Ht=Ot({mutationFn:async()=>await lt("POST",`/api/da/applications/${e}/send-back`,{reason:j,otpVerified:Ct?!0:Ke}),onSuccess:Nt=>{er.invalidateQueries({queryKey:["/api/da/applications"]}),er.invalidateQueries({queryKey:["/api/applications",e,"timeline"]}),f(!1),w(""),xe(""),we(!1),qe(!1),Ge(!1),Nt.autoRejected?n({title:"Application Rejected",description:Nt.message||"Application has been automatically rejected due to repeated corrections.",variant:"destructive"}):n({title:"Application Sent Back",description:"Application has been returned to the applicant"}),t("/da/dashboard")},onError:Nt=>{n({title:"Error",description:Nt.message||"Failed to send back application",variant:"destructive"})}});b.useEffect(()=>{h||(xe(""),we(!1),qe(!1),Ge(!1))},[h]);const[wr,wt]=b.useState(null),[Ut,St]=b.useState([]),Be=b.useMemo(()=>!T||!Ut.length?-1:Ut.findIndex(Nt=>Nt.id===T.id),[T,Ut]),lr=Be>0,Wt=Be>=0&&Be<Ut.length-1,It=b.useCallback(()=>{lr&&k(Ut[Be-1])},[Be,lr,Ut]),yt=b.useCallback(()=>{Wt&&k(Ut[Be+1])},[Be,Wt,Ut]);if(b.useEffect(()=>{if(!(!e||!(H!=null&&H.documents))&&wr!==e){if(H.documents.length>0){St(lct(H.documents));const Nt={};H.documents.forEach(cn=>{Nt[cn.id]={documentId:cn.id,status:cn.verificationStatus||"pending",notes:cn.verificationNotes||""}}),$(Nt),C(cn=>{const Ta=H.documents.map(Ga=>Ga.id);return!cn||!Ta.includes(cn.id)?H.documents[0]:cn})}else St([]),$({}),C(null);wt(e)}},[H==null?void 0:H.documents,e,wr]),!e)return t("/da/dashboard"),null;if(se)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})});if(!H)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-muted-foreground",children:"Application not found"})})});const{application:ut,owner:Kt,documents:Os}=H,Dt=Ut.length>0?Ut:H.documents,gr=Nw(ut),Fn=!gr||H.legacyForwardEnabled!==!1,bi=ut.status==="submitted",An=X.has(ut.status||""),ei=!bi&&!An,rn=gr&&["legacy_rc_review","submitted","under_scrutiny"].includes(ut.status??""),vn=fct(ut.locationType),rs=mct(ut.projectType),En=pct(ut.propertyOwnership),ka=gct(ut.propertyArea),zr=xct(ut.certificateValidityYears),zt=vct(ut.address),ji=ut.tehsilOther||ut.tehsil,wi=ut.gramPanchayatOther||ut.gramPanchayat,Rs=ut.urbanBodyOther||ut.urbanBody,st=ut.ward,tr=ut.telephone||(Kt==null?void 0:Kt.mobile)||void 0,Zt=ut.singleBedRooms??0,$n=ut.doubleBedRooms??0,_s=ut.familySuites??0,qa=ut.singleBedBeds??(Zt>0?1:0),ms=ut.doubleBedBeds??($n>0?2:0),Ds=ut.familySuiteBeds??(_s>0?4:0),di=ut.totalRooms??Zt+$n+_s,El=Zt*qa+$n*ms+_s*Ds,Li=ut.attachedWashrooms??0,cl=di?`${Li} of ${di}`:hct(Li),za=bct(ut.amenities),Zi=Object.values(za).filter(Boolean).length,ju=Object.keys(za).length||0,pd=za.cctv&&za.fireSafety?"CCTV & Fire Safety confirmed":"Pending owner confirmation",Ha=jct({airport:ut.distanceAirport,railway:ut.distanceRailway,city:ut.distanceCityCenter,bus:ut.distanceBusStand,shopping:ut.distanceShopping}),_c=Ru(ut.baseFee??0),Cc=Ru(ut.totalFee??ut.baseFee),Bn=Ru(ut.femaleOwnerDiscount),wu=Ru(ut.pangiDiscount),Io=Ru(ut.validityDiscount),zn=Ru(ut.totalDiscount),On=Ru(ut.highestRoomRate??ut.proposedRoomRate),ns=Ru(ut.singleBedRoomRate),Pa=Ru(ut.doubleBedRoomRate),ss=Ru(ut.familySuiteRate),Ni=Dt.length,Lo=Object.values(O).filter(Nt=>Nt.status!=="pending").length,lo=Ni>0?Math.round(Lo/Ni*100):0,gd=["cancel_certificate","delete_rooms"].includes(ut.applicationKind||""),Ji=()=>Fn?gd?!0:Ni===0?(n({title:"Documents required",description:"Required documents must be uploaded and reviewed before forwarding to DTDO.",variant:"destructive"}),!1):Lo<Ni?(n({title:"Complete document verification",description:"Mark every document as Verified / Needs correction / Rejected before forwarding.",variant:"destructive"}),!1):!0:(n({title:"DTDO escalation disabled",description:"Legacy RC onboarding must be verified and closed by the DA.",variant:"destructive"}),!1),Ol=Fn&&(gd||Ni>0&&Lo===Ni),Wa=()=>x.trim().length===0?(n({title:"Add your remarks",description:"Summarize your scrutiny observations before forwarding to DTDO.",variant:"destructive"}),!1):!0,Si=(Nt,cn)=>{if(he){n({title:"Read-only",description:"This application has already been forwarded to DTDO."});return}$(Ta=>({...Ta,[Nt]:{...Ta[Nt],...cn}})),De()},Rl=Nt=>{q(cn=>({...cn,[Nt]:!cn[Nt]}))},Nu=Nt=>{switch(Nt){case"verified":return r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300 border border-green-300 dark:border-green-700",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"}),"Verified"]});case"rejected":return r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300 border border-red-300 dark:border-red-700",children:[r.jsx(oo,{className:"w-3 h-3 mr-1"}),"Rejected"]});case"needs_correction":return r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300 border border-amber-300 dark:border-amber-700",children:[r.jsx(Kr,{className:"w-3 h-3 mr-1"}),"Needs Correction"]});default:return r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 border border-gray-300 dark:border-gray-600",children:"Pending Review"})}};return r.jsxs("div",{className:"container mx-auto p-6 max-w-[1600px]",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>t("/da/dashboard"),className:"mb-4","data-testid":"button-back",children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]}),r.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-3xl font-bold mb-2",children:ut.propertyName}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-muted-foreground flex-wrap",children:[r.jsxs("span",{children:["Application #",ut.applicationNumber]}),r.jsx(oc,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{children:[Kt==null?void 0:Kt.fullName,"  ",Kt==null?void 0:Kt.mobile]}),r.jsx(oc,{orientation:"vertical",className:"h-4"}),r.jsx(ze,{variant:"outline",children:((Dl=ut.category)==null?void 0:Dl.toUpperCase())??"SILVER"}),a.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(oc,{orientation:"vertical",className:"h-4"}),r.jsxs("span",{className:"text-xs font-medium",children:[o+1," of ",a.length]})]})]})]}),a.length>1&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{variant:"outline",size:"sm",onClick:W,disabled:!l,"data-testid":"button-previous",title:"Previous application ()",children:[r.jsx(y1,{className:"w-4 h-4 mr-1"}),"Previous"]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:G,disabled:!c,"data-testid":"button-next",title:"Next application ()",children:["Next",r.jsx(lf,{className:"w-4 h-4 ml-1"})]})]}),r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[rn&&r.jsx(r.Fragment,{children:r.jsxs(te,{variant:"outline",onClick:()=>v(!0),disabled:Oe.isPending,"data-testid":"button-legacy-verify-da",children:[Oe.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Verify Legacy RC"]})}),bi&&r.jsxs(te,{onClick:()=>Q.mutate(),disabled:Q.isPending,"data-testid":"button-start-scrutiny",children:[Q.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Start Scrutiny"]}),An&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-col gap-1",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsxs(te,{variant:"outline",onClick:()=>{ee(),Ee.mutate()},disabled:Ee.isPending,"data-testid":"button-save-progress",children:[r.jsx(pu,{className:"w-4 h-4 mr-2"}),"Save Progress"]})})}),ie&&r.jsxs(te,{variant:"warning",onClick:()=>f(!0),"data-testid":"button-send-back",children:[r.jsx(oo,{className:"w-4 h-4 mr-2"}),"Send Back"]}),Fn?r.jsxs(te,{onClick:()=>{Ji()&&u(!0)},"data-testid":"button-forward",disabled:!Ol,title:Ol?void 0:"Verify every document before forwarding",children:[r.jsx(Zd,{className:"w-4 h-4 mr-2"}),"Forward to DTDO"]}):gr&&r.jsx("p",{className:"text-xs text-muted-foreground max-w-xs",children:"Legacy RC onboarding must be completed by the DA. DTDO escalation is currently disabled by admin settings."})]})]})]})]}),ei&&r.jsxs("div",{className:"mb-6 rounded-lg border border-dashed bg-muted/40 p-4 text-sm text-muted-foreground",children:["This application is currently ",((Fo=ut.status)==null?void 0:Fo.replace(/_/g," "))||"processed",". Document verification is read-only."]}),An&&r.jsx(me,{className:"mb-6",children:r.jsxs(ge,{className:"pt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(je,{children:"Document Verification Progress"}),r.jsxs("span",{className:"text-sm font-medium",children:[Lo," / ",Ni," documents reviewed"]})]}),r.jsx(f0,{value:lo,className:"h-2"})]})}),r.jsxs(aa,{defaultValue:"documents",className:"space-y-6",children:[r.jsxs(Qi,{children:[r.jsxs(Pr,{value:"documents","data-testid":"tab-documents",children:[r.jsx(ir,{className:"w-4 h-4 mr-2"}),"Document Verification (",Dt.length,")"]}),r.jsx(Pr,{value:"details","data-testid":"tab-details",children:"Property & Owner Details"})]}),r.jsx(Rr,{value:"documents",className:"space-y-0",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx("div",{ref:A,className:"lg:sticky lg:top-24 self-start",children:r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx(ke,{className:"text-lg",children:"Document Preview"}),r.jsx(Ue,{className:"truncate",children:T?T.fileName:"Select a document to preview"})]}),T&&r.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[r.jsx(te,{variant:"outline",size:"icon",onClick:It,disabled:!lr,title:"Previous document","data-testid":"button-prev-document",children:r.jsx(y1,{className:"w-4 h-4"})}),r.jsxs("span",{className:"text-xs text-muted-foreground px-2 whitespace-nowrap",children:[Be+1," of ",Ut.length]}),r.jsx(te,{variant:"outline",size:"icon",onClick:yt,disabled:!Wt,title:"Next document","data-testid":"button-next-document",children:r.jsx(lf,{className:"w-4 h-4"})}),r.jsx(te,{variant:"outline",size:"icon",asChild:!0,title:"Open in new tab","data-testid":"button-open-new-tab",children:r.jsx("a",{href:Kd(T.filePath,{mimeType:T.mimeType,fileName:T.fileName}),target:"_blank",rel:"noopener noreferrer",children:r.jsx(zu,{className:"w-4 h-4"})})})]})]})}),r.jsx(ge,{children:T?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-muted rounded-lg flex items-center justify-between gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[r.jsx("span",{className:"text-sm font-medium truncate",children:T.documentType}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(T.fileSize/1024).toFixed(1)," KB)"]})]}),Nu(((Ka=O[T.id])==null?void 0:Ka.status)||"pending")]}),r.jsx("div",{className:"border rounded-lg overflow-hidden bg-gray-50 dark:bg-gray-900 min-h-[400px] flex items-center justify-center",children:T.mimeType.startsWith("image/")?r.jsx("img",{src:Kd(T.filePath,{mimeType:T.mimeType,fileName:T.fileName}),alt:T.fileName,className:"w-full h-auto max-h-[600px] object-contain","data-testid":"img-document-preview",onError:Nt=>{console.error("Image failed to load:",T.filePath),Nt.currentTarget.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"><text x="50%" y="50%" text-anchor="middle" fill="gray">Image failed to load</text></svg>'},onLoad:()=>console.log("Image loaded successfully:",T.fileName)}):T.mimeType==="application/pdf"?r.jsx("iframe",{src:Kd(T.filePath,{mimeType:T.mimeType,fileName:T.fileName}),className:"w-full h-[600px]",title:T.fileName,"data-testid":"iframe-document-preview"}):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(ir,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Preview not available for this file type"}),r.jsx(te,{variant:"outline",size:"sm",asChild:!0,"data-testid":"button-download-document",children:r.jsxs("a",{href:Kd(T.filePath,{mimeType:T.mimeType,fileName:T.fileName}),download:!0,children:[r.jsx(ds,{className:"w-4 h-4 mr-2"}),"Download File"]})})]})})]}):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[r.jsx(Cg,{className:"w-16 h-16 mb-4 opacity-20"}),r.jsx("p",{children:"Select a document from the list to preview"})]})})]})}),r.jsxs(me,{className:"max-h-[calc(100vh-200px)] overflow-y-auto",children:[r.jsxs(Ce,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[r.jsxs("div",{children:[r.jsx(ke,{children:"Document Checklist"}),r.jsx(Ue,{children:"Review and verify each document"})]}),Dt.length>0&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>{Dt.forEach(Nt=>{Si(Nt.id,{status:"verified"})}),n({title:"All Verified",description:`${Dt.length} documents marked as verified`})},disabled:he,"data-testid":"button-verify-all",children:[r.jsx(kr,{className:"w-4 h-4 mr-2"}),"Verify All"]}),r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>p(!0),disabled:he,"data-testid":"button-clear-all",children:[r.jsx(vk,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]}),Dt.length>0&&r.jsxs("div",{className:"space-y-2","data-testid":"progress-meter",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"font-medium",children:"Overall Progress"}),r.jsxs("span",{className:`font-semibold ${lo===100?"text-green-600 dark:text-green-400":lo>=50?"text-amber-600 dark:text-amber-400":"text-red-600 dark:text-red-400"}`,"data-testid":"text-progress-percentage",children:[Lo," of ",Ni," (",lo,"%)"]})]}),r.jsx("div",{className:"relative h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden","data-testid":"progress-bar-container",children:r.jsx("div",{className:`absolute top-0 left-0 h-full transition-all duration-300 ${lo===100?"bg-green-500":lo>=50?"bg-amber-500":"bg-red-500"}`,style:{width:`${lo}%`},"data-testid":"progress-bar-fill"})}),oe&&r.jsx("div",{className:"text-xs text-muted-foreground text-right",children:oe})]})]}),r.jsx(ge,{children:(()=>{if(Dt.length===0)return r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No documents uploaded"})]});const Nt=["revenue-papers","revenue_papers","affidavit-section29","affidavit-section-29","affidavit_section_29","undertaking-form-c","undertaking-form-c","undertaking_form_c","commercial-electricity-bill","commercial_electricity_bill","commercial-water-bill","commercial_water_bill","legacy-certificate","legacy_certificate","owner-identity-proof","owner_identity_proof","id-proof","id_proof","aadhaar-card","aadhaar_card"],cn=ue=>ue.replace(/_/g,"-").toLowerCase(),Ta=Dt.filter(ue=>Nt.includes(cn(ue.documentType))),Ga=Dt.filter(ue=>cn(ue.documentType)==="property-photo"),Bo=Dt.filter(ue=>!Nt.includes(cn(ue.documentType))&&cn(ue.documentType)!=="property-photo"),_i=(ue,bt)=>ue.length===0?r.jsx("div",{className:"text-center py-8 text-muted-foreground bg-slate-50 rounded-lg border border-dashed",children:r.jsx("p",{className:"text-sm",children:bt})}):r.jsx("div",{className:"space-y-3",children:ue.map((vr,wn)=>{var ui,ps,co,Ya,yd,Su,_u,kc,Il,is,Ll,bd;return r.jsx(Ghe,{open:D[vr.id],onOpenChange:()=>Rl(vr.id),children:r.jsxs(me,{className:Xe("transition-all",{"border-green-200 bg-green-50":((ui=O[vr.id])==null?void 0:ui.status)==="verified","border-red-200 bg-red-50":((ps=O[vr.id])==null?void 0:ps.status)==="needs_correction"}),children:[r.jsx(Ce,{className:"p-3",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsxs("div",{className:"mt-1",children:[((co=O[vr.id])==null?void 0:co.status)==="verified"&&r.jsx(kr,{className:"w-5 h-5 text-green-600"}),((Ya=O[vr.id])==null?void 0:Ya.status)==="needs_correction"&&r.jsx(Kr,{className:"w-5 h-5 text-red-600"}),(!((yd=O[vr.id])!=null&&yd.status)||((Su=O[vr.id])==null?void 0:Su.status)==="pending")&&r.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-gray-300"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsxs("div",{className:"flex-1 space-y-1",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("h4",{className:"font-medium text-sm truncate capitalize",children:vr.documentType.replace(/-/g," ")})}),r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:vr.fileName})]}),r.jsx(te,{variant:"ghost",size:"sm",onClick:()=>k(vr),children:r.jsx(Cg,{className:"w-4 h-4"})})]}),r.jsxs("div",{className:"flex gap-2 mt-2",children:[r.jsxs(te,{size:"sm",variant:((_u=O[vr.id])==null?void 0:_u.status)==="verified"?"default":"outline",className:Xe("flex-1 h-8",((kc=O[vr.id])==null?void 0:kc.status)==="verified"?"bg-green-600 hover:bg-green-700":"hover:border-green-500 hover:text-green-600"),onClick:()=>{Si(vr.id,{status:"verified",notes:""})},disabled:he,children:[r.jsx(kr,{className:"w-3 h-3 mr-1.5"}),"Accept"]}),r.jsxs(te,{size:"sm",variant:((Il=O[vr.id])==null?void 0:Il.status)==="needs_correction"?"destructive":"outline",className:Xe("flex-1 h-8",((is=O[vr.id])==null?void 0:is.status)==="needs_correction"?"":"hover:border-red-500 hover:text-red-600"),onClick:()=>{Si(vr.id,{status:"needs_correction"})},disabled:he,children:[r.jsx(vk,{className:"w-3 h-3 mr-1.5"}),"Return"]})]})]})]})}),((Ll=O[vr.id])==null?void 0:Ll.status)==="needs_correction"&&r.jsx(ge,{className:"pt-0 px-3 pb-3 pl-11",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-0 top-2.5 w-1.5 h-1.5 rounded-full bg-red-400"}),r.jsx(Ur,{placeholder:"Explain what needs to be corrected...",value:((bd=O[vr.id])==null?void 0:bd.notes)||"",onChange:Pc=>Si(vr.id,{notes:Pc.target.value}),rows:2,className:"text-sm bg-white pl-3 ml-3 w-[calc(100%-0.75rem)]",readOnly:he})]})})]})},vr.id)})});return r.jsxs(aa,{defaultValue:"main",className:"w-full",children:[r.jsxs(Qi,{className:"w-full grid grid-cols-3 mb-4",children:[r.jsxs(Pr,{value:"main",className:"text-xs",children:["Main Docs",r.jsx(ze,{variant:"secondary",className:"ml-1.5 px-1 py-0 h-4 min-w-[16px]",children:Ta.length})]}),r.jsxs(Pr,{value:"photos",className:"text-xs",children:["Photos",r.jsx(ze,{variant:"secondary",className:"ml-1.5 px-1 py-0 h-4 min-w-[16px]",children:Ga.length})]}),r.jsxs(Pr,{value:"other",className:"text-xs",children:["Other",r.jsx(ze,{variant:"secondary",className:"ml-1.5 px-1 py-0 h-4 min-w-[16px]",children:Bo.length})]})]}),r.jsx(Rr,{value:"main",className:"mt-0",children:_i(Ta,"No main documents found")}),r.jsx(Rr,{value:"photos",className:"mt-0",children:_i(Ga,"No property photos uploaded")}),r.jsx(Rr,{value:"other",className:"mt-0",children:_i(Bo,"No additional documents")})]})})()})]})]})}),r.jsx(Rr,{value:"details",className:"space-y-6",children:r.jsxs("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Property Information"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Property Name",value:ut.propertyName}),r.jsx(Gr,{label:"Category",value:(Ac=ut.category)==null?void 0:Ac.toUpperCase()}),r.jsx(Gr,{label:"Location Type",value:vn}),r.jsx(Gr,{label:"Project Type",value:rs}),r.jsx(Gr,{label:"Property Ownership",value:En}),r.jsx(Gr,{label:"Property Area",value:ka}),r.jsx(Gr,{label:"Certificate Validity",value:zr})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Correction Window"}),r.jsx(Ue,{children:"Applicants can submit limited corrections."})]}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Corrections Used",value:`${ut.correctionSubmissionCount??0}`}),r.jsx(Gr,{label:"Owner Confirmation",value:rz(($o=fe[0])==null?void 0:$o.createdAt)}),((Ml=fe[0])==null?void 0:Ml.feedback)&&r.jsx("p",{className:"text-xs text-muted-foreground rounded-lg border bg-muted/30 p-3",children:fe[0].feedback}),fe.length>1&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Previous confirmations:"," ",fe.slice(1).map(Nt=>rz(Nt.createdAt)).join(", ")]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Owner Information"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Full Name",value:(Kt==null?void 0:Kt.fullName)||ut.ownerName}),r.jsx(Gr,{label:"Mobile",value:(Kt==null?void 0:Kt.mobile)||ut.ownerMobile}),r.jsx(Gr,{label:"Email",value:(Kt==null?void 0:Kt.email)||ut.ownerEmail||void 0}),r.jsx(Gr,{label:"Gender",value:yct(ut.ownerGender)}),r.jsx(Gr,{label:"Aadhaar",value:ut.ownerAadhaar})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Address & LGD Hierarchy"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Address",value:zt}),r.jsx(Gr,{label:"District",value:ut.district}),r.jsx(Gr,{label:"Tehsil",value:ji}),r.jsx(Gr,{label:"Village / Locality",value:wi}),r.jsx(Gr,{label:"Urban Body",value:Rs}),r.jsx(Gr,{label:"Ward",value:st}),r.jsx(Gr,{label:"Pincode",value:ut.pincode}),r.jsx(Gr,{label:"Telephone",value:tr})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Room & Capacity"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Single Rooms (beds)",value:`${Zt} rooms / ${qa} beds`}),r.jsx(Gr,{label:"Double Rooms (beds)",value:`${$n} rooms / ${ms} beds`}),r.jsx(Gr,{label:"Family Suites (beds)",value:`${_s} suites / ${Ds} beds`}),r.jsx(Gr,{label:"Total Rooms",value:di.toString()}),r.jsx(Gr,{label:"Total Beds",value:El.toString()}),r.jsx(Gr,{label:"Attached Washrooms",value:cl}),r.jsx(Gr,{label:"Single Room Rate",value:ns}),r.jsx(Gr,{label:"Double Room Rate",value:Pa}),r.jsx(Gr,{label:"Suite Rate",value:ss}),r.jsx(Gr,{label:"Highest Proposed Rate",value:On}),r.jsx(Gr,{label:"GSTIN",value:ut.gstin})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Fees & Discounts"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Annual Registration Fee",value:_c}),r.jsx(Gr,{label:"Female Owner Discount",value:Bn}),r.jsx(Gr,{label:"Pangi Sub-division Discount",value:wu}),r.jsx(Gr,{label:"Validity Discount",value:Io}),r.jsx(Gr,{label:"Total Discount",value:zn}),r.jsx(Gr,{label:"Total Payable",value:Cc})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Facilities & Safety"})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Gr,{label:"Mandatory Safety",value:pd}),r.jsx(Gr,{label:"Amenities Submitted",value:ju?`${Zi} of ${ju} selected`:Zi?`${Zi} selected`:void 0}),r.jsx(Gr,{label:"Parking Facilities",value:ut.parkingArea||void 0}),r.jsx(Gr,{label:"Eco-friendly Facilities",value:ut.ecoFriendlyFacilities||void 0}),r.jsx(Gr,{label:"Differently Abled Facilities",value:ut.differentlyAbledFacilities||void 0}),r.jsx(Gr,{label:"Fire Safety Notes",value:ut.fireEquipmentDetails||void 0}),r.jsx(Gr,{label:"Nearest Hospital",value:ut.nearestHospital||void 0}),r.jsx(Gr,{label:"Distance Summary",value:Ha})]})]}),(ut.districtNotes||ut.stateNotes)&&r.jsxs(me,{className:"md:col-span-2 xl:col-span-3",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"w-5 h-5 text-primary"}),"Officer Remarks"]}),r.jsx(Ue,{children:"DTDO / State remarks are visible only to staff users."})]}),r.jsxs(ge,{className:"space-y-4",children:[ut.districtNotes&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[r.jsx(ze,{variant:"outline",children:"DTDO"}),"District Remarks"]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:ut.districtNotes})]}),ut.districtNotes&&ut.stateNotes&&r.jsx(oc,{}),ut.stateNotes&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold",children:[r.jsx(ze,{variant:"outline",children:"State"}),"State Remarks"]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1 whitespace-pre-line",children:ut.stateNotes})]})]})]}),r.jsx(L6,{applicationId:e,className:"md:col-span-2 xl:col-span-3"}),r.jsx(EC,{applicationId:e,className:"md:col-span-2 xl:col-span-3",description:"Every action taken as the application moves between DA, DTDO, and the applicant."})]})})]}),r.jsx(us,{open:g,onOpenChange:Nt=>{v(Nt),Nt||S("")},children:r.jsxs(Jn,{children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Verify Legacy RC"}),r.jsx(Ns,{children:"Confirm that this existing license has been verified and can be closed without DTDO review."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(je,{htmlFor:"legacy-remarks-da",children:"Remarks (optional)"}),r.jsx(Ur,{id:"legacy-remarks-da",placeholder:"Notes for audit trail",value:N,onChange:Nt=>S(Nt.target.value)})]}),r.jsxs(Fa,{className:"gap-2",children:[r.jsx(te,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),r.jsxs(te,{onClick:()=>Oe.mutate(),disabled:Oe.isPending,children:[Oe.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Verify & Close"]})]})]})}),r.jsx(us,{open:d,onOpenChange:u,children:r.jsxs(Jn,{children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Forward to DTDO"}),r.jsx(Ns,{children:"Add your overall scrutiny remarks before forwarding this application to the District Tourism Development Officer."})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsxs(je,{htmlFor:"remarks",children:["Overall Scrutiny Remarks ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Ur,{id:"remarks",placeholder:"Summary of your scrutiny, any observations or recommendations...",value:x,onChange:Nt=>y(Nt.target.value),rows:4,"data-testid":"textarea-remarks"})]})}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),r.jsxs(te,{onClick:()=>{Ji()&&Wa()&&tt.mutate()},disabled:tt.isPending||!Ol,"data-testid":"button-confirm-forward",children:[tt.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Forward to DTDO"]})]})]})}),ie&&r.jsx(r.Fragment,{children:r.jsx(us,{open:h,onOpenChange:f,children:r.jsxs(Jn,{children:[r.jsxs(js,{children:[r.jsx(ws,{className:Ct?"text-destructive":"",children:Ct?" Final Rejection Warning":"Send Back to Applicant"}),r.jsx(Ns,{children:Ct?"This application has already been sent back once. Sending it back again will AUTOMATICALLY REJECT the application. This action cannot be undone.":"Specify corrections required. DTDO authorization (OTP) is required to proceed."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs(je,{htmlFor:"reason",children:["Reason for ",Ct?"Rejection":"Sending Back"," *"]}),r.jsx(Ur,{id:"reason",placeholder:Ct?"Enter reason for rejection...":"Please specify the corrections needed...",value:j,onChange:Nt=>w(Nt.target.value),rows:4,"data-testid":"textarea-reason",className:Ct?"border-destructive focus-visible:ring-destructive":""})]}),!Ct&&j.trim().length>5&&r.jsxs("div",{className:"p-4 bg-muted rounded-md space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(je,{className:"text-xs font-semibold uppercase text-muted-foreground",children:"DTDO Authorization"}),Ke&&r.jsxs(ze,{variant:"default",className:"bg-green-600",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"})," Verified"]})]}),!Te&&!Ke&&r.jsxs(te,{size:"sm",onClick:()=>Vt.mutate(),disabled:Vt.isPending,className:"w-full",children:[Vt.isPending&&r.jsx(vt,{className:"w-3 h-3 mr-2 animate-spin"}),"Request OTP from DTDO"]}),Te&&!Ke&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{htmlFor:"otp",children:["Enter OTP sent to DTDO",He?` (${He})`:""]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{id:"otp",type:"text",maxLength:6,className:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"6-digit OTP",value:Qe,onChange:Nt=>xe(Nt.target.value.replace(/\D/g,""))}),r.jsx(te,{onClick:()=>pt.mutate(),disabled:pt.isPending||Qe.length!==6,children:pt.isPending?r.jsx(vt,{className:"w-3 h-3 animate-spin"}):"Verify"})]}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["OTP sent to DTDO's mobile.",r.jsx("button",{onClick:()=>Vt.mutate(),className:"ml-1 text-primary hover:underline",children:"Resend?"})]})]})]})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),r.jsxs(te,{variant:Ct?"destructive":"warning",onClick:()=>Ht.mutate(),disabled:Ht.isPending||!j.trim()||!Ct&&!Ke,"data-testid":"button-confirm-send-back",children:[Ht.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),Ct?"Reject Application":"Send Back"]})]})]})})}),r.jsx(us,{open:m,onOpenChange:p,children:r.jsxs(Jn,{children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Clear All Verifications?"}),r.jsxs(Ns,{children:["This will reset all ",Dt.length," documents to pending status and clear all notes. This action cannot be undone."]})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>p(!1),"data-testid":"button-cancel-clear-all",children:"Cancel"}),r.jsxs(te,{variant:"destructive",onClick:()=>{Dt.forEach(Nt=>{Si(Nt.id,{status:"pending",notes:""})}),p(!1),n({title:"All Cleared",description:`${Dt.length} documents reset to pending`})},"data-testid":"button-confirm-clear-all",children:[r.jsx(vk,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})]})})]})}function Gr({label:e,value:t}){return r.jsxs("div",{className:"flex gap-4 text-sm",children:[r.jsxs("span",{className:"text-muted-foreground shrink-0 w-1/3 max-w-[180px]",children:[e,":"]}),r.jsx("span",{className:"font-medium text-right flex-1 break-words whitespace-pre-wrap min-w-0",children:t||"N/A"})]})}const dct=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}),uct=dw.reduce((e,t)=>({...e,[t.value]:t.label}),{});function CA(e){if(e==null||e==="")return;const t=typeof e=="string"?Number(e):e;return Number.isFinite(t)?t:void 0}function Ru(e){const t=CA(e);return t!==void 0?dct.format(t):void 0}function hct(e){const t=CA(e);return t!==void 0?t.toString():void 0}function fct(e){if(!e)return;const t=uct[e];return t||(typeof e=="string"?e.toUpperCase():void 0)}function mct(e){switch(e){case"new_rooms":return"Adding rooms to existing property";case"new_project":return"New homestay property";default:return e||void 0}}function pct(e){if(e)return e==="leased"?"Lease Deed":e==="owned"?"Owned":e}function gct(e){const t=CA(e);return t!==void 0?`${t.toLocaleString()} sq ft`:void 0}function xct(e){if(e)return`${e} year${e>1?"s":""}`}function vct(e){if(!e)return;const t=e.trim();if(t)return t.replace(/\n+/g,", ")}function yct(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}function bct(e){if(!e)return{};if(typeof e=="string")try{const t=JSON.parse(e);if(t&&typeof t=="object")return t}catch{return{}}return typeof e=="object"?e:{}}function jct(e){const t=[],n=rb(e.airport);n&&t.push(`Airport ${n}`);const s=rb(e.railway);s&&t.push(`Railway ${s}`);const i=rb(e.city);i&&t.push(`City Center ${i}`);const a=rb(e.shopping);a&&t.push(`Shopping ${a}`);const o=rb(e.bus);return o&&t.push(`Bus Stand ${o}`),t.length?t.join("  "):void 0}function rb(e){const t=CA(e);if(!(t===void 0||t<=0))return`${t} km`}function wct(){const[,e]=Dr(),{data:t,isLoading:n}=rt({queryKey:["/api/da/applications/incomplete"]}),s=i=>i.currentPage?i.currentPage>=6?"Ready to Submit":`Draft - Step ${i.currentPage} of 6`:"Draft - Initial";return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[r.jsx("div",{className:"mb-6 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs(te,{variant:"ghost",onClick:()=>e("/da/dashboard"),children:[r.jsx(Es,{className:"h-4 w-4 mr-2"}),"Back"]}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Incomplete Applications"}),r.jsx("p",{className:"text-muted-foreground",children:"Draft applications that have not yet been submitted by the applicant."})]})]})}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Draft Pipeline"}),r.jsxs(Ue,{children:[(t==null?void 0:t.length)||0," applications in progress"]})]}),r.jsx(ge,{children:n?r.jsx("div",{className:"flex justify-center p-8",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})}):t&&t.length>0?r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Application #"}),r.jsx(Mt,{children:"Property Name"}),r.jsx(Mt,{children:"Owner"}),r.jsx(Mt,{children:"Location"}),r.jsx(Mt,{children:"Last Activity"}),r.jsx(Mt,{children:"Progress"}),r.jsx(Mt,{className:"text-right",children:"Action"})]})}),r.jsx(Oo,{children:t.map(i=>r.jsxs(In,{children:[r.jsx(Rt,{className:"font-medium",children:i.applicationNumber||r.jsx("span",{className:"text-muted-foreground italic",children:"Not Generated"})}),r.jsx(Rt,{children:i.propertyName||r.jsx("span",{className:"text-muted-foreground italic",children:"Untitled"})}),r.jsx(Rt,{children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{children:i.ownerName}),r.jsx("span",{className:"text-xs text-muted-foreground",children:i.ownerMobile})]})}),r.jsxs(Rt,{children:[i.district,i.tehsil&&r.jsxs("span",{className:"text-muted-foreground",children:[", ",i.tehsil]})]}),r.jsx(Rt,{children:i.updatedAt?sr(new Date(i.updatedAt),"PP p"):"N/A"}),r.jsx(Rt,{children:r.jsx(ze,{variant:"secondary",children:s(i)})}),r.jsx(Rt,{className:"text-right",children:r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>e(`/da/applications/${i.id}`),children:[r.jsx(Cg,{className:"h-4 w-4 mr-2"}),"Preview"]})})]},i.id))})]}):r.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[r.jsx(Kr,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),r.jsx("p",{children:"No incomplete applications found."})]})})]})]})}function Nct(){const[,e]=Dr(),{data:t,isLoading:n}=rt({queryKey:["/api/da/inspections"]}),[s,i]=b.useState("all"),[a,o]=b.useState("newest"),[l,c]=b.useState("30d"),d=["approved","rejected","superseded","certificate_cancelled","certificate_issued"],u=(C,A)=>{if(A)return r.jsxs(ze,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-950/20",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"}),"Report Submitted"]});switch(C){case"scheduled":return r.jsxs(ze,{variant:"outline",className:"bg-blue-50 text-blue-700 dark:bg-blue-950/20",children:[r.jsx(Vs,{className:"w-3 h-3 mr-1"}),"Scheduled"]});case"acknowledged":return r.jsxs(ze,{variant:"outline",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-950/20",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"}),"Owner Acknowledged"]});case"in_progress":return r.jsxs(ze,{variant:"outline",className:"bg-orange-50 text-orange-700 dark:bg-orange-950/20",children:[r.jsx(Mi,{className:"w-3 h-3 mr-1"}),"In Progress"]});case"completed":return r.jsxs(ze,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-950/20",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"}),"Completed"]});default:return r.jsx(ze,{variant:"outline",children:C})}},h=C=>{const A={diamond:"bg-purple-50 text-purple-700 dark:bg-purple-950/20",gold:"bg-yellow-50 text-yellow-700 dark:bg-yellow-950/20",silver:"bg-gray-50 text-gray-700 dark:bg-gray-950/20"};return r.jsx(ze,{variant:"outline",className:A[C.toLowerCase()]||"",children:C.toUpperCase()})},f=(t==null?void 0:t.filter(C=>!C.reportSubmitted))||[],m=(t==null?void 0:t.filter(C=>{var R,k;const A=((k=(R=C.application)==null?void 0:R.status)==null?void 0:k.toLowerCase())||"";return C.reportSubmitted&&!d.includes(A)}))||[],p=b.useMemo(()=>{const C=new Date;return(t??[]).filter(A=>{var $,D;const R=((D=($=A.application)==null?void 0:$.status)==null?void 0:D.toLowerCase())||"";if(!A.reportSubmitted||!d.includes(R))return!1;const k=new Date(A.inspectionDate);if(Number.isNaN(k.getTime()))return!1;const O=Math.floor((C.getTime()-k.getTime())/(1e3*60*60*24));switch(l){case"7d":return O<=7;case"30d":return O<=30;case"month":return k.getMonth()===C.getMonth()&&k.getFullYear()===C.getFullYear();default:return!0}})},[t,l,d]),g=f.filter(C=>C.status&&C.status.toLowerCase()==="scheduled"),v=b.useMemo(()=>new Set(g.map(C=>C.id)),[g]),x=b.useMemo(()=>{if(!t)return[];switch(s){case"pending":return f;case"reportSubmitted":return m;case"completed":return p;case"new":return t.filter(C=>v.has(C.id));case"all":default:return t}},[t,s,f,m,p,v]),y=b.useMemo(()=>{if(!x)return[];const C=A=>{if(!A.inspectionDate)return 0;const R=new Date(A.inspectionDate);return Number.isNaN(R.getTime())?0:R.getTime()};return[...x].sort((A,R)=>{const k=C(A)-C(R);return a==="newest"?-k:k})},[x,a]),j=g.length,w=(t==null?void 0:t.length)??0,N=j>0,T={all:"All assignments",pending:"Pending inspections",reportSubmitted:"Awaiting decision",completed:"Completed",new:"New assignments"}[s];return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Property Inspections"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Field inspections assigned by DTDO"})]}),r.jsxs("div",{className:`relative overflow-hidden rounded-2xl border shadow-sm transition-colors ${N?"border-amber-200 bg-amber-50":"border-border bg-muted/20"}`,"data-testid":"bubble-new-inspections",children:[r.jsxs("div",{className:"flex flex-col gap-4 p-4 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`rounded-full p-3 ${N?"bg-amber-500/10 text-amber-600":"bg-muted-foreground/10 text-muted-foreground"}`,children:r.jsx(p5,{className:"h-5 w-5"})}),N&&r.jsx("span",{className:"absolute -top-1 -right-1 rounded-full bg-amber-500 px-2 text-xs font-semibold text-white shadow animate-bounce",children:j})]}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-amber-950 dark:text-amber-200",children:"New inspections scheduled"}),r.jsx("p",{className:"text-sm text-amber-900/80 dark:text-amber-100/80",children:N?`DTDO sent back ${j} ${j===1?"application":"applications"} for field inspection.`:"You're all caught up. DTDO hasn't assigned any new inspections."})]})]}),r.jsxs(ze,{className:`px-3 py-1 text-sm ${N?"bg-amber-600 text-white animate-pulse":"bg-muted-foreground/20 text-muted-foreground"}`,children:[j," New"]})]}),N&&r.jsx("div",{className:"pointer-events-none absolute -right-6 -top-6 h-24 w-24 rounded-full bg-amber-200 opacity-60 blur-3xl"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsxs(me,{role:"button",tabIndex:0,"aria-pressed":s==="new",onClick:()=>i("new"),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),i("new"))},className:`cursor-pointer transition-all hover-elevate active-elevate-2 border-2 ${N?"border-amber-300 bg-amber-50":"border-border bg-card"} ${s==="new"?"ring-2 ring-amber-500":""}`,children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsxs(ke,{className:"text-sm font-medium flex items-center gap-2",children:[r.jsx(p5,{className:N?"h-4 w-4 text-amber-600":"h-4 w-4 text-muted-foreground"}),"New Assignments"]}),N&&r.jsx(ze,{className:"bg-amber-600 text-white text-[10px] uppercase tracking-wide",children:"attention"})]}),r.jsxs(ge,{children:[r.jsxs("div",{className:"text-2xl font-bold flex items-center gap-2",children:[j,N&&r.jsx("span",{className:"rounded-full bg-amber-500 px-2 text-xs font-semibold text-white animate-pulse",children:"new"})]}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting field inspection"})]})]}),r.jsxs(me,{role:"button",tabIndex:0,"aria-pressed":s==="pending",onClick:()=>i("pending"),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),i("pending"))},className:`cursor-pointer transition-all hover-elevate active-elevate-2 ${s==="pending"?"ring-2 ring-primary":""}`,children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Pending Inspections"}),r.jsx(Vs,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold",children:f.length}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting site visit"})]})]}),r.jsxs(me,{role:"button",tabIndex:0,"aria-pressed":s==="reportSubmitted",onClick:()=>i("reportSubmitted"),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),i("reportSubmitted"))},className:`cursor-pointer transition-all hover-elevate active-elevate-2 ${s==="reportSubmitted"?"ring-2 ring-primary":""}`,children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Report Submitted"}),r.jsx(Mi,{className:"h-4 w-4 text-muted-foreground"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold",children:m.length}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting final decision"})]})]}),r.jsxs(me,{role:"button",tabIndex:0,"aria-pressed":s==="completed",onClick:()=>i("completed"),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&(C.preventDefault(),i("completed"))},className:`cursor-pointer transition-all hover-elevate active-elevate-2 ${s==="completed"?"ring-2 ring-primary":""}`,children:[r.jsxs(Ce,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsx(ke,{className:"text-sm font-medium",children:"Completed"}),r.jsx(kr,{className:"h-4 w-4 text-green-600"})]}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.length}),r.jsx("div",{className:"mt-1",onClick:C=>C.stopPropagation(),children:r.jsxs(pr,{value:l,onValueChange:C=>c(C),children:[r.jsx(ur,{className:"h-6 text-[11px] w-fit gap-1 bg-transparent border-0 p-0 text-muted-foreground hover:text-foreground focus:ring-0",children:r.jsx("span",{className:"truncate",children:l==="7d"?"Last 7 days":l==="30d"?"Last 30 days":"This month"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"7d",children:"Last 7 days"}),r.jsx(it,{value:"30d",children:"Last 30 days"}),r.jsx(it,{value:"month",children:"This month"})]})]})})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:"Assigned Inspections"}),r.jsxs(Ue,{className:"flex flex-wrap items-center gap-2 text-sm",children:[r.jsx("span",{children:"Click on an inspection to view details and submit report."}),r.jsx(ze,{variant:"outline",className:"uppercase tracking-wide",children:T})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[s!=="all"&&r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>i("all"),"data-testid":"button-show-all-inspections",children:["Show all (",w,")"]}),y.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-muted-foreground",children:"Sort:"}),r.jsxs(pr,{value:a,onValueChange:C=>o(C),children:[r.jsx(ur,{className:"w-[160px]","data-testid":"select-inspection-sort-order",children:r.jsx(yr,{placeholder:"Select order"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"newest",children:"Newest first"}),r.jsx(it,{value:"oldest",children:"Oldest first"})]})]})]})]})]}),r.jsx(ge,{children:n?r.jsx("div",{className:"space-y-4",children:[1,2,3].map(C=>r.jsx(me,{children:r.jsx(ge,{className:"pt-6",children:r.jsx(Lr,{className:"h-20 w-full"})})},C))}):t&&t.length>0?y.length>0?r.jsx("div",{className:"border rounded-lg overflow-hidden",children:y.map(C=>{var A,R,k,O,$;return r.jsx("div",{className:"px-4 py-3 border-b border-border hover:bg-muted/30 cursor-pointer transition-colors last:border-b-0",onClick:()=>e(`/da/inspections/${C.id}`),"data-testid":`card-inspection-${C.id}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${C.reportSubmitted?"bg-green-100":"bg-amber-100"}`,children:r.jsx(Mi,{className:`w-5 h-5 ${C.reportSubmitted?"text-green-600":"text-amber-600"}`})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-semibold",children:((A=C.application)==null?void 0:A.propertyName)||"Property Name Unavailable"}),((R=C.application)==null?void 0:R.category)&&h(C.application.category),u(C.status,C.reportSubmitted),s==="completed"&&((k=C.application)==null?void 0:k.status)&&(()=>{const D=C.application.status.toLowerCase();return D==="approved"||D==="certificate_issued"?r.jsxs(ze,{className:"bg-green-600 text-white",children:[r.jsx(kr,{className:"w-3 h-3 mr-1"}),"Approved"]}):D==="rejected"?r.jsxs(ze,{className:"bg-red-600 text-white",children:[r.jsx(Kr,{className:"w-3 h-3 mr-1"}),"Rejected"]}):D==="superseded"||D==="certificate_cancelled"?r.jsx(ze,{className:"bg-gray-600 text-white",children:"Superseded"}):null})()]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[r.jsx("span",{className:"font-mono",children:((O=C.application)==null?void 0:O.applicationNumber)||""}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Al,{className:"w-3 h-3"}),sr(new Date(C.inspectionDate),"MMM dd, yyyy")]}),r.jsxs("span",{className:"hidden sm:flex items-center gap-1",children:[r.jsx(li,{className:"w-3 h-3"}),(($=C.owner)==null?void 0:$.fullName)||"N/A"]}),r.jsxs("span",{className:"hidden md:flex items-center gap-1 truncate max-w-[200px]",children:[r.jsx(Js,{className:"w-3 h-3"}),C.inspectionAddress]})]})]})]}),r.jsx(te,{size:"sm",variant:C.reportSubmitted?"outline":"default",className:"flex-shrink-0","data-testid":`button-view-inspection-${C.id}`,onClick:D=>{D.stopPropagation(),e(`/da/inspections/${C.id}`)},children:C.reportSubmitted?"View Report":"Submit Report"})]})},C.id)})}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Kr,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"No inspections match this filter"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try switching filters or select All to see every assignment."}),r.jsx(te,{className:"mt-4",variant:"outline",onClick:()=>i("all"),children:"Clear Filter"})]}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Mi,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"No inspections assigned"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You don't have any pending property inspections at the moment."})]})})]})]})}const sz=7,Sct=I.object({actualInspectionDate:I.string().min(1,"Inspection date is required"),roomCountVerified:I.boolean().optional(),actualRoomCount:I.number().int().min(0).optional(),categoryMeetsStandards:I.boolean().optional(),recommendedCategory:I.enum(["diamond","gold","silver"]).optional(),mandatoryChecklist:I.object({applicationForm:I.boolean(),documents:I.boolean(),onlinePayment:I.boolean(),wellMaintained:I.boolean(),cleanRooms:I.boolean(),comfortableBedding:I.boolean(),roomSize:I.boolean(),cleanKitchen:I.boolean(),cutleryCrockery:I.boolean(),waterFacility:I.boolean(),wasteDisposal:I.boolean(),energySavingLights:I.boolean(),visitorBook:I.boolean(),doctorDetails:I.boolean(),luggageAssistance:I.boolean(),fireEquipment:I.boolean(),guestRegister:I.boolean(),cctvCameras:I.boolean()}),mandatoryRemarks:I.string().optional(),desirableChecklist:I.object({parking:I.boolean(),attachedBathroom:I.boolean(),toiletAmenities:I.boolean(),hotColdWater:I.boolean(),waterConservation:I.boolean(),diningArea:I.boolean(),wardrobe:I.boolean(),storage:I.boolean(),furniture:I.boolean(),laundry:I.boolean(),refrigerator:I.boolean(),lounge:I.boolean(),heatingCooling:I.boolean(),luggageHelp:I.boolean(),safeStorage:I.boolean(),securityGuard:I.boolean(),himachaliCrafts:I.boolean(),rainwaterHarvesting:I.boolean()}),desirableRemarks:I.string().optional(),fireSafetyCompliant:I.boolean().optional(),structuralSafety:I.boolean().optional(),overallSatisfactory:I.boolean().optional(),recommendation:I.enum(["approve","raise_objections"]),detailedFindings:I.string().min(20,"Detailed findings must be at least 20 characters"),objectionDetails:I.string().optional(),earlyInspectionOverride:I.boolean().optional(),earlyInspectionReason:I.string().optional()}).superRefine((e,t)=>{e.earlyInspectionOverride&&(!e.earlyInspectionReason||e.earlyInspectionReason.trim().length<15)&&t.addIssue({code:I.ZodIssueCode.custom,path:["earlyInspectionReason"],message:"Please provide at least 15 characters explaining why the inspection happened before the scheduled date."}),e.roomCountVerified===!1&&e.recommendation!=="raise_objections"&&(typeof e.actualRoomCount!="number"||Number.isNaN(e.actualRoomCount))&&t.addIssue({code:I.ZodIssueCode.custom,path:["actualRoomCount"],message:"Enter the verified room count if it does not match the application."}),e.categoryMeetsStandards===!1&&e.recommendation!=="raise_objections"&&(e.recommendedCategory||t.addIssue({code:I.ZodIssueCode.custom,path:["recommendedCategory"],message:"Select the category you recommend when standards are not met."})),e.recommendation==="approve"?(Object.values(e.mandatoryChecklist||{}).every(Boolean)||t.addIssue({code:I.ZodIssueCode.custom,path:["mandatoryChecklist"],message:"Turn on all mandatory checklist items before recommending verification."}),e.roomCountVerified!==!0&&t.addIssue({code:I.ZodIssueCode.custom,path:["roomCountVerified"],message:"Room count must match before recommending verification."}),e.categoryMeetsStandards!==!0&&t.addIssue({code:I.ZodIssueCode.custom,path:["categoryMeetsStandards"],message:"Confirm that the category meets standards before recommending verification."}),e.overallSatisfactory!==!0&&t.addIssue({code:I.ZodIssueCode.custom,path:["overallSatisfactory"],message:"Mark the property as satisfactory before recommending verification."})):e.recommendation==="raise_objections"&&(!e.objectionDetails||e.objectionDetails.trim().length<10)&&t.addIssue({code:I.ZodIssueCode.custom,path:["objectionDetails"],message:"Provide objection details (minimum 10 characters)."})}),nb=[{key:"applicationForm",label:"Application form as per ANNEXURE I"},{key:"documents",label:"Documents list as per ANNEXURE II"},{key:"onlinePayment",label:"Online payment facility (UPI/Net Banking/Cards)"},{key:"wellMaintained",label:"Well-maintained furnished home with quality flooring"},{key:"cleanRooms",label:"Clean, airy, pest-free rooms with external ventilation"},{key:"comfortableBedding",label:"Comfortable bedding with quality fabrics"},{key:"roomSize",label:"Minimum room & bathroom size compliance"},{key:"cleanKitchen",label:"Smoke-free, clean, hygienic, odor-free kitchen"},{key:"cutleryCrockery",label:"Good quality cutlery and crockery"},{key:"waterFacility",label:"RO/Aquaguard/Mineral water availability"},{key:"wasteDisposal",label:"Waste disposal as per municipal laws"},{key:"energySavingLights",label:"Energy-saving lights (CFL/LED) in rooms & public areas"},{key:"visitorBook",label:"Visitor book and feedback facilities"},{key:"doctorDetails",label:"Doctor names, addresses, phone numbers displayed"},{key:"luggageAssistance",label:"Lost luggage assistance facilities"},{key:"fireEquipment",label:"Basic fire equipment available"},{key:"guestRegister",label:"Guest check-in/out register (with passport details for foreigners)"},{key:"cctvCameras",label:"CCTV cameras in common areas"}],sb=[{key:"parking",label:"Parking with adequate road width"},{key:"attachedBathroom",label:"Attached private bathroom with toiletries"},{key:"toiletAmenities",label:"Toilet with seat, lid, and toilet paper"},{key:"hotColdWater",label:"Hot & cold running water with sewage connection"},{key:"waterConservation",label:"Water conservation taps/showers"},{key:"diningArea",label:"Dining area serving fresh & hygienic food"},{key:"wardrobe",label:"Wardrobe with minimum 4 hangers in guest rooms"},{key:"storage",label:"Cabinets or drawers for storage in rooms"},{key:"furniture",label:"Quality chairs, work desk, and furniture"},{key:"laundry",label:"Washing machine/dryer or laundry services"},{key:"refrigerator",label:"Refrigerator in homestay"},{key:"lounge",label:"Lounge or sitting arrangement in lobby"},{key:"heatingCooling",label:"Heating & cooling in closed public rooms"},{key:"luggageHelp",label:"Assistance with luggage on request"},{key:"safeStorage",label:"Safe storage facilities in rooms"},{key:"securityGuard",label:"Security guard facilities"},{key:"himachaliCrafts",label:"Promotion of Himachali handicrafts & architecture"},{key:"rainwaterHarvesting",label:"Rainwater harvesting system"}],iz=e=>e.reduce((t,n)=>(t[n.key]=!1,t),{});function _ct(){var ee;const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),{data:s,isLoading:i,refetch:a}=rt({queryKey:[`/api/da/inspections/${e}`],enabled:!!e,staleTime:0,refetchOnMount:!0}),o=lu({resolver:hf(Sct),mode:"onChange",defaultValues:{actualInspectionDate:sr(new Date,"yyyy-MM-dd"),roomCountVerified:void 0,categoryMeetsStandards:void 0,mandatoryChecklist:iz(nb),mandatoryRemarks:"",desirableChecklist:iz(sb),desirableRemarks:"",fireSafetyCompliant:!1,structuralSafety:!1,overallSatisfactory:void 0,recommendedCategory:void 0,actualRoomCount:void 0,recommendation:"approve",detailedFindings:"",objectionDetails:"",earlyInspectionOverride:!1,earlyInspectionReason:""}}),l=Ot({mutationFn:async Ee=>await lt("POST",`/api/da/inspections/${e}/submit-report`,Ee),onSuccess:()=>{n({title:"Report Submitted",description:"Your inspection report has been submitted successfully."}),er.invalidateQueries({queryKey:["/api/da/inspections"]}),er.invalidateQueries({queryKey:[`/api/da/inspections/${e}`]}),a(),t("/da/inspections")},onError:Ee=>{n({title:"Submission Failed",description:Ee.message,variant:"destructive"})}}),c=Ee=>{l.mutate(Ee)};if(i)return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsx(Lr,{className:"h-12 w-2/3"}),r.jsx(Lr,{className:"h-96 w-full"})]});if(!s||s.reportSubmitted)return r.jsx("div",{className:"container mx-auto p-6",children:r.jsx(me,{children:r.jsx(ge,{className:"pt-6 text-center py-12",children:s!=null&&s.reportSubmitted?r.jsxs(r.Fragment,{children:[r.jsx(kr,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"Report Already Submitted"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You have already submitted a report for this inspection."}),r.jsxs(te,{className:"mt-4",onClick:()=>t("/da/inspections"),children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Inspections"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(Kr,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"Inspection Not Found"}),r.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"The inspection order you're looking for doesn't exist."}),r.jsxs(te,{className:"mt-4",onClick:()=>t("/da/inspections"),children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Inspections"]})]})})})});const{order:d,application:u,owner:h}=s,f=new Date(d.inspectionDate),m=new Date,p=o.watch("earlyInspectionOverride")??!1,g=gv(f,sz);sr(f,"yyyy-MM-dd"),sr(m,"yyyy-MM-dd");const v=f<=m,x=v?m:f,y=sr(x,"yyyy-MM-dd"),j=g<=x,N=sr(p?j?g:x:f,"yyyy-MM-dd");sr(g,"yyyy-MM-dd");const S=Math.max(0,uc(m,f)),T=S>0,C=`${sz} days`,A=o.watch("mandatoryChecklist")||{},R=o.watch("desirableChecklist")||{},k=Object.values(A),O=Object.values(R),$=k.filter(Boolean).length,D=O.filter(Boolean).length,q=nb.length,M=sb.length,L=$===q,P=o.watch("recommendation")!=="raise_objections",z=o.formState.isValid&&(!P||L),Z=["border-rose-200 bg-rose-50 text-rose-900 dark:border-rose-900 dark:bg-rose-950/40 dark:text-rose-100","border-orange-200 bg-orange-50 text-orange-900 dark:border-orange-900 dark:bg-orange-950/40 dark:text-orange-100","border-amber-200 bg-amber-50 text-amber-900 dark:border-amber-900 dark:bg-amber-950/40 dark:text-amber-100","border-yellow-200 bg-yellow-50 text-yellow-900 dark:border-yellow-900 dark:bg-yellow-950/40 dark:text-yellow-100","border-lime-200 bg-lime-50 text-lime-900 dark:border-lime-900 dark:bg-lime-950/40 dark:text-lime-100","border-emerald-200 bg-emerald-50 text-emerald-900 dark:border-emerald-900 dark:bg-emerald-950/40 dark:text-emerald-100"],F=Math.min(Math.floor($/3),Z.length-1),W=P?Z[F]:"border-emerald-200 bg-emerald-50 text-emerald-900 dark:border-emerald-800 dark:bg-emerald-900/20 dark:text-emerald-100",G=["bg-rose-300 border-rose-400 dark:bg-rose-900 dark:border-rose-800","bg-orange-300 border-orange-400 dark:bg-orange-900 dark:border-orange-800","bg-amber-300 border-amber-400 dark:bg-amber-900 dark:border-amber-800","bg-yellow-300 border-yellow-400 dark:bg-yellow-900 dark:border-yellow-800","bg-lime-300 border-lime-400 dark:bg-lime-900 dark:border-lime-800","bg-green-300 border-green-400 dark:bg-green-900 dark:border-green-800"],H=Array.from({length:Math.ceil(q/3)},(Ee,Re)=>{const oe=(Re+1)*3;return{threshold:oe,active:$>=oe,tone:G[Math.min(Re,G.length-1)]}}),se=["border-slate-200 bg-slate-50 text-slate-700 dark:border-slate-800 dark:bg-slate-900/40 dark:text-slate-200","border-slate-200 bg-slate-100 text-slate-800 dark:border-slate-700 dark:bg-slate-900/30 dark:text-slate-100","border-sky-200 bg-sky-50 text-sky-900 dark:border-sky-900 dark:bg-sky-950/30 dark:text-sky-100","border-blue-200 bg-blue-50 text-blue-900 dark:border-blue-900 dark:bg-blue-950/30 dark:text-blue-100","border-indigo-200 bg-indigo-50 text-indigo-900 dark:border-indigo-900 dark:bg-indigo-950/30 dark:text-indigo-100","border-indigo-200 bg-indigo-100 text-indigo-900 dark:border-indigo-800 dark:bg-indigo-900/40 dark:text-indigo-50"],J=Math.min(Math.floor(D/3),se.length-1),ie=se[J],X=["bg-slate-200 border-slate-300 dark:bg-slate-800 dark:border-slate-700","bg-slate-300 border-slate-400 dark:bg-slate-700 dark:border-slate-600","bg-sky-200 border-sky-300 dark:bg-sky-900 dark:border-sky-800","bg-sky-300 border-sky-400 dark:bg-sky-800 dark:border-sky-700","bg-blue-300 border-blue-400 dark:bg-blue-800 dark:border-blue-700","bg-indigo-300 border-indigo-400 dark:bg-indigo-800 dark:border-indigo-700"],he=Array.from({length:Math.ceil(M/3)},(Ee,Re)=>{const oe=(Re+1)*3;return{threshold:oe,active:D>=oe,tone:X[Math.min(Re,X.length-1)]}}),fe=()=>{const Ee=nb.reduce((Re,oe)=>(Re[oe.key]=!0,Re),{});o.setValue("mandatoryChecklist",Ee,{shouldDirty:!0,shouldValidate:!0})},Q=()=>{const Ee=nb.reduce((Re,oe)=>(Re[oe.key]=!1,Re),{});o.setValue("mandatoryChecklist",Ee,{shouldDirty:!0,shouldValidate:!0})},Oe=()=>{const Ee=sb.reduce((Re,oe)=>(Re[oe.key]=!0,Re),{});o.setValue("desirableChecklist",Ee,{shouldDirty:!0,shouldValidate:!0})},ve=()=>{const Ee=sb.reduce((Re,oe)=>(Re[oe.key]=!1,Re),{});o.setValue("desirableChecklist",Ee,{shouldDirty:!0,shouldValidate:!0})};return r.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{children:[r.jsxs(te,{variant:"ghost",onClick:()=>t("/da/inspections"),className:"mb-2","data-testid":"button-back",children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Inspections"]}),r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inspection Report"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Submit ANNEXURE-III compliant inspection findings"})]})}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Property Information"})}),r.jsx(ge,{className:"grid gap-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Property Name"}),r.jsx("p",{className:"font-medium",children:u==null?void 0:u.propertyName})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Application Number"}),r.jsx("p",{className:"font-medium",children:u==null?void 0:u.applicationNumber})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Category"}),r.jsx("div",{children:r.jsx(ze,{variant:"outline",children:(ee=u==null?void 0:u.category)==null?void 0:ee.toUpperCase()})})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Owner"}),r.jsxs("p",{className:"font-medium",children:[h==null?void 0:h.fullName,"  ",h==null?void 0:h.mobile]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Inspection Address"}),r.jsxs("p",{className:"font-medium flex items-start gap-2",children:[r.jsx(Js,{className:"w-4 h-4 mt-1 text-muted-foreground"}),d.inspectionAddress]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled Date"}),r.jsxs("p",{className:"font-medium flex items-center gap-2",children:[r.jsx(Al,{className:"w-4 h-4 text-muted-foreground"}),sr(new Date(d.inspectionDate),"PPP")]})]}),(u==null?void 0:u.dtdoRemarks)&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("span",{className:"text-sm text-sky-700 font-medium",children:"DTDO Instructions (Required)"}),r.jsx("p",{className:"mt-1 p-3 bg-sky-50 dark:bg-sky-950/20 rounded-lg",children:u.dtdoRemarks})]}),d.specialInstructions&&r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Owner Message"}),r.jsx("p",{className:"mt-1 p-3 bg-orange-50 dark:bg-orange-950/20 rounded-lg",children:d.specialInstructions})]})]})})]}),r.jsx(du,{...o,children:r.jsxs("form",{onSubmit:o.handleSubmit(c),className:"space-y-6",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Inspection Details"})}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx(ot,{control:o.control,name:"actualInspectionDate",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Actual Inspection Date *"}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-muted-foreground",children:[r.jsxs(ze,{variant:"outline",className:"bg-muted/40",children:["Scheduled: ",sr(f,"PPP")]}),T?r.jsxs(ze,{variant:"destructive",children:[S," ",S===1?"day":"days"," overdue"]}):r.jsx(ze,{variant:"outline",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-950/20",children:"On schedule"})]}),r.jsx(dt,{children:r.jsx(Pe,{type:"date",min:N,max:y,...Ee,"data-testid":"input-inspection-date"})}),r.jsx(ys,{children:v?r.jsxs(r.Fragment,{children:["Select a visit date between"," ",sr(p?g:f,"PPP")," and"," ",sr(m,"PPP"),"."]}):r.jsxs(r.Fragment,{children:["Inspection is scheduled for ",sr(f,"PPP"),". If you inspected up to"," ",C," early, enable the override and add a justification."]})}),p&&!j&&r.jsxs("p",{className:"text-xs text-amber-600",children:["Early visit logging opens on ",sr(g,"PPP")," (7 days before schedule)."]}),T&&r.jsxs("p",{className:"text-sm text-amber-600",children:["Inspection is ",S," ",S===1?"day":"days"," past schedule. Request DTDO for a new date if the visit could not be completed."]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:o.control,name:"earlyInspectionOverride",render:({field:Ee})=>r.jsx(at,{className:"flex flex-col gap-2 rounded-lg border p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ht,{className:"text-base",children:"Log Earlier Visit"}),r.jsxs(ys,{children:["Enable if the physical inspection happened up to ",C," before the scheduled date."]})]}),r.jsx(dt,{children:r.jsx(Zn,{checked:Ee.value,onCheckedChange:Ee.onChange})})]})})}),p&&r.jsx(ot,{control:o.control,name:"earlyInspectionReason",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Reason for Early Inspection"}),r.jsx(ys,{children:"Provide context for DTDO on why the visit was advanced (minimum 15 characters)."}),r.jsx(dt,{children:r.jsx(Ur,{...Ee,rows:3,placeholder:"Explain why the inspection was completed ahead of the scheduled date."})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Basic Verification"}),r.jsx(Ue,{children:"Verify room count and category"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx(ot,{control:o.control,name:"roomCountVerified",render:({field:Ee})=>r.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ht,{className:"text-base",children:"Room Count Matches"}),r.jsxs(ys,{children:["Does the actual room count match the application? (Applied: ",u==null?void 0:u.totalRooms," rooms)"]})]}),r.jsx(dt,{children:r.jsx(Zn,{checked:Ee.value===!0,onCheckedChange:Re=>Ee.onChange(Re),"data-testid":"switch-room-count"})}),r.jsx(ct,{})]})}),o.watch("roomCountVerified")===!1&&r.jsx(ot,{control:o.control,name:"actualRoomCount",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Actual Room Count"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",...Ee,onChange:Re=>{const oe=Re.target.value;if(oe===""){Ee.onChange(void 0);return}const De=parseInt(oe,10);Ee.onChange(Number.isNaN(De)?void 0:De)},"data-testid":"input-actual-room-count"})}),r.jsx(ct,{})]})}),r.jsx(oc,{}),r.jsx(ot,{control:o.control,name:"categoryMeetsStandards",render:({field:Ee})=>{var Re;return r.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ht,{className:"text-base",children:"Category Meets Standards"}),r.jsxs(ys,{children:["Does the property meet the standards for ",(Re=u==null?void 0:u.category)==null?void 0:Re.toUpperCase()," category?"]})]}),r.jsx(dt,{children:r.jsx(Zn,{checked:Ee.value===!0,onCheckedChange:oe=>Ee.onChange(oe),"data-testid":"switch-category-standards"})}),r.jsx(ct,{})]})}}),o.watch("categoryMeetsStandards")===!1&&r.jsx(ot,{control:o.control,name:"recommendedCategory",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Recommended Category"}),r.jsx(dt,{children:r.jsxs(wc,{onValueChange:Ee.onChange,value:Ee.value,className:"flex gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"diamond",id:"diamond"}),r.jsx(ht,{htmlFor:"diamond",className:"font-normal cursor-pointer",children:"Diamond"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"gold",id:"gold"}),r.jsx(ht,{htmlFor:"gold",className:"font-normal cursor-pointer",children:"Gold"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ps,{value:"silver",id:"silver"}),r.jsx(ht,{htmlFor:"silver",className:"font-normal cursor-pointer",children:"Silver"})]})]})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"w-5 h-5 text-primary"}),"ANNEXURE-III Compliance Checklist"]}),r.jsx(Ue,{children:"HP Homestay Rules 2025 - Official Inspection Requirements"})]}),r.jsxs(ge,{className:"space-y-6",children:[r.jsx("div",{className:`rounded-xl border p-4 text-sm shadow-sm ${W}`,children:P?r.jsxs(r.Fragment,{children:[r.jsxs("p",{className:"text-base font-semibold",children:[$,"/",q," mandatory checks ON"]}),r.jsx("p",{children:L?"All mandatory requirements are ON. You can recommend verification.":"Turn on the remaining mandatory checks before recommending verification."}),r.jsx("div",{className:"mt-3 grid grid-cols-6 gap-1",children:H.map((Ee,Re)=>r.jsx("span",{className:`h-2 w-full rounded-full border transition-colors ${Ee.active?Ee.tone:"bg-white/70 border-white/80 dark:bg-slate-900/30 dark:border-slate-800"}`,"aria-label":`Mandatory checkpoints ${Re*3+1} to ${Math.min(Ee.threshold,q)} ${Ee.active?"complete":"pending"}`},`mandatory-segment-${Ee.threshold}`))})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-base font-semibold",children:"Submitting with objections"}),r.jsx("p",{children:"Mandatory checks can stay OFF while you document the issues below."}),r.jsx("div",{className:"mt-3 grid grid-cols-6 gap-1 opacity-70",children:H.map((Ee,Re)=>r.jsx("span",{className:`h-2 w-full rounded-full border ${Ee.active?Ee.tone:"bg-white/70 border-white/80 dark:bg-slate-900/30 dark:border-slate-800"}`,"aria-label":`Mandatory checkpoints ${Re*3+1} to ${Math.min(Ee.threshold,q)} progress`},`mandatory-segment-override-${Ee.threshold}`))})]})}),r.jsxs(aa,{defaultValue:"mandatory",className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-2",children:[r.jsxs(Pr,{value:"mandatory",className:"flex items-center gap-2","data-testid":"tab-mandatory",children:[r.jsx(Gi,{className:"w-4 h-4"}),r.jsx("span",{children:"Section A: Mandatory"}),r.jsxs(ze,{variant:"outline",className:"ml-auto",children:[$,"/",q]})]}),r.jsxs(Pr,{value:"desirable",className:"flex items-center gap-2","data-testid":"tab-desirable",children:[r.jsx(dv,{className:"w-4 h-4"}),r.jsx("span",{children:"Section B: Desirable"}),r.jsxs(ze,{variant:"outline",className:"ml-auto",children:[D,"/",M]})]})]}),r.jsxs(Rr,{value:"mandatory",className:"space-y-4 mt-6",children:[r.jsxs("div",{className:`flex flex-wrap items-center justify-between gap-3 rounded-lg border p-4 transition-colors ${L?"bg-emerald-50 border-emerald-200":"bg-rose-50 border-rose-200"}`,children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Mandatory requirements"}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["All ",q," switches must be ON to recommend verification."]})]}),r.jsxs(ze,{variant:L?"default":"destructive",children:[$,"/",q]})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[r.jsx("p",{children:"Toggle each clause to mark compliance."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{type:"button",variant:"outline",size:"sm",onClick:fe,"data-testid":"button-select-all-mandatory",children:[r.jsx(D3,{className:"w-4 h-4 mr-2"}),"Mark all Yes"]}),r.jsxs(te,{type:"button",variant:"outline",size:"sm",onClick:Q,"data-testid":"button-clear-all-mandatory",children:[r.jsx(d8,{className:"w-4 h-4 mr-2"}),"Clear all"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:nb.map((Ee,Re)=>r.jsx(ot,{control:o.control,name:`mandatoryChecklist.${Ee.key}`,render:({field:oe})=>r.jsxs(at,{className:"rounded-lg border p-3 flex items-center justify-between gap-4",children:[r.jsxs(ht,{className:"flex-1 text-sm font-medium flex items-center gap-2 cursor-pointer pt-1.5 pb-1.5",children:[r.jsxs("span",{className:"text-muted-foreground font-medium min-w-[1.5rem]",children:[Re+1,"."]}),Ee.label]}),r.jsx(dt,{children:r.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide",children:[r.jsx("span",{className:oe.value?"text-emerald-600":"text-rose-600",children:oe.value?"Yes":"No"}),r.jsx(Zn,{checked:oe.value===!0,onCheckedChange:De=>oe.onChange(De)})]})})]})},Ee.key))})]}),r.jsxs(Rr,{value:"desirable",className:"space-y-4 mt-6",children:[r.jsxs("div",{className:`flex flex-wrap items-center justify-between gap-3 rounded-xl border p-4 shadow-sm ${ie}`,children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold",children:"Desirable enhancements"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended improvements for guest comfort (optional)."})]}),r.jsxs(ze,{variant:"secondary",children:[D,"/",M]})]}),r.jsx("div",{className:"grid grid-cols-6 gap-1",children:he.map((Ee,Re)=>r.jsx("span",{className:`h-2 rounded-full border ${Ee.active?Ee.tone:"bg-white/60 border-white/70 dark:bg-slate-900/30 dark:border-slate-800"}`,"aria-label":`Desirable checkpoints ${Re*3+1} to ${Math.min(Ee.threshold,M)} ${Ee.active?"available":"pending"}`},`desirable-segment-${Ee.threshold}`))}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground",children:[r.jsx("p",{children:"Mark what is available today."}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{type:"button",variant:"outline",size:"sm",onClick:Oe,"data-testid":"button-select-all-desirable",children:[r.jsx(D3,{className:"w-4 h-4 mr-2"}),"Mark all Yes"]}),r.jsxs(te,{type:"button",variant:"outline",size:"sm",onClick:ve,"data-testid":"button-clear-all-desirable",children:[r.jsx(d8,{className:"w-4 h-4 mr-2"}),"Clear all"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:sb.map((Ee,Re)=>r.jsx(ot,{control:o.control,name:`desirableChecklist.${Ee.key}`,render:({field:oe})=>r.jsxs(at,{className:"rounded-lg border p-3 flex items-center justify-between gap-4",children:[r.jsxs(ht,{className:"flex-1 text-sm font-medium flex items-center gap-2 cursor-pointer pt-1.5 pb-1.5",children:[r.jsxs("span",{className:"text-muted-foreground font-medium min-w-[1.5rem]",children:[Re+1,"."]}),Ee.label]}),r.jsx(dt,{children:r.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold uppercase tracking-wide",children:[r.jsx("span",{className:oe.value?"text-emerald-600":"text-muted-foreground",children:oe.value?"Yes":"No"}),r.jsx(Zn,{checked:oe.value===!0,onCheckedChange:De=>oe.onChange(De)})]})})]})},Ee.key))})]})]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Overall Assessment"})}),r.jsx(ge,{className:"space-y-4",children:r.jsx(ot,{control:o.control,name:"overallSatisfactory",render:({field:Ee})=>r.jsxs(at,{className:"flex flex-row items-center justify-between rounded-lg border p-4 bg-muted/50",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx(ht,{className:"text-base font-semibold",children:"Overall Satisfactory"}),r.jsx(ys,{children:"Property meets all requirements for homestay operation"})]}),r.jsx(dt,{children:r.jsx(Zn,{checked:Ee.value===!0,onCheckedChange:Re=>Ee.onChange(Re),"data-testid":"switch-overall-satisfactory"})}),r.jsx(ct,{})]})})})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"Findings & Recommendation"})}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx(ot,{control:o.control,name:"detailedFindings",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Overall Inspection Summary *"}),r.jsx(ys,{children:"Capture the key highlights of this visit (minimum 20 characters). This summary is stored with the RC."}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"Example: Property meets Gold benchmarks. All rooms spotless and safety gear in place...",className:"min-h-[150px]",...Ee,"data-testid":"textarea-detailed-findings"})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:o.control,name:"recommendation",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Final Recommendation *"}),r.jsx(dt,{children:r.jsxs(wc,{onValueChange:Ee.onChange,value:Ee.value,className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-testid":"radio-recommendation",children:[r.jsxs("div",{className:"flex items-center space-x-3 border rounded-lg p-4 cursor-pointer hover-elevate",children:[r.jsx(Ps,{value:"approve",id:"approve"}),r.jsxs(ht,{htmlFor:"approve",className:"flex items-center gap-2 font-normal cursor-pointer flex-1",children:[r.jsx(kr,{className:"w-5 h-5 text-green-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Recommended for Verification"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Ready for DTDO verification"})]})]})]}),r.jsxs("div",{className:"flex items-center space-x-3 border rounded-lg p-4 cursor-pointer hover-elevate",children:[r.jsx(Ps,{value:"raise_objections",id:"raise_objections"}),r.jsxs(ht,{htmlFor:"raise_objections",className:"flex items-center gap-2 font-normal cursor-pointer flex-1",children:[r.jsx(Kr,{className:"w-5 h-5 text-orange-600"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:"Raise Objections"}),r.jsx("div",{className:"text-xs text-muted-foreground",children:"Issues need resolution"})]})]})]})]})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"rounded-lg border border-amber-200 bg-amber-50 p-4 flex items-start gap-3",children:[r.jsx(Zs,{id:"objectionOverride",checked:o.watch("recommendation")==="raise_objections",onCheckedChange:Ee=>{o.setValue("recommendation",Ee?"raise_objections":"approve",{shouldValidate:!0,shouldDirty:!0})}}),r.jsxs("label",{htmlFor:"objectionOverride",className:"text-sm text-amber-900 space-y-1 cursor-pointer flex-1",children:[r.jsx("span",{className:"font-semibold block",children:"Allow submission with objections"}),r.jsx("span",{className:"text-amber-900/80 block",children:'Automatically selects "Raise Objections" so you can submit the report even if some verification steps are incomplete. Provide the objection details below.'})]})]}),r.jsx(ot,{control:o.control,name:"objectionDetails",render:({field:Ee})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Objection Details"}),r.jsx(ys,{children:"Visible only when submitting with objections. Share what needs correction."}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"Describe the issues that must be resolved before approval...",className:"min-h-[100px]",...Ee,disabled:o.watch("recommendation")!=="raise_objections","data-testid":"textarea-objection-details"})}),r.jsx(ct,{})]})})]})]}),r.jsxs("div",{className:"flex flex-col gap-2",children:[!z&&r.jsx("p",{className:"text-sm text-amber-600 text-right",children:P&&!L?"Turn on every mandatory checklist item before recommending verification.":"Complete all required fields (detailed findings, early visit justification, etc.) before submitting."}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx(te,{type:"button",variant:"outline",onClick:()=>t("/da/inspections"),"data-testid":"button-cancel",children:"Cancel"}),r.jsx(te,{type:"submit",disabled:!z||l.isPending,"data-testid":"button-submit-report",children:l.isPending?r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Zd,{className:"w-4 h-4 mr-2"}),"Submit Report"]})})]})]})]})})]})}const Cct=I.object({fullName:I.string().min(3,"Full name must be at least 3 characters"),firstName:I.string().min(1).optional().or(I.literal("")),lastName:I.string().min(1).optional().or(I.literal("")),mobile:I.string().regex(/^[6-9]\d{9}$/,"Enter a valid 10-digit mobile number"),email:I.string().email("Enter a valid email").optional().or(I.literal("")),alternatePhone:I.string().regex(/^[6-9]\d{9}$/,"Enter a valid 10-digit mobile number").optional().or(I.literal("")),officePhone:I.string().regex(/^[0-9+\-()\s]{5,20}$/,"Enter a valid office contact number").optional().or(I.literal("")),designation:I.string().max(120).optional().or(I.literal("")),department:I.string().max(120).optional().or(I.literal("")),employeeId:I.string().max(50).optional().or(I.literal("")),officeAddress:I.string().max(500).optional().or(I.literal("")),signatureUrl:I.string().optional().or(I.literal(""))}),Act=I.object({newPassword:I.string().min(6,"New password must be at least 6 characters"),confirmPassword:I.string().min(1,"Please confirm your password")}).refine(e=>e.newPassword===e.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),kct=e=>({fullName:e.fullName||"",firstName:e.firstName||"",lastName:e.lastName||"",mobile:e.mobile||"",email:e.email||"",alternatePhone:e.alternatePhone||"",officePhone:e.officePhone||"",designation:e.designation||"",department:e.department||"",employeeId:e.employeeId||"",officeAddress:e.officeAddress||"",signatureUrl:e.signatureUrl||""});function Yhe({roleBadgeLabel:e,roleBadgeClassName:t,changePasswordEndpoint:n="/api/staff/change-password",updateProfileEndpoint:s="/api/staff/profile",roleHelperText:i="Role, username, and district assignments are centrally managed. Contact the system administrator for changes."}){const{toast:a}=Tr(),{data:o,isLoading:l}=rt({queryKey:["/api/auth/me"]}),c=o==null?void 0:o.user,d=lu({resolver:hf(Cct),defaultValues:{fullName:"",firstName:"",lastName:"",mobile:"",email:"",alternatePhone:"",officePhone:"",designation:"",department:"",employeeId:"",officeAddress:"",signatureUrl:""},values:c?kct(c):void 0}),u=lu({resolver:hf(Act),defaultValues:{newPassword:"",confirmPassword:""}}),h=Ot({mutationFn:async g=>{await lt("PATCH",s,g)},onSuccess:()=>{er.invalidateQueries({queryKey:["/api/auth/me"]}),a({title:"Profile updated",description:"Your staff profile information has been saved."})},onError:g=>{a({variant:"destructive",title:"Failed to update profile",description:g.message||"Please try again."})}}),f=Ot({mutationFn:async g=>{await lt("POST",n,g)},onSuccess:()=>{u.reset({newPassword:"",confirmPassword:""}),a({title:"Password updated",description:"Use your new password the next time you log in."})},onError:g=>{a({variant:"destructive",title:"Failed to change password",description:g.message||"Please verify your credentials and try again."})}}),m=g=>{h.mutate(g)},p=g=>{f.mutate({newPassword:g.newPassword})};return l?r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})}):c?r.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-4xl space-y-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(li,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"My Profile"})]}),r.jsx("p",{className:"text-muted-foreground",children:"Manage your personal details, official contact information, and credentials"})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx(Gi,{className:"h-5 w-5 text-primary"}),r.jsx("span",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Role & Assignment"})]}),r.jsx(Ue,{children:i})]})}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{className:"text-sm font-medium text-muted-foreground",children:"Role"}),r.jsx(ze,{variant:"outline",className:t||"bg-blue-50 text-blue-700 dark:bg-blue-950/20",children:e})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{className:"text-sm font-medium text-muted-foreground",children:"Assigned District"}),r.jsx(ze,{variant:"outline",className:"bg-green-50 text-green-700 dark:bg-green-950/20",children:c.district||"Not Assigned"})]})]}),c.username&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground",children:[r.jsx(Dxe,{className:"h-4 w-4"}),"Username (read-only)"]}),r.jsx(Pe,{value:c.username,disabled:!0,className:"lowercase bg-muted"})]})]})]}),r.jsx(du,{...d,children:r.jsxs("form",{onSubmit:d.handleSubmit(m),className:"space-y-6",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Personal & Contact Information"}),r.jsx(Ue,{children:"Keep your personal and contact details up to date"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx(ot,{control:d.control,name:"fullName",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Full Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Enter your full name",characterRestriction:"alpha-space",maxLength:120,"data-testid":"input-full-name",...g})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:d.control,name:"firstName",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"First Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Given name",characterRestriction:"alpha-space",maxLength:100,...g})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:d.control,name:"lastName",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Last Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Surname",characterRestriction:"alpha-space",maxLength:100,...g})}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:d.control,name:"mobile",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Mobile Number"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"10-digit mobile",characterRestriction:"numeric",maxLength:10,"data-testid":"input-mobile",...g})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:d.control,name:"alternatePhone",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Alternate Mobile (Optional)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Alternate 10-digit mobile",characterRestriction:"numeric",maxLength:10,...g})}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:d.control,name:"email",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Official Email"}),r.jsx(dt,{children:r.jsx(Pe,{type:"email",placeholder:"name@department.gov.in",...g})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:d.control,name:"officePhone",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Office Phone (Optional)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"e.g. 0177-2658127",maxLength:20,...g})}),r.jsx(ct,{})]})})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Official Details"}),r.jsx(Ue,{children:"Share how applicants and colleagues can reach you"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:d.control,name:"designation",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Designation"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"e.g. District Tourism Development Officer",maxLength:120,...g})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:d.control,name:"department",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Department / Office"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Department / Office name",maxLength:120,...g})}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:d.control,name:"employeeId",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Employee / Staff ID (Optional)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"ID or reference number",maxLength:50,...g})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:d.control,name:"officeAddress",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Office Address"}),r.jsx(dt,{children:r.jsx(Ur,{rows:4,placeholder:"Building, street, town, PIN",maxLength:500,...g})}),r.jsx(ct,{})]})})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Digital Signature"}),r.jsx(Ue,{children:"Upload your digital signature for official documents"})]}),r.jsx(ge,{children:r.jsx(ot,{control:d.control,name:"signatureUrl",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Signature Image"}),r.jsx(dt,{children:r.jsx(Wc,{label:"Upload Signature",accept:".png,.jpg,.jpeg",maxFiles:1,fileType:"signature",category:"photos",onUploadComplete:v=>{v.length>0?g.onChange(v[0].filePath):g.onChange("")},existingFiles:g.value?[{filePath:g.value,fileName:"Signature",fileSize:0,mimeType:"image/png"}]:[]})}),r.jsx(ct,{})]})})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(te,{type:"submit",disabled:h.isPending,"data-testid":"button-save-profile",children:h.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"mr-2 h-4 w-4"}),"Update Profile"]})})})]})}),r.jsx(du,{...u,children:r.jsx("form",{onSubmit:u.handleSubmit(p),children:r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(su,{className:"h-5 w-5 text-primary"}),"Change Password"]}),r.jsx(Ue,{children:"Update your password to keep your account secure"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(ot,{control:u.control,name:"newPassword",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"New Password"}),r.jsx(dt,{children:r.jsx(Pe,{type:"password",placeholder:"At least 6 characters",...g})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:u.control,name:"confirmPassword",render:({field:g})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Confirm New Password"}),r.jsx(dt,{children:r.jsx(Pe,{type:"password",placeholder:"Re-enter new password",...g})}),r.jsx(ct,{})]})})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx(te,{type:"submit",variant:"default",disabled:f.isPending,"data-testid":"button-change-password",children:f.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(su,{className:"mr-2 h-4 w-4"}),"Change Password"]})})})]})]})})})]}):r.jsx("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:r.jsx(me,{children:r.jsx(ge,{className:"p-8 text-center text-muted-foreground",children:"Unable to load profile information."})})})}function Pct(){return r.jsx(Yhe,{roleBadgeLabel:"Dealing Assistant (DA)",roleBadgeClassName:"bg-blue-50 text-blue-700 dark:bg-blue-950/20"})}const az=e=>{if(!e)return!1;const t=e instanceof Date?e:new Date(e);return a6(t)},oz=e=>{if(!e)return!1;const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?!1:uc(new Date,t)<=30},Tct=e=>Nw(e);function Ect(){Dr();const n=new URLSearchParams(window.location.search).get("view")==="legacy",[s,i]=b.useState("new-queue"),[a,o]=b.useState("new-queue-forwarded"),[l,c]=b.useState("newest"),[d,u]=b.useState("all"),[h,f]=b.useState("month"),m=b.useMemo(()=>new Set(["new-queue-forwarded","new-queue-review","process-reports","corrections-waiting","corrections-resubmitted"]),[]),p=ci(),g=()=>{p.invalidateQueries({queryKey:["/api/dtdo/applications"]}),p.invalidateQueries({queryKey:["/api/auth/me"]})},{data:v,isLoading:x}=rt({queryKey:["/api/dtdo/applications"]}),y=(v??[]).filter(Y=>!Tct(Y)),j=y,w=Y=>{var Ct;return!!((Ct=Y.latestCorrection)!=null&&Ct.createdAt||(Y.correctionSubmissionCount??0)>0)},N=b.useMemo(()=>new Set(["reverted_by_dtdo","objection_raised"]),[]),S=Y=>w(Y)||mf(Y.status)||N.has(Y.status),T=b.useCallback(Y=>{const Ct=Y.updatedAt??Y.submittedAt??Y.createdAt;return Ct?new Date(Ct).getTime():0},[]),C=b.useCallback(Y=>[...Y].sort((Ct,Vt)=>{const pt=T(Ct)-T(Vt);return l==="newest"?-pt:pt}),[T,l]),{data:A}=rt({queryKey:["/api/auth/me"]}),R=A==null?void 0:A.user,k=b.useMemo(()=>j.filter(Y=>Y.status==="forwarded_to_dtdo"),[j]),O=b.useMemo(()=>j.filter(Y=>Y.status==="payment_pending"||Y.status==="verified_for_payment"),[j]);b.useMemo(()=>j.filter(Y=>S(Y)&&Y.status!=="forwarded_to_dtdo"),[j,S]);const $=b.useMemo(()=>j.filter(Y=>Y.status==="dtdo_review"&&!w(Y)),[j]),D=b.useMemo(()=>j.filter(Y=>Y.status==="inspection_scheduled"),[j]),q=b.useMemo(()=>j.filter(Y=>Y.status==="inspection_under_review"),[j]),M=b.useMemo(()=>j.filter(Y=>N.has(Y.status)),[j,N]),L=b.useMemo(()=>M,[M]),V=b.useMemo(()=>j.filter(Y=>Y.status==="dtdo_review"&&w(Y)),[j]),P=b.useMemo(()=>j.filter(Y=>Y.status==="approved"&&az(Y.approvedAt??Y.updatedAt??null)),[j]),z=b.useMemo(()=>j.filter(Y=>Y.status==="approved"&&oz(Y.approvedAt??Y.updatedAt??null)),[y]),Z=b.useMemo(()=>y.filter(Y=>Y.status==="submitted"),[y]),F=b.useMemo(()=>Z.filter(Y=>!Xx(Y.applicationKind)),[Z]),W=b.useMemo(()=>Z.filter(Y=>Xx(Y.applicationKind)),[Z]),G=b.useMemo(()=>C(F),[F,C]);b.useMemo(()=>C(W),[W,C]);const H=b.useMemo(()=>y.filter(Y=>Y.status==="rejected"&&az(Y.updatedAt??Y.approvedAt??null)),[y]),se=b.useMemo(()=>y.filter(Y=>Y.status==="rejected"&&oz(Y.updatedAt??Y.approvedAt??null)),[y]);b.useMemo(()=>y.filter(Y=>!Xx(Y.applicationKind)),[y]),b.useMemo(()=>y.filter(Y=>Xx(Y.applicationKind)),[y]);const J=b.useCallback(Y=>{const Ct=(Y==null?void 0:Y.toLowerCase())||"";return Ct.includes("modification")||Ct.includes("cancel")},[]),ie=b.useCallback(Y=>((Y==null?void 0:Y.toLowerCase())||"").includes("amend"),[]),X=b.useMemo(()=>Z.filter(Y=>ie(Y.applicationKind)),[Z,ie]),he=b.useMemo(()=>Z.filter(Y=>J(Y.applicationKind)),[Z,J]),fe=b.useMemo(()=>C(k),[k,C]),Q=b.useMemo(()=>C($),[$,C]),Oe=b.useMemo(()=>C(O),[O,C]),ve=b.useMemo(()=>C(D),[D,C]),ee=b.useMemo(()=>C(q),[q,C]),Ee=b.useMemo(()=>C(L),[L,C]),Re=b.useMemo(()=>C(V),[V,C]),oe=h==="month"?P:z,De=h==="month"?H:se,tt=b.useMemo(()=>C(oe),[oe,C]),Qe=b.useMemo(()=>C(De),[De,C]),xe=b.useMemo(()=>C(P),[P,C]),ae=b.useMemo(()=>C(H),[H,C]),we=b.useMemo(()=>[{key:"new-queue",title:"Incoming Queue",description:"DA forwards and DTDO reviews ready to start.",icon:ir,actionCount:fe.length+Q.length,actionLabel:"Pick up forwarded files",pills:[{value:"new-queue-forwarded",label:"DA Forwards",count:fe.length,description:"Cleared by dealing assistants and awaiting your review.",applications:fe,actionLabel:"Start review",emptyTitle:"Nothing forwarded",emptyDescription:"DA will push files here once scrutiny is done."},{value:"new-queue-review",label:"DTDO Review",count:Q.length,description:"Files you opened and can resume anytime.",applications:Q,actionLabel:"Resume review",emptyTitle:"No files in review",emptyDescription:"Open a forwarded application to begin review."}]},{key:"process",title:"Under Process",description:"Field work progress, reports, and payments.",icon:Mi,actionLabel:"Clear inspections and payments",totalCount:ve.length+ee.length+Oe.length,pills:[{value:"process-scheduled",label:"Inspection Scheduled",count:ve.length,description:"Inspection orders assigned and awaiting reports.",applications:ve,actionLabel:"Manage inspection",emptyTitle:"No inspections scheduled",emptyDescription:"Schedule a visit once a case is ready."},{value:"process-reports",label:"Report submitted",count:ee.length,description:"Reports submitted and waiting for DTDO endorsement.",applications:ee,actionLabel:"Review report",emptyTitle:"No reports pending",emptyDescription:"Completed inspections will appear here."},{value:"process-payments",label:"Payments Pending",count:Oe.length,description:"Owners awaiting payment verification or unlock.",applications:Oe,actionLabel:Y=>Y.status==="verified_for_payment"?"Issue certificate":"Monitor payment",actionHint:Y=>Y.status==="verified_for_payment"?"Payment verifiedgenerate certificate.":"Awaiting gateway confirmation.",emptyTitle:"No payments pending",emptyDescription:"Once owners pay, you'll see them here."}]},{key:"corrections",title:"Corrections Desk",description:"Manage returned files and owner responses.",icon:Kr,actionCount:Re.length,actionLabel:"Awaiting DTDO confirmation",pills:[{value:"corrections-waiting",label:"Waiting Owner Response",count:Ee.length,description:"Owners still working on your objections.",applications:Ee,actionLabel:"Track objection",emptyTitle:"No owners pending",emptyDescription:"Every objection has been answered."},{value:"corrections-resubmitted",label:"Resubmitted",count:Re.length,description:"Owners responded and await your confirmation.",applications:Re,actionLabel:"Verify resubmission",emptyTitle:"No resubmissions yet",emptyDescription:"You'll be notified as soon as owners respond."}]},{key:"closures",title:"Completed",description:"Decisions finalized.",icon:kr,actionCount:tt.length,totalCount:tt.length+Qe.length,actionLabel:"Certificates issued",pills:[{value:"closures-approved",label:"Approved",count:tt.length,description:h==="month"?"Certificates issued in the current month.":"Certificates issued in the last 30 days.",applications:tt,actionLabel:"View certificate",emptyTitle:"No approvals yet",emptyDescription:"Finalize inspections to unlock approvals."},{value:"closures-rejected",label:"Rejected",count:Qe.length,description:h==="month"?"Applications declined this month.":"Applications declined in the last 30 days.",applications:Qe,actionLabel:"Review decision",emptyTitle:"No rejections",emptyDescription:"Declined files will show up here."}]},{key:"inflow",title:"DA Desk (Info)",description:"Owner submissions waiting at the DA stage (awareness only).",icon:ir,actionCount:G.length,actionLabel:"Awareness only",pills:[{value:"inflow-new",label:"New Application",count:G.length,description:"Brand-new homestays currently with DAs.",applications:G,actionLabel:"View details",emptyTitle:"No new registrations",emptyDescription:"DAs have no new registrations at the moment."},{value:"inflow-amend",label:"Amendments",count:X.length,description:"Add/remove room requests at DA.",applications:X,actionLabel:"View details",emptyTitle:"No amendments",emptyDescription:"No amendment requests pending at DA."},{value:"inflow-cancel",label:"Cancellation",count:he.length,description:"Cancellation requests at DA.",applications:he,actionLabel:"View details",emptyTitle:"No cancellations",emptyDescription:"No cancellation requests pending at DA."}]}],[fe,Q,ve,ee,Ee,Re,xe,ae,G,X,he,Oe]);b.useEffect(()=>{var Ct;if(!we.length)return;const Y=we.find(Vt=>Vt.key===s)??we[0];Y.key!==s&&(i(Y.key),o(((Ct=Y.pills[0])==null?void 0:Ct.value)??""))},[we,s,a]);const Te=we.find(Y=>Y.key===s)??we[0],qe=(Te==null?void 0:Te.pills.find(Y=>Y.value===a))??(Te==null?void 0:Te.pills[0]);if(x)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})});const Ke=Y=>{const Vt={forwarded_to_dtdo:{label:"Forwarded by DA",className:"bg-blue-50 text-blue-700 dark:bg-blue-950/20"},dtdo_review:{label:"Under Review",className:"bg-orange-50 text-orange-700 dark:bg-orange-950/20"},inspection_scheduled:{label:"Inspection Scheduled",className:"bg-purple-50 text-purple-700 dark:bg-purple-950/20"},inspection_under_review:{label:"Report Awaiting Review",className:"bg-green-50 text-green-700 dark:bg-green-950/20"},payment_pending:{label:"Awaiting Payment",className:"bg-amber-50 text-amber-800 dark:bg-amber-950/20"},verified_for_payment:{label:"Payment Verified",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-950/20"},reverted_by_dtdo:{label:"Reverted to Applicant",className:"bg-rose-50 text-rose-700 dark:bg-rose-950/20"},objection_raised:{label:"DTDO Objection",className:"bg-rose-50 text-rose-700 dark:bg-rose-950/20"}}[Y]||{label:Y,className:""};return r.jsx(ze,{variant:"outline",className:Vt.className,children:Vt.label})},Ge=Y=>{var Ht,wr;return["reverted_by_dtdo","sent_back_for_corrections","reverted_to_applicant","objection_raised"].includes(Y.status??"")?{label:"Waiting on owner",className:"bg-amber-50 text-amber-700 dark:bg-amber-950/20",relative:null}:!mf(Y.status)||!!!((Ht=Y.latestCorrection)!=null&&Ht.createdAt||(Y.correctionSubmissionCount??0)>0)?null:{label:"Owner resubmitted",className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-950/20",relative:(wr=Y.latestCorrection)!=null&&wr.createdAt?ap(new Date(Y.latestCorrection.createdAt),{addSuffix:!0}):null}},He=Y=>{const Ct={diamond:"bg-purple-50 text-purple-700 dark:bg-purple-950/20",gold:"bg-yellow-50 text-yellow-700 dark:bg-yellow-950/20",silver:"bg-gray-50 text-gray-700 dark:bg-gray-950/20"};return r.jsx(ze,{variant:"outline",className:Ct[Y.toLowerCase()]||"",children:Y.toUpperCase()})},nt=({application:Y,actionLabel:Ct,actionHint:Vt,actionsDisabled:pt=!1})=>{const Ht=Y.applicationKind,[,wr]=Dr(),wt=Y.status??"",Ut=Ge(Y),St=Y.submittedAt?sr(new Date(Y.submittedAt),"MMM dd, yyyy"):"N/A",Be=wt==="inspection_under_review"?`/dtdo/inspection-review/${Y.id}`:`/dtdo/applications/${Y.id}`,lr=()=>{pt||wr(Be)},Wt=yt=>{(yt.key==="Enter"||yt.key===" ")&&(yt.preventDefault(),lr())},It=typeof Ct=="function"?Ct(Y):Ct;return r.jsx("div",{className:Xe("px-4 py-3 border-b border-border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-inset transition-colors last:border-b-0",pt?"cursor-default bg-muted/50":"hover:bg-muted/30 cursor-pointer"),role:"button",tabIndex:0,onClick:lr,onKeyDown:Wt,"aria-label":`Open application ${Y.applicationNumber}`,children:r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center",children:r.jsx(ir,{className:"w-5 h-5 text-amber-600"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-semibold",children:Y.propertyName}),He(Y.category),Ke(wt),Ut&&r.jsx(ze,{variant:"outline",className:Ut.className,children:Ut.label}),r.jsx(Poe,{kind:Ht})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground mt-1",children:[r.jsx("span",{className:"font-mono",children:Y.applicationNumber}),r.jsx("span",{children:Y.ownerName}),Y.daName&&r.jsxs("span",{className:"text-blue-600",children:["via ",Y.daName]}),r.jsx("span",{className:"hidden sm:inline",children:hu(Y.district)}),r.jsx("span",{className:"hidden md:inline",children:St})]})]})]}),r.jsxs(te,{size:"sm",onClick:yt=>{yt.stopPropagation(),lr()},disabled:pt,variant:pt?"outline":"default",className:"flex-shrink-0",children:[It,!pt&&r.jsx(sa,{className:"w-4 h-4 ml-1"})]})]})})};return r.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n?"Existing RC Queue":"DTDO Dashboard"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:R!=null&&R.district?`District: ${hu(R.district)}`:"Review and process homestay applications"})]}),r.jsxs(te,{variant:"outline",onClick:g,"data-testid":"button-dtdo-refresh",className:"w-fit",children:[r.jsx(Na,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-5",children:we.map(Y=>{const Ct=Y.icon,Vt=s===Y.key,pt=Y.totalCount??Y.pills.reduce((wt,Ut)=>wt+Ut.count,0),Ht=Y.actionCount?Y.actionCount>0:pt>0,wr=Y.key==="corrections"&&pt>0;return r.jsxs(me,{className:Xe("p-3 sm:p-4 flex flex-col gap-1 cursor-pointer transition-all border border-border focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-xl relative overflow-hidden dashboard-card-hover",Vt?"ring-2 ring-primary":"",Ht?"dashboard-card-shimmer":"",wr?"dashboard-card-shimmer-amber":""),onClick:()=>i(Y.key),tabIndex:0,role:"button",onKeyDown:wt=>{(wt.key==="Enter"||wt.key===" ")&&i(Y.key)},children:[r.jsxs("div",{className:"flex items-start justify-between mb-1",children:[r.jsxs("div",{className:"space-y-0.5",children:[r.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:Y.title}),r.jsx("div",{className:"flex items-baseline gap-1",children:r.jsx("span",{className:Xe("text-3xl font-bold leading-none tracking-tight",Ht||pt>0?"text-foreground":"text-muted-foreground/50"),children:pt})})]}),r.jsx("div",{className:Xe("p-2 rounded-full",Vt?"bg-primary/10 text-primary":"bg-muted text-muted-foreground"),children:r.jsx(Ct,{className:"w-5 h-5"})})]}),Y.key==="completed"?r.jsx("div",{onClick:wt=>wt.stopPropagation(),children:r.jsxs(pr,{value:h,onValueChange:wt=>f(wt),children:[r.jsx(ur,{className:"h-5 text-[10px] w-fit gap-1 bg-transparent border-0 p-0 text-muted-foreground hover:text-foreground focus:ring-0",children:r.jsx("span",{className:"truncate",children:h==="month"?"Decisions this month":"Decisions last 30 days"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"month",children:"This month"}),r.jsx(it,{value:"30d",children:"Last 30 days"})]})]})}):r.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1 mb-2",children:Y.description}),r.jsx("div",{className:"mt-auto flex flex-col gap-1 w-full text-[11px]",children:Y.pills.map(wt=>{const Ut=m.has(wt.value)&&wt.count>0,St=wt.value===a&&Y.key===s,Be=Y.key==="completed";return r.jsxs("button",{type:"button",onClick:lr=>{lr.stopPropagation(),i(Y.key),o(wt.value)},className:Xe("flex items-center justify-between w-full px-2 py-1 rounded transition-all text-left",Ut||Be&&wt.count>0?Y.key==="corrections"?"bg-amber-50 hover:bg-amber-100 text-amber-900":"bg-primary/10 hover:bg-primary/15 text-primary-900":"bg-muted/30 hover:bg-muted/50 text-muted-foreground",St?"ring-1 ring-primary shadow-sm":"",Ut&&!St?"animate-pulse-subtle":""),children:[r.jsx("span",{className:"font-medium truncate mr-2",children:wt.label}),r.jsx("span",{className:Xe("min-w-[1.5rem] text-center rounded-full px-1.5 py-0.5 text-[10px] font-semibold",Ut||Be&&wt.count>0?Y.key==="corrections"?"bg-amber-500 text-white dashboard-count-pulse":"bg-primary text-primary-foreground dashboard-count-pulse":"bg-muted text-muted-foreground"),children:wt.count})]},wt.value)})})]},Y.key)})}),Te&&r.jsx("div",{className:"flex flex-wrap gap-2 bg-muted/30 p-3 rounded-3xl mb-6 items-center",children:Te.pills.map(Y=>{const Ct=Y.value===(qe==null?void 0:qe.value),Vt=Y.count>0;return r.jsxs("button",{type:"button",className:Xe("px-4 py-1.5 rounded-full border text-sm font-semibold flex items-center gap-2 transition-colors",Ct?"bg-primary text-primary-foreground border-primary shadow-sm":"bg-white text-foreground border-border hover:bg-muted"),onClick:()=>{i(Te.key),o(Y.value)},children:[r.jsx("span",{children:Y.label}),r.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs font-semibold text-foreground/70",children:Y.count}),Vt&&!Ct&&r.jsx("span",{className:"h-2 w-2 rounded-full bg-amber-500"})]},Y.value)})}),Te&&qe&&r.jsxs(me,{"data-testid":`stage-${Te.key}-${qe.value}`,children:[r.jsxs(Ce,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:qe.label}),r.jsx(Ue,{children:qe.description})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Sort:"}),r.jsxs(pr,{value:l,onValueChange:Y=>c(Y),children:[r.jsx(ur,{className:"w-[160px]",children:r.jsx(yr,{placeholder:"Sort order"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"newest",children:"Newest first"}),r.jsx(it,{value:"oldest",children:"Oldest first"})]})]})]})]}),r.jsx(ge,{children:qe.applications.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-lg",children:[r.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"font-medium",children:qe.emptyTitle}),r.jsx("p",{className:"text-sm mt-1",children:qe.emptyDescription})]}):r.jsx("div",{className:"space-y-3",children:qe.applications.map(Y=>r.jsx(nt,{application:Y,actionLabel:typeof qe.actionLabel=="function"?qe.actionLabel(Y):qe.actionLabel,actionHint:typeof qe.actionHint=="function"?qe.actionHint(Y):qe.actionHint,actionsDisabled:Te.key==="inflow"},Y.id))})})]})]})}const lz=e=>{if(!e)return!1;const t=e instanceof Date?e:new Date(e);if(Number.isNaN(t.getTime()))return!1;const n=new Date;return t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()},cz=e=>{const t=e.updatedAt??e.submittedAt??e.createdAt;return t?new Date(t).getTime():0},Oct=(e,t)=>[...e].sort((n,s)=>{const i=cz(n)-cz(s);return t==="newest"?-i:i});function Rct(){var w;const[e,t]=b.useState("incoming-queue"),[n,s]=b.useState("da-forwards"),[i,a]=b.useState("newest"),o=ci(),l=b.useCallback(()=>{o.invalidateQueries({queryKey:["/api/dtdo/applications"]})},[o]),{data:c,isLoading:d}=rt({queryKey:["/api/dtdo/applications"]}),{data:u}=rt({queryKey:["/api/auth/me"]}),h=b.useMemo(()=>(c??[]).filter(N=>Nw(N)),[c]),f=b.useMemo(()=>Oct(h,i),[h,i]),m=b.useMemo(()=>f.filter(N=>N.status==="forwarded_to_dtdo"),[f]),p=b.useMemo(()=>f.filter(N=>N.status==="reverted_by_dtdo"),[f]),g=b.useMemo(()=>f.filter(N=>N.status==="approved"&&lz(N.approvedAt??N.updatedAt??N.createdAt)),[f]),v=b.useMemo(()=>f.filter(N=>N.status==="rejected"&&lz(N.updatedAt??N.createdAt)),[f]),x=b.useMemo(()=>[{key:"incoming-queue",title:"Incoming Queue",description:"Applications escalated by Dealing Assistants for final decision.",icon:ir,pills:[{value:"da-forwards",label:"DA Forwards",count:m.length,description:"Ready for your review and decision.",applications:m,actionLabel:"Start review",emptyTitle:"No incoming applications",emptyDescription:"Dealing Assistants haven't forwarded any existing RC cases recently."}]},{key:"corrections",title:"Returned / Corrections",description:"Applications sent back for correction.",icon:Kr,pills:[{value:"returned-da",label:"Returned to DA",count:p.length,description:"Sent back to Dealing Assistant.",applications:p,actionLabel:"View details",emptyTitle:"No returned applications",emptyDescription:"You haven't sent any applications back recently."}]},{key:"completed",title:"Decisions (This Month)",description:"History of approved and rejected applications.",icon:kr,pills:[{value:"approved",label:"Approved",count:g.length,description:"Certificates issued or renewed.",applications:g,actionLabel:"View details",emptyTitle:"No approvals yet",emptyDescription:"Approved applications this month will appear here."},{value:"rejected",label:"Rejected",count:v.length,description:"Applications permanently rejected.",applications:v,actionLabel:"View details",emptyTitle:"No rejections",emptyDescription:"Rejected applications this month will appear here."}]}],[m,p,g,v]);b.useEffect(()=>{var T;if(!x.length)return;const N=x.find(C=>C.key===e)??x[0];if(N.key!==e){t(N.key),s(((T=N.pills[0])==null?void 0:T.value)??"");return}const S=N.pills.find(C=>C.value===n)??N.pills[0];S.value!==n&&s(S.value)},[x,e,n]);const y=x.find(N=>N.key===e)??x[0],j=(y==null?void 0:y.pills.find(N=>N.value===n))??(y==null?void 0:y.pills[0]);return d?r.jsx("div",{className:"container mx-auto p-6 max-w-6xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})}):r.jsxs("div",{className:"container mx-auto p-6 max-w-6xl space-y-6",children:[r.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Existing RC Registration Desk"}),r.jsxs("p",{className:"text-muted-foreground",children:[((w=u==null?void 0:u.user)==null?void 0:w.district)||"District","  Final Decision Workflow"]})]}),r.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[r.jsxs("div",{className:"inline-flex items-center rounded-full border bg-muted/40 text-xs font-semibold",children:[r.jsx(Co,{href:"/dtdo/dashboard",className:"px-3 py-1.5 rounded-full text-muted-foreground hover:text-primary transition-colors",children:"Go to New Applications"}),r.jsx("span",{className:"px-3 py-1.5 rounded-full bg-background shadow-sm text-foreground",children:"Existing RC"})]}),r.jsxs(te,{variant:"outline",onClick:l,className:"w-full sm:w-fit",children:[r.jsx(Na,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})]}),r.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:x.map(N=>{const S=N.icon,T=N.totalCount??N.pills.reduce((A,R)=>A+R.count,0),C=N.key===(y==null?void 0:y.key);return r.jsxs(me,{role:"button",tabIndex:0,onClick:()=>{var A;N.key!==e&&(t(N.key),s(((A=N.pills[0])==null?void 0:A.value)??""))},className:`p-5 flex flex-col gap-3 cursor-pointer transition-all border border-border rounded-2xl ${C?"ring-2 ring-primary":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:N.title}),r.jsx("p",{className:"text-3xl font-semibold mt-1",children:T})]}),r.jsx("div",{className:"p-2 rounded-full bg-muted/40",children:r.jsx(S,{className:"w-5 h-5 text-primary"})})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:N.description})]},N.key)})}),y&&j&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex flex-wrap gap-2 bg-muted/30 p-3 rounded-3xl",children:y.pills.map(N=>{const S=N.value===j.value;return r.jsxs("button",{className:`flex items-center gap-2 rounded-full px-4 py-1 text-sm font-medium ${S?"bg-background shadow":"text-muted-foreground"}`,onClick:()=>s(N.value),children:[r.jsx("span",{children:N.label}),r.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs font-semibold",children:N.count})]},N.value)})}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:j.label}),r.jsx(Ue,{children:j.description})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[r.jsx("span",{children:"Sort"}),r.jsxs(pr,{value:i,onValueChange:N=>a(N),children:[r.jsx(ur,{className:"w-[140px]",children:r.jsx(yr,{placeholder:"Sort order"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"newest",children:"Newest first"}),r.jsx(it,{value:"oldest",children:"Oldest first"})]})]})]})]}),r.jsx(ge,{children:j.applications.length===0?r.jsxs("div",{className:"text-center py-12 text-muted-foreground border rounded-lg",children:[r.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{className:"font-medium",children:j.emptyTitle}),r.jsx("p",{className:"text-sm mt-1",children:j.emptyDescription})]}):r.jsx("div",{className:"space-y-3",children:j.applications.map(N=>r.jsx(eI,{application:N,actionLabel:j.actionLabel??"Open application",applicationIds:j.applications.map(S=>S.id),baseUrl:"/dtdo/applications"},N.id))})})]})]})]})}var Hr=function(){return Hr=Object.assign||function(t){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},Hr.apply(this,arguments)};function Dct(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(n[s[i]]=e[s[i]]);return n}function Xhe(e,t,n){for(var s=0,i=t.length,a;s<i;s++)(a||!(s in t))&&(a||(a=Array.prototype.slice.call(t,0,s)),a[s]=t[s]);return e.concat(a||Array.prototype.slice.call(t))}function Sw(e){return e.mode==="multiple"}function _w(e){return e.mode==="range"}function AA(e){return e.mode==="single"}var Mct={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Ict(e,t){return sr(e,"LLLL y",t)}function Lct(e,t){return sr(e,"d",t)}function Fct(e,t){return sr(e,"LLLL",t)}function $ct(e){return"".concat(e)}function Bct(e,t){return sr(e,"cccccc",t)}function Vct(e,t){return sr(e,"yyyy",t)}var Uct=Object.freeze({__proto__:null,formatCaption:Ict,formatDay:Lct,formatMonthCaption:Fct,formatWeekNumber:$ct,formatWeekdayName:Bct,formatYearCaption:Vct}),qct=function(e,t,n){return sr(e,"do MMMM (EEEE)",n)},zct=function(){return"Month: "},Hct=function(){return"Go to next month"},Wct=function(){return"Go to previous month"},Kct=function(e,t){return sr(e,"cccc",t)},Gct=function(e){return"Week n. ".concat(e)},Yct=function(){return"Year: "},Xct=Object.freeze({__proto__:null,labelDay:qct,labelMonthDropdown:zct,labelNext:Hct,labelPrevious:Wct,labelWeekNumber:Gct,labelWeekday:Kct,labelYearDropdown:Yct});function Qct(){var e="buttons",t=Mct,n=i6,s={},i={},a=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:Uct,labels:Xct,locale:n,modifiersClassNames:s,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function Zct(e){var t=e.fromYear,n=e.toYear,s=e.fromMonth,i=e.toMonth,a=e.fromDate,o=e.toDate;return s?a=sl(s):t&&(a=new Date(t,0,1)),i?o=gC(i):n&&(o=new Date(n,11,31)),{fromDate:a?c0(a):void 0,toDate:o?c0(o):void 0}}var Qhe=b.createContext(void 0);function Jct(e){var t,n=e.initialProps,s=Qct(),i=Zct(n),a=i.fromDate,o=i.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:s.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var c;(AA(n)||Sw(n)||_w(n))&&(c=n.onSelect);var d=Hr(Hr(Hr({},s),n),{captionLayout:l,classNames:Hr(Hr({},s.classNames),n.classNames),components:Hr({},n.components),formatters:Hr(Hr({},s.formatters),n.formatters),fromDate:a,labels:Hr(Hr({},s.labels),n.labels),mode:n.mode||s.mode,modifiers:Hr(Hr({},s.modifiers),n.modifiers),modifiersClassNames:Hr(Hr({},s.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:Hr(Hr({},s.styles),n.styles),toDate:o});return r.jsx(Qhe.Provider,{value:d,children:e.children})}function qs(){var e=b.useContext(Qhe);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function Zhe(e){var t=qs(),n=t.locale,s=t.classNames,i=t.styles,a=t.formatters.formatCaption;return r.jsx("div",{className:s.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:n})})}function edt(e){return r.jsx("svg",Hr({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:r.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Jhe(e){var t,n,s=e.onChange,i=e.value,a=e.children,o=e.caption,l=e.className,c=e.style,d=qs(),u=(n=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:edt;return r.jsxs("div",{className:l,style:c,children:[r.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),r.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:i,onChange:s,children:a}),r.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,r.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function tdt(e){var t,n=qs(),s=n.fromDate,i=n.toDate,a=n.styles,o=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,d=n.components,u=n.labels.labelMonthDropdown;if(!s)return r.jsx(r.Fragment,{});if(!i)return r.jsx(r.Fragment,{});var h=[];if(dPe(s,i))for(var f=sl(s),m=s.getMonth();m<=i.getMonth();m++)h.push(e4(f,m));else for(var f=sl(new Date),m=0;m<=11;m++)h.push(e4(f,m));var p=function(v){var x=Number(v.target.value),y=e4(sl(e.displayMonth),x);e.onChange(y)},g=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:Jhe;return r.jsx(g,{name:"months","aria-label":u(),className:c.dropdown_month,style:a.dropdown_month,onChange:p,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:h.map(function(v){return r.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function rdt(e){var t,n=e.displayMonth,s=qs(),i=s.fromDate,a=s.toDate,o=s.locale,l=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,h=s.labels.labelYearDropdown,f=[];if(!i)return r.jsx(r.Fragment,{});if(!a)return r.jsx(r.Fragment,{});for(var m=i.getFullYear(),p=a.getFullYear(),g=m;g<=p;g++)f.push(O7(dne(new Date),g));var v=function(y){var j=O7(sl(n),Number(y.target.value));e.onChange(j)},x=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:Jhe;return r.jsx(x,{name:"years","aria-label":h(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:n.getFullYear(),caption:u(n,{locale:o}),children:f.map(function(y){return r.jsx("option",{value:y.getFullYear(),children:u(y,{locale:o})},y.getFullYear())})})}function ndt(e,t){var n=b.useState(e),s=n[0],i=n[1],a=t===void 0?s:t;return[a,i]}function sdt(e){var t=e.month,n=e.defaultMonth,s=e.today,i=t||n||s||new Date,a=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&u0(a,i)<0){var d=-1*(c-1);i=uu(a,d)}return o&&u0(i,o)<0&&(i=o),sl(i)}function idt(){var e=qs(),t=sdt(e),n=ndt(t,e.month),s=n[0],i=n[1],a=function(o){var l;if(!e.disableNavigation){var c=sl(o);i(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[s,a]}function adt(e,t){for(var n=t.reverseMonths,s=t.numberOfMonths,i=sl(e),a=sl(uu(i,s)),o=u0(a,i),l=[],c=0;c<o;c++){var d=uu(i,c);l.push(d)}return n&&(l=l.reverse()),l}function odt(e,t){if(!t.disableNavigation){var n=t.toDate,s=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=s?a:1,l=sl(e);if(!n)return uu(l,o);var c=u0(n,e);if(!(c<a))return uu(l,o)}}function ldt(e,t){if(!t.disableNavigation){var n=t.fromDate,s=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=s?a:1,l=sl(e);if(!n)return uu(l,-o);var c=u0(l,n);if(!(c<=0))return uu(l,-o)}}var efe=b.createContext(void 0);function cdt(e){var t=qs(),n=idt(),s=n[0],i=n[1],a=adt(s,t),o=odt(s,t),l=ldt(s,t),c=function(h){return a.some(function(f){return xC(h,f)})},d=function(h,f){c(h)||(f&&gne(h,f)?i(uu(h,1+t.numberOfMonths*-1)):i(h))},u={currentMonth:s,displayMonths:a,goToMonth:i,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return r.jsx(efe.Provider,{value:u,children:e.children})}function Cw(){var e=b.useContext(efe);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function dz(e){var t,n=qs(),s=n.classNames,i=n.styles,a=n.components,o=Cw().goToMonth,l=function(u){o(uu(u,e.displayIndex?-e.displayIndex:0))},c=(t=a==null?void 0:a.CaptionLabel)!==null&&t!==void 0?t:Zhe,d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth});return r.jsxs("div",{className:s.caption_dropdowns,style:i.caption_dropdowns,children:[r.jsx("div",{className:s.vhidden,children:d}),r.jsx(tdt,{onChange:l,displayMonth:e.displayMonth}),r.jsx(rdt,{onChange:l,displayMonth:e.displayMonth})]})}function ddt(e){return r.jsx("svg",Hr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function udt(e){return r.jsx("svg",Hr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:r.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var m_=b.forwardRef(function(e,t){var n=qs(),s=n.classNames,i=n.styles,a=[s.button_reset,s.button];e.className&&a.push(e.className);var o=a.join(" "),l=Hr(Hr({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),r.jsx("button",Hr({},e,{ref:t,type:"button",className:o,style:l}))});function hdt(e){var t,n,s=qs(),i=s.dir,a=s.locale,o=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,h=s.components;if(!e.nextMonth&&!e.previousMonth)return r.jsx(r.Fragment,{});var f=d(e.previousMonth,{locale:a}),m=[o.nav_button,o.nav_button_previous].join(" "),p=u(e.nextMonth,{locale:a}),g=[o.nav_button,o.nav_button_next].join(" "),v=(t=h==null?void 0:h.IconRight)!==null&&t!==void 0?t:udt,x=(n=h==null?void 0:h.IconLeft)!==null&&n!==void 0?n:ddt;return r.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&r.jsx(m_,{name:"previous-month","aria-label":f,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?r.jsx(v,{className:o.nav_icon,style:l.nav_icon}):r.jsx(x,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&r.jsx(m_,{name:"next-month","aria-label":p,className:g,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?r.jsx(x,{className:o.nav_icon,style:l.nav_icon}):r.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function uz(e){var t=qs().numberOfMonths,n=Cw(),s=n.previousMonth,i=n.nextMonth,a=n.goToMonth,o=n.displayMonths,l=o.findIndex(function(p){return xC(e.displayMonth,p)}),c=l===0,d=l===o.length-1,u=t>1&&(c||!d),h=t>1&&(d||!c),f=function(){s&&a(s)},m=function(){i&&a(i)};return r.jsx(hdt,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:h,nextMonth:i,previousMonth:s,onPreviousClick:f,onNextClick:m})}function fdt(e){var t,n=qs(),s=n.classNames,i=n.disableNavigation,a=n.styles,o=n.captionLayout,l=n.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:Zhe,d;return i?d=r.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?d=r.jsx(dz,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?d=r.jsxs(r.Fragment,{children:[r.jsx(dz,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),r.jsx(uz,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=r.jsxs(r.Fragment,{children:[r.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(uz,{displayMonth:e.displayMonth,id:e.id})]}),r.jsx("div",{className:s.caption,style:a.caption,children:d})}function mdt(e){var t=qs(),n=t.footer,s=t.styles,i=t.classNames.tfoot;return n?r.jsx("tfoot",{className:i,style:s.tfoot,children:r.jsx("tr",{children:r.jsx("td",{colSpan:8,children:n})})}):r.jsx(r.Fragment,{})}function pdt(e,t,n){for(var s=n?Dg(new Date):lh(new Date,{locale:e,weekStartsOn:t}),i=[],a=0;a<7;a++){var o=Qo(s,a);i.push(o)}return i}function gdt(){var e=qs(),t=e.classNames,n=e.styles,s=e.showWeekNumber,i=e.locale,a=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=pdt(i,a,o);return r.jsxs("tr",{style:n.head_row,className:t.head_row,children:[s&&r.jsx("td",{style:n.head_cell,className:t.head_cell}),d.map(function(u,h){return r.jsx("th",{scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(u,{locale:i}),children:l(u,{locale:i})},h)})]})}function xdt(){var e,t=qs(),n=t.classNames,s=t.styles,i=t.components,a=(e=i==null?void 0:i.HeadRow)!==null&&e!==void 0?e:gdt;return r.jsx("thead",{style:s.head,className:n.head,children:r.jsx(a,{})})}function vdt(e){var t=qs(),n=t.locale,s=t.formatters.formatDay;return r.jsx(r.Fragment,{children:s(e.date,{locale:n})})}var tI=b.createContext(void 0);function ydt(e){if(!Sw(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return r.jsx(tI.Provider,{value:t,children:e.children})}return r.jsx(bdt,{initialProps:e.initialProps,children:e.children})}function bdt(e){var t=e.initialProps,n=e.children,s=t.selected,i=t.min,a=t.max,o=function(d,u,h){var f,m;(f=t.onDayClick)===null||f===void 0||f.call(t,d,u,h);var p=!!(u.selected&&i&&(s==null?void 0:s.length)===i);if(!p){var g=!!(!u.selected&&a&&(s==null?void 0:s.length)===a);if(!g){var v=s?Xhe([],s):[];if(u.selected){var x=v.findIndex(function(y){return jl(d,y)});v.splice(x,1)}else v.push(d);(m=t.onSelect)===null||m===void 0||m.call(t,v,d,u,h)}}},l={disabled:[]};s&&l.disabled.push(function(d){var u=a&&s.length>a-1,h=s.some(function(f){return jl(f,d)});return!!(u&&!h)});var c={selected:s,onDayClick:o,modifiers:l};return r.jsx(tI.Provider,{value:c,children:n})}function rI(){var e=b.useContext(tI);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function jdt(e,t){var n=t||{},s=n.from,i=n.to;return s&&i?jl(i,e)&&jl(s,e)?void 0:jl(i,e)?{from:i,to:void 0}:jl(s,e)?void 0:vT(s,e)?{from:e,to:i}:{from:s,to:e}:i?vT(e,i)?{from:i,to:e}:{from:e,to:i}:s?gne(e,s)?{from:e,to:s}:{from:s,to:e}:{from:e,to:void 0}}var nI=b.createContext(void 0);function wdt(e){if(!_w(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return r.jsx(nI.Provider,{value:t,children:e.children})}return r.jsx(Ndt,{initialProps:e.initialProps,children:e.children})}function Ndt(e){var t=e.initialProps,n=e.children,s=t.selected,i=s||{},a=i.from,o=i.to,l=t.min,c=t.max,d=function(m,p,g){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,m,p,g);var y=jdt(m,s);(x=t.onSelect)===null||x===void 0||x.call(t,y,m,p,g)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(u.range_start=[a],o?(u.range_end=[o],jl(a,o)||(u.range_middle=[{after:a,before:o}])):u.range_end=[a]):o&&(u.range_start=[o],u.range_end=[o]),l&&(a&&!o&&u.disabled.push({after:gv(a,l-1),before:Qo(a,l-1)}),a&&o&&u.disabled.push({after:a,before:Qo(a,l-1)}),!a&&o&&u.disabled.push({after:gv(o,l-1),before:Qo(o,l-1)})),c){if(a&&!o&&(u.disabled.push({before:Qo(a,-c+1)}),u.disabled.push({after:Qo(a,c-1)})),a&&o){var h=uc(o,a)+1,f=c-h;u.disabled.push({before:gv(a,f)}),u.disabled.push({after:Qo(o,f)})}!a&&o&&(u.disabled.push({before:Qo(o,-c+1)}),u.disabled.push({after:Qo(o,c-1)}))}return r.jsx(nI.Provider,{value:{selected:s,onDayClick:d,modifiers:u},children:n})}function sI(){var e=b.useContext(nI);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function UN(e){return Array.isArray(e)?Xhe([],e):e!==void 0?[e]:[]}function Sdt(e){var t={};return Object.entries(e).forEach(function(n){var s=n[0],i=n[1];t[s]=UN(i)}),t}var mu;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(mu||(mu={}));var _dt=mu.Selected,Eh=mu.Disabled,Cdt=mu.Hidden,Adt=mu.Today,yP=mu.RangeEnd,bP=mu.RangeMiddle,jP=mu.RangeStart,kdt=mu.Outside;function Pdt(e,t,n){var s,i=(s={},s[_dt]=UN(e.selected),s[Eh]=UN(e.disabled),s[Cdt]=UN(e.hidden),s[Adt]=[e.today],s[yP]=[],s[bP]=[],s[jP]=[],s[kdt]=[],s);return e.fromDate&&i[Eh].push({before:e.fromDate}),e.toDate&&i[Eh].push({after:e.toDate}),Sw(e)?i[Eh]=i[Eh].concat(t.modifiers[Eh]):_w(e)&&(i[Eh]=i[Eh].concat(n.modifiers[Eh]),i[jP]=n.modifiers[jP],i[bP]=n.modifiers[bP],i[yP]=n.modifiers[yP]),i}var tfe=b.createContext(void 0);function Tdt(e){var t=qs(),n=rI(),s=sI(),i=Pdt(t,n,s),a=Sdt(t.modifiers),o=Hr(Hr({},i),a);return r.jsx(tfe.Provider,{value:o,children:e.children})}function rfe(){var e=b.useContext(tfe);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function Edt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function Odt(e){return!!(e&&typeof e=="object"&&"from"in e)}function Rdt(e){return!!(e&&typeof e=="object"&&"after"in e)}function Ddt(e){return!!(e&&typeof e=="object"&&"before"in e)}function Mdt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Idt(e,t){var n,s=t.from,i=t.to;if(s&&i){var a=uc(i,s)<0;a&&(n=[i,s],s=n[0],i=n[1]);var o=uc(e,s)>=0&&uc(i,e)>=0;return o}return i?jl(i,e):s?jl(s,e):!1}function Ldt(e){return n6(e)}function Fdt(e){return Array.isArray(e)&&e.every(n6)}function $dt(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(Ldt(n))return jl(e,n);if(Fdt(n))return n.includes(e);if(Odt(n))return Idt(e,n);if(Mdt(n))return n.dayOfWeek.includes(e.getDay());if(Edt(n)){var s=uc(n.before,e),i=uc(n.after,e),a=s>0,o=i<0,l=vT(n.before,n.after);return l?o&&a:a||o}return Rdt(n)?uc(e,n.after)>0:Ddt(n)?uc(n.before,e)>0:typeof n=="function"?n(e):!1})}function iI(e,t,n){var s=Object.keys(t).reduce(function(a,o){var l=t[o];return $dt(e,l)&&a.push(o),a},[]),i={};return s.forEach(function(a){return i[a]=!0}),n&&!xC(e,n)&&(i.outside=!0),i}function Bdt(e,t){for(var n=sl(e[0]),s=gC(e[e.length-1]),i,a,o=n;o<=s;){var l=iI(o,t),c=!l.disabled&&!l.hidden;if(!c){o=Qo(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=Qo(o,1)}return a||i}var Vdt=365;function nfe(e,t){var n=t.moveBy,s=t.direction,i=t.context,a=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=i.weekStartsOn,d=i.fromDate,u=i.toDate,h=i.locale,f={day:Qo,week:xT,month:uu,year:lne,startOfWeek:function(v){return i.ISOWeek?Dg(v):lh(v,{locale:h,weekStartsOn:c})},endOfWeek:function(v){return i.ISOWeek?une(v):s6(v,{locale:h,weekStartsOn:c})}},m=f[n](e,s==="after"?1:-1);s==="before"&&d?m=e4e([d,m]):s==="after"&&u&&(m=t4e([u,m]));var p=!0;if(a){var g=iI(m,a);p=!g.disabled&&!g.hidden}return p?m:l.count>Vdt?l.lastFocused:nfe(m,{moveBy:n,direction:s,context:i,modifiers:a,retry:Hr(Hr({},l),{count:l.count+1})})}var sfe=b.createContext(void 0);function Udt(e){var t=Cw(),n=rfe(),s=b.useState(),i=s[0],a=s[1],o=b.useState(),l=o[0],c=o[1],d=Bdt(t.displayMonths,n),u=i??(l&&t.isDateDisplayed(l))?l:d,h=function(){c(i),a(void 0)},f=function(v){a(v)},m=qs(),p=function(v,x){if(i){var y=nfe(i,{moveBy:v,direction:x,context:m,modifiers:n});jl(i,y)||(t.goToDate(y,i),f(y))}},g={focusedDay:i,focusTarget:u,blur:h,focus:f,focusDayAfter:function(){return p("day","after")},focusDayBefore:function(){return p("day","before")},focusWeekAfter:function(){return p("week","after")},focusWeekBefore:function(){return p("week","before")},focusMonthBefore:function(){return p("month","before")},focusMonthAfter:function(){return p("month","after")},focusYearBefore:function(){return p("year","before")},focusYearAfter:function(){return p("year","after")},focusStartOfWeek:function(){return p("startOfWeek","before")},focusEndOfWeek:function(){return p("endOfWeek","after")}};return r.jsx(sfe.Provider,{value:g,children:e.children})}function aI(){var e=b.useContext(sfe);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function qdt(e,t){var n=rfe(),s=iI(e,n,t);return s}var oI=b.createContext(void 0);function zdt(e){if(!AA(e.initialProps)){var t={selected:void 0};return r.jsx(oI.Provider,{value:t,children:e.children})}return r.jsx(Hdt,{initialProps:e.initialProps,children:e.children})}function Hdt(e){var t=e.initialProps,n=e.children,s=function(a,o,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,o,l),o.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,a,o,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,a,a,o,l)},i={selected:t.selected,onDayClick:s};return r.jsx(oI.Provider,{value:i,children:n})}function ife(){var e=b.useContext(oI);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function Wdt(e,t){var n=qs(),s=ife(),i=rI(),a=sI(),o=aI(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,h=o.blur,f=o.focus,m=o.focusMonthBefore,p=o.focusMonthAfter,g=o.focusYearBefore,v=o.focusYearAfter,x=o.focusStartOfWeek,y=o.focusEndOfWeek,j=function(L){var V,P,z,Z;AA(n)?(V=s.onDayClick)===null||V===void 0||V.call(s,e,t,L):Sw(n)?(P=i.onDayClick)===null||P===void 0||P.call(i,e,t,L):_w(n)?(z=a.onDayClick)===null||z===void 0||z.call(a,e,t,L):(Z=n.onDayClick)===null||Z===void 0||Z.call(n,e,t,L)},w=function(L){var V;f(e),(V=n.onDayFocus)===null||V===void 0||V.call(n,e,t,L)},N=function(L){var V;h(),(V=n.onDayBlur)===null||V===void 0||V.call(n,e,t,L)},S=function(L){var V;(V=n.onDayMouseEnter)===null||V===void 0||V.call(n,e,t,L)},T=function(L){var V;(V=n.onDayMouseLeave)===null||V===void 0||V.call(n,e,t,L)},C=function(L){var V;(V=n.onDayPointerEnter)===null||V===void 0||V.call(n,e,t,L)},A=function(L){var V;(V=n.onDayPointerLeave)===null||V===void 0||V.call(n,e,t,L)},R=function(L){var V;(V=n.onDayTouchCancel)===null||V===void 0||V.call(n,e,t,L)},k=function(L){var V;(V=n.onDayTouchEnd)===null||V===void 0||V.call(n,e,t,L)},O=function(L){var V;(V=n.onDayTouchMove)===null||V===void 0||V.call(n,e,t,L)},$=function(L){var V;(V=n.onDayTouchStart)===null||V===void 0||V.call(n,e,t,L)},D=function(L){var V;(V=n.onDayKeyUp)===null||V===void 0||V.call(n,e,t,L)},q=function(L){var V;switch(L.key){case"ArrowLeft":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":L.preventDefault(),L.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":L.preventDefault(),L.stopPropagation(),d();break;case"ArrowUp":L.preventDefault(),L.stopPropagation(),u();break;case"PageUp":L.preventDefault(),L.stopPropagation(),L.shiftKey?g():m();break;case"PageDown":L.preventDefault(),L.stopPropagation(),L.shiftKey?v():p();break;case"Home":L.preventDefault(),L.stopPropagation(),x();break;case"End":L.preventDefault(),L.stopPropagation(),y();break}(V=n.onDayKeyDown)===null||V===void 0||V.call(n,e,t,L)},M={onClick:j,onFocus:w,onBlur:N,onKeyDown:q,onKeyUp:D,onMouseEnter:S,onMouseLeave:T,onPointerEnter:C,onPointerLeave:A,onTouchCancel:R,onTouchEnd:k,onTouchMove:O,onTouchStart:$};return M}function Kdt(){var e=qs(),t=ife(),n=rI(),s=sI(),i=AA(e)?t.selected:Sw(e)?n.selected:_w(e)?s.selected:void 0;return i}function Gdt(e){return Object.values(mu).includes(e)}function Ydt(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(s){var i=e.modifiersClassNames[s];if(i)n.push(i);else if(Gdt(s)){var a=e.classNames["day_".concat(s)];a&&n.push(a)}}),n}function Xdt(e,t){var n=Hr({},e.styles.day);return Object.keys(t).forEach(function(s){var i;n=Hr(Hr({},n),(i=e.modifiersStyles)===null||i===void 0?void 0:i[s])}),n}function Qdt(e,t,n){var s,i,a,o=qs(),l=aI(),c=qdt(e,t),d=Wdt(e,c),u=Kdt(),h=!!(o.onDayClick||o.mode!=="default");b.useEffect(function(){var S;c.outside||l.focusedDay&&h&&jl(l.focusedDay,e)&&((S=n.current)===null||S===void 0||S.focus())},[l.focusedDay,e,n,h,c.outside]);var f=Ydt(o,c).join(" "),m=Xdt(o,c),p=!!(c.outside&&!o.showOutsideDays||c.hidden),g=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:vdt,v=r.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),x={style:m,className:f,children:v,role:"gridcell"},y=l.focusTarget&&jl(l.focusTarget,e)&&!c.outside,j=l.focusedDay&&jl(l.focusedDay,e),w=Hr(Hr(Hr({},x),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=j||y?0:-1,s)),d),N={isButton:h,isHidden:p,activeModifiers:c,selectedDays:u,buttonProps:w,divProps:x};return N}function Zdt(e){var t=b.useRef(null),n=Qdt(e.date,e.displayMonth,t);return n.isHidden?r.jsx("div",{role:"gridcell"}):n.isButton?r.jsx(m_,Hr({name:"day",ref:t},n.buttonProps)):r.jsx("div",Hr({},n.divProps))}function Jdt(e){var t=e.number,n=e.dates,s=qs(),i=s.onWeekNumberClick,a=s.styles,o=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!i)return r.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:u});var h=c(Number(t),{locale:l}),f=function(m){i(t,n,m)};return r.jsx(m_,{name:"week-number","aria-label":h,className:o.weeknumber,style:a.weeknumber,onClick:f,children:u})}function eut(e){var t,n,s=qs(),i=s.styles,a=s.classNames,o=s.showWeekNumber,l=s.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:Zdt,d=(n=l==null?void 0:l.WeekNumber)!==null&&n!==void 0?n:Jdt,u;return o&&(u=r.jsx("td",{className:a.cell,style:i.cell,children:r.jsx(d,{number:e.weekNumber,dates:e.dates})})),r.jsxs("tr",{className:a.row,style:i.row,children:[u,e.dates.map(function(h){return r.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:r.jsx(c,{displayMonth:e.displayMonth,date:h})},oPe(h))})]})}function hz(e,t,n){for(var s=n!=null&&n.ISOWeek?une(t):s6(t,n),i=n!=null&&n.ISOWeek?Dg(e):lh(e,n),a=uc(s,i),o=[],l=0;l<=a;l++)o.push(Qo(i,l));var c=o.reduce(function(d,u){var h=n!=null&&n.ISOWeek?hne(u):mne(u,n),f=d.find(function(m){return m.weekNumber===h});return f?(f.dates.push(u),d):(d.push({weekNumber:h,dates:[u]}),d)},[]);return c}function tut(e,t){var n=hz(sl(e),gC(e),t);if(t!=null&&t.useFixedWeeks){var s=cPe(e,t);if(s<6){var i=n[n.length-1],a=i.dates[i.dates.length-1],o=xT(a,6-s),l=hz(xT(a,1),o,t);n.push.apply(n,l)}}return n}function rut(e){var t,n,s,i=qs(),a=i.locale,o=i.classNames,l=i.styles,c=i.hideHead,d=i.fixedWeeks,u=i.components,h=i.weekStartsOn,f=i.firstWeekContainsDate,m=i.ISOWeek,p=tut(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:m,locale:a,weekStartsOn:h,firstWeekContainsDate:f}),g=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:xdt,v=(n=u==null?void 0:u.Row)!==null&&n!==void 0?n:eut,x=(s=u==null?void 0:u.Footer)!==null&&s!==void 0?s:mdt;return r.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&r.jsx(g,{}),r.jsx("tbody",{className:o.tbody,style:l.tbody,children:p.map(function(y){return r.jsx(v,{displayMonth:e.displayMonth,dates:y.dates,weekNumber:y.weekNumber},y.weekNumber)})}),r.jsx(x,{displayMonth:e.displayMonth})]})}function nut(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var sut=nut()?b.useLayoutEffect:b.useEffect,wP=!1,iut=0;function fz(){return"react-day-picker-".concat(++iut)}function aut(e){var t,n=e??(wP?fz():null),s=b.useState(n),i=s[0],a=s[1];return sut(function(){i===null&&a(fz())},[]),b.useEffect(function(){wP===!1&&(wP=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function out(e){var t,n,s=qs(),i=s.dir,a=s.classNames,o=s.styles,l=s.components,c=Cw().displayMonths,d=aut(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,h=[a.month],f=o.month,m=e.displayIndex===0,p=e.displayIndex===c.length-1,g=!m&&!p;i==="rtl"&&(t=[m,p],p=t[0],m=t[1]),m&&(h.push(a.caption_start),f=Hr(Hr({},f),o.caption_start)),p&&(h.push(a.caption_end),f=Hr(Hr({},f),o.caption_end)),g&&(h.push(a.caption_between),f=Hr(Hr({},f),o.caption_between));var v=(n=l==null?void 0:l.Caption)!==null&&n!==void 0?n:fdt;return r.jsxs("div",{className:h.join(" "),style:f,children:[r.jsx(v,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),r.jsx(rut,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function lut(e){var t=qs(),n=t.classNames,s=t.styles;return r.jsx("div",{className:n.months,style:s.months,children:e.children})}function cut(e){var t,n,s=e.initialProps,i=qs(),a=aI(),o=Cw(),l=b.useState(!1),c=l[0],d=l[1];b.useEffect(function(){i.initialFocus&&a.focusTarget&&(c||(a.focus(a.focusTarget),d(!0)))},[i.initialFocus,c,a.focus,a.focusTarget,a]);var u=[i.classNames.root,i.className];i.numberOfMonths>1&&u.push(i.classNames.multiple_months),i.showWeekNumber&&u.push(i.classNames.with_weeknumber);var h=Hr(Hr({},i.styles.root),i.style),f=Object.keys(s).filter(function(p){return p.startsWith("data-")}).reduce(function(p,g){var v;return Hr(Hr({},p),(v={},v[g]=s[g],v))},{}),m=(n=(t=s.components)===null||t===void 0?void 0:t.Months)!==null&&n!==void 0?n:lut;return r.jsx("div",Hr({className:u.join(" "),style:h,dir:i.dir,id:i.id,nonce:s.nonce,title:s.title,lang:s.lang},f,{children:r.jsx(m,{children:o.displayMonths.map(function(p,g){return r.jsx(out,{displayIndex:g,displayMonth:p},g)})})}))}function dut(e){var t=e.children,n=Dct(e,["children"]);return r.jsx(Jct,{initialProps:n,children:r.jsx(cdt,{children:r.jsx(zdt,{initialProps:n,children:r.jsx(ydt,{initialProps:n,children:r.jsx(wdt,{initialProps:n,children:r.jsx(Tdt,{children:r.jsx(Udt,{children:t})})})})})})})}function uut(e){return r.jsx(dut,Hr({},e,{children:r.jsx(cut,{initialProps:e})}))}function lI({className:e,classNames:t,showOutsideDays:n=!0,...s}){return r.jsx(uut,{showOutsideDays:n,className:Xe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Xe(w1({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Xe(w1({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:i,...a})=>r.jsx(y1,{className:Xe("h-4 w-4",i),...a}),IconRight:({className:i,...a})=>r.jsx(lf,{className:Xe("h-4 w-4",i),...a})},...s})}lI.displayName="Calendar";const hut=(e=8,t=19)=>{const n=[];for(let s=e;s<=t;s++)for(const i of[0,15,30,45]){if(s===t&&i>45)continue;const a=String(s).padStart(2,"0"),o=String(i).padStart(2,"0");n.push(`${a}:${o}`)}return n},NP=hut(8,19),fut=e=>{const[t,n]=e.split(":").map(Number),s=new Date;return s.setHours(t,n,0,0),sr(s,"h:mm a")},mut=(e,t)=>{const[n,s]=t.split(":").map(Number),i=new Date(e);return i.setHours(n,s,0,0),i},put=e=>{if(!e)return"No resubmission yet";const t=new Date(e);return Number.isNaN(t.getTime())?"No resubmission yet":sr(t,"PPP p")};function gut(){var Ct,Vt,pt,Ht,wr,wt,Ut,St;const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),[s,i]=b.useState(null),[a,o]=b.useState(""),[l,c]=b.useState(null),[d,u]=b.useState(!1),[h,f]=b.useState(!1),[m,p]=b.useState("policy_heritage"),[g,v]=b.useState(!1),[x,y]=b.useState({}),[j,w]=b.useState(""),[N,S]=b.useState(!1),[T,C]=b.useState(),[A,R]=b.useState(NP[8]??"10:00"),[k,O]=b.useState(""),{data:$,isLoading:D}=rt({queryKey:["/api/dtdo/applications",e]}),q=((Vt=(Ct=$==null?void 0:$.application)==null?void 0:Ct.applicationNumber)==null?void 0:Vt.startsWith("LG-HS-"))??!1,{data:M}=rt({queryKey:["/api/dtdo/available-das"],enabled:s==="accept"}),{data:L}=rt({queryKey:["/api/settings/public"]}),V=Ot({mutationFn:async({action:Be,remarks:lr,inspectionDate:Wt,assignedTo:It})=>(await lt("POST",`/api/dtdo/applications/${e}/${Be}`,{remarks:lr,inspectionDate:Wt,assignedTo:It})).json(),onSuccess:(Be,lr)=>{er.invalidateQueries({queryKey:["/api/dtdo/applications"]}),er.invalidateQueries({queryKey:["/api/dtdo/applications",e]}),er.invalidateQueries({queryKey:["/api/applications",e,"timeline"]}),lr.action==="accept"?n({title:"Inspection Scheduled",description:"Application accepted and inspection has been scheduled successfully."}):n({title:"Success",description:"Application processed successfully"}),t(q?"/dtdo/legacy":"/dtdo/dashboard")},onError:Be=>{n({title:"Error",description:Be.message||"Failed to process application",variant:"destructive"})}}),P=Ot({mutationFn:async({corrections:Be,reason:lr})=>{const Wt=await lt("PATCH",`/api/dtdo/applications/${e}/correct`,{corrections:Be,reason:lr});if(!Wt.ok){const It=await Wt.json();throw new Error(It.message||"Failed to apply corrections")}return Wt.json()},onSuccess:Be=>{er.invalidateQueries({queryKey:["/api/dtdo/applications",e]}),er.invalidateQueries({queryKey:["/api/applications",e,"timeline"]}),n({title:"Corrections Applied",description:Be.message||"Application details corrected successfully"}),v(!1),y({}),w("")},onError:Be=>{n({title:"Correction Failed",description:Be.message||"Failed to apply corrections",variant:"destructive"})}}),z=$==null?void 0:$.application,Z=$==null?void 0:$.owner,F=($==null?void 0:$.documents)??[],W=$==null?void 0:$.daInfo,G=($==null?void 0:$.correctionHistory)??[],H=(z==null?void 0:z.correctionSubmissionCount)??0,se=G[0],J=b.useMemo(()=>{const Be={pending:0,verified:0,needsCorrection:0,rejected:0};for(const lr of F){const Wt=(lr.verificationStatus||"pending").toLowerCase();Wt==="verified"?Be.verified+=1:Wt==="needs_correction"?Be.needsCorrection+=1:Wt==="rejected"?Be.rejected+=1:Be.pending+=1}return Be},[F]),ie=b.useMemo(()=>{const Be=z;return Be?[{label:"Single Rooms",value:Be.singleBedRooms??0,rate:Be.singleBedRoomRate},{label:"Double Rooms",value:Be.doubleBedRooms??0,rate:Be.doubleBedRoomRate},{label:"Family Suites",value:Be.familySuites??0,rate:Be.familySuiteRate}]:[{label:"Single Rooms",value:0,rate:void 0},{label:"Double Rooms",value:0,rate:void 0},{label:"Family Suites",value:0,rate:void 0}]},[z]),X=(z==null?void 0:z.amenities)||{},he={cctv:X.cctv??!1,fireSafety:X.fireSafety??!1,powerBackup:X.generator??!1,parking:X.parking??!1};if(D||!z||!Z)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:D?r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"}):r.jsx("div",{className:"text-muted-foreground",children:"Application not found"})})});const fe=z.status??"forwarded_to_dtdo",Q=z.daRemarks??null,ve=new Set(["forwarded_to_dtdo","dtdo_review"]).has(fe),ee=fe.replace(/_/g," ").replace(/\b\w/g,Be=>Be.toUpperCase()),Ee=async()=>{try{await navigator.clipboard.writeText(z.applicationNumber),u(!0),setTimeout(()=>u(!1),2e3),n({title:"Copied",description:"Application number copied to clipboard"})}catch{n({title:"Copy failed",description:"Unable to copy application number",variant:"destructive"})}},Re=Be=>Be.fileUrl||Kd(Be.filePath,{fileName:Be.fileName,mimeType:Be.mimeType}),oe=Be=>{i(Be),o(""),Be==="accept"&&(C(void 0),R(NP[8]??"10:00"),O(""))},De=Be=>Be==="accept"||Be==="reject"||Be==="revert"||Be==="approve-cancellation"||Be==="approve-bypass",tt=new Date;tt.setDate(tt.getDate()+1),tt.setHours(0,0,0,0);const Qe=tt,xe=(M==null?void 0:M.das)||[],ae=()=>{if(s){if(De(s)&&!a.trim()){n({title:"Remarks Required",description:`Please provide remarks for ${s==="accept"?"scheduling the inspection":s==="approve-cancellation"?"cancellation approval":s==="reject"?"rejection":"reverting"}.`,variant:"destructive"});return}if(s==="accept"){if(!T){n({title:"Date Required",description:"Please select an inspection date.",variant:"destructive"});return}if(!A){n({title:"Time Required",description:"Please select an inspection time.",variant:"destructive"});return}if(!k){n({title:"DA Required",description:"Please assign a Dealing Assistant.",variant:"destructive"});return}const Be=mut(T,A);if(Be<new Date){n({title:"Invalid Date",description:"Inspection date must be in the future.",variant:"destructive"});return}V.mutate({action:s,remarks:a.trim(),inspectionDate:Be.toISOString(),assignedTo:k})}else V.mutate({action:s,remarks:a.trim()})}},we=async()=>{if(z){f(!0);try{bC(z,m),n({title:"Certificate Downloaded",description:"RC certificate has been generated and downloaded."})}catch(Be){n({title:"Download failed",description:Be instanceof Error?Be.message:"Unable to prepare certificate right now.",variant:"destructive"})}finally{f(!1)}}},Te=(Be,lr)=>{y(Wt=>({...Wt,[Be]:lr}))},qe=()=>{if(Object.keys(x).length===0){n({title:"No Changes",description:"No fields have been modified.",variant:"destructive"});return}if(j.trim().length<10){n({title:"Reason Required",description:"Please provide a correction reason (minimum 10 characters)",variant:"destructive"});return}P.mutate({corrections:x,reason:j.trim()})},Ke=()=>{v(!1),y({}),w("")},Ge=Be=>Be in x?x[Be]:z==null?void 0:z[Be],He=(z==null?void 0:z.certificateNumber)&&["approved","certificate_issued","completed","active"].some(Be=>{var lr;return((lr=z==null?void 0:z.status)==null?void 0:lr.includes(Be))||(z==null?void 0:z.certificateNumber)}),nt=Be=>{const lr={diamond:"bg-purple-50 text-purple-700 dark:bg-purple-950/20",gold:"bg-yellow-50 text-yellow-700 dark:bg-yellow-950/20",silver:"bg-gray-50 text-gray-700 dark:bg-gray-950/20"};return r.jsx(ze,{variant:"outline",className:lr[Be.toLowerCase()]||"",children:Be.toUpperCase()})},Y=Be=>{const Wt={forwarded_to_dtdo:{label:"Forwarded by DA",className:"bg-blue-50 text-blue-700 dark:bg-blue-950/20"},dtdo_review:{label:"Under Review",className:"bg-orange-50 text-orange-700 dark:bg-orange-950/20"}}[Be]||{label:Be,className:""};return r.jsx(ze,{variant:"outline",className:Wt.className,children:Wt.label})};return r.jsxs("div",{className:"container mx-auto p-6 max-w-7xl space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t(q?"/dtdo/legacy":"/dtdo/dashboard"),"data-testid":"button-back",children:r.jsx(Es,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Application Review"}),r.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground mt-1",children:[r.jsx("span",{children:z.applicationNumber}),r.jsx(te,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:Ee,title:"Copy application number",children:r.jsx(CR,{className:`h-4 w-4 ${d?"text-green-600":""}`})})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[nt(z.category),Y(fe)]})]}),(Q||W)&&r.jsxs(me,{className:"border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-950/20",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2 text-blue-700 dark:text-blue-400",children:[r.jsx(Mi,{className:"h-5 w-5"}),"DA Scrutiny Report"]}),W&&r.jsxs(Ue,{children:["Forwarded by ",W.fullName," (",W.mobile,")"]})]}),r.jsx(ge,{children:r.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-4 border",children:r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:Q||"No remarks provided"})})})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[r.jsx("div",{className:"md:col-span-2 space-y-6",children:r.jsxs(aa,{defaultValue:"property",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-3",children:[r.jsx(Pr,{value:"property","data-testid":"tab-property",children:"Property"}),r.jsx(Pr,{value:"owner","data-testid":"tab-owner",children:"Owner"}),r.jsx(Pr,{value:"documents","data-testid":"tab-documents",children:"Documents"})]}),r.jsxs(Rr,{value:"property",className:"space-y-4 mt-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Ba,{className:"h-5 w-5"}),"Property Snapshot"]}),r.jsx(Ue,{children:"Key facts captured during owner onboarding"})]}),r.jsxs(ge,{className:"grid md:grid-cols-2 gap-4",children:[r.jsx(Ls,{label:"Property Name",value:z.propertyName}),r.jsx(Ls,{label:"Category",value:z.category.toUpperCase()}),r.jsx(Ls,{label:"Total Rooms",value:String(z.totalRooms??"N/A")}),r.jsx(Ls,{label:"Application Kind",value:((pt=z.applicationKind)==null?void 0:pt.replace(/_/g," "))??"New"}),r.jsx(Ls,{label:"Address",value:z.address}),r.jsx(Ls,{label:"District / Tehsil",value:`${hu(z.district)}  ${z.tehsil??"N/A"}`}),r.jsx(Ls,{label:"Pincode",value:z.pincode}),r.jsx(Ls,{label:"Legacy RC / Guardian",value:z.parentCertificateNumber||z.guardianName||"N/A"})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(jve,{className:"h-5 w-5"}),"Room Mix & Tariffs"]})}),r.jsx(ge,{children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"text-left text-muted-foreground",children:[r.jsx("th",{className:"py-2",children:"Type"}),r.jsx("th",{className:"py-2",children:"Rooms"}),r.jsx("th",{className:"py-2 text-right",children:"Tariff / Night"})]})}),r.jsx("tbody",{children:ie.map(Be=>r.jsxs("tr",{className:"border-t",children:[r.jsx("td",{className:"py-2",children:Be.label}),r.jsx("td",{className:"py-2",children:Be.value}),r.jsx("td",{className:"py-2 text-right",children:Rp(Be.rate)})]},Be.label))})]})})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Mxe,{className:"h-5 w-5"}),"Fee & Discount Summary"]})}),r.jsxs(ge,{className:"grid gap-3 text-sm",children:[r.jsx(ib,{label:"Base Fee",value:Rp(z.baseFee)}),r.jsx(ib,{label:"Female Owner Discount",value:Rp(z.femaleOwnerDiscount)}),r.jsx(ib,{label:"Pangi Concession",value:Rp(z.pangiDiscount)}),r.jsx(ib,{label:"Multi-year Discount",value:Rp(z.validityDiscount)}),r.jsx(ib,{label:"Total Discount",value:Rp(z.totalDiscount)}),r.jsxs("div",{className:"border-t pt-2 text-right text-base font-semibold",children:["Payable: ",Rp(z.totalFee)]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"h-5 w-5"}),"Correction Tracking"]}),r.jsx(Ue,{children:"Owner acknowledgement before resubmission"})]}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Ls,{label:"Corrections Used",value:`${H}`}),r.jsx(Ls,{label:"Owner Confirmation",value:put(se==null?void 0:se.createdAt)}),(se==null?void 0:se.feedback)&&r.jsx("p",{className:"text-xs text-muted-foreground rounded-lg border bg-muted/30 p-3",children:se.feedback})]})]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-4",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Gi,{className:"h-5 w-5"}),"Safety & Amenities"]}),r.jsx(Ue,{children:"Availability as declared by the owner"})]}),r.jsxs(ge,{className:"grid gap-2 text-sm",children:[r.jsx(tN,{label:"CCTV Coverage",enabled:he.cctv}),r.jsx(tN,{label:"Fire Safety Equipment",enabled:he.fireSafety}),r.jsx(tN,{label:"Power Backup",enabled:he.powerBackup}),r.jsx(tN,{label:"On-site Parking",enabled:he.parking}),r.jsx(Ls,{label:"Nearest Hospital",value:z.nearestHospital??"N/A"}),r.jsx(Ls,{label:"Additional Notes",value:z.fireEquipmentDetails||z.serviceNotes||"N/A"})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Js,{className:"h-5 w-5"}),"Location"]})}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(Ls,{label:"Latitude",value:z.latitude||"N/A"}),r.jsx(Ls,{label:"Longitude",value:z.longitude||"N/A"}),r.jsx(Ls,{label:"Distance to Airport",value:rN(z.distanceAirport)}),r.jsx(Ls,{label:"Distance to Railway",value:rN(z.distanceRailway)}),r.jsx(Ls,{label:"Distance to City Center",value:rN(z.distanceCityCenter)}),r.jsx(Ls,{label:"Distance to Bus Stand",value:rN(z.distanceBusStand)})]})]})]})]}),r.jsx(Rr,{value:"owner",className:"space-y-4 mt-4",children:r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(li,{className:"h-5 w-5"}),"Owner & Guardian Details"]}),r.jsx(Ue,{children:"Verify identity before inspection scheduling"})]}),r.jsxs(ge,{className:"grid md:grid-cols-2 gap-4",children:[r.jsx(Ls,{label:"Full Name",value:Z.fullName}),r.jsx(Ls,{label:"Gender",value:(Ht=z.ownerGender)==null?void 0:Ht.toUpperCase()}),r.jsx(Ls,{label:"Mobile",value:Z.mobile}),r.jsx(Ls,{label:"Email",value:Z.email||"N/A"}),r.jsx(Ls,{label:"Guardian / Father",value:z.guardianName||"N/A"}),r.jsx(Ls,{label:"Aadhaar",value:z.ownerAadhaar}),r.jsx(Ls,{label:"Ownership",value:(z.propertyOwnership||"").replace(/_/g," ")||"N/A"}),r.jsx(Ls,{label:"Alternate Phone",value:z.alternatePhone||"N/A"})]})]})}),r.jsx(Rr,{value:"documents",className:"space-y-4 mt-4",children:r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"h-5 w-5"}),"Uploaded Documents"]}),r.jsxs(Ue,{children:[F.length," uploaded  ",J.verified," verified by DA  ",J.pending," pending"]})]}),r.jsx(ge,{children:r.jsx("div",{className:"space-y-3",children:F.length===0?r.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No documents uploaded"}):F.map(Be=>{const lr=afe(Be.verificationStatus),Wt=typeof Be.verificationNotes=="string"&&Be.verificationNotes.trim().length>0?Be.verificationNotes.trim():"";return r.jsxs("div",{className:"p-3 border rounded-xl bg-card/50 shadow-xs flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ir,{className:"h-5 w-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-sm",children:pz(Be.documentType)}),r.jsx("div",{className:"text-xs text-muted-foreground",children:Be.fileName})]})]}),r.jsx(mz,{status:Be.verificationStatus??"pending"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>c(Be),"data-testid":`button-preview-doc-${Be.id}`,children:[r.jsx(Rve,{className:"h-4 w-4 mr-2"}),"Preview"]}),r.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>window.open(Re(Be),"_blank"),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Download"]})]}),Wt&&r.jsxs("div",{className:`rounded-lg border px-3 py-2 text-sm space-y-1 ${(lr==null?void 0:lr.noteBgClass)??"bg-muted/30 border-border/60"}`,children:[r.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:"DA Remarks"}),r.jsx("p",{className:(lr==null?void 0:lr.noteTextClass)??"text-muted-foreground",children:Wt})]})]},Be.id)})})})]})})]})}),r.jsxs("div",{className:"space-y-4",children:[ve?r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"DTDO Decision"}),r.jsx(Ue,{children:"Review and take action on this application"})]}),r.jsxs(ge,{className:"space-y-3",children:[(z==null?void 0:z.applicationKind)==="cancel_certificate"?r.jsxs(te,{className:"w-full",variant:"destructive",onClick:()=>oe("approve-cancellation"),disabled:V.isPending,"data-testid":"button-approve-cancellation",children:[r.jsx(kr,{className:"mr-2 h-4 w-4"}),"Approve Cancellation (Revoke Certificate)"]}):q?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-muted/30 rounded-lg",children:[r.jsx(Zs,{id:"require-inspection",checked:N,onCheckedChange:Be=>S(Be===!0)}),r.jsx("label",{htmlFor:"require-inspection",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer",children:"Conduct inspection first"})]}),N?r.jsxs(te,{className:"w-full",variant:"default",onClick:()=>oe("accept"),disabled:V.isPending,"data-testid":"button-accept-legacy-inspection",children:[r.jsx(kr,{className:"mr-2 h-4 w-4"}),"Schedule Inspection"]}):r.jsxs(te,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:()=>oe("approve-bypass"),disabled:V.isPending,"data-testid":"button-approve-legacy-rc",children:[r.jsx(kr,{className:"mr-2 h-4 w-4"}),"Approve RC Verification"]})]}):r.jsxs(te,{className:"w-full",variant:"default",onClick:()=>oe("accept"),disabled:V.isPending,"data-testid":"button-accept",children:[r.jsx(kr,{className:"mr-2 h-4 w-4"}),"Accept & Schedule Inspection"]}),!q&&((wt=(wr=L==null?void 0:L.inspectionConfig)==null?void 0:wr.optionalKinds)==null?void 0:wt.includes((z==null?void 0:z.applicationKind)||""))&&r.jsxs(te,{className:"w-full",variant:"secondary",onClick:()=>oe("approve-bypass"),disabled:V.isPending,"data-testid":"button-approve-bypass",children:[r.jsx(kr,{className:"mr-2 h-4 w-4"}),"Approve (Skip Inspection)"]}),r.jsxs(te,{className:"w-full",variant:"outline",onClick:()=>oe("revert"),disabled:V.isPending,"data-testid":"button-revert",children:[r.jsx(jn,{className:"mr-2 h-4 w-4"}),"Revert to Applicant"]}),r.jsxs(te,{className:"w-full",variant:"destructive",onClick:()=>oe("reject"),disabled:V.isPending,"data-testid":"button-reject",children:[r.jsx(oo,{className:"mr-2 h-4 w-4"}),"Reject Application"]}),(z==null?void 0:z.applicationKind)==="cancel_certificate"&&r.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Rejecting this request will restore the original certificate."})]})]}):r.jsx(me,{children:r.jsxs(Ce,{children:[r.jsx(ke,{children:"DTDO Decision"}),r.jsxs(Ue,{children:["Actions are disabled because this application is already ",ee,"."]})]})}),He&&r.jsxs(me,{className:"border-emerald-200 dark:border-emerald-800",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2 text-emerald-700 dark:text-emerald-400",children:[r.jsx(zh,{className:"h-5 w-5"}),"Registration Certificate"]}),r.jsxs(Ue,{children:["RC #: ",z.certificateNumber]})]}),r.jsxs(ge,{className:"space-y-3",children:[r.jsx(te,{className:"w-full",variant:"outline",onClick:we,disabled:h,"data-testid":"button-download-certificate",children:h?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(ds,{className:"mr-2 h-4 w-4"}),"Download RC Certificate"]})}),g?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-3 p-3 bg-amber-50 dark:bg-amber-950/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[r.jsxs("div",{className:"flex items-center gap-2 text-amber-700 dark:text-amber-400 text-sm font-medium",children:[r.jsx(jn,{className:"h-4 w-4"}),"Editing Active RC"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Property Name"}),r.jsx(Pe,{value:Ge("propertyName")??"",onChange:Be=>Te("propertyName",Be.target.value),placeholder:"Property name",className:"h-8 text-sm"})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Guardian / Father's Name"}),r.jsx(Pe,{value:x.guardianName??z.guardianName??"",onChange:Be=>Te("guardianName",Be.target.value),placeholder:"Father's / Husband's name",className:"h-8 text-sm"})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Address"}),r.jsx(Pe,{value:Ge("address")??"",onChange:Be=>Te("address",Be.target.value),placeholder:"Full address",className:"h-8 text-sm"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Gender"}),r.jsxs(pr,{value:Ge("ownerGender")??"",onValueChange:Be=>Te("ownerGender",Be),children:[r.jsx(ur,{className:"h-8 text-sm",children:r.jsx(yr,{placeholder:"Select"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"male",children:"Male"}),r.jsx(it,{value:"female",children:"Female"}),r.jsx(it,{value:"other",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Tehsil"}),r.jsx(Pe,{value:Ge("tehsil")??"",onChange:Be=>Te("tehsil",Be.target.value),placeholder:"Tehsil",className:"h-8 text-sm"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Village / Gram Panchayat"}),r.jsx(Pe,{value:x.gramPanchayat??z.gramPanchayat??"",onChange:Be=>Te("gramPanchayat",Be.target.value),placeholder:"Village name",className:"h-8 text-sm"})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Urban Body"}),r.jsx(Pe,{value:x.urbanBody??z.urbanBody??"",onChange:Be=>Te("urbanBody",Be.target.value),placeholder:"MC/NAC name",className:"h-8 text-sm"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Pincode"}),r.jsx(Pe,{value:Ge("pincode")??"",onChange:Be=>Te("pincode",Be.target.value),placeholder:"Pincode",className:"h-8 text-sm"})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-xs text-gray-600",children:"Alternate Phone"}),r.jsx(Pe,{value:x.alternatePhone??z.alternatePhone??"",onChange:Be=>Te("alternatePhone",Be.target.value),placeholder:"Alt. phone",className:"h-8 text-sm"})]})]})]}),r.jsxs("div",{className:"pt-2 border-t border-amber-200 dark:border-amber-700",children:[r.jsxs(je,{className:"text-xs text-gray-600 flex items-center gap-1",children:["Correction Reason ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx(Ur,{value:j,onChange:Be=>w(Be.target.value),placeholder:"Explain why these corrections are needed (min. 10 characters)...",className:"text-sm resize-none",rows:2}),j.length>0&&j.length<10&&r.jsxs("p",{className:"text-xs text-red-500 mt-1",children:[10-j.length," more characters needed"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{className:"flex-1",variant:"default",onClick:qe,disabled:P.isPending||Object.keys(x).length===0,"data-testid":"button-save-edits",children:P.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(pu,{className:"mr-2 h-4 w-4"}),"Save Corrections"]})}),r.jsx(te,{variant:"outline",onClick:Ke,disabled:P.isPending,"data-testid":"button-cancel-edit",children:r.jsx(sh,{className:"h-4 w-4"})})]})]}):r.jsxs(te,{className:"w-full",variant:"secondary",onClick:()=>v(!0),"data-testid":"button-edit-details",children:[r.jsx(yve,{className:"mr-2 h-4 w-4"}),"Edit RC Details"]})]})]}),r.jsx(L6,{applicationId:e,preferDtdoEndpoint:!0}),r.jsx(EC,{applicationId:e,description:"Workflow trace covering DA scrutiny, DTDO actions, and owner resubmissions.",preferDtdoEndpoint:!0})]})]}),r.jsx(us,{open:s!==null,onOpenChange:Be=>!Be&&i(null),children:r.jsxs(Jn,{className:s==="accept"?"max-w-lg":"",children:[r.jsxs(js,{children:[r.jsxs(ws,{children:[s==="accept"&&"Accept & Schedule Inspection",s==="reject"&&"Reject Application",s==="revert"&&"Revert to Applicant"]}),r.jsxs(Ns,{children:[s==="accept"&&(q?"Approve and issue certificate for this legacy application immediately (No inspection required).":"Schedule the site inspection and assign a Dealing Assistant."),s==="reject"&&"This will permanently reject the application. Please provide rejection reason.",s==="revert"&&"This will send the application back to the applicant for corrections. Please provide details.",s==="approve-bypass"&&"This will approve the application immediately without an inspection field visit."]})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"remarks",children:s==="accept"?q?"Approval Remarks":"Instructions for Inspection Team":"Remarks (Required)"}),r.jsx(Ur,{id:"remarks",placeholder:s==="accept"?q?"Optional instructions or notes...":"Share instructions or observations for the inspection team...":s==="reject"?"Please specify the reason for rejection...":s==="approve-bypass"?"Confirm approval without inspection...":"Please specify what corrections are needed...",value:a,onChange:Be=>o(Be.target.value),rows:3,"data-testid":"textarea-remarks"})]}),s==="accept"&&!q&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{className:"flex items-center gap-2",children:[r.jsx(Al,{className:"h-4 w-4"}),"Inspection Date & Time ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-[1fr,0.6fr]",children:[r.jsxs(KM,{children:[r.jsx(GM,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:Xe("w-full justify-start text-left font-normal",!T&&"text-muted-foreground"),"data-testid":"button-inspection-date",children:[r.jsx(Al,{className:"mr-2 h-4 w-4"}),T?sr(T,"PPP"):"Pick a date"]})}),r.jsx(SA,{className:"w-auto p-0",align:"start",children:r.jsx(lI,{mode:"single",selected:T,onSelect:C,disabled:Be=>Be<Qe,initialFocus:!0})})]}),r.jsxs(pr,{value:A,onValueChange:R,children:[r.jsx(ur,{"data-testid":"select-inspection-time",children:r.jsx(yr,{placeholder:"Time"})}),r.jsx(hr,{className:"max-h-64",children:NP.map(Be=>r.jsx(it,{value:Be,children:fut(Be)},Be))})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Schedule starts from tomorrow. Time slots in 15-minute intervals."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{htmlFor:"assignedDA",className:"flex items-center gap-2",children:[r.jsx(li,{className:"h-4 w-4"}),"Assign Dealing Assistant ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsxs(pr,{value:k,onValueChange:O,children:[r.jsx(ur,{id:"assignedDA","data-testid":"select-da",children:r.jsx(yr,{placeholder:"Select a DA"})}),r.jsx(hr,{children:xe.length===0?r.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No DAs available in this district"}):xe.map(Be=>r.jsxs(it,{value:Be.id,children:[Be.fullName," - ",Be.mobile]},Be.id))})]})]})]})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"ghost",onClick:()=>i(null),disabled:V.isPending,"data-testid":"button-cancel",children:"Cancel"}),r.jsxs(te,{onClick:ae,disabled:V.isPending||De(s)&&!a.trim()||s==="accept"&&!q&&(!T||!A||!k),variant:s==="reject"?"destructive":"default","data-testid":"button-confirm-action",children:[V.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),s==="accept"?q?"Approve Directly":"Accept & Schedule":s==="approve-bypass"?"Confirm Approval":s==="reject"?"Confirm Rejection":"Confirm Revert"]})]})]})}),r.jsx(us,{open:!!l,onOpenChange:Be=>!Be&&c(null),children:r.jsx(Jn,{className:"max-w-4xl",children:l&&r.jsxs(r.Fragment,{children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2",children:[r.jsx(ir,{className:"h-5 w-5"}),pz(l.documentType)]}),r.jsxs(Ns,{className:"flex items-center justify-between flex-wrap gap-2",children:[r.jsx("span",{children:l.fileName}),r.jsx(mz,{status:l.verificationStatus??"pending"})]})]}),r.jsxs("div",{className:"space-y-4 py-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>window.open(Re(l),"_blank","noopener,noreferrer"),title:"Open in new tab for full view",children:[r.jsx(zu,{className:"h-4 w-4 mr-2"}),"Full View"]}),r.jsxs(te,{variant:"ghost",size:"sm",onClick:()=>window.open(Re(l),"_blank"),children:[r.jsx(ds,{className:"h-4 w-4 mr-2"}),"Download"]})]}),r.jsx("div",{className:"border rounded-lg overflow-hidden bg-muted/30",style:{height:"calc(80vh - 180px)",minHeight:"500px"},children:(Ut=l.mimeType)!=null&&Ut.startsWith("image/")?r.jsx("div",{className:"w-full h-full overflow-auto flex items-center justify-center p-4",children:r.jsx("img",{src:Re(l),alt:l.fileName,className:"max-w-full max-h-full object-contain"})}):(St=l.mimeType)!=null&&St.includes("pdf")?r.jsx("iframe",{src:Re(l),className:"w-full h-full",title:l.fileName}):r.jsxs("div",{className:"p-8 text-center text-sm text-muted-foreground h-full flex flex-col items-center justify-center",children:[r.jsx(ir,{className:"w-16 h-16 mb-4 opacity-50"}),r.jsx("p",{children:"This file type is not previewable in the browser."}),r.jsx("p",{className:"text-xs mt-2",children:'Click "Full View" or "Download" to view the file.'})]})})]})]})})})]})}function Ls({label:e,value:t}){return r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-muted-foreground",children:[e,":"]}),r.jsx("span",{className:"font-medium text-right",children:t||"N/A"})]})}function ib({label:e,value:t}){return r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:e}),r.jsx("span",{className:"font-semibold",children:t})]})}function tN({label:e,enabled:t}){return r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:e}),r.jsx(ze,{variant:t?"default":"outline",className:t?"bg-green-100 text-green-700":"",children:t?"Available":"Missing"})]})}const bO={pending:{label:"Pending review",badgeClass:"bg-slate-100 text-slate-700",noteBgClass:"bg-slate-50 border-slate-200",noteTextClass:"text-slate-800"},verified:{label:"Verified",badgeClass:"bg-emerald-50 text-emerald-700",noteBgClass:"bg-emerald-50 border-emerald-200",noteTextClass:"text-emerald-900"},needs_correction:{label:"Needs correction",badgeClass:"bg-amber-50 text-amber-800",noteBgClass:"bg-amber-50 border-amber-200",noteTextClass:"text-amber-900"},rejected:{label:"Rejected",badgeClass:"bg-rose-50 text-rose-700",noteBgClass:"bg-rose-50 border-rose-200",noteTextClass:"text-rose-900"}},afe=e=>{if(!e)return null;const t=e.toLowerCase();return bO[t]?bO[t]:{label:e.replace(/_/g," "),badgeClass:"bg-muted text-muted-foreground",noteBgClass:"bg-muted/40 border-border/60",noteTextClass:"text-muted-foreground"}};function mz({status:e}){const t=afe(e)??bO.pending;return r.jsx(ze,{className:t.badgeClass,children:t.label})}function Rp(e){if(e==null)return"";const t=typeof e=="number"?e:Number(e);return Number.isFinite(t)?`${t.toLocaleString("en-IN")}`:""}function rN(e){if(e==null)return"Not provided";const t=typeof e=="number"?e:Number(e);return!Number.isFinite(t)||t<=0?"Not provided":`${t} km`}function pz(e){return e?e.replace(/_/g," ").replace(/\b\w/g,t=>t.toUpperCase()):"Document"}const xut=(e=8,t=19)=>{const n=[];for(let s=e;s<=t;s++)for(const i of[0,15,30,45]){if(s===t&&i>45)continue;const a=String(s).padStart(2,"0"),o=String(i).padStart(2,"0");n.push(`${a}:${o}`)}return n},gz=xut(8,19),vut=e=>{const[t,n]=e.split(":").map(Number),s=new Date;return s.setHours(t,n,0,0),sr(s,"h:mm a")},yut=(e,t)=>{const[n,s]=t.split(":").map(Number),i=new Date(e);return i.setHours(n,s,0,0),i};function but(){const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),[s,i]=b.useState(),[a,o]=b.useState(gz[8]??"10:00"),[l,c]=b.useState(""),[d,u]=b.useState(""),{data:h,isLoading:f}=rt({queryKey:["/api/dtdo/applications",e]}),{data:m}=rt({queryKey:["/api/dtdo/available-das"]}),p=Ot({mutationFn:async N=>(await lt("POST","/api/dtdo/schedule-inspection",N)).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/dtdo/applications"]}),n({title:"Inspection Scheduled",description:"The inspection order has been assigned to the DA successfully."}),t("/dtdo/dashboard")},onError:N=>{n({title:"Scheduling Failed",description:N.message||"Failed to schedule inspection. Please try again.",variant:"destructive"})}});if(f)return r.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})});if(!h)return r.jsx("div",{className:"container mx-auto p-6 max-w-4xl",children:r.jsx(me,{children:r.jsxs(ge,{className:"p-12 text-center",children:[r.jsx(Kr,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Application Not Found"}),r.jsx(te,{onClick:()=>t("/dtdo/dashboard"),className:"mt-4","data-testid":"button-back",children:"Back to Dashboard"})]})})});const{application:g,owner:v}=h,x=()=>{if(!s){n({title:"Validation Error",description:"Please select an inspection date",variant:"destructive"});return}if(!a){n({title:"Validation Error",description:"Please select an inspection time",variant:"destructive"});return}if(!l){n({title:"Validation Error",description:"Please select a Dealing Assistant",variant:"destructive"});return}const N=yut(s,a);if(N<new Date){n({title:"Validation Error",description:"Inspection date must be in the future",variant:"destructive"});return}p.mutate({applicationId:e,inspectionDate:N.toISOString(),assignedTo:l,specialInstructions:d})},y=(m==null?void 0:m.das)||[],j=new Date;j.setDate(j.getDate()+1),j.setHours(0,0,0,0);const w=j;return r.jsxs("div",{className:"container mx-auto p-6 max-w-4xl space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t("/dtdo/dashboard"),"data-testid":"button-back",children:r.jsx(Es,{className:"h-4 w-4"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Schedule Inspection"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Assign inspection order to a Dealing Assistant"})]})]}),r.jsx(yle,{title:"Application Details",icon:r.jsx(Mi,{className:"h-5 w-5"}),className:"border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-950/20",application:g,owner:{name:v.fullName,mobile:v.mobile,email:v.email},extraRows:[{label:"Address",value:g.address},{label:"District",value:g.district},{label:"Tehsil",value:g.tehsil}]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Inspection Details"}),r.jsx(Ue,{children:"Schedule the site inspection and assign a Dealing Assistant"})]}),r.jsxs(ge,{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{className:"flex items-center gap-2",children:[r.jsx(Al,{className:"h-4 w-4"}),"Inspection Date & Time"]}),r.jsxs("div",{className:"grid gap-3 sm:grid-cols-[1.4fr,0.6fr]",children:[r.jsxs(KM,{children:[r.jsx(GM,{asChild:!0,children:r.jsxs(te,{variant:"outline",className:Xe("w-full justify-start text-left font-normal",!s&&"text-muted-foreground"),"data-testid":"button-inspection-date",children:[r.jsx(Al,{className:"mr-2 h-4 w-4"}),s?sr(s,"PPP"):"Pick a date"]})}),r.jsx(SA,{className:"w-auto p-0",align:"start",children:r.jsx(lI,{mode:"single",selected:s,onSelect:i,disabled:N=>N<w,initialFocus:!0})})]}),r.jsxs(pr,{value:a,onValueChange:o,disabled:!s,children:[r.jsx(ur,{"data-testid":"select-inspection-time",children:r.jsx(yr,{placeholder:"Pick time slot"})}),r.jsx(hr,{className:"max-h-64",children:gz.map(N=>r.jsx(it,{value:N,children:vut(N)},N))})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Calendar opens from the next working day. Time slots are locked to 15-minute intervals (00, 15, 30, 45) to match DA field visits."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{htmlFor:"assignedDA",className:"flex items-center gap-2",children:[r.jsx(li,{className:"h-4 w-4"}),"Assign to Dealing Assistant"]}),r.jsxs(pr,{value:l,onValueChange:c,children:[r.jsx(ur,{id:"assignedDA","data-testid":"select-da",children:r.jsx(yr,{placeholder:"Select a DA"})}),r.jsx(hr,{children:y.length===0?r.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No DAs available in this district"}):y.map(N=>r.jsxs(it,{value:N.id,children:[N.fullName," - ",N.mobile]},N.id))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"specialInstructions",children:"Message for Owner (optional)"}),r.jsx(Ur,{id:"specialInstructions",value:d,onChange:N=>u(N.target.value),placeholder:"Share any visit prep guidance the owner should see (e.g., documents to keep ready, accessibility notes).",rows:4,"data-testid":"textarea-instructions"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"This note is included in the owner notification and shown on their dashboard."})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsxs(te,{onClick:x,disabled:p.isPending||!s||!a||!l,"data-testid":"button-schedule",children:[p.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Schedule Inspection"]}),r.jsx(te,{variant:"outline",onClick:()=>t("/dtdo/dashboard"),disabled:p.isPending,"data-testid":"button-cancel",children:"Cancel"})]})]})]})]})}const jut="/assets/HP_Gov_TR-DHeYrEcM.png",wut="/assets/HP_Touris_TR-4lqzuj-v.png",xz=`
  @page {
    size: A4 portrait;
    margin: 12mm;
  }
  @media print {
    html, body, #root, #root > div {
      width: 100%;
      height: auto;
      background: #ffffff !important;
      overflow: visible !important;
      min-height: auto !important;
    }
    body * {
      visibility: hidden !important;
    }
    #inspection-report-page, #inspection-report-page * {
      visibility: visible !important;
    }
    #inspection-report-page {
      width: 640px !important;
      max-width: 640px !important;
      margin: 0 auto !important;
      padding: 0 !important;
      overflow: visible !important;
      position: static !important;
    }
    #inspection-report-page .print\\:hidden {
      display: none !important;
    }
    #inspection-report-page .avoid-break {
      page-break-inside: avoid;
    }
  }
`,ab=e=>{if(!e)return"";const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"":sr(t,"dd/MM/yyyy")};function Nut(){var G;const{id:e}=bf(),[,t]=Dr(),{toast:n}=Tr(),[s,i]=b.useState(null),[a,o]=b.useState(""),{data:l,isLoading:c}=rt({queryKey:["/api/dtdo/inspection-report",e]}),d={approve:"approve",reject:"reject",revert:"raise-objections"},u=Ot({mutationFn:async({endpoint:H,remarks:se})=>(await lt("POST",`/api/dtdo/inspection-report/${e}/${H}`,{remarks:se})).json(),onSuccess:()=>{er.invalidateQueries({queryKey:["/api/dtdo/applications"]}),er.invalidateQueries({queryKey:["/api/dtdo/inspection-report",e]}),n({title:"Success",description:"Inspection report processed successfully"}),t("/dtdo/dashboard")},onError:H=>{n({title:"Error",description:H.message||"Failed to process inspection report",variant:"destructive"})}}),h=H=>H?typeof H=="string"?H:H.toISOString():null,f=b.useMemo(()=>l?{report:l.report,inspectionOrder:l.inspectionOrder,application:{id:l.application.id,applicationNumber:l.application.applicationNumber,propertyName:l.application.propertyName,district:l.application.district,tehsil:l.application.tehsil,address:l.application.address,category:l.application.category,status:l.application.status??"",siteInspectionOutcome:l.application.siteInspectionOutcome??null,siteInspectionNotes:l.application.siteInspectionNotes??null,siteInspectionCompletedDate:h(l.application.siteInspectionCompletedDate)},owner:l.owner?{id:l.application.userId,fullName:l.owner.fullName,mobile:l.owner.mobile,email:l.owner.email??null}:null,da:l.da?{id:l.report.submittedBy,fullName:l.da.fullName,mobile:l.da.mobile,district:l.application.district}:null,dtdo:null}:null,[l]);if(c)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"w-8 h-8 animate-spin text-primary"})})});if(!l)return r.jsx("div",{className:"container mx-auto p-6 max-w-7xl",children:r.jsx(me,{children:r.jsxs(ge,{className:"p-12 text-center",children:[r.jsx(Kr,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Inspection Report Not Found"}),r.jsx(te,{onClick:()=>t("/dtdo/dashboard"),className:"mt-4","data-testid":"button-back",children:"Back to Dashboard"})]})})});const{report:m,application:p,inspectionOrder:g,owner:v,da:x}=l,j=(m.recommendation||"").toLowerCase()==="raise_objections",N=(p.paymentStatus==="paid"||p.paymentStatus==="completed"||((G=p.applicationNumber)==null?void 0:G.startsWith("LG-HS-")))??!1?"RC Approval":"Approve for Payment",S=H=>{if(!H)return"";const se=H.toLowerCase();return se==="approve"?N:se==="raise_objections"?"Raise Objections":H.replace(/_/g," ")},T=H=>{i(H),o("")},C=()=>{if(!s)return;if(!a.trim()&&(s==="reject"||s==="revert")){n({title:"Remarks Required",description:`Please provide ${s==="reject"?"rejection reason":"objection details"}`,variant:"destructive"});return}const H=d[s];u.mutate({endpoint:H,remarks:a.trim()})},A=m.mandatoryChecklist||{},R=m.desirableChecklist||{},k=Object.values(A),O=k.length>0?Math.round(k.filter(Boolean).length/k.length*100):0,$=Object.values(R),D=$.length>0?Math.round($.filter(Boolean).length/$.length*100):0,q=$N.filter(H=>A==null?void 0:A[H.key]).length,M=BN.filter(H=>R==null?void 0:R[H.key]).length,L=$N.length,V=BN.length,P=ab((g==null?void 0:g.inspectionDate)??null),z=ab(m.actualInspectionDate??null),Z=ab(m.createdAt??null),F=()=>{if(typeof window>"u")return;const H=document.getElementById("inspection-report-page");if(!H){window.print();return}const se=window.open("","_blank","noopener,noreferrer,width=900,height=700");if(!se){window.print();return}const J=Array.from(document.querySelectorAll("link[rel='stylesheet'], style")).map(ie=>ie.outerHTML).join(`
`);se.document.write(`<!DOCTYPE html>
      <html>
        <head>
          <meta charSet="utf-8" />
          <title>Inspection Report</title>
          ${J}
          <style>${xz}</style>
        </head>
        <body>${H.outerHTML}</body>
      </html>`),se.document.close(),se.focus(),setTimeout(()=>{se.print(),se.close()},300)},W=H=>{const se={diamond:"bg-purple-50 text-purple-700 dark:bg-purple-950/20",gold:"bg-yellow-50 text-yellow-700 dark:bg-yellow-950/20",silver:"bg-gray-50 text-gray-700 dark:bg-gray-950/20"};return r.jsx(ze,{variant:"outline",className:se[H.toLowerCase()]||"",children:H.toUpperCase()})};return r.jsxs(r.Fragment,{children:[r.jsx("style",{children:xz}),r.jsxs("div",{id:"inspection-report-page",className:"mx-auto max-w-6xl space-y-6 p-6 print:max-w-[640px] print:w-[640px] print:p-0 print:bg-white",children:[r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 text-sm text-muted-foreground print:hidden",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{variant:"ghost",size:"icon",onClick:()=>t("/dtdo/dashboard"),"data-testid":"button-back",children:r.jsx(Es,{className:"h-4 w-4"})}),"Back to Dashboard"]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.reportDocumentUrl?r.jsx(te,{asChild:!0,variant:"outline",size:"sm","data-testid":"button-download-report",children:r.jsxs("a",{href:m.reportDocumentUrl,target:"_blank",rel:"noreferrer",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"})," Download Attachment"]})}):r.jsxs(te,{variant:"outline",size:"sm",onClick:()=>f&&wle(f),disabled:!f,"data-testid":"button-generate-report-snapshot",children:[r.jsx(ds,{className:"mr-2 h-4 w-4"})," Download Snapshot"]}),r.jsxs(te,{variant:"secondary",size:"sm",onClick:F,"data-testid":"button-print-report",children:[r.jsx(Bj,{className:"mr-2 h-4 w-4"})," Print Report"]})]})]}),r.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm print:border print:shadow-none",children:[r.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 border-b border-slate-100 px-6 py-6 md:flex-row",children:[r.jsx("img",{src:jut,alt:"Government of Himachal Pradesh",className:"h-16 w-auto"}),r.jsxs("div",{className:"text-center md:text-left",children:[r.jsx("p",{className:"text-[11px] uppercase tracking-[0.4em] text-slate-500",children:"Government of Himachal Pradesh"}),r.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"District Inspection Memorandum"}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Application #",p.applicationNumber,"  Homestay Registration 2025"]})]}),r.jsx("img",{src:wut,alt:"Himachal Tourism",className:"h-16 w-auto"})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 border-b border-slate-100 px-6 py-4 text-xs uppercase tracking-wide text-muted-foreground",children:[r.jsxs("div",{children:[r.jsx("p",{children:"Status"}),r.jsx(ze,{variant:"outline",className:j?"bg-amber-50 text-amber-700":"bg-emerald-50 text-emerald-700",children:j?"DA Raised Objections":"Under Review"})]}),r.jsxs("div",{children:[r.jsx("p",{children:"Inspection Window"}),r.jsxs("p",{className:"text-sm font-medium normal-case text-slate-900",children:[P," to ",z]})]}),r.jsxs("div",{children:[r.jsx("p",{children:"Report Submitted"}),r.jsx("p",{className:"text-sm font-medium normal-case text-slate-900",children:Z})]})]}),r.jsxs("div",{className:"space-y-6 px-6 py-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Application"})}),r.jsxs(ge,{children:[r.jsx("div",{className:"text-2xl font-bold",children:p.applicationNumber}),r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:p.propertyName})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Category"})}),r.jsxs(ge,{children:[r.jsx("div",{className:"mt-2",children:W(m.recommendedCategory||p.category)}),m.categoryMeetsStandards?r.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:" Meets standards"}):r.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:" Does not meet standards"})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Mandatory Compliance"})}),r.jsxs(ge,{children:[r.jsxs("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:[O,"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k.filter(Boolean).length," of ",k.length," met"]})]})]}),r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsx(ke,{className:"text-sm font-medium text-muted-foreground",children:"Desirable Compliance"})}),r.jsxs(ge,{children:[r.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[D,"%"]}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[$.filter(Boolean).length," of ",$.length," met"]})]})]})]}),r.jsx(aa,{defaultValue:"owner",className:"avoid-break",children:r.jsxs(me,{children:[r.jsx(Ce,{className:"pb-2",children:r.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[r.jsx(ke,{children:"Property & Inspection"}),r.jsxs(Qi,{className:"grid grid-cols-3",children:[r.jsx(Pr,{value:"owner",children:"Owner"}),r.jsx(Pr,{value:"property",children:"Property"}),r.jsx(Pr,{value:"inspection",children:"Inspection"})]})]})}),r.jsxs(ge,{children:[r.jsxs(Rr,{value:"owner",className:"space-y-2 text-sm",children:[r.jsx("p",{className:"font-medium",children:(v==null?void 0:v.fullName)??""}),r.jsx("p",{className:"text-muted-foreground",children:(v==null?void 0:v.mobile)??"No mobile"}),(v==null?void 0:v.email)&&r.jsx("p",{className:"text-muted-foreground",children:v.email})]}),r.jsxs(Rr,{value:"property",className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Property Name"}),r.jsx("p",{className:"font-medium",children:p.propertyName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"District / Tehsil"}),r.jsxs("p",{className:"font-medium",children:[p.district,"  ",p.tehsil]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Rooms"}),r.jsxs("p",{className:"font-medium",children:["Declared: ",p.totalRooms||"N/A"," | Verified: ",m.actualRoomCount||"N/A"]})]})]}),r.jsxs(Rr,{value:"inspection",className:"space-y-2 text-sm",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Inspector"}),r.jsx("p",{className:"font-medium",children:(x==null?void 0:x.fullName)||"N/A"}),(x==null?void 0:x.mobile)&&r.jsx("p",{className:"text-muted-foreground",children:x.mobile})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Inspection Date"}),r.jsx("p",{className:"font-medium",children:ab(m.actualInspectionDate??null)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-muted-foreground",children:"Report Submitted"}),r.jsx("p",{className:"font-medium",children:ab(m.submittedDate??null)})]})]})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Inspection Findings"}),r.jsx(Ue,{children:"ANNEXURE-III Compliance Checklist (HP Homestay Rules 2025)"})]}),r.jsx(ge,{className:"space-y-4",children:r.jsxs(aa,{defaultValue:"mandatory",className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-2 rounded-full bg-muted/60 p-1 text-xs font-medium",children:[r.jsxs(Pr,{value:"mandatory",className:"text-sm",children:["Section A  Mandatory (",q,"/",L,")"]}),r.jsxs(Pr,{value:"desirable",className:"text-sm",children:["Section B  Desirable (",M,"/",V,")"]})]}),r.jsxs(Rr,{value:"mandatory",className:"mt-4 space-y-3",children:[r.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-900",children:"All mandatory requirements must be met for approval."}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:$N.map(H=>r.jsxs("div",{className:"flex items-center gap-2 rounded border p-2 text-sm",children:[A[H.key]?r.jsx(kr,{className:"h-4 w-4 text-green-600 flex-shrink-0"}):r.jsx(oo,{className:"h-4 w-4 text-red-600 flex-shrink-0"}),r.jsx("span",{className:A[H.key]?"text-slate-900":"text-muted-foreground",children:H.label})]},H.key))}),m.mandatoryRemarks&&r.jsxs("div",{className:"rounded border bg-muted/30 p-3 text-sm",children:[r.jsx("p",{className:"mb-1 font-medium",children:"DA Remarks"}),m.mandatoryRemarks]})]}),r.jsxs(Rr,{value:"desirable",className:"mt-4 space-y-3",children:[r.jsx("div",{className:"rounded-lg border border-blue-200 bg-blue-50 p-3 text-sm text-blue-900",children:"Desirable amenities enhance guest comfort and property rating."}),r.jsx("div",{className:"grid grid-cols-1 gap-2",children:BN.map(H=>r.jsxs("div",{className:"flex items-center gap-2 rounded border p-2 text-sm",children:[R[H.key]?r.jsx(kr,{className:"h-4 w-4 text-green-600 flex-shrink-0"}):r.jsx(oo,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),r.jsx("span",{className:R[H.key]?"text-slate-900":"text-muted-foreground",children:H.label})]},H.key))}),m.desirableRemarks&&r.jsxs("div",{className:"rounded border bg-muted/30 p-3 text-sm",children:[r.jsx("p",{className:"mb-1 font-medium",children:"DA Remarks"}),m.desirableRemarks]})]})]})})]}),m.detailedFindings&&r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsx(ke,{children:"DA's Overall Assessment"})}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-sm whitespace-pre-wrap",children:m.detailedFindings}),r.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-medium",children:"Recommendation:"}),r.jsx(ze,{children:S(m.recommendation)})]})]})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"DTDO Decision"}),r.jsx(Ue,{children:"Make your final decision on this inspection report"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(te,{variant:"default",className:"flex-1",onClick:()=>T("approve"),"data-testid":"button-approve",children:[r.jsx(kve,{className:"mr-2 h-4 w-4"}),N]}),r.jsxs(te,{variant:"outline",className:"flex-1",onClick:()=>T("revert"),"data-testid":"button-revert",children:[r.jsx(jn,{className:"mr-2 h-4 w-4"}),"Revert to Applicant"]}),r.jsxs(te,{variant:"destructive",className:"flex-1",onClick:()=>T("reject"),"data-testid":"button-reject",children:[r.jsx(Ave,{className:"mr-2 h-4 w-4"}),"Reject"]})]})})]})]})]})]}),r.jsx(us,{open:!!s,onOpenChange:()=>i(null),children:r.jsxs(Jn,{"data-testid":"dialog-action",children:[r.jsxs(js,{children:[r.jsxs(ws,{children:[s==="approve"&&N,s==="reject"&&"Reject Application",s==="revert"&&"Revert to Applicant"]}),r.jsxs(Ns,{children:[s==="approve"&&"The owner will be allowed to proceed with payment.",s==="reject"&&"The application will be permanently rejected.",s==="revert"&&"Send the application back to the owner with your remarks for correction."]})]}),r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{children:[r.jsx(je,{htmlFor:"remarks",children:s==="approve"?"Remarks (Optional)":"Remarks (Required)"}),r.jsx(Ur,{id:"remarks",placeholder:s==="approve"?"Add any additional notes...":s==="reject"?"Specify the reason for rejection...":"Specify the issues that need to be addressed...",value:a,onChange:H=>o(H.target.value),rows:4,"data-testid":"textarea-remarks"})]})}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"ghost",onClick:()=>i(null),"data-testid":"button-cancel",children:"Cancel"}),r.jsxs(te,{onClick:C,disabled:u.isPending,"data-testid":"button-confirm",children:[u.isPending&&r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm"]})]})]})})]})]})}function Sut(){return r.jsx(Yhe,{roleBadgeLabel:"District Tourism Development Officer",roleBadgeClassName:"bg-purple-50 text-purple-700 dark:bg-purple-950/20"})}function _ut(e){return e.lastCommentAt?e.lastReadByOfficer?new Date(e.lastCommentAt)>new Date(e.lastReadByOfficer):new Date(e.lastCommentAt)>new Date(e.createdAt):!1}function Cut({role:e="da"}){const{toast:t}=Tr(),n=ci(),[s,i]=b.useState(null),[a,o]=b.useState(""),[l,c]=b.useState(""),[d,u]=b.useState(""),[h,f]=b.useState(""),[m,p]=b.useState(!1),[g,v]=b.useState("owner_grievance"),[x,y]=b.useState(!1),[j,w]=b.useState(""),[N,S]=b.useState(""),[T,C]=b.useState("policy_query"),{data:A,isLoading:R}=rt({queryKey:["/api/grievances",{type:g}],queryFn:async()=>(await lt("GET",`/api/grievances?type=${g}`)).json()}),{data:k}=rt({queryKey:["/api/grievances/unread-count"]}),{data:O,isLoading:$}=rt({queryKey:["/api/grievances",s==null?void 0:s.id],enabled:!!(s!=null&&s.id)}),{data:D,isLoading:q}=rt({queryKey:["/api/grievances",s==null?void 0:s.id,"audit-log"],enabled:!!(s!=null&&s.id)&&m}),M=Ot({mutationFn:async({id:ie,...X})=>(await lt("PATCH",`/api/grievances/${ie}/status`,X)).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/grievances"]}),n.invalidateQueries({queryKey:["/api/grievances/unread-count"]}),n.invalidateQueries({queryKey:["/api/grievances",s==null?void 0:s.id]}),t({title:"Grievance Updated",description:"Status has been updated successfully."}),a==="closed"&&(i(null),p(!1))},onError:()=>{t({title:"Error",description:"Failed to update grievance.",variant:"destructive"})}}),L=Ot({mutationFn:async({grievanceId:ie,comment:X})=>(await lt("POST",`/api/grievances/${ie}/comments`,{comment:X})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/grievances",s==null?void 0:s.id]}),n.invalidateQueries({queryKey:["/api/grievances",{type:g}]}),t({title:"Reply Sent",description:"Your reply has been added to the ticket."}),f("")},onError:()=>{t({title:"Error",description:"Failed to send reply.",variant:"destructive"})}}),V=Ot({mutationFn:async ie=>(await lt("POST","/api/grievances",{...ie,ticketType:"internal_ticket"})).json(),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/grievances",{type:"internal_ticket"}]}),t({title:"Internal Ticket Created",description:"Your ticket has been submitted to DTDO."}),y(!1),w(""),S(""),C("policy_query"),v("internal_ticket")},onError:()=>{t({title:"Error",description:"Failed to create internal ticket.",variant:"destructive"})}}),P=()=>{s&&M.mutate({id:s.id,status:a||void 0,priority:l||void 0,resolutionNotes:d||void 0})},z=()=>{!(s!=null&&s.id)||!h.trim()||L.mutate({grievanceId:s.id,comment:h.trim()})},Z=ie=>{i(ie),o(ie.status||"open"),c(ie.priority||"medium"),u(ie.resolutionNotes||""),p(!1)};b.useEffect(()=>{s||(n.invalidateQueries({queryKey:["/api/grievances/unread-count"]}),n.invalidateQueries({queryKey:["/api/grievances"]}))},[s,n]);const F=ie=>!ie||ie.length===0?r.jsx(me,{className:"bg-muted/50 border-dashed mt-4",children:r.jsxs(ge,{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx(dc,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"No grievances found"}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"There are no grievances in this category."})]})}):r.jsx("div",{className:"grid gap-4 mt-4",children:ie.map(X=>{const he=_ut(X);return r.jsxs(me,{className:`hover:shadow-md transition-all cursor-pointer ${he?"border-orange-400 bg-orange-50/50":"border-slate-200"}`,onClick:()=>Z(X),children:[r.jsx(Ce,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-1 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-mono text-xs text-muted-foreground bg-slate-100 px-2 py-0.5 rounded",children:X.ticketNumber}),r.jsx(ke,{className:"text-base font-semibold text-slate-900",children:X.subject}),he&&r.jsxs(ze,{className:"bg-orange-500 text-white text-[10px] px-2 py-0.5 animate-pulse",children:[r.jsx(Fm,{className:"w-3 h-3 mr-1"}),"New Response"]})]}),r.jsxs(Ue,{children:["Reported on ",sr(new Date(X.createdAt),"PPP")]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(vz,{status:X.status}),r.jsx(yz,{priority:X.priority}),r.jsx(lf,{className:"w-4 h-4 text-gray-400"})]})]})}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:X.description}),r.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-muted-foreground pt-3 border-t",children:[r.jsxs("span",{className:"flex items-center gap-1",children:["Category: ",r.jsx(ze,{variant:"secondary",className:"font-normal capitalize",children:X.category})]}),X.updatedAt&&r.jsxs("span",{children:["Last updated: ",sr(new Date(X.updatedAt),"MMM d, h:mm a")]})]})]})]},X.id)})});if(R)return r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})});const W=A||[],G=W.filter(ie=>["open","in_progress"].includes(ie.status||"")),H=W.filter(ie=>["resolved","closed"].includes(ie.status||"")),se=(k==null?void 0:k.unreadCount)||0,J=O||s;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Grievance Management"}),se>0&&r.jsxs(ze,{className:"bg-orange-500 text-white",children:[se," new responses"]})]}),r.jsx("p",{className:"text-sm text-gray-500",children:g==="owner_grievance"?"Review and resolve grievances submitted by property owners.":"Internal staff tickets for DA-DTDO communication."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[g==="internal_ticket"&&r.jsx(te,{size:"sm",className:"bg-amber-600 hover:bg-amber-700",onClick:()=>y(!0),children:"+ Create Internal Ticket"}),r.jsx("a",{href:e==="dtdo"?"/dtdo/grievance-reports":"/da/grievance-reports",children:r.jsxs(te,{variant:"outline",size:"sm",children:[r.jsx(O3,{className:"w-4 h-4 mr-1"}),"Reports"]})}),r.jsxs(ze,{variant:"outline",className:"text-sm",children:[W.length," total"]})]})]}),r.jsxs("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-lg w-fit",children:[r.jsxs("button",{onClick:()=>v("owner_grievance"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${g==="owner_grievance"?"bg-blue-600 text-white shadow-sm":"text-slate-600 hover:bg-white/50"}`,children:[r.jsx(li,{className:"w-4 h-4 inline mr-2"}),"Owner Grievances"]}),r.jsxs("button",{onClick:()=>v("internal_ticket"),className:`px-4 py-2 rounded-md text-sm font-medium transition-all ${g==="internal_ticket"?"bg-amber-600 text-white shadow-sm":"text-slate-600 hover:bg-white/50"}`,children:[r.jsx(dc,{className:"w-4 h-4 inline mr-2"}),"Internal Tickets"]})]}),r.jsxs(aa,{defaultValue:"all",className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-3 max-w-[400px]",children:[r.jsxs(Pr,{value:"all",children:["All (",W.length,")"]}),r.jsxs(Pr,{value:"open",children:["Open (",G.length,")"]}),r.jsxs(Pr,{value:"resolved",children:["Resolved (",H.length,")"]})]}),r.jsx(Rr,{value:"all",children:F(W)}),r.jsx(Rr,{value:"open",children:F(G)}),r.jsx(Rr,{value:"resolved",children:F(H)})]})]}),r.jsx(us,{open:!!s,onOpenChange:ie=>{ie||(i(null),p(!1),f(""))},children:r.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-mono text-sm text-muted-foreground bg-slate-100 px-2 py-0.5 rounded",children:s==null?void 0:s.ticketNumber}),r.jsx("span",{children:s==null?void 0:s.subject})]}),r.jsx(Ns,{children:e==="dtdo"?"Manage and resolve this grievance":"View grievance details and conversation"})]}),s&&r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(te,{variant:m?"outline":"default",size:"sm",onClick:()=>p(!1),children:"Details"}),r.jsxs(te,{variant:m?"default":"outline",size:"sm",onClick:()=>p(!0),children:[r.jsx(ave,{className:"w-4 h-4 mr-1"}),"Activity Log"]})]}),m?r.jsxs("div",{className:"space-y-3",children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Activity History"}),q?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(vt,{className:"h-6 w-6 animate-spin text-primary"})}):D&&D.length>0?r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:D.map(ie=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-sm",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"font-medium capitalize",children:ie.action.replace("_"," ")}),r.jsx("span",{className:"text-xs text-gray-500",children:sr(new Date(ie.performedAt),"MMM d, h:mm a")})]}),ie.oldValue&&ie.newValue&&r.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:[r.jsx("span",{className:"text-red-600 line-through",children:ie.oldValue}),"  ",r.jsx("span",{className:"text-green-600",children:ie.newValue})]}),!ie.oldValue&&ie.newValue&&r.jsx("div",{className:"mt-1 text-xs text-gray-600",children:ie.newValue})]},ie.id))}):r.jsx("p",{className:"text-sm text-muted-foreground italic py-4",children:"No activity recorded yet."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Description"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:s.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Category"}),r.jsx("p",{className:"mt-1 text-sm capitalize",children:s.category})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Submitted"}),r.jsx("p",{className:"mt-1 text-sm",children:sr(new Date(s.createdAt),"PPP p")})]})]}),e==="dtdo"?r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-lg border",children:[r.jsx("div",{className:"col-span-2 mb-2 font-medium text-sm text-slate-800",children:"Officer Actions (DTDO)"}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),r.jsxs(pr,{value:a,onValueChange:o,children:[r.jsx(ur,{id:"status",className:"mt-1",children:r.jsx(yr,{placeholder:"Select status"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"open",children:"Open"}),r.jsx(it,{value:"in_progress",children:"In Progress"}),r.jsx(it,{value:"resolved",children:"Resolved"}),r.jsx(it,{value:"closed",children:"Closed"})]})]})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"priority",className:"text-sm font-medium",children:"Priority"}),r.jsxs(pr,{value:l,onValueChange:c,children:[r.jsx(ur,{id:"priority",className:"mt-1",children:r.jsx(yr,{placeholder:"Select priority"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"low",children:"Low"}),r.jsx(it,{value:"medium",children:"Medium"}),r.jsx(it,{value:"high",children:"High"}),r.jsx(it,{value:"urgent",children:"Urgent"})]})]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx(je,{htmlFor:"resolution",className:"text-sm font-medium",children:"Resolution Notes"}),r.jsx(Ur,{id:"resolution",value:d,onChange:ie=>u(ie.target.value),placeholder:"Add notes about how this grievance was resolved...",className:"mt-1",rows:3})]})]}):r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Status"}),r.jsx("div",{className:"mt-1",children:r.jsx(vz,{status:s.status})})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Priority"}),r.jsx("div",{className:"mt-1",children:r.jsx(yz,{priority:s.priority})})]}),s.resolutionNotes&&r.jsxs("div",{className:"col-span-2",children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Resolution Notes"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600 bg-emerald-50 p-3 rounded-lg border border-emerald-100",children:s.resolutionNotes})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs(je,{className:"text-sm font-medium text-gray-700 flex items-center gap-2 mb-3",children:[r.jsx(dc,{className:"w-4 h-4"}),"Conversation"]}),r.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto mb-4 bg-gray-50/50 p-2 rounded-lg",children:$?r.jsx("div",{className:"flex justify-center py-4",children:r.jsx(vt,{className:"w-4 h-4 animate-spin"})}):J!=null&&J.comments&&J.comments.length>0?J.comments.map(ie=>r.jsxs("div",{className:`p-3 rounded-lg text-sm ${ie.isInternal?"bg-yellow-50 border border-yellow-100":"bg-white border border-gray-100"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"font-medium text-xs text-gray-500",children:ie.isInternal?"Internal Note":"Reply"}),r.jsx("span",{className:"text-xs text-gray-400",children:sr(new Date(ie.createdAt),"MMM d, h:mm a")})]}),r.jsx("p",{className:"text-gray-700",children:ie.comment})]},ie.id)):r.jsx("p",{className:"text-sm text-muted-foreground italic text-center py-2",children:"No comments yet."})}),r.jsx("div",{className:"flex gap-2",children:r.jsx(Ur,{value:h,onChange:ie=>f(ie.target.value),placeholder:"Type your reply here...",className:"min-h-[80px]"})}),r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsxs(te,{size:"sm",onClick:z,disabled:!h.trim()||L.isPending,children:[L.isPending?r.jsx(vt,{className:"w-3 h-3 mr-2 animate-spin"}):r.jsx(Zd,{className:"w-3 h-3 mr-2"}),"Send Reply"]})})]})]})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>{i(null),p(!1),f("")},children:"Close"}),!m&&e==="dtdo"&&r.jsxs(te,{onClick:P,disabled:M.isPending,children:[M.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Update Details"]})]})]})}),r.jsx(us,{open:x,onOpenChange:y,children:r.jsxs(Jn,{className:"max-w-lg",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2",children:[r.jsx(dc,{className:"w-5 h-5 text-amber-600"}),"Create Internal Ticket"]}),r.jsx(Ns,{children:"Create a ticket for DTDO review. This will NOT be visible to property owners."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{children:[r.jsx(je,{htmlFor:"int-category",className:"text-sm font-medium",children:"Category"}),r.jsxs(pr,{value:T,onValueChange:C,children:[r.jsx(ur,{id:"int-category",className:"mt-1",children:r.jsx(yr,{placeholder:"Select category"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"policy_query",children:"Policy Query"}),r.jsx(it,{value:"system_issue",children:"System Issue"}),r.jsx(it,{value:"application",children:"Application Clarification"}),r.jsx(it,{value:"other",children:"Other"})]})]})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"int-subject",className:"text-sm font-medium",children:"Subject"}),r.jsx("input",{id:"int-subject",type:"text",value:j,onChange:ie=>w(ie.target.value),placeholder:"Brief description of the issue",className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-amber-500"})]}),r.jsxs("div",{children:[r.jsx(je,{htmlFor:"int-description",className:"text-sm font-medium",children:"Description"}),r.jsx(Ur,{id:"int-description",value:N,onChange:ie=>S(ie.target.value),placeholder:"Provide details about the issue or query...",className:"mt-1",rows:4})]})]}),r.jsxs(Fa,{children:[r.jsx(te,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),r.jsxs(te,{className:"bg-amber-600 hover:bg-amber-700",onClick:()=>{j.trim()&&N.trim()&&V.mutate({subject:j.trim(),description:N.trim(),category:T})},disabled:!j.trim()||!N.trim()||V.isPending,children:[V.isPending&&r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}),"Create Ticket"]})]})]})})]})}function vz({status:e}){const t={open:"bg-blue-100 text-blue-700 border-blue-200",in_progress:"bg-amber-100 text-amber-700 border-amber-200",resolved:"bg-emerald-100 text-emerald-700 border-emerald-200",closed:"bg-slate-100 text-slate-700 border-slate-200"},n={open:Kr,in_progress:Vs,resolved:Fr,closed:Fr},s=t[e||"open"]||t.open,i=n[e||"open"]||Kr;return r.jsxs(ze,{variant:"outline",className:`${s} flex items-center gap-1`,children:[r.jsx(i,{className:"w-3 h-3"}),r.jsx("span",{className:"capitalize",children:(e||"open").replace("_"," ")})]})}function yz({priority:e}){const t={low:"bg-gray-100 text-gray-600",medium:"bg-blue-50 text-blue-600",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"},n=e||"medium",s=t[n]||t.medium;return r.jsx(ze,{className:`${s} text-[10px] font-medium`,children:n.toUpperCase()})}function Aut(){return r.jsx(Cut,{role:"dtdo"})}const bz={applicationNumber:"",ownerMobile:"",ownerAadhaar:"",month:"",year:"",fromDate:"",toDate:"",status:"all",recentLimit:"10"},kut=[{value:"1",label:"January"},{value:"2",label:"February"},{value:"3",label:"March"},{value:"4",label:"April"},{value:"5",label:"May"},{value:"6",label:"June"},{value:"7",label:"July"},{value:"8",label:"August"},{value:"9",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],Put=new Date().getFullYear(),Tut=Array.from({length:6},(e,t)=>Put-t),Eut=[{value:"all",label:"All statuses"},{value:"draft",label:"Draft"},{value:"submitted",label:"New (Submitted)"},{value:"under_scrutiny",label:"Under Scrutiny"},{value:"forwarded_to_dtdo",label:"Forwarded to DTDO"},{value:"dtdo_review",label:"DTDO Review"},{value:"inspection_scheduled",label:"Inspection Scheduled"},{value:"inspection_complete",label:"Inspection Complete"},{value:"payment_pending",label:"Payment Pending"},{value:"approved",label:"Approved"},{value:"reverted_by_dtdo",label:"Reverted by Prescribed Authority"},{value:"objection_raised",label:"DTDO Objection"},{value:"reverted_to_applicant",label:"Reverted to Applicant"},{value:"rejected",label:"Rejected"}];function jz(){var x;const[e,t]=b.useState(bz),[n,s]=b.useState([]),[i,a]=b.useState("newest"),{toast:o}=Tr(),[,l]=Dr(),{data:c}=rt({queryKey:["/api/auth/me"]}),d=Ot({mutationFn:async y=>(await lt("POST","/api/applications/search",y)).json(),onSuccess:y=>{var j;s(y.results??[]),o({title:"Search complete",description:`${((j=y.results)==null?void 0:j.length)??0} application(s) found.`})},onError:y=>{const j=y instanceof Error?y.message:"Unable to search applications right now.";o({title:"Search failed",description:j,variant:"destructive"})}}),u=()=>{t(bz),s([])},h=y=>{y.preventDefault();const j=e.status&&e.status!=="all",w=!!e.month,N=!!e.year;if(w&&!N||!w&&N){o({title:"Select month & year",description:"Choose both month and year (or clear both) before filtering by month.",variant:"destructive"});return}const S=w&&N,T=Number(e.recentLimit),C=Number.isFinite(T)&&T>0,A=S&&!C;if(!Object.entries(e).some(([O,$])=>O==="status"||O==="month"||O==="year"||O==="recentLimit"?!1:$.trim().length>0)&&!j&&!A&&!C){o({title:"Add search filters",description:"Provide an application number, owner detail, date range, month + year, or use the quick view option.",variant:"destructive"});return}const k={...e};A||(k.month="",k.year=""),C&&(k.fromDate="",k.toDate=""),C||(k.recentLimit=""),d.mutate(k)},f=y=>j=>{t(w=>({...w,[y]:j}))},m=y=>{const{name:j,value:w}=y.target;t(N=>({...N,[j]:w}))},g=(((x=c==null?void 0:c.user)==null?void 0:x.role)??"")==="dealing_assistant"?"/da/applications/":"/dtdo/applications/",v=b.useMemo(()=>n.length===0?[]:[...n].sort((y,j)=>{const w=S=>{const T=S.updatedAt??S.createdAt??S.submittedAt;return T?new Date(T).getTime():0},N=w(y)-w(j);return i==="newest"?-N:N}),[n,i]);return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold",children:"Search Applications"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Locate applications using reference numbers, owner details, or submission dates."})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Search Filters"}),r.jsx(Ue,{children:"Provide one or more filters. You can narrow results by application number, contact details, or submission period."})]}),r.jsx(ge,{children:r.jsxs("form",{className:"grid gap-6",onSubmit:h,children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"applicationNumber",children:"Application Number"}),r.jsx(Pe,{id:"applicationNumber",name:"applicationNumber",value:e.applicationNumber,onChange:m,placeholder:"HP-HS-2025-SML-000123"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"ownerMobile",children:"Owner Mobile"}),r.jsx(Pe,{id:"ownerMobile",name:"ownerMobile",value:e.ownerMobile,onChange:m,placeholder:"9876543210"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"ownerAadhaar",children:"Owner Aadhaar"}),r.jsx(Pe,{id:"ownerAadhaar",name:"ownerAadhaar",value:e.ownerAadhaar,onChange:m,placeholder:"12-digit Aadhaar"})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{children:"Month / Year"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(pr,{value:e.month,onValueChange:f("month"),children:[r.jsx(ur,{className:"w-full",children:r.jsx(yr,{placeholder:"Month"})}),r.jsx(hr,{children:kut.map(y=>r.jsx(it,{value:y.value,children:y.label},y.value))})]}),r.jsxs(pr,{value:e.year,onValueChange:f("year"),children:[r.jsx(ur,{className:"w-full",children:r.jsx(yr,{placeholder:"Year"})}),r.jsx(hr,{children:Tut.map(y=>r.jsx(it,{value:String(y),children:y},y))})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Select both month and year, or leave both empty. Providing a custom date range overrides this filter."})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"status",children:"Status"}),r.jsxs(pr,{value:e.status,onValueChange:f("status"),children:[r.jsx(ur,{id:"status",children:r.jsx(yr,{placeholder:"All statuses"})}),r.jsx(hr,{children:Eut.map(y=>r.jsx(it,{value:y.value,children:y.label},y.value))})]})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"recentLimit",children:"Quick View (Latest Records)"}),r.jsxs(pr,{value:e.recentLimit,onValueChange:f("recentLimit"),children:[r.jsx(ur,{id:"recentLimit",children:r.jsx(yr,{placeholder:"Select count"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"0",children:"Off (require filters)"}),r.jsx(it,{value:"10",children:"Latest 10"}),r.jsx(it,{value:"20",children:"Latest 20"}),r.jsx(it,{value:"50",children:"Latest 50"})]})]}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Fetch the newest entries with no other filters. This overrides the month/year and date range selections."})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"fromDate",children:"From Date"}),r.jsx(Pe,{id:"fromDate",name:"fromDate",type:"date",value:e.fromDate,onChange:m})]}),r.jsxs("div",{className:"grid gap-2",children:[r.jsx(je,{htmlFor:"toDate",children:"To Date"}),r.jsx(Pe,{id:"toDate",name:"toDate",type:"date",value:e.toDate,onChange:m})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx(te,{type:"submit",disabled:d.isPending,children:d.isPending?"Searching...":"Search"}),r.jsx(te,{type:"button",variant:"outline",onClick:u,children:"Reset"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum 200 results returned. Narrow filters for precise matches."})]})]})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{children:"Results"}),r.jsx(Ue,{children:v.length===0?"Run a search to display matching applications.":`Showing ${v.length} result${v.length===1?"":"s"}.`})]}),v.length>0&&r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Sort:"}),r.jsxs(pr,{value:i,onValueChange:y=>a(y),children:[r.jsx(ur,{className:"w-[160px]","data-testid":"select-search-sort-order",children:r.jsx(yr,{placeholder:"Select order"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"newest",children:"Newest first"}),r.jsx(it,{value:"oldest",children:"Oldest first"})]})]})]})]}),r.jsx(ge,{className:"space-y-4",children:v.length>0?r.jsx("div",{className:"rounded-md border",children:r.jsxs(To,{children:[r.jsx(Eo,{children:r.jsxs(In,{children:[r.jsx(Mt,{children:"Application #"}),r.jsx(Mt,{children:"Property"}),r.jsx(Mt,{children:"Owner"}),r.jsx(Mt,{children:"Mobile"}),r.jsx(Mt,{children:"Status"}),r.jsx(Mt,{children:"Created"}),r.jsx(Mt,{className:"w-[120px] text-right",children:"Action"})]})}),r.jsx(Oo,{children:v.map(y=>r.jsxs(In,{children:[r.jsx(Rt,{className:"font-medium",children:r.jsx(te,{variant:"ghost",className:"px-0 font-semibold underline",onClick:()=>l(`${g}${y.id}`),children:y.applicationNumber})}),r.jsx(Rt,{children:y.propertyName}),r.jsx(Rt,{children:y.ownerName}),r.jsx(Rt,{children:y.ownerMobile}),r.jsx(Rt,{children:r.jsx(ze,{variant:"secondary",children:y.status})}),r.jsx(Rt,{children:y.createdAt?new Date(y.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):""}),r.jsx(Rt,{className:"text-right",children:r.jsx(te,{variant:"outline",size:"sm",onClick:()=>l(`${g}${y.id}`),children:"View"})})]},y.id))})]})}):r.jsx("p",{className:"text-sm text-muted-foreground",children:"No applications to display. Adjust your filters and try again."})})]})]})}const Out=cw(),Rut=I.object({ownerName:I.string().min(3,"Owner name is required"),ownerMobile:I.string().min(8,"Enter a valid mobile number"),ownerEmail:I.string().email("Invalid email").optional().or(I.literal("")),propertyName:I.string().min(3,"Property name is required"),district:I.string().min(2,"District is required"),tehsil:I.string().min(2,"Tehsil is required"),address:I.string().min(5,"Address is required"),pincode:I.string().min(4,"Pincode is required"),locationType:I.enum(["gp","mc","tcp"]),totalRooms:I.coerce.number().int().min(1).max(12),guardianRelation:I.enum(["s_o","d_o","w_o","c_o","father","husband","guardian"]).default("s_o"),guardianName:I.string().min(3,"Relative / Guardian name is required"),rcNumber:I.string().min(3,"RC number is required"),rcIssueDate:I.string().min(4,"Issue date is required"),certificateValidityYears:I.enum(["1","3"]).default("1"),rcExpiryDate:I.string().min(4,"Expiry date is required"),notes:I.string().optional()}),Dut=[{value:"gp",label:"Gram Panchayat"},{value:"mc",label:"Municipal Corporation / Municipal Council"},{value:"tcp",label:"Town & Country Planning / SADA / NP Area"}];function Mut(){var fe;const{toast:e}=Tr(),[,t]=Dr(),{data:n}=rt({queryKey:["/api/auth/me"],staleTime:5*60*1e3}),s=n==null?void 0:n.user,{data:i,refetch:a}=rt({queryKey:["/api/existing-owners/active"]}),o=(i==null?void 0:i.application)??null,{data:l}=rt({queryKey:["/api/applications"],enabled:(s==null?void 0:s.role)==="property_owner",staleTime:30*1e3}),c=((fe=l==null?void 0:l.applications)==null?void 0:fe[0])??null,{data:d}=rt({queryKey:["/api/existing-owners/settings"],queryFn:async()=>{const Q=await fetch("/api/existing-owners/settings",{credentials:"include"});if(!Q.ok){const Oe=await Q.text()||Q.statusText;throw new Error(Oe)}return Q.json()},staleTime:5*60*1e3}),{data:u}=rt({queryKey:["/api/settings/upload-policy"],staleTime:5*60*1e3}),h=u??PC,f=h.documents.maxFileSizeMB,m=h.photos.maxFileSizeMB,[p,g]=b.useState([]),[v,x]=b.useState([]),[y,j]=b.useState([]),[w,N]=b.useState(null),[S,T]=b.useState(null),[C,A]=b.useState(!1),R=s!=null&&s.id?`existing-owner-draft:${s.id}`:null,k=b.useMemo(()=>({ownerName:(s==null?void 0:s.fullName)??"",ownerMobile:(s==null?void 0:s.mobile)??"",ownerEmail:(s==null?void 0:s.email)??"",propertyName:"",district:(s==null?void 0:s.district)??"",tehsil:"",address:"",pincode:"",locationType:"gp",totalRooms:1,guardianRelation:"s_o",guardianName:"",rcNumber:"",rcIssueDate:"",certificateValidityYears:"1",rcExpiryDate:"",notes:""}),[s]),O=lu({resolver:hf(Rut),defaultValues:k,mode:"onChange",reValidateMode:"onChange"}),$=O.watch("rcIssueDate"),D=O.watch("certificateValidityYears"),q=O.watch("district"),M=O.watch("tehsil"),L=q?vm(q):[],V=b.useMemo(()=>M&&!L.includes(M)?[M,...L]:L,[L,M]),P=b.useMemo(()=>{if(!(d!=null&&d.minIssueDate))return o7;const Q=new Date(d.minIssueDate);return Number.isNaN(Q.getTime())?o7:Q.toISOString().slice(0,10)},[d]),z=b.useMemo(()=>{if(!P)return null;const Q=new Date(P);return Number.isNaN(Q.getTime())?null:Q.toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"})},[P]);b.useEffect(()=>{if($&&D){const Q=new Date($);if(!Number.isNaN(Q.getTime())){const Oe=parseInt(D,10),ve=lne(Q,Oe),ee=sr(ve,"yyyy-MM-dd");O.setValue("rcExpiryDate",ee,{shouldValidate:!0})}}},[$,D,O]);const[Z,F]=b.useState(!1),W=b.useRef(!1),G=b.useRef(!1),{data:H,refetch:se}=rt({queryKey:["/api/existing-owners/draft"],enabled:!!s,staleTime:30*1e3});b.useEffect(()=>{s&&!Z&&(O.reset(k),F(!0))},[s,k,O,Z]),b.useEffect(()=>{if(!Z||W.current||!H||(W.current=!0,!H.draft))return;const{values:Q,certificateDocuments:Oe,identityProofDocuments:ve,savedAt:ee}=H.draft;Q&&(O.reset({...k,...Q}),Q.tehsil&&setTimeout(()=>{O.setValue("tehsil",Q.tehsil,{shouldValidate:!0})},50)),Array.isArray(Oe)&&g(Oe),Array.isArray(ve)&&x(ve),ee&&T(ee)},[Z,H,k,O]);const J=Ot({mutationFn:async Q=>{const Oe=await fetch("/api/existing-owners",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...Q.values,certificateDocuments:Q.documents,identityProofDocuments:Q.identityProof})});if(!Oe.ok){const ve=await Oe.json().catch(()=>null),ee=new Error((ve==null?void 0:ve.message)||"Failed to submit onboarding request");throw ve!=null&&ve.applicationId&&(ee.applicationId=ve.applicationId),ee}return Oe.json()},onSuccess:Q=>{N({applicationNumber:Q.application.applicationNumber}),e({title:"Submitted for verification",description:"The Admin-RC desk will review your certificate shortly."}),O.reset(k),g([]),x([]),R&&(localStorage.removeItem(R),T(null)),a(),Q.application.id&&t(`/applications/${Q.application.id}`)},onError:Q=>{e({variant:"destructive",title:"Could not submit request",description:Q.message}),Q!=null&&Q.applicationId&&t(`/applications/${Q.applicationId}`)}});b.useEffect(()=>{if(c&&c.applicationKind!=="renewal"&&c.status!=="legacy_rc_draft"&&!G.current){G.current=!0,t(`/applications/${c.id}`);return}o&&!G.current&&(G.current=!0,t(`/applications/${o.id}`))},[c,o,t]);const ie=async()=>{if(!s){e({title:"Unable to save draft",description:"Please wait for your profile to load and try again.",variant:"destructive"});return}A(!0);try{const Oe={...O.getValues(),certificateDocuments:p,identityProofDocuments:v},ve=await fetch("/api/existing-owners/draft",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Oe)});if(!ve.ok){const ee=await ve.json().catch(()=>null);throw new Error((ee==null?void 0:ee.message)||"Failed to save draft")}T(new Date().toISOString()),se(),e({title:"Draft saved",description:"Your progress has been saved to the server."})}catch(Q){console.error("[existing-owner] Failed to save draft",Q),e({title:"Failed to save draft",description:(Q==null?void 0:Q.message)??"Please try again",variant:"destructive"})}finally{A(!1)}},X=Q=>{if(p.length===0){e({variant:"destructive",title:"Certificate scan required",description:"Upload a copy of your signed RC before submitting."});return}if(v.length===0){e({variant:"destructive",title:"Identity proof required",description:"Upload a copy of your Aadhaar or government ID to continue."});return}J.mutate({values:Q,documents:p,identityProof:v})},he=O.formState.isValid&&p.length>0&&v.length>0&&!J.isPending;return r.jsxs("div",{className:"container mx-auto py-8 px-4 space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ive,{className:"h-8 w-8 text-primary"}),r.jsx("h1",{className:"text-3xl font-bold",children:"Existing RC Registration"})]}),r.jsx("p",{className:"text-muted-foreground max-w-3xl",children:"Already have a valid Homestay certificate? Register your existing RC to migrate into the new HP Tourism portal so you can renew, amend rooms, or download digital certificates without reapplying from scratch."})]}),r.jsxs(fn,{children:[r.jsx(Po,{children:"Verify Existing License"}),r.jsx(mn,{children:"Share your current certificate details below. Our Admin-RC desk will validate the document, assign a digital RC number, and unlock renewals, room amendments, and cancellations directly from the portal."})]}),r.jsxs(me,{children:[r.jsxs(Ce,{className:"space-y-1",children:[r.jsx(ke,{children:"Submit your current license"}),r.jsxs(Ue,{children:["Provide the basic owner/property details, upload a scanned copy of your signed certificate, and attach a government ID proof. We are onboarding licenses that were issued on or after"," ",r.jsx("span",{className:"font-semibold",children:z??"1 January 2022"}),"."]})]}),r.jsxs(ge,{className:"space-y-6",children:[w&&r.jsxs(fn,{className:"border-emerald-200 bg-emerald-50 text-emerald-800",children:[r.jsx(Fr,{className:"h-5 w-5"}),r.jsx(Po,{children:"Request received"}),r.jsxs(mn,{children:["Ticket ",r.jsx("span",{className:"font-semibold",children:w.applicationNumber})," is now in the Admin-RC queue. You will receive an update once the editor verifies your document."]})]}),o&&r.jsxs(fn,{className:"border-amber-200 bg-amber-50 text-amber-900",children:[r.jsx(Kr,{className:"h-5 w-5"}),r.jsx(Po,{children:"Onboarding in progress"}),r.jsxs(mn,{className:"space-y-2",children:[r.jsxs("p",{children:["Application ",r.jsx("span",{className:"font-semibold",children:o.applicationNumber})," is already awaiting Admin-RC verification. Youll receive an update once the certificate is validated."]}),r.jsx(te,{type:"button",variant:"outline",onClick:()=>t(`/applications/${o.id}`),children:"View request"})]})]}),!o&&r.jsx(du,{...O,children:r.jsxs("form",{onSubmit:O.handleSubmit(X),className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:O.control,name:"ownerName",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Owner Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Full name as per RC",...Q})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"ownerMobile",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Mobile Number"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"10-digit mobile",...Q})}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:O.control,name:"ownerEmail",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Email (optional)"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"you@example.com",...Q})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid grid-cols-[140px_1fr] gap-2",children:[r.jsx(ot,{control:O.control,name:"guardianRelation",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Relationship"}),r.jsxs(pr,{onValueChange:Q.onChange,defaultValue:Q.value,children:[r.jsx(dt,{children:r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select"})})}),r.jsxs(hr,{children:[r.jsx(it,{value:"s_o",children:"S/O"}),r.jsx(it,{value:"d_o",children:"D/O"}),r.jsx(it,{value:"w_o",children:"W/O"}),r.jsx(it,{value:"c_o",children:"C/O"})]})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"guardianName",render:({field:Q})=>r.jsxs(at,{children:[r.jsxs(ht,{children:["Full Name ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"As per Aadhaar card",...Q})}),r.jsx(ct,{})]})})]})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:O.control,name:"propertyName",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Property Name"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Homestay name",...Q})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"district",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"District"}),r.jsxs(pr,{value:Q.value,onValueChange:Oe=>{Q.onChange(Oe),O.setValue("tehsil","")},children:[r.jsx(dt,{children:r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select district"})})}),r.jsx(hr,{children:Out.map(Oe=>r.jsx(it,{value:Oe,children:Oe},Oe))})]}),r.jsx(ct,{})]})})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsx(ot,{control:O.control,name:"tehsil",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Tehsil"}),r.jsxs(pr,{value:Q.value,onValueChange:Q.onChange,disabled:!q||V.length===0,children:[r.jsx(dt,{children:r.jsx(ur,{children:r.jsx(yr,{placeholder:q?"Select tehsil":"Select district first"})})}),r.jsx(hr,{children:V.map(Oe=>r.jsx(it,{value:Oe,children:Oe},Oe))})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"pincode",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Pincode"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"6-digit pincode",...Q})}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:O.control,name:"address",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Full Address"}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"Village / Ward, Post Office, additional directions",rows:3,...Q})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[r.jsx(ot,{control:O.control,name:"locationType",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Location Type"}),r.jsxs(pr,{value:Q.value,onValueChange:Q.onChange,children:[r.jsx(dt,{children:r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select location type"})})}),r.jsx(hr,{children:Dut.map(Oe=>r.jsx(it,{value:Oe.value,children:Oe.label},Oe.value))})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"totalRooms",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Total Approved Rooms"}),r.jsx(dt,{children:r.jsx(Pe,{type:"number",min:1,max:12,...Q})}),r.jsx(ct,{})]})}),r.jsx("div",{className:"hidden md:block"})]}),r.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[r.jsx(ot,{control:O.control,name:"rcNumber",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"RC / Certificate Number"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"HP-HS-XXXX-000123",...Q})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"rcIssueDate",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Issue Date"}),r.jsx(dt,{children:r.jsx(Pe,{type:"date",min:P,...Q})}),r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Accepted for certificates issued on or after ",r.jsx("span",{className:"font-medium",children:z??"01 January 2022"}),"."]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"certificateValidityYears",render:({field:Q})=>r.jsxs(at,{children:[r.jsxs(ht,{className:"flex items-center gap-1.5",children:[r.jsx(Al,{className:"h-3.5 w-3.5"}),"Validity Period"]}),r.jsx(dt,{children:r.jsx("div",{className:"h-9 flex items-center",children:r.jsxs(wc,{value:Q.value,onValueChange:Q.onChange,className:"flex gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ps,{value:"1",id:"validity-1"}),r.jsx("label",{htmlFor:"validity-1",className:"text-sm cursor-pointer",children:"1 Year"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ps,{value:"3",id:"validity-3"}),r.jsx("label",{htmlFor:"validity-3",className:"text-sm cursor-pointer",children:"3 Years"})]})]})})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-calculates expiry from issue date"}),r.jsx(ct,{})]})}),r.jsx(ot,{control:O.control,name:"rcExpiryDate",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Validity Upto"}),r.jsx(dt,{children:r.jsx(Pe,{type:"date",min:O.watch("rcIssueDate")||P,...Q})}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Editable if different from auto-calculated"}),r.jsx(ct,{})]})})]}),r.jsx(ot,{control:O.control,name:"notes",render:({field:Q})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Additional Notes (optional)"}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"Share any remarks for the Admin-RC editor",rows:3,...Q})}),r.jsx(ct,{})]})}),r.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3 text-sm text-amber-800",children:[r.jsx("p",{className:"font-medium",children:" Document Upload Requirements"}),r.jsxs("p",{className:"text-xs mt-1",children:["Maximum file size: ",f,"MB for PDF documents, ",m,"MB for photos/images. Large images will be automatically optimized."]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Owner ID Proof (Aadhaar or Govt ID) ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(Wc,{label:v.length>0?"Replace ID Proof":"Upload ID Proof",maxFiles:2,accept:".pdf",onUploadComplete:x,existingFiles:v,isMissing:v.length===0,hideNote:!0}),v.length===0&&r.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(Kr,{className:"h-3.5 w-3.5"}),"Attach at least one clear PDF copy of Aadhaar or any government ID."]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("p",{className:"text-sm font-medium",children:["Upload Signed Certificate ",r.jsx("span",{className:"text-destructive",children:"*"})]}),r.jsx(Wc,{label:p.length>0?"Replace Certificate":"Upload Certificate",maxFiles:1,accept:".pdf",onUploadComplete:g,existingFiles:p,isMissing:p.length===0,hideNote:!0}),p.length===0&&r.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[r.jsx(Kr,{className:"h-3.5 w-3.5"}),"Upload a PDF of the most recent signed certificate."]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm font-medium",children:"Additional Supporting Documents (Optional)"}),r.jsx(Wc,{label:y.length>0?"Add More Documents":"Add Documents",maxFiles:5,multiple:!0,accept:".pdf,.jpg,.jpeg",category:"photos",onUploadComplete:j,existingFiles:y,showDescription:!0,hideNote:!0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"You may upload additional supporting documents (PDF or JPG format)."})]}),r.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between lg:gap-6",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("p",{className:"text-xs text-muted-foreground",children:"Submission automatically routes to the Admin-RC editor. You will receive a notification once the details are verified."}),S&&r.jsxs("p",{className:"text-xs text-muted-foreground",children:["Draft saved ",ap(new Date(S),{addSuffix:!0}),"."]})]}),r.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row",children:[r.jsx(te,{type:"button",variant:"outline",onClick:ie,disabled:C||!s,children:C?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Draft"}),r.jsx(te,{type:"submit",disabled:!he,children:J.isPending?"Submitting...":"Submit for Verification"})]})]})]})})]})]})]})}const Iut="/assets/hero_bg-DM-AdNO5.jpg",Lut=[{question:"How do I register my homestay?",answer:"How do I register my homestay? What are the permit requirements? What are the permit requirements?"},{question:"What are the permit requirements?",answer:"You need valid ID, property documents, and fire safety clearance."},{question:"How can I report an issue?",answer:"Use the contact form below or call our helpline during business hours."},{question:"Where can I find tourism statistics?",answer:"Visit the HP Tourism official website for detailed statistics and reports."}];function Fut(){const[e,t]=b.useState(null);return r.jsxs("div",{className:"min-h-screen",style:{background:"#f8fafc",fontFamily:"'Inter', sans-serif"},children:[r.jsx(jf,{title:"HP Tourism Portal",subtitle:"Homestay & B&B Registration",showBack:!1,showHome:!0}),r.jsxs("div",{style:{backgroundImage:`linear-gradient(rgba(0,0,0,0.1), rgba(0,0,0,0.3)), url(${Iut})`,backgroundPosition:"center 60%",backgroundSize:"cover",backgroundRepeat:"no-repeat",padding:"220px 20px 60px",textAlign:"center",position:"relative"},children:[r.jsx("h1",{style:{fontSize:"3rem",fontWeight:800,color:"white",marginBottom:"8px",textShadow:"0 4px 12px rgba(0,0,0,0.5)"},children:"How Can We Help You?"}),r.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:600,color:"rgba(255,255,255,0.95)",marginBottom:"40px",marginTop:"0px",textShadow:"0 2px 8px rgba(0,0,0,0.5)"},children:"Connect with us for support and inquiries"}),r.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"16px",flexWrap:"wrap"},children:[r.jsxs("a",{href:"tel:01772625924",style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"12px 32px",background:"rgba(30, 58, 138, 0.4)",borderRadius:"50px",color:"white",textDecoration:"none",fontSize:"15px",fontWeight:600,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(4px)"},children:[r.jsx(Kg,{size:18})," Call Now"]}),r.jsxs("a",{href:"mailto:tourismmin-hp@nic.in",style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"12px 32px",background:"rgba(30, 58, 138, 0.4)",borderRadius:"50px",color:"white",textDecoration:"none",fontSize:"15px",fontWeight:600,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(4px)"},children:[r.jsx(Jv,{size:18})," Email Us"]}),r.jsxs("a",{href:"/track",style:{display:"inline-flex",alignItems:"center",gap:"10px",padding:"12px 32px",background:"rgba(30, 58, 138, 0.4)",borderRadius:"50px",color:"white",textDecoration:"none",fontSize:"15px",fontWeight:600,border:"1px solid rgba(255,255,255,0.3)",backdropFilter:"blur(4px)"},children:[r.jsx(gu,{size:18})," Track Application"]})]})]}),r.jsxs("div",{style:{maxWidth:"1000px",margin:"60px auto 40px",padding:"0 20px",position:"relative",zIndex:10},children:[r.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(380px, 1fr))",gap:"24px",marginBottom:"40px"},children:[r.jsx(me,{style:{borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:r.jsxs(ge,{style:{padding:"24px",display:"flex",gap:"20px",alignItems:"flex-start"},children:[r.jsx("div",{style:{flexShrink:0},children:r.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",children:[r.jsx("path",{d:"M30 6L6 26H12V54H48V26H54L30 6Z",fill:"#15803d"}),r.jsx("path",{d:"M12 26L30 11L48 26",stroke:"#14532d",strokeWidth:"2",strokeLinejoin:"round"}),r.jsx("path",{d:"M22 54V38H38V54",fill:"white"}),r.jsx("path",{d:"M52 52C52 52 58 46 58 38C58 32 54 30 50 30C46 30 42 32 42 38C42 46 52 52 52 52Z",fill:"#86efac",stroke:"white",strokeWidth:"2"}),r.jsx("path",{d:"M50 30V52",stroke:"#15803d",strokeWidth:"1"})]})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{style:{fontWeight:700,fontSize:"17px",color:"#1e293b",marginBottom:"4px"},children:"(1) Property Owners"}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px",lineHeight:1.5},children:"Register, manage listings, and access resources for tourism properties in Himachal."}),r.jsx(te,{style:{background:"#15803d",borderRadius:"4px",fontSize:"13px",fontWeight:600,padding:"8px 24px",height:"auto"},asChild:!0,children:r.jsx("a",{href:"/services",children:"View Services"})})]})]})}),r.jsx(me,{style:{borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:r.jsxs(ge,{style:{padding:"24px",display:"flex",gap:"20px",alignItems:"flex-start"},children:[r.jsx("div",{style:{flexShrink:0},children:r.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",children:[r.jsx("circle",{cx:"30",cy:"20",r:"12",fill:"#1e40af"}),r.jsx("path",{d:"M10 56V44C10 36 18 32 30 32C42 32 50 36 50 44V56H10Z",fill:"#1e40af"}),r.jsx("path",{d:"M30 32L26 44H34L30 32Z",fill:"white"}),r.jsx("path",{d:"M29 44L30 50L31 44",fill:"white"})]})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{style:{fontWeight:700,fontSize:"17px",color:"#1e293b",marginBottom:"4px"},children:"(2) Department Staff"}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px",lineHeight:1.5},children:"Internal portal for department employees. Access tools and reports."}),r.jsx(te,{style:{background:"#1e40af",borderRadius:"4px",fontSize:"13px",fontWeight:600,padding:"8px 24px",height:"auto"},asChild:!0,children:r.jsx("a",{href:"/login",children:"Staff Login"})})]})]})}),r.jsx(me,{style:{borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:r.jsxs(ge,{style:{padding:"24px",display:"flex",gap:"20px",alignItems:"flex-start"},children:[r.jsx("div",{style:{flexShrink:0},children:r.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",children:[r.jsx("path",{d:"M6 46L22 40V16L6 22V46Z",fill:"#fcd34d"}),r.jsx("path",{d:"M22 40L38 46V22L22 16V40Z",fill:"#b45309"}),r.jsx("path",{d:"M38 46L54 40V16L38 22V46Z",fill:"#fcd34d"}),r.jsx("path",{d:"M30 36C30 36 22 28 22 18C22 12 26 8 30 8C34 8 38 12 38 18C38 28 30 36 30 36Z",fill:"#b45309",stroke:"white",strokeWidth:"2"}),r.jsx("circle",{cx:"30",cy:"18",r:"3",fill:"white"})]})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{style:{fontWeight:700,fontSize:"17px",color:"#1e293b",marginBottom:"4px"},children:"(3) Office Location"}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px",lineHeight:1.5},children:"Find our main office and regional centers. Get directions."}),r.jsx(te,{style:{background:"#b45309",borderRadius:"4px",fontSize:"13px",fontWeight:600,padding:"8px 24px",height:"auto"},asChild:!0,children:r.jsx("a",{href:"https://maps.google.com/?q=SDA+Complex+Kasumpti+Shimla",target:"_blank",rel:"noreferrer",children:"View Map"})})]})]})}),r.jsx(me,{style:{borderRadius:"16px",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},children:r.jsxs(ge,{style:{padding:"24px",display:"flex",gap:"20px",alignItems:"flex-start"},children:[r.jsx("div",{style:{flexShrink:0},children:r.jsxs("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none",children:[r.jsx("rect",{x:"10",y:"10",width:"40",height:"10",rx:"2",fill:"#7e22ce"}),r.jsx("rect",{x:"14",y:"13",width:"4",height:"4",fill:"white"}),r.jsx("rect",{x:"20",y:"13",width:"4",height:"4",fill:"white"}),r.jsx("rect",{x:"10",y:"24",width:"40",height:"10",rx:"2",fill:"#7e22ce"}),r.jsx("rect",{x:"14",y:"27",width:"4",height:"4",fill:"white"}),r.jsx("rect",{x:"20",y:"27",width:"4",height:"4",fill:"white"}),r.jsx("rect",{x:"10",y:"38",width:"40",height:"10",rx:"2",fill:"#7e22ce"}),r.jsx("circle",{cx:"44",cy:"48",r:"10",fill:"#a855f7",stroke:"white",strokeWidth:"2"}),r.jsx("path",{d:"M40 48L42 50L48 44",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),r.jsxs("div",{style:{flex:1},children:[r.jsx("h3",{style:{fontWeight:700,fontSize:"17px",color:"#1e293b",marginBottom:"4px"},children:"(4) System Status"}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:r.jsxs("span",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",background:"#dcfce7",color:"#166534",borderRadius:"4px",fontSize:"12px",fontWeight:600},children:[r.jsx(Fr,{size:12})," All Systems Operational"]})}),r.jsx("p",{style:{fontSize:"14px",color:"#64748b",marginBottom:"16px",lineHeight:1.5},children:"Check real-time status of portal services."}),r.jsx(te,{variant:"outline",style:{borderRadius:"4px",fontSize:"13px",fontWeight:600,padding:"8px 24px",height:"auto",borderColor:"#d8b4fe",color:"#7e22ce"},asChild:!0,children:r.jsx("a",{href:"/system-status",children:"View Details"})})]})]})})]}),r.jsxs("div",{style:{background:"#f8fafc",padding:"20px 0"},children:[r.jsx("h2",{style:{fontSize:"24px",fontWeight:700,textAlign:"center",marginBottom:"32px",color:"#1e293b"},children:"Frequently Asked Questions"}),r.jsx("div",{style:{maxWidth:"800px",margin:"0 auto"},children:Lut.map((n,s)=>r.jsxs("div",{style:{background:"white",borderRadius:"8px",border:"1px solid #e2e8f0",marginBottom:"8px",overflow:"hidden"},children:[r.jsxs("button",{onClick:()=>t(e===s?null:s),style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px",textAlign:"left",background:"none",border:"none",cursor:"pointer"},children:[r.jsx("span",{style:{fontSize:"15px",fontWeight:500,color:"#1e293b"},children:n.question}),r.jsx(Tm,{size:18,style:{color:"#94a3b8",transform:e===s?"rotate(180deg)":"none",transition:"transform 0.2s"}})]}),e===s&&r.jsx("div",{style:{padding:"0 16px 16px",fontSize:"14px",color:"#64748b",lineHeight:"1.6"},children:n.answer})]},s))})]}),r.jsxs("div",{style:{marginTop:"40px",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"16px",padding:"16px 20px",background:"linear-gradient(90deg, #fbbf24 0%, #f59e0b 100%)",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[r.jsx("div",{style:{background:"rgba(255,255,255,0.2)",padding:"8px",borderRadius:"50%"},children:r.jsx(jn,{size:20,style:{color:"#78350f"}})}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:800,color:"#78350f",fontSize:"14px"},children:"EMERGENCY ASSISTANCE:"}),r.jsx("div",{style:{color:"#92400e",fontSize:"13px"},children:"For immediate help during natural disasters or tourism-related emergencies, call our 24/7 helpline at 1077 or 112."})]})]}),r.jsx(te,{style:{background:"#78350f",color:"white",borderRadius:"50px",fontSize:"12px",fontWeight:600,padding:"8px 20px",height:"32px"},children:"Emergency Contacts"})]})]})]})}const wz={draft:{label:"Draft",color:"bg-gray-100 text-gray-800",icon:r.jsx(ir,{className:"w-4 h-4"})},submitted:{label:"Submitted",color:"bg-blue-100 text-blue-800",icon:r.jsx(Vs,{className:"w-4 h-4"})},under_review:{label:"Under Review",color:"bg-yellow-100 text-yellow-800",icon:r.jsx(Vs,{className:"w-4 h-4"})},under_scrutiny:{label:"Under Scrutiny",color:"bg-yellow-100 text-yellow-800",icon:r.jsx(Vs,{className:"w-4 h-4"})},inspection_scheduled:{label:"Inspection Scheduled",color:"bg-purple-100 text-purple-800",icon:r.jsx(Al,{className:"w-4 h-4"})},inspection_completed:{label:"Inspection Completed",color:"bg-indigo-100 text-indigo-800",icon:r.jsx(kr,{className:"w-4 h-4"})},approved:{label:"Approved",color:"bg-green-100 text-green-800",icon:r.jsx(kr,{className:"w-4 h-4"})},rejected:{label:"Rejected",color:"bg-red-100 text-red-800",icon:r.jsx(oo,{className:"w-4 h-4"})},correction_required:{label:"Correction Required",color:"bg-orange-100 text-orange-800",icon:r.jsx(Kr,{className:"w-4 h-4"})},payment_pending:{label:"Payment Pending",color:"bg-amber-100 text-amber-800",icon:r.jsx(Vs,{className:"w-4 h-4"})},certificate_issued:{label:"Certificate Issued",color:"bg-emerald-100 text-emerald-800",icon:r.jsx(kr,{className:"w-4 h-4"})}};function $ut(){const[,e]=Dr(),t=R_(),n=new URLSearchParams(t),s=n.get("app")||"",i=n.get("aadhaar")||"",a=n.get("phone")||"",[o,l]=b.useState(s||i||a),[c,d]=b.useState(s?"app":i?"aadhaar":a?"phone":"app"),[u,h]=b.useState(o),{data:f,isLoading:m,error:p}=rt({queryKey:["/api/applications/track",c,u],queryFn:async()=>{if(!u)return null;const x=await fetch(`/api/applications/track?${c}=${encodeURIComponent(u)}`);if(!x.ok){if(x.status===404)return null;throw new Error("Failed to fetch application")}return x.json()},enabled:!!u}),g=()=>{o.trim()&&h(o.trim())},v=x=>wz[x]||wz.draft;return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(jf,{title:"Track Application",subtitle:"Check your application status",showBack:!0,onBack:()=>e("/")}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[r.jsxs(me,{className:"mb-8",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(gu,{className:"w-5 h-5"}),"Search Application"]}),r.jsx(Ue,{children:"Enter your application number, Aadhaar number, or phone number to track status"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[r.jsxs("select",{className:"px-3 py-2 border rounded-md bg-background",value:c,onChange:x=>d(x.target.value),children:[r.jsx("option",{value:"app",children:"Application No."}),r.jsx("option",{value:"aadhaar",children:"Aadhaar No."}),r.jsx("option",{value:"phone",children:"Phone No."})]}),r.jsx(Pe,{placeholder:c==="app"?"HP-HS-2025-XXX-XXXXXX":c==="aadhaar"?"Enter 12-digit Aadhaar":"Enter 10-digit phone number",value:o,onChange:x=>l(x.target.value),onKeyDown:x=>x.key==="Enter"&&g(),className:"flex-1"}),r.jsx(te,{onClick:g,disabled:m,children:m?"Searching...":"Track"})]})})]}),m&&r.jsx(me,{children:r.jsxs(ge,{className:"py-12 text-center",children:[r.jsx(Vs,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground animate-spin"}),r.jsx("p",{className:"text-muted-foreground",children:"Searching for application..."})]})}),p&&r.jsx(me,{className:"border-red-200",children:r.jsxs(ge,{className:"py-12 text-center",children:[r.jsx(oo,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),r.jsx("p",{className:"text-red-600",children:"Error searching for application. Please try again."})]})}),!m&&!p&&u&&!f&&r.jsx(me,{className:"border-yellow-200",children:r.jsxs(ge,{className:"py-12 text-center",children:[r.jsx(Kr,{className:"w-12 h-12 mx-auto mb-4 text-yellow-500"}),r.jsx("p",{className:"text-yellow-700 font-medium mb-2",children:"Application Not Found"}),r.jsxs("p",{className:"text-muted-foreground",children:['No application found matching "',u,'". Please check the number and try again.']})]})}),f&&r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx(ke,{className:"text-xl",children:f.propertyName}),r.jsxs(Ue,{className:"text-base mt-1",children:["Application: ",f.applicationNumber]})]}),r.jsxs(ze,{className:v(f.status).color,children:[v(f.status).icon,r.jsx("span",{className:"ml-1",children:v(f.status).label})]})]})}),r.jsxs(ge,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(li,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Owner Name"}),r.jsx("p",{className:"font-medium",children:f.ownerName})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(SR,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),r.jsx("p",{className:"font-medium capitalize",children:f.category})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Js,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"District"}),r.jsx("p",{className:"font-medium",children:hu(f.district)})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Al,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Submitted On"}),r.jsx("p",{className:"font-medium",children:f.submittedAt?new Date(f.submittedAt).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):"Not submitted yet"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ir,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Rooms"}),r.jsxs("p",{className:"font-medium",children:[f.totalRooms," rooms"]})]})]})]})]}),f.status==="correction_required"&&f.remarks&&r.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:"Correction Required"}),r.jsx("p",{className:"text-orange-700 text-sm",children:f.remarks})]}),f.status==="rejected"&&f.remarks&&r.jsxs("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Rejection Reason"}),r.jsx("p",{className:"text-red-700 text-sm",children:f.remarks})]})]})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs(te,{variant:"outline",onClick:()=>e("/"),children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})]})}function But(){const[,e]=Dr(),t=R_(),s=new URLSearchParams(t).get("cert")||"",[i,a]=b.useState(s),[o,l]=b.useState(s),{data:c,isLoading:d,error:u}=rt({queryKey:["/api/certificates/verify",o],queryFn:async()=>{if(!o)return null;const f=await fetch(`/api/certificates/verify?cert=${encodeURIComponent(o)}`);if(!f.ok){if(f.status===404)return null;throw new Error("Failed to verify certificate")}return f.json()},enabled:!!o}),h=()=>{i.trim()&&l(i.trim())};return r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(jf,{title:"Verify Certificate",subtitle:"Check certificate authenticity",showBack:!0,onBack:()=>e("/")}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[r.jsxs(me,{className:"mb-8",children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Jo,{className:"w-5 h-5"}),"Verify Homestay Certificate"]}),r.jsx(Ue,{children:"Enter the certificate number to verify its authenticity"})]}),r.jsx(ge,{children:r.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[r.jsx(Pe,{placeholder:"Enter certificate number (e.g., HP-HS-CERT-2025-XXXXX)",value:i,onChange:f=>a(f.target.value),onKeyDown:f=>f.key==="Enter"&&h(),className:"flex-1"}),r.jsx(te,{onClick:h,disabled:d,children:d?"Verifying...":"Verify"})]})})]}),d&&r.jsx(me,{children:r.jsxs(ge,{className:"py-12 text-center",children:[r.jsx(Vs,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground animate-spin"}),r.jsx("p",{className:"text-muted-foreground",children:"Verifying certificate..."})]})}),u&&r.jsx(me,{className:"border-red-200",children:r.jsxs(ge,{className:"py-12 text-center",children:[r.jsx(oo,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),r.jsx("p",{className:"text-red-600",children:"Error verifying certificate. Please try again."})]})}),!d&&!u&&o&&!c&&r.jsx(me,{className:"border-red-200",children:r.jsxs(ge,{className:"py-12 text-center",children:[r.jsx(oo,{className:"w-12 h-12 mx-auto mb-4 text-red-500"}),r.jsx("p",{className:"text-red-700 font-medium mb-2",children:"Certificate Not Found"}),r.jsxs("p",{className:"text-muted-foreground",children:['No valid certificate found with number "',o,'". Please verify the certificate number and try again.']}),r.jsx("p",{className:"text-sm text-red-600 mt-4",children:" This certificate may be invalid or fraudulent. Please contact the Tourism Department for verification."})]})}),c&&r.jsxs(me,{className:"border-green-200",children:[r.jsx(Ce,{className:"bg-green-50",children:r.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"w-6 h-6 text-green-600"})}),r.jsxs("div",{children:[r.jsx(ke,{className:"text-xl text-green-800",children:"Valid Certificate"}),r.jsx(Ue,{className:"text-green-700",children:"This homestay certificate is authentic and valid"})]})]}),r.jsxs(ze,{className:"bg-green-100 text-green-800",children:[r.jsx(kr,{className:"w-4 h-4 mr-1"}),"Verified"]})]})}),r.jsxs(ge,{className:"pt-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(zh,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Certificate Number"}),r.jsx("p",{className:"font-medium font-mono",children:c.certificateNumber})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(SR,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Property Name"}),r.jsx("p",{className:"font-medium",children:c.propertyName})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(li,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Owner Name"}),r.jsx("p",{className:"font-medium",children:c.ownerName})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Js,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"District"}),r.jsx("p",{className:"font-medium",children:(()=>{const f=(c.district||"").toLowerCase();return f==="pangi"?"Chamba":f.includes("kaza")||f==="spiti"||f==="lahaul"?"Lahaul and Spiti":c.district})()})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(zh,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Category"}),r.jsx("p",{className:"font-medium capitalize",children:c.category})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Al,{className:"w-5 h-5 text-muted-foreground"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Valid Until"}),r.jsx("p",{className:"font-medium",children:c.validUntil?new Date(c.validUntil).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric"}):"Lifetime"})]})]})]})]}),r.jsxs("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[r.jsxs("h4",{className:"font-medium text-green-800 mb-2 flex items-center gap-2",children:[r.jsx(Jo,{className:"w-4 h-4"}),"Verification Successful"]}),r.jsxs("p",{className:"text-green-700 text-sm",children:["This certificate has been issued by the HP Tourism Department and is valid for operating a ",c.category," category homestay."]})]})]})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs(te,{variant:"outline",onClick:()=>e("/"),children:[r.jsx(Es,{className:"w-4 h-4 mr-2"}),"Back to Home"]})})]})]})}const Vut={water_non_motorized:{name:"Non-Motorized Water Sports",status:"active",activities:[{id:"paddle_boat",name:"Paddle Boat",description:"Recreational paddle boats for calm water activities",minEquipment:3,icon:xN},{id:"row_boat",name:"Row Boat",description:"Traditional row boats for water body operations",minEquipment:3,icon:t8},{id:"kayak",name:"Kayak",description:"Single or double kayaks for river/lake exploration",minEquipment:5,icon:yk},{id:"canoe",name:"Canoe",description:"Open canoes for group water activities",minEquipment:3,icon:t8}]},water_motorized:{name:"Motorized Water Sports",status:"active",activities:[{id:"motor_boat",name:"Motor Boat",description:"Motorized boats for touring and transport",minEquipment:2,icon:xN},{id:"speed_boat",name:"Speed Boat",description:"High-speed boats for recreational use",minEquipment:2,icon:xN},{id:"jet_ski",name:"Jet Ski",description:"Personal watercraft for adventure seekers",minEquipment:3,icon:yk}]},river_adventure:{name:"River & Rapids",status:"active",activities:[{id:"river_rafting",name:"River Rafting",description:"White water rafting on rivers and rapids",minEquipment:5,icon:yk}]},air_adventure:{name:"Air Adventure",status:"active",activities:[{id:"paragliding",name:"Paragliding",description:"Tandem and solo paragliding operations",minEquipment:1,icon:PR},{id:"zipline",name:"Zipline",description:"Zipline and aerial rope courses",minEquipment:1,icon:Fxe},{id:"bungee_jumping",name:"Bungee Jumping",description:"Bungee jumping platforms and facilities",minEquipment:1,icon:rh}]},land_adventure:{name:"Land Adventure",status:"active",activities:[{id:"trekking",name:"Trekking",description:"Guided trekking and hiking expeditions",minEquipment:1,icon:tve},{id:"mountain_biking",name:"Mountain Biking",description:"Off-road mountain biking trails and tours",minEquipment:5,icon:Ixe},{id:"rock_climbing",name:"Rock Climbing",description:"Natural and artificial climbing walls",minEquipment:5,icon:rh}]}};function Uut({value:e,onChange:t}){return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{className:"text-xl",children:"Activity Selection"}),r.jsx(Ue,{children:"Select the type of adventure activity you want to register"})]}),r.jsx(ge,{children:r.jsxs(aa,{defaultValue:"water_non_motorized",className:"space-y-4",children:[r.jsxs(Qi,{className:"grid grid-cols-3 lg:grid-cols-5 gap-1",children:[r.jsx(Pr,{value:"water_non_motorized",className:"text-xs",children:"Non-Motor Boats"}),r.jsx(Pr,{value:"water_motorized",className:"text-xs",children:"Motor Boats"}),r.jsx(Pr,{value:"river_adventure",className:"text-xs",children:"Rafting"}),r.jsx(Pr,{value:"air_adventure",className:"text-xs",children:"Air Sports"}),r.jsx(Pr,{value:"land_adventure",className:"text-xs",children:"Land Sports"})]}),Object.entries(Vut).map(([n,s])=>r.jsxs(Rr,{value:n,className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-medium",children:s.name}),s.status==="development"&&r.jsx(ze,{variant:"secondary",className:"text-xs bg-amber-100 text-amber-700",children:"Coming Soon"})]}),r.jsx(wc,{value:e||"",onValueChange:i=>t(i),className:"grid grid-cols-1 md:grid-cols-2 gap-4",disabled:s.status==="development",children:s.activities.map(i=>r.jsxs(je,{htmlFor:i.id,className:`flex items-start space-x-3 border rounded-lg p-4 cursor-pointer transition-colors ${s.status==="development"?"opacity-50 cursor-not-allowed":e===i.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[r.jsx(Ps,{value:i.id,id:i.id,className:"mt-1",disabled:s.status==="development"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(i.icon,{className:"h-4 w-4 text-primary"}),r.jsx("span",{className:"font-medium",children:i.name})]}),r.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:i.description}),r.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Min. Equipment: ",i.minEquipment]})]})]},i.id))})]},n))]})})]})}const ofe=new Date().getFullYear(),qut=Array.from({length:30},(e,t)=>ofe-t);function zut({activityType:e,equipment:t,onChange:n,minRequired:s=1}){const i=()=>{let h={firstAidKit:!0};["paddle_boat","row_boat","kayak","canoe","motor_boat","speed_boat","jet_ski","river_rafting"].includes(e)?h={...h,lifeJackets:4,lifebuoys:2}:["paragliding","zipline","bungy_jumping"].includes(e)?h={...h,helmet:!0,harness:!0,insuranceValid:!0}:["trekking","rock_climbing","mountain_biking"].includes(e)&&(h={...h,helmet:!0,communicationDevice:!0}),n([...t,{type:e,manufacturer:"",identificationNo:"",yearOfManufacture:ofe.toString(),safetyEquipment:h}])},a=h=>{n(t.filter((f,m)=>m!==h))},o=(h,f,m)=>{const p=[...t];f==="safetyEquipment"?p[h]={...p[h],safetyEquipment:m}:p[h]={...p[h],[f]:m},n(p)},l=(h,f,m)=>{const p=[...t];p[h]={...p[h],safetyEquipment:{...p[h].safetyEquipment,[f]:m}},n(p)},c=t.length>=s,u=["paddle_boat","row_boat","kayak","canoe","motor_boat","speed_boat","jet_ski","river_rafting"].includes(e)?"Boat/Craft":["paragliding"].includes(e)?"Glider":["zipline","bungee_jumping"].includes(e)?"Setup/Unit":["mountain_biking"].includes(e)?"Bike":"Unit";return r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{className:"text-xl",children:"Equipment / Unit Details"}),r.jsxs(Ue,{children:["Add details for each ",u.toLowerCase()]})]}),r.jsxs(te,{onClick:i,size:"sm",children:[r.jsx(Bm,{className:"h-4 w-4 mr-2"}),"Add ",u]})]})}),r.jsxs(ge,{className:"space-y-4",children:[!c&&r.jsxs(fn,{variant:"destructive",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsxs(mn,{children:["Minimum ",s," ",u.toLowerCase(),"(s) required. Currently: ",t.length]})]}),t.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(Lxe,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),r.jsxs("p",{children:['No equipment added yet. Click "Add ',u,'" to get started.']})]}):t.map((h,f)=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-4 relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium",children:[u," #",f+1]}),r.jsx(te,{variant:"ghost",size:"sm",onClick:()=>a(f),className:"text-destructive hover:text-destructive",children:r.jsx(nh,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`manufacturer-${f}`,children:"Manufacturer / Make"}),r.jsx(Pe,{id:`manufacturer-${f}`,value:h.manufacturer,onChange:m=>o(f,"manufacturer",m.target.value),placeholder:"e.g., Yamaha, Niviuk, Local"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`id-${f}`,children:"ID / Serial Number"}),r.jsx(Pe,{id:`id-${f}`,value:h.identificationNo,onChange:m=>o(f,"identificationNo",m.target.value),placeholder:"Unique ID"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`year-${f}`,children:"Year of Manufacture"}),r.jsxs(pr,{value:h.yearOfManufacture,onValueChange:m=>o(f,"yearOfManufacture",m),children:[r.jsx(ur,{children:r.jsx(yr,{})}),r.jsx(hr,{children:qut.map(m=>r.jsx(it,{value:m.toString(),children:m},m))})]})]})]}),r.jsxs("div",{className:"bg-muted/30 rounded-lg p-3 space-y-3",children:[r.jsx(je,{className:"text-sm font-medium",children:"Safety Equipment & Certifications"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[["paddle_boat","row_boat","kayak","canoe","motor_boat","speed_boat","jet_ski","river_rafting"].includes(e)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`jackets-${f}`,className:"text-xs",children:"Life Jackets"}),r.jsx(Pe,{id:`jackets-${f}`,type:"number",min:"0",value:h.safetyEquipment.lifeJackets||0,onChange:m=>l(f,"lifeJackets",parseInt(m.target.value)||0)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`buoys-${f}`,className:"text-xs",children:"Lifebuoys"}),r.jsx(Pe,{id:`buoys-${f}`,type:"number",min:"0",value:h.safetyEquipment.lifebuoys||0,onChange:m=>l(f,"lifebuoys",parseInt(m.target.value)||0)})]})]}),["paragliding","zipline","bungee_jumping"].includes(e)&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[r.jsx(Zs,{id:`helmet-${f}`,checked:h.safetyEquipment.helmet,onCheckedChange:m=>l(f,"helmet",!!m)}),r.jsx(je,{htmlFor:`helmet-${f}`,className:"text-xs",children:"Helmet Available"})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[r.jsx(Zs,{id:`harness-${f}`,checked:h.safetyEquipment.harness,onCheckedChange:m=>l(f,"harness",!!m)}),r.jsx(je,{htmlFor:`harness-${f}`,className:"text-xs",children:"Harness Certified"})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[r.jsx(Zs,{id:`insurance-${f}`,checked:h.safetyEquipment.insuranceValid,onCheckedChange:m=>l(f,"insuranceValid",!!m)}),r.jsx(je,{htmlFor:`insurance-${f}`,className:"text-xs",children:"Valid Insurance"})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-6",children:[r.jsx(Zs,{id:`firstaid-${f}`,checked:h.safetyEquipment.firstAidKit,onCheckedChange:m=>l(f,"firstAidKit",!!m)}),r.jsx(je,{htmlFor:`firstaid-${f}`,className:"text-xs",children:"First Aid Kit"})]})]})]})]},f))]})]})}function Hut({manpower:e,onChange:t,activityType:n}){const s=()=>n?["paddle_boat","row_boat"].includes(n)?"boatman":["motor_boat","speed_boat","jet_ski"].includes(n)?"motor_boat_driver":["paragliding"].includes(n)?"pilot":["trekking","rock_climbing"].includes(n)||["river_rafting"].includes(n)?"guide":"instructor":"staff",i=()=>{t([...e,{role:s(),name:"",dob:"",registrationNo:"",firstAidCertified:!1,technicalQualification:"",experienceYears:0}])},a=u=>{t(e.filter((h,f)=>f!==u))},o=(u,h,f)=>{const m=[...e];m[u]={...m[u],[h]:f},t(m)},c=e.length>=1,d=()=>{const u=[{value:"guide",label:"Guide"},{value:"instructor",label:"Instructor"},{value:"helper",label:"Helper"},{value:"manager",label:"Manager"}];return["paddle_boat","row_boat","kayak","canoe"].includes(n||"")&&u.unshift({value:"boatman",label:"Boatman"}),["motor_boat","speed_boat","jet_ski"].includes(n||"")&&(u.unshift({value:"motor_boat_driver",label:"Motor Boat Driver"}),u.unshift({value:"life_guard",label:"Life Guard"})),["paragliding"].includes(n||"")&&u.unshift({value:"pilot",label:"Pilot (Tandem)"}),u};return r.jsxs(me,{children:[r.jsx(Ce,{children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx(ke,{className:"text-xl",children:"Manpower / Staff Details"}),r.jsx(Ue,{children:"Add qualified staff details"})]}),r.jsxs(te,{onClick:i,size:"sm",children:[r.jsx(Bm,{className:"h-4 w-4 mr-2"}),"Add Staff"]})]})}),r.jsxs(ge,{className:"space-y-4",children:[!c&&r.jsxs(fn,{variant:"destructive",children:[r.jsx(Kr,{className:"h-4 w-4"}),r.jsxs(mn,{children:["At least ",1," qualified staff member required."]})]}),e.length===0?r.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[r.jsx(li,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),r.jsx("p",{children:'No staff added yet. Click "Add Staff" to get started.'})]}):e.map((u,h)=>r.jsxs("div",{className:"border rounded-lg p-4 space-y-4 relative",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h4",{className:"font-medium",children:["Staff Member #",h+1]}),r.jsx(te,{variant:"ghost",size:"sm",onClick:()=>a(h),className:"text-destructive hover:text-destructive",children:r.jsx(nh,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`role-${h}`,children:"Role"}),r.jsxs(pr,{value:u.role,onValueChange:f=>o(h,"role",f),children:[r.jsx(ur,{id:`role-${h}`,children:r.jsx(yr,{placeholder:"Select Role"})}),r.jsx(hr,{children:d().map(f=>r.jsx(it,{value:f.value,children:f.label},f.value))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`name-${h}`,children:"Full Name *"}),r.jsx(Pe,{id:`name-${h}`,value:u.name,onChange:f=>o(h,"name",f.target.value),placeholder:"Enter full name",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`dob-${h}`,children:"Date of Birth *"}),r.jsx(Pe,{id:`dob-${h}`,type:"date",value:u.dob,onChange:f=>o(h,"dob",f.target.value),required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`reg-${h}`,children:"License / Certificate No."}),r.jsx(Pe,{id:`reg-${h}`,value:u.registrationNo||"",onChange:f=>o(h,"registrationNo",f.target.value),placeholder:"If applicable"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:`qual-${h}`,children:"Tech. Qualification"}),r.jsx(Pe,{id:`qual-${h}`,value:u.technicalQualification||"",onChange:f=>o(h,"technicalQualification",f.target.value),placeholder:"e.g. Basic Course, P2"})]}),r.jsxs("div",{className:"flex items-center space-x-2 pt-8",children:[r.jsx(Zs,{id:`firstaid-${h}`,checked:u.firstAidCertified,onCheckedChange:f=>o(h,"firstAidCertified",!!f)}),r.jsx(je,{htmlFor:`firstaid-${h}`,children:"First Aid Certified"})]})]})]},h))]})]})}const Wut=["Bilaspur","Chamba","Hamirpur","Kangra","Kinnaur","Kullu","Lahaul and Spiti","Mandi","Shimla","Sirmaur","Solan","Una"];function Kut({data:e,onChange:t}){const n=(s,i)=>{t({...e,[s]:i})};return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{className:"text-xl",children:"Operator & Area Details"}),r.jsx(Ue,{children:"Provide information about the operator and location of operations"})]}),r.jsxs(ge,{className:"space-y-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"operatorType",children:"Operator Type *"}),r.jsxs(pr,{value:e.operatorType,onValueChange:s=>n("operatorType",s),children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select operator type"})}),r.jsxs(hr,{children:[r.jsx(it,{value:"individual",children:"Individual"}),r.jsx(it,{value:"company",children:"Company"}),r.jsx(it,{value:"society",children:"Society / Trust"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs(je,{htmlFor:"operatorName",children:[e.operatorType==="individual"?"Operator Name":"Business / Organization Name"," *"]}),r.jsx(Pe,{id:"operatorName",value:e.operatorName,onChange:s=>n("operatorName",s.target.value),placeholder:e.operatorType==="individual"?"Enter your full name":"Enter business name",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"address",children:"Local Office Address *"}),r.jsx(Ur,{id:"address",value:e.localOfficeAddress,onChange:s=>n("localOfficeAddress",s.target.value),placeholder:"Enter complete address of local office",rows:3,required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"district",children:"District *"}),r.jsxs(pr,{value:e.district,onValueChange:s=>n("district",s),children:[r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select district"})}),r.jsx(hr,{children:Wut.map(s=>r.jsx(it,{value:s,children:s},s))})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"waterBody",children:"Water Body Name *"}),r.jsx(Pe,{id:"waterBody",value:e.waterBodyName,onChange:s=>n("waterBodyName",s.target.value),placeholder:"e.g., Gobind Sagar Dam, Pong Dam, Renuka Lake",required:!0}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the name of the dam, lake, or river where you will operate"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(je,{htmlFor:"area",children:"Specific Area of Operation *"}),r.jsx(Ur,{id:"area",value:e.areaOfOperation,onChange:s=>n("areaOfOperation",s.target.value),placeholder:"Describe the specific area where you will offer services (e.g., 'Near Bhakra Dam tourist point, Bilaspur')",rows:2,required:!0})]})]})]})}const _x=[{id:1,title:"Activity Selection",description:"Choose your adventure activity"},{id:2,title:"Operator Details",description:"Your business information"},{id:3,title:"Equipment",description:"Boat and safety equipment details"},{id:4,title:"Manpower",description:"Boatman credentials"},{id:5,title:"Review & Submit",description:"Review and submit application"}],Gut={activityCategory:"water_sports",activityType:"non_motorized",activity:"paddle_boat",operatorType:"individual",operatorName:"",localOfficeAddress:"",district:"",waterBodyName:"",areaOfOperation:"",equipment:[],manpower:[]};function Yut(){const[,e]=Dr(),{toast:t}=Tr(),[n,s]=b.useState(1),[i,a]=b.useState(Gut),{data:o,isLoading:l}=rt({queryKey:["/api/auth/me"],retry:!1});if(b.useEffect(()=>{!l&&!(o!=null&&o.user)&&e("/login")},[l,o,e]),l)return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsx(Lr,{className:"h-8 w-48 mb-4"}),r.jsx(Lr,{className:"h-12 w-96 mb-2"}),r.jsx(Lr,{className:"h-6 w-64 mb-8"}),r.jsx(Lr,{className:"h-2 w-full mb-8"}),r.jsx(Lr,{className:"h-96 w-full rounded-xl"})]});if(!(o!=null&&o.user))return null;const c=n/_x.length*100,d=Ot({mutationFn:async()=>(await lt("POST","/api/adventure-sports/applications",{adventureSportsData:i})).json(),onSuccess:x=>{t({title:"Application Saved",description:"Your application has been saved as a draft."})},onError:x=>{t({title:"Save Failed",description:x.message||"Failed to save application.",variant:"destructive"})}}),u=Ot({mutationFn:async()=>{const x=await lt("POST","/api/adventure-sports/applications",{adventureSportsData:i}),{application:y}=await x.json();return(await lt("POST",`/api/adventure-sports/applications/${y.id}/submit`,{})).json()},onSuccess:x=>{t({title:"Application Submitted",description:"Your application has been submitted for review."}),e("/services")},onError:x=>{t({title:"Submission Failed",description:x.message||"Failed to submit application.",variant:"destructive"})}}),h=()=>i.activity?["paddle_boat","row_boat"].includes(i.activity)?3:["kayak","canoe","motor_boat","speed_boat","jet_ski","river_rafting"].includes(i.activity)?2:["paragliding","zipline"].includes(i.activity)?1:["trekking"].includes(i.activity)?0:1:1,f=()=>{switch(n){case 1:return i.activity!==null;case 2:return i.operatorName&&i.district&&i.waterBodyName&&i.areaOfOperation;case 3:return i.equipment.length>=h();case 4:return i.manpower.length>=1&&i.manpower.every(x=>x.name&&x.dob);case 5:return!0;default:return!1}},m=()=>{n<_x.length&&s(n+1)},p=()=>{n>1&&s(n-1)},g=()=>{u.mutate()},v=()=>{var x;switch(n){case 1:return r.jsx(Uut,{value:i.activity,onChange:y=>a({...i,activity:y})});case 2:return r.jsx(Kut,{data:{operatorType:i.operatorType,operatorName:i.operatorName,localOfficeAddress:i.localOfficeAddress,district:i.district,waterBodyName:i.waterBodyName,areaOfOperation:i.areaOfOperation},onChange:y=>a({...i,...y})});case 3:return r.jsx(zut,{activityType:i.activity,equipment:i.equipment,onChange:y=>a({...i,equipment:y}),minRequired:h()});case 4:return r.jsx(Hut,{manpower:i.manpower,onChange:y=>a({...i,manpower:y}),activityType:i.activity});case 5:return r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"text-xl flex items-center gap-2",children:[r.jsx(kr,{className:"h-5 w-5 text-green-600"}),"Review & Submit"]}),r.jsx(Ue,{children:"Please review your application before submitting"})]}),r.jsxs(ge,{className:"space-y-6",children:[r.jsxs("div",{className:"grid gap-4",children:[r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Activity"}),r.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:(x=i.activity)==null?void 0:x.replace("_"," ")})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Operator"}),r.jsx("p",{className:"text-sm",children:i.operatorName}),r.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.operatorType.charAt(0).toUpperCase()+i.operatorType.slice(1),"  ",i.district]})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Location / Area"}),r.jsx("p",{className:"text-sm",children:i.waterBodyName}),r.jsx("p",{className:"text-sm text-muted-foreground",children:i.areaOfOperation})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Equipment / Units"}),r.jsx("p",{className:"text-2xl font-bold",children:i.equipment.length})]}),r.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[r.jsx("h4",{className:"font-medium",children:"Staff"}),r.jsx("p",{className:"text-2xl font-bold",children:i.manpower.length})]})]})]}),r.jsxs("div",{className:"text-sm text-muted-foreground border-t pt-4",children:[r.jsx("p",{children:"By submitting this application, you declare that:"}),r.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[r.jsx("li",{children:"All information provided is true and accurate"}),r.jsx("li",{children:"You agree to comply with HP Adventure Sports Rules"}),r.jsx("li",{children:"You will maintain safety standards as required"})]})]})]})]});default:return null}};return r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(te,{variant:"ghost",onClick:()=>e("/services"),className:"mb-4",children:[r.jsx(Es,{className:"h-4 w-4 mr-2"}),"Back to Services"]}),r.jsx("h1",{className:"text-3xl font-bold",children:"Adventure Tourism Registration"}),r.jsx("p",{className:"text-muted-foreground mt-1",children:"Register for water sports, air sports, and land adventure operations"})]}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsxs("span",{className:"font-medium",children:["Step ",n," of ",_x.length]}),r.jsx("span",{className:"text-muted-foreground",children:_x[n-1].title})]}),r.jsx(f0,{value:c,className:"h-2"})]}),r.jsx("div",{className:"flex justify-between mb-8",children:_x.map(x=>r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${x.id<n?"bg-green-600 text-white":x.id===n?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:x.id<n?"":x.id}),r.jsx("span",{className:"text-xs mt-1 hidden md:block text-muted-foreground",children:x.title})]},x.id))}),r.jsx("div",{className:"mb-8",children:v()}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs(te,{variant:"outline",onClick:p,disabled:n===1,children:[r.jsx(Es,{className:"h-4 w-4 mr-2"}),"Previous"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(te,{variant:"outline",onClick:()=>d.mutate(),disabled:d.isPending,children:[r.jsx(pu,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),n<_x.length?r.jsxs(te,{onClick:m,disabled:!f(),children:["Next",r.jsx(sa,{className:"h-4 w-4 ml-2"})]}):r.jsxs(te,{onClick:g,disabled:!f()||u.isPending,children:[r.jsx(Zd,{className:"h-4 w-4 mr-2"}),"Submit Application"]})]})]})]})}const Xut=[{id:"homestay",name:"Homestays",description:"Register your B&B property",icon:Ba,color:"from-emerald-500 to-emerald-600",status:"active",route:"/dashboard",applications:"16,973"},{id:"hotels",name:"Hotels",description:"Hotel registration",icon:Cl,color:"from-slate-500 to-slate-600",status:"development",route:null,applications:"3,247"},{id:"guest_houses",name:"Guest Houses",description:"Commercial guest properties",icon:SR,color:"from-indigo-500 to-indigo-600",status:"development",route:null,applications:"2,156"},{id:"travel_agencies",name:"Travel Agencies",description:"Tour operators",icon:AR,color:"from-purple-500 to-purple-600",status:"development",route:null,applications:"1,834"},{id:"adventure_tourism",name:"Adventure Tourism",description:"Water sports, rafting, paragliding",icon:rh,color:"from-cyan-500 to-cyan-600",status:"active",route:"/dashboard",applications:"892"},{id:"transport",name:"Transport Operators",description:"Tourist transport services",icon:cQ,color:"from-orange-500 to-orange-600",status:"development",route:null,applications:"567"},{id:"restaurants",name:"Restaurants & Cafes",description:"Food establishments",icon:Vj,color:"from-red-500 to-red-600",status:"development",route:null,applications:"1,023"},{id:"winter_sports",name:"Skiing & Winter Sports",description:"Winter activity operators",icon:vQ,color:"from-sky-400 to-sky-500",status:"development",route:null,applications:"234"}],Qut=({status:e})=>{switch(e){case"active":return r.jsx(ze,{className:"bg-green-500 hover:bg-green-600",children:"Active"});case"new":return r.jsx(ze,{className:"bg-blue-500 hover:bg-blue-600",children:"New"});case"development":return r.jsx(ze,{variant:"secondary",className:"bg-amber-100 text-amber-700 hover:bg-amber-200",children:"Under Development"})}};function Zut(){var l;const[,e]=Dr(),{data:t,isLoading:n}=rt({queryKey:["/api/auth/me"],retry:!1}),{data:s}=rt({queryKey:["/api/settings/public"]});if(b.useEffect(()=>{!n&&!(t!=null&&t.user)&&e("/login")},[n,t,e]),n)return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-6",children:r.jsxs("div",{className:"max-w-6xl mx-auto",children:[r.jsx(Lr,{className:"h-12 w-64 mb-8"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(8)].map((c,d)=>r.jsx(Lr,{className:"h-48 rounded-xl"},d))})]})});const i=t==null?void 0:t.user,a=c=>{c.route&&e(c.route)},o=async()=>{await fetch("/api/auth/logout",{method:"POST"}),e("/login")};return r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:[r.jsx("header",{className:"bg-white dark:bg-slate-800 border-b shadow-sm",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-white font-bold text-lg",children:"HP"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"font-bold text-lg",children:"HP Tourism"}),r.jsx("p",{className:"text-xs text-muted-foreground",children:"eServices Portal"})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("span",{className:"text-sm text-muted-foreground hidden sm:block",children:i==null?void 0:i.fullName}),r.jsxs(te,{variant:"outline",size:"sm",onClick:o,children:[r.jsx(pQ,{className:"w-4 h-4 mr-2"}),"Logout"]})]})]})}),r.jsxs("main",{className:"max-w-6xl mx-auto px-6 py-12",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsxs("h2",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:["Welcome back, ",(l=i==null?void 0:i.fullName)==null?void 0:l.split(" ")[0],"!"]}),r.jsx("p",{className:"text-lg text-muted-foreground",children:"Select a service to continue"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Xut.filter(c=>c.id==="homestay"?!0:s!=null&&s.serviceVisibility?s.serviceVisibility[c.id]:c.id==="adventure_tourism").map(c=>{const d=c.icon,u=c.status!=="development";return r.jsxs(me,{className:`relative overflow-hidden transition-all duration-300 ${u?"cursor-pointer hover:shadow-lg hover:-translate-y-1":"opacity-75 cursor-not-allowed"}`,onClick:()=>u&&a(c),children:[r.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${c.color} opacity-10`}),r.jsxs(Ce,{className:"relative pb-2",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${c.color} flex items-center justify-center shadow-lg`,children:r.jsx(d,{className:"w-6 h-6 text-white"})}),r.jsx(Qut,{status:c.status})]}),r.jsx(ke,{className:"text-lg mt-4",children:c.name}),r.jsx(Ue,{children:c.description})]}),r.jsx(ge,{className:"relative pt-0",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-muted-foreground",children:[c.applications," applications"]}),u&&r.jsx(sa,{className:"w-4 h-4 text-muted-foreground"})]})})]},c.id)})}),r.jsxs("div",{className:"text-center mt-12 text-sm text-muted-foreground",children:[r.jsx("p",{children:'Services marked "Under Development" will be available soon.'}),r.jsx("p",{className:"mt-1",children:"For assistance, contact the HP Tourism Department."})]})]})]})}const Jut=[{id:"homestay",name:"Homestay",description:"Register and manage your bed & breakfast property",icon:Ba,status:"active"},{id:"adventure_sports",name:"Adventure Sports",description:"Water sports, rafting, paragliding activities",icon:rh,status:"coming_soon"},{id:"rafting",name:"Rafting",description:"River rafting operations",icon:xN,status:"coming_soon"},{id:"camping",name:"Camping",description:"Campsite operations",icon:_ve,status:"coming_soon"},{id:"paragliding",name:"Paragliding",description:"Paragliding services",icon:AR,status:"coming_soon"},{id:"hotel",name:"Hotel/Resort",description:"Hotel and resort registration",icon:Cl,status:"coming_soon"},{id:"tour_operator",name:"Tour Operator",description:"Tour and travel services",icon:Vj,status:"coming_soon"},{id:"trekking",name:"Trekking",description:"Trekking and mountaineering",icon:vQ,status:"coming_soon"}];function eht(){Dr();const{toast:e}=Tr(),t=ci(),{data:n,isLoading:s}=rt({queryKey:["/api/auth/me"]}),i=n==null?void 0:n.user,[a,o]=b.useState([]),[l,c]=b.useState(!1);b.useEffect(()=>{i!=null&&i.enabledServices?o(i.enabledServices):o(["homestay"])},[i]);const d=Ot({mutationFn:async f=>{const m=await fetch("/api/users/me/services",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabledServices:f})});if(!m.ok)throw new Error("Failed to save service preferences");return m.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/auth/me"]}),c(!1),e({title:"Services updated",description:"Your service preferences have been saved."})},onError:f=>{e({title:"Error",description:f.message,variant:"destructive"})}}),u=(f,m)=>{let p;if(m)p=[...a,f];else{if(a.length===1&&a[0]===f){e({title:"Cannot disable",description:"You must have at least one service enabled.",variant:"destructive"});return}p=a.filter(g=>g!==f)}o(p),c(!0)},h=()=>{d.mutate(a)};return s?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r.jsxs("div",{className:"min-h-screen bg-background",children:[r.jsx(jf,{title:"My Services",subtitle:"Select which services you offer",showBack:!1,showHome:!1}),r.jsx("div",{className:"container max-w-3xl mx-auto px-4 py-8",children:r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{children:"Service Preferences"}),r.jsx(Ue,{children:"Enable the services you want to manage. Only enabled services will appear in your sidebar."})]}),r.jsxs(ge,{className:"space-y-6",children:[Jut.map(f=>{const m=f.icon,p=a.includes(f.id),g=f.status==="active";return r.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${p?"border-primary/50 bg-primary/5":"border-border"} ${g?"":"opacity-60"}`,children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`p-2 rounded-lg ${p?"bg-primary/10":"bg-muted"}`,children:r.jsx(m,{className:`h-5 w-5 ${p?"text-primary":"text-muted-foreground"}`})}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(je,{htmlFor:f.id,className:"text-base font-medium cursor-pointer",children:f.name}),!g&&r.jsx(ze,{variant:"secondary",className:"text-xs",children:"Coming Soon"})]}),r.jsx("p",{className:"text-sm text-muted-foreground",children:f.description})]})]}),r.jsx(Zn,{id:f.id,checked:p,onCheckedChange:v=>u(f.id,v),disabled:!g})]},f.id)}),r.jsx("div",{className:"flex justify-end pt-4 border-t",children:r.jsxs(te,{onClick:h,disabled:!l||d.isPending,children:[d.isPending?r.jsx(vt,{className:"h-4 w-4 mr-2 animate-spin"}):r.jsx(pu,{className:"h-4 w-4 mr-2"}),"Save Preferences"]})})]})]})})]})}function Nz(){const[e,t]=b.useState(!1),{toast:n}=Tr(),s=ci(),i=lu({resolver:hf(YOe),defaultValues:{subject:"",description:"",category:"other",priority:"medium"}}),a=Ot({mutationFn:async o=>(await lt("POST","/api/grievances",o)).json(),onSuccess:()=>{n({title:"Grievance Submitted",description:"Your ticket has been created successfully."}),t(!1),i.reset(),s.invalidateQueries({queryKey:["/api/grievances"]})},onError:o=>{n({title:"Submission Failed",description:o.message,variant:"destructive"})}});return r.jsxs(us,{open:e,onOpenChange:t,children:[r.jsx(Vb,{asChild:!0,children:r.jsxs(te,{children:[r.jsx(Bm,{className:"w-4 h-4 mr-2"}),"Report Issue"]})}),r.jsxs(Jn,{className:"sm:max-w-[500px]",children:[r.jsxs(js,{children:[r.jsx(ws,{children:"Report a Grievance"}),r.jsx(Ns,{children:"Submit your issue related to HPTourism services."})]}),r.jsx(du,{...i,children:r.jsxs("form",{onSubmit:i.handleSubmit(o=>a.mutate(o)),className:"space-y-4",children:[r.jsx(ot,{control:i.control,name:"category",render:({field:o})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Category"}),r.jsxs(pr,{onValueChange:o.onChange,defaultValue:o.value,children:[r.jsx(dt,{children:r.jsx(ur,{children:r.jsx(yr,{placeholder:"Select category"})})}),r.jsxs(hr,{children:[r.jsx(it,{value:"application",children:"Application Issue"}),r.jsx(it,{value:"payment",children:"Payment Issue"}),r.jsx(it,{value:"portal",children:"Portal/Technical"}),r.jsx(it,{value:"other",children:"Other"})]})]}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"subject",render:({field:o})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Subject"}),r.jsx(dt,{children:r.jsx(Pe,{placeholder:"Brief summary of the issue",...o})}),r.jsx(ct,{})]})}),r.jsx(ot,{control:i.control,name:"description",render:({field:o})=>r.jsxs(at,{children:[r.jsx(ht,{children:"Detailed Description"}),r.jsx(dt,{children:r.jsx(Ur,{placeholder:"Please provide full details...",className:"h-32",...o})}),r.jsx(ct,{})]})}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(te,{type:"submit",disabled:a.isPending,children:a.isPending?"Submitting...":"Submit Ticket"})})]})})]})]})}function tht(e){return e.lastCommentAt?e.lastReadByOwner?new Date(e.lastCommentAt)>new Date(e.lastReadByOwner):new Date(e.lastCommentAt)>new Date(e.createdAt):!1}function Sz(){const[e,t]=b.useState(null),[n,s]=b.useState(""),{toast:i}=Tr(),a=ci(),{data:o,isLoading:l}=rt({queryKey:["/api/grievances"]}),{data:c}=rt({queryKey:["/api/grievances/unread-count"]}),{data:d,isLoading:u}=rt({queryKey:["/api/grievances",e==null?void 0:e.id],enabled:!!(e!=null&&e.id)}),h=Ot({mutationFn:async({grievanceId:v,comment:x})=>(await lt("POST",`/api/grievances/${v}/comments`,{comment:x})).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/grievances",e==null?void 0:e.id]}),a.invalidateQueries({queryKey:["/api/grievances"]}),a.invalidateQueries({queryKey:["/api/grievances/unread-count"]}),i({title:"Reply Sent",description:"Your reply has been added to the ticket."}),s("")},onError:()=>{i({title:"Error",description:"Failed to send reply. Please try again.",variant:"destructive"})}}),f=()=>{!(e!=null&&e.id)||!n.trim()||h.mutate({grievanceId:e.id,comment:n.trim()})};b.useEffect(()=>{e||(a.invalidateQueries({queryKey:["/api/grievances/unread-count"]}),a.invalidateQueries({queryKey:["/api/grievances"]}))},[e,a]);const m=d||e,p=v=>!v||v.length===0?r.jsx(me,{className:"bg-muted/50 border-dashed mt-4",children:r.jsxs(ge,{className:"flex flex-col items-center justify-center py-12 text-center",children:[r.jsx(dc,{className:"h-12 w-12 text-muted-foreground mb-4"}),r.jsx("h3",{className:"text-lg font-medium",children:"No tickets found"}),r.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"You have no tickets in this category."}),r.jsx(Nz,{})]})}):r.jsx("div",{className:"grid gap-4 mt-4",children:v.map(x=>{const y=tht(x);return r.jsxs(me,{className:`hover:shadow-md transition-all cursor-pointer ${y?"border-blue-400 bg-blue-50/50":"border-slate-200"}`,onClick:()=>t(x),children:[r.jsx(Ce,{className:"pb-3",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"space-y-1 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-mono text-xs text-muted-foreground bg-slate-100 px-2 py-0.5 rounded",children:x.ticketNumber}),r.jsx(ke,{className:"text-base font-semibold text-slate-900",children:x.subject}),y&&r.jsxs(ze,{className:"bg-blue-500 text-white text-[10px] px-2 py-0.5 animate-pulse",children:[r.jsx(Fm,{className:"w-3 h-3 mr-1"}),"New Reply"]})]}),r.jsxs(Ue,{children:["Reported on ",sr(new Date(x.createdAt),"PPP")]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_z,{status:x.status}),r.jsx(lf,{className:"w-4 h-4 text-gray-400"})]})]})}),r.jsxs(ge,{children:[r.jsx("p",{className:"text-sm text-slate-600 line-clamp-2",children:x.description}),r.jsxs("div",{className:"mt-4 flex items-center gap-4 text-xs text-muted-foreground pt-3 border-t",children:[r.jsxs("span",{className:"flex items-center gap-1",children:["Category: ",r.jsx(ze,{variant:"secondary",className:"font-normal capitalize",children:x.category})]}),x.updatedAt&&r.jsxs("span",{children:["Last updated: ",sr(new Date(x.updatedAt),"MMM d, h:mm a")]})]})]})]},x.id)})}),g=(c==null?void 0:c.unreadCount)||0;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-5xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Grievance Redressal"}),g>0&&r.jsxs(ze,{className:"bg-blue-500 text-white",children:[g," unread"]})]}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Track your reported issues and view their resolution status."})]}),r.jsx(Nz,{})]}),l?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})}):r.jsxs(aa,{defaultValue:"all",className:"w-full",children:[r.jsxs(Qi,{className:"grid w-full grid-cols-3 max-w-[400px]",children:[r.jsx(Pr,{value:"all",children:"All Tickets"}),r.jsx(Pr,{value:"open",children:"Open"}),r.jsx(Pr,{value:"resolved",children:"Resolved"})]}),r.jsx(Rr,{value:"all",children:p(o)}),r.jsx(Rr,{value:"open",children:p(o==null?void 0:o.filter(v=>["open","in_progress"].includes(v.status||"")))}),r.jsx(Rr,{value:"resolved",children:p(o==null?void 0:o.filter(v=>["resolved","closed"].includes(v.status||"")))})]})]}),r.jsx(us,{open:!!e,onOpenChange:v=>{v||(t(null),s(""))},children:r.jsxs(Jn,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs(js,{children:[r.jsxs(ws,{className:"flex items-center gap-2",children:[r.jsx("span",{className:"font-mono text-sm text-muted-foreground bg-slate-100 px-2 py-0.5 rounded",children:m==null?void 0:m.ticketNumber}),r.jsx("span",{children:m==null?void 0:m.subject})]}),r.jsx(Ns,{children:"View and respond to your reported issue"})]}),u?r.jsx("div",{className:"flex justify-center py-8",children:r.jsx(vt,{className:"h-6 w-6 animate-spin text-primary"})}):m&&r.jsxs("div",{className:"space-y-6 py-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(_z,{status:m.status}),m.priority&&r.jsx(ze,{className:rht(m.priority),children:m.priority.toUpperCase()})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Your Issue"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:m.description})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Category"}),r.jsx("p",{className:"mt-1 text-sm capitalize",children:m.category})]}),r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Submitted"}),r.jsx("p",{className:"mt-1 text-sm",children:sr(new Date(m.createdAt),"PPP p")})]})]}),m.resolutionNotes&&r.jsxs("div",{children:[r.jsx(je,{className:"text-sm font-medium text-gray-700",children:"Resolution Notes from Officer"}),r.jsxs("div",{className:"mt-1 text-sm text-gray-600 bg-emerald-50 p-3 rounded-lg border border-emerald-200",children:[r.jsx(Fr,{className:"w-4 h-4 text-emerald-600 inline mr-2"}),m.resolutionNotes]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs(je,{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[r.jsx(dc,{className:"w-4 h-4"}),"Conversation"]}),r.jsx("div",{className:"mt-3 space-y-3 max-h-48 overflow-y-auto",children:m.comments&&m.comments.length>0?m.comments.filter(v=>!v.isInternal).map(v=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(li,{className:"w-3 h-3 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500",children:sr(new Date(v.createdAt),"MMM d, h:mm a")})]}),r.jsx("p",{className:"text-sm text-gray-700",children:v.comment})]},v.id)):r.jsx("p",{className:"text-sm text-muted-foreground italic",children:"No replies yet. Add a reply below."})}),m.status!=="closed"&&r.jsxs("div",{className:"mt-4",children:[r.jsx(je,{htmlFor:"reply",className:"text-sm font-medium text-gray-700",children:"Add a Reply"}),r.jsx("div",{className:"mt-1 flex gap-2",children:r.jsx(Ur,{id:"reply",value:n,onChange:v=>s(v.target.value),placeholder:"Type your reply or provide additional information...",className:"flex-1 min-h-[80px]"})}),r.jsx("div",{className:"mt-2 flex justify-end",children:r.jsxs(te,{onClick:f,disabled:!n.trim()||h.isPending,size:"sm",children:[h.isPending?r.jsx(vt,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(Zd,{className:"w-4 h-4 mr-2"}),"Send Reply"]})})]}),m.status==="closed"&&r.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg text-sm text-gray-600 text-center",children:"This ticket has been closed. If you need further assistance, please create a new ticket."})]}),m.updatedAt&&r.jsxs("div",{className:"text-xs text-muted-foreground pt-4 border-t",children:["Last updated: ",sr(new Date(m.updatedAt),"PPP p")]})]})]})})]})}function _z({status:e}){const t={open:"bg-blue-100 text-blue-700 border-blue-200",in_progress:"bg-amber-100 text-amber-700 border-amber-200",resolved:"bg-emerald-100 text-emerald-700 border-emerald-200",closed:"bg-slate-100 text-slate-700 border-slate-200"},n=t.open,s={open:Kr,in_progress:Vs,resolved:Fr,closed:Fr},i=t[e]||n,a=s[e]||Kr;return r.jsxs(ze,{variant:"outline",className:`${i} flex items-center gap-1`,children:[r.jsx(a,{className:"w-3 h-3"}),r.jsx("span",{className:"capitalize",children:(e==null?void 0:e.replace("_"," "))||"open"})]})}function rht(e){const t={low:"bg-gray-100 text-gray-600",medium:"bg-blue-50 text-blue-600",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"};return t[e]||t.medium}const nht={payment:"bg-blue-500",application:"bg-green-500",portal:"bg-purple-500",other:"bg-gray-500"},sht={open:"bg-blue-500",in_progress:"bg-amber-500",resolved:"bg-emerald-500",closed:"bg-slate-500"},iht={low:"bg-gray-400",medium:"bg-blue-400",high:"bg-orange-500",urgent:"bg-red-500"};function Cz(){const{data:e,isLoading:t}=rt({queryKey:["/api/grievances/reports/dashboard-stats"]}),n=()=>{window.open("/api/grievances/reports/export","_blank")};if(t||!e)return r.jsx("div",{className:"flex justify-center items-center py-20",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})});const{summary:s,byCategory:i,byStatus:a,byPriority:o,monthlyTrend:l}=e,c=(s==null?void 0:s.totals)||{total:0,open:0,inProgress:0,resolved:0,closed:0},d=Math.max(...(i==null?void 0:i.map(u=>u.count))||[1]);return r.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-6xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold tracking-tight text-slate-900",children:"Grievance Reports"}),r.jsx("p",{className:"text-muted-foreground mt-2",children:"Analytics and insights for grievance management"})]}),r.jsxs(te,{onClick:n,variant:"outline",children:[r.jsx(ds,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[r.jsx(me,{className:"bg-gradient-to-br from-blue-50 to-white border-blue-200",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Tickets"}),r.jsx("p",{className:"text-3xl font-bold text-blue-700",children:c.total})]}),r.jsx(O3,{className:"h-10 w-10 text-blue-300"})]})})}),r.jsx(me,{className:"bg-gradient-to-br from-amber-50 to-white border-amber-200",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-amber-600",children:"Open"}),r.jsx("p",{className:"text-3xl font-bold text-amber-700",children:c.open+c.inProgress})]}),r.jsx(Kr,{className:"h-10 w-10 text-amber-300"})]})})}),r.jsx(me,{className:"bg-gradient-to-br from-emerald-50 to-white border-emerald-200",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-emerald-600",children:"Resolved"}),r.jsx("p",{className:"text-3xl font-bold text-emerald-700",children:c.resolved+c.closed})]}),r.jsx(Fr,{className:"h-10 w-10 text-emerald-300"})]})})}),r.jsx(me,{className:"bg-gradient-to-br from-purple-50 to-white border-purple-200",children:r.jsx(ge,{className:"pt-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Avg. Resolution"}),r.jsxs("p",{className:"text-3xl font-bold text-purple-700",children:[(s==null?void 0:s.averageResolutionDays)||0,r.jsx("span",{className:"text-sm font-normal ml-1",children:"days"})]})]}),r.jsx(Vs,{className:"h-10 w-10 text-purple-300"})]})})})]}),r.jsxs(me,{className:"mb-8",children:[r.jsx(Ce,{children:r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(cd,{className:"w-5 h-5"}),"Last 30 Days"]})}),r.jsx(ge,{children:r.jsxs("div",{className:"flex items-center gap-8",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"New Tickets"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:(s==null?void 0:s.last30Days.newTickets)||0})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-muted-foreground",children:"Resolved"}),r.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:(s==null?void 0:s.last30Days.resolvedTickets)||0})]})]})})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Bxe,{className:"w-5 h-5"}),"By Category"]}),r.jsx(Ue,{children:"Distribution of tickets by category"})]}),r.jsx(ge,{children:i&&i.length>0?r.jsx("div",{className:"space-y-3",children:i.map(u=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"w-24 text-sm capitalize",children:u.category}),r.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-4",children:r.jsx("div",{className:`h-4 rounded-full ${nht[u.category]||"bg-gray-500"}`,style:{width:`${u.count/d*100}%`}})}),r.jsx("span",{className:"w-8 text-sm font-medium text-right",children:u.count})]},u.category))}):r.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available"})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(O3,{className:"w-5 h-5"}),"By Status"]}),r.jsx(Ue,{children:"Current status distribution"})]}),r.jsx(ge,{children:a&&a.length>0?r.jsx("div",{className:"flex flex-wrap gap-4",children:a.map(u=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${sht[u.status]||"bg-gray-500"}`}),r.jsx("span",{className:"text-sm capitalize",children:u.status.replace("_"," ")}),r.jsx(ze,{variant:"secondary",children:u.count})]},u.status))}):r.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available"})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(Kr,{className:"w-5 h-5"}),"By Priority"]}),r.jsx(Ue,{children:"Tickets grouped by priority level"})]}),r.jsx(ge,{children:o&&o.length>0?r.jsx("div",{className:"flex flex-wrap gap-4",children:o.map(u=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${iht[u.priority]||"bg-gray-500"}`}),r.jsx("span",{className:"text-sm capitalize",children:u.priority}),r.jsx(ze,{variant:"secondary",children:u.count})]},u.priority))}):r.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available"})})]}),r.jsxs(me,{children:[r.jsxs(Ce,{children:[r.jsxs(ke,{className:"flex items-center gap-2",children:[r.jsx(cd,{className:"w-5 h-5"}),"Monthly Trend"]}),r.jsx(Ue,{children:"Tickets created per month (last 6 months)"})]}),r.jsx(ge,{children:l&&l.length>0?r.jsx("div",{className:"space-y-2",children:l.map(u=>{const h=Math.max(...l.map(f=>f.count));return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"w-20 text-sm",children:u.month}),r.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-3",children:r.jsx("div",{className:"h-3 rounded-full bg-blue-500",style:{width:`${u.count/h*100}%`}})}),r.jsx("span",{className:"w-8 text-sm font-medium text-right",children:u.count})]},u.month)})}):r.jsx("p",{className:"text-muted-foreground text-sm",children:"No data available"})})]})]})]})}function aht({config:e}){const[t,n]=b.useState(""),[s,i]=b.useState(!1),a=UCe(e),o=l=>{if(l.preventDefault(),!t.trim())return;const c=new URL(window.location.href);c.searchParams.set("access_key",t.trim()),window.location.href=c.toString()};return r.jsx("div",{className:"min-h-screen w-full bg-slate-100 flex items-center justify-center p-4",children:r.jsxs(me,{className:"max-w-md w-full shadow-2xl border-t-4 border-t-orange-500",children:[r.jsxs(Ce,{className:"text-center space-y-4",children:[r.jsx("div",{className:"mx-auto bg-orange-100 w-16 h-16 rounded-full flex items-center justify-center mb-4",children:r.jsx(jn,{className:"w-8 h-8 text-orange-600"})}),r.jsx(ke,{className:"text-2xl font-bold text-slate-900",children:"Site Maintenance"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-lg font-medium text-slate-700",children:a}),r.jsx("p",{className:"text-muted-foreground text-sm",children:"We apologize for the inconvenience. Please check back later."})]})]}),r.jsx(ge,{className:"space-y-6",children:r.jsxs("div",{className:"bg-white p-4 rounded-lg border border-slate-200 text-sm text-center text-slate-600",children:["Department of Tourism & Civil Aviation",r.jsx("br",{}),"Government of Himachal Pradesh"]})}),r.jsx(Pee,{className:"flex flex-col gap-4 bg-slate-50 pt-6 rounded-b-xl border-t",children:s?r.jsxs("form",{onSubmit:o,className:"w-full space-y-3 animate-in fade-in slide-in-from-bottom-2",children:[r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-medium text-slate-500 ml-1",children:"Access Key"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Pe,{type:"password",value:t,onChange:l=>n(l.target.value),placeholder:"Enter key...",className:"h-9"}),r.jsx(te,{type:"submit",size:"sm",className:"h-9",children:r.jsx(sa,{className:"w-4 h-4"})})]})]}),r.jsx(te,{type:"button",variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>i(!1),children:"Cancel"})]}):r.jsxs(te,{variant:"ghost",size:"sm",className:"text-xs text-slate-400 hover:text-slate-600 w-full",onClick:()=>i(!0),children:[r.jsx(su,{className:"w-3 h-3 mr-1.5"}),"Administrator Access"]})})]})})}const oht="/assets/v-cliq-logo-CiVIXGWs.jpg";function lht(){var d,u,h,f;const[,e]=Dr(),[t,n]=b.useState(null),[s,i]=b.useState(null);b.useEffect(()=>{var g,v,x,y,j;const p=new URLSearchParams(window.location.search).get("data");if(p)try{const w=JSON.parse(decodeURIComponent(p));n({sso_id:((g=w.sso_data)==null?void 0:g.sso_id)||w.sso_id,name:((v=w.sso_data)==null?void 0:v.name)||w.name,mobile:((x=w.sso_data)==null?void 0:x.mobile)||w.mobile,email:((y=w.sso_data)==null?void 0:y.email)||w.email,district:((j=w.sso_data)==null?void 0:j.district)||w.district,existing_user:w.existing_user,link_token:w.link_token})}catch{i("Invalid link data. Please try logging in again.")}else i("No linking data provided."),setTimeout(()=>e("/login"),2e3)},[e]);const a=Ot({mutationFn:async()=>{var p;if(!t)throw new Error("No SSO data");return(await lt("POST","/api/auth/hpsso/link-public",{sso_id:t.sso_id,existing_user_id:(p=t.existing_user)==null?void 0:p.id,link_token:t.link_token})).json()},onSuccess:()=>{sessionStorage.removeItem("sso_link_data"),e("/dashboard")},onError:m=>{i(m.message||"Failed to link account. Please try again.")}}),o=()=>{sessionStorage.removeItem("sso_link_data"),e("/login")},l=()=>{sessionStorage.setItem("sso_registration_data",JSON.stringify({sso_id:t==null?void 0:t.sso_id,name:t==null?void 0:t.name,mobile:t==null?void 0:t.mobile,email:t==null?void 0:t.email,district:t==null?void 0:t.district,token:"sso-link-redirect"})),sessionStorage.removeItem("sso_link_data"),e("/register?sso=true")},c=!((d=t==null?void 0:t.existing_user)!=null&&d.fullName)||t.existing_user.fullName==="Unknown"||!((u=t==null?void 0:t.existing_user)!=null&&u.username)||t.existing_user.username==="user";return t?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:r.jsxs(me,{className:"w-full max-w-lg shadow-xl border-0",children:[r.jsxs(Ce,{className:"text-center pb-2",children:[r.jsx("div",{className:"mx-auto mb-4 h-16 w-16 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:r.jsx(hve,{className:"h-8 w-8 text-white"})}),r.jsx(ke,{className:"text-2xl font-bold text-gray-800",children:c?"Create Your Account":"Link Your Account"}),r.jsx(Ue,{className:"text-gray-600",children:c?"No existing account found. Create a new account using your HimAccess identity.":"We found an existing account that matches your HimAccess credentials"})]}),r.jsxs(ge,{className:"space-y-6",children:[s&&r.jsx(fn,{variant:"destructive",children:r.jsx(mn,{children:s})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"rounded-xl border-2 border-blue-200 bg-blue-50/50 p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx(Gi,{className:"h-5 w-5 text-blue-600"}),r.jsx("span",{className:"font-semibold text-blue-800 text-sm",children:"HimAccess"})]}),r.jsx("p",{className:"font-medium text-gray-800 truncate",children:t.name}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:t.mobile||t.email}),t.district&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.district})]}),r.jsxs("div",{className:`rounded-xl border-2 p-4 ${c?"border-amber-200 bg-amber-50/50":"border-green-200 bg-green-50/50"}`,children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c?r.jsx("img",{src:oht,alt:"VCliq",className:"h-5 w-5 rounded"}):r.jsx(li,{className:"h-5 w-5 text-green-600"}),r.jsx("span",{className:`font-semibold text-sm ${c?"text-amber-800":"text-green-800"}`,children:c?"HomeStay Portal":"Your Account"})]}),r.jsx("p",{className:"font-medium text-gray-800 truncate",children:c?"Not registered yet":((h=t.existing_user)==null?void 0:h.fullName)||"Unknown"}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:c?"Create your account below":`@${((f=t.existing_user)==null?void 0:f.username)||"user"}`})]})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"flex items-center gap-2 text-gray-500",children:r.jsx("span",{className:"text-sm",children:c?"Your HimAccess identity will be linked to your new account":"These will be linked together"})})}),r.jsxs("div",{className:"flex flex-col gap-3 pt-2",children:[!c&&r.jsx(te,{size:"lg",className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",onClick:()=>a.mutate(),disabled:a.isPending,children:a.isPending?r.jsxs(r.Fragment,{children:[r.jsx(vt,{className:"mr-2 h-4 w-4 animate-spin"}),"Linking..."]}):r.jsxs(r.Fragment,{children:["Yes, Link My Account",r.jsx(sa,{className:"ml-2 h-4 w-4"})]})}),c&&r.jsxs(te,{size:"lg",className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700",onClick:l,children:[r.jsx(gm,{className:"mr-2 h-5 w-5"}),"Create New Account",r.jsx(sa,{className:"ml-2 h-4 w-4"})]}),r.jsxs(te,{variant:"ghost",size:"lg",className:"w-full text-gray-600",onClick:o,disabled:a.isPending,children:[r.jsx(sh,{className:"mr-2 h-4 w-4"}),"Cancel"]}),s&&!c&&r.jsxs(te,{variant:"outline",size:"lg",className:"w-full border-green-300 text-green-700 hover:bg-green-50 hover:text-green-800",onClick:l,disabled:a.isPending,children:[r.jsx(gm,{className:"mr-2 h-4 w-4"}),"Register New Account Instead"]})]}),r.jsx("p",{className:"text-xs text-center text-gray-500 pt-2",children:c||s?"Create a new account using your HimAccess identity.":"After linking, you can use HimAccess to log in directly."})]})]})}):r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-blue-600"})})}function cht(){const[,e]=Dr(),t=R_(),[n,s]=b.useState(!0),[i,a]=b.useState(null),[o,l]=b.useState(null);return b.useEffect(()=>{const c=new URLSearchParams(t),d=c.get("token"),u=c.get("data");if(u)try{const f=JSON.parse(decodeURIComponent(u));if(f.action==="register"&&f.sso_data)l(f.sso_data),sessionStorage.setItem("sso_registration_data",JSON.stringify({...f.sso_data,token:f.token||"pre-verified"})),setTimeout(()=>e("/register?sso=true"),1500);else throw new Error("Invalid data format");s(!1);return}catch(f){console.error("Failed to parse SSO data:",f)}if(!d){a("No SSO token or data provided. Please try logging in again."),s(!1);return}(async()=>{try{const f=await fetch(`/api/auth/hpsso/validate-json?token=${encodeURIComponent(d)}`);if(!f.ok){const p=await f.json();throw new Error(p.error||"Server validation failed")}const m=await f.json();if(m.action==="register"&&m.sso_data)l(m.sso_data),sessionStorage.setItem("sso_registration_data",JSON.stringify({...m.sso_data,token:d})),setTimeout(()=>{e("/register?sso=true")},1500);else if(m.action==="login")e("/dashboard");else if(m.action==="link_required"){const p=encodeURIComponent(JSON.stringify(m));e(`/sso-link?data=${p}`)}else a("Unexpected response from server. Please try again.")}catch(f){console.error("SSO validation error:",f),a(f instanceof Error?f.message:"Failed to validate SSO token. Please try again.")}finally{s(!1)}})()},[t,e]),n?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center p-4",children:r.jsx(me,{className:"w-full max-w-md",children:r.jsxs(Ce,{className:"text-center",children:[r.jsxs(ke,{className:"flex items-center justify-center gap-2",children:[r.jsx(vt,{className:"h-6 w-6 animate-spin text-primary"}),"Verifying Your Identity"]}),r.jsx(Ue,{children:"Please wait while we verify your HimAccess SSO credentials..."})]})})}):i?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center p-4",children:r.jsxs(me,{className:"w-full max-w-md",children:[r.jsx(Ce,{className:"text-center",children:r.jsxs(ke,{className:"flex items-center justify-center gap-2 text-destructive",children:[r.jsx(jn,{className:"h-6 w-6"}),"Verification Failed"]})}),r.jsxs(ge,{className:"space-y-4",children:[r.jsx(fn,{variant:"destructive",children:r.jsx(mn,{children:i})}),r.jsxs("div",{className:"flex justify-center gap-2",children:[r.jsx(te,{variant:"outline",onClick:()=>e("/login"),children:"Back to Login"}),r.jsx(te,{onClick:()=>window.location.reload(),children:"Try Again"})]})]})]})}):o?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white flex items-center justify-center p-4",children:r.jsxs(me,{className:"w-full max-w-md",children:[r.jsxs(Ce,{className:"text-center",children:[r.jsxs(ke,{className:"flex items-center justify-center gap-2 text-green-600",children:[r.jsx(gm,{className:"h-6 w-6"}),"Welcome, ",o.name,"!"]}),r.jsxs(Ue,{children:["Your identity has been verified via HimAccess.",r.jsx("br",{}),"Redirecting you to complete your registration..."]})]}),r.jsx(ge,{children:r.jsx("div",{className:"flex justify-center",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})})})]})}):null}function Or({component:e,allowedRoles:t}){const[,n]=Dr(),{data:s,isLoading:i}=rt({queryKey:["/api/auth/me"]});if(i)return r.jsx(q8,{children:r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})});if(!(s!=null&&s.user))return n("/login"),null;if(t&&!t.includes(s.user.role)){const a=tC(s.user.role);return n(a),null}return r.jsx(q8,{children:r.jsx(e,{})})}function dht({component:e,allowedRoles:t}){const[,n]=Dr(),{data:s,isLoading:i}=rt({queryKey:["/api/auth/me"]});if(i)return r.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:r.jsx("p",{className:"text-muted-foreground",children:"Loading..."})});if(!(s!=null&&s.user))return n("/login"),null;if(t&&!t.includes(s.user.role)){const a=tC(s.user.role);return n(a),null}return r.jsx(e,{})}function uht(){return r.jsxs(Xge,{children:[r.jsx(Jt,{path:"/",component:WCe}),r.jsx(Jt,{path:"/properties",component:F6e}),r.jsx(Jt,{path:"/properties/:id",component:$6e}),r.jsx(Jt,{path:"/procedure-checklist",component:B6e}),r.jsx(Jt,{path:"/login",component:zke}),r.jsx(Jt,{path:"/sso-link",component:lht}),r.jsx(Jt,{path:"/auth/hpsso-register",component:cht}),r.jsx(Jt,{path:"/register",component:Wke}),r.jsx(Jt,{path:"/contact",children:()=>r.jsx(Fut,{})}),r.jsx(Jt,{path:"/track",children:()=>r.jsx($ut,{})}),r.jsx(Jt,{path:"/verify-certificate",children:()=>r.jsx(But,{})}),r.jsx(Jt,{path:"/print/affidavit",component:Oq}),r.jsx(Jt,{path:"/print/undertaking",component:Rq}),r.jsx(Jt,{path:"/system-status",component:jat}),r.jsx(Jt,{path:"/print-affidavit",component:Oq}),r.jsx(Jt,{path:"/print-undertaking",component:Rq}),r.jsx(Jt,{path:"/services",children:()=>r.jsx(Zut,{})}),r.jsx(Jt,{path:"/dashboard",children:()=>r.jsx(Or,{component:LEe})}),r.jsx(Jt,{path:"/dashboard-new",children:()=>r.jsx(Or,{component:XEe,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/profile",children:()=>r.jsx(Or,{component:kRe,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/service-settings",children:()=>r.jsx(Or,{component:eht,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/existing-owner",children:()=>r.jsx(Or,{component:Mut,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/applications/service-request",children:()=>r.jsx(Or,{component:f6e,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/applications/new",children:()=>r.jsx(Or,{component:h6e,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/grievances",children:()=>r.jsx(Or,{component:Sz,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/help",children:()=>r.jsx(Or,{component:V6e,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/adventure-sports/register",children:()=>r.jsx(Yut,{})}),r.jsx(Jt,{path:"/applications/:id/payment-himkosh",children:()=>r.jsx(Or,{component:M6e,allowedRoles:["property_owner"]})}),r.jsx(Jt,{path:"/applications/:id",children:()=>r.jsx(Or,{component:_6e})}),r.jsx(Jt,{path:"/analytics",children:()=>r.jsx(Or,{component:bat,allowedRoles:["dealing_assistant","district_tourism_officer","district_officer","state_officer","admin"]})}),r.jsx(Jt,{path:"/workflow-monitoring",children:()=>r.jsx(Or,{component:Iat,allowedRoles:["dealing_assistant","district_tourism_officer","district_officer","state_officer","admin"]})}),r.jsx(Jt,{path:"/payment-verification",children:()=>r.jsx(Or,{component:Yat,allowedRoles:["district_officer","state_officer"]})}),r.jsx(Jt,{path:"/state-dashboard",children:()=>r.jsx(Or,{component:iot,allowedRoles:["state_officer","admin","super_admin"]})}),r.jsx(Jt,{path:"/admin",children:()=>r.jsx(Or,{component:Yq,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/users",children:()=>r.jsx(Or,{component:Xat,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/console",children:()=>r.jsx(Or,{component:Zat,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/lgd-import",children:()=>r.jsx(Or,{component:aot,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/audit-log",children:()=>r.jsx(Or,{component:Wot,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/payment-reports",children:()=>r.jsx(Or,{component:Xlt,allowedRoles:["district_tourism_officer","district_officer","state_officer","admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/rc-applications",children:()=>r.jsx(Or,{component:Kot,allowedRoles:["admin_rc","admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/rc-applications/:id",children:()=>r.jsx(Or,{component:tlt,allowedRoles:["admin_rc","admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/rc-applications/:id/certificate",children:()=>r.jsx(Or,{component:Hq,allowedRoles:["admin_rc","admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/rc-application-certificate",children:()=>r.jsx(Or,{component:Hq,allowedRoles:["admin_rc","admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/legacy-owner-support",children:()=>r.jsx(Or,{component:nlt,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/test-runner",children:()=>r.jsx(Or,{component:slt,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/super-dashboard",children:()=>r.jsx(Or,{component:Yq,allowedRoles:["super_admin"]})}),r.jsx(Jt,{path:"/admin/super-console",children:()=>r.jsx(Or,{component:Olt,allowedRoles:["super_admin"]})}),r.jsx(Jt,{path:"/admin/backup",children:()=>r.jsx(Or,{component:Llt,allowedRoles:["super_admin"]})}),r.jsx(Jt,{path:"/admin/export-import",children:()=>r.jsx(Or,{component:$lt,allowedRoles:["super_admin"]})}),r.jsx(Jt,{path:"/admin/policy-settings",children:()=>r.jsx(Or,{component:Blt,allowedRoles:["admin","super_admin","system_admin"]})}),r.jsx(Jt,{path:"/admin/payment-test-kotak",children:()=>r.jsx(Or,{component:Glt,allowedRoles:["admin","super_admin"]})}),r.jsx(Jt,{path:"/admin/seed-tools",children:()=>r.jsx(Or,{component:Ylt,allowedRoles:["super_admin"]})}),r.jsx(Jt,{path:"/admin/system-controls",children:()=>r.jsx(Or,{component:Hlt,allowedRoles:["super_admin"]})}),r.jsx(Jt,{path:"/da/dashboard",children:()=>r.jsx(Or,{component:nct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/legacy",children:()=>r.jsx(Or,{component:oct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/profile",children:()=>r.jsx(Or,{component:Pct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/applications/:id",children:()=>r.jsx(Or,{component:cct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/incomplete-applications",children:()=>r.jsx(Or,{component:wct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/inspections",children:()=>r.jsx(Or,{component:Nct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/inspections/:id",children:()=>r.jsx(Or,{component:_ct,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/search",children:()=>r.jsx(Or,{component:jz,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/grievances",children:()=>r.jsx(Or,{component:Sz,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/da/grievance-reports",children:()=>r.jsx(Or,{component:Cz,allowedRoles:["dealing_assistant"]})}),r.jsx(Jt,{path:"/dtdo/dashboard",children:()=>r.jsx(Or,{component:Ect,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/legacy",children:()=>r.jsx(Or,{component:Rct,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/applications/:id",children:()=>r.jsx(dht,{component:gut,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/schedule-inspection/:id",children:()=>r.jsx(Or,{component:but,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/inspection-review/:id",children:()=>r.jsx(Or,{component:Nut,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/profile",children:()=>r.jsx(Or,{component:Sut,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/search",children:()=>r.jsx(Or,{component:jz,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/grievances",children:()=>r.jsx(Or,{component:Aut,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{path:"/dtdo/grievance-reports",children:()=>r.jsx(Or,{component:Cz,allowedRoles:["district_tourism_officer","district_officer"]})}),r.jsx(Jt,{component:l2e})]})}function hht({children:e}){var i;Ae.useEffect(()=>{const o=new URLSearchParams(window.location.search).get("access_key");o&&(localStorage.setItem("maintenance_key",o),window.history.replaceState({},"",window.location.pathname))},[]);const t=localStorage.getItem("maintenance_key"),{data:n,isLoading:s}=rt({queryKey:["/api/settings/public",t],queryFn:async()=>{const a=t?`/api/settings/public?access_key=${encodeURIComponent(t)}`:"/api/settings/public",o=await fetch(a);if(!o.ok)throw new Error("Failed to fetch settings");return o.json()}});return s?r.jsx("div",{className:"h-screen w-screen flex items-center justify-center bg-white",children:r.jsx(vt,{className:"h-8 w-8 animate-spin text-primary"})}):(i=n==null?void 0:n.maintenanceMode)!=null&&i.enabled?r.jsx(aht,{config:n.maintenanceMode}):r.jsx(r.Fragment,{children:e})}function fht(){return r.jsx(gxe,{client:er,children:r.jsx(Bbe,{children:r.jsx(Ube,{children:r.jsxs(RZ,{children:[r.jsx(cye,{}),r.jsx(hht,{children:r.jsx(uht,{})})]})})})})}IX(document.getElementById("root")).render(r.jsx(fht,{}));export{cs as _,qw as c,ts as g};
